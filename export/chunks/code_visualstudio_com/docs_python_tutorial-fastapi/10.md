---
url: https://code.visualstudio.com/docs/python/tutorial-fastapi
session_id: fast_api
chunk_number: 10
title: Adding Items with FastAPI
summary: This section demonstrates how to create a FastAPI application with a route to add items to a grocery list. It includes input validation for the quantity and logic to check for existing items, updating the quantity if the item exists or creating a new item if it does not.
embedding: [-0.05112014338374138, -0.007075290195643902, -0.053556665778160095, -0.02827773243188858, -0.017594512552022934, -0.05135442316532135, -0.03891409561038017, 0.026965757831931114, 0.031112534925341606, 0.012077192775905132, 0.03516559675335884, -0.0547749288380146, -0.0016648602904751897, -0.04245173931121826, -0.00963481143116951, 0.0042814877815544605, 0.023100119084119797, 0.02586463652551174, -0.031276531517505646, 0.08958910405635834, 0.04334200918674469, 0.014431717805564404, 0.0006702636601403356, -0.004870119038969278, -0.001723430585116148, 0.012662895023822784, 0.043388865888118744, 0.04933960735797882, -0.011649629101157188, -0.0597885437309742, 0.015122846700251102, -0.006934721488505602, 0.017430515959858894, 0.011046355590224266, -0.03413476049900055, -0.011637914925813675, 0.006114737596362829, 0.07885903120040894, 0.055805765092372894, -0.006278734188526869, -8.135778625728562e-05, 0.0027308394201099873, 0.045145973563194275, 0.0039652083069086075, 0.016727672889828682, 0.050745293498039246, -0.026965757831931114, 0.02175300382077694, -0.04748878628015518, -0.036266718059778214, 0.016247397288680077, -0.013600019738078117, -0.05168241634964943, -0.02619262970983982, 0.006483730394393206, -0.024458950385451317, -0.03764897957444191, 0.01273317914456129, 0.0033209349494427443, 0.02860572561621666, -0.011251351796090603, -0.05229154974222183, -0.04383400082588196, 0.00941810104995966, -0.046200238168239594, -0.011825339868664742, -0.014150580391287804, 0.005321110133081675, -0.01615368388593197, 0.054681215435266495, -0.013119743205606937, -0.02595834992825985, -0.031276531517505646, -0.036875851452350616, 0.033853624016046524, -0.046668801456689835, -0.01910562627017498, 0.06199078634381294, 0.020780736580491066, -0.07857789099216461, -0.046668801456689835, 0.03197937458753586, -0.005326967220753431, -0.04275630787014961, 0.00516589917242527, -0.05566519871354103, -0.08096756041049957, 0.002047031419351697, 0.028090307489037514, -0.06620784848928452, -0.028137164190411568, 0.015111133456230164, 0.007350570522248745, 0.03591529652476311, 0.02079245075583458, 0.0048554763197898865, 0.04957388713955879, 0.011825339868664742, -0.017969362437725067, 0.05261954292654991, 0.0852314755320549, -0.012862034142017365, -0.0018464281456544995, -0.02450580708682537, 0.04060092195868492, -0.02271355502307415, -0.012955746613442898, 0.033361632376909256, -0.011532488279044628, -0.07871846109628677, -0.01761794090270996, -0.006021025124937296, -0.0020719238091260195, 0.01718452014029026, -0.008574689738452435, 0.04381057247519493, -0.023228975012898445, 0.0015711478190496564, -0.006138165481388569, -0.018519923090934753, -0.002442380879074335, 0.0057779583148658276, -0.006688726134598255, -0.056742891669273376, -0.04692650958895683, -0.0017395374597981572, -0.012487184256315231, -0.0451694019138813, -0.04413856565952301, -0.00979880802333355, 0.06644213199615479, -0.01615368388593197, 0.04943331703543663, -0.012006907723844051, -0.03394733741879463, 0.009763666428625584, -0.019257908686995506, 0.006870293989777565, -0.027574889361858368, 0.05172927305102348, 0.001177994767203927, -0.04807448759675026, -0.029214857146143913, -0.011796055361628532, 0.01993732340633869, -0.02923828549683094, -0.019984180107712746, -0.05182298645377159, -0.006026882212609053, -0.0005644711200147867, 0.048824187368154526, 0.00958795566111803, -0.009242390282452106, -0.04552082344889641, 0.020745594054460526, -0.010782789438962936, 0.022666700184345245, 0.012698037549853325, 0.017336804419755936, 7.957321940921247e-05, -0.05336924269795418, -0.029542850330471992, -0.02450580708682537, -0.06606727838516235, -0.014595714397728443, 0.00020700934692285955, -0.03427533060312271, -0.02940228208899498, -0.038726672530174255, -0.0626467764377594, -0.02420124039053917, 0.00033366758725605905, -0.012206046842038631, -0.016528533771634102, -0.06822266429662704, -0.008281838148832321, 0.0016341109294444323, -0.022924408316612244, -0.009781237691640854, 0.00897296704351902, -0.007420854642987251, -0.010525079444050789, -0.09614897519350052, 0.02079245075583458, -0.014513716101646423, -0.029777131974697113, -0.013190027326345444, 0.012698037549853325, -0.046739086508750916, 0.01993732340633869, 0.003315078094601631, -0.01711423695087433, -0.020042750984430313, 0.015286844223737717, -0.029987985268235207, -0.018191929906606674, 0.02175300382077694, -0.010712504386901855, 0.04116319492459297, 0.04877733066678047, -0.007057718932628632, 0.04791049286723137, 0.01691509783267975, 0.0023325614165514708, -0.010847216472029686, -0.08457548916339874, -0.018719062209129333, 0.049620743840932846, -0.018355926498770714, -0.03162795305252075, -0.030503403395414352, -0.03837525099515915, -0.02516179345548153, 0.009804665111005306, 0.02642691135406494, 0.016961954534053802, -0.03397076576948166, 0.03860953077673912, 0.019211051985621452, 0.060538243502378464, -0.03886723890900612, 0.02708289958536625, 0.014267721213400364, -0.01728994771838188, 0.0008016807259991765, 0.011796055361628532, 0.006079595535993576, -0.000963481143116951, -0.012077192775905132, -0.007737134583294392, -0.0011655485723167658, 0.014689426869153976, 0.013061173260211945, 0.01438486110419035, 0.06161593645811081, 0.012487184256315231, 0.008117841556668282, -0.03790668770670891, -0.02586463652551174, 0.025302361696958542, -0.020476171746850014, -0.015579694882035255, -0.018918201327323914, -0.02211613953113556, 0.059882257133722305, -0.00047551747411489487, -0.02698918618261814, -0.041303765028715134, 0.01745394431054592, 0.034978173673152924, 0.06719183176755905, -0.027528032660484314, -0.0018669277196750045, -0.04460712894797325, 0.004542125388979912, -0.02973027527332306, 0.015169703401625156, -0.0013405273202806711, -0.010349368676543236, 0.05065158009529114, 0.0031481527257710695, 0.057726871222257614, 0.02370925061404705, 0.028230875730514526, -0.004553839564323425, 0.026895474642515182, -0.0011435847263783216, 0.054025229066610336, -0.014197436161339283, 0.005672531668096781, 0.0017278234008699656, 0.01901191473007202, 0.01993732340633869, -0.029589707031846046, 0.005895099136978388, -0.00031518132891505957, -0.00965238269418478, -0.042334601283073425, 0.03924208879470825, -0.06278734654188156, -0.014162294566631317, -0.022467561066150665, 0.011866339482367039, 0.020839307457208633, 0.003906637895852327, 0.01049579493701458, 0.005420679692178965, 0.005821886006742716, 0.0020909591112285852, 0.007297857198864222, 0.005804315209388733, 0.05543091520667076, -0.017992790788412094, -0.049714457243680954, 0.032002802938222885, 0.024810371920466423, -0.01473628357052803, -0.012170905247330666, 0.036875851452350616, 0.0022461703047156334, 0.03535302355885506, 0.05285382270812988, 0.007397426757961512, 0.015509410761296749, -0.016469962894916534, -0.05618061497807503, 0.008849970065057278, -0.013131457380950451, 0.014876851812005043, -0.007145574316382408, 0.028418300673365593, 0.031135963276028633, -0.003812925424426794, -0.031042249873280525, -0.02506808191537857, -0.005526106338948011, -0.00968752522021532, -0.045872244983911514, -0.013131457380950451, -0.015392269939184189, 0.012463755905628204, -0.004035492427647114, -0.02334611490368843, 0.039944931864738464, -0.007350570522248745, -0.027434321120381355, -0.016013115644454956, -0.005567105486989021, -0.0279497392475605, -0.019445333629846573, 0.007573137525469065, 0.037602122873067856, 0.0004952849703840911, 0.02151872217655182, 0.01026151329278946, 0.01705566607415676, 0.022561272606253624, 0.029097717255353928, 0.04598938673734665, 0.04605967178940773, 0.023486683145165443, -0.012627753429114819, 0.017781937494874, 0.0015067205531522632, -0.04287344589829445, 0.013283739797770977, 0.02579435333609581, 0.06794153153896332, -0.052525829523801804, 0.015685122460126877, 0.026473768055438995, 0.0007855739095248282, 0.023533539846539497, 0.02092130482196808, -0.043552860617637634, -0.01638796553015709, -0.03572787344455719, -0.005236183293163776, -0.06274048984050751, -0.004922832362353802, -0.058195434510707855, -0.0012731715105473995, -0.024740086868405342, 0.0027118041180074215, 0.0013954369351267815, -0.007022576872259378, 0.04275630787014961, -0.053228672593832016, -0.09319703280925751, 0.0020455671474337578, 0.04109290987253189, 0.0307611133903265, 0.008117841556668282, 0.001368348253890872, -0.0586639940738678, -0.030784539878368378, -0.013178314082324505, 0.04692650958895683, 0.030714256688952446, -0.025841208174824715, 0.0304565466940403, -0.00047002651263028383, -0.012826891615986824, 0.0301988385617733, 0.05847657099366188, 0.006149879656732082, -0.016833098605275154, 0.03853924572467804, 0.0002560619614087045, -0.009968661703169346, 0.030737685039639473, -0.036243289709091187, 0.033923909068107605, 0.052994392812252045, 0.01963275857269764, -0.0020733880810439587, 0.05341609939932823, 0.05561834201216698, 0.014209150336682796, 0.010267370380461216, 0.04013235867023468, 0.010753504000604153, -0.026637764647603035, 0.011948337778449059, 0.00841069221496582, -0.00943567231297493, 0.03631357476115227, 0.03692270815372467, 0.0006673351745121181, -0.015767119824886322, 0.012580896727740765, 0.022830696776509285, 0.025583500042557716, 0.011362634599208832, -0.007713706232607365, -0.02490408346056938, 0.0003569126711227, 0.01774679496884346, 0.006823437754064798, -0.03549358993768692, 0.0017117165261879563, -0.05758630111813545, 0.0030983679462224245, 0.010624649003148079, -0.02354525402188301, -0.037531837821006775, 0.016282537952065468, -0.01854335144162178, -0.005113185849040747, 0.01554455328732729, -0.04022607207298279, -0.025278933346271515, 0.0074384259060025215, -0.009265818633139133, 0.04235802963376045, -0.052338406443595886, -0.009447386488318443, 0.029027432203292847, 0.018531637266278267, -0.03422847390174866, -0.01629425212740898, -0.055009208619594574, 0.024716658517718315, 0.023006407544016838, -0.008275981061160564, -0.035212453454732895, 0.02804345078766346, 0.0005040704854764044, 0.041608329862356186, 0.015649979934096336, -0.0015462554292753339, 0.016833098605275154, -0.055477771908044815, 0.019129054620862007, -0.006026882212609053, -0.0285120140761137, 0.00023775873705744743, -0.05880456417798996, 0.02844172902405262, 0.00938881654292345, 0.0335724875330925, 0.04509911686182022, 0.03186223283410072, -0.021776430308818817, -0.0023091332986950874, 0.008205696940422058, 0.018262214958667755, -0.004512840416282415, -0.01857849396765232, -0.0030427263118326664, 0.0021641720086336136, -0.029214857146143913, 0.00999794714152813, 0.003953494131565094, -0.04116319492459297, -0.06531757861375809, 0.03851581737399101, 0.03875010088086128, 0.004214131738990545, 0.06700440496206284, -0.014232578687369823, -0.004337129648774862, -0.03516559675335884, -0.01897677220404148, -0.037461552768945694, 0.029753703624010086, 0.014689426869153976, -0.014150580391287804, -0.015298557467758656, -0.018168501555919647, -0.026403483003377914, 0.03083139657974243, 0.022608129307627678, -0.011509060859680176, -0.00989837758243084, -0.017407087609171867, 0.023123547434806824, -0.004053063690662384, 0.012370043434202671, -0.02122586965560913, -0.01526341587305069, -0.05842971429228783, -0.008463406004011631, -0.007608279585838318, -0.008082699030637741, -0.030081696808338165, 0.030151981860399246, -0.005127828102558851, 0.012522326782345772, 0.04109290987253189, -0.040928915143013, -0.012534040957689285, 0.010056518018245697, -0.016446534544229507, 0.0022930265404284, 0.029027432203292847, -0.0052947537042200565, 0.031440526247024536, -0.01794593408703804, 0.009078393690288067, -0.0170908086001873, 0.019843611866235733, 0.01689166948199272, 0.017887365072965622, -0.0032740787137299776, -0.01029665581882, -0.00040157249895855784, -0.08734000474214554, 0.029449138790369034, -0.03350220248103142, 0.019644472748041153, 0.0053123245015740395, -0.023205546662211418, 0.049714457243680954, -0.005098543129861355, 0.0013456522719934583, -0.011268922127783298, -0.00905496533960104, 0.046411093324422836, -0.03479074686765671, -0.009365388192236423, 0.04263916611671448, 0.01615368388593197, -0.001118692453019321, 0.008639116771519184, -0.001653146231546998, 0.022666700184345245, -0.011555916629731655, -0.006431017071008682, 0.018098216503858566, 0.013518021441996098, 0.002361846622079611, 0.005198112688958645, -0.006231877952814102, 0.0026532337069511414, 0.03610272333025932, 0.0024716658517718315, 0.0036547856871038675, 0.003924209158867598, 0.0015345413703471422, 0.01685652695596218, -0.021249298006296158, 0.02755146101117134, 0.025138365104794502, -0.045778531581163406, 0.02947256714105606, 0.01943361945450306, 0.01638796553015709, -0.046739086508750916, -0.01751251518726349, -0.014595714397728443, -0.003200866049155593, 0.017629655078053474, -0.014478573575615883, 0.004706122446805239, 0.02387324720621109, -0.008785542100667953, -0.031370244920253754, -0.005690102931112051, 0.031604524701833725, -0.04821505770087242, 0.0027542675379663706, 0.004202418029308319, -0.005742816254496574, -0.04718422144651413, -0.01365858968347311, 0.01867220550775528, 0.0076551358215510845, 0.016903383657336235, -0.02724689617753029, 0.014291148632764816, -0.010226371698081493, 0.01894162967801094, -0.021975569427013397, -0.009828093461692333, -0.0010806217323988676, -0.019878754392266273, 0.02222156524658203, -0.02420124039053917, 0.003227222478017211, -0.022034140303730965, 0.0321902260184288, -0.023627251386642456, 0.04985502362251282, -0.0434357225894928, -0.0002558789274189621, 0.0043722717091441154, -0.006179164629429579, -0.01894162967801094, -0.024974368512630463, 0.0195976160466671, 0.0059683118015527725, -0.031112534925341606, -0.046411093324422836, 0.02884000726044178, -0.027738885954022408, -0.002200778340920806, 0.04439627379179001, 0.03303363919258118, -0.015040848404169083, -0.006513015367090702, -0.03134681656956673, 0.04615338146686554, -0.008680116385221481, 0.010519222356379032, 0.0031188675202429295, -0.0029226571787148714, -0.057398878037929535, 0.007936273701488972, -0.014689426869153976, 0.024412093684077263, 0.025606928393244743, 0.021694432944059372, 0.005274253897368908, -0.010507509112358093, 0.0304565466940403, 0.0036694281734526157, -0.017840508371591568, -0.003285792889073491, 0.021413294598460197, -0.0024526305496692657, 0.002061673905700445, 0.011919052340090275, -0.027340607717633247, 0.004641694948077202, -0.012979174964129925, -0.005133685190230608, 0.0023882032837718725, 0.007133860606700182, 0.009148677811026573, 0.005886313505470753, -0.021331297233700752, -0.005098543129861355, 0.012862034142017365, 0.0333147756755352, 0.012955746613442898, 0.0022271350026130676, 0.005684245843440294, -0.011274779215455055, 0.01393972709774971, -0.022865839302539825, 0.004697336815297604, -0.007567280437797308, 0.025278933346271515, 0.037063274532556534, 0.0160951130092144, 0.00879139918833971, 0.046270523220300674, 0.02724689617753029, 0.029777131974697113, -0.024716658517718315, -0.009710952639579773, 0.033595915883779526, -0.009828093461692333, -0.02434181049466133, 0.003874424146488309, 0.02062845416367054, 0.0062845912761986256, -0.031135963276028633, 0.016645673662424088, -0.02281898260116577, -0.0010315690888091922, -0.05308810621500015, 0.008721115067601204, 0.03029255010187626, -0.04980816692113876, -0.006969863548874855, 0.014115437865257263, -0.0024028457701206207, 0.03308049589395523, 0.0005329895648173988, -0.0034702892880886793, -4.2440574361535255e-06, -2.3450991648132913e-05, -0.005060472525656223, 0.05430636554956436, 0.0037162844091653824, 0.012662895023822784, -0.004477698355913162, -0.056133758276700974, -0.005139542277902365, -0.00991594884544611, 0.024130957201123238, -0.0400620736181736, -0.04830877110362053, 0.0327056460082531, -0.008094413205981255, 0.021940428763628006, 0.0030690827406942844, 0.0034410040825605392, -0.0061088805086910725, 0.012709751725196838, -0.015685122460126877, 0.016563676297664642, -0.052760109305381775, 0.018965058028697968, -0.040741488337516785, -0.003918352071195841, -0.01669253036379814, 0.00043634860776364803, -0.0204644575715065, 0.03467360883951187, -0.006237735040485859, -0.024458950385451317, -0.006489587482064962, -0.03614958003163338, -0.010583650320768356, 0.04605967178940773, 0.01450200192630291, -0.008334551006555557, -0.006079595535993576, -0.00268544745631516, -0.02645033970475197, 0.009593812748789787, -0.011596916243433952, 0.0001974916667677462, -0.016727672889828682, -0.007292000111192465, 0.013248598203063011, 0.016680816188454628, -0.03406447544693947, 0.0010959964711219072, -0.006442731246352196, 0.00448648352175951, -0.04181918129324913, -0.022959550842642784, -0.0013412594562396407, 0.028957147151231766, -0.04261573776602745, -0.029378853738307953, -0.043224867433309555, 0.006583299953490496, -0.023193832486867905, 0.044185422360897064, -0.0014130080817267299, 0.003221365623176098, 0.022432418540120125, 0.03005826845765114, -0.042334601283073425, 0.02980056032538414, -0.0026268772780895233, 0.005356252193450928, 0.019316479563713074, 0.005745744798332453, -0.021811572834849358, -0.007707849144935608, 0.013049459084868431, 0.003657714230939746, 0.007128003519028425, 0.016341108828783035, 0.012920604087412357, -0.029613135382533073, -0.01007994543761015, -0.013026030734181404, 0.04976131394505501, -0.05290067940950394, -5.641965617542155e-05, 0.00862740259617567, -0.008106127381324768, -0.02811373583972454, -0.022690126672387123, 0.011468061245977879, -0.013998297974467278, -0.01830906979739666, 0.02175300382077694, 0.006038596387952566, 0.0038158539682626724, 0.014478573575615883, -0.030550260096788406, -0.02291269414126873, -0.010337654501199722, -0.021307868883013725, -0.04812134429812431, -0.03685242310166359, -0.006296305451542139, -1.746812995406799e-05, 0.017442230135202408, -0.08401321619749069, -0.013881157152354717, 0.021143872290849686, -0.011848768219351768, 0.010853073559701443, 0.012346616014838219, -0.006647726986557245, 0.04296715930104256, -0.005162970628589392, -0.027598317712545395, 0.009248247370123863, 0.004009135998785496, 0.017266519367694855, -0.0017161093419417739, 0.06231877952814102, -0.001085746567696333, 0.022795554250478745, -0.005695960018783808, 0.0026283415500074625, -0.02691890113055706, 0.014244292862713337, 0.02443552203476429, 0.01827392913401127, 0.018496494740247726, 0.0051951841451227665, 0.01682138442993164, 0.005763316061347723, 0.014291148632764816, 0.07478253543376923, 0.0006091309478506446, 0.014876851812005043, -0.0006021757144480944, -0.03818782418966293, -0.003812925424426794, -0.028722867369651794, 0.032963354140520096, 0.023135261610150337, 0.005675460211932659, 0.01586083322763443, 0.016282537952065468, 0.03317420929670334, -0.006606727838516235, 0.01999589428305626, -0.006735582370311022, -0.01702052354812622, -0.020909590646624565, -0.031135963276028633, 0.004550911020487547, 0.00822912435978651, -0.030573688447475433, 0.014314576983451843, -0.0038451391737908125, -0.01595454476773739, -0.0007456729072146118, 0.028933720663189888, 0.007877702824771404, -0.009956948459148407, -0.018929915502667427, -0.01844963990151882, -0.02556007169187069, 0.024294953793287277, 0.03108910657465458, -0.009664096869528294, -0.019293051213026047, 0.01410372368991375, -0.02818402089178562, 0.019293051213026047, 0.01013265922665596, -0.01702052354812622, 0.021694432944059372, 0.03083139657974243, -0.0033912193030118942, 0.0010776931885629892, 0.0212844405323267, -0.0002146966871805489, 0.0020528885070234537, 0.007180716842412949, 0.02780917100608349, -0.024950940161943436, -0.040577493607997894, 0.014759710989892483, -0.007924559526145458, 0.03029255010187626, 0.017266519367694855, 0.0006475676782429218, 0.0075379954650998116, 0.023170404136180878, 0.011567630805075169, -0.008012414909899235, -0.015298557467758656, 0.04167861491441727, -0.006155736744403839, 0.01642310805618763, -0.00468562263995409, -0.016481677070260048, 0.02987084351480007, -0.006062024272978306, -0.0037689977325499058, -0.002096816198900342, -0.016926812008023262, 0.0034029334783554077, 0.038492389023303986, -0.016106827184557915, 0.016165398061275482, -0.00824669562280178, 0.010167800821363926, 0.006114737596362829, -0.021811572834849358, 0.011456347070634365, 0.020312173292040825, 0.019457047805190086, 0.014970564283430576, 0.021635862067341805, 0.029144572094082832, -0.019222766160964966, -0.02450580708682537, 0.01745394431054592, 0.025278933346271515, -0.00938881654292345, 0.030737685039639473, -0.02032388746738434, 0.03139367327094078, 0.00909010786563158, 0.04242831468582153, -0.004468912724405527, 0.00963481143116951, 0.005690102931112051, 0.003171580843627453, -0.023568682372570038, -0.023978672921657562, 0.003962279763072729, 0.031135963276028633, 0.001065246993675828, 0.05463435873389244, 0.02151872217655182, -0.0028728723991662264, 0.04310772940516472, -0.03378333896398544, -0.07586023211479187, 0.008486834354698658, -0.01718452014029026, -0.015556267462670803, -0.014314576983451843, -0.01478313934057951, -0.0008712329436093569, 0.024716658517718315, 0.028816578909754753, 0.0068644373677670956, -0.01863706484436989, -0.01914076879620552, 0.0016209325985983014, 0.0023062049876898527, -0.007742991205304861, -0.010109230875968933, -0.024716658517718315, 0.03821125254034996, -0.019925611093640327, -0.03036283515393734, -0.03558730334043503, 0.007918702438473701, 0.0018786417786031961, 0.008258409798145294, 0.025700639933347702, -0.05215097963809967, -0.007701992057263851, -0.005324038676917553, -0.00930681824684143, -0.02532579004764557, 0.008937825448811054, -0.005950740538537502, -0.013670303858816624, 0.043459150940179825, -0.002025067573413253, 0.02126101218163967, 0.03703984618186951, 0.015193131752312183, 0.022830696776509285, -0.028933720663189888, -0.00045831245370209217, 0.01887134462594986, -0.03125310316681862, -0.0030427263118326664, -0.0037104273214936256, -0.006366589572280645, 0.010700791142880917, 0.006056167185306549, 0.004890618845820427, 0.007356427609920502, 0.021471865475177765, 0.014244292862713337, -0.0007401819457300007, 0.00796555820852518, -0.007707849144935608, 0.0443025603890419, 0.020675309002399445, 0.0039417799562215805, -0.01629425212740898, -0.005259611178189516, -0.008188125677406788, 0.047629352658987045, -0.0006073006079532206, 0.01486513763666153, 0.011333350092172623, -0.020206747576594353, -0.014396575279533863, 0.028394872322678566, -0.023135261610150337, 0.0023662394378334284, -0.007936273701488972, 0.05463435873389244, -0.006190878804773092, -0.014888565987348557, 0.0025419502053409815, -0.004480626434087753, -0.0195976160466671, -0.015556267462670803, -0.013166599906980991, -0.0042082746513187885, -0.03762555122375488, -0.017489086836576462, -0.040671203285455704, 0.025817779824137688, -0.03727412968873978, -0.012487184256315231, -0.048589907586574554, 0.0048789046704769135, -0.008029986172914505, 0.029777131974697113, 0.0010528007987886667, 0.01021465752273798, 0.011919052340090275, 0.044981978833675385, -0.04484140872955322, -0.01651681959629059, 0.02731717936694622, -0.019328193739056587, -0.008685972541570663, -0.030105125159025192, 0.022010711953043938, -0.0023105975706130266, -0.02973027527332306, 0.012159191071987152, -0.006214307155460119, -0.02787945419549942, 0.024060672149062157, -0.014841709285974503, 0.011280636303126812, 0.05636804178357124, 0.05229154974222183, 0.0019020698964595795, -0.005839457269757986, 0.0044718412682414055, -0.022889265790581703, -0.032073087990283966, 0.013365739025175571, -0.035610731691122055, 0.008738686330616474, -0.010220514610409737, -0.0114212054759264, -0.014888565987348557, 0.035212453454732895, -0.0182153582572937, 0.02452923357486725, 0.023627251386642456, -0.03394733741879463, -0.006659441161900759, -0.012920604087412357, 0.050604723393917084, 0.03715698793530464, 0.042006608098745346, -0.021647576242685318, -0.029097717255353928, -0.029425710439682007, -0.010530936531722546, 0.040975768119096756, -0.03718041628599167, 0.02516179345548153, 0.007602422498166561, -0.009986232966184616, -0.022807268425822258, -0.011942480690777302, 0.0287697222083807, -0.01705566607415676, 0.024786943569779396, 0.007186573930084705, 0.00045758034684695303, 0.011362634599208832, -0.010888215154409409, -0.020241890102624893, 0.017641369253396988, 0.02619262970983982, 0.01635282300412655, 0.011637914925813675, -0.02010132186114788, 0.014045153744518757, 0.012557468377053738, 0.021998997777700424, -0.032893069088459015, 0.0028509085532277822, -0.010812073945999146, -2.4366152501897886e-05, -0.028324589133262634, 0.0210267324000597, -7.280103454831988e-05, -0.003385362448170781, -0.011011213064193726, -0.04181918129324913, -0.002124636899679899, 0.07567280530929565, 0.020476171746850014, 0.016879955306649208, 0.0021861358545720577, 0.03830496594309807, 0.03509531170129776, 0.010700791142880917, 0.02354525402188301, 0.010173657909035683, 0.0007240751292556524, -0.049386464059352875, -0.005672531668096781, 0.03659471124410629, -0.0038509960286319256, -0.018168501555919647, 0.007660992909222841, 0.006899579428136349, -0.037063274532556534, 0.0025375576224178076, -0.02434181049466133, -0.01369373220950365, -0.022362133488059044, 0.06770724803209305, -0.0025565929245203733, -0.014876851812005043, -0.005400179885327816, -0.03308049589395523, -0.026380054652690887, -0.0380706824362278, 0.02069873735308647, 0.02023017592728138, -0.0011699413880705833, -0.02755146101117134, -0.0008485369617119431, -0.03347877413034439, 0.04413856565952301, -0.00040779559640213847, 6.14530363236554e-05, -0.028629153966903687, 0.0002489236940164119, 0.004533339757472277, 0.013518021441996098, 0.04348257929086685, 0.0013588306028395891, 0.00010862957424251363, 0.004228774458169937, 0.038492389023303986, -0.003558144671842456, -0.0005476321675814688, 0.022526130080223083, -0.003777783364057541, -0.05205726623535156, -0.011842911131680012, 0.010284941643476486, 0.045145973563194275, 0.005174684338271618, 0.01678624376654625, 0.010484080761671066, -0.0019445334328338504, 0.0094532435759902, -0.00524789746850729, 0.019527332857251167, 0.02987084351480007, 0.008996395394206047, -0.008404836058616638, -0.011983480304479599, -0.0022842411417514086, -0.01669253036379814, 0.005447036121040583, 0.009576241485774517, 0.014209150336682796, 0.02563035488128662, 0.005101471673697233, -0.029987985268235207, 0.013518021441996098, -0.017758509144186974, 0.0022476345766335726, 0.023451540619134903, 0.014560571871697903, -0.018566779792308807, 0.007619993761181831, 0.011063926853239536, 0.016762815415859222, 0.023990387097001076, -0.005476321559399366, -0.03172166645526886, 0.03778954595327377, 0.03500160202383995, 0.013963155448436737, -0.03539988026022911, 0.030151981860399246, -0.020687023177742958, 0.02012474834918976, 0.021905286237597466, -0.011872196570038795, -0.012487184256315231, -0.019527332857251167, -0.01725480519235134, -0.022408990189433098, 0.05116700008511543, -0.004501126240938902, 0.02546635828912258, -0.02341639995574951, -0.0057018171064555645, 0.009974518790841103, 0.0029504781123250723, -0.006823437754064798, 0.02612234652042389, -0.045942530035972595, -0.04181918129324913, 0.00222274218685925, 0.005119042936712503, 0.008668402209877968, 0.03479074686765671, 0.014923708513379097, 0.00989837758243084, 0.020019322633743286, 0.03535302355885506, -0.044981978833675385, -0.007128003519028425, 0.002899229060858488, 0.032166797667741776, 0.01301431655883789, -0.036875851452350616, 0.011122496798634529, -0.006097166333347559, -0.02079245075583458, -0.009546956047415733, -0.00047405323130078614, 0.0039652083069086075, -0.007906988263130188, 0.008668402209877968, 0.027926310896873474, 0.009078393690288067, -0.03565758839249611, 0.012194332666695118, 0.023685822263360023, -0.003651857143267989, -0.040905486792325974, 0.0025595214683562517, -0.006466159131377935, -0.0020206747576594353, 0.02274869754910469, 0.03237765282392502, 0.04901161417365074, 0.01966790109872818, -0.0006775849615223706, 0.022104425355792046, -0.025677211582660675, 0.022772125899791718, -0.000569596013519913, 0.009136964567005634, 0.01349459309130907, -0.020335601642727852, -0.003651857143267989, 0.007409140933305025, -0.02023017592728138, -0.013799158856272697, -0.008375550620257854, 0.02095644734799862, -0.02452923357486725, -0.011514917947351933, 0.01827392913401127, -0.00462705222889781, 0.034415896981954575, 0.025841208174824715, -0.02492751181125641, 0.035938724875450134, 0.009113536216318607, -0.003932994324713945, -0.023861533030867577, -0.011427062563598156, 0.010003804229199886, -0.0005479982355609536, -0.006032739300280809, -0.02516179345548153, 0.00042902733548544347, -0.01049579493701458, -0.026544053107500076, -0.008516118861734867, 0.0032477222848683596, -0.01374058797955513, -0.004085277207195759, 0.004383985884487629, 0.0028889791574329138, 0.008281838148832321, -0.00968752522021532, 0.004129204899072647, -0.013799158856272697, -0.0014584000455215573, 0.0031422956380993128, 0.01671595871448517, 0.002350132679566741, -0.006091309245675802, 0.0006863704766146839, -0.051541849970817566, -0.010419653728604317, -0.004943331703543663, 0.024857228621840477, 0.011479775421321392, 0.020077893510460854, -0.0307611133903265, -0.0386798158288002, 0.0009136964217759669, -0.0014781674835830927, 0.005444107577204704, 0.020007608458399773, 0.031838804483413696, 0.02281898260116577, -0.0012709751026704907, 0.02403724379837513, -0.022127853706479073, -0.027668600901961327, 0.004524554125964642, -0.02208099700510502, 0.015638265758752823, 0.004814477171748877, -0.005215683486312628, 0.020933018997311592, 0.006876151077449322, -0.010425510816276073, -0.0035142169799655676, -0.024880656972527504, 0.026169203221797943, -0.007690278347581625, -0.013846014626324177, 0.011128353886306286, 0.030479975044727325, -0.00134272372815758, 0.007268572226166725, -0.0015521125169470906, 0.01575540564954281, 0.006161593832075596, -0.002849444281309843, 0.025677211582660675, 0.0020528885070234537, 0.009213105775415897, 0.023521825671195984, 0.02691890113055706, 0.010542650707066059, 0.010747646912932396, 0.0423111729323864, -0.022772125899791718, 0.01293231826275587, -0.03605586662888527, 0.009429815225303173, -0.02780917100608349, 0.0195976160466671, 0.013072887435555458, 0.008340408094227314, 0.003894923720508814, 0.024084100499749184, -0.030245693400502205, 0.013307168148458004, -0.017266519367694855, 0.033197637647390366, 0.02523207850754261, 0.005505606532096863, 0.016844812780618668, 0.0207221657037735, -0.008685972541570663, -0.01970304362475872, 0.011567630805075169, 0.002096816198900342, 0.03315078094601631, 0.007233430165797472, 0.019644472748041153, -0.008961252868175507, 0.020007608458399773, 0.021471865475177765, 0.026403483003377914, 0.011432919651269913, 0.027457749471068382, 0.001388847827911377, -0.0228424109518528, -0.030643971636891365, -0.010566079057753086, 0.014068582095205784, 0.0031276531517505646, -0.011796055361628532, 0.03354905918240547, -0.042264316231012344, 0.03870324417948723, -0.01810993067920208, 0.007854274474084377, 0.0335724875330925, -0.04348257929086685, -0.029050860553979874, 0.0020221390295773745, -0.004319558385759592, -0.022291850298643112, -0.005933169741183519, 0.006003453861922026, -0.0016341109294444323, 0.031370244920253754, -0.018332498148083687, 0.005950740538537502, -0.023404685780405998, -0.013248598203063011, 0.007737134583294392, -0.01059536449611187, 0.0034644322004169226, -0.0298942718654871, -0.0031422956380993128, -0.02860572561621666, -0.011192780919373035, 0.016001401469111443, -0.0022051711566746235, -0.022362133488059044, -0.019726471975445747, -0.02019503340125084, 0.014724569395184517, 0.001111371093429625, 0.00941810104995966, -0.02586463652551174, -0.0065247295424342155, 0.013354024849832058, -0.017395373433828354, -0.01867220550775528, -0.027528032660484314, 0.002054352778941393, 0.0003419040294829756, -0.010074088349938393, -0.023498397320508957, -0.010027232579886913, 0.024412093684077263, 0.015603123232722282, 0.04896475747227669, -0.026145774871110916, 0.01501742098480463, 0.044279132038354874, 0.004580195993185043, 0.03052683174610138, 0.015415698289871216, 0.02708289958536625, -0.006472016219049692, 0.03230736777186394, 0.012721465900540352, 0.00012409579358063638, -0.020733879879117012, 0.022233279421925545, -0.0024497020058333874, -0.007684421259909868, -0.027574889361858368, -0.00508975749835372, -0.03790668770670891, 0.012428614310920238, 0.022854125127196312, 0.0025478072930127382, -0.0080475565046072, -0.011567630805075169, 0.013482878915965557, -0.0021524578332901, -0.006144022569060326, -0.018590208142995834, -0.0020162819419056177, -0.029050860553979874, 0.012475470080971718, -0.02304155007004738, 0.004442555829882622, -0.007368141785264015, 0.012112334370613098, 0.0335724875330925, -0.012416900135576725, 0.01747737266123295, 0.008469263091683388, -0.04662194475531578, 0.03052683174610138, 0.014888565987348557, -0.026309771463274956, 0.007169002667069435, -0.018754204735159874, -0.0044981976971030235, 0.030667399987578392, 0.02023017592728138, -0.005057543981820345, -0.010120945051312447, 0.008275981061160564, -0.02452923357486725, 0.006021025124937296, 0.003227222478017211, -0.005391394719481468, -0.004217060282826424, 0.006507158279418945, -0.012170905247330666, 0.015778834000229836, 0.010484080761671066, 0.06002282723784447, 0.03151081129908562, 0.018625350669026375, 0.003335577668622136, -0.00518932705745101, 0.02891029231250286, 0.05257268622517586, 0.006600870750844479, -0.01104049850255251, 0.03036283515393734, 0.010917500592768192, 0.00971680972725153, -0.02185842953622341, 0.0654112920165062, -0.03982779383659363, -0.025536643341183662, 0.03870324417948723, 0.0290742889046669, 0.01771165430545807, -0.013131457380950451, -0.007994843646883965, -0.005420679692178965, -0.009511813521385193, 0.03638385981321335, 0.03172166645526886, -0.0033092210069298744, -0.014595714397728443, 0.03645414486527443, -0.01349459309130907, 0.007889417000114918, 0.0003781443811021745, -0.03863295912742615, -0.01698538288474083, 0.030105125159025192, 0.004752978682518005, -0.004211203195154667, -0.018730776384472847, -0.005874599330127239, -0.011796055361628532, 0.02684861794114113, -0.01939847692847252, 0.00014532751811202615, -0.005420679692178965, -0.01883620209991932]
metadata : {"source": "pydantic_ai_docs", "crawled_at": "2025-03-16T00:48:18.094082", "url_path": "/docs/python/tutorial-fastapi", "chunk_size": 2394}
updated_dt: 2025-03-16T00:48:18.095601
---
```
from fastapi import FastAPI, HTTPException
from models import ItemPayload
app = FastAPI()
grocery_list: dict[int, ItemPayload] = {}
# Route to add an item
@app.post("/items/{item_name}/{quantity}")
def add_item(item_name: str, quantity: int) -> dict[str, ItemPayload]:
  if quantity <= 0:
    raise HTTPException(status_code=400, detail="Quantity must be greater than 0.")
  # if item already exists, we'll just add the quantity.
  # get all item names
  items_ids: dict[str, int] = {
    item.item_name: item.item_id if item.item_id is not None else 0
    for item in grocery_list.values()
  }
  if item_name in items_ids.keys():
    # get index of item_name in item_ids, which is the item_id
    item_id: int = items_ids[item_name]
    grocery_list[item_id].quantity += quantity
  # otherwise, create a new item
  else:
    # generate an ID for the item based on the highest ID in the grocery_list
    item_id: int = max(grocery_list.keys()) + 1 if grocery_list else 0
    grocery_list[item_id] = ItemPayload(
      item_id=item_id, item_name=item_name, quantity=quantity
    )
  return {"item": grocery_list[item_id]}

# Route to list a specific item by ID
@app.get("/items/{item_id}")
def list_item(item_id: int) -> dict[str, ItemPayload]:
  if item_id not in grocery_list:
    raise HTTPException(status_code=404, detail="Item not found.")
  return {"item": grocery_list[item_id]}

# Route to list all items
@app.get("/items")
def list_items() -> dict[str, dict[int, ItemPayload]]:
  return {"items": grocery_list}

# Route to delete a specific item by ID
@app.delete("/items/{item_id}")
def delete_item(item_id: int) -> dict[str, str]:
  if item_id not in grocery_list:
    raise HTTPException(status_code=404, detail="Item not found.")
  del grocery_list[item_id]
  return {"result": "Item deleted."}

# Route to remove some quantity of a specific item by ID
@app.delete("/items/{item_id}/{quantity}")
def remove_quantity(item_id: int, quantity: int) -> dict[str, str]:
  if item_id not in grocery_list:
    raise HTTPException(status_code=404, detail="Item not found.")
  # if quantity to be removed is higher or equal to item's quantity, delete the item
  if grocery_list[item_id].quantity <= quantity:
    del grocery_list[item_id]
    return {"result": "Item deleted."}
  else:
    grocery_list[item_id].quantity -= quantity
  return {"result": f"{quantity} items removed."}
Copy