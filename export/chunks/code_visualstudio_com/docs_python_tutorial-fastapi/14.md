---
url: https://code.visualstudio.com/docs/python/tutorial-fastapi
session_id: fast_api
chunk_number: 14
title: Handling Type Warnings in FastAPI with Pylance
summary: This section discusses resolving type warnings in FastAPI when using Pylance. It suggests renaming the variable `item_id` to `item_id_str` to clarify its type as a string. Additionally, it advises updating conditional checks to ensure compatibility with the expected data types after these changes.
embedding: [-0.02330312877893448, -0.013578006066381931, 0.01066046953201294, -0.06769181042909622, -0.005107237957417965, -0.01624157465994358, 0.01879364624619484, 0.01693534106016159, -0.00044676719699054956, -0.021779319271445274, 0.05071930214762688, -0.02032984234392643, 0.00819511990994215, -0.04534261301159859, 0.0070739430375397205, -0.012524967081844807, 0.012537356466054916, 0.028444435447454453, -0.03639797493815422, 0.0653131827712059, 0.04390552267432213, -0.006070458795875311, 0.001670924830250442, 0.02037939801812172, -0.0412047877907753, -0.013280677609145641, -0.0029423143714666367, 0.028692210093140602, 0.020689114928245544, -0.07086331397294998, 0.010183504782617092, -0.009706540033221245, 0.00023306226648855954, -0.0010979478247463703, -0.016130076721310616, -0.029410753399133682, -0.011143628507852554, 0.022373978048563004, 0.056393325328826904, 0.00375377363525331, 0.006284163799136877, -0.03919782117009163, 0.04177466779947281, -0.04008980467915535, 0.006355398800224066, 0.050843190401792526, -0.010375529527664185, 0.017046838998794556, -0.029187757521867752, -0.022943856194615364, 0.011069295927882195, 0.01862020418047905, -0.07700810581445694, -0.03218582272529602, 0.018112266436219215, -0.010208281688392162, -0.010418890044093132, 0.009266741573810577, -0.005859851371496916, 0.017914047464728355, 0.028469214215874672, -0.0041718920692801476, -0.019425468519330025, -0.012072780169546604, -0.012884239666163921, 0.03815716877579689, -0.027428563684225082, -0.00949593260884285, -0.011106462217867374, 0.015882302075624466, -0.01700967364013195, -0.013639949262142181, -0.006466897204518318, -0.03969336673617363, 0.0009051488013938069, -0.03805806115269661, -0.031145170331001282, 0.025644591078162193, 0.052924491465091705, -0.04752302169799805, -0.06615561246871948, 0.008170342072844505, -0.0018366235308349133, -0.003936506807804108, 0.00604258431121707, -0.055005792528390884, -0.10109172761440277, -0.03520866110920906, 0.028345325961709023, -0.06144791096448898, -0.011385207995772362, -0.00872783362865448, -0.002849399112164974, 0.015535419806838036, -0.004902824759483337, -0.014754931442439556, -0.0053828866221010685, 0.011224154382944107, -0.003976770211011171, 0.06263722479343414, 0.09930775314569473, -0.03144250065088272, -0.006120013538748026, -0.026710018515586853, 0.021506769582629204, -0.02251025289297104, 0.01614246517419815, 0.03156638517975807, -0.04271620884537697, -0.06496629863977432, -0.06243900582194328, 0.004106851294636726, 0.020292676985263824, -0.00469841156154871, -0.014606267213821411, 0.047845128923654556, -0.015659306198358536, 0.02042895182967186, 0.01854587160050869, -0.055104900151491165, -0.03580331802368164, -0.02117227390408516, -0.006671310402452946, -0.054510243237018585, -0.048439785838127136, -0.03937126323580742, 0.0781974196434021, -0.051834285259246826, -0.0011498254025354981, -0.04041191190481186, 0.058771952986717224, 0.014432826079428196, 0.012655048631131649, -0.003224157029762864, -0.056244660168886185, 0.02305535599589348, -0.014432826079428196, 0.003775453893467784, 0.012617882341146469, 0.04167556017637253, -0.03528299555182457, -0.055402230471372604, -0.0340193472802639, -0.005937280599027872, -0.014098331332206726, -0.03622453287243843, -0.04831589758396149, 0.001189314411021769, -0.02913820371031761, 0.014531935565173626, 0.014965539798140526, 0.030451403930783272, -0.015027482993900776, -0.029881523922085762, -0.02285713702440262, -0.013900112360715866, 0.02953464165329933, 0.028097553178668022, 0.016699956730008125, -0.01926441490650177, -0.07106153666973114, 0.008436699397861958, -0.01718311570584774, -0.061299245804548264, 0.01847153902053833, -0.04454973712563515, 9.567360393702984e-05, -0.030550513416528702, -0.026586132124066353, -0.04702747240662575, -0.019648464396595955, -0.02099883183836937, 0.01619202084839344, 0.02322879619896412, -0.027552450075745583, 0.002940765582025051, -0.03431667760014534, -0.006243900395929813, 0.027156012132763863, 0.0014448311412706971, -0.008684473112225533, -0.02201470546424389, -0.0791885182261467, 0.008703055791556835, -0.0033480438869446516, -0.02013162337243557, -0.01933874748647213, 0.004413471557199955, -0.012537356466054916, 0.04340997710824013, 0.005348817445337772, -0.0050855581648647785, -0.03902437910437584, -0.00805884413421154, -0.02332790568470955, -0.023625236004590988, 0.06248855963349342, -0.0031296932138502598, 0.00584436533972621, 0.0491335503757, -0.013776225037872791, 0.04829112067818642, -0.02134571596980095, -0.02127138338983059, -0.007854430936276913, -0.06848468631505966, -0.03895004838705063, 0.0006728608277626336, -0.01904141902923584, 0.014544324018061161, -0.03481222316622734, -0.04217110574245453, -0.01688578724861145, 0.04061013087630272, 0.02317924238741398, 0.022968634963035583, -0.04085790365934372, 0.025743700563907623, 0.02122182957828045, 0.053023599088191986, -0.04559038579463959, 0.027379008010029793, 0.02980719320476055, -0.04539216682314873, 0.030352294445037842, 0.004695313982665539, 0.052379388362169266, -0.027081679552793503, -0.011403790675103664, 0.00485946424305439, 0.027354231104254723, 0.003509097034111619, 0.024851715192198753, -0.019053807482123375, 0.0481424555182457, 0.00975609477609396, -0.001287649618461728, -0.05946572124958038, 0.006535035092383623, 0.0165141262114048, -0.0431869775056839, 0.006733254063874483, -0.024034062400460243, -0.020936889573931694, 0.04053580015897751, -0.010908243246376514, -0.022126203402876854, -0.04772124066948891, 0.022497864440083504, 0.017121171578764915, 0.03503521904349327, -0.009539292193949223, 0.052726272493600845, -0.056641098111867905, -0.016823843121528625, -0.007811069954186678, -0.011756868101656437, -0.014730154536664486, 0.006553617771714926, 0.012772740796208382, -0.0025737506803125143, 0.0012264804681763053, -0.03109561651945114, 0.022696083411574364, 0.013032903894782066, 0.03664575144648552, -0.008133175782859325, 0.052428942173719406, -0.006067361682653427, -0.04214632883667946, -0.03307780623435974, 0.027849778532981873, 0.023290740326046944, -0.01668756827712059, -0.002476189751178026, -0.0005532325012609363, 0.005853656679391861, -0.0010793647961691022, 0.048068124800920486, -0.03022840805351734, -0.025049934163689613, -0.050793636590242386, 0.02990630269050598, 0.03607587143778801, 0.0234517939388752, 0.027502896264195442, -0.029014315456151962, 0.03577854111790657, 0.028989538550376892, -0.016427405178546906, 0.011335653252899647, -0.028989538550376892, -0.020689114928245544, -0.01145334541797638, -0.0014123108703643084, 0.014829264022409916, -0.014804486185312271, 0.03342469036579132, 0.009316296316683292, 0.014383271336555481, 0.056145552545785904, 0.028617877513170242, 0.006535035092383623, 0.02169260010123253, -0.028023220598697662, -0.012723186053335667, 0.03268136829137802, -0.003341849660500884, 0.03560509905219078, 0.029088648036122322, 0.03746340423822403, 0.02082539163529873, -0.03238404169678688, -0.024987991899251938, -0.011422373354434967, 0.010951603762805462, 0.03545643389225006, -0.022919079288840294, 0.014234607107937336, 0.009526903741061687, 0.02067672647535801, 0.014878818765282631, 0.03238404169678688, 0.019004253670573235, -0.01876886747777462, -0.03795894980430603, 0.004893533419817686, -0.03761206939816475, -0.015560196712613106, 0.00831900630146265, 0.004218349698930979, 0.003716607578098774, 0.029162980616092682, 0.03498566523194313, -0.007699572015553713, 0.009502126835286617, 0.005655437707901001, 0.027750669047236443, 0.03087262064218521, 0.047077029943466187, 0.017418500036001205, -0.027626782655715942, 0.007396048866212368, -0.03364768624305725, -0.05069452524185181, 0.049183107912540436, 0.059217944741249084, 0.057681746780872345, -0.0444258488714695, 0.014606267213821411, 0.01101974118500948, 0.021382881328463554, 0.014110719785094261, 0.005147501360625029, -0.023711955174803734, -0.027007348835468292, -0.011719702742993832, -0.0007847461965866387, -0.059961266815662384, -0.023761510848999023, -0.07329150289297104, 0.018657369539141655, -0.028320549055933952, -0.00497715687379241, -0.009353462606668472, 0.002429732121527195, 0.013280677609145641, -0.02154393494129181, -0.07785053551197052, 0.028716986998915672, 0.03756251186132431, 0.026462245732545853, -0.047250472009181976, -0.02176693081855774, -0.04006502777338028, -0.0036856357473880053, 0.003657761262729764, 0.03159116208553314, 0.01099496427923441, -0.01916530542075634, 0.029088648036122322, 0.001876886817626655, -0.013243511319160461, 0.012419663369655609, 0.03387068212032318, 0.022993411868810654, 0.002270227763801813, 0.02496321313083172, -0.03444056212902069, -0.03877660632133484, 0.014928373508155346, -0.04041191190481186, 0.02144482545554638, 0.022299645468592644, 0.006268678233027458, -0.014668211340904236, 0.010728606954216957, 0.010598525404930115, 0.06278588622808456, 0.050372421741485596, 0.023290740326046944, -0.014692988246679306, -0.01681145466864109, -0.009427794255316257, -0.010276420041918755, 0.0037228018045425415, 0.023922564461827278, 0.03394501656293869, -0.016253963112831116, 0.011335653252899647, 0.013293066062033176, 0.03453967347741127, 0.04038713499903679, -0.03134338930249214, -0.010332169011235237, -0.020639561116695404, 0.007761515211313963, 0.00582578219473362, -0.012636465951800346, -0.023823454976081848, 0.00021254349849186838, -0.058970171958208084, -0.010945409536361694, -0.006950056180357933, -0.03198760375380516, 0.013032903894782066, 0.016675179824233055, -0.051933396607637405, 0.002810684498399496, -0.0016058841720223427, -0.03139294311404228, -0.004336042329668999, 0.012524967081844807, 0.013317843899130821, 0.048613227903842926, -0.03092217445373535, -0.04395507648587227, 0.04675492271780968, 0.024616330862045288, -0.07651256024837494, 0.00287262792699039, -0.03359813243150711, -0.01718311570584774, 0.0431869775056839, -0.026264026761054993, 0.0074889641255140305, 0.016427405178546906, -0.01525047980248928, 0.026264026761054993, 0.03483700007200241, -0.022894302383065224, 0.00596205797046423, -0.04697791859507561, 0.024108394980430603, -0.010939214378595352, -0.03785984218120575, -0.0387270487844944, -0.017740607261657715, 0.0037847452331334352, -0.012345331721007824, 0.012661242857575417, 0.03877660632133484, -0.006398759316653013, 0.03865271806716919, 0.04578860476613045, 0.018137045204639435, 0.011385207995772362, 0.02253502979874611, 0.01224622130393982, -0.03865271806716919, -0.011348041705787182, -0.0018257834017276764, -0.013379787094891071, 0.021234218031167984, -0.0431869775056839, -0.02060239389538765, -0.006696087773889303, 0.05032286420464516, 0.004992642905563116, 0.057929523289203644, -0.029113424941897392, -0.02226247824728489, -0.020936889573931694, 0.01733177900314331, -0.008126981556415558, 0.03704218938946724, 0.0082570631057024, 0.022250089794397354, -0.02154393494129181, -0.006284163799136877, -0.011447151191532612, 0.03788461908698082, 0.0027843585703521967, -0.012785130180418491, -0.009514515288174152, -0.03974292427301407, 0.005296165589243174, 0.008585363626480103, 0.023315517231822014, -0.026883460581302643, 0.01558497454971075, -0.027205567806959152, 0.01062330324202776, 0.03159116208553314, 0.01078435592353344, 0.0012055746046826243, 0.02174215391278267, -0.007451798301190138, 0.023625236004590988, 0.04658148065209389, -0.055749110877513885, -0.0035152912605553865, -0.01770344004034996, -0.010319780558347702, -0.021011220291256905, -0.004490900784730911, -0.00040843969327397645, 0.0012837782269343734, -0.028246216475963593, 0.02476499415934086, -0.015956634655594826, 0.005327137652784586, -0.027899334207177162, 0.023067744448781013, 0.0028741764836013317, 0.007296939380466938, 0.006683699321001768, -0.048861000686883926, 0.021184662356972694, -0.00485946424305439, 0.01626635156571865, -0.027527673169970512, -0.03458922728896141, 0.07145797461271286, -0.03270614519715309, -0.011645370163023472, -0.025520704686641693, -0.0055501339957118034, 0.01832287572324276, -0.024157948791980743, -0.013392175547778606, 0.023662401363253593, -0.005866045597940683, -0.024380944669246674, 0.0007216412923298776, -0.020590005442500114, 0.04259232059121132, 0.005107237957417965, -0.006225317716598511, -0.001269840868189931, 0.016526514664292336, -0.010914437472820282, 0.012698409147560596, 0.002751838183030486, -0.011880755424499512, -0.00552845373749733, 0.013416953384876251, 0.01175067387521267, 0.005940377712249756, 0.023934952914714813, 0.04412851855158806, -0.009861398488283157, 0.02993107959628105, 0.03741385042667389, -0.013429341837763786, 0.004159503150731325, 0.04559038579463959, 0.017145948484539986, -0.02414556033909321, -0.029559418559074402, -0.0019388302462175488, -0.010047229006886482, 0.018607815727591515, -0.003146727802231908, 0.02102361060678959, 0.019821906462311745, -0.03087262064218521, -0.02446766570210457, -0.03040185011923313, 0.024826938286423683, -0.008405727334320545, -0.03659619390964508, 0.03102128393948078, -0.02102361060678959, -0.058920618146657944, -0.0005485867732204497, -0.013293066062033176, -0.012549744918942451, 0.009898564778268337, 0.016724733635783195, -0.0012667437549680471, -0.0069252788089215755, 0.014420436695218086, -0.013144401833415031, -0.0038095226045697927, 0.009272935800254345, 0.013615172356367111, 0.050397198647260666, -0.03989158570766449, 0.005639951676130295, -0.011564843356609344, -0.0009105688659474254, 4.1715047700563446e-05, 0.0176291074603796, -0.049629099667072296, 0.01656368002295494, 0.020813001319766045, 0.012010836973786354, -0.0069252788089215755, -0.03181416168808937, -0.02134571596980095, -0.004757257644087076, -0.004692216869443655, -0.04710180684924126, -0.00016182727995328605, -0.020094458013772964, -0.013206345029175282, 0.04023846983909607, 0.005376692395657301, -0.01767866313457489, 0.006321330089122057, -0.02315446548163891, 0.013726670295000076, -0.0061788600869476795, -0.004144017584621906, 0.011893143877387047, 3.706928691826761e-05, -0.04447540268301964, -0.0417003370821476, -0.025037545710802078, 0.005197056103497744, 0.0026728601660579443, -0.0011544711887836456, -0.01558497454971075, 0.0004541229864116758, 0.025545481592416763, 0.04606115445494652, 0.0016507931286469102, 0.009316296316683292, -0.009564070031046867, 0.0172574482858181, -0.02449244260787964, 0.015275256708264351, -0.017839716747403145, -0.0004111496964469552, -0.0010429730173200369, 0.03146727755665779, 0.023588068783283234, 0.050793636590242386, -0.025768479332327843, -0.0163902398198843, -0.021481990814208984, 0.05089274421334267, 0.018632592633366585, 0.03736429288983345, -0.0028339133132249117, -0.006070458795875311, 0.012537356466054916, 0.009935731068253517, 0.003995352890342474, -0.0207262821495533, -0.03211148828268051, -0.01574602723121643, 0.030550513416528702, 0.01548586506396532, 0.00989237055182457, 0.013763836584985256, 0.03629886731505394, 0.0342671200633049, 0.0012442892184481025, -0.0037197046913206577, -0.019499801099300385, 0.08122026175260544, 0.0030460695270448923, -0.04231977090239525, 0.03520866110920906, 0.016253963112831116, -0.0061478884890675545, -0.00792256835848093, 0.016278740018606186, 0.010177310556173325, 0.00409136526286602, -0.016055744141340256, -0.024975601583719254, 0.015399144031107426, -0.02903909422457218, -0.0037351904902607203, 0.014036388136446476, 0.0013921792851760983, 0.03069917857646942, -0.02089972235262394, 0.017666274681687355, -0.013305454514920712, -0.015176147222518921, 0.03022840805351734, 0.03126905858516693, 0.010635691694915295, 0.005119626875966787, -0.009502126835286617, -0.09360895305871964, -0.025842810049653053, -0.013305454514920712, 0.01710878312587738, -0.03384590521454811, -0.01733177900314331, 0.03855361044406891, 0.0004730931541416794, 0.02367478981614113, -0.005971349310129881, 0.02367478981614113, -0.005887725856155157, 0.026883460581302643, -0.011044519022107124, 0.01809987798333168, -0.01775299571454525, 0.03778551146388054, -0.0017065423307940364, -0.011267514899373055, 0.007842041552066803, -0.025768479332327843, -0.01548586506396532, 0.009279130026698112, -0.02241114340722561, -0.03258226066827774, -0.007866819389164448, -0.004075879696756601, -0.03637319803237915, 0.04811767861247063, 0.058623287826776505, 0.03131861239671707, -0.029088648036122322, 0.00843050517141819, 0.015039871446788311, 0.022473087534308434, -0.00032733246916905046, -0.015138980932533741, -0.03255748003721237, 0.006302746944129467, -0.008387144654989243, 0.015572585165500641, -0.04611071199178696, -0.016947729513049126, -0.027329454198479652, 0.003118853084743023, -0.025619814172387123, -0.021804098039865494, 0.01626635156571865, 0.029113424941897392, -0.060109931975603104, 0.009749900549650192, -0.053717367351055145, 0.00928532425314188, -0.013218734413385391, 0.02330312877893448, 0.027106458321213722, 0.010344557464122772, 0.04930699244141579, 0.024603942409157753, -0.027279898524284363, 0.03466355800628662, -0.009074716828763485, -0.0083809494972229, -0.011236543767154217, 0.00819511990994215, -0.0054634129628539085, -0.003698024433106184, 0.027453340590000153, -0.004608593415468931, 0.022200535982847214, 0.055848222225904465, 0.028543544933199883, -0.03558032214641571, 0.0006418891134671867, -0.00918621476739645, 0.03667052835226059, -0.051536958664655685, -0.008003095164895058, -0.007315522525459528, 0.010666663758456707, -0.015077037736773491, -0.029063871130347252, -0.00011391789303161204, -0.004639565013349056, -0.024826938286423683, 0.03672008216381073, -0.020218344405293465, -0.005011225584894419, -0.0015269062714651227, 0.02119705080986023, 0.0013023612555116415, -0.025421595200896263, -0.03156638517975807, -0.0005876885843463242, -0.03632364422082901, -0.027701115235686302, 0.04075879603624344, 0.013751448132097721, -0.09613624960184097, 0.008511031046509743, 0.0357537642121315, -0.012407274916768074, 0.00467982841655612, 0.008387144654989243, 0.0013101041549816728, 0.04311264678835869, -0.006888112518936396, -0.03461400419473648, 0.02315446548163891, 0.00999148003757, 0.0018722410313785076, -0.030054965987801552, 0.04284009709954262, 0.01218427810817957, 0.009923341684043407, -0.004692216869443655, -0.012413469143211842, -0.029658528044819832, 0.0025629105512052774, 0.04321175813674927, 0.00580719904974103, -0.02980719320476055, -0.028989538550376892, -0.010177310556173325, 0.0025210988242179155, -0.022745637223124504, 0.04695314168930054, -0.014321327209472656, 0.013082458637654781, -0.009266741573810577, -0.04601160064339638, -0.0038776604924350977, -0.021184662356972694, 0.014891207218170166, 0.01594424620270729, 0.0013116527115926147, 0.03503521904349327, 0.028716986998915672, 0.020119234919548035, -0.012531161308288574, 0.004710800014436245, 0.008368561044335365, -0.006510257720947266, 0.0022950051352381706, -0.04757257550954819, 0.0009353462373837829, 0.014593878760933876, 0.011800228618085384, 0.00432675052434206, -0.00015747189172543585, -0.0011234994744881988, -0.004085171036422253, 0.01926441490650177, 0.02013162337243557, -0.026784351095557213, 0.001062330324202776, -0.0374881811439991, 0.009018967859447002, 0.03602631390094757, 0.027849778532981873, 0.0019248930038884282, -0.04199766367673874, 0.016724733635783195, -0.007427020464092493, -0.03354857861995697, 0.019252026453614235, -0.01671234518289566, 0.017517609521746635, 0.0157708041369915, 0.008504836820065975, 0.0022671306505799294, 0.0019140528747811913, -0.012933794409036636, -0.009551681578159332, 0.012859461829066277, 0.012543550692498684, 0.015399144031107426, -0.011639175936579704, 0.01857064850628376, 0.0021308548748493195, 0.02132093906402588, 0.023067744448781013, 0.004466123413294554, 0.02040417492389679, 0.008331394754350185, -0.0011064650025218725, 0.006919084116816521, 0.0046178847551345825, 0.0038590775802731514, 0.01723266951739788, 0.04127912223339081, -0.004054199438542128, -0.024380944669246674, 0.01928919367492199, 0.013602783903479576, -0.010914437472820282, -0.0036329838912934065, -0.0062965527176856995, -0.020069681107997894, 0.030649622902274132, -0.008207508362829685, 0.009056133218109608, -0.03362290933728218, 0.02099883183836937, -0.010654275305569172, 0.002370885806158185, -0.015374366194009781, 0.03258226066827774, -0.020614782348275185, 0.029162980616092682, 0.019029030576348305, 0.048043347895145416, -0.011478123255074024, -0.012884239666163921, 0.0118497833609581, 0.00831900630146265, -0.02198992855846882, 0.002093688817694783, -0.004772743675857782, 0.011905532330274582, 0.028097553178668022, 0.017121171578764915, -0.008901274763047695, 0.01728222519159317, 0.006051876116544008, 0.014011610299348831, -0.008504836820065975, -0.001643050229176879, -0.01032597478479147, 0.040213692933321, 0.013156790286302567, 0.07294461876153946, -0.013838168233633041, -0.009440182708203793, 0.051388293504714966, -0.03741385042667389, -0.06248855963349342, 0.0019821906462311745, 0.005788616370409727, -0.0012210604036226869, -0.027626782655715942, -0.0034130846615880728, -0.027304677292704582, 0.029187757521867752, 0.016947729513049126, 0.02236158773303032, -0.050595417618751526, -0.009886176325380802, 0.0030414238572120667, -0.0048656584694981575, 0.027874555438756943, -0.0002948121400550008, -0.03387068212032318, 0.07239951193332672, -0.01827332004904747, -0.047077029943466187, -0.02211381494998932, -0.03374679759144783, 0.02176693081855774, -0.007594267837703228, 0.009576458483934402, -0.011013546958565712, -0.02263413928449154, 0.000943863473366946, -0.005869142711162567, -0.012772740796208382, 0.004528066609054804, -0.017443278804421425, -0.013924889266490936, 0.026809128001332283, -0.029262090101838112, 0.0449213944375515, 0.03840494528412819, 0.04018891602754593, 0.01983429491519928, 0.022200535982847214, 0.004967865534126759, 0.005757644306868315, -0.03842972218990326, 0.027676336467266083, -0.014556712470948696, -0.005971349310129881, 0.03619975596666336, -0.00839333888143301, 0.02226247824728489, 0.0043205562978982925, 0.054758016020059586, 0.012054197490215302, 0.023922564461827278, 0.001405342249199748, -0.027329454198479652, 0.03919782117009163, 0.008449087850749493, 0.012456829659640789, 0.013875334523618221, -0.008833137340843678, -0.021729765459895134, 0.028295772150158882, 0.017542388290166855, 0.04137822985649109, 0.008077426813542843, -0.04526827856898308, 0.027676336467266083, 0.03890049085021019, -0.010710024274885654, 0.00606116745620966, -0.0033573354594409466, 0.017319390550255775, -0.01012775581330061, -0.01032597478479147, 0.00073286856058985, -0.0006256289198063314, -0.03344946727156639, 0.01641501672565937, -0.03830583393573761, -0.014804486185312271, -0.016799066215753555, -0.06491674482822418, -0.020788224413990974, 0.009173826314508915, -0.04261710122227669, 0.01599380187690258, -0.029683304950594902, 0.012215250171720982, -0.0020332939457148314, -0.00554703688248992, 0.004723188932985067, 0.006646533031016588, 0.007284550927579403, 0.019276805222034454, -0.04316220059990883, -0.03927215188741684, -2.23819133680081e-05, -0.0016198214143514633, 0.008975607343018055, 0.002172666834667325, 0.017443278804421425, 0.008089815266430378, -0.0006302747060544789, -0.008306617848575115, -0.001819589058868587, -0.019301582127809525, 0.015981411561369896, -0.011298486962914467, 0.01064808014780283, 0.07007043808698654, 0.01859542541205883, 0.005810296628624201, -0.0038869520649313927, 0.0006430505309253931, -0.02347657084465027, -0.051586512476205826, 0.011372818611562252, -0.03221059963107109, 0.012295776978135109, 0.0075694904662668705, -0.004651953931897879, -0.020044902339577675, -0.00474177161231637, -0.009849010035395622, 0.026239249855279922, 0.0026294998824596405, -0.025966698303818703, -0.00828184001147747, -0.023488959297537804, 0.03218582272529602, 0.04236932471394539, 0.018310487270355225, 0.020837780088186264, -0.004782035015523434, -0.0016740219434723258, -0.007005805149674416, 0.006968638859689236, -0.009935731068253517, -0.02933642268180847, -0.028642654418945312, -0.025941919535398483, -0.055848222225904465, -0.03260703757405281, 0.010276420041918755, -0.008424310013651848, 0.029509862884879112, 0.03743862733244896, -0.00760665675625205, 0.012772740796208382, -0.003657761262729764, 0.03951992839574814, 0.005172278732061386, 0.03919782117009163, -0.007451798301190138, 0.02176693081855774, -0.02449244260787964, 0.027998443692922592, 0.024938436225056648, -0.00958265271037817, -0.027453340590000153, 0.013602783903479576, 0.013639949262142181, 0.014792097732424736, 0.007600462529808283, 0.02080061286687851, 0.00989237055182457, -0.010356945917010307, 0.01616724207997322, -0.03738906979560852, -0.015300034545361996, 0.04529305547475815, -0.001524583320133388, 0.029212534427642822, -0.0032489344011992216, 0.03981725499033928, 0.0014781258068978786, 0.009180020540952682, 0.0074889641255140305, 0.0189918652176857, 0.03404412418603897, -0.03471311554312706, -0.007383660413324833, 0.03929692879319191, 0.009297712706029415, -0.018186599016189575, 0.028419658541679382, 0.010902049019932747, -0.028791319578886032, 0.00906232837587595, -0.003530777059495449, -0.0030894300434738398, 0.008207508362829685, 0.04167556017637253, -0.001515291864052415, 0.010889659635722637, -0.03032751753926277, -0.050397198647260666, -0.00981803797185421, -0.04385596886277199, 0.02397211827337742, 0.012140917591750622, -0.017145948484539986, -0.015659306198358536, -0.014903596602380276, -0.011360430158674717, 0.04001547396183014, -0.019078584387898445, -0.02223770134150982, -0.03709174320101738, 0.020391786471009254, 0.015523030422627926, 0.007544713094830513, 0.061497464776039124, -0.0022175759077072144, 0.02417033724486828, 0.016551291570067406, 0.027825001627206802, -0.007990705780684948, 0.009706540033221245, 0.03466355800628662, -0.01018969900906086, -0.054163359105587006, -0.025570260360836983, 0.0031606650445610285, 0.04276576265692711, 0.011911727488040924, 0.020168790593743324, 0.028989538550376892, -0.03109561651945114, 0.01973518542945385, -0.026610909029841423, -0.009353462606668472, 0.018434373661875725, 0.02067672647535801, -0.00730932829901576, -0.026858683675527573, -0.002014711033552885, -0.004614787641912699, 0.006318232975900173, -0.013231122866272926, 0.02186604030430317, 0.030253184959292412, 0.029559418559074402, 0.0023352683056145906, 0.03161594271659851, -0.01586991362273693, -0.005754547193646431, 0.01656368002295494, 0.01809987798333168, 0.008876497857272625, 0.007061554118990898, -0.024703051894903183, 0.01906619593501091, 0.03456445038318634, -0.021977538242936134, 0.01827332004904747, 0.012747963890433311, 0.04539216682314873, 0.01745566725730896, -0.005150598473846912, 0.01178784016519785, -0.027156012132763863, 0.03458922728896141, 0.03602631390094757, -0.008046455681324005, -0.006708476692438126, -0.003543165745213628, -0.03741385042667389, -0.007476575672626495, 0.014928373508155346, -0.028444435447454453, 0.025941919535398483, -0.016699956730008125, -0.015027482993900776, -0.0023166853934526443, 0.001238869153894484, -0.012413469143211842, -0.013677115552127361, -0.03590242937207222, -0.015832748264074326, -0.016749510541558266, -0.0021897011902183294, -0.013516062870621681, 0.004187377635389566, -0.01946263387799263, 0.0181246567517519, -0.0008184279431588948, 0.03701741248369217, 0.012252416461706161, 0.009043744765222073, 0.00011885401181643829, 0.03411845862865448, -0.004998837132006884, 0.01785210520029068, -0.005497482139617205, 0.003453347831964493, -0.027502896264195442, -0.004283390007913113, 0.026908237487077713, 0.014110719785094261, -0.012444441206753254, 0.07467903196811676, 0.009403017349541187, 0.00043244275730103254, -0.02070150338113308, 0.0088145537301898, 0.002270227763801813, 0.012921405024826527, -0.03072395548224449, -0.017740607261657715, -0.00841811578720808, 0.01879364624619484, 0.00961981900036335, 0.019078584387898445, 0.04435151815414429, 0.01541153248399496, -0.00474177161231637, 0.03372202068567276, 0.007730543613433838, 0.004153308924287558, -0.017368946224451065, 0.012432051822543144, 0.0037320933770388365, -0.008603946305811405, -0.00808362103998661, -0.0018939212895929813, -0.023241186514496803, -0.008071232587099075, -0.006627949886023998, 0.008145565167069435, -0.006120013538748026, -0.03458922728896141, 0.009068522602319717, 0.000422764103859663, 0.015027482993900776, 0.02221292443573475, -0.027329454198479652, 0.008349978365004063, -0.0062098316848278046, -0.01767866313457489, -0.026338359341025352, -0.03944559395313263, 0.01889275573194027, -0.003354238346219063, 0.006894306745380163, -0.010282614268362522, 0.02070150338113308, -0.013193956576287746, -0.017071617767214775, -0.016179630532860756, 0.006522646173834801, -0.008721639402210712, -0.013962055556476116, 0.011211765930056572, 0.006497868802398443, -0.0020363912917673588, 0.03639797493815422, 0.027279898524284363, -0.014742542989552021, -0.0034750280901789665, 0.0015749124577268958, 0.00979326106607914, 0.027874555438756943, -0.025966698303818703, -0.026710018515586853, -0.03159116208553314, 0.012363914400339127, -0.03833061084151268, 0.008857914246618748, -0.01879364624619484, 0.04809290170669556, -0.014085942879319191, -0.0037135102320462465, -0.013020515441894531, -0.0012528063962236047, 0.010480833239853382, 0.04378163814544678, 0.055352672934532166, 0.011335653252899647, -0.029212534427642822, 0.008895080536603928, 0.004360819701105356, -0.0091242715716362, 0.02360045723617077, -0.013590394519269466, 0.009297712706029415, 0.01797599159181118, -0.013057680800557137, 0.00612311065196991, 0.01862020418047905, 0.0009469606447964907, 0.016600847244262695, 0.010740995407104492, 0.01961129903793335, 0.003543165745213628, -0.017096394672989845, 0.008932246826589108, -0.0015981412725523114, 0.013268289156258106, -0.0016864106291905046, 0.019648464396595955, -0.007036776747554541, 0.00885172002017498, 0.03211148828268051, 0.010338363237679005, -0.025669369846582413, 0.012995737604796886, 0.022274868562817574, -0.009328684769570827, 0.024839326739311218, 0.006863335147500038, 0.04546649754047394, -0.01921486109495163, 0.010394112206995487, -0.03924737498164177, -0.012593105435371399, -0.004119240213185549, -0.015287645161151886, -0.0034068902023136616, -0.004850172903388739, 0.0001113046528189443, 0.01609291136264801, -0.03942081704735756, 0.01876886747777462, -0.01966085284948349, 0.03934648633003235, 0.005017420276999474, 0.009105687960982323, 0.014593878760933876, 0.011942698620259762, 0.013045292347669601, 7.09930100128986e-05, -0.0009206346585415304, 0.025718923658132553, -0.006008515600115061, -0.026536578312516212, 0.004342236556112766, 0.0018660466885194182, 0.027849778532981873, -0.005398372188210487, 0.020788224413990974, -0.012636465951800346, 0.056641098111867905, -0.0311699490994215, 0.000963220780249685, -0.027577226981520653, -0.019549354910850525, 0.01582035981118679, 0.010734801180660725, 0.006355398800224066, 0.016799066215753555, -0.029162980616092682, 0.0010553617030382156, -0.006634144578129053, 0.014160274527966976, 0.029162980616092682, -0.02151915803551674, -0.008665889501571655, 0.0035245828330516815, -0.014234607107937336, 0.014507157728075981, 0.021110329777002335, 0.028593100607395172, 0.005584202706813812, 0.009378239512443542, -0.009099493734538555, 0.00828184001147747, -0.027998443692922592, 0.014494769275188446, 0.010183504782617092, 0.0009159888722933829, 0.0028246217407286167, -0.0010251642670482397, 0.02094927802681923, -0.02474021725356579, -0.016353072598576546, 0.020961666479706764, -0.02535965107381344, -0.028964761644601822, -0.013701893389225006, -0.0031993796583265066, -0.013231122866272926, 0.021754542365670204, 0.00541076110675931, 0.0019713505171239376, -0.025520704686641693, 0.02456677518785, 0.00434533366933465, -0.03404412418603897, -0.01864498108625412, 0.023885397240519524, -0.005856753792613745, -0.006559812463819981, -0.01574602723121643, -0.01785210520029068, -0.017691051587462425, 0.018632592633366585, 0.03937126323580742, -0.007018194068223238, 0.010344557464122772, -0.02290669083595276, 0.01611768826842308, 0.0394703708589077, -0.011186989024281502, -0.002166472375392914, 0.02436855621635914, 0.03409367799758911, 0.0019527674885466695, 0.007953540422022343, -0.026809128001332283, 0.008957023732364178, -0.007866819389164448, -0.012035613879561424, -0.00871544424444437, 0.0028741764836013317, -0.03637319803237915, 0.006646533031016588, 0.01525047980248928, -0.0038312028627842665, 0.003973673097789288, -0.03662097454071045, 0.01914052851498127, -0.013578006066381931, 0.0078234588727355, 0.0001708284398773685, 0.019425468519330025, 0.005101043730974197, -0.0026294998824596405, -0.03741385042667389, 0.011899338103830814, -0.010270225815474987, 0.029980633407831192, 0.04355863854289055, -0.014990316703915596, 0.00808362103998661, 0.004181183408945799, -0.061348799616098404, 0.028419658541679382, 0.022522641345858574, -0.018855588510632515, 0.03399457037448883, 0.000981803867034614, 0.006572200916707516, 0.026363136246800423, 0.0335237979888916, 0.007259773556143045, 0.005686409305781126, -0.01111885067075491, -0.01859542541205883, 0.02454199828207493, 0.0027069291099905968, -0.0005923343123868108, 0.014383271336555481, 0.012933794409036636, -0.010734801180660725, -0.01072241272777319, 0.007873013615608215, 0.04115523397922516, 0.015597363002598286, 0.004261709749698639, -0.01894230954349041, -0.01567169465124607, 0.03359813243150711, 0.054857127368450165, 0.006547423545271158, -0.008808359503746033, 0.027849778532981873, -0.009099493734538555, 0.012209055945277214, 0.00059504434466362, 0.0303027406334877, -0.04264187812805176, -0.02057761698961258, 0.0019744476303458214, 0.005949669051915407, -0.0209740549325943, -0.01827332004904747, -0.0007603559643030167, 0.012165695428848267, -0.010202087461948395, 0.014160274527966976, 0.04363297298550606, 0.03439100831747055, 0.02275802753865719, 0.014110719785094261, 0.013962055556476116, 0.004119240213185549, -0.00462407898157835, -0.047473467886447906, -0.04474795609712601, -0.01579558104276657, 0.007055359892547131, 0.003756870748475194, 0.0008470768225379288, -0.0068757240660488605, -0.0075880736112594604, 0.060754142701625824, -0.009669373743236065, -0.004713897127658129, -0.029980633407831192, 0.0011715056607499719]
metadata : {"source": "pydantic_ai_docs", "crawled_at": "2025-03-16T00:48:18.793240", "url_path": "/docs/python/tutorial-fastapi", "chunk_size": 4005}
updated_dt: 2025-03-16T00:48:18.794746
---
```

Notice that Pylance raises a problem with this change. This is because the `hget` method returns either `str`, or `None` (if the item doesn't exist). However, the lines below the code that we haven't replaced yet expect `item_id` to be of type `int`. Let's address this warning by renaming the `item_id` symbol.
  4. Rename `item_id` to `item_id_str`.
  5. If you have inlay hints enabled, Pylance should show a variable type hint next to `item_id_str`. You can optionally double-click to accept it:
![Variable type hint displayed next to the item_id_str variable](https://code.visualstudio.com/assets/docs/python/fastapi-tutorial/pylance_redis_typehint.png)
  6. If the item doesn't exist, then `item_id_str` is `None`. So now we can delete the line with the following content:
```
if item_name in items_ids.keys():
Copy
```

And replace it with:
```
if item_id_str is not None:
Copy
```

Now that we have the item ID as a string, we need to convert it to an `int` and update the quantity for the item. Currently, our Redis hash only maps item names to their IDs. To also map item IDs to their names and quantities, we will create a separate Redis hash for each item, using `"item_id:{item_id}"` as our hash name to make retrieval by ID easier. We'll also add `item_name` and `quantity` fields for each of these hashes.
  7. Delete the code within the `if` block:
```
item_id: int = items_ids[item_name]
grocery_list[item_id].quantity += quantity
Copy
```

And add the following, to convert the `item_id` to an `int`, and then to increment the quantity of the item by calling the `hincrby` method from Redis. This method increments the value of the `"quantity"` field by the given amount in the request (`quantity`):
```
item_id = int(item_id_str)
redis_client.hincrby(f"item_id:{item_id}", "quantity", quantity)
Copy
```

We now only need to replace the code for when the item does not exist, when `item_id_str` is `None`. In this case, we generate a new `item_id`, create a new Redis hash for the item, and then add the provided item name and quantity.
To generate a new `item_id`, let's use the `incr` method from Redis, passing a new hash called `"item_ids"`. This hash is used to store the last generated ID, so we can increment it each time we create a new item, ensuring that they all have a unique ID.
  8. Delete the line with the following content:
```
item_id: int = max(grocery_list.keys()) + 1 if grocery_list else 0
Copy
```

And add the following:
```
item_id: int = redis_client.incr("item_ids")
Copy
```

When this `incr` call is run for the first time with the `item_ids` key, Redis creates the key and maps it to the value `1`. Then, each subsequent time it's run, it increments the stored value by 1.
Now we will add the item to the Redis hash, using the `hset` method and by providing a mapping for the fields (`item_id`, `item_name`, and `quantity`), and the values (the item's newly created ID, and its provided name and quantity).
  9. Delete the line with the following content:
```
grocery_list[item_id] = ItemPayload(
    item_id=item_id, item_name=item_name, quantity=quantity
  )
Copy
```

And replace it with the following:
```
redis_client.hset(
      f"item_id:{item_id}",
      mapping={
        "item_id": item_id,
        "item_name": item_name,
        "quantity": quantity,
      })
Copy
```

Now we only need to map the newly created ID to the item name by setting the hash we referenced in the beginning, `item_name_to_id`.
  10. Add this line to the end of the route, inside the `else` block:
```
redis_client.hset("item_name_to_id", item_name, item_id)
Copy
```

  11. Delete the line with the following content:
```
return {"item": grocery_list[item_id]}
Copy
```

And replace it with:
```
return {"item": ItemPayload(item_id=item_id, item_name=item_name, quantity=quantity)}
Copy
```

  12. If you would like, you can try to do a similar replacement for the other routes. Otherwise, you can just replace the entire content of the file with the lines below: