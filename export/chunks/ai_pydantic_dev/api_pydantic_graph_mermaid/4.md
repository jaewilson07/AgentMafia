---
url: https://ai.pydantic.dev/api/pydantic_graph/mermaid/
session_id: pydantic_ai_docs
chunk_number: 4
title: Generate Mermaid State Diagram Code
summary: The `generate_code` function creates Mermaid state diagram code from a specified graph. It takes parameters for start nodes, highlighted nodes, CSS styles for highlighting, diagram title, edge labels, notes, and the direction of flow, returning a string of the generated code.
embedding: [0.008205934427678585, -0.0022099935449659824, -0.00855343695729971, -0.026385799050331116, 0.011656573042273521, 0.016448449343442917, -0.03923729434609413, -0.02021610736846924, -0.04316345974802971, 0.04430960863828659, -0.002834888407960534, -0.035945165902376175, 0.027653878554701805, -0.0640379935503006, 0.03792044147849083, 0.013034389354288578, -0.007206103298813105, -0.013924484141170979, -0.021691467612981796, 0.03301882743835449, 0.08023038506507874, -0.00017127449973486364, 0.03757903724908829, -0.01161999348551035, 5.1582392188720405e-05, 0.016509413719177246, 0.01441220659762621, 0.0008573250961489975, 0.014131765812635422, 0.020594092085957527, -0.038798343390226364, -0.026385799050331116, 0.001839629141613841, -0.04889420419931412, -0.04226117581129074, 0.026654046028852463, -0.02723931334912777, -0.0147536126896739, -0.042456261813640594, 0.021228130906820297, -0.009400855749845505, -0.06447694450616837, 0.03204338252544403, 0.0026260819286108017, -0.04562646150588989, 0.02231331542134285, -0.05511266738176346, 0.034360066056251526, 0.06023375689983368, 0.007693825755268335, -0.03326268866658211, 0.034677084535360336, -0.012729562819004059, 0.019069958478212357, -0.0648183524608612, -0.03543305769562721, -0.04801630228757858, 0.012418639846146107, -0.028800027444958687, 0.013863518834114075, 0.05735619366168976, 0.023654552176594734, -0.004837599582970142, 0.038822729140520096, -0.032262858003377914, 0.06998821347951889, -0.023800868541002274, 0.0216548889875412, 0.005468591116368771, -0.019277241080999374, 0.04362679645419121, 0.04762612283229828, 0.0006012706435285509, -0.06633029133081436, -0.008346155285835266, -0.036408502608537674, -0.006370877847075462, 0.04428522288799286, -0.027775809168815613, -0.05706355720758438, 0.007480447180569172, 0.0001979468361241743, 0.0028028814122080803, -0.006608643103390932, -0.015119404532015324, -0.015338880009949207, -0.032092154026031494, -0.03328707441687584, -0.022532789036631584, -0.008577823638916016, -0.008401024155318737, -0.04140765964984894, -0.056039340794086456, 0.02332533895969391, 0.03094600699841976, 0.049308765679597855, -0.004941240884363651, 0.008785105310380459, -0.01314412709325552, 0.003013212000951171, -0.01044945977628231, -0.019008992239832878, -0.03777412325143814, 0.009205766022205353, 0.0554540753364563, -0.013522112742066383, -0.014704840257763863, 0.035628143697977066, -0.00014050606114324182, -0.0026443717069923878, -0.0636478140950203, 0.006395264063030481, 0.032116539776325226, 0.01946013607084751, 0.011211525648832321, -0.039944492280483246, -0.02694668062031269, 0.009699585847556591, 0.026507729664444923, -0.028483007103204727, -0.04211485758423805, -0.013253864832222462, 0.014217117801308632, 0.00016098660125862807, 0.034530770033597946, 0.007334130350500345, -0.026337027549743652, 0.027019839733839035, 0.008907035924494267, 0.017411701381206512, -0.008882650174200535, 0.016021691262722015, 0.007248778827488422, -0.07140260934829712, 0.005934976041316986, -0.0032433560118079185, -0.042626965790987015, -0.01943575032055378, -0.0032220182474702597, 0.060184985399246216, 0.06837872415781021, 0.026239482685923576, 0.013180706650018692, 0.017631176859140396, 0.007175620645284653, 0.014960894361138344, -0.03831062093377113, 0.04450469836592674, -0.06008743867278099, -0.023459462448954582, 0.02584930509328842, 0.006626932416111231, -0.004325490910559893, -0.007334130350500345, 0.038017984479665756, -0.05374704301357269, 0.026215096935629845, -0.00977274402976036, 0.0027876400854438543, -0.005508218426257372, -0.02994617447257042, 0.03182390704751015, -0.044065747410058975, -0.016143621876835823, -0.011534642428159714, 0.015875374898314476, -0.026702819392085075, 0.011376132257282734, -0.022703493013978004, 0.005233874544501305, 0.02317902259528637, -0.020606284961104393, 0.009602040983736515, 0.00395969906821847, 0.014217117801308632, -0.024459294974803925, -0.03414059057831764, -0.035140421241521835, 0.018667588010430336, -0.014717033132910728, -0.023654552176594734, -0.012863687239587307, -0.08286409080028534, 0.039944492280483246, -0.0658913403749466, -0.005767321214079857, 0.03601832315325737, 0.0026885715778917074, 0.04562646150588989, 0.027385631576180458, -0.043407320976257324, 0.0004884848021902144, 0.013900097459554672, -0.04713840037584305, 0.005096702370792627, -0.0171312615275383, 0.11637064069509506, -0.024886051192879677, 0.018374953418970108, 0.03423813357949257, -0.004858937580138445, 0.017899423837661743, 0.03728640079498291, -0.016850819811224937, 0.0063586849719285965, 0.006657415069639683, -0.027678264304995537, -0.056380745023489, 0.02197190932929516, 0.003005591221153736, 0.044065747410058975, 0.0057094041258096695, 0.014387819916009903, -0.03457954153418541, -0.01575344428420067, 0.0050113508477807045, -0.025898076593875885, 0.007998652756214142, 0.03575007617473602, 0.01203455775976181, -0.054917577654123306, 0.06906154006719589, 0.025117719545960426, -0.020277071744203568, 0.04123695567250252, 0.015668092295527458, 0.025264037773013115, -0.06715942174196243, -0.018301794305443764, 0.04335854947566986, -0.0032738386653363705, -0.011491966433823109, -0.013668429106473923, -0.04460224136710167, -0.0037432718090713024, -0.025605443865060806, 0.013692815788090229, -0.0010691796196624637, -0.007407288998365402, -0.0009701109956949949, 0.010486038401722908, 0.012692984193563461, -0.000540305336471647, -0.011540738865733147, -0.00024976738495752215, 0.008065714500844479, -0.03584761917591095, 0.010693321004509926, -0.019326012581586838, 0.022557176649570465, -0.003490265691652894, 0.022679107263684273, 0.009303310886025429, -0.006328202318400145, -0.010589679703116417, 0.014387819916009903, -0.024178853258490562, -0.0041761258617043495, -0.014570716768503189, 0.0026352268178015947, 0.0017176984110847116, 0.0026184613816440105, -0.08710727840662003, -0.013424567878246307, -0.006511098239570856, 0.02789773978292942, -0.009504496119916439, 0.0006431843503378332, -0.024678770452737808, -0.04148081690073013, 0.009778840467333794, -0.0016872157575562596, 0.019082151353359222, -0.009498399682343006, -0.027214927598834038, -0.022154804319143295, -0.0039231195114552975, 0.034677084535360336, 0.01814328506588936, -0.010626259259879589, 0.02675159089267254, 0.013058776035904884, 0.019228467717766762, 0.06428185850381851, -0.013034389354288578, 0.027214927598834038, 0.001290941028855741, 0.0004900089115835726, 0.015729058533906937, -0.06320886313915253, 0.0784258171916008, -0.0036914513912051916, -0.00358476210385561, 0.0063342987559735775, -0.0038773957639932632, -0.007462157867848873, 0.015009666793048382, 0.0748654380440712, 0.0227766502648592, 0.013729394413530827, 0.004227946512401104, -0.03665236383676529, -0.012839300557971, 0.010607969015836716, -0.030848462134599686, 0.01721661165356636, -0.004560207482427359, -0.007547508925199509, 0.04028589650988579, -0.006754959933459759, -0.03233601525425911, -0.044382769614458084, 0.0012939893640577793, -0.009888578206300735, 0.030507056042551994, 0.0033744315151125193, 0.04082239046692848, 0.012632018886506557, -0.013400182127952576, -0.08349812775850296, 0.006553774233907461, -0.020569706335663795, 0.043090302497148514, 0.00076663913205266, -0.06745205074548721, -0.009937350638210773, -0.04274889826774597, -0.014765805564820766, 0.005349708721041679, -0.01819205842912197, 0.011717538349330425, -0.01643625646829605, 0.006761056371033192, 0.01079696137458086, 0.04889420419931412, -0.0486503429710865, -0.023678937926888466, 0.013241671957075596, 0.014607295393943787, 0.03853009641170502, -0.008437602780759335, -0.02009417675435543, 0.0007312030647881329, -0.02743440307676792, -0.03843254968523979, 0.018984606489539146, 0.0017893327167257667, 0.026239482685923576, 0.0441632941365242, -0.05062561854720116, 0.0011766310781240463, 0.03501849249005318, 0.053308092057704926, 0.015070632100105286, 0.007321937475353479, 0.014192731119692326, 0.02565421536564827, 0.009730068035423756, -0.0008443699916824698, 0.01626555249094963, -0.05877058953046799, 0.017716528847813606, -0.04762612283229828, -0.015253528021275997, -0.028604937717318535, -0.005157667677849531, -0.020447775721549988, 0.017570210620760918, 0.05462494492530823, -0.002937005367130041, 0.0044108424335718155, 0.05301545932888985, 0.008888746611773968, 0.02334972470998764, -0.016338711604475975, -0.022496210411190987, -0.005322274286299944, -0.015241335146129131, 0.017436087131500244, 0.0748654380440712, -0.02743440307676792, -0.02352042868733406, 0.008760719560086727, 0.026361413300037384, -0.020374616608023643, -0.006913469638675451, 0.052283875644207, -0.0220816470682621, -0.026995452120900154, 0.015790022909641266, 0.010705513879656792, -0.03462831303477287, -0.010425073094666004, 0.01118713989853859, -0.00685860076919198, 0.048528410494327545, -0.013668429106473923, -0.017204418778419495, 0.020752601325511932, 0.03253110498189926, 0.021484186872839928, 0.010382397100329399, 0.05838041007518768, -0.018472498282790184, 0.008577823638916016, -0.005874010734260082, 0.05930708348751068, -0.009656909853219986, -0.01410738006234169, 0.015277914702892303, -0.03233601525425911, -0.014802385121583939, -0.005910589825361967, -0.05516143888235092, -0.003560375887900591, -0.06911031156778336, 0.0053436122834682465, -0.02184997871518135, 0.00431939447298646, 0.010028798133134842, -0.03543305769562721, -0.04704085737466812, -0.008029134944081306, -0.014851156622171402, -0.020399002358317375, 0.03297005593776703, 0.00896800123155117, -0.014558522962033749, 0.05374704301357269, -0.06359904259443283, 0.014643874950706959, 0.0003473119286354631, 0.018618814647197723, 0.02222796343266964, 0.04084677994251251, -0.03123863972723484, -0.026873521506786346, 0.01655818708240986, 0.009730068035423756, -0.041212569922208786, -0.014582909643650055, -0.03128741309046745, 0.003843864658847451, 0.0047522480599582195, -0.028775639832019806, 0.00288213649764657, 0.024739734828472137, -0.01658257283270359, -0.022874195128679276, -0.0554540753364563, -0.0073158410377800465, 0.0045906901359558105, -0.03504287824034691, -0.026532115414738655, 0.008431506343185902, -0.013266057707369328, 0.052527736872434616, 0.0009121939074248075, -0.0005094415973871946, -0.049820877611637115, 0.0211915522813797, 0.03596955165266991, -0.0022907727397978306, 0.024544646963477135, -0.020716022700071335, -0.030507056042551994, -0.016765467822551727, 0.0030863704159855843, 0.03409181907773018, -0.01410738006234169, 0.006608643103390932, -0.017655562609434128, 0.03709131479263306, 0.01299781072884798, 0.03187267854809761, -0.019996631890535355, -0.002615413162857294, -0.00222371076233685, 0.029531611129641533, 0.029360907152295113, -0.034969720989465714, -0.02662966027855873, 0.0019326013280078769, -0.00497477175667882, -0.004331587348133326, 0.07745036482810974, 0.006230657920241356, -0.06262359768152237, 0.010144632309675217, 0.005904493387788534, 0.008748526684939861, 0.008358348160982132, 0.009163090959191322, -0.01211990974843502, 0.018350567668676376, -0.030165649950504303, -0.0536007285118103, -0.032579876482486725, -0.00744996452704072, -0.04769928380846977, -0.010510425083339214, -0.04879665747284889, 0.011382228694856167, 0.03094600699841976, 0.007328033912926912, -0.09593506157398224, 0.012095523998141289, 0.024373942986130714, 0.023703323677182198, 0.03648165985941887, -0.0299705620855093, 0.012235743924975395, 0.0460166372358799, 0.007017110474407673, -0.022813230752944946, 0.0014204924227669835, -0.0009076215210370719, 0.013619656674563885, -0.023227794095873833, 0.013010003603994846, -0.036408502608537674, -0.017606791108846664, 0.005831334739923477, 0.0013663857243955135, -0.02709299698472023, -0.014363434165716171, 0.024898245930671692, -0.07267068326473236, -0.022496210411190987, -0.018301794305443764, 0.054137222468853, 0.009291118010878563, -0.03679867833852768, 0.04062730446457863, -0.06330640614032745, -0.024117888882756233, -0.0026245578192174435, 0.00912651140242815, -0.03075091727077961, -0.0010082143126055598, 0.019557680934667587, 0.009565462358295918, 0.0025788338389247656, -0.021496379747986794, -0.006547677330672741, 0.012558859772980213, 0.011894337832927704, -0.014119572937488556, 0.011053016409277916, 0.008059618063271046, 0.013863518834114075, 0.005654535256326199, -0.008510761894285679, -0.03853009641170502, -0.024800701066851616, 0.01992347277700901, -0.009492303244769573, -0.003539038123562932, 0.0020103321876376867, 0.009809323586523533, 0.023630166426301003, 0.004288911819458008, 0.02965354174375534, 0.011321263387799263, -0.029117045924067497, 0.06764714419841766, 0.013485533185303211, -0.0034872174728661776, -0.02144760638475418, 0.02850739285349846, 0.005779514089226723, -0.025556670501828194, 0.02931213565170765, -0.013400182127952576, 0.0024035584647208452, -0.024776313453912735, -0.004419987089931965, -0.014131765812635422, 0.0025178685318678617, 0.00540457759052515, -0.05847795307636261, -0.021667081862688065, 0.007846239022910595, -0.017692141234874725, -0.06042884662747383, 0.041968539357185364, -0.005462494678795338, -0.004584593698382378, 0.009577655233442783, 0.010101957246661186, -0.04667506366968155, 0.013741587288677692, -0.020972076803445816, 0.028800027444958687, 0.00979103334248066, -0.006657415069639683, 0.007895011454820633, -0.009595944546163082, -0.05784391611814499, -0.014448785223066807, 0.03592078015208244, -0.01583879627287388, -0.04608979821205139, 0.046431202441453934, 0.010516521520912647, 0.0014852681197226048, 0.038188688457012177, -0.0018823049031198025, -0.04038344323635101, 0.007431675214320421, -0.0675983726978302, 0.022276734933257103, 0.006316009443253279, -0.0011027106083929539, -0.01441220659762621, 0.013473340310156345, -0.010120246559381485, 0.05740496516227722, 0.022849809378385544, -0.022996125742793083, 0.019167503342032433, 0.005383239593356848, 0.01079696137458086, -0.023934992030262947, -0.011254201643168926, 0.008205934427678585, -0.007547508925199509, -0.001361813279800117, -0.025556670501828194, -0.013387988321483135, -0.05062561854720116, 0.0002939672558568418, 0.034189362078905106, -0.0008283665520139039, -0.015229142270982265, 0.007382902782410383, -0.002952246693894267, 0.02755633369088173, -0.009547172114253044, -0.0067488630302250385, 0.01154683530330658, 0.01753363199532032, -0.01191872451454401, 0.0039901817217469215, -0.007346323691308498, 0.005544797517359257, 0.0034567348193377256, 0.010327528230845928, -0.004234042949974537, 0.002120069693773985, -0.025727374479174614, 0.016570379957556725, 0.0005060123512521386, -0.010924989357590675, 0.013595270924270153, -0.01163218729197979, 0.023227794095873833, 0.0013397133443504572, -0.05116211250424385, 0.006986627820879221, -0.030848462134599686, 0.05223510414361954, -0.03394550085067749, -0.0166679248213768, -0.024349557235836983, 0.057746369391679764, 0.0068037318997085094, -0.016619151458144188, -0.008230321109294891, 0.0003139715117868036, 0.01299781072884798, 0.054771263152360916, 0.0162045881152153, 0.009614233858883381, -0.010406783781945705, 0.005770369432866573, -0.004740055184811354, -0.014509751461446285, 0.0013557167258113623, 0.016594765707850456, 0.0033226110972464085, 0.028897570446133614, -0.05599056929349899, 0.028483007103204727, 0.052040014415979385, -0.02531280927360058, 0.010260466486215591, 0.027970898896455765, -0.008205934427678585, 0.0033774799667298794, -0.017326349392533302, 0.030628986656665802, -0.008602209389209747, 0.004557159263640642, 0.014607295393943787, 0.02692229487001896, -0.009467917494475842, 0.03996887803077698, -0.010114150121808052, -0.08057179301977158, -0.0006462326273322105, -0.0011255725985392928, -0.018387146294116974, 0.037066925317049026, 0.019252855330705643, -0.027117382735013962, -0.008583920076489449, 0.01981373503804207, 0.01744828000664711, -0.01891144923865795, 0.012949038296937943, -0.015460810624063015, -0.039432380348443985, 0.01744828000664711, 0.007614571135491133, 0.0034933139104396105, 0.03821307420730591, -0.0015744299162179232, -0.004554111044853926, 0.0009411524515599012, -0.006376974750310183, -0.004557159263640642, -0.0617944672703743, -0.017814071848988533, 0.0013602891704067588, 0.012412543408572674, 0.01196139957755804, -0.019764963537454605, -0.009797129780054092, -0.027946511283516884, -0.049333155155181885, 0.024349557235836983, 0.010211694985628128, 0.008401024155318737, -0.012546666897833347, -0.0035116036888211966, 0.002600171836093068, -0.00460593169555068, -0.008340058848261833, -0.011461484245955944, -0.04845525324344635, 0.018582236021757126, 0.008327865041792393, -0.04506557807326317, -0.00912651140242815, -0.01848469115793705, -0.03484778851270676, -0.00693785585463047, 0.00038274802500382066, 0.020277071744203568, 0.0023776483722031116, 0.00853514764457941, -0.006248947232961655, -0.019850315526127815, 0.013826939277350903, 0.028873184695839882, 0.012522281147539616, -0.026897909119725227, -0.0007616857183165848, 0.0625748261809349, -0.02867809683084488, 0.006706187501549721, -0.016424063593149185, 0.006608643103390932, 0.016363097354769707, -0.03231162950396538, 0.03792044147849083, 0.024434909224510193, -0.008919229730963707, -0.027605107054114342, -0.012327191419899464, -0.02343507669866085, -0.000293776742182672, 0.025410354137420654, 0.030653372406959534, 0.0025483511853963137, 0.018045740202069283, -0.005395432468503714, -0.001409061485901475, 0.026702819392085075, -0.034994106739759445, 0.026678433641791344, 0.007157330866903067, 0.04587032273411751, 0.03679867833852768, 0.02645895816385746, -0.03153127431869507, -0.02965354174375534, -0.010339722037315369, -0.02311805635690689, -0.06428185850381851, -0.028897570446133614, 0.01569247804582119, -0.0003015879192389548, -0.0133026372641325, -0.009797129780054092, 0.01793600246310234, -0.08257145434617996, -0.006160547491163015, 0.034481994807720184, 0.005581377074122429, 0.03428690880537033, -0.02948283776640892, -0.003514651907607913, -0.002834888407960534, 0.006529388017952442, -0.03260426223278046, -0.0250201765447855, -0.006767152808606625, 0.027824580669403076, 0.017838459461927414, 0.038505710661411285, -0.018874868750572205, -0.014278083108365536, -0.004288911819458008, 0.011455387808382511, 0.004990013316273689, -0.032092154026031494, 0.0069012767635285854, 0.024056922644376755, 0.00490161357447505, 0.04735787585377693, -0.033409006893634796, 0.009547172114253044, 0.012839300557971, 0.0027830677572637796, 0.02352042868733406, 0.008516858331859112, 0.0010989002184942365, 0.013217286206781864, 0.012619825080037117, 0.0027190542314201593, 0.007535316050052643, 0.02389841340482235, 0.023886220529675484, 0.02677597664296627, 0.026093166321516037, -0.01675327494740486, -0.04094432294368744, -0.004548014607280493, 0.017375122755765915, -0.0019066910026594996, 0.01315632089972496, -0.020447775721549988, 0.020545320585370064, -0.038798343390226364, -0.006364781409502029, -0.04611418396234512, 0.00474310340359807, 0.010516521520912647, -0.011577318422496319, 0.015277914702892303, 0.0034475899301469326, -0.04718717187643051, -0.03670113533735275, -0.038993433117866516, 0.02643457241356373, 0.005075364373624325, 0.027922125533223152, 0.03182390704751015, -0.030336353927850723, 0.008108390495181084, -0.038798343390226364, -0.017631176859140396, -0.015412038192152977, 0.0013755304971709847, -0.019911279901862144, 0.0018975462298840284, -0.0015287059359252453, -0.0035725689958781004, -0.0270686112344265, -0.011053016409277916, -0.010327528230845928, 0.034677084535360336, -0.0028440330643206835, 0.027019839733839035, -0.01750924624502659, -0.03411620482802391, -0.014570716768503189, 0.027361243963241577, 0.0200697910040617, -0.017436087131500244, -0.014692647382616997, 0.027458788827061653, 0.0034933139104396105, -0.03238479048013687, 0.026580888777971268, -0.028800027444958687, -0.010425073094666004, -0.012186971493065357, -0.017582403495907784, -0.012040655128657818, -0.03218970075249672, -0.01315632089972496, 0.03421374782919884, 0.0427732840180397, -0.021606117486953735, 0.005032688844949007, 0.03223847225308418, 0.006142258178442717, -0.03892027214169502, -0.02174024097621441, 0.04526066780090332, 0.012004075571894646, -0.01425369642674923, -0.03765219449996948, -0.008370541036128998, -0.006480615586042404, 0.027044225484132767, 0.01098595466464758, -5.429725570138544e-05, -0.01989908702671528, -0.009864192456007004, 0.025556670501828194, 0.01776530034840107, -0.014448785223066807, -0.00023871741723269224, 0.005666728597134352, -0.012113813310861588, 0.025556670501828194, 0.011973592452704906, 0.0013359030708670616, 0.006736670155078173, 0.020033210515975952, 0.018265215680003166, -0.011930917389690876, 0.019472328945994377, -0.014582909643650055, -0.002354786265641451, -0.03189706429839134, 0.01618020050227642, 0.02064286358654499, -0.02565421536564827, 0.03414059057831764, 0.03553060069680214, -0.024203240871429443, -0.014156152494251728, -0.01433904841542244, -0.0022496210876852274, 0.0423831045627594, -0.010601872578263283, -0.019094344228506088, -0.017521439120173454, 0.0009640144417062402, 0.00863878894597292, -0.0069012767635285854, 0.013802553527057171, 0.001282558310776949, 0.02945845201611519, 0.020313652232289314, -0.006864697206765413, -0.01124200876802206, 0.05579547956585884, -0.0054259151220321655, -0.019472328945994377, -0.027824580669403076, -0.04282205551862717, 0.005727693904191256, 0.005279598291963339, -0.03460392728447914, -0.017497053369879723, -0.03350654989480972, -0.005776465870440006, -0.01814328506588936, 0.0012802721466869116, -0.04348048195242882, 0.03475024551153183, -0.01322947908192873, 0.00855343695729971, 0.024117888882756233, 0.008157162927091122, 0.010924989357590675, 0.009656909853219986, 0.06764714419841766, -0.006285526789724827, -0.013241671957075596, 0.022532789036631584, -0.020313652232289314, 0.016082657501101494, -0.007699922658503056, 0.07164646685123444, 0.040407828986644745, -0.039773788303136826, 0.04923560842871666, -0.0011217622086405754, -0.017411701381206512, 0.028921958059072495, -0.017923809587955475, 0.023386305198073387, -0.009681295603513718, 0.00860830582678318, 0.024812893941998482, -0.014875543303787708, 0.020484354346990585, 0.03343339264392853, -0.015960726886987686, -0.009102125652134418, 0.023069284856319427, 0.012180875055491924, 0.006370877847075462, -0.032116539776325226, -0.0036060998681932688, 0.024666577577590942, -0.038969047367572784, 0.0067488630302250385, -0.0030101637821644545, 0.05335686728358269, -0.02305709198117256, -0.04394381865859032, 0.020630670711398125, 0.01466826070100069, -0.023934992030262947, 0.009467917494475842, 0.00883997417986393, -0.0007292978698387742, -0.01466826070100069, -0.032092154026031494, -0.011193236336112022, -0.04543137177824974, -0.006541580893099308, 0.020118562504649162, -0.051064569503068924, 0.0055478462018072605, 0.001338951289653778, 0.013753781095147133, -0.024434909224510193, 0.0038316715508699417, 0.01513159740716219, 0.006559870671480894, -0.035286739468574524, -0.02269130013883114, 0.02121593803167343, 0.0021185455843806267, 0.022130418568849564, -0.022813230752944946, 0.010553100146353245, -0.018496884033083916, 0.02087453193962574, 0.011071305721998215, -0.009236249141395092, -0.00812058337032795, -0.013826939277350903, -0.0031244736164808273, 0.016046077013015747, 0.036920610815286636, -0.008474182337522507, -0.02087453193962574, -0.044894877821207047, 0.028873184695839882, 0.01219306793063879, -0.018984606489539146, -0.0025178685318678617, -0.02104523591697216, 0.030872847884893417, -0.007364613004028797, -0.002778495429083705, 0.030482670292258263, 0.008577823638916016, -0.0077060190960764885, 0.0027967849746346474, -0.0401395820081234, -0.0026718061417341232, 0.0043620700016617775, -0.014460979029536247, -0.005047930404543877, 0.020338037982583046, 0.05033298581838608, 0.01946013607084751, 0.03794482722878456, 0.0019828977528959513, 0.00010849925456568599, 0.02237427979707718, -0.022325508296489716, -0.04113941267132759, -0.0328725129365921, -0.010742093436419964, -0.013083161786198616, 0.0027358196675777435, 0.02144760638475418, 0.029434066265821457, 0.03279935196042061, 0.007029303815215826, -0.005200343672186136, -0.024312978610396385, -0.02375209704041481, -0.016948364675045013, 0.0012391204945743084, 0.031311798840761185, -0.02631264179944992, 0.001463930238969624, -0.02199629507958889, 0.0033927212934941053, -0.00482235848903656, -0.01474141888320446, -0.005489929113537073, 0.013131934218108654, -0.013765973970293999, -0.013729394413530827, 0.01822863705456257, -0.010400687344372272, -0.013339216820895672, -0.014217117801308632, 0.007047593127936125, 0.021094007417559624, -0.022423051297664642, 0.01265640463680029, 0.04045660048723221, 0.012473508715629578, 0.024861665442585945, -0.011784600093960762, -0.021325675770640373, 0.03889588639140129, 0.03158004581928253, -0.030555829405784607, -0.004612028133124113, -0.03255549073219299, 0.029994947835803032, -0.030555829405784607, 0.02089891955256462, 0.02495921030640602, 0.006590353325009346, -0.004227946512401104, 0.008699754253029823, -0.007328033912926912, 0.0032159218098968267, 0.02493482455611229, -0.023630166426301003, -0.028434235602617264, 0.028653709217905998, 0.008138872683048248, -0.008413217030465603, 0.01592414639890194, 0.0020621526055037975, -0.0468701533973217, -0.030068105086684227, 0.023398498073220253, -0.03206776827573776, -0.012467412278056145, -0.0010775623377412558, -0.044212065637111664, 0.015180369839072227, 0.006907373201102018, -0.018265215680003166, -0.0295072253793478, -0.00244318600744009, 0.024629997089505196, 0.015119404532015324, 0.059843577444553375, 0.033091988414525986, -0.00921186339110136, 0.020459968596696854, 0.031043551862239838, 0.026263868436217308, -0.01131516695022583, 0.031775135546922684, 0.01219306793063879, -0.041188184171915054, -0.005816093645989895, -0.028117215260863304, 0.025556670501828194, -0.0050357370637357235, 0.03728640079498291, -0.027531947940587997, -0.0033439488615840673, 0.005508218426257372, 0.01211990974843502, 0.028751254081726074, 0.04940631240606308, 0.021703660488128662, 0.01603388413786888, 0.03165320307016373, 0.016168007627129555, 0.023825254291296005, 0.0072670686058700085, 0.014131765812635422, 0.03740833327174187, 0.02692229487001896, 0.015533968806266785, -0.015034052543342113, 0.017094681039452553, -0.013180706650018692, -0.016277745366096497, -0.015680285170674324, 0.006968338508158922, -0.010662837885320187, -0.008888746611773968, 0.025751760229468346, 0.019947858527302742, -0.0033439488615840673, -0.0030375979840755463, 0.005947168916463852, 0.006761056371033192, -0.026044392958283424, 0.01920408196747303, 0.007279261481016874, 0.004837599582970142, -0.0011164278257638216, 0.01935039833188057, 0.022264542058110237, -0.00773650174960494, -0.006657415069639683, -0.0027266747783869505, -0.019557680934667587, -0.002699240343645215, 0.050771936774253845, 0.016606958582997322, 0.01954548805952072, -0.020399002358317375, 0.0147536126896739, 0.017289770767092705, 0.003116853069514036, -0.018691973760724068, -0.02430078387260437, 0.01791161671280861, -0.013058776035904884, -0.004657751880586147, 0.01387571170926094, -0.016606958582997322, -0.008230321109294891, 0.0073158410377800465, 0.024252012372016907, -0.0019447943195700645, 0.008681464940309525, 0.021118393167853355, -0.00035150328767485917, 0.0036335343029350042, 0.03126302734017372, -0.03813991695642471, -0.027922125533223152, -0.01561931986361742, 0.019362591207027435, -0.022666914388537407, -0.015107211656868458, 0.019216274842619896, -0.01603388413786888, 0.0031549562700092793, 0.015180369839072227, 0.031189868226647377, 0.0013244720175862312, -0.03350654989480972, 0.014863350428640842, -0.02804405614733696, 0.025629829615354538, 0.0017116019735112786, 0.017862845212221146, 0.017753107473254204, 0.016716696321964264, 0.029092660173773766, 0.014619488269090652, 0.004764441400766373, 0.04511435329914093, -0.008992387913167477, -0.0009403903968632221, -0.008303479291498661, -0.022996125742793083, -0.034189362078905106, -0.0025056754238903522, 0.011845565401017666, 0.000598603452090174, -0.043919432908296585, -0.029434066265821457, 0.015009666793048382, 0.006285526789724827, -0.007559702266007662, -0.014448785223066807, -0.03494533151388168, -0.04387065768241882, 0.01859442889690399, 0.01013243943452835, -0.0030741773080080748, -0.0315556600689888, 0.01322947908192873, -0.0008397975470870733, -0.009839805774390697, -0.021033043041825294, 0.012863687239587307, -0.02662966027855873, -0.0017131260829046369, -0.00082150794332847, 0.002581882057711482, -0.005355805158615112, 0.0026641853619366884, 0.017350735142827034, 0.00026824750239029527, 0.005645390599966049, -0.05062561854720116, 0.01704590953886509, -0.029360907152295113, 0.031189868226647377, -0.006761056371033192, -0.014473171904683113, 0.03377479687333107, 0.030628986656665802, 0.0005578328855335712, 0.009510593488812447, -0.028458621352910995, 0.026190709322690964, -0.005453349556773901, -0.014302468858659267, -0.012339385226368904, 0.00744996452704072, -0.015741251409053802, -0.04445592686533928, 0.0021795108914375305, -0.0010463176295161247, -0.013583078049123287, -0.022727878764271736, -0.012741755694150925, 0.025068948045372963, -0.007346323691308498, -0.06252605468034744, 0.01865539327263832, -0.001448688912205398, -0.02855616621673107, 0.005989844910800457, -0.0003848437045235187, -0.021776819601655006, -0.02516649290919304, -0.010784768499433994, 0.01958206668496132, 0.03575007617473602, -0.01696055755019188, -0.012619825080037117, 0.00035893343738280237, -0.01689959317445755, -0.004444373305886984, 0.01926504820585251, 0.005867913831025362, -0.029873017221689224, 0.025678601115942, 0.016168007627129555, 0.01098595466464758, -0.008931422606110573, -0.00015784308197908103, -0.011491966433823109, 0.00034921709448099136, -0.04396820440888405, 0.0347258597612381, -0.025239650160074234, -0.026385799050331116, -0.013656236231327057, -0.0048071169294416904, 0.026824750006198883, 0.0006679515354335308, 0.022032873705029488, 0.005666728597134352, 0.028263531625270844, 0.010662837885320187, -0.0030619842000305653, 0.00744996452704072, 0.022240156307816505, -0.018179863691329956, 0.007309744134545326, -0.021203745156526566, 0.013278251513838768, 0.01160170417279005, -0.009705682285130024, 0.019313819706439972, -0.012546666897833347, 0.011199332773685455, 0.03460392728447914, 0.005358853377401829, -0.00021776057837996632, -0.019947858527302742, 0.001268079038709402, 0.027970898896455765, 0.0202648788690567, -0.0207282155752182, -0.02594684809446335, 0.016533799469470978, 0.00554174929857254, -0.02464218996465206, -0.0013046582462266088, 0.030628986656665802, -0.01975277066230774, -0.0216183103621006, 0.005794755648821592, 0.03428690880537033, -0.02709299698472023, -0.04545575752854347, 0.016863012686371803, 0.020435582846403122, -0.02309367060661316, -0.0014654543483629823, -0.013741587288677692, 0.053454410284757614, 0.0017573259538039565, 0.01379035972058773, 0.026532115414738655, 0.01409518625587225, 0.00037684201379306614, -0.019533295184373856, 0.01655818708240986, 0.011650476604700089, -0.0001222164573846385, 0.0031671493779867887, 0.0024950066581368446, 0.016192395240068436, 0.03475024551153183, 0.016533799469470978, 0.0089131323620677, -0.012522281147539616, 0.001675022765994072, 0.060477618128061295, 0.01152854599058628, 0.016606958582997322, -0.021240323781967163, 0.03250671923160553, 0.02121593803167343, -0.007498736958950758, -0.05062561854720116, 0.036262184381484985, -0.010114150121808052, -0.008833877742290497, 0.0037920442409813404, -0.021496379747986794, -0.0191796962171793, 0.01111398171633482, 0.007864529266953468, -0.006160547491163015, -0.0016948364209383726, 0.020825760439038277, -0.002917191479355097, -0.009766647592186928, 0.009760551154613495, -0.0014456406934186816, -0.01943575032055378, 0.03267742320895195, -0.023861834779381752, 0.006026424001902342, 0.00474310340359807, 0.024605611339211464, 0.0031336185056716204, 0.0006088913651183248, -0.01992347277700901, -0.026971066370606422, 0.004996109753847122, 0.01986250840127468, -0.012668597511947155, 0.012888072989881039, 0.013705008663237095, 0.02252059616148472, -0.028019670397043228, 0.02533719502389431, -0.020459968596696854, 0.0037524166982620955, 0.0032738386653363705, -0.02884879894554615, -0.02453245222568512, 0.02260594815015793, 0.011668765917420387, 0.00018584902863949537, -0.007230489514768124, 0.0020941593684256077, -0.007425578311085701, 0.012778335250914097, -0.021374449133872986, 0.01742389425635338, 0.028141601011157036, 0.017399508506059647, -0.018070127815008163, 0.05038175731897354, 0.006056906655430794, -0.001299323863349855, -0.007431675214320421, 0.016253359615802765, 0.02979985810816288, 0.01554616168141365, 0.0017878086073324084, 0.015424231067299843, 0.012973424047231674, 0.021691467612981796, -0.017545824870467186, -0.05511266738176346, -0.0310923233628273, 0.01569247804582119, 0.012290612794458866, -0.0024614755529910326, 0.007980363443493843, 0.02360578067600727, -0.01594853214919567, 0.05008912459015846, -0.039749402552843094, -0.022106032818555832, 0.02692229487001896, 0.05350318178534508, -0.005483832210302353, 0.0047766342759132385, 0.031116709113121033, 0.005072316154837608, -0.01742389425635338, -0.03216531500220299, 0.013753781095147133, 0.003453686600551009, -0.022508403286337852, -0.007102461997419596, -0.018496884033083916, 0.018923642113804817, -0.012095523998141289, 0.043773114681243896, -0.03092162124812603, 0.040700461715459824, 0.02464218996465206, -0.008242513984441757, 0.02504456229507923, -0.028653709217905998, 0.0261419378221035, -0.015460810624063015, 0.013997642323374748, 0.0034506383817642927, -0.010071474127471447, -0.01785065233707428, 0.022118225693702698, 0.010303142480552197, 0.004840647801756859, 0.01721661165356636, 0.018789518624544144, 0.0003722695983015001, -0.010382397100329399, -0.0004766727506648749, -0.0035024587996304035, -0.005697211250662804, -0.032921284437179565, -0.012827107682824135, -0.01618020050227642, -0.0028760398272424936, 0.0006203223601914942, -0.00979103334248066, 0.0059166862629354, -0.0028516538441181183, -0.02024049311876297, -0.013961062766611576, 0.003356141969561577, -0.0057825627736747265, -0.022118225693702698, -0.04923560842871666]
metadata : {"source": "pydantic_ai_docs", "crawled_at": "2025-03-15T11:17:57.279155", "url_path": "/api/pydantic_graph/mermaid/", "chunk_size": 4875}
updated_dt: 2025-03-15T11:17:57.279155
---
```
defgenerate_code( # noqa: C901
  graph: Graph[Any, Any, Any],
  /,
  *,
  start_node: Sequence[NodeIdent] | NodeIdent | None = None,
  highlighted_nodes: Sequence[NodeIdent] | NodeIdent | None = None,
  highlight_css: str = DEFAULT_HIGHLIGHT_CSS,
  title: str | None = None,
  edge_labels: bool = True,
  notes: bool = True,
  direction: StateDiagramDirection | None,
) -> str:
"""Generate [Mermaid state diagram](https://mermaid.js.org/syntax/stateDiagram.html) code for a graph.
  Args:
    graph: The graph to generate the image for.
    start_node: Identifiers of nodes that start the graph.
    highlighted_nodes: Identifiers of nodes to highlight.
    highlight_css: CSS to use for highlighting nodes.
    title: The title of the diagram.
    edge_labels: Whether to include edge labels in the diagram.
    notes: Whether to include notes in the diagram.
    direction: The direction of flow.

  Returns:
    The Mermaid code for the graph.
  """
  start_node_ids = set(_node_ids(start_node or ()))
  for node_id in start_node_ids:
    if node_id not in graph.node_defs:
      raise LookupError(f'Start node "{node_id}" is not in the graph.')
  lines: list[str] = []
  if title:
    lines = ['---', f'title: {title}', '---']
  lines.append('stateDiagram-v2')
  if direction is not None:
    lines.append(f' direction {direction}')
  for node_id, node_def in graph.node_defs.items():
    # we use round brackets (rounded box) for nodes other than the start and end
    if node_id in start_node_ids:
      lines.append(f' [*] --> {node_id}')
    if node_def.returns_base_node:
      for next_node_id in graph.node_defs:
        lines.append(f' {node_id} --> {next_node_id}')
    else:
      for next_node_id, edge in node_def.next_node_edges.items():
        line = f' {node_id} --> {next_node_id}'
        if edge_labels and edge.label:
          line += f': {edge.label}'
        lines.append(line)
    if end_edge := node_def.end_edge:
      line = f' {node_id} --> [*]'
      if edge_labels and end_edge.label:
        line += f': {end_edge.label}'
      lines.append(line)
    if notes and node_def.note:
      lines.append(f' note right of {node_id}')
      # mermaid doesn't like multiple paragraphs in a note, and shows if so
      clean_docs = re.sub('\n{2,}', '\n', node_def.note)
      lines.append(indent(clean_docs, '  '))
      lines.append(' end note')
  if highlighted_nodes:
    lines.append('')
    lines.append(f'classDef highlighted {highlight_css}')
    for node_id in _node_ids(highlighted_nodes):
      if node_id not in graph.node_defs:
        raise LookupError(f'Highlighted node "{node_id}" is not in the graph.')
      lines.append(f'class {node_id} highlighted')
  return '\n'.join(lines)

```
  
---|---  
###  request_image
```
request_image(
  graph: Graph[](https://ai.pydantic.dev/api/pydantic_graph/graph/#pydantic_graph.graph.Graph "pydantic_graph.graph.Graph")[Any[](https://docs.python.org/3/library/typing.html#typing.Any "typing.Any"), Any[](https://docs.python.org/3/library/typing.html#typing.Any "typing.Any"), Any[](https://docs.python.org/3/library/typing.html#typing.Any "typing.Any")],
  /,
  **kwargs: Unpack[](https://typing-extensions.readthedocs.io/en/latest/index.html#typing_extensions.Unpack "typing_extensions.Unpack")[MermaidConfig[](https://ai.pydantic.dev/api/pydantic_graph/mermaid/#pydantic_graph.mermaid.MermaidConfig "pydantic_graph.mermaid.MermaidConfig")],
) -> bytes[](https://docs.python.org/3/library/stdtypes.html#bytes)

```

Generate an image of a Mermaid diagram using [mermaid.ink](https://mermaid.ink).
Parameters:
Name | Type | Description | Default  
---|---|---|---  
`graph` |  `Graph[](https://ai.pydantic.dev/api/pydantic_graph/graph/#pydantic_graph.graph.Graph "pydantic_graph.graph.Graph")[Any[](https://docs.python.org/3/library/typing.html#typing.Any "typing.Any"), Any[](https://docs.python.org/3/library/typing.html#typing.Any "typing.Any"), Any[](https://docs.python.org/3/library/typing.html#typing.Any "typing.Any")]` |  The graph to generate the image for. |  _required_  
`**kwargs` |  `Unpack[](https://typing-extensions.readthedocs.io/en/latest/index.html#typing_extensions.Unpack "typing_extensions.Unpack")[MermaidConfig[](https://ai.pydantic.dev/api/pydantic_graph/mermaid/#pydantic_graph.mermaid.MermaidConfig "pydantic_graph.mermaid.MermaidConfig")]` |  Additional parameters to configure mermaid chart generation. |  `{}`  
Returns:
Type | Description  
---|---  
`bytes[](https://docs.python.org/3/library/stdtypes.html#bytes)` |  The image data.  
Source code in `pydantic_graph/pydantic_graph/mermaid.py`
```
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
```
|