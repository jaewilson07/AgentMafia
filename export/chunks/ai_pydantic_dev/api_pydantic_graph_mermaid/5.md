---
url: https://ai.pydantic.dev/api/pydantic_graph/mermaid/
session_id: pydantic_ai_docs
chunk_number: 5
title: Image Generation for Mermaid Diagrams
summary: This function generates an image of a Mermaid diagram using mermaid.ink. It takes a graph and additional configuration parameters such as start_node, highlighted_nodes, and image_type. The function outputs the image data based on the specified configurations.
embedding: [0.020815258845686913, -0.0013582495739683509, -0.016749272122979164, -0.0476270355284214, 0.016123736277222633, -0.00387185369618237, -0.0017970686312764883, -0.013912789523601532, -0.03686349838972092, 0.023942939937114716, -0.007112778723239899, -0.025301862508058548, -0.006611271295696497, -0.08278648555278778, 0.02096625044941902, 0.03880481794476509, -0.022950708866119385, -0.0013299386482685804, 0.009534034878015518, 0.023425254970788956, 0.08679854869842529, 0.027933429926633835, 0.04486604779958725, 0.004122607409954071, 0.026488224044442177, 0.004616026300936937, 0.022389883175492287, 0.017622865736484528, 0.035871267318725586, -0.002499448833987117, -0.04952521622180939, -0.023921368643641472, -0.029745327308773994, -0.03503002971410751, -0.044693488627672195, 0.038934238255023956, -0.036798786371946335, -0.02119273692369461, -0.049050670117139816, 0.027717726305127144, 0.02666078694164753, -0.08209624141454697, 0.08403755724430084, 0.022907568141818047, -0.010504694655537605, 0.01270485669374466, -0.025646986439824104, 0.021958479657769203, 0.03798514977097511, 0.0028958015609532595, -0.006675981916487217, 0.023791948333382607, 0.010310563258826733, 0.00021435401868075132, -0.07113856822252274, -0.022497734054923058, -0.01983381249010563, -0.017223816365003586, -0.04102655127644539, 0.027415744960308075, 0.08274334669113159, -0.012694071978330612, 0.004537834320217371, 0.03071598708629608, 0.002200162038207054, 0.06971493363380432, -0.006514205131679773, 0.012338163331151009, -0.015627620741724968, -0.013955929316580296, 0.019661251455545425, 0.041263822466135025, -0.001035370398312807, -0.04749761521816254, -0.037424325942993164, -0.02832169272005558, -0.009512465447187424, 0.03466333821415901, -0.01509915105998516, -0.07182881981134415, -0.001495085540227592, -0.001012451946735382, -0.019068069756031036, -0.009010957553982735, -0.021365297958254814, -0.025819547474384308, -0.057031650096178055, -0.04723877087235451, -0.0003159699554089457, -0.007425546646118164, -0.02433120273053646, -0.031147390604019165, -0.042709026485681534, 0.03869696706533432, 0.0034404494799673557, 0.07842930406332016, -0.0048263357020914555, 0.041371673345565796, 0.005532760173082352, -0.0008877491927705705, 0.004926098044961691, -0.011216511949896812, -0.048360422253608704, 0.0076142861507833, 0.042148202657699585, -0.0034377530682832003, 0.016846338286995888, 0.0468936488032341, 0.029594335705041885, -0.005184940528124571, -0.035763416439294815, 0.0007987720309756696, 0.025646986439824104, 0.020405424758791924, -0.0094153992831707, -0.05923181399703026, -0.008072652854025364, 0.019035715609788895, 0.015627620741724968, -0.021397653967142105, -0.05664338544011116, 0.02171042189002037, 0.004030934069305658, 0.020114226266741753, 0.05198422074317932, 0.009647279046475887, -0.02484888769686222, 0.0328514389693737, 0.011691057123243809, -0.0003191717842128128, -0.00967424176633358, 0.021063314750790596, 0.009404613636434078, -0.08058632910251617, 0.045254312455654144, -0.026013679802417755, 0.007921661250293255, -0.01949947513639927, -0.023942939937114716, 0.05974949896335602, 0.0561257004737854, 0.034577056765556335, 0.012079320847988129, -0.0007590019376948476, -0.012747997418045998, 0.01665220595896244, -0.02277814783155918, 0.05129397287964821, -0.03858911618590355, -0.037942010909318924, 0.008557982742786407, 0.020243646577000618, 0.0059264167211949825, -0.027502024546265602, 0.006190652027726173, -0.014408904127776623, 0.002103096107020974, 0.006864720955491066, -0.044995468109846115, -0.005287399049848318, -0.05953379347920418, 0.02277814783155918, -0.04367968812584877, -0.022109471261501312, 0.008353065699338913, 0.03233375400304794, -0.01893864944577217, 0.0020855702459812164, -0.002588425762951374, 0.01624237187206745, -0.011744982562959194, -0.009512465447187424, 0.04346398636698723, 0.003586048260331154, 0.02407236024737358, -0.026035251095891, -0.023468393832445145, -0.05405496060848236, 0.012855848297476768, -0.02215261198580265, -0.05595313757658005, -0.008978602476418018, -0.05405496060848236, 0.027523595839738846, -0.05664338544011116, 0.004003971349447966, 0.0251077301800251, 0.014797167852520943, 0.03226904198527336, 0.05681594833731651, -0.031147390604019165, -0.00015343501581810415, 0.01805427111685276, -0.03990489989519119, 0.01701889932155609, -0.02038385346531868, 0.09801506251096725, -0.054702065885066986, -0.00022817244462203234, 0.020060300827026367, 0.0011243474436923862, 0.01905728504061699, 0.037898868322372437, -0.024309633299708366, 0.02702748030424118, -0.02181827276945114, -0.05004290118813515, -0.05056058615446091, -0.01364316139370203, -0.034210361540317535, 0.01746108941733837, 0.004039023071527481, 0.0050878748297691345, -0.04508174955844879, -0.008202074095606804, -0.004012059886008501, -0.036539945751428604, 0.001678432454355061, 0.005602863617241383, 0.011529279872775078, -0.03408094123005867, 0.04534059390425682, 0.04288158938288689, -0.029421774670481682, 0.03707920014858246, -0.007118171080946922, 0.030327722430229187, -0.07601343840360641, -0.00453244149684906, 0.04193250089883804, 0.015498199500143528, 0.015325638465583324, 0.013632376678287983, -0.024266492575407028, -0.005780817940831184, -0.048360422253608704, 0.019294558092951775, 0.029680617153644562, -0.031923919916152954, 6.0539841797435656e-05, -0.013039194978773594, 0.0015301371458917856, -0.02842954359948635, -0.003990489989519119, -0.046807367354631424, 0.011874403804540634, -0.014516755007207394, -0.010963061824440956, -0.010138001292943954, 0.021063314750790596, -0.021731993183493614, -0.001406108378432691, 0.010855210945010185, -0.006977964658290148, -0.0003441123408265412, -0.01499130018055439, -0.02385665848851204, -0.0007091208244673908, -0.04922323301434517, -0.0019992892630398273, 0.033627964556217194, 0.007279947865754366, -0.0324847437441349, 0.003173517994582653, 0.02407236024737358, 0.01957497000694275, -0.03813613951206207, -0.004834424704313278, 0.0012402874417603016, -0.037575315684080124, 0.029076650738716125, -0.0013609457528218627, -0.005079785827547312, -0.04568571597337723, -0.03666936606168747, 0.037683166563510895, 0.006379391066730022, 0.0024320418015122414, 0.013977499678730965, -0.018269972875714302, 0.005279310047626495, 0.017256172373890877, -0.022605586796998978, 0.06156139448285103, 0.002356545999646187, 0.028925659134984016, 0.0051067485474050045, -0.023576246574521065, 0.01565997675061226, -0.056557103991508484, 0.0638909786939621, -0.0016730398638173938, -0.005069000646471977, 0.0029847784899175167, 0.004656470380723476, 0.005174155347049236, -0.03134152293205261, 0.05569429695606232, -0.0361948236823082, 0.04003432020545006, -0.010111038573086262, -0.03235532343387604, -0.008406991139054298, 0.03116896189749241, -0.01905728504061699, 0.014840308576822281, -0.0011634435504674911, 0.008789862506091595, 0.03183763846755028, 0.021354513242840767, -0.0391499400138855, -0.03852440416812897, 0.01340588927268982, 0.019704392179846764, 0.06798931956291199, 0.06052602455019951, 0.0424501858651638, 0.007430939469486475, 0.01797877438366413, -0.044995468109846115, 0.004858691245317459, -0.002933549229055643, 0.047540754079818726, -0.002227124758064747, -0.045211173593997955, -0.003400005167350173, -0.02640194445848465, -0.023468393832445145, -0.004036326427012682, 0.02245459519326687, 0.003143858863040805, -0.018151337280869484, 0.018291542306542397, 0.01203618012368679, 0.03751060366630554, -0.009490895085036755, -0.0014573376392945647, -0.01242444384843111, 0.009183519519865513, -0.008471702225506306, -0.0166198518127203, -0.030802268534898758, -0.025129301473498344, -0.008450131863355637, -0.014247127808630466, -0.008816825225949287, 0.020480919629335403, 0.06337329000234604, 0.05284702777862549, -0.026445085182785988, -0.002863446017727256, 0.04236390441656113, 0.04892124980688095, 0.05107827112078667, -0.014042210765182972, 0.041738368570804596, 0.0050770896486938, 0.0039015128277242184, 0.004497389774769545, -0.011194941587746143, -0.0705346018075943, 0.008131971582770348, -0.030543426051735878, -0.049611497670412064, -0.022648725658655167, 0.0038853350561112165, -0.007053460460156202, 0.00899477954953909, 0.03748903423547745, 0.005295488052070141, 0.011572420597076416, 0.04646224528551102, -0.02489202842116356, 0.01867980696260929, -0.05284702777862549, -0.0023120574187487364, -0.01074196770787239, 0.013621591031551361, 0.034512344747781754, 0.049093808978796005, -0.007064245641231537, -0.0042628138326108456, 0.005303576588630676, 0.048791829496622086, -0.008433953858911991, -0.0022770059294998646, 0.057765036821365356, -0.01473245769739151, -0.016673777252435684, 0.027351032942533493, -0.0021745474077761173, -0.03459862619638443, -0.028645247220993042, -0.021958479657769203, -0.0063362508080899715, 0.06302817165851593, 0.006977964658290148, 0.012985269539058208, 0.012629360891878605, 0.03194548934698105, 0.011227297596633434, -0.019283773377537727, 0.050388023257255554, 0.008816825225949287, 0.006066623143851757, 0.015681546181440353, 0.08912812918424606, -0.021699637174606323, -0.012014609761536121, -0.004154962953180075, -0.023770377039909363, -0.05440008267760277, -0.016770843416452408, -0.048791829496622086, 0.014128491282463074, -0.04581513628363609, -0.01595117524266243, -0.031557224690914154, -0.03377895802259445, 0.028860948979854584, -0.05616884306073189, -0.0542706623673439, -0.03216119110584259, -0.044218942523002625, -0.028796236962080002, 0.027049049735069275, 0.03632424399256706, -0.007770670112222433, 0.06384783983230591, -0.04771331697702408, 0.023662526160478592, -0.009188911877572536, -0.023101700469851494, 0.028558965772390366, 0.042816877365112305, -0.023382114246487617, -0.022346744313836098, 0.008655048906803131, -0.004260117653757334, -0.005780817940831184, -0.0016366401687264442, -0.03019830211997032, -0.004988112486898899, 0.044736627489328384, -0.0033379909582436085, -0.006805403158068657, 0.013298038393259048, 0.020987819880247116, -0.0201250109821558, -0.03319656103849411, -0.024870458990335464, -0.016112951561808586, -0.013039194978773594, -0.024913599714636803, 0.024503765627741814, 0.006357821170240641, 0.023662526160478592, -0.03604383021593094, -0.005163370165973902, -0.019521044567227364, 0.01701889932155609, 0.02271343767642975, 0.012942129746079445, 0.053149010986089706, -0.012111675925552845, -0.02256244607269764, -0.014559895731508732, 0.021149596199393272, -0.01599431410431862, -0.028407974168658257, 0.018474889919161797, -0.009404613636434078, 0.030931688845157623, 0.003985097166150808, -0.002539892913773656, -0.03123367205262184, -0.011087090708315372, 0.0014074565842747688, -0.012327378615736961, 0.04594456031918526, -0.011313578113913536, -0.009663457050919533, 0.019154351204633713, -0.012478369288146496, -0.04193250089883804, 0.002595166675746441, 0.034835897386074066, -0.062122222036123276, 0.0064710648730397224, -0.036647796630859375, -0.002588425762951374, 0.016997329890727997, 0.00628771772608161, -0.008018727414309978, -0.003890727646648884, -0.019434764981269836, -0.05401182174682617, -0.018701376393437386, 0.017709147185087204, -0.042083490639925, -0.02137608453631401, -0.04068142548203468, 0.019208276644349098, 0.021516289561986923, -0.0171698909252882, -0.039818618446588516, -0.0022635245695710182, 0.009221266955137253, 0.042773738503456116, 0.008245214819908142, -0.04417579993605614, 0.020437778905034065, 0.04124225303530693, 0.021289803087711334, -0.012284237891435623, 0.021138811483979225, 0.00841777678579092, 0.012780352495610714, -0.00483712088316679, 0.030953260138630867, -0.03537515550851822, -0.03429664298892021, 0.034512344747781754, 0.01598352938890457, -0.030780697241425514, -0.0001976708008442074, -0.03242003545165062, -0.06419295817613602, -0.010164964012801647, -0.03630267456173897, 0.027372604236006737, 0.0059911273419857025, -0.030263012275099754, 0.037898868322372437, -0.04018530994653702, -0.043075721710920334, 0.002235213527455926, 0.0014991300413385034, -0.050344884395599365, 0.005039341747760773, -0.006843151059001684, 0.005114837549626827, -0.023425254970788956, -0.027351032942533493, -0.012920559383928776, -0.008601123467087746, -0.005791603121906519, -0.012974484823644161, 0.008638870902359486, 0.002332279458642006, -0.0013137609930709004, 0.005414124112576246, 0.005128318909555674, -0.03994803875684738, -0.012640146538615227, 0.006605878472328186, -0.027739297598600388, 0.022433023899793625, 0.003826017025858164, -0.0015867589972913265, 0.0011459176894277334, 0.017407163977622986, 0.03792043775320053, -0.0037559138145297766, -0.02821384184062481, 0.07536633312702179, 0.009792878292500973, 0.03235532343387604, -0.02784714847803116, 0.020588770508766174, 0.0061852592043578625, -0.010661078616976738, 0.04249332472681999, -0.004082163330167532, -0.008611908182501793, -0.008633478544652462, -0.011809692718088627, 0.0008513494394719601, -0.013988284394145012, 0.013114690780639648, -0.06704022735357285, -0.02573326788842678, 0.0064063542522490025, -0.015034439973533154, -0.031190531328320503, 0.034361355006694794, -0.02201240509748459, -0.018086625263094902, 0.0180974118411541, -0.009992402046918869, -0.04922323301434517, 0.010828248225152493, -0.028192272409796715, -0.004233154933899641, 0.014171632006764412, 0.0014721672050654888, -0.009868374094367027, -0.006541167851537466, -0.038093000650405884, 0.01683555357158184, 0.033692676573991776, -0.02521558292210102, -0.018917080014944077, 0.02126823179423809, -0.004343701992183924, 0.0042412434704601765, 0.03634581342339516, 0.007425546646118164, -0.03500846028327942, -0.02540971338748932, -0.0432051420211792, 0.010111038573086262, -0.008784470148384571, -0.00786773581057787, 0.0039877938106656075, 0.005910239182412624, -0.02090153843164444, 0.050388023257255554, 0.020664267241954803, -0.029227642342448235, 0.014894234016537666, 0.007172096520662308, -0.003995882347226143, -0.012068535201251507, -0.013977499678730965, 0.001728313509374857, -0.006212221924215555, -0.015627620741724968, -0.024201782420277596, 0.011852833442389965, -0.006363213527947664, 0.01103855762630701, 0.0310179702937603, 0.02323112264275551, -0.004564797040075064, -0.005047430284321308, 0.005279310047626495, -0.0051714591681957245, -0.018776873126626015, -0.007889306172728539, 0.018118981271982193, 0.028386402875185013, -0.003944653086364269, 0.01260779146105051, -0.025021450594067574, 0.018345467746257782, -0.012974484823644161, 0.014096136204898357, 0.02584111876785755, -0.01613452099263668, -0.05043116584420204, 0.024137070402503014, 0.0043976278975605965, -0.00019868191157002002, 0.019909309223294258, -0.024460624903440475, 0.008018727414309978, 0.008617301471531391, -0.05668652802705765, 0.024244923144578934, -0.03584969788789749, 0.04611711949110031, -0.019725961610674858, -0.024611616507172585, -0.006562738213688135, 0.0657460168004036, 0.012251882813870907, -0.003054881701245904, -0.0321180522441864, -0.014635391533374786, 0.026445085182785988, 0.018140550702810287, 0.019251417368650436, -0.0003260810044594109, -0.01912199705839157, 0.008320710621774197, -0.02079368755221367, -0.014937374740839005, -0.009329117834568024, 0.03800671920180321, 0.015271713025867939, -0.002041081665083766, -0.03688506782054901, 0.0230801310390234, 0.052372485399246216, -0.017784642055630684, 0.015131506137549877, 0.0254744254052639, -0.010499302297830582, 0.003351472318172455, -0.01115180179476738, 0.020923109725117683, 0.0043383096344769, -0.02998260036110878, -0.0022783540189266205, 0.0358281284570694, 0.023058559745550156, 0.021775132045149803, -0.014376549050211906, -0.03733804449439049, 0.008363851346075535, -0.021095670759677887, -4.66371639049612e-05, 0.030586564913392067, 0.006320073269307613, -0.018625881522893906, -0.019984804093837738, -0.004181925673037767, 0.02148393541574478, -0.021796703338623047, -0.003906905185431242, -0.011367503553628922, -0.039753906428813934, 0.001349486643448472, 0.01164791639894247, -0.03438292443752289, 0.027264753356575966, 0.008245214819908142, -0.003761306405067444, 0.003294850466772914, 0.0012328726006671786, -0.015940388664603233, -0.07799790054559708, -0.02961590699851513, -0.007738315034657717, 0.004667255561798811, -0.0017229209188371897, -0.003944653086364269, 0.008881536312401295, -0.018658235669136047, -0.04160894453525543, 0.009625708684325218, 0.012909773737192154, 0.0016056329477578402, 0.0022122953087091446, -0.03272201865911484, 0.003222051076591015, 0.015153076499700546, 0.007166704162955284, 0.0013595976633951068, 0.005063608288764954, 0.027351032942533493, -0.01843174919486046, -0.0076951743103563786, -0.022174181416630745, -0.021214306354522705, -0.03684192895889282, -0.00767899677157402, -0.0037855729460716248, 0.02049170434474945, 0.01026203017681837, 0.004411109257489443, 0.01327646803110838, -0.024417484179139137, 0.019920093938708305, 0.022033974528312683, 0.010655686259269714, -0.03129838407039642, -0.0037882691249251366, 0.040487293154001236, -0.004362576175481081, 0.011766552925109863, -0.00899477954953909, 0.029529625549912453, 0.007921661250293255, -0.03479275852441788, 0.04952521622180939, 0.01823761686682701, -0.040897127240896225, -0.03515945002436638, -0.0002032318734563887, -0.03252788633108139, 0.02219575271010399, 0.019154351204633713, 0.001710787764750421, -0.0007252984796650708, 0.01898179017007351, -0.0024050790816545486, 0.015314852818846703, 0.02134372852742672, 0.005023163743317127, 0.01203618012368679, -0.004405716434121132, 0.04383067786693573, 0.03134152293205261, 0.023727236315608025, -0.041112832725048065, -0.019995590671896935, -0.0035806559026241302, -0.026056820526719093, -0.054227523505687714, -0.041522666811943054, 0.02329583279788494, 0.003799054306000471, -0.0016096773324534297, -0.011701841838657856, 0.0017741501796990633, -0.06643626093864441, -0.016900263726711273, 0.036237962543964386, -0.030672846361994743, 0.04861926659941673, -0.02108488604426384, -0.0128342779353261, -0.02588425949215889, -0.0005011704633943737, -0.03444763273000717, 0.01418241672217846, -0.006492634769529104, 0.03065127693116665, -0.00131780537776649, 0.04326985403895378, -0.0023039686493575573, 0.0011283919448032975, 0.0038179282564669847, 3.336642839713022e-05, 0.03621639311313629, -0.02355467528104782, -0.024870458990335464, 0.02562541700899601, 0.005823958199471235, 0.06294188648462296, -0.03694977983832359, 0.019930878654122353, 0.016824768856167793, 0.014408904127776623, -0.017115965485572815, 0.00012099542800569907, 0.005969556979835033, -0.008638870902359486, 0.005303576588630676, -0.02681177854537964, 0.032441604882478714, 0.013459814712405205, 0.006104371044784784, 0.030068879947066307, 0.03390837833285332, -0.010046327486634254, -0.02765301614999771, -0.0015382260316982865, 0.001478907885029912, -0.009782092645764351, 0.027480455115437508, -0.007495650090277195, 0.020394638180732727, -0.01591881923377514, -0.012392088770866394, -0.04434836283326149, -0.01997401937842369, 0.01179890800267458, 0.03293772041797638, -0.007501042447984219, -0.028537394478917122, -0.035353582352399826, -0.014505970291793346, -0.06039660423994064, 0.002863446017727256, 0.014527540653944016, 0.025301862508058548, 0.01242444384843111, -0.03278672695159912, -0.019229847937822342, -0.023921368643641472, -0.02739417366683483, -0.014872663654386997, 0.01403142511844635, -0.05150967463850975, -0.016641421243548393, 0.003278672695159912, 0.010725789703428745, -0.00993308424949646, -0.0050609116442501545, -0.01971517689526081, 0.007101993542164564, 0.026725497096776962, 0.008531020022928715, -0.001245679915882647, -0.02469789609313011, -0.015541340224444866, 0.016673777252435684, 0.03554771468043327, -0.02873152680695057, -0.008282963186502457, 0.0152285723015666, 0.0048910463228821754, -0.02484888769686222, 0.033951520919799805, -0.016857123002409935, -0.03533201292157173, -0.0007967498386278749, -0.03662622720003128, -0.019219061359763145, -0.026639215648174286, -0.007732922211289406, 0.025388143956661224, 0.03673407807946205, -0.019208276644349098, 0.00790009181946516, 0.011507710441946983, -0.008628086186945438, -0.021624140441417694, -0.035612426698207855, 0.0324847437441349, 0.00459715211763978, 0.0015867589972913265, -0.030629705637693405, 0.011572420597076416, 0.023684097453951836, 0.013157831504940987, -0.007231414783746004, 0.018334683030843735, 0.006627448834478855, 0.007010320201516151, 0.026445085182785988, -0.006972572300583124, -0.037898868322372437, -0.013848078437149525, 0.01668456196784973, -0.0042169769294559956, 0.010919922031462193, -0.004454249516129494, 0.0225193053483963, 0.018000345677137375, 0.0025749444030225277, 0.022389883175492287, -0.026337232440710068, 0.03185920789837837, -0.012532295659184456, -0.01512072142213583, -0.008191289380192757, 0.015886463224887848, -0.0029847784899175167, -0.04534059390425682, 0.03528887405991554, 0.021473148837685585, -0.027480455115437508, -0.02329583279788494, -0.008331495337188244, 0.017967989668250084, 0.009550212882459164, -0.015347208827733994, -0.013060765340924263, -0.0254744254052639, 0.02817070111632347, 0.018960218876600266, 0.0027272840961813927, -0.014743242412805557, 0.0001867171813501045, 0.037942010909318924, 0.01026203017681837, -0.020211292430758476, -0.03149251639842987, 0.050905708223581314, -0.027307892218232155, 0.001503174426034093, -0.04512489214539528, -0.026035251095891, -0.00025345003814436495, -0.01379415299743414, -0.05849842354655266, 0.01045076921582222, -0.01912199705839157, -0.009059490635991096, -0.005303576588630676, 0.0143118379637599, -0.019725961610674858, 0.005732284858822823, 0.009728167206048965, 0.031514085829257965, 0.019887737929821014, -0.0025183227844536304, 0.02484888769686222, -0.0014735154109075665, 0.059318091720342636, -0.027674587443470955, -0.02474103681743145, 0.044952329248189926, -0.006260755006223917, 0.020588770508766174, -0.02163492701947689, 0.07955095171928406, 0.044111091643571854, -0.041630517691373825, 0.05064686760306358, 0.01975831761956215, 0.0064656720496714115, 0.013761797919869423, -0.007824596017599106, 0.01416084636002779, -0.013945144601166248, -0.00522538460791111, 0.009102631360292435, 0.009550212882459164, -0.005753855220973492, 0.03746746480464935, -0.019175922498106956, 0.001744491164572537, 0.014096136204898357, 0.01509915105998516, 0.013492169789969921, -0.058282721787691116, -0.004386842716485262, 0.039495065808296204, -0.05405496060848236, 0.01460303645581007, -0.013988284394145012, 0.04206192120909691, -0.010693434625864029, -0.0369282104074955, 0.02226046286523342, 0.020405424758791924, -0.008725152350962162, 0.020178936421871185, -0.028882518410682678, 0.021473148837685585, -0.04221291095018387, -0.04337770491838455, -0.007403976749628782, -0.015045225620269775, -0.007101993542164564, -0.0052172960713505745, -0.055996280163526535, 0.0059264167211949825, 0.002771772677078843, 0.018582740798592567, 0.007468687370419502, 0.009954654611647129, -0.021850628778338432, 0.020707406103610992, -0.035353582352399826, -0.030780697241425514, 0.004505478776991367, 0.006956394761800766, 0.010704219341278076, -0.017892494797706604, 0.005602863617241383, -0.010601760819554329, 0.010386059060692787, 0.018345467746257782, 0.0061205485835671425, -0.0011459176894277334, 0.0022082508075982332, 0.01765522174537182, 0.009722774848341942, 0.022033974528312683, -0.008962424471974373, -0.01564919203519821, -0.017223816365003586, 0.04693678766489029, 0.020038729533553123, -0.02004951611161232, 0.022864429280161858, 0.007986372336745262, 0.03459862619638443, 0.0005372331943362951, -0.003912298008799553, 0.03345540538430214, 0.009496287442743778, -0.010499302297830582, 0.016921835020184517, -0.04482290893793106, -0.011205727234482765, 0.018377823755145073, 0.00020222077728249133, -0.019003359600901604, 0.01916513592004776, 0.04186778888106346, 0.028817808255553246, 0.02015736699104309, -0.03205334022641182, -0.0067514777183532715, 0.01379415299743414, -0.03091011941432953, -0.008682011626660824, -0.00821825210005045, -0.01828075759112835, -0.0034701083786785603, 0.0006255362532101572, 0.02201240509748459, 0.008423169143497944, 0.012413659133017063, -0.002421256620436907, 0.021624140441417694, -0.018151337280869484, -0.011561635881662369, 0.0025277596432715654, 0.028256982564926147, 0.009140378795564175, -0.008838395588099957, -0.02134372852742672, -0.017525799572467804, -0.002627521986141801, 0.004190014209598303, -0.004969238303601742, 0.004686129279434681, 0.0033946125768125057, 0.005370983853936195, 0.0180974118411541, 0.0027690764982253313, -0.012618576176464558, -0.028645247220993042, -0.02599211037158966, 0.025711696594953537, 0.01595117524266243, -0.03666936606168747, 0.013880433514714241, 0.05534917488694191, 0.01102238055318594, 0.03408094123005867, -0.01668456196784973, -0.027782438322901726, 0.026445085182785988, -0.0030279189813882113, -0.008471702225506306, -0.014559895731508732, -0.013848078437149525, 0.017860138788819313, -0.008315318264067173, -0.00782998837530613, 0.021656496450304985, 0.0052119032479822636, -0.019003359600901604, -0.003448538249358535, -0.034318212419748306, 0.016738487407565117, 0.026229381561279297, -0.009787485003471375, -0.000714513415005058, 0.02355467528104782, -0.019747532904148102, -0.008083438500761986, 0.013114690780639648, 0.015023655258119106, -0.039193082600831985, -0.014764812774956226, 0.022842857986688614, -0.03828713297843933, -0.026013679802417755, 0.006697551812976599, -0.04663480445742607, 0.027243182063102722, -0.000956504256464541, -0.004125303588807583, -0.0293570626527071, -0.0024131678510457277, 0.03485746681690216, 0.003777483943849802, 0.0568590871989727, 0.016458073630928993, 0.011302793398499489, -0.004465034697204828, 0.017288528382778168, 0.029141360893845558, -0.001021214877255261, 0.01732088252902031, 0.008617301471531391, -0.036690935492515564, 0.0033865238074213266, -0.03257102519273758, 0.06281246989965439, 0.0017822390655055642, 0.03658308461308479, -0.01893864944577217, -0.015821753069758415, 0.00014576746616512537, 0.005867098458111286, 0.0018550385721027851, 0.04810158163309097, 0.002990171080455184, 0.013190186582505703, 0.009399221278727055, 0.025711696594953537, 0.003141162684187293, -0.005894061643630266, 0.012747997418045998, 0.02993945963680744, 0.031061111018061638, 0.03925779089331627, 0.004963845945894718, 0.027502024546265602, -0.012435229495167732, 0.0018172906711697578, -0.014818738214671612, -0.005397946573793888, -0.02858053520321846, -0.0013858863385394216, 0.010731182061135769, 0.004413805436342955, -0.0016137217171490192, -0.0017188765341416001, 0.008175111375749111, 0.006719122175127268, -0.03798514977097511, 0.021106455475091934, 0.006077408324927092, 0.0003004663740284741, 0.0046322038397192955, 0.029917888343334198, 0.016673777252435684, -0.01687869429588318, -0.025948969647288322, -0.011982254683971405, -0.033110279589891434, -0.024309633299708366, 0.03632424399256706, 0.024439053609967232, 0.014905018731951714, 0.001710787764750421, 0.028235413134098053, 0.05129397287964821, 0.005732284858822823, -0.006411746609956026, -0.04206192120909691, 0.017374807968735695, -0.006692159455269575, 0.025690127164125443, 0.0028014318086206913, 0.005764639936387539, -0.007436331827193499, 0.020944679155945778, 0.013815723359584808, -0.003939260728657246, 0.006999535020440817, 0.012586221098899841, -0.012230312451720238, -0.015573695302009583, 0.01687869429588318, -0.04516803100705147, -0.040487293154001236, -0.0012975833378732204, 0.03278672695159912, -0.01416084636002779, -0.0009544820641167462, 0.041824646294116974, -0.013103906065225601, 0.025603845715522766, 0.03252788633108139, 0.024007650092244148, -0.01683555357158184, -0.000321194005664438, 0.02920607291162014, -0.005147192627191544, 0.02894722856581211, -0.008024119772017002, 0.022389883175492287, 0.008800648152828217, 0.058800406754016876, 0.0273294635117054, 0.02868838608264923, -0.004087555687874556, 0.018011130392551422, 0.01151849515736103, -0.012694071978330612, 0.006805403158068657, -0.035073172301054, -0.029917888343334198, -0.0008776381728239357, 0.011097876355051994, 0.013707872480154037, -0.03116896189749241, -0.02422335185110569, 0.001678432454355061, -0.011939113959670067, 0.003300243057310581, 0.026035251095891, 0.0013885826338082552, -0.06436552107334137, 0.010844426229596138, 0.030176730826497078, 0.008487880229949951, -0.015174646861851215, 0.0008486531442031264, 0.020178936421871185, 0.0008088831091299653, -0.0188307985663414, 0.0009956002468243241, 0.005689144600182772, 0.0023686792701482773, -0.01861509680747986, 0.010396843776106834, -0.01004093512892723, -0.00644410215318203, -0.009296762757003307, -0.03636738285422325, 0.006163689307868481, -0.03164350613951683, -0.006999535020440817, -0.04350712522864342, 0.037726305425167084, 0.0015490110963582993, -0.018367039039731026, 0.017083611339330673, 0.030047310516238213, -0.0038475871551781893, 0.002698973286896944, -0.0031600366346538067, 0.008509449660778046, -0.013686302118003368, -0.006460279691964388, -0.03123367205262184, 0.016274727880954742, -0.02396450936794281, -0.02873152680695057, -0.007776062935590744, -0.018183691427111626, -0.03528887405991554, -0.0062715401872992516, 0.004214280750602484, 0.015131506137549877, -0.003389220219105482, -0.04633282497525215, 0.032182760536670685, -0.0008796603651717305, -0.00641713896766305, 0.00133398303296417, -0.012305808253586292, -0.014150061644613743, -0.03625953197479248, 0.0023174500092864037, -0.00602887524291873, 0.03526730090379715, 0.024007650092244148, -0.006568130571395159, 0.016458073630928993, -0.009480109438300133, -0.03401622921228409, 0.01550898514688015, -0.008881536312401295, -0.01190675888210535, 0.013006839901208878, 0.0026625734753906727, 0.009426183998584747, 0.024978309869766235, 0.001438463805243373, -0.020588770508766174, 0.0018348164157941937, -0.06578915566205978, -0.0012679242063313723, -0.013190186582505703, -0.021138811483979225, -0.0008338236366398633, 0.01288820430636406, 0.032182760536670685, -0.020987819880247116, 0.027868717908859253, 0.0021098367869853973, 0.02463318593800068, -0.0032597987446933985, 0.031190531328320503, 0.008406991139054298, 0.00123691710177809, -0.013179401867091656, 0.012090105563402176, -0.0025857295840978622, 0.00012790464097633958, 0.004599848296493292, -0.0012268059654161334, -0.014894234016537666, -0.01392357423901558, 0.007457902189344168, 0.016641421243548393, -0.01657671108841896, -0.014818738214671612, -0.018399393185973167, 0.011831263080239296, 0.036173250526189804, -0.010936099104583263, -0.02026521787047386, -0.03906366229057312, 0.003238228615373373, 0.002240606117993593, 0.008849181234836578, -0.012219526804983616, 0.08576317876577377, 0.0039419569075107574, -0.014408904127776623, 0.011885188519954681, 0.03194548934698105, -0.021699637174606323, -0.015012870542705059, -0.0018941345624625683, 0.0010178445372730494, -0.007296125404536724, 0.0017957204254344106, -0.0033622572664171457, 0.03157879412174225, 0.025797978043556213, 0.022735007107257843, -0.0025277596432715654, 0.011982254683971405, 0.014980514533817768, -0.003044096753001213, 0.00767899677157402, 0.007188274525105953, 0.009242837317287922, 0.01823761686682701, 0.018895508721470833, -0.0006383435684256256, 0.016156092286109924, 0.007905484177172184, 0.0043922350741922855, -0.006395569071173668, 0.010758144780993462, 0.049352653324604034, 0.005656789056956768, -0.016350222751498222, -0.0036130112130194902, 0.03386523947119713, 0.013977499678730965, 0.0036912031937390566, -0.049093808978796005, 0.022055545821785927, -0.0048479060642421246, 0.00808883085846901, 0.009485502727329731, -0.020189721137285233, 0.004850602243095636, 0.009722774848341942, 0.01125965267419815, -0.01798955909907818, 0.00403363024815917, 0.008628086186945438, 0.003302939236164093, -0.01867980696260929, -0.011248867027461529, 0.02333897352218628, -0.034512344747781754, 0.023835089057683945, -0.021462364122271538, -0.02894722856581211, -0.01190675888210535, 0.00917812716215849, 0.008978602476418018, -0.0005470071919262409, -0.0025992109440267086, -0.033951520919799805, -0.017191462218761444, 0.029400203377008438, -0.0038475871551781893, -0.003014437621459365, 0.003809839254245162, 0.014247127808630466, -0.016770843416452408, 0.022648725658655167, 0.00041084521217271686, -0.033110279589891434, -0.017191462218761444, -0.01103855762630701, -0.012920559383928776, -0.000738779897801578, -0.0076951743103563786, -0.010143393650650978, 0.006713729817420244, -0.033110279589891434, 0.0028095205780118704, -0.008557982742786407, 0.0086766192689538, 0.03097482956945896, 0.008725152350962162, 0.03440449386835098, -0.004109126050025225, 0.0454268753528595, 0.01739637926220894, -0.00457827840000391, -0.01646886020898819, 0.0071613118052482605, 0.022648725658655167, 0.04124225303530693, -0.021149596199393272, 0.04378753900527954, 0.03735961392521858, 0.020728977397084236, -0.016382578760385513, -0.03643209487199783, -0.03863225504755974, 0.01738559454679489, 0.01244601421058178, 0.004133392591029406, 0.0011519843246787786, 0.008708974346518517, -0.036798786371946335, 0.04264431446790695, -0.027264753356575966, -0.02123587764799595, 0.01654435507953167, 0.025711696594953537, -0.004734662361443043, 0.006557345390319824, 0.025539135560393333, 0.0037073807325214148, -0.014171632006764412, -0.02847268432378769, 0.001824031351134181, -0.01949947513639927, -0.01853960007429123, -0.012176387012004852, -0.03531044349074364, 0.025495994836091995, -0.006665196735411882, 0.05901610851287842, -0.016447288915514946, 0.019887737929821014, 0.009480109438300133, -0.00873593706637621, 0.038459695875644684, -0.005683751776814461, 0.021171167492866516, -0.010644901543855667, 0.050862569361925125, 0.0013002795167267323, -0.006201437208801508, 0.003874549875035882, 0.008730544708669186, -0.024050790816545486, 0.015498199500143528, 0.024093931540846825, -0.005629826337099075, -0.011097876355051994, -0.010914528742432594, -0.016857123002409935, -0.009625708684325218, -0.003143858863040805, -0.009997795335948467, -0.007603500969707966, -0.013071550987660885, 0.003208569483831525, -0.0012268059654161334, -0.02961590699851513, 0.02230360358953476, -0.003518641460686922, 0.008574160747230053, -0.0006016067927703261, -0.017256172373890877, 0.002949727000668645, -0.008854573592543602, -0.038977380841970444]
metadata : {"source": "pydantic_ai_docs", "crawled_at": "2025-03-14T10:14:57.098356", "url_path": "/api/pydantic_graph/mermaid/", "chunk_size": 4963}
updated_dt: 2025-03-14T10:14:57.098356
---
```
defrequest_image(
  graph: Graph[Any, Any, Any],
  /,
  **kwargs: Unpack[MermaidConfig],
) -> bytes:
"""Generate an image of a Mermaid diagram using [mermaid.ink](https://mermaid.ink).
  Args:
    graph: The graph to generate the image for.
    **kwargs: Additional parameters to configure mermaid chart generation.
  Returns:
    The image data.
  """
  code = generate_code(
    graph,
    start_node=kwargs.get('start_node'),
    highlighted_nodes=kwargs.get('highlighted_nodes'),
    highlight_css=kwargs.get('highlight_css', DEFAULT_HIGHLIGHT_CSS),
    title=kwargs.get('title'),
    edge_labels=kwargs.get('edge_labels', True),
    notes=kwargs.get('notes', True),
    direction=kwargs.get('direction'),
  )
  code_base64 = base64.b64encode(code.encode()).decode()
  params: dict[str, str | float] = {}
  if kwargs.get('image_type') == 'pdf':
    url = f'https://mermaid.ink/pdf/{code_base64}'
    if kwargs.get('pdf_fit'):
      params['fit'] = ''
    if kwargs.get('pdf_landscape'):
      params['landscape'] = ''
    if pdf_paper := kwargs.get('pdf_paper'):
      params['paper'] = pdf_paper
  elif kwargs.get('image_type') == 'svg':
    url = f'https://mermaid.ink/svg/{code_base64}'
  else:
    url = f'https://mermaid.ink/img/{code_base64}'
    if image_type := kwargs.get('image_type'):
      params['type'] = image_type
  if background_color := kwargs.get('background_color'):
    params['bgColor'] = background_color
  if theme := kwargs.get('theme'):
    params['theme'] = theme
  if width := kwargs.get('width'):
    params['width'] = width
  if height := kwargs.get('height'):
    params['height'] = height
  if scale := kwargs.get('scale'):
    params['scale'] = scale
  httpx_client = kwargs.get('httpx_client') or httpx.Client()
  response = httpx_client.get(url, params=params)
  if not response.is_success:
    raise httpx.HTTPStatusError(
      f'{response.status_code} error generating image:\n{response.text}',
      request=response.request,
      response=response,
    )
  return response.content

```
  
---|---  
###  save_image
```
save_image(
  path: Path[](https://docs.python.org/3/library/pathlib.html#pathlib.Path "pathlib.Path") | str[](https://docs.python.org/3/library/stdtypes.html#str),
  graph: Graph[](https://ai.pydantic.dev/api/pydantic_graph/graph/#pydantic_graph.graph.Graph "pydantic_graph.graph.Graph")[Any[](https://docs.python.org/3/library/typing.html#typing.Any "typing.Any"), Any[](https://docs.python.org/3/library/typing.html#typing.Any "typing.Any"), Any[](https://docs.python.org/3/library/typing.html#typing.Any "typing.Any")],
  /,
  **kwargs: Unpack[](https://typing-extensions.readthedocs.io/en/latest/index.html#typing_extensions.Unpack "typing_extensions.Unpack")[MermaidConfig[](https://ai.pydantic.dev/api/pydantic_graph/mermaid/#pydantic_graph.mermaid.MermaidConfig "pydantic_graph.mermaid.MermaidConfig")],
) -> None

```

Generate an image of a Mermaid diagram using [mermaid.ink](https://mermaid.ink) and save it to a local file.
Parameters:
Name | Type | Description | Default  
---|---|---|---  
`path` |  `Path[](https://docs.python.org/3/library/pathlib.html#pathlib.Path "pathlib.Path") | str[](https://docs.python.org/3/library/stdtypes.html#str)` |  The path to save the image to. |  _required_  
`graph` |  `Graph[](https://ai.pydantic.dev/api/pydantic_graph/graph/#pydantic_graph.graph.Graph "pydantic_graph.graph.Graph")[Any[](https://docs.python.org/3/library/typing.html#typing.Any "typing.Any"), Any[](https://docs.python.org/3/library/typing.html#typing.Any "typing.Any"), Any[](https://docs.python.org/3/library/typing.html#typing.Any "typing.Any")]` |  The graph to generate the image for. |  _required_  
`**kwargs` |  `Unpack[](https://typing-extensions.readthedocs.io/en/latest/index.html#typing_extensions.Unpack "typing_extensions.Unpack")[MermaidConfig[](https://ai.pydantic.dev/api/pydantic_graph/mermaid/#pydantic_graph.mermaid.MermaidConfig "pydantic_graph.mermaid.MermaidConfig")]` |  Additional parameters to configure mermaid chart generation. |  `{}`  
Source code in `pydantic_graph/pydantic_graph/mermaid.py`
```
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
```
| ```
defsave_image(
  path: Path | str,
  graph: Graph[Any, Any, Any],
  /,
  **kwargs: Unpack[MermaidConfig],
) -> None:
"""Generate an image of a Mermaid diagram using [mermaid.ink](https://mermaid.ink) and save it to a local file.
  Args:
    path: The path to save the image to.
    graph: The graph to generate the image for.
    **kwargs: Additional parameters to configure mermaid chart generation.
  """
  if isinstance(path, str):
    path = Path(path)
  if 'image_type' not in kwargs:
    ext = path.suffix.lower()[1:]
    # no need to check for .jpeg/.jpg, as it is the default
    if ext in ('png', 'webp', 'svg', 'pdf'):
      kwargs['image_type'] = ext
  image_data = request_image(graph, **kwargs)
  path.write_bytes(image_data)