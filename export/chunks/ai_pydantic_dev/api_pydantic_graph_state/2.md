---
url: https://ai.pydantic.dev/api/pydantic_graph/state/
session_id: pydantic_ai_docs
chunk_number: 2
title: NodeStep Data Class in Pydantic Graph API
summary: This documentation chunk describes the NodeStep data class, which logs the execution history of nodes in a graph. It includes attributes like the state of the graph after node execution, the specific node executed, the start timestamp, duration, type of history step, and a snapshot function for preserving graph state.
embedding: [0.021594027057290077, 0.010125556960701942, -0.018080968409776688, -0.04443427547812462, 0.006736047100275755, -0.007557909470051527, -0.01525548193603754, -0.043016161769628525, -0.03087623417377472, 0.014202638529241085, 0.03164975345134735, -0.003413682570680976, -0.008820246905088425, -0.07769552618265152, -0.03592558577656746, 0.02103537507355213, -0.030167177319526672, -0.001851875800639391, 0.02887798100709915, 0.05358756333589554, 0.02939365990459919, -0.036011531949043274, 0.0629986897110939, -0.03717180714011192, 0.00746659142896533, 0.00119384890422225, -0.0001041596187860705, -0.0010776870185509324, 0.0046303607523441315, -0.002411870053038001, 0.03459341451525688, -0.016071971505880356, 0.012870469130575657, 0.04280129447579384, 0.008019871078431606, 0.010324308648705482, 0.01412743516266346, 0.018918946385383606, -0.029479606077075005, 0.02402201108634472, 0.006419119890779257, -0.07563281059265137, -0.021099835634231567, 0.002884575165808201, -0.022582409903407097, -0.03351908549666405, -0.038095731288194656, 0.05302891135215759, 0.0017645865445956588, 0.038632895797491074, -0.015491833910346031, -0.007944667711853981, -0.018274348229169846, 0.020057735964655876, -0.06368626654148102, -0.019477596506476402, 0.006177395582199097, -0.004547100514173508, -0.029092848300933838, 0.006811250001192093, 0.0489894337952137, -0.02578391321003437, -0.005881954915821552, 0.025569045916199684, 0.0033008779864758253, 0.023957552388310432, 0.011656477116048336, 0.042221155017614365, -0.024365797638893127, -0.00426240311935544, 0.05418919026851654, 0.053329724818468094, -0.06639357656240463, -0.05552135780453682, 0.015642240643501282, -0.055091626942157745, 0.005454909056425095, 0.060850031673908234, 0.02155105397105217, -0.006956284865736961, 0.021508080884814262, 0.0594748929142952, 0.019971787929534912, 0.038461003452539444, 0.009035112336277962, -0.05208350345492363, -0.009002882987260818, -0.04245750978589058, -0.015330684371292591, -0.013343174941837788, -0.010549917817115784, -0.012687833979725838, 0.000823205104097724, 0.058228667825460434, 0.043531838804483414, 0.0026428510900586843, -0.0039911349304020405, -0.014804262667894363, -0.022303083911538124, 0.01704961247742176, 0.011570530943572521, -0.02050895430147648, -0.05681055411696434, -0.013182025402784348, 0.028706088662147522, 0.03773045912384987, -0.009013625793159008, 0.02546161413192749, -0.011570530943572521, 0.007563280873000622, -0.05045052245259285, -0.051653772592544556, -0.01379439327865839, 0.007262468803673983, -0.047442398965358734, -0.046754829585552216, -0.040093984454870224, 0.004907000809907913, 0.008959909901022911, 0.021024631336331367, -0.03547436743974686, -0.03332570567727089, -0.05702541768550873, -0.01776941306889057, 0.00946484412997961, -0.010523059405386448, -0.01769421063363552, 0.004692134913057089, -0.006548039615154266, -0.01427784189581871, 0.010523059405386448, -0.03180015832185745, -0.02956555224955082, -0.07069089263677597, 0.033583544194698334, 0.015642240643501282, -0.04520779475569725, 0.03332570567727089, -0.02335592731833458, -0.0037279240787029266, 0.0039884489960968494, -0.020132938399910927, 0.0012193642323836684, 0.015448860824108124, 0.03510909527540207, 0.10459673404693604, -0.04209223762154579, 0.07657822221517563, -0.0355817973613739, 0.01330020185559988, 0.08156310766935349, 0.058400560170412064, -0.03214394301176071, -0.00242798519320786, -0.02202375791966915, -0.007670714054256678, 0.02335592731833458, 0.018467728048563004, -0.018005765974521637, -0.0005663731717504561, -0.012118439190089703, 0.02840527705848217, -0.02382863312959671, -0.024279851466417313, -0.03538842126727104, 0.023764172568917274, -0.061451658606529236, -0.0349801741540432, -0.01444973424077034, -0.021808892488479614, 0.0038783301133662462, -0.022969167679548264, 0.0033787668216973543, 0.02694418840110302, 0.028663115575909615, 0.025697965174913406, -0.031112587079405785, 0.010372652672231197, -0.03100515529513359, -0.041877370327711105, 0.0027798281516879797, -0.031220020726323128, -0.0810474306344986, -0.019810639321804047, -0.0435962975025177, -0.019713949412107468, -0.015534806996583939, 0.02922176755964756, -0.02872757613658905, 0.015470347367227077, 0.005597257521003485, 0.055779196321964264, -0.022926194593310356, -0.023549307137727737, 0.004641104023903608, 0.005342104472219944, 0.030725829303264618, 0.01870407909154892, 0.03167123720049858, 0.00831531174480915, 0.006950912997126579, -0.0035694604739546776, 0.0010333708487451077, 0.027502840384840965, 0.018714822828769684, -0.028362303972244263, -0.025074854493141174, -0.009083457291126251, -0.023098088800907135, -0.026235131546854973, 6.219361966941506e-05, -0.025955805554986, -0.04144763946533203, 0.02449471689760685, -0.014191894792020321, 0.025998778641223907, -0.06235409528017044, -0.013848109170794487, 0.021540310233831406, 0.02531120739877224, -0.004042165353894234, 0.05388837680220604, 0.020079221576452255, -0.0005499225226230919, 0.012215128168463707, 0.0061075640842318535, 0.02251794934272766, -0.04537968710064888, -0.020648617297410965, 0.04020141810178757, -0.024602150544524193, 0.002117772353813052, 0.006000131368637085, -0.014095205813646317, -0.043832652270793915, -0.051997557282447815, -0.04161953181028366, -0.007874836213886738, 0.04456319659948349, -0.014718316495418549, -0.03966425359249115, 0.05208350345492363, -0.025569045916199684, 0.016834745183587074, 0.009427242912352085, 0.0015537493163719773, 0.01820988766849041, -0.055951088666915894, 0.0019821382593363523, 0.06089300662279129, 0.02449471689760685, 0.015481091104447842, -0.021465107798576355, 0.0019875098951160908, -0.016447987407445908, -0.013096079230308533, 0.028211897239089012, 0.015233994461596012, -0.004090510308742523, 0.012387021444737911, 0.04585238918662071, -0.029028387740254402, -0.04207075014710426, -0.003948161378502846, 0.010942047461867332, -0.04293021559715271, 0.046797800809144974, -0.047614291310310364, 0.009572277776896954, -0.04245750978589058, -0.010463970713317394, -0.016415758058428764, 0.03197205066680908, 0.00016064585361164063, 0.001999596133828163, -0.01818840205669403, -0.013729933649301529, -0.005417307373136282, -0.00567246088758111, -0.010249105282127857, 0.019509827718138695, 0.02662188932299614, 0.02125024050474167, 0.07576172798871994, -0.02316254749894142, 0.024236878380179405, 0.006752162240445614, 0.025246746838092804, 0.026342563331127167, -0.05620892718434334, 0.019756922498345375, -0.01125897467136383, 0.015470347367227077, 0.01820988766849041, 0.011108568869531155, -0.025504587218165398, -0.00754716619849205, 0.04653996229171753, 0.029329201206564903, -0.04778618365526199, 0.016684340313076973, -0.05285701900720596, 0.036677613854408264, 0.01687772013247013, 0.002583762863650918, 0.02872757613658905, -0.0014221438905224204, -0.043037645518779755, 0.014105948619544506, 0.010082583874464035, -0.005092322826385498, 0.010716438293457031, 0.0008910221513360739, -0.009357411414384842, 0.012720063328742981, 0.030725829303264618, 0.010399511083960533, -0.03766600042581558, -0.019209014251828194, -0.017844615504145622, 0.02644999697804451, -0.08147716522216797, 0.061623550951480865, 0.012580400332808495, -0.004616932012140751, -0.009137174114584923, -0.024451743811368942, 0.03818167746067047, 0.04473508894443512, 0.008191763423383236, -0.008890078403055668, -0.0603773295879364, -0.021658485755324364, -0.007488077972084284, 0.03609747812151909, -0.024193905293941498, -0.0243443101644516, 0.008992139250040054, 0.009201633743941784, 0.03605450317263603, -0.04963403195142746, -0.038095731288194656, -0.023055115714669228, -0.03676356002688408, -0.0020653987303376198, 0.020304830744862556, 0.0063600316643714905, 0.0247955285012722, -0.06183841824531555, -0.02415093034505844, 0.02642850950360298, 0.011387894861400127, 0.03216543048620224, 0.02088496834039688, -0.014836492948234081, -0.018424754962325096, -0.01568521372973919, -0.025934318080544472, 0.021175038069486618, 0.029135821387171745, -0.026192158460617065, -0.0247955285012722, 0.0021271726582199335, -0.05797082930803299, -0.027545813471078873, -0.005656345747411251, -0.025826886296272278, -0.013396890833973885, 0.008326055482029915, 0.04015844315290451, 0.02823338471353054, 0.026535943150520325, 0.00857315119355917, 0.01493318285793066, -0.016834745183587074, 0.017919819802045822, -0.006757533643394709, 0.004377893637865782, 0.011946545913815498, 0.03654869645833969, -0.01773718371987343, 0.025955805554986, 0.025590533390641212, -0.008830989710986614, 0.022474976256489754, 0.0285771694034338, 0.01462162658572197, 0.0008910221513360739, -0.01674879901111126, 0.027180541306734085, 0.04748537018895149, -0.030016770586371422, 0.010571404360234737, 0.035818152129650116, -0.011817626655101776, 0.036484237760305405, 0.0033787668216973543, -0.00592492800205946, 0.05208350345492363, 0.028211897239089012, 0.011592017486691475, -0.011387894861400127, -0.013622500002384186, -0.0033787668216973543, 0.016619879752397537, -0.026836754754185677, 0.039277493953704834, 0.03409922495484352, -0.007923181168735027, -0.026407023891806602, 0.04183439910411835, 0.021196523681282997, -0.00792855303734541, -0.07017521560192108, 0.02385011874139309, -0.0440475158393383, 0.008127303794026375, 0.0015792646445333958, 0.0150943323969841, -0.030747314915060997, -0.014514193870127201, -0.03345462679862976, 0.002370239933952689, -0.044477250427007675, 0.0123977642506361, 0.050192683935165405, 0.0007177864899858832, -0.041361693292856216, 0.02728797309100628, -0.028770549222826958, 0.015620753169059753, -0.0006096821161918342, 0.030725829303264618, 0.012290331535041332, 0.06695222854614258, -0.021755175665020943, -0.024107957258820534, 0.006343916989862919, 0.005688575562089682, -0.03003825806081295, 0.025074854493141174, -0.03154231980443001, 0.02724500000476837, 0.0004978846409358084, -0.017157044261693954, -0.017457857728004456, 0.0036043759901076555, -0.04911835119128227, -0.020294087007641792, -0.03212245926260948, 0.03051096387207508, 0.05371648445725441, -0.02924325317144394, 0.009738798253238201, -0.019101582467556, -0.02939365990459919, 0.057541098445653915, 0.0010024838848039508, 0.0023957551456987858, -0.04045925661921501, 0.01102262269705534, 0.01248371135443449, 0.03672058880329132, 0.052814047783613205, -0.03431408852338791, -0.034528955817222595, 0.00045994739048182964, -0.013783649541437626, 0.016265351325273514, -0.0003375745436642319, 0.04194182902574539, 0.015567037276923656, 0.012515940703451633, 0.0017833872698247433, -0.009024369530379772, 0.01657690666615963, -0.0006623913650400937, 0.03654869645833969, 0.021518822759389877, 0.03433557599782944, -0.005763778928667307, 0.018747052177786827, 0.010265219956636429, -0.015610010363161564, 0.034206658601760864, -0.01255891378968954, 0.03934195265173912, -0.005747663788497448, -0.006730675231665373, -0.01412743516266346, 0.002748941071331501, 0.023592280223965645, 0.018822256475687027, -0.00815416220575571, 0.040072496980428696, 0.025891344994306564, -0.040093984454870224, -0.02031557448208332, -0.007160407491028309, -0.016458731144666672, 0.018489213660359383, 0.002873831894248724, -0.010061097331345081, 0.046797800809144974, -0.011463097296655178, -0.07455848157405853, -0.00698314281180501, 0.029630012810230255, 0.03214394301176071, 0.017232248559594154, -0.045809417963027954, 0.015287711285054684, 0.014546424150466919, -0.04295169934630394, 0.0025085597299039364, 0.005914184730499983, 0.008078958839178085, -0.01049082912504673, 0.006510437931865454, -0.0206378735601902, -0.010759411379694939, 0.011645733378827572, 0.012354791164398193, -0.033368680626153946, -0.032767053693532944, 0.017898332327604294, 0.04387562349438667, -0.061150845140218735, 0.03459341451525688, -0.024774042889475822, 0.04641104117035866, 0.01830657757818699, -0.0004915058379992843, 0.025762425735592842, -0.03624788299202919, -0.008223993703722954, 0.020530439913272858, 0.0035399163607507944, -0.024408770725131035, 0.006564154289662838, 0.01602899841964245, 0.013504324480891228, 0.003099441062659025, -0.023291466757655144, 0.004506812896579504, 0.00559188611805439, 0.030811775475740433, -0.012365534901618958, 0.031262993812561035, -0.0036580925807356834, -0.010947419330477715, -0.033067867159843445, 0.024193905293941498, -0.06695222854614258, 0.0009588392567820847, 0.002050626790151, -0.024881474673748016, -0.007788890041410923, -0.000930638110730797, 0.020863482728600502, 0.01875779591500759, -0.014062975533306599, 0.01744711399078369, 0.034851253032684326, -0.029973797500133514, 0.032079484313726425, 0.012032492086291313, 0.0013623842969536781, 0.02271132916212082, -0.001275095040909946, -0.006591012701392174, -0.002313837641850114, 0.02152956649661064, -0.016759542748332024, 0.018725566565990448, -0.004267774522304535, -0.017210761085152626, -0.027073107659816742, -0.02301214262843132, -0.00714429235085845, -0.014492707327008247, -0.049075379967689514, -0.004238230641931295, 0.0025448184460401535, -0.014299328438937664, 0.02874906174838543, -0.020852738991379738, 0.040717095136642456, 0.014095205813646317, -0.0457664430141449, -0.004702878184616566, 0.011538300663232803, 0.0003397567488718778, 0.003872958477586508, 0.025182288140058517, -0.02430133707821369, -0.0029463490936905146, 0.021980784833431244, -0.05040754750370979, 0.012773780152201653, 0.01119451504200697, 0.005097694229334593, -0.00821324996650219, 0.02451620250940323, -0.026643376797437668, -0.0003780297702178359, 0.0011985490564256907, -0.008551664650440216, -0.029350686818361282, 0.02481701597571373, -0.006021617911756039, 0.005156782455742359, -0.017522316426038742, -0.013031618669629097, -0.0023178663104772568, 0.013493580743670464, 0.0005925599834881723, 0.049247272312641144, 0.054103244096040726, -0.05277107283473015, 0.008256223984062672, 0.00029896580963395536, -0.0030645253136754036, 0.013858852908015251, -0.00020529769244603813, 0.012859726324677467, -0.012419250793755054, 0.020455237478017807, -0.008471089415252209, 0.0043725217692554, -0.018102455884218216, 0.015610010363161564, 0.027696218341588974, -0.006623242516070604, -0.027631759643554688, 0.024688096717000008, 0.019391650334000587, -0.0003224667743779719, -0.0022413202095776796, 0.015341428108513355, -0.008863219991326332, 0.02382863312959671, -0.006021617911756039, 0.004090510308742523, 0.012784522958099842, 0.004509498830884695, -8.284088835353032e-05, 0.01843549683690071, -0.025268234312534332, -0.026192158460617065, -0.03167123720049858, -0.022131191566586494, -0.005650974344462156, 0.0033035636879503727, -0.010614377446472645, -0.019090838730335236, -0.05057943984866142, -0.04331697151064873, -0.009545419365167618, 0.017919819802045822, 0.0298878513276577, 0.0008091045310720801, -0.008444231003522873, -0.0037628395948559046, 0.00754716619849205, 0.008025242947041988, 0.0190263781696558, 0.004786138888448477, 0.007074460852891207, 0.0014718316961079836, -0.014245611615478992, 0.02031557448208332, 0.05229836702346802, 0.013998515903949738, -0.006633985787630081, 0.01150607131421566, 0.0009608535910956562, -0.01731819473206997, 0.01615791767835617, 0.04486400634050369, -0.0043053762055933475, -0.005941043142229319, 0.005597257521003485, 0.025569045916199684, 0.023721199482679367, -0.008261594921350479, -0.0460672564804554, 0.024408770725131035, 0.00432417681440711, 0.013740676455199718, -0.04213520884513855, 0.011624246835708618, -0.022797275334596634, -0.0019848241936415434, 0.006510437931865454, 0.036999914795160294, 0.0009185518720187247, -0.006628613919019699, 0.022152677178382874, -0.017576033249497414, -0.00033539230935275555, -0.03429260477423668, -0.07769552618265152, -0.001122674555517733, -0.017780156806111336, -0.00524004315957427, -0.034206658601760864, 0.023141061887145042, 0.026407023891806602, -0.036484237760305405, 0.007976897992193699, -0.003373395185917616, -0.02204524539411068, 0.0010367281502112746, -0.009260721504688263, -0.032767053693532944, 0.0056241159327328205, 0.026557430624961853, -0.02008996531367302, 0.003948161378502846, 0.00665010092779994, 0.0177156962454319, -0.021099835634231567, -0.0011488612508401275, 0.0002658965822774917, -0.01729670725762844, -0.021787405014038086, 0.0036580925807356834, -0.01608271524310112, -0.027782166376709938, -0.01716778799891472, 0.0006637343321926892, 0.0008104474400170147, 0.01021687500178814, -0.016781030222773552, 0.01255891378968954, -0.07666416466236115, 0.012591144070029259, -0.013224998489022255, 0.03427111729979515, -0.02162625640630722, 0.004195257555693388, -0.009615250863134861, -0.006999257951974869, -0.021389903500676155, -0.07180819660425186, -0.041232772171497345, -0.009207005612552166, 0.009738798253238201, -0.000647619366645813, -0.0038568435702472925, 0.0038299853913486004, -0.032767053693532944, -0.05010673776268959, 0.042693860828876495, 0.005103066097944975, 0.0010138986399397254, 0.002068084664642811, -0.004192571621388197, 0.057240284979343414, -0.018027251586318016, -0.0440475158393383, 0.00046364040463231504, -0.014761289581656456, -0.015244738198816776, -0.027352433651685715, 0.009910691529512405, 0.018080968409776688, -0.027803651988506317, 0.009002882987260818, -0.013407634571194649, 0.0033143069595098495, 0.00869669858366251, 0.0406741201877594, 0.02496742270886898, 0.04129723459482193, 0.053458645939826965, -0.04860267415642738, 0.01900489255785942, -0.00031289851176552474, 0.012354791164398193, 0.011559787206351757, 0.04095344617962837, 0.034357063472270966, 0.025053368881344795, 0.004968774970620871, -0.011828369460999966, -0.027502840384840965, -0.05620892718434334, -0.01248371135443449, -0.03858992084860802, -0.04232858866453171, 0.028963929042220116, 0.029092848300933838, -0.01255891378968954, 0.005618744064122438, 0.0068649668246507645, -0.09986969083547592, 0.009749541990458965, 0.06295572221279144, -0.029436632990837097, 0.02204524539411068, 0.026020264253020287, -0.020476723089814186, -0.025590533390641212, 0.04413346201181412, -0.07683605700731277, -0.029995284974575043, -0.016888462007045746, -0.0022520634811371565, -0.011570530943572521, 0.027137568220496178, -0.020992401987314224, 0.015846362337470055, -0.010952791199088097, -0.006343916989862919, -0.03777343034744263, -0.01993955858051777, -0.006494322791695595, -0.056080009788274765, -0.01761900633573532, 0.029415147379040718, 0.028168924152851105, -0.004689448978751898, 0.017726439982652664, -0.002536760875955224, 0.005307188723236322, 0.05023565515875816, -0.0008211907697841525, -0.041404664516448975, 0.028856495395302773, -0.025031881406903267, 0.033067867159843445, 0.01959577389061451, -0.0014731745468452573, 0.034228142350912094, 0.015309197828173637, 0.013203511945903301, -0.04421940818428993, -6.56767952023074e-05, 0.010630492120981216, 0.007616997230798006, -0.013267971575260162, -0.021314701065421104, 0.010899074375629425, -0.00988383311778307, 0.03130596876144409, 0.008009127341210842, -0.007654598914086819, 0.0060269893147051334, -0.01940239407122135, 0.06119382008910179, 0.0201866552233696, -0.041555073112249374, -0.03856843709945679, -0.0008366342517547309, 0.018177658319473267, 0.009223120287060738, 0.05173971876502037, 0.015244738198816776, -0.0011857913341373205, 0.020691590383648872, -0.016490960493683815, 0.022131191566586494, -0.04262940213084221, 0.04080304130911827, -0.03164975345134735, 0.011087082326412201, -0.00048244115896523, -0.011044109240174294, -0.03457193076610565, -0.010920560918748379, 0.05994759500026703, -0.01583561860024929, -0.044176436960697174, -0.008132675662636757, -0.0272664874792099, 0.01510507520288229, 0.02202375791966915, 0.014954669401049614, 0.013869596645236015, -0.0190263781696558, -0.0008755786693654954, 0.0069240545853972435, 0.026514455676078796, -0.0038810160476714373, 0.018102455884218216, 0.013128308579325676, 0.016372784972190857, -0.009959036484360695, -0.036462750285863876, -0.07614848762750626, -0.0440475158393383, 0.007815748453140259, -0.017157044261693954, 0.04325251281261444, -0.004815682768821716, -0.006252598948776722, -0.007122805807739496, 0.0012327933218330145, 0.006607127375900745, -0.031757187098264694, 0.01826360449194908, 0.012902699410915375, -0.017135558649897575, -0.03901965543627739, 0.029952311888337135, 0.02415093034505844, -0.0023218949791043997, -0.003693008329719305, 0.002462900709360838, -0.034700848162174225, -0.01125897467136383, 0.065018430352211, -0.005887326784431934, 0.0027717705816030502, -0.04308062046766281, -0.015502577647566795, -0.02288322150707245, 0.014675343409180641, 0.011753167025744915, -0.024924447759985924, 0.0026065923739224672, 0.005855096969753504, -0.01232256181538105, -0.00730544188991189, -0.022174164652824402, 0.0025918204337358475, 0.0051970696076750755, -0.015674469992518425, 0.01672731339931488, 0.0030886977910995483, 0.013547297567129135, 0.03966425359249115, -0.024924447759985924, -0.014696829952299595, -0.03540990501642227, -0.009362783282995224, -0.024881474673748016, 0.026750808581709862, 0.017533060163259506, -0.017457857728004456, 0.009056598879396915, 0.02561201900243759, -0.00600550277158618, 0.007219495251774788, 0.008116560988128185, -0.021432876586914062, 0.027330946177244186, 0.018650364130735397, -0.01722150482237339, 0.014567910693585873, 0.05229836702346802, -0.0076653421856462955, -0.011301948688924313, -0.028963929042220116, 0.028491223230957985, -0.018016507849097252, 0.014900952577590942, -0.019101582467556, 0.0037870120722800493, -0.006628613919019699, 0.00946484412997961, 0.010410254821181297, -0.012053978629410267, -0.019466854631900787, -0.005973272956907749, -0.0043026902712881565, 0.010163159109652042, 0.04834483563899994, 0.003701065666973591, 0.0492902472615242, 0.02533269301056862, 0.026643376797437668, 0.01959577389061451, -0.0001760893501341343, 0.021239498630166054, -0.0010716438991948962, -0.0150943323969841, 0.013547297567129135, -0.008073587901890278, 0.06291274726390839, 0.024430256336927414, -0.005667089018970728, 0.009690453298389912, 0.0064567215740680695, 0.033218272030353546, 0.029844878241419792, 0.026084724813699722, 0.011323435232043266, 0.039127085357904434, -0.012687833979725838, 0.031606778502464294, 0.0025824198964983225, -0.020122194662690163, -0.006053847726434469, 0.01993955858051777, 0.008095074445009232, 0.028534196317195892, -0.031950563192367554, -0.05693947151303291, 0.027459867298603058, 0.05418919026851654, -0.012301075272262096, 0.04080304130911827, 0.021594027057290077, 0.011699450202286243, 0.009969779290258884, -0.01961725950241089, 0.016211634501814842, -0.010592890903353691, -0.05294296517968178, -0.031757187098264694, 0.017995022237300873, 0.019724693149328232, -0.0023433815222233534, -0.023807145655155182, 0.0018196458695456386, -0.002638822188600898, -0.014675343409180641, 0.0325092151761055, -0.04589536413550377, 0.027889598160982132, 0.0019781095907092094, 0.048559702932834625, -0.00448532635346055, -0.019112324342131615, -0.023377414792776108, -0.037322212010622025, -0.00906734261661768, -0.01151681412011385, 0.014911696314811707, 0.01919827051460743, 0.029178794473409653, 0.005328675266355276, -0.03525950014591217, 0.016147175803780556, 0.00025548902340233326, -0.017919819802045822, -0.019531313329935074, -0.027309460565447807, 0.005417307373136282, 0.01610420271754265, 0.037601538002491, 0.02335592731833458, 0.002634793519973755, 0.02498890832066536, -0.00857315119355917, -0.0025112456642091274, 0.024086471647024155, -0.019552800804376602, 0.0006261327653191984, -0.008841733448207378, -0.015781903639435768, 0.02483850158751011, 0.005411935970187187, 0.031220020726323128, 0.011237488128244877, 0.019316447898745537, 0.00836365669965744, 0.01331094466149807, -0.012730807065963745, -0.015459604561328888, -0.03268110752105713, 0.056595686823129654, 0.02432282455265522, 0.04632509499788284, -0.034034762531518936, 0.03102664090692997, 0.011860599741339684, 0.03197205066680908, 0.0010716438991948962, -0.0055489130318164825, -0.033733952790498734, -0.009647480212152004, -0.03362651914358139, 0.005838981829583645, -0.013289458118379116, 0.004925801418721676, 0.0058765835128724575, -0.01118377223610878, -0.02083125337958336, -0.004735107999294996, -0.015567037276923656, -0.024408770725131035, 0.0006063248147256672, 0.0065158093348145485, 0.006838108412921429, -0.0230336282402277, 0.010351166129112244, -0.016458731144666672, 0.013944799080491066, 0.01216141227632761, 0.00256361928768456, -0.0029194909147918224, -0.003609747625887394, -0.02758878655731678, -0.027846625074744225, -0.01838178001344204, -0.008949166163802147, 0.008954538032412529, 0.0015201765345409513, 0.008025242947041988, 0.0036204911302775145, -0.03996506333351135, 0.004345663357526064, 0.010549917817115784, 0.0192519873380661, -0.007557909470051527, -0.03695693984627724, 0.016512447968125343, 0.019241245463490486, 0.03929898142814636, -0.0001787751680240035, 0.0052158706821501255, -0.02333443984389305, 0.013182025402784348, -0.008073587901890278, 0.028383789584040642, 0.01788758859038353, 0.017672723159193993, -0.004367150366306305, -0.029587039723992348, -0.020799022167921066, -0.02128247171640396, -0.0011441610986366868, -0.0009467530180700123, 0.003907874226570129, 0.01200026273727417, 0.018199143931269646, 0.060635168105363846, -0.004122740123420954, 0.020347803831100464, -0.004455782473087311, -0.017092585563659668, -0.007155035622417927, -0.0006751490873284638, -0.014729060232639313, -0.029801905155181885, -0.03758005052804947, 0.023141061887145042, 0.00603773258626461, -0.010012752376496792, -0.027202026918530464, 0.028706088662147522, 0.0004109310975763947, 0.04065263643860817, 0.06897196918725967, 0.014589397236704826, 0.0036983799654990435, -0.022303083911538124, -0.007745916955173016, -0.014105948619544506, 0.0032283607870340347, 0.013686960563063622, 0.01134492177516222, -0.02187335304915905, -0.011946545913815498, 0.01060363370925188, -0.011387894861400127, 0.019112324342131615, 0.018499957397580147, -0.02597729116678238, -0.0103189367800951, -0.0014798891497775912, -8.846433775033802e-05, 0.00971194077283144, 0.04015844315290451, 0.049247272312641144, -0.01412743516266346, -0.014707573689520359, 0.006494322791695595, -0.011269718408584595, -0.005009062122553587, 0.021110577508807182, 0.030317584052681923, 0.013654730282723904, 0.009346668608486652, -0.04881754145026207, 0.010039610788226128, -0.0028416020795702934, -0.04011547192931175, 0.008782644756138325, 0.04112533852458, 0.01510507520288229, 0.006601755972951651, 0.028942441567778587, 0.02679378166794777, 0.004737793933600187, 0.007117433939129114, -0.021260984241962433, -0.005683204159140587, -0.032573677599430084, -0.014481964521110058, 0.009942920878529549, 0.023269981145858765, 0.01255891378968954, -0.006811250001192093, 0.013353917747735977, -0.0036768934223800898, -0.0039884489960968494, 0.007659970782697201, -0.020777536556124687, 0.0007681457209400833, 0.026557430624961853, 0.0261062104254961, 0.003389510093256831, -0.02447322942316532, -0.021013889461755753, 0.016813259571790695, -0.009099571965634823, -0.005317931994795799, -0.022797275334596634, -0.0026401651557534933, -0.021357674151659012, -0.009008253924548626, 0.034829769283533096, 0.009545419365167618, 0.027180541306734085, -0.004751223139464855, -0.01461088377982378, -0.020745305344462395, 0.019037121906876564, -0.012043235823512077, -0.014471220783889294, 0.02546161413192749, 0.03349759802222252, 0.01265560369938612, 0.013880339451134205, -0.03596855700016022, 0.04357481002807617, -0.026987161487340927, -0.03313232585787773, 0.03491571545600891, -0.005315246060490608, 0.00048210544628091156, 0.015953795984387398, 0.027008648961782455, 0.0019485654775053263, 0.02316254749894142, -0.0023312955163419247, 0.0039132460951805115, 0.018747052177786827, -0.0050386060029268265, -0.03822464868426323, -0.016469474881887436, 0.016641367226839066, 0.03164975345134735, 0.05126701295375824, 0.0021526881027966738, 0.03689248114824295, 0.029114333912730217, -0.022002272307872772, 0.010463970713317394, -0.00913180224597454, -0.016286838799715042, -0.01380513608455658, -0.02614918351173401, 0.04735645279288292, -0.007659970782697201, -0.015062102116644382, -0.019907329231500626, -0.051825664937496185, -0.026879727840423584, -0.007907066494226456, -0.010120186023414135, 0.0077996333129704, 0.017350424081087112, -0.006891824770718813, -0.007729802280664444, -0.01883300021290779, 0.016533933579921722, -0.023312954232096672, 0.03489422798156738, -0.025031881406903267, -0.026385536417365074, -0.01142012421041727, -0.0005516011733561754, 0.007122805807739496, 0.00031994879827834666, -0.021937811747193336, -0.00040958818863146007, 0.01989658549427986, -0.004184514284133911, -0.009540047496557236, -0.043811164796352386, 0.019928814843297005, -0.0243443101644516, 0.017253734171390533, 0.011312691494822502, -0.023721199482679367, 0.02855568379163742, 0.015524064190685749, 0.03433557599782944, 0.010931304655969143, 0.027846625074744225, 0.010275963693857193, -0.009346668608486652, -0.010711067356169224, -0.00030836620135232806, 0.01623312197625637, 0.011130055412650108, -0.09608804434537888, 0.017608262598514557, -0.011269718408584595, -0.002080170903354883, -0.014224125072360039, 0.002179546281695366, 0.02627810463309288, 0.008401257917284966, -0.016641367226839066, 0.00423017330467701, 0.023785660043358803, -0.02043375000357628, 0.016437243670225143, -0.016319068148732185, -0.004874770995229483, 0.010356537997722626, -0.021518822759389877, 0.05075133591890335, 0.03867586702108383, 0.01803799532353878, -0.010936676524579525, 0.017833873629570007, -0.0408245287835598, -0.016394270583987236, -0.01940239407122135, -0.014965412206947803, -0.0006768276798538864, -0.014815006405115128, -0.00019102924852631986, -0.027803651988506317, -0.011226745322346687, -0.00864835362881422, -0.032745569944381714, -0.0038541576359421015, -0.015943052247166634, 0.0217229463160038, -0.002084199571982026, -0.01929496042430401, 0.002137916162610054, -0.016093458980321884, 0.030811775475740433, -0.008358284831047058, -0.007155035622417927, -0.00030534464167430997, -0.0010877588065341115, 0.00034949288237839937, -0.018725566565990448, -0.03100515529513359, 0.015652984380722046, 0.016222378239035606, 0.04490698128938675, -0.03005974367260933, -0.017264477908611298, 0.008900821208953857, -0.007659970782697201, -0.0071765221655368805, 0.016168661415576935, -0.006961656268686056, -0.010399511083960533, 0.018790025264024734, -0.020046992227435112, -0.011430867947638035, 0.02103537507355213, 0.01917678490281105, 0.0034888857044279575, 0.004275832325220108, -0.006784392055124044, 0.0068488516844809055, -0.0066930740140378475, -0.01004498265683651, -0.006553411018103361, 0.02253943681716919, 0.005261529702693224, 0.0018156172009184957, -0.020605644211173058, 0.017414884641766548, -0.01558852382004261, -0.007310813292860985, -0.026170670986175537, 0.003757467959076166, 0.010039610788226128, -0.010754040442407131, -0.018768539652228355, 0.010098698548972607, -0.04095344617962837, 0.0016437243903055787, 0.017114071175456047, 0.02513931505382061, 0.02887798100709915, -0.030919209122657776, 0.00913180224597454, 0.03800978511571884, 0.020326318219304085, -0.0015846362803131342, 0.03816018998622894, -7.209759496618062e-05, 0.016834745183587074, 0.008766530081629753, -0.018199143931269646, -0.025934318080544472, -0.021669229492545128, 0.029522579163312912, -0.008385143242776394, -0.002188946818932891, -0.004286575596779585, 0.02986636571586132, 0.02202375791966915, 2.381570629950147e-05, -0.020294087007641792, -0.006521181203424931, -0.027073107659816742, -0.011914316564798355, 0.0030296097975224257, -0.03938492760062218, 0.00837439950555563, -0.025504587218165398, -0.0071013192646205425, -0.0166306234896183, 0.0014409447321668267, 0.025418641045689583, 0.019585030153393745, -0.03611896559596062, 0.01602899841964245, 0.0006214325549080968, -0.011925059370696545, 0.031563807278871536, -0.03525950014591217, 0.017533060163259506, -0.005406564101576805, 0.00624722708016634, -0.02050895430147648, -0.00234741042368114, 0.008900821208953857, -0.008814875036478043, 0.028813522309064865, 0.022904708981513977, 0.02563350647687912, 0.030811775475740433, -0.023871606215834618, 0.002311151707544923, -0.0301886647939682, 0.003134356811642647, -0.0070959473960101604, -0.023098088800907135, -0.0022144620306789875, -0.01818840205669403, -0.03461490198969841, -0.020304830744862556, -0.007122805807739496, 0.017651237547397614, 0.005186326336115599, -0.016738057136535645, 0.008702070452272892, -0.015158792026340961, -0.014438990503549576, -0.0017686152132228017, 0.02531120739877224, -0.02008996531367302, -0.018016507849097252, 0.0256549920886755, -0.008976024575531483, -0.012677090242505074, -0.005908813327550888, -0.0020358548499643803, 0.023764172568917274, 0.026084724813699722, -0.004896257538348436, 0.0192519873380661, 0.028985414654016495, -0.021013889461755753, 0.011484583839774132, -0.033196788281202316, -0.00033472085488028824, 0.027073107659816742, -0.0052937595173716545, -0.028469735756516457, 0.010281334631145, 0.05109512060880661, -0.009153288789093494, 0.03932046517729759, -0.010249105282127857, -0.01908009499311447, 0.008836361579596996, 0.06222517415881157, 0.020175911486148834, 0.004718993324786425, -0.018446240574121475, 0.02432282455265522, -0.0192519873380661, -0.00017273206321988255, 0.027674732729792595, -0.037279240787029266, -0.0166306234896183, 0.008078958839178085, 0.013998515903949738, -0.005887326784431934, 0.003682265058159828, 0.009937549941241741, -0.01484723575413227, -0.020670102909207344, -0.006988514680415392, -0.0009937549475580454, 0.004109310917556286, -0.01566372625529766, 0.005017119459807873, -0.010968905873596668, 0.0007862750208005309, -0.02758878655731678, -0.015362914651632309, -0.06669438630342484, 0.0010212846100330353, 0.03734369948506355, 0.002688510110601783, 0.0016168662114068866, -0.01982138305902481, 0.0272664874792099, -0.016447987407445908, 0.019810639321804047, -0.011935803107917309, 0.007498821243643761, -0.03704288601875305, 0.009201633743941784, -0.02956555224955082, -0.01999327540397644, -0.010179273784160614, -0.008814875036478043, -0.012064722366631031, -0.0017753298161551356, -0.004504126962274313, 0.0006570197292603552, -0.014062975533306599, 0.003915931563824415, 0.005178268998861313, -0.037279240787029266]
metadata : {"source": "pydantic_ai_docs", "crawled_at": "2025-03-14T10:14:58.908217", "url_path": "/api/pydantic_graph/state/", "chunk_size": 4826}
updated_dt: 2025-03-14T10:14:58.909761
---
```
@dataclass
classNodeStep(Generic[StateT, RunEndT]):
"""History step describing the execution of a node in a graph."""
  state: StateT
"""The state of the graph after the node has been run."""
  node: Annotated[BaseNode[StateT, Any, RunEndT], CustomNodeSchema()]
"""The node that was run."""
  start_ts: datetime = field(default_factory=_utils.now_utc)
"""The timestamp when the node started running."""
  duration: float | None = None
"""The duration of the node run in seconds."""
  kind: Literal['node'] = 'node'
"""The kind of history step, can be used as a discriminator when deserializing history."""
  # TODO waiting for https://github.com/pydantic/pydantic/issues/11264, should be an InitVar
  snapshot_state: Annotated[Callable[[StateT], StateT], pydantic.Field(exclude=True, repr=False)] = field(
    default=deep_copy_state, repr=False
  )
"""Function to snapshot the state of the graph."""
  def__post_init__(self):
    # Copy the state to prevent it from being modified by other code
    self.state = self.snapshot_state(self.state)
  defdata_snapshot(self) -> BaseNode[StateT, Any, RunEndT]:
"""Returns a deep copy of [`self.node`][pydantic_graph.state.NodeStep.node].
    Useful for summarizing history.
    """
    return copy.deepcopy(self.node)

```
  
---|---  
####  state `instance-attribute`
```
state: StateT[](https://ai.pydantic.dev/api/pydantic_graph/state/#pydantic_graph.state.StateT "pydantic_graph.state.StateT")

```

The state of the graph after the node has been run.
####  node `instance-attribute`
```
node: Annotated[](https://docs.python.org/3/library/typing.html#typing.Annotated "typing.Annotated")[
  BaseNode[](https://ai.pydantic.dev/api/pydantic_graph/nodes/#pydantic_graph.nodes.BaseNode "pydantic_graph.nodes.BaseNode")[StateT[](https://ai.pydantic.dev/api/pydantic_graph/state/#pydantic_graph.state.StateT "pydantic_graph.state.StateT"), Any[](https://docs.python.org/3/library/typing.html#typing.Any "typing.Any"), RunEndT[](https://ai.pydantic.dev/api/pydantic_graph/nodes/#pydantic_graph.nodes.RunEndT "pydantic_graph.nodes.RunEndT")], CustomNodeSchema()
]

```

The node that was run.
####  start_ts `class-attribute` `instance-attribute`
```
start_ts: datetime[](https://docs.python.org/3/library/datetime.html#datetime.datetime "datetime.datetime") = field[](https://docs.python.org/3/library/dataclasses.html#dataclasses.field "dataclasses.field")(default_factory=now_utc)

```

The timestamp when the node started running.
####  duration `class-attribute` `instance-attribute`
```
duration: float[](https://docs.python.org/3/library/functions.html#float) | None = None

```

The duration of the node run in seconds.
####  kind `class-attribute` `instance-attribute`
```
kind: Literal[](https://docs.python.org/3/library/typing.html#typing.Literal "typing.Literal")['node'] = 'node'

```

The kind of history step, can be used as a discriminator when deserializing history.
####  snapshot_state `class-attribute` `instance-attribute`
```
snapshot_state: Annotated[](https://docs.python.org/3/library/typing.html#typing.Annotated "typing.Annotated")[
  Callable[](https://docs.python.org/3/library/typing.html#typing.Callable "typing.Callable")[[StateT[](https://ai.pydantic.dev/api/pydantic_graph/state/#pydantic_graph.state.StateT "pydantic_graph.state.StateT")], StateT[](https://ai.pydantic.dev/api/pydantic_graph/state/#pydantic_graph.state.StateT "pydantic_graph.state.StateT")],
  Field[](https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.Field "pydantic.Field")(exclude=True, repr=False),
] = field[](https://docs.python.org/3/library/dataclasses.html#dataclasses.field "dataclasses.field")(default=deep_copy_state[](https://ai.pydantic.dev/api/pydantic_graph/state/#pydantic_graph.state.deep_copy_state "pydantic_graph.state.deep_copy_state"), repr=False)

```

Function to snapshot the state of the graph.
####  data_snapshot
```
data_snapshot() -> BaseNode[](https://ai.pydantic.dev/api/pydantic_graph/nodes/#pydantic_graph.nodes.BaseNode "pydantic_graph.nodes.BaseNode")[StateT[](https://ai.pydantic.dev/api/pydantic_graph/state/#pydantic_graph.state.StateT "pydantic_graph.state.StateT"), Any[](https://docs.python.org/3/library/typing.html#typing.Any "typing.Any"), RunEndT[](https://ai.pydantic.dev/api/pydantic_graph/nodes/#pydantic_graph.nodes.RunEndT "pydantic_graph.nodes.RunEndT")]

```

Returns a deep copy of [`self.node`](https://ai.pydantic.dev/api/pydantic_graph/state/#pydantic_graph.state.NodeStep.node).
Useful for summarizing history.
Source code in `pydantic_graph/pydantic_graph/state.py`
```
56
57
58
59
60
61
```
| ```
defdata_snapshot(self) -> BaseNode[StateT, Any, RunEndT]:
"""Returns a deep copy of [`self.node`][pydantic_graph.state.NodeStep.node].
  Useful for summarizing history.
  """
  return copy.deepcopy(self.node)