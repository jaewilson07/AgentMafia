---
url: https://ai.pydantic.dev/examples/bank-support/
session_id: pydantic_ai_docs
chunk_number: 1
title: Bank Support Example Using PydanticAI
summary: This document provides a comprehensive example of utilizing PydanticAI to create a support agent for a bank. It covers the implementation of a dynamic system prompt, structured result types, and the use of tools. The section on running the example outlines the necessary dependencies and commands to execute the example code.
embedding: [0.0007575228810310364, 0.010680782608687878, 0.0375751256942749, -0.008338971063494682, -0.005307221319526434, -0.011204870417714119, 0.04044102504849434, 0.0609268993139267, -0.001072224578820169, 0.008644136600196362, 0.040759459137916565, -0.06384587287902832, 0.0049191308207809925, -0.062359850853681564, 0.006461542099714279, 0.02243627794086933, -0.02146770991384983, 0.06241292133927345, -0.00217430223710835, 0.030304232612252235, 0.03425811231136322, 0.024094784632325172, 0.029906190931797028, 0.021295225247740746, -0.0018508933717384934, 0.007270893082022667, -0.017460757866501808, 0.01665140688419342, 0.02008783258497715, -0.05248841643333435, 0.046809691935777664, -0.01865488290786743, -0.015629766508936882, 0.0027580964379012585, -0.00033667683601379395, 0.01440910529345274, 0.01111199427396059, 0.004670354537665844, 0.021295225247740746, 0.01533786952495575, 0.027597550302743912, -0.04980827122926712, 0.024930672720074654, 0.01663813926279545, -0.042616985738277435, 0.0347888357937336, 0.031206460669636726, 0.008856425061821938, 0.0337008535861969, 0.0037250060122460127, -0.06405816227197647, 0.022117843851447105, -0.023776350542902946, 0.00574174989014864, -0.0227812472730875, -0.0030002384446561337, 0.0026353669818490744, 0.027146436274051666, -0.012578113935887814, -0.04779152572154999, 0.01135081984102726, -0.04341306909918785, -0.02256895788013935, 0.018256841227412224, -0.051294293254613876, 0.023099681362509727, -0.05201076716184616, 0.023988639935851097, -0.0548766665160656, -0.001623678021132946, 0.03547877445816994, 0.02036646194756031, -0.03784048929810524, -0.012670991010963917, -0.01011689007282257, -0.04232509061694145, 0.020804306492209435, 0.052594561129808426, -0.010302643291652203, -0.06427045166492462, -0.02242301031947136, -0.015629766508936882, -0.03282516449689865, 0.03136567771434784, 0.01602780818939209, -0.03282516449689865, -0.09016969054937363, 0.011012484319508076, -0.007960831746459007, -0.025089887902140617, -0.001738114980980754, -0.0051247854717075825, -0.004215924069285393, 0.001604605233296752, 0.07791000604629517, 0.025554269552230835, 0.007403573486953974, -0.036089103668928146, -0.008657404221594334, 0.01698310859501362, 0.036911722272634506, -0.01086653582751751, -0.020737966522574425, -0.016293169930577278, 0.045509424060583115, 0.005851211491972208, 0.01125130895525217, -0.0025607342831790447, -0.031737182289361954, 0.02751794271171093, -0.0950523316860199, -0.017089253291487694, 0.019981687888503075, 0.011974417604506016, -0.03744244575500488, 0.017301540821790695, -0.026058455929160118, -0.041582077741622925, 0.006730219814926386, -0.05694648250937462, -0.02876514010131359, -0.0028443390037864447, -0.0061431084759533405, -0.018694687634706497, 0.02778330259025097, 0.025156227871775627, -0.008916132152080536, -0.029402006417512894, -0.027703694999217987, -0.005907600745558739, 0.014886755496263504, 0.017142323777079582, 0.008564528077840805, 0.011357453651726246, -0.03699133172631264, 0.0011087117018178105, -0.023099681362509727, 0.007921027950942516, -0.029826583340764046, 0.028977427631616592, 0.016213560476899147, -0.029269324615597725, 0.012352557852864265, 0.02022051252424717, -0.032294441014528275, -0.004892594646662474, -0.009785189293324947, 0.015059240162372589, -0.02696068398654461, 0.0014105598675087094, 0.04073292389512062, 0.026867806911468506, -0.05150658264756203, -0.011383989825844765, -0.021308492869138718, 0.022316865622997284, 0.036089103668928146, 0.0660749077796936, 0.0013889992842450738, -0.04397032782435417, -0.005831309128552675, 0.021414637565612793, -0.06591568887233734, -0.030251160264015198, -0.018004748970270157, 0.00294053228572011, -0.038211993873119354, -0.020485874265432358, -0.06039617955684662, -0.05434594675898552, -0.006939191836863756, 0.015868591144680977, -0.010687416419386864, -0.007390305399894714, 0.028526313602924347, 0.0012115391436964273, -0.026191137731075287, -0.026522837579250336, -0.027000488713383675, -0.05949395149946213, -0.0255940742790699, -0.03948572650551796, -0.006438322830945253, 0.0013342685997486115, -0.0165187269449234, -0.04710158705711365, 0.004962251987308264, -0.010030647739768028, 0.0030765298288315535, 0.04078599438071251, 0.037522055208683014, 0.003058286150917411, -0.001995183527469635, 0.014594858512282372, -0.03386007249355316, -0.03279862552881241, 0.05434594675898552, -0.00720455264672637, 0.006080085411667824, 0.026058455929160118, 0.024479558691382408, 0.012564846314489841, 0.03598295897245407, 0.0315248928964138, 0.003320330288261175, -0.04452758654952049, -0.030781883746385574, 0.016346242278814316, -0.04073292389512062, -0.009811725467443466, 0.024134589359164238, -0.06464195251464844, 0.024307074025273323, -0.016041075810790062, -0.03322320431470871, -0.020101100206375122, -0.01321498118340969, 0.0043486044742167, 0.006209448911249638, 0.008086878806352615, -0.0026900977827608585, 0.045429814606904984, 0.018217036500573158, -0.018256841227412224, -0.017049448564648628, 0.023497721180319786, 0.06182912737131119, -0.01693003624677658, 0.014130476862192154, 0.0034364257007837296, 0.032772090286016464, -0.011841737665235996, 0.023099681362509727, 0.013559950515627861, 0.03996337577700615, -0.010375618003308773, 0.007071872241795063, 0.016558529809117317, -0.002205813769251108, -0.010183230973780155, 0.03282516449689865, 0.05556660518050194, 0.023285433650016785, -0.017487293109297752, 0.014807146973907948, 0.015231724828481674, -0.009201394394040108, -0.0596000961959362, 0.06087382882833481, 0.03555838391184807, 0.04184744134545326, -0.0050882985815405846, 0.0019852323457598686, -0.045987073332071304, -0.02812827192246914, -0.028048664331436157, -0.018694687634706497, 0.0006356226513162255, -0.005353659391403198, -0.019238676875829697, -0.030357304960489273, 0.01093287579715252, -0.0477384552359581, -0.004713475704193115, 0.0010183231206610799, -0.013540048152208328, 0.0259257759898901, -0.004574161488562822, -0.03892846778035164, -0.02567368373274803, 0.03165757656097412, 0.028367098420858383, 0.04466026648879051, -0.012292850762605667, -0.042404696345329285, 0.0020233781542629004, -0.022675102576613426, 0.0375751256942749, 0.02696068398654461, 0.03508073091506958, -0.050047095865011215, 0.02194535918533802, 0.004318751394748688, 0.037177085876464844, -0.012976155616343021, 0.03523994982242584, -0.04176783189177513, -0.03988376632332802, -0.003330281237140298, 0.019835740327835083, -0.009705580770969391, -0.0067235860042274, 0.004351921379566193, -0.025355249643325806, 0.012704160995781422, -0.02337830886244774, 0.06676484644412994, 0.01490002404898405, -0.0011385647812858224, 0.032082151621580124, 0.0009627630934119225, 0.022064771503210068, -0.020061295479536057, -0.027491405606269836, 0.006046915426850319, 0.027889447286725044, -0.014289692975580692, 0.02945507876574993, 0.03096763603389263, -0.028924355283379555, -0.032851699739694595, 0.01622682809829712, 0.03853042796254158, 0.004846156574785709, -0.0226883701980114, -0.01275723334401846, 0.052727244794368744, -0.02436014637351036, 0.04718119651079178, -0.021640194579958916, -0.05975931137800217, 0.002572343684732914, 0.06060846522450447, 0.010992581956088543, -0.024665310978889465, 0.01767304725944996, 0.028446706011891365, 0.010992581956088543, 0.013520145788788795, -0.007921027950942516, -0.019026387482881546, -0.04678315669298172, -0.016757551580667496, 0.014316229149699211, -0.01939789392054081, -0.003426474751904607, 0.010156694799661636, 0.042059727013111115, 0.020857378840446472, 0.05439901724457741, -0.03815891966223717, 0.017646510154008865, -0.03523994982242584, -0.03858349844813347, -0.026602447032928467, 0.005619020666927099, 0.03651368245482445, 0.030251160264015198, 0.021812679246068, -0.01076702494174242, -0.016213560476899147, 0.002320250729098916, 0.04466026648879051, 0.034231577068567276, -0.004876009654253721, 0.012418897822499275, -0.033196669071912766, -0.007655666675418615, -0.01980920322239399, -0.0009768604068085551, -0.056044258177280426, 0.006740170996636152, 0.009267735294997692, 0.007735275197774172, 0.023272166028618813, 0.016253365203738213, -0.008027171716094017, -0.04742002114653587, 0.03619524836540222, 0.001665969961322844, 0.02195862866938114, -0.0021510832011699677, -0.03654021769762039, 0.01169578917324543, -0.043784573674201965, -0.0617760568857193, -0.014050868339836597, 0.0007840589969418943, 0.016876963898539543, -0.003983732778578997, 0.01190144382417202, 0.010342447087168694, 0.020538946613669395, 0.01988881081342697, 0.06204141676425934, 0.03789355978369713, -0.0014030965976417065, -0.0049257646314799786, 0.010050550103187561, 0.0054929740726947784, 0.0743010938167572, -0.06862237304449081, -0.0039107585325837135, -0.013022594153881073, -0.012637821026146412, 0.02227706089615822, 0.012770500965416431, 0.012140268459916115, 0.050949323922395706, -0.0003659080248326063, 0.027756767347455025, -0.02648303471505642, -0.01844259351491928, -0.006478127092123032, -0.006255886983126402, 0.01537767332047224, 0.04614628851413727, -0.0038809054531157017, 0.005419999826699495, -0.019450966268777847, 0.03433772176504135, -0.061351478099823, 0.02248935028910637, -0.006272471975535154, 0.0006762560806237161, -0.047499630600214005, -0.033249739557504654, -0.01624009758234024, 0.024439753964543343, 0.03983069583773613, -0.03874271363019943, -0.09123113006353378, -0.009347343817353249, -0.025235837325453758, -0.04237816110253334, 0.06766707450151443, 0.0018790879985317588, -0.052116911858320236, -0.002039963146671653, -0.02751794271171093, 0.021361565217375755, 0.033329349011182785, -0.018389521166682243, -0.029693903401494026, -0.024227464571595192, -0.014289692975580692, 0.023988639935851097, 0.016677942126989365, 0.012226510792970657, -0.05214344710111618, 0.022661834955215454, -0.03417850658297539, -0.009997477754950523, 0.04919794201850891, 0.015351137146353722, 0.012199974618852139, -0.024439753964543343, -0.04394379258155823, 0.019358089193701744, -0.02674839459359646, 0.011709056794643402, 0.002945507876574993, -0.04394379258155823, 0.017938407137989998, -0.03802623972296715, -0.02855285070836544, 0.03898153826594353, 0.029083572328090668, 0.03749551996588707, 0.004534357227385044, 0.03433772176504135, 0.03598295897245407, -0.03489498049020767, 0.03746898099780083, -0.023431381210684776, 0.013095568865537643, -0.0002618367434479296, 0.008086878806352615, 0.010256204754114151, -0.020592018961906433, 0.011642716825008392, -0.01496636401861906, 0.005708579905331135, -0.005476389080286026, -0.032984379678964615, -0.04824263975024223, -0.008869693614542484, -0.008690575137734413, -0.02133502997457981, 0.020552214235067368, 0.032931309193372726, -0.017221933230757713, -0.020791038870811462, 0.054717451333999634, -0.015603230334818363, 0.01898658461868763, -0.01183510385453701, -0.023073144257068634, -0.012604650110006332, -0.0010655905352905393, 0.05158619210124016, 0.029136644676327705, 0.05503588542342186, -0.015643034130334854, 0.014953095465898514, 0.014143744483590126, 0.011848371475934982, -0.025063352659344673, -0.01273069716989994, -0.00023322750348597765, 0.03396621719002724, -0.007569424342364073, -0.025142960250377655, 0.05020631477236748, -0.01462139468640089, -0.037177085876464844, 0.003262282581999898, -0.004759914241731167, 0.009499926120042801, 0.04824263975024223, -0.06204141676425934, -0.004199338611215353, 0.0028841430321335793, 0.021414637565612793, 0.014329497702419758, 0.023882495239377022, -0.010136792436242104, -0.00019217946100980043, 0.003074871376156807, -0.008591064251959324, 0.024665310978889465, -0.019225409254431725, 0.021918823942542076, 0.041369788348674774, 0.019517306238412857, -0.03476230055093765, -0.008126682601869106, -0.03287823498249054, 0.004613965284079313, -0.021427905187010765, 0.021852483972907066, 0.01014342624694109, 0.0027630720287561417, 0.020392997190356255, -0.04856107383966446, -0.0033933045342564583, 0.028499778360128403, 0.013188445009291172, -0.02903049997985363, -0.01788533478975296, 0.0021660097409039736, 0.033886607736349106, -0.008484919555485249, -0.022184185683727264, 0.023059876635670662, 0.011569742113351822, 0.023577330633997917, 0.03794663026928902, -0.011370721273124218, 0.011868273839354515, 0.05567274987697601, -0.0036122275050729513, 0.007290794979780912, -0.013354295864701271, 0.017221933230757713, -0.011065556667745113, -0.009028909727931023, -0.021547317504882812, 0.014382570050656796, -0.000374200550140813, 0.01919887214899063, -0.04627896845340729, 0.031073780730366707, 0.013785507529973984, -0.008644136600196362, 0.04829571396112442, 0.04150247201323509, -0.023471185937523842, -0.03961840644478798, 0.024108052253723145, -0.014860219322144985, 0.04678315669298172, -0.014608126133680344, -0.014860219322144985, 0.05524817481637001, -0.005861162673681974, -0.02964083105325699, -0.01663813926279545, -0.0028426803182810545, 0.02421419695019722, -0.014090672135353088, -0.04333346337080002, 0.014077404513955116, 0.030914563685655594, -0.021772874519228935, -0.008232827298343182, 0.008498188108205795, 0.012027489952743053, 0.025766558945178986, -0.008796718902885914, -0.003645397489890456, -0.001029932638630271, -0.011264577507972717, 0.013069032691419125, -0.00812004879117012, -0.0030267746187746525, 0.024161124601960182, 0.017089253291487694, -0.012060659937560558, -0.005449852906167507, 0.008385409601032734, -0.02008783258497715, -0.013228248804807663, 0.019504038617014885, 0.010946143418550491, 0.001811089226976037, 0.02255569025874138, 0.04917140305042267, -0.011881541460752487, 0.021215617656707764, 0.0020416215993463993, 0.004312117118388414, -0.02345791831612587, -0.030702274292707443, -0.03322320431470871, -0.004564210306853056, -0.03348856791853905, 0.034364257007837296, 0.02585943602025509, -0.020552214235067368, -0.003545887302607298, 0.018933512270450592, 0.03404582291841507, -0.00546643789857626, 0.0006650611758232117, 0.029216252267360687, -0.020658358931541443, -0.009745384566485882, -0.0003648714628070593, 0.022237256169319153, -0.0470750518143177, 0.044129543006420135, 0.0470750518143177, 0.0024861013516783714, -0.0001454302982892841, 0.010899705812335014, 0.018522202968597412, -0.025686951354146004, -0.0015755812637507915, -0.04466026648879051, 0.01581551879644394, 0.03149835765361786, -0.007310697343200445, -0.0022041553165763617, 0.015324600972235203, 0.015152116306126118, -0.028632458299398422, 0.012830207124352455, 0.026987219229340553, -0.024041712284088135, -0.022263793274760246, -0.022860854864120483, 0.0293754693120718, -0.008730378933250904, 0.007323965430259705, -0.029534686356782913, -0.01104565430432558, -0.009891333989799023, 0.008212924934923649, 0.03723015636205673, -0.07111676782369614, 0.0425373800098896, 0.02778330259025097, -0.010508297942578793, -0.0004905033274553716, 0.011118628084659576, -0.002071474678814411, 0.0007774250116199255, 0.04718119651079178, 0.00908198207616806, -0.07244356721639633, -0.02551446668803692, 0.03595642372965813, 0.010050550103187561, -0.011742226779460907, 0.007131578400731087, 0.004521089140325785, -0.022608762606978416, -0.014356033876538277, 0.031073780730366707, -0.01048839557915926, -0.005157955456525087, -0.060236960649490356, 0.038689643144607544, 0.06368665397167206, -0.00385105237364769, 0.021998431533575058, 0.01885390281677246, 0.01788533478975296, 0.05352332815527916, 0.024983743205666542, -0.006726902909576893, -0.000681646226439625, 0.010428689420223236, -0.006657245568931103, 0.016598334535956383, -0.01365282665938139, 0.024598971009254456, -0.00922129675745964, -0.0769016370177269, -0.029322396963834763, -0.019517306238412857, -0.010833365842700005, -0.012206608429551125, -0.04099828377366066, 0.0020897183567285538, -0.008451749570667744, 0.009234565310180187, 0.034576546400785446, -0.027969056740403175, -0.041661687195301056, 0.028287488967180252, -0.029083572328090668, 0.017593437805771828, -0.041714757680892944, 0.0017265054630115628, -0.02360386587679386, 0.013957992196083069, 0.007317331153899431, -0.039167292416095734, -0.022237256169319153, 0.029481614008545876, -0.00178455316927284, -0.04789767041802406, 0.0035359361208975315, -0.041237108409404755, -0.00013547926209867, 0.03179025650024414, 0.011715690605342388, -0.003950562793761492, 0.00679324334487319, -0.003894173540174961, -0.0013350978260859847, -0.03014501743018627, 0.011397257447242737, -0.028234416618943214, -0.07159441709518433, 0.004308800213038921, -0.03640753775835037, -0.026098260655999184, -0.0020913768094033003, -0.025912508368492126, -0.013367563486099243, -0.001252172514796257, -0.005071713123470545, -0.005738432984799147, 0.010090354830026627, 0.03667289763689041, -0.045031771063804626, 0.03080841898918152, -0.03741591051220894, 0.010581272654235363, 0.02730565331876278, -0.005433267913758755, 0.04298849031329155, 0.006806511431932449, -0.01440910529345274, -0.00644827401265502, -0.020459337159991264, 0.008730378933250904, -0.021361565217375755, 0.005917551927268505, -0.025262372568249702, 0.05524817481637001, -0.01135081984102726, -0.023431381210684776, 0.019450966268777847, -0.01685042679309845, 0.0028476559091359377, 0.020936988294124603, -0.007416841574013233, -0.011052288115024567, -0.03210868686437607, 0.020737966522574425, 0.05023285001516342, -0.050869714468717575, -0.00942695140838623, -0.00503854313865304, 0.029906190931797028, -0.03234751522541046, 0.012511773966252804, 0.004152900539338589, -0.014263156801462173, 0.005446536000818014, 0.03378046303987503, -0.036911722272634506, -0.0017911872128024697, -0.05102893337607384, -0.050312455743551254, -0.027969056740403175, -0.0596000961959362, -0.013301223516464233, -0.010249570943415165, 0.0011510036420077085, 0.034151967614889145, 0.004451431799679995, 0.016624869778752327, -0.0842256024479866, -0.0016833842964842916, 0.003967147786170244, 0.00643168855458498, 0.029216252267360687, -0.010873169638216496, 0.026920879259705544, 0.055142030119895935, -0.015523621812462807, -0.020936988294124603, 0.000532380654476583, 0.019583646208047867, -0.03603603318333626, -0.014395837672054768, 0.03744244575500488, -0.03205561637878418, 0.029773510992527008, -0.018999852240085602, 0.05174540728330612, -0.024864330887794495, -0.030596129596233368, -0.022754712030291557, -0.04322731867432594, 0.0458013191819191, -0.016903499141335487, -0.007396939676254988, -0.0027448285836726427, 0.030516522005200386, 0.03746898099780083, -0.002074791816994548, 0.00038228576886467636, -0.03569106385111809, -0.008717111311852932, -0.001306073972955346, -0.0326128751039505, 0.03486844524741173, 0.0010058842599391937, 0.02855285070836544, -0.007197918836027384, 0.013878383673727512, -0.007662300486117601, -0.0065179308876395226, 0.028022129088640213, -0.01824357360601425, 0.04452758654952049, 0.013360929675400257, -0.028950892388820648, 0.012584748677909374, -0.008100146427750587, 0.026854539290070534, 0.02414785698056221, 0.04147593304514885, 0.027915984392166138, 0.009579534642398357, 0.010315910913050175, 0.023285433650016785, -0.07095754891633987, 0.010249570943415165, 0.01324151735752821, 0.019039656966924667, 0.016545262187719345, -0.02697395160794258, 0.008451749570667744, -0.0013143664691597223, 0.011848371475934982, 0.014953095465898514, -0.01093287579715252, 0.004312117118388414, -0.01657179743051529, 0.0032141858246177435, -0.007934295572340488, 0.03452347591519356, -0.011709056794643402, -0.006289056967943907, -0.03282516449689865, 0.028605923056602478, 0.004083243198692799, 0.013082300312817097, -0.011403891257941723, -0.005569265224039555, 0.04630550369620323, -0.06055539473891258, 0.008710476569831371, 0.037867024540901184, -0.021069668233394623, -0.022117843851447105, 0.005134736653417349, -0.017036180943250656, 0.008053707890212536, 0.014448910020291805, 0.016319705173373222, -0.014608126133680344, -0.0008798377821221948, 0.0013027569511905313, -0.033063989132642746, 0.0011634423863142729, -0.015191921032965183, 0.010508297942578793, 0.004458066076040268, -0.003496132092550397, 0.05753028020262718, 0.011191602796316147, -0.009294271469116211, 0.03797316923737526, -0.01760670728981495, 0.02367020770907402, -0.03192293643951416, -0.033329349011182785, -0.029322396963834763, -0.004975520074367523, 0.0027265849057585, 0.004464699886739254, -0.00636534858494997, 0.006179595831781626, -0.020605286583304405, 0.004962251987308264, 0.05124122276902199, -9.348535058961716e-06, -0.03884885832667351, -0.007463280111551285, 0.001995183527469635, 0.027597550302743912, 0.0026370256673544645, 0.025142960250377655, -0.013878383673727512, 0.015006167814135551, -0.015709374099969864, -0.039326511323451996, 0.002622098894789815, -0.022476082667708397, 0.05408058315515518, 0.007045336067676544, -0.02876514010131359, 0.02475818805396557, 0.01316854264587164, -0.005844577215611935, 0.025846168398857117, -0.031471822410821915, 0.0060336473397910595, -0.03396621719002724, 0.00936061143875122, -0.016279900446534157, -0.024652043357491493, -0.014183549210429192, -0.0022688370663672686, -0.017381150275468826, 0.009632606990635395, -0.010017380118370056, 0.01870795525610447, 0.02394883520901203, -0.005960673093795776, 0.016598334535956383, -0.018867172300815582, 0.014860219322144985, 0.0018144062487408519, 0.05275378003716469, 0.007124944590032101, -0.05182501673698425, 0.02778330259025097, -0.0023982005659490824, -0.020392997190356255, 0.04219241067767143, 0.013520145788788795, -0.018137428909540176, -0.005323806311935186, -0.00924783293157816, -0.013201712630689144, -0.004633867647498846, -0.015523621812462807, -0.02993272803723812, -0.02628401294350624, 0.04086560383439064, 0.026920879259705544, -0.019557110965251923, 0.04407647252082825, 0.055831968784332275, 0.04834878444671631, -0.052461881190538406, -0.0023683474864810705, 0.02201170101761818, 0.003192625241354108, 0.009824993088841438, 0.032161761075258255, -0.004620599560439587, 0.026522837579250336, -0.019504038617014885, 0.027809839695692062, 0.02911010943353176, -0.010508297942578793, 0.017235200852155685, 0.04877336323261261, -0.012445433996617794, 0.011151799000799656, 0.043784573674201965, 0.011496768333017826, 0.04203319177031517, 0.07642398774623871, 0.004633867647498846, -0.012511773966252804, -0.008504821918904781, 0.01678408682346344, 0.0004967227578163147, -0.004670354537665844, -0.0016510433051735163, -0.014263156801462173, 0.04720773175358772, 0.003472912823781371, -0.016133952885866165, 0.006932557560503483, 0.004451431799679995, -0.04046756029129028, 0.008173121139407158, 0.0015706057893112302, -0.003539253259077668, -0.027013756334781647, 0.013559950515627861, -0.0412636436522007, -0.007682202849537134, -0.02654937468469143, 0.0023484453558921814, -0.007065238431096077, -0.019411161541938782, -0.019689790904521942, 0.003317013382911682, 0.04662393778562546, 0.009201394394040108, 0.009851529262959957, -0.013268053531646729, 0.0553012453019619, 0.0027464870363473892, 0.0037084207870066166, 0.04673008248209953, -0.01967652328312397, 0.005526144057512283, 0.006113255396485329, -0.026323817670345306, -0.0021494245156645775, -0.021719802170991898, 0.020817575976252556, -0.0008715452277101576, -0.0038643204607069492, 0.016346242278814316, 0.00538351247087121, -0.016253365203738213, 0.02613806538283825, 0.014727539382874966, 0.01141715981066227, 0.06373972445726395, -0.00489922845736146, -0.003618861548602581, 0.005555997136980295, 0.016598334535956383, 0.0352134145796299, -0.032984379678964615, 0.03898153826594353, 0.0014611443039029837, 0.008995739743113518, 0.013327759690582752, -0.012883279472589493, 0.017248468473553658, -0.005104883573949337, 0.03253326565027237, -0.0008682282059453428, 0.0015838738763704896, -0.01663813926279545, -0.012631186284124851, -0.02367020770907402, -0.006657245568931103, 0.005134736653417349, 0.03192293643951416, -0.02207804098725319, 0.0006522077601402998, -0.009539729915559292, 0.0037880290765315294, 0.037522055208683014, -0.007410207763314247, -0.026164600625634193, -0.0035093999467790127, -0.013301223516464233, -0.04280273988842964, -0.026801466941833496, 0.016133952885866165, 0.024108052253723145, -0.0001677164837019518, 0.01159627828747034, -0.022449545562267303, -0.03253326565027237, -0.04803035408258438, -0.014701003208756447, -0.0010830048704519868, 0.04837532341480255, 0.019145799800753593, -8.733074355404824e-05, 0.010296009480953217, 0.01014342624694109, 0.016969839110970497, 0.02105640061199665, 0.0036089103668928146, 0.009858163073658943, -0.032984379678964615, 0.02717297337949276, 0.011589644476771355, 0.01492656022310257, 0.007887857966125011, 0.008126682601869106, 0.005084981210529804, 0.013274687342345715, -0.06320900470018387, 0.032931309193372726, -0.007310697343200445, -0.00160875148139894, -0.0180312842130661, 0.01911926455795765, -0.008126682601869106, 0.006030329968780279, 0.015284797176718712, -0.0356379896402359, 0.0013176834909245372, -0.01496636401861906, 0.002336835954338312, 0.008212924934923649, 0.02820788137614727, -0.01719539612531662, -0.008856425061821938, 0.007715372834354639, -0.0038543695118278265, 0.024333609268069267, -0.019305016845464706, 0.0005634776316583157, -0.029906190931797028, 0.014939827844500542, -0.005751701071858406, 0.002917313249781728, -0.005337074398994446, -0.028924355283379555, 0.02160038985311985, -0.04670354723930359, 0.00017238102736882865, 0.004050073213875294, -0.046809691935777664, 0.002358396537601948, -0.03309052437543869, -0.005642239470034838, -0.015603230334818363, 0.008743646554648876, -0.012783769518136978, -0.007867955602705479, 0.020180709660053253, 0.019835740327835083, -0.01877429522573948, 0.07578711956739426, 0.011636083014309406, 0.010070452466607094, 0.019305016845464706, 0.021082935854792595, -0.008438481949269772, 0.02008783258497715, -0.009068714454770088, -0.014608126133680344, -0.02015417255461216, -0.0221443809568882, 0.02847324125468731, 0.001661823596805334, 0.008803353644907475, 0.02325889654457569, -0.0012272949097678065, 0.004517772234976292, 0.027358725666999817, 0.010362349450588226, 0.0021112789399921894, 0.01622682809829712, 0.03226790577173233, -0.01321498118340969, -0.027411798015236855, 0.012710794806480408, 0.012617918662726879, 2.7883643269888125e-05, -0.0492510125041008, 0.030914563685655594, 0.05477052181959152, 0.02690761163830757, -0.02985312044620514, 0.002481125993654132, -0.0034165235701948404, -0.05068396404385567, 0.030304232612252235, -0.008312434889376163, 0.008451749570667744, -0.010879803448915482, 0.014210084453225136, -0.006182912737131119, 0.02964083105325699, -0.0064117866568267345, -0.017832264304161072, -0.006852949503809214, 0.017049448564648628, 0.020538946613669395, -0.023020071908831596, 0.002905703615397215, -0.0014404130633920431, 0.0009959331946447492, 0.0014271449763327837, -0.006554418243467808, -0.019795935600996017, 0.0012339289532974362, -0.018416058272123337, 0.019238676875829697, 0.04267005994915962, -0.0038278333377093077, 0.031047243624925613, -0.023166021332144737, 0.015205188654363155, 0.0014569980558007956, 0.02092372067272663, -0.00021156325237825513, -0.030914563685655594, -0.0034662787802517414, -0.030702274292707443, -0.03895500302314758, 0.029906190931797028, -0.018323181197047234, 0.0018127477960661054, -0.0004440651391632855, 0.0030499936547130346, 0.012219876982271671, 0.03468269109725952, 0.01588185876607895, -0.0280751995742321, 0.006352080497890711, 0.010402153246104717, 0.026376890018582344, -0.020180709660053253, 0.00363876367919147, 0.020459337159991264, -0.026602447032928467, -0.03115338832139969, 0.0035657892003655434, 0.0036619827151298523, -0.01878756284713745, 0.004066658206284046, -0.00010106524860020727, 0.02572675421833992, -0.004338653292506933, 0.046809691935777664, 0.026323817670345306, 0.031206460669636726, -0.005565948318690062, -0.0009312515030615032, -0.01885390281677246, 0.004710158798843622, -0.0050219581462442875, -0.003598959418013692, -0.034496936947107315, -0.011476865969598293, -0.0005933307693339884, 0.0072509911842644215, 0.007118310313671827, -0.038689643144607544, -0.0008371312287636101, -0.0005692823906429112, 0.0014362666988745332, 0.006600856315344572, 0.011981052346527576, -0.0030383842531591654, 0.01403759978711605, -0.011118628084659576, -0.023338505998253822, -0.013812043704092503, -0.01939789392054081, -0.02649630233645439, 0.014223353005945683, -0.00015278992941603065, -0.016757551580667496, -0.018124161288142204, 0.01113853044807911, 0.025235837325453758, 0.017991479486227036, -0.009009008295834064, -0.009227930568158627, -0.021759606897830963, 0.009831627830862999, -0.011589644476771355, 0.004793084226548672, -0.011410525999963284, -0.010640978813171387, 0.007887857966125011, -0.002791266655549407, -0.016465654596686363, -0.013261418789625168, 0.007602594327181578, -0.018004748970270157, 0.008511455729603767, -0.0032606241293251514, -0.008179754950106144, 0.004249094054102898, 0.005333757493644953, 0.0066108074970543385, 0.032161761075258255, -0.0003990781551692635, 0.012093830853700638, 0.013666094280779362, -0.010859901085495949, 0.004106462467461824, 0.017580170184373856, 0.0028841430321335793, -0.04147593304514885, 0.044474512338638306, 0.017580170184373856, -0.015656303614377975, -0.018323181197047234, 0.021427905187010765, -0.009990843944251537, -0.029667366296052933, -0.007085140328854322, -0.01761997491121292, 0.0006397689576260746, 0.02684127166867256, 0.002534198109060526, 0.01877429522573948, -0.004431529901921749, 0.012677624821662903, -0.021786144003272057, 0.01602780818939209, -0.01273069716989994, 0.04500523582100868, -0.026947416365146637, -0.000911349372472614, -0.007290794979780912, 0.0018575274152681231, -0.02202496863901615, -0.015006167814135551, -0.013812043704092503, -0.0014827048871666193, 0.005615703295916319, -0.00026660494040697813, 0.0330374538898468, -0.008584430441260338, -0.01203412376344204, -0.015099044889211655, -0.025952311232686043, 0.004637184552848339, 0.0022223989944905043, 0.009606070816516876, -0.017036180943250656, -0.013049130327999592, 0.04306809976696968, 0.010886437259614468, -0.02166673168540001, 0.010408787988126278, 0.005924185737967491, -0.016425849869847298, -0.004398359451442957, -0.021640194579958916, -0.004079926293343306, 0.0014578272821381688, -0.02179941162467003, -0.009009008295834064, -0.004431529901921749, 0.01492656022310257, -0.0023335188161581755, 0.008445115759968758, -0.011012484319508076, 0.00011246748181292787, 0.002386591164395213, 0.028287488967180252, 0.01275723334401846, 0.02442648634314537, -0.00846501812338829, 0.011165066622197628, -0.017168860882520676, 0.008451749570667744, 0.0005050152540206909, 0.008013904094696045, -0.013971259817481041, 0.004202655982226133, -0.051214683800935745, 0.03322320431470871, -0.0012845133896917105, -0.012724063359200954, -0.01994188316166401, 0.049967486411333084, -0.023882495239377022, -0.0014080721884965897, 0.02256895788013935, -0.017075983807444572, -0.005705262999981642, 0.001477729412727058, 0.00904217828065157, 0.028101736679673195, -0.03815891966223717, -0.03696479648351669, 0.004040122032165527, -0.026655519381165504, -0.004355238284915686, -0.0033584758639335632, -0.028871282935142517, 0.011629448272287846, 0.006395201664417982, -0.02015417255461216, 0.010959411971271038, 0.024851063266396523, -0.004799718037247658, -0.020034760236740112, -0.017354613170027733, 0.0031213094480335712, -0.051082003861665726, -0.007469913922250271, -0.006322227418422699, -0.008226192556321621, 0.015430745668709278, -0.024466289207339287, -0.01255157869309187, 0.0121469022706151, -0.013321124948561192, 0.03123299777507782, 0.010946143418550491, -0.04980827122926712, -0.017221933230757713, -0.02546139433979988, 0.0052276127971708775, 0.0020996693056076765, 0.015603230334818363, 0.014395837672054768, -0.0017049448797479272, -0.013878383673727512, 0.03314359486103058, 0.014183549210429192, -0.003668616758659482, 0.03102070838212967, -0.02876514010131359, 0.008020537905395031, -0.013294588774442673, -0.03197600692510605, -0.04420915246009827, 0.007469913922250271, 0.004912496544420719, 0.0018857220420613885, 0.00727752735838294, 0.0208441112190485, -0.004869375377893448, 0.039857231080532074, 0.005579216405749321, 0.009028909727931023, -0.021825946867465973, 0.03776087984442711, 0.014143744483590126, 0.03654021769762039, -0.017460757866501808, -0.03245365619659424, -0.008916132152080536, -0.014581589959561825, -0.010242937132716179, 0.03664636239409447, 0.0008408628636971116, 0.009499926120042801, 0.011722325347363949, 0.04134325310587883, 0.0591755174100399, -0.04803035408258438, 0.004905862733721733, 0.016425849869847298, 0.0028858014848083258, 0.015284797176718712, -0.024041712284088135, 0.026058455929160118, 0.04837532341480255, 0.041794367134571075, -0.021082935854792595, -0.004773182328790426, 0.0259257759898901, 0.01650545746088028, -0.010388885624706745, 0.017925139516592026, -0.0013044155202805996, 0.023763082921504974, 0.01789860427379608, -0.024997012689709663, -0.0007707909680902958, 0.015921663492918015, 0.012418897822499275, -0.0013566584093496203, 0.021547317504882812, 0.021626926958560944, 0.008962569758296013, 0.01369263045489788, 0.015868591144680977, 0.006056866142898798, 0.008299167267978191, 0.028181344270706177, -0.003059944836422801, -0.01252504251897335, 0.006826413329690695, -0.013639559037983418, 0.00029707999783568084, 0.013301223516464233, 0.04229855164885521, 0.010607808828353882, -0.00031905522337183356, -0.005091615486890078, -0.004604014568030834, -0.01369263045489788, 0.03534609451889992, 0.012491871602833271, -4.6094824028841686e-06, -0.016332972794771194, -0.03776087984442711, 0.009168224409222603, 0.019703058525919914, -0.019437698647379875, -0.012942985631525517, 0.004517772234976292, -0.006567686330527067, 0.002078108722344041, -0.01252504251897335, -0.02202496863901615, 0.04885297268629074, 0.010402153246104717, -0.014767343178391457, 0.0031296019442379475, -0.022476082667708397, -0.0015308016445487738, 0.0020200610160827637, 0.03815891966223717, -0.03253326565027237, -0.018071088939905167, -0.025222569704055786, -0.02876514010131359, 0.01906619220972061, 0.03789355978369713, -0.042829275131225586, 0.01824357360601425, -0.020671626552939415, -0.0012778793461620808, -0.03279862552881241, 0.008013904094696045, 0.008869693614542484, -0.02153404988348484, -0.00531385513022542, -0.013069032691419125]
metadata : {"source": "pydantic_ai_docs", "crawled_at": "2025-03-14T10:14:59.447630", "url_path": "/examples/bank-support/", "chunk_size": 3371}
updated_dt: 2025-03-14T10:14:59.447630
---
Table of contents 
  * [ Running the Example  ](https://ai.pydantic.dev/examples/bank-support/#running-the-example)
  * [ Example Code  ](https://ai.pydantic.dev/examples/bank-support/#example-code)


# Bank support
Small but complete example of using PydanticAI to build a support agent for a bank.
Demonstrates:
  * [dynamic system prompt](https://ai.pydantic.dev/agents/#system-prompts)
  * [structured `result_type`](https://ai.pydantic.dev/results/#structured-result-validation)
  * [tools](https://ai.pydantic.dev/tools/)


## Running the Example
With [dependencies installed and environment variables set](https://ai.pydantic.dev/examples/#usage), run:
[pip](https://ai.pydantic.dev/examples/bank-support/#__tabbed_1_1)[uv](https://ai.pydantic.dev/examples/bank-support/#__tabbed_1_2)
```
python-mpydantic_ai_examples.bank_support

```

```
uvrun-mpydantic_ai_examples.bank_support

```

(or `PYDANTIC_AI_MODEL=gemini-1.5-flash ...`)
## Example Code
bank_support.py```
fromdataclassesimport dataclass
frompydanticimport BaseModel, Field
frompydantic_aiimport Agent, RunContext

classDatabaseConn:
"""This is a fake database for example purposes.
  In reality, you'd be connecting to an external database
  (e.g. PostgreSQL) to get information about customers.
  """
  @classmethod
  async defcustomer_name(cls, *, id: int) -> str | None:
    if id == 123:
      return 'John'
  @classmethod
  async defcustomer_balance(cls, *, id: int, include_pending: bool) -> float:
    if id == 123 and include_pending:
      return 123.45
    else:
      raise ValueError('Customer not found')

@dataclass
classSupportDependencies:
  customer_id: int
  db: DatabaseConn

classSupportResult(BaseModel):
  support_advice: str = Field(description='Advice returned to the customer')
  block_card: bool = Field(description='Whether to block their card or not')
  risk: int = Field(description='Risk level of query', ge=0, le=10)

support_agent = Agent(
  'openai:gpt-4o',
  deps_type=SupportDependencies,
  result_type=SupportResult,
  system_prompt=(
    'You are a support agent in our bank, give the '
    'customer support and judge the risk level of their query. '
    "Reply using the customer's name."
  ),
)

@support_agent.system_prompt
async defadd_customer_name(ctx: RunContext[SupportDependencies]) -> str:
  customer_name = await ctx.deps.db.customer_name(id=ctx.deps.customer_id)
  return f"The customer's name is {customer_name!r}"

@support_agent.tool
async defcustomer_balance(
  ctx: RunContext[SupportDependencies], include_pending: bool
) -> str:
"""Returns the customer's current account balance."""
  balance = await ctx.deps.db.customer_balance(
    id=ctx.deps.customer_id,
    include_pending=include_pending,
  )
  return f'${balance:.2f}'

if __name__ == '__main__':
  deps = SupportDependencies(customer_id=123, db=DatabaseConn())
  result = support_agent.run_sync('What is my balance?', deps=deps)
  print(result.data)
"""
  support_advice='Hello John, your current account balance, including pending transactions, is $123.45.' block_card=False risk=1
  """
  result = support_agent.run_sync('I just lost my card!', deps=deps)
  print(result.data)
"""
  support_advice="I'm sorry to hear that, John. We are temporarily blocking your card to prevent unauthorized transactions." block_card=True risk=8
  """

```

© Pydantic Services Inc. 2024 to present