---
url: https://ai.pydantic.dev/examples/question-graph/
session_id: pydantic_ai_docs
chunk_number: 1
title: Question Graph Example
summary: This document introduces a graph framework for asking and evaluating questions using the Pydantic library. It includes instructions on running the example and provides a snippet of example code demonstrating its usage.
embedding: [0.004014322999864817, 0.01785483956336975, -0.006466347724199295, -0.03351401910185814, 0.013596219941973686, 0.0025048048701137304, -0.0031517413444817066, 0.007172096520662308, 0.004478790331631899, 0.048980168998241425, 0.04374435916543007, -0.031342484056949615, 0.010363046079874039, -0.04507140815258026, 0.0063758669421076775, -0.034792810678482056, -0.007932133972644806, 0.019495556131005287, 0.03889459744095802, 0.02625144086778164, 7.818089943611994e-05, -0.011545325629413128, 0.05380580201745033, 0.01982128620147705, -0.02313890866935253, 0.008523273281753063, 0.008288023993372917, 0.03942541778087616, -0.02598603069782257, 0.007962293922901154, 0.01784277707338333, -0.006792077794671059, -0.037133242934942245, -0.01932665891945362, 0.003806217573583126, 0.023995457217097282, -0.016720816493034363, 0.009005837142467499, 0.0217877309769392, 0.02919507771730423, 0.020255591720342636, -0.03879808634519577, 0.02313890866935253, 0.021642962470650673, -0.03175266087055206, -0.03558903932571411, -0.02808518148958683, 0.061768095940351486, 0.027530234307050705, 0.039956238120794296, -0.050186578184366226, 0.0231509730219841, 0.007274641189724207, -0.01015795674175024, -0.03327273577451706, -0.0389428548514843, -0.03339337557554245, 0.026565106585621834, 0.004222428426146507, -0.02808518148958683, 0.027868028730154037, -0.040342289954423904, -0.01836153119802475, 0.07117807865142822, -0.01317397691309452, 0.0357096791267395, -0.031704407185316086, 0.003869554027915001, -0.044661227613687515, 0.0076486277393996716, 0.025310441851615906, 0.020279720425605774, -0.06490475684404373, -0.03363465890288353, 0.00856549758464098, 0.005154378712177277, 0.025479339063167572, 0.035299502313137054, -0.009880482219159603, -0.04446820542216301, 0.017094803974032402, -0.003990194760262966, 0.01293269544839859, 0.004110835958272219, 0.011846927925944328, -0.043406564742326736, -0.07561766356229782, -0.009747778065502644, -0.04118677228689194, -0.08309739083051682, -0.019773028790950775, -0.012148530222475529, -0.029050307348370552, 0.019760964438319206, 0.09612660109996796, 0.03218697011470795, 0.01822882704436779, -0.012257106602191925, 0.0030748327262699604, -0.05781107768416405, -0.0017507998272776604, -0.054481390863657, -0.030763408169150352, 0.029122691601514816, 0.025793006643652916, 0.024176418781280518, -0.004511966370046139, 0.06340881437063217, -0.01576775498688221, -0.03363465890288353, -0.07885083556175232, -0.013644476421177387, -0.002139866352081299, 0.01871138997375965, -0.009584913030266762, -0.03426199033856392, -0.01960413157939911, -0.07981596142053604, 0.04960750415921211, -0.02564823627471924, -0.0058148871175944805, -0.005784727167338133, -0.010821481235325336, -0.01071893610060215, 0.026154927909374237, 0.013511771336197853, -0.010079540312290192, -0.02389894612133503, -0.02745785005390644, 0.013198104687035084, -0.007280672900378704, -0.019133633002638817, 0.014645794406533241, -0.021015629172325134, -0.02499677613377571, 0.04309289902448654, -0.028905538842082024, -0.0060802968218922615, -0.029894793406128883, 0.03508234769105911, 0.03298319876194, -0.02351289428770542, -0.052792418748140335, 0.04622955992817879, -0.009204894304275513, 0.034165479242801666, -0.040704209357500076, 0.039980366826057434, -0.019893670454621315, 0.021232783794403076, 0.07228797674179077, 0.025768877938389778, -0.042658593505620956, 0.0017342116916552186, 0.0023132876958698034, -0.013982269912958145, 0.009349662810564041, 0.028664257377386093, 0.002629969734698534, -0.034913450479507446, -0.009560784325003624, 0.014621666632592678, -0.03870157152414322, -0.020400362089276314, -0.037012603133916855, 0.03153550997376442, -0.0367230623960495, -0.0022770953364670277, -0.009747778065502644, -0.04519204795360565, -0.031101202592253685, -0.05197206139564514, 0.03286255896091461, 0.009198862127959728, 0.03720562532544136, -0.011068794876337051, -0.06500127166509628, -0.00744957011193037, 0.016950033605098724, -0.031969815492630005, -0.021329296752810478, -0.01261902879923582, -0.04275510460138321, 0.022716665640473366, -0.02400752156972885, -0.038991112262010574, 0.014102911576628685, 0.005848063621670008, -0.025937775149941444, 0.0076486277393996716, -0.03018433228135109, 0.015333447605371475, 0.0273372083902359, -0.007503858767449856, -0.012510452419519424, -0.03155963867902756, 0.11089303344488144, -0.0002361920924158767, 0.008167383261024952, 0.024465957656502724, 0.01649159938097, 0.01587633043527603, 0.002474644687026739, -0.009150605648756027, 0.026540979743003845, -0.012426003813743591, -0.015598856844007969, -0.01750498265028, -0.03370704501867294, -0.03732626885175705, 0.03474455326795578, -0.060802970081567764, 0.058100614696741104, -0.004252588842064142, -0.01859075017273426, -0.0049040489830076694, -0.06162332743406296, 0.019061248749494553, 0.031607892364263535, 0.016950033605098724, -0.03496170789003372, 0.05322672799229622, 0.052792418748140335, 0.04485425353050232, 0.017287828028202057, 0.014320064336061478, 0.008251831866800785, -0.02748197689652443, -0.011304044164717197, 0.05872794985771179, 0.00043656895286403596, 0.003869554027915001, -0.007708948105573654, -0.018795838579535484, 0.006387931294739246, -0.048449352383613586, 0.004891985096037388, -0.021980756893754005, -0.008137223310768604, -0.028760770335793495, -0.025672364979982376, 0.027023542672395706, 0.012993015348911285, -0.009892546571791172, 0.027650874108076096, 0.018916480243206024, -0.018084058538079262, -0.04955924674868584, 0.03387594223022461, 0.026323825120925903, 0.015526472590863705, -0.010139860212802887, -0.012968887574970722, -0.036143988370895386, -0.017649751156568527, -0.046398457139730453, -0.012655220925807953, 0.010091603733599186, -0.01834946870803833, -0.021498192101716995, 0.006339674815535545, 0.025165673345327377, -0.04068008065223694, 0.0003845425962936133, -0.012510452419519424, 0.0042254445143043995, 0.018385659903287888, -0.037036728113889694, -0.04581937938928604, -0.05978958681225777, 0.021124206483364105, -0.003963050898164511, 0.042682718485593796, -0.001903108786791563, -0.013897821307182312, -0.011889152228832245, 0.010519878938794136, 0.018651070073246956, 0.02192043513059616, -0.03452740237116814, -0.026299698278307915, 0.04869063198566437, 0.047122303396463394, 0.055012211203575134, -0.017287828028202057, 0.023621471598744392, -0.03165614977478981, -0.004620543215423822, 0.011394524946808815, -0.008782651275396347, 0.043044641613960266, -0.009409983642399311, 0.054481390863657, -0.007606403436511755, 0.014645794406533241, -0.025961903855204582, 0.022752856835722923, 0.038484420627355576, 0.023850688710808754, -0.01577981933951378, 0.0006936846766620874, -0.011949473060667515, 0.0026872740127146244, 0.013753052800893784, 0.0070031993091106415, 0.05554303154349327, 0.0011453337501734495, 0.01649159938097, 0.008788683451712132, -0.0033688948024064302, -0.0003901976451743394, 0.02255983278155327, 0.01723957248032093, 0.025961903855204582, -0.03817075490951538, -0.012980951927602291, 0.04594002291560173, -0.03768819198012352, 0.02736133709549904, -0.03486519679427147, -0.016105549409985542, -0.03993210941553116, 0.07677581161260605, 0.019797157496213913, -0.05520523712038994, 0.003631288418546319, 0.04113851860165596, 0.002159470459446311, 0.023874817416071892, 0.015816010534763336, -0.01108689047396183, -0.037615805864334106, -0.020665772259235382, 0.0473153255879879, -0.0047562639228999615, -0.0007641841657459736, -0.015442023985087872, 0.07619673758745193, 0.02745785005390644, 0.08015375584363937, -0.058197129517793655, -0.0015924586914479733, -0.026806388050317764, -0.03252476453781128, -0.03638526797294617, 0.043647848069667816, 0.014042590744793415, 0.04294813051819801, -0.009832226671278477, -0.005184539128094912, 0.03708498552441597, 0.004988497588783503, 0.0483287088572979, 0.03957018628716469, 0.06051343306899071, -0.012347587384283543, -0.02637208253145218, 0.013258425518870354, -0.013692731969058514, 0.02745785005390644, -0.04099375009536743, -0.02883315458893776, 0.004162108059972525, 0.01004334818571806, -0.048111557960510254, -0.0018292163731530309, -0.023814497515559196, -0.021594705060124397, 0.033200353384017944, 0.02401958592236042, 0.04188648983836174, 0.0045873671770095825, -0.0050186580047011375, -0.010170020163059235, -0.035564910620450974, -0.033803556114435196, -0.0036524005699902773, -0.0011800179490819573, -0.006900654640048742, 0.025479339063167572, -0.01982128620147705, -0.006605084519833326, -0.00705748749896884, 0.009017900563776493, 0.006786045618355274, 0.02670987695455551, -0.004901032894849777, 0.003785105422139168, 0.025599980726838112, 0.02439357340335846, 0.06620767712593079, -0.035926833748817444, -0.015731561928987503, 0.001434871694073081, 0.03225935250520706, 0.02769913151860237, 0.0007083877571858466, 0.018385659903287888, 0.06697978079319, 0.03846029192209244, -0.002592269564047456, -0.003577000228688121, -0.018409788608551025, 0.01447689812630415, 0.00893345195800066, -0.00023788859834894538, 0.022692536935210228, 0.011653902940452099, -0.01897680014371872, 0.014235615730285645, 0.02748197689652443, -0.028977923095226288, 0.0029557000380009413, -0.024610726162791252, 0.007739108055830002, -0.052454624325037, -0.014694050885736942, -0.019314594566822052, 0.009741745889186859, 0.027530234307050705, -0.028616001829504967, -0.0613337904214859, 0.0010435429867357016, -0.005926480051130056, -0.03537188842892647, 0.03715737164020538, 0.03153550997376442, -0.03175266087055206, 0.040462929755449295, -0.03631288558244705, 0.021401681005954742, 0.02880902588367462, 0.009783970192074776, 0.015936652198433876, 0.07084028422832489, 0.020026374608278275, 0.020653707906603813, -0.01873551867902279, 0.010055411607027054, -0.03537188842892647, 0.027047671377658844, -0.0450955368578434, 0.026951158419251442, 0.020508937537670135, -0.03558903932571411, -0.011002441868185997, -0.031704407185316086, -0.0502348355948925, -0.002375116106122732, -0.036168117076158524, -0.010254468768835068, 0.003193965647369623, -0.0031396772246807814, 0.01886822283267975, -0.021232783794403076, 0.012293298728764057, 0.06186461076140404, 0.03303145617246628, 0.015092166140675545, -0.025672364979982376, 0.028736641630530357, 0.012450131587684155, -0.008764554746448994, 0.05066914111375809, -0.03151138126850128, 0.014645794406533241, 0.021884243935346603, -0.027506105601787567, -0.01638302206993103, 0.002563617192208767, 0.009084253571927547, -0.007238449063152075, -0.0019076329190284014, -0.019025055691599846, -0.030232587829232216, -0.03662655130028725, 0.01749291829764843, 0.04089723527431488, -0.03054625354707241, -0.01485088374465704, -0.014790563844144344, -0.012739669531583786, 0.020279720425605774, 0.03155963867902756, 0.03819487988948822, 0.021835986524820328, -0.013572091236710548, -0.047725506126880646, -0.01219678670167923, 0.018180571496486664, 0.00038906661211512983, 0.019785093143582344, 0.013475579209625721, -0.012299330905079842, 0.03117358684539795, 0.039353031665086746, -0.03805011138319969, -0.004614511039108038, -0.010308757424354553, -0.009705553762614727, -0.0156350489705801, 0.0028184710536152124, -0.03373116999864578, 0.04695340618491173, 0.002729498315602541, -0.05066914111375809, 0.024827878922224045, 0.007473698351532221, 0.0379294715821743, 0.014380385167896748, -0.030232587829232216, -0.03920826315879822, 0.005923463962972164, 0.0006544764037244022, 0.007618467323482037, 0.020376233384013176, 0.012715541757643223, 0.01772213540971279, -0.018566621467471123, -0.0007287459447979927, -0.0012290283339098096, -0.018409788608551025, 0.02613080106675625, -0.009482367895543575, -0.0032241258304566145, -0.007932133972644806, 0.032814301550388336, -0.018554557114839554, -0.00017370392743032426, -0.034503273665905, -0.020919116213917732, 0.00968142505735159, -0.003845426021143794, 0.020870860666036606, -0.06220240518450737, 0.0052358112297952175, -0.013656539842486382, 0.014344193041324615, -0.028760770335793495, -0.013499706983566284, -0.0076486277393996716, 0.024803752079606056, -0.011068794876337051, -0.02301826700568199, 0.0158883947879076, 0.0030703088268637657, 0.02278904989361763, -0.029388101771473885, -0.007141936104744673, 0.010580199770629406, 0.03768819198012352, 0.0007864272920414805, -0.005253907293081284, -0.06196112185716629, 0.01932665891945362, -0.020412426441907883, -0.03324860706925392, -0.015043909661471844, -0.021232783794403076, 0.0030793568585067987, 0.011394524946808815, -0.03286255896091461, 0.006484443787485361, 0.027144182473421097, -0.00966332945972681, 0.04926970973610878, 0.049704015254974365, -0.03872570022940636, -0.02154644951224327, 0.014923268929123878, 0.018059929832816124, 0.008076902478933334, -0.01090592984110117, -0.04620543122291565, 0.023102715611457825, -0.01600903645157814, -0.029388101771473885, -0.00263147777877748, -0.011539293453097343, 0.0025349650532007217, -0.01392195001244545, -0.04333417862653732, 0.00548010878264904, 0.00010131943417945877, -0.02192043513059616, 0.014549282379448414, 0.0016105548711493611, 0.02892966754734516, 0.0018714406760409474, -0.02379036881029606, -0.002041845815256238, -0.0017447677673771977, -0.008824875578284264, 0.009048061445355415, -0.05399882793426514, -0.015671242028474808, 0.013463514856994152, -0.0005624878103844821, -0.05250288173556328, 0.02157057821750641, 0.03030497208237648, -0.0029753041453659534, -0.016334766522049904, 0.02166708931326866, -0.01127388421446085, 0.002880299463868141, 0.002620921703055501, 0.04068008065223694, -0.02192043513059616, -5.49481192138046e-05, -0.03696434572339058, -0.0051000905223190784, -0.02094324491918087, -0.037857089191675186, -0.022246165201067924, -0.001158151775598526, -0.032211098819971085, 0.03978734090924263, 0.03648178279399872, -0.05177903547883034, 0.021823924034833908, 0.036023348569869995, 0.030401485040783882, -0.0036101762671023607, -0.010622424073517323, 0.022861434146761894, 0.0020463697146624327, -0.006912718527019024, -0.002052401890978217, 0.01263109315186739, -0.04511966556310654, 0.04333417862653732, 0.03385181352496147, 0.009229022078216076, -0.015357575379312038, -0.001756831887178123, -0.016069356352090836, -0.0023238437715917826, -0.008426761254668236, -0.0209311805665493, 0.04039054363965988, 0.0011815259931609035, -0.011653902940452099, 0.020870860666036606, 0.03057038225233555, 0.017818648368120193, -0.028278207406401634, 0.00880677904933691, 0.017818648368120193, -0.029967177659273148, -0.026516851037740707, -0.005350420251488686, 0.002151930471882224, -0.020533066242933273, -0.008909324184060097, -0.028495360165834427, -0.05071739852428436, -0.026082543656229973, -0.027192439883947372, 0.013234296813607216, -0.05221334472298622, 0.0032603179570287466, 0.006924782879650593, 0.000519886496476829, -0.04026990383863449, 0.044395819306373596, 0.012848246842622757, 0.014259744435548782, -0.004119883757084608, 0.00015692731540184468, -0.05264765024185181, -0.0015773785999044776, 0.031077073886990547, 0.020677834749221802, -0.00014967001334298402, -0.006303482688963413, 0.018180571496486664, -0.041572824120521545, -0.013487642630934715, 0.052406370639801025, -0.02572062239050865, -0.004695943556725979, -0.0456022284924984, 0.02352495864033699, 0.05665292590856552, -0.010103668086230755, -0.008523273281753063, -0.015007717534899712, 0.005567573476582766, 0.04671212285757065, 0.0005006594001315534, -0.01736021228134632, -0.023126844316720963, 0.009633168578147888, -0.014440705068409443, 0.01651572808623314, 0.012100273743271828, 0.05520523712038994, 0.00023675759439356625, -0.07204669713973999, -0.023331932723522186, -0.026830516755580902, -0.03452740237116814, -0.02572062239050865, -0.0013572091702371836, -0.029870664700865746, -0.019386978819966316, 0.013801309280097485, 0.025913646444678307, -0.018458044156432152, -0.006418091244995594, 0.014549282379448414, -0.01907331310212612, 0.01824089139699936, -0.035299502313137054, -0.006213001906871796, 0.003706688992679119, 0.002087085973471403, 0.011394524946808815, -0.007117807865142822, 0.011358332820236683, 0.019169826060533524, -0.0014929301105439663, -0.013499706983566284, 0.01102053839713335, -0.05544651672244072, -0.018023736774921417, 0.007063519675284624, -0.009651265107095242, -0.012896503321826458, -0.02574474923312664, -0.0025998095516115427, 0.01920601725578308, -0.0060802968218922615, -0.02366972714662552, -0.007154000457376242, -0.047846145927906036, 0.004053531214594841, -0.02475549466907978, -0.013487642630934715, -0.01837359555065632, 0.02214965410530567, -0.014428641647100449, -0.018928544595837593, -0.006387931294739246, -0.0012184722581878304, -0.001966445241123438, 0.03718150034546852, -0.038966983556747437, 0.0011815259931609035, -0.029388101771473885, 0.007721011992543936, -0.011412620544433594, 0.0003879356081597507, 0.04123502969741821, -0.01126181986182928, 0.010761160403490067, -0.0015668225241824985, -0.01336700189858675, 0.009940803050994873, -0.023247484117746353, -0.02769913151860237, -0.05177903547883034, 0.00781752448529005, 0.005851079244166613, -0.014754371717572212, 0.03778470307588577, 0.00557360565289855, 0.0038876503240317106, 0.020352104678750038, -0.04936622083187103, 0.007256545126438141, 0.003881618147715926, 0.03865331783890724, 0.018385659903287888, -0.024176418781280518, 0.05313021317124367, -0.00630951439961791, 0.017022419720888138, -0.016925906762480736, 0.006231097970157862, 0.012775862589478493, -0.0020735140424221754, -0.0036463686265051365, 0.028278207406401634, 0.020255591720342636, -0.008764554746448994, -0.011635806411504745, -0.04543333128094673, -0.014102911576628685, -0.0567011833190918, -0.03428611904382706, -0.0011656918795779347, 0.015514408238232136, 0.018675198778510094, -0.027626747265458107, 0.001654287101700902, -0.07749965786933899, 0.01932665891945362, 0.027650874108076096, -0.03163202106952667, 0.020147016271948814, -0.01798754557967186, 0.016202060505747795, -0.021462000906467438, 0.013572091236710548, -0.026154927909374237, -0.02290968969464302, -0.009440143592655659, -0.013873693533241749, -0.020014310255646706, 0.041090261191129684, -0.02034004032611847, -0.0006186611717566848, -0.004110835958272219, 0.0267340037971735, -0.029967177659273148, -0.007310833316296339, -0.010815449059009552, -0.024610726162791252, 0.02228235825896263, 0.013330809772014618, 0.01898886449635029, -0.007847685366868973, 0.02760261856019497, 0.008734394796192646, 0.028181694447994232, -0.007853716611862183, -0.04671212285757065, 0.019785093143582344, 0.003383974777534604, -0.020243529230356216, 0.018518364056944847, 0.003383974777534604, 0.04289987310767174, 0.011436749249696732, -0.0034050869289785624, -0.007141936104744673, -0.04106613248586655, -0.014995653182268143, -0.015176614746451378, 0.05322672799229622, -0.00575758283957839, -0.013306681998074055, 0.012450131587684155, -0.016286509111523628, -0.01985747739672661, -0.028061052784323692, 0.04178997874259949, -0.0157918818295002, -0.005181523039937019, 0.054481390863657, 0.051682524383068085, -0.04842522367835045, -0.001961921341717243, -0.019495556131005287, 0.013161912560462952, 0.003996226936578751, 0.007865780964493752, -0.005199619103223085, -0.030136074870824814, 0.0021383585408329964, -0.017215443775057793, 0.00025900074979290366, -0.004717055708169937, -0.024550406262278557, -0.008348343893885612, 0.005024689715355635, -0.010483686812222004, -0.002566633280366659, -0.024598661810159683, -0.009609040804207325, 0.02058132365345955, 0.025189802050590515, -0.007865780964493752, 0.018144378438591957, -0.0009304423001594841, -0.011774543672800064, -0.03908762335777283, 0.009946835227310658, 0.05617036297917366, -0.004285764880478382, -0.010127795860171318, 0.015478216111660004, -0.008468985557556152, -0.0005824689287692308, 0.025768877938389778, -0.004038451239466667, -0.012763798236846924, 0.0075822751969099045, -0.011382460594177246, -0.05129647254943848, -0.006653340999037027, -0.0069549428299069405, 0.004861824680119753, 0.0014982081484049559, -0.015502344816923141, 0.003742881352081895, 0.027192439883947372, 0.0027159263845533133, -0.005878223571926355, -0.02748197689652443, 0.044178664684295654, -0.024948520585894585, -0.002851647324860096, -0.043430693447589874, 0.012884438969194889, 0.03370704501867294, -0.010881801135838032, -0.0157918818295002, -0.02120865508913994, -0.0603204071521759, 0.036023348569869995, 0.051923807710409164, -0.018819967284798622, -0.020026374608278275, -0.03525124490261078, 0.011997728608548641, 0.015104229561984539, -0.004219412337988615, 0.03563729673624039, -0.022982075810432434, -0.03303145617246628, -0.007781332358717918, -0.041717592626810074, -0.015538536943495274, 0.015502344816923141, 0.026323825120925903, 0.018819967284798622, -0.05197206139564514, 0.026058414950966835, -0.007515922654420137, -0.010375110432505608, 0.019193952903151512, 0.006653340999037027, 0.0006194151937961578, -0.019483491778373718, -0.00274005439132452, -0.016588112339377403, 0.035516656935214996, -0.022270293906331062, -0.02880902588367462, -0.025093289092183113, 0.030642766505479813, -0.004008290823549032, -0.00881884340196848, 0.00409877160564065, -0.008191511034965515, 0.0030868968460708857, 0.035178862512111664, 0.008402632549405098, 0.015816010534763336, 0.05530174821615219, 0.006647308822721243, -0.058679692447185516, 0.0013225249713286757, -0.013137784786522388, -0.005633926019072533, 0.0267340037971735, 0.0022635231725871563, 0.0042254445143043995, 0.01138849277049303, -0.03423786163330078, -0.007588307373225689, -0.027120055630803108, -0.03583032265305519, 0.015840139240026474, -0.03790534287691116, 0.05776282027363777, 0.0020931181497871876, -0.004104803781956434, 0.05115170404314995, 0.0461089201271534, 0.07281879335641861, -0.009072189219295979, -0.03426199033856392, 0.02242712676525116, -0.02313890866935253, 0.01164183858782053, 0.002382656093686819, -0.0015939667355269194, 0.05703897774219513, -0.026637490838766098, 0.0035166796296834946, 0.017215443775057793, 0.003206029534339905, 0.014211487956345081, 0.0267340037971735, -0.017951352521777153, 0.01635889522731304, 0.047604866325855255, 0.029605256393551826, 0.04572286829352379, 0.04485425353050232, 0.005148346535861492, 0.009802065789699554, -0.008046742528676987, -0.02301826700568199, 0.04519204795360565, -0.0028456151485443115, -0.022209974005818367, 0.006418091244995594, 0.049076683819293976, -0.01711893081665039, -0.03090817667543888, -0.007202256470918655, 0.016950033605098724, -0.009777938015758991, 0.008426761254668236, 0.016539854928851128, -0.002056925790384412, -0.02859187312424183, -0.003432231256738305, -0.029412230476737022, 0.010278597474098206, -0.006773981731384993, 0.003263334045186639, -0.020533066242933273, -0.03242824971675873, -0.010507814586162567, 0.015345511958003044, -0.0070031993091106415, 0.013101592659950256, 0.015864267945289612, 0.024598661810159683, 0.010363046079874039, -0.005633926019072533, 0.009222989901900291, 0.013101592659950256, -0.007775300648063421, -0.020882925018668175, 0.029412230476737022, 0.00742544187232852, 0.0033236544113606215, 0.012426003813743591, 0.018795838579535484, 0.014826755970716476, -0.01441657729446888, -0.006936846766620874, -0.017070675268769264, -0.007256545126438141, 0.010706872679293156, -0.007461634464561939, 0.011587549932301044, 0.012570773251354694, -0.024948520585894585, -0.0267340037971735, -0.01282411813735962, 0.03459978476166725, 0.004849760793149471, -0.015972843393683434, 0.021377552300691605, -0.03496170789003372, 0.03730214014649391, -0.0011151735670864582, 0.004424501676112413, 0.021256910637021065, 0.002783786738291383, 0.010682743974030018, -0.006053152959793806, -0.050813909620046616, 0.004234492778778076, -0.023500829935073853, -0.01736021228134632, 0.0032965103164315224, 0.03293494135141373, 0.04128328710794449, -0.04031816124916077, 0.0230544600635767, 0.010930057615041733, 0.03192155808210373, -0.01447689812630415, -0.004144011996686459, -0.04031816124916077, -0.011002441868185997, 0.0076305316761136055, -0.030136074870824814, -0.011635806411504745, 0.026685748249292374, -0.0006514603737741709, 0.0027415624354034662, 0.00684033427387476, 0.0019332690862938762, 0.0034835035912692547, -0.036916088312864304, -0.021510256454348564, 0.009229022078216076, 0.04386499896645546, 0.0007615451468154788, -0.00489500118419528, -0.008535337634384632, 0.029122691601514816, 0.02450214885175228, 0.015381704084575176, -0.010761160403490067, 0.010676711797714233, -0.047846145927906036, 0.025093289092183113, 0.01311365608125925, -0.009337599389255047, -0.0072987694293260574, 0.02031591348350048, 0.007666723802685738, 0.0009952867403626442, -0.056218620389699936, 0.029339846223592758, 0.008125158958137035, -0.008022613823413849, -0.01685352250933647, -3.8430694985436276e-05, -0.012190754525363445, 0.02970176748931408, 0.025406954810023308, -0.02970176748931408, 0.017927225679159164, -0.051055192947387695, 0.02982240915298462, -0.06442219763994217, 0.006508572027087212, -0.017408469691872597, 0.0008934960351325572, 0.00011347776307957247, -0.004602447152137756, 0.01936285011470318, -0.002206218894571066, 0.04451645910739899, -0.01489914022386074, -0.0023479717783629894, 0.028061052784323692, 0.009844290092587471, 0.025165673345327377, -0.03102881647646427, 0.0010133828036487103, -0.05443313345313072, -0.0013647491578012705, 0.004698959644883871, -0.021232783794403076, -0.02217378094792366, -0.0034774714149534702, -0.016479535028338432, -0.0048527768813073635, 0.02377830445766449, -0.024598661810159683, 0.010151924565434456, 0.0012803006684407592, 0.005184539128094912, 0.012739669531583786, 0.06813792884349823, 0.029605256393551826, -0.00781752448529005, 0.028760770335793495, 0.025696493685245514, -0.0015155501896515489, 0.002363051986321807, -0.0016618272056803107, -0.011852960102260113, -0.0362163707613945, -0.029122691601514816, 0.0017688958905637264, 0.0023132876958698034, 0.005881239660084248, -0.008113094605505466, -0.011491037905216217, -0.0012426003813743591, 0.026203185319900513, 0.022571897134184837, -0.010115732438862324, 0.0411626473069191, 0.03607160225510597, 0.009054092690348625, 0.0014944380382075906, 0.010700840502977371, -0.009506495669484138, 0.015707433223724365, -0.0035015996545553207, 0.017529109492897987, 0.0377364456653595, 0.013873693533241749, -0.04869063198566437, -0.0014695558929815888, 0.002262015361338854, -0.031728535890579224, 0.016093485057353973, -0.01787896826863289, 0.01603316329419613, -0.009530624374747276, 0.04779789224267006, 0.01701035536825657, 0.019543811678886414, -0.014814691618084908, -0.008655978366732597, 0.005507253110408783, 0.020786412060260773, 0.030353229492902756, 0.015164550393819809, 0.000680112570989877, 0.0076305316761136055, -0.01372892502695322, -0.0008512717322446406, 0.021486129611730576, -0.024200547486543655, 0.007141936104744673, -0.03155963867902756, 0.03006369061768055, 0.037881214171648026, 0.01837359555065632, 0.0346962995827198, -0.013560027815401554, 0.0006695564952678978, 0.01885615848004818, 0.031728535890579224, -0.01336700189858675, -0.052792418748140335, -0.012510452419519424, -0.009138541296124458, -0.0031969815026968718, 0.03790534287691116, -0.011237692087888718, -0.00035871792351827025, 0.017589431256055832, -0.0009508004295639694, -0.007190192583948374, 0.03334512189030647, 0.009277278557419777, -0.007166064344346523, 0.026637490838766098, -0.001480865990743041, 0.010501782409846783, -0.03324860706925392, -0.02588951773941517, 0.001425069640390575, -0.011177371256053448, -0.008861067704856396, 0.030884047970175743, 0.005736470688134432, -0.006134585477411747, 0.040101006627082825, 0.01287237461656332, 0.02994305081665516, 0.014030526392161846, 0.030280843377113342, -0.018506301566958427, -0.0006623934605158865, 0.00641205906867981, 0.0036433525383472443, -0.029291588813066483, 0.00285013928078115, 0.025045033544301987, -0.002079545985907316, -0.008348343893885612, -0.00301752844825387, 0.022197909653186798, 0.0037368491757661104, 0.012281235307455063, -0.023259548470377922, -0.004677847493439913, 0.025093289092183113, 0.010495751164853573, 0.01612967625260353, -0.0005575867835432291, -0.010013187304139137, -0.021618833765387535, -0.004843728616833687, -0.03660242259502411, -0.004680863581597805, -0.03906349465250969, -0.030522126704454422, 0.011285948567092419, 0.011949473060667515, -0.025093289092183113, 0.008655978366732597, 0.012353619560599327, 0.0157918818295002, 0.02439357340335846, -0.021136270835995674, 0.005848063621670008, -0.017155123874545097, 0.01372892502695322, 0.010930057615041733, 0.0014838819624856114, -0.007431474048644304, -0.00027634287835098803, -0.007172096520662308, -0.03532363101840019, -0.010453526861965656, -0.02658923529088497, -0.003586048260331154, -0.02847123146057129, 0.04536094516515732, 0.005522333085536957, -0.016202060505747795, 0.027988668531179428, 0.001553250476717949, 0.022571897134184837, 0.03981146961450577, 0.013837501406669617, 0.02736133709549904, -0.016407150775194168, 0.005835999269038439, 0.005163426976650953, 0.031704407185316086, 0.02625144086778164, -0.0396425724029541, 0.019652388989925385, 0.01947142742574215, -0.01685352250933647, -0.02214965410530567, 0.007389249745756388, 0.0030099882278591394, -0.020388297736644745, -0.008137223310768604, 0.0018789806636050344, 0.0029662561137229204, 0.006767949555069208, 0.012208850122988224, -0.000910084112547338, 0.0029828441329300404, 0.005474077071994543, 0.0030190362595021725, 0.02428499609231949, -0.014645794406533241, 0.03906349465250969, -0.02808518148958683, 0.004943257197737694, -0.009693489409983158, -0.027120055630803108, -0.003782089566811919, -0.009355694986879826, -0.0076486277393996716, -0.011310076341032982, 0.004083691630512476, 0.010863705538213253, -0.0007132887840270996, 0.019193952903151512, -0.03206632658839226, 0.0015396784292533994, -0.038966983556747437, -0.008649946190416813, -0.033441632986068726, 0.00042073483928106725, -0.004735151771456003, 0.0038484418764710426, 0.057714566588401794, -0.003275398164987564, -0.013511771336197853, 0.015924587845802307, 0.02523805759847164, -0.04212777316570282, -0.023814497515559196, -0.03151138126850128, -0.009958899579942226, -0.003456359263509512, 0.026637490838766098, -0.008589626289904118, 0.020762283354997635, -0.009325535036623478, 0.002628461690619588, 0.005317243747413158, -0.019411107525229454, -0.007353057619184256, 0.0017538157990202308, 0.0010737032862380147, 0.014706115238368511, 0.0023223357275128365, -0.018156442791223526, 0.024671046063303947, 0.011478973552584648, -0.02158264070749283, -0.01121356338262558, 0.013909885659813881, -0.03595096245408058, -0.011949473060667515, -0.03204220160841942, 0.03841203451156616, 0.00837247259914875, -0.020110823214054108, -0.03696434572339058, 0.05250288173556328, -0.014295936562120914, 0.008022613823413849, 0.007763236295431852, 0.005145330913364887, -0.007618467323482037, -0.0064904759638011456, -0.04055944085121155, 0.045264434069395065, -0.012281235307455063, -0.017891032621264458, 0.031969815492630005, -0.039835598319768906, 0.0019000928150489926, 0.0017146075842902064, -0.00906012486666441, 0.019652388989925385, -0.002390196081250906, -6.545706855831668e-05, -0.005920447874814272, 0.024453893303871155, 0.014139103703200817, -0.03537188842892647, -0.04803917184472084, -0.011780575849115849, -0.01392195001244545, 0.021281039342284203, 0.002804898889735341, 0.01372892502695322, 0.029098564758896828, -0.017299892380833626, 0.013934014365077019, -0.023621471598744392, -0.006780013907700777, 0.04123502969741821, -0.011129114776849747, -0.024574533104896545, -0.0015472184168174863, -0.047990914434194565, 0.007733076345175505, 0.004038451239466667, -0.0016723832814022899, -0.028374718502163887, 0.000947030377574265, 0.005848063621670008, -0.001960413297638297, 0.02293381839990616, -0.002880299463868141, 0.0007095187902450562, -0.015731561928987503, 0.018518364056944847, -0.022849369794130325, -0.007202256470918655, -0.014766436070203781, 0.004647687543183565, 0.008824875578284264, -0.003990194760262966, 0.000698208692483604, -0.019169826060533524, -0.01471817959100008, 0.04251382127404213, 0.023681791499257088, 0.0384361632168293, -0.006979071069508791, -0.001682939357124269, -0.010061443783342838, 0.028881410136818886, -0.037253882735967636, -0.008535337634384632, -0.008571529760956764, -0.03870157152414322, -0.00671366136521101, 0.0406559556722641, -0.002537981141358614, 0.019507620483636856, 0.016720816493034363, -0.0011083874851465225, 0.003035624511539936, 0.005443916656076908, -0.0001546652929391712, 0.016563983634114265, -0.025479339063167572, 0.013270489871501923, -0.031342484056949615, 0.029363974928855896, 0.03402071073651314, 0.004394341725856066, -0.010471622459590435, -0.032235223799943924, 0.013258425518870354, 0.024357380345463753, 0.010218276642262936, 0.007992453873157501, -0.021775666624307632, 0.04294813051819801, 0.01996605470776558, -0.024948520585894585, 0.009446175768971443, 0.0008015073835849762, -0.013354938477277756, -0.004035435151308775, 0.019193952903151512, 0.021534385159611702, -0.0054137567058205605, 0.0031517413444817066, -0.013499706983566284, 0.014513090252876282, 0.001525352243334055, 0.012570773251354694, 0.03472042456269264, -0.027506105601787567, -0.011249755509197712, -0.01956794038414955, -0.008475016802549362, -0.01625031791627407, 0.009796034544706345, -0.010664648376405239, -0.006351738702505827, 0.014742307364940643, 0.02427293173968792, -0.016708752140402794, 0.01773419976234436, -0.0012863327283412218, 0.006065216846764088, 0.010326853953301907, 0.0017342116916552186, 0.006243162322789431, 0.008149286732077599, -0.024852007627487183, 0.019037120044231415, -0.025551725178956985, -0.009989059530198574, -0.0019498571055009961, -0.030884047970175743, -0.02218584530055523, 0.01958000473678112, -0.01317397691309452, -0.0009598484612070024, -0.012655220925807953, -0.014585474506020546, 0.0020177175756543875, 0.01065258402377367, 0.04347895085811615, -0.005434868857264519, -0.016238253563642502, -0.04753248021006584, -0.011008474044501781, -0.012667285278439522, 0.002623937791213393, -0.0352029912173748, -0.008637881837785244, -0.03718150034546852, 0.001425823662430048, -0.04191061854362488, 0.008221671916544437, -0.02389894612133503, -0.01685352250933647, 0.002290667500346899, -0.031849175691604614]
metadata : {"source": "pydantic_ai_docs", "crawled_at": "2025-03-15T11:18:04.028350", "url_path": "/examples/question-graph/", "chunk_size": 4138}
updated_dt: 2025-03-15T11:18:04.028350
---
Table of contents 
  * [ Running the Example  ](https://ai.pydantic.dev/examples/question-graph/#running-the-example)
  * [ Example Code  ](https://ai.pydantic.dev/examples/question-graph/#example-code)


# Question Graph
Example of a graph for asking and evaluating questions.
Demonstrates:
  * [`pydantic_graph`](https://ai.pydantic.dev/graph/)


## Running the Example
With [dependencies installed and environment variables set](https://ai.pydantic.dev/examples/#usage), run:
[pip](https://ai.pydantic.dev/examples/question-graph/#__tabbed_1_1)[uv](https://ai.pydantic.dev/examples/question-graph/#__tabbed_1_2)
```
python-mpydantic_ai_examples.question_graph

```

```
uvrun-mpydantic_ai_examples.question_graph

```

## Example Code
question_graph.py```
from__future__import annotations as _annotations
fromdataclassesimport dataclass, field
frompathlibimport Path
fromtypingimport Annotated
importlogfire
fromdevtoolsimport debug
frompydantic_graphimport BaseNode, Edge, End, Graph, GraphRunContext, HistoryStep
frompydantic_aiimport Agent
frompydantic_ai.format_as_xmlimport format_as_xml
frompydantic_ai.messagesimport ModelMessage
# 'if-token-present' means nothing will be sent (and the example will work) if you don't have logfire configured
logfire.configure(send_to_logfire='if-token-present')
ask_agent = Agent('openai:gpt-4o', result_type=str, instrument=True)

@dataclass
classQuestionState:
  question: str | None = None
  ask_agent_messages: list[ModelMessage] = field(default_factory=list)
  evaluate_agent_messages: list[ModelMessage] = field(default_factory=list)

@dataclass
classAsk(BaseNode[QuestionState]):
  async defrun(self, ctx: GraphRunContext[QuestionState]) -> Answer:
    result = await ask_agent.run(
      'Ask a simple question with a single correct answer.',
      message_history=ctx.state.ask_agent_messages,
    )
    ctx.state.ask_agent_messages += result.all_messages()
    ctx.state.question = result.data
    return Answer()

@dataclass
classAnswer(BaseNode[QuestionState]):
  answer: str | None = None
  async defrun(self, ctx: GraphRunContext[QuestionState]) -> Evaluate:
    assert self.answer is not None
    return Evaluate(self.answer)

@dataclass
classEvaluationResult:
  correct: bool
  comment: str

evaluate_agent = Agent(
  'openai:gpt-4o',
  result_type=EvaluationResult,
  system_prompt='Given a question and answer, evaluate if the answer is correct.',
)

@dataclass
classEvaluate(BaseNode[QuestionState]):
  answer: str
  async defrun(
    self,
    ctx: GraphRunContext[QuestionState],
  ) -> Congratulate | Reprimand:
    assert ctx.state.question is not None
    result = await evaluate_agent.run(
      format_as_xml({'question': ctx.state.question, 'answer': self.answer}),
      message_history=ctx.state.evaluate_agent_messages,
    )
    ctx.state.evaluate_agent_messages += result.all_messages()
    if result.data.correct:
      return Congratulate(result.data.comment)
    else:
      return Reprimand(result.data.comment)

@dataclass
classCongratulate(BaseNode[QuestionState, None, None]):
  comment: str
  async defrun(
    self, ctx: GraphRunContext[QuestionState]
  ) -> Annotated[End, Edge(label='success')]:
    print(f'Correct answer! {self.comment}')
    return End(None)

@dataclass
classReprimand(BaseNode[QuestionState]):
  comment: str
  async defrun(self, ctx: GraphRunContext[QuestionState]) -> Ask:
    print(f'Comment: {self.comment}')
    # > Comment: Vichy is no longer the capital of France.
    ctx.state.question = None
    return Ask()

question_graph = Graph(
  nodes=(Ask, Answer, Evaluate, Congratulate, Reprimand), state_type=QuestionState
)

async defrun_as_continuous():
  state = QuestionState()
  node = Ask()
  history: list[HistoryStep[QuestionState, None]] = []
  with logfire.span('run questions graph'):
    while True:
      node = await question_graph.next(node, history, state=state)
      if isinstance(node, End):
        debug([e.data_snapshot() for e in history])
        break
      elif isinstance(node, Answer):
        assert state.question
        node.answer = input(f'{state.question} ')
      # otherwise just continue