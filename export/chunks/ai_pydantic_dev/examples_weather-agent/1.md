---
url: https://ai.pydantic.dev/examples/weather-agent/
session_id: pydantic_ai_docs
chunk_number: 1
title: Weather Agent Example with PydanticAI
summary: This documentation presents an example of a weather agent utilizing PydanticAI, showcasing its ability to call multiple tools in sequence to provide weather information for various locations. Key features include tool integration, agent dependencies, streaming text responses, and the implementation of a Gradio UI.
embedding: [-0.030839379876852036, 0.030105110257864, 0.06275568902492523, -0.03402122110128403, 0.0073855421505868435, -0.02421870455145836, 0.040189098566770554, -0.011570886708796024, 0.003533679060637951, 0.00828502420336008, 0.007911769673228264, -0.01724313013255596, -0.03747229650616646, -0.06672075390815735, -0.01984979212284088, -0.024916261434555054, 0.011760572902858257, 0.03345828130841255, -0.019800839945673943, 0.05022413283586502, -0.005243918392807245, -0.0323323979973793, 0.013841007836163044, 0.024145277217030525, -0.024194227531552315, -0.01626410149037838, -0.0010279793059453368, 0.08502858132123947, 0.016410956159234047, -0.01769592985510826, 0.05350387841463089, -0.015101506374776363, -0.03154917433857918, 0.010316506959497929, 0.029835877940058708, -0.012023687362670898, 0.030129585415124893, 0.02363128773868084, 0.004427041858434677, 0.01630081608891487, 0.007599704433232546, -0.07474878430366516, 0.02327639050781727, 0.0038426846731454134, -0.0494164377450943, 0.003799852216616273, -0.024561364203691483, 0.052182190120220184, 0.030717002227902412, 0.00025068470858968794, -0.01577458716928959, -0.005194967146962881, -0.04136393219232559, -0.01417142990976572, -0.02677641436457634, -0.011974736116826534, -0.04165763780474663, 0.04417863488197327, 0.02731488086283207, -0.05365073308348656, -0.014685419388115406, -0.01078154519200325, -0.005767086520791054, 0.039381399750709534, 0.005617172922939062, 0.003139008302241564, 0.011344486847519875, 0.00042717743781395257, -0.0557066909968853, -0.014367234893143177, 0.028954751789569855, 0.0026846781838685274, -0.007562990766018629, -0.057615794241428375, -0.0188707634806633, -0.018442438915371895, -0.0381820909678936, 0.021049100905656815, -0.005507032386958599, -0.05394443869590759, -0.0029141379054635763, 0.0050970641896128654, -0.016337528824806213, 0.014685419388115406, -0.027608588337898254, -0.03296876698732376, -0.04141288250684738, -0.001398939173668623, -0.027682015672326088, -0.019751889631152153, -0.006229065358638763, 0.005494794342666864, -0.009674020111560822, 0.011399556882679462, 0.10348325222730637, 0.03176945820450783, 0.017010610550642014, -0.030251963064074516, 0.025675008073449135, 0.0018372071208432317, 0.029811400920152664, -0.024463461712002754, -0.038965314626693726, 0.0022594130132347345, 0.040189098566770554, 0.0028468298260122538, -0.008095337077975273, 0.002556180814281106, -0.03695830702781677, -0.005078707356005907, -0.12384703755378723, 0.019653987139463425, 0.005678362213075161, 0.021465187892317772, -0.04765418544411659, 0.035832423716783524, -0.016105009242892265, -0.030961759388446808, 0.005607994738966227, -0.020180214196443558, -0.011197632178664207, 0.0005824451218359172, 0.04430101439356804, 0.027510685846209526, 0.02179560996592045, 0.0059751300141215324, -0.019984407350420952, -0.04195134714245796, -0.027706490829586983, 0.0063453251495957375, 0.008248310536146164, 0.017891736701130867, 0.003157365135848522, 0.007771034259349108, -0.021061338484287262, 0.0031022948678582907, -0.019433705136179924, -0.026213472709059715, -0.010659166611731052, 0.03803523629903793, 0.030986234545707703, 0.007012287620455027, 0.028587616980075836, 0.036493267863988876, -0.03365408629179001, -0.013510585762560368, -0.023961709812283516, 0.007544634398072958, -0.011595362797379494, 0.024365559220314026, 0.027657540515065193, 0.009135554544627666, -0.039968814700841904, -0.0008604737813584507, -0.02614004723727703, 0.016863755881786346, 0.030251963064074516, 0.03612613305449486, 0.03695830702781677, -0.03343380615115166, -0.02497745119035244, 0.019886504858732224, -0.02439003437757492, 0.0030915867537260056, -0.019641747698187828, -0.011650432832539082, 0.023068346083164215, 0.009013175964355469, -0.03676249831914902, -0.05081155151128769, -0.0480702742934227, -0.048902448266744614, 0.02893027663230896, 0.023655762895941734, 0.029493216425180435, -0.02861209213733673, -0.022578831762075424, -0.012543795630335808, 0.02861209213733673, -0.06853196024894714, -0.039601679891347885, -0.007030644454061985, -0.0073855421505868435, -0.010163534432649612, -0.023080583661794662, -0.023827092722058296, 0.05693047493696213, 0.014538565650582314, -0.01712075062096119, 0.031059661880135536, 0.008584851399064064, 0.007679250556975603, 0.024585839360952377, 0.032185543328523636, -0.04900034889578819, -0.021465187892317772, 0.06167875975370407, -0.033262476325035095, 0.01765921711921692, 0.014122478663921356, 0.03923454508185387, 0.02341100573539734, 0.06975574046373367, 0.011430151760578156, 0.005583518650382757, -0.03803523629903793, -0.016790330410003662, 0.017634741961956024, -0.007673131767660379, -0.016337528824806213, 0.01882181316614151, -0.03355618193745613, 0.02623794972896576, -0.03284638747572899, -0.04300380125641823, 0.007679250556975603, -0.040849942713975906, 0.028000200167298317, -0.022199459373950958, 0.06608438491821289, -0.021489663049578667, 0.05179058015346527, -0.007960720919072628, -0.03032539039850235, -0.02618899755179882, -0.020449446514248848, 0.03318904712796211, -0.06980469077825546, 0.018295584246516228, 0.022664496675133705, 0.03431493043899536, 0.009600592777132988, 0.010665285401046276, -0.01446513831615448, 0.056000400334596634, -0.05010175704956055, 0.03629746288061142, -0.021330570802092552, -0.010267555713653564, 0.011001826263964176, -0.008890797384083271, 0.002654083538800478, -0.012005330063402653, -0.03409465029835701, 0.014746608212590218, 0.00017152111104223877, -0.010004442185163498, -0.06848300248384476, 0.06892357021570206, 0.005222502164542675, 0.035514239221811295, -0.0435912199318409, 0.011809525080025196, -0.05629410594701767, -0.01917671039700508, 0.012764076702296734, 0.009514927864074707, -0.0002497286186553538, -0.03468206524848938, -0.018136493861675262, 0.004243474453687668, -0.005406070034950972, -0.05604935064911842, 0.008437997661530972, 0.002805527066811919, -0.021734420210123062, -0.016655713319778442, -0.007354947738349438, -0.024157514795660973, -0.01013293955475092, 0.01532178744673729, 0.05624515563249588, 0.056000400334596634, -0.0018433260265737772, -0.02494073659181595, 0.011717740446329117, 0.007153023034334183, 0.00595065439119935, 0.0006008018972352147, 0.005308167077600956, -0.032063163816928864, 0.014930176548659801, 0.01989874243736267, 0.04028699919581413, -0.0242554172873497, 0.008028029464185238, -0.03827999159693718, 0.008431877940893173, -0.01972741261124611, -0.01658228598535061, 0.011980854906141758, 0.02353338524699211, 0.04474157840013504, -0.008444116450846195, -0.02516101859509945, 0.032993242144584656, 0.04425206407904625, 0.027975723147392273, 0.0013538120547309518, -0.013608488254249096, -0.007269282825291157, 0.0024796943180263042, -0.025626057758927345, -0.0005598816205747426, -0.010371576994657516, 0.03262610733509064, 0.005253097042441368, -0.006510535720735788, 0.011723860166966915, 0.010500075295567513, 0.005965951830148697, 0.04975909739732742, 0.005935356952250004, 0.0025760673452168703, -0.009576117619872093, -0.03027644008398056, 0.034755490720272064, -0.03032539039850235, 0.02888132445514202, -0.02115924097597599, -0.03757019713521004, -0.009888182394206524, 0.06549697369337082, -0.0036009871400892735, -0.04058070853352547, 0.002617370104417205, 0.02817152999341488, -0.011962497606873512, -0.044545773416757584, -0.019776364788413048, 0.005026696715503931, -0.02066972851753235, -0.019482657313346863, 0.05957385152578354, -0.0036560576409101486, -0.010928399860858917, -0.010389934293925762, -0.00047192207421176136, 0.006226005963981152, 0.060944490134716034, -0.04816817492246628, 0.016056058928370476, -0.031426798552274704, -0.023239675909280777, 0.003717246698215604, 0.013828770257532597, 0.03309114649891853, -0.002542413305491209, 0.015015841461718082, -0.022407501935958862, 0.0016689366893842816, 0.0002688502427190542, 0.014318283647298813, 0.039112165570259094, -0.004387269262224436, -0.020094549283385277, -0.03455968573689461, 0.01586025208234787, -0.018626006320118904, 0.0009667901322245598, -0.07058791816234589, 0.0014693067641928792, -0.004420923069119453, 0.008982581086456776, -0.02704564668238163, 0.029664546251296997, -0.016704663634300232, -0.030349867418408394, -0.009765803813934326, 0.032454777508974075, 0.03198973834514618, -0.011295534670352936, -0.06662285327911377, -0.00876230001449585, -0.04187792167067528, -0.02264002151787281, 0.017622502520680428, 0.02435331977903843, -0.020363781601190567, 0.020902246236801147, 0.015468642115592957, 0.0256015807390213, -0.008835727348923683, 0.0062596602365374565, 0.04689544066786766, 0.024500174447894096, -0.013987861573696136, 0.0008750062552280724, 0.057077329605817795, -0.003402122063562274, 0.050517842173576355, -0.054923467338085175, -0.01855257898569107, -0.0006619911873713136, 0.022921491414308548, 0.014868986792862415, 0.029640071094036102, 0.025356823578476906, 0.04574508219957352, -0.022786876186728477, -0.01446513831615448, 0.001785196247510612, -0.01779383234679699, -0.00286977575160563, 0.010536788031458855, 0.03306666761636734, 0.059818606823682785, 0.011430151760578156, -4.4457810872700065e-05, -0.024904023855924606, 0.03668907284736633, -0.038524750620126724, 0.03705620765686035, -0.005412188824266195, 0.02322743833065033, 0.008768418803811073, -0.020339306443929672, -0.02295820601284504, 0.021147003397345543, 0.014195905067026615, -0.013559537008404732, -0.06941308081150055, 0.029493216425180435, -0.022848064079880714, -0.017732644453644753, 0.02246869169175625, 0.01971517503261566, -0.03247925266623497, 0.01764697954058647, -0.030423294752836227, -0.015236122533679008, 0.001086109085008502, 0.03176945820450783, -0.0016964719397947192, -0.0005973600200377405, 0.0016459907637909055, -0.005268394015729427, 0.03076595440506935, 0.034339405596256256, 0.00851142406463623, 0.02569948323071003, -0.03646879270672798, -0.00540301064029336, 0.045206617563962936, -0.01680256798863411, -0.03705620765686035, 0.007036763243377209, -0.023300865665078163, -0.002799408044666052, -0.028905799612402916, -0.006993930786848068, -0.015444166027009487, -0.0404338538646698, 0.04655278101563454, -0.0018417963292449713, 0.012592746876180172, 0.04980804771184921, 0.012090994976460934, 0.029762450605630875, -0.011950260028243065, 0.01873614825308323, -0.00028376514092087746, -0.03759467229247093, 0.01671690307557583, -0.06437108665704727, 0.009912658482789993, 0.03306666761636734, -0.0063453251495957375, 0.023215200752019882, -0.0024338022340089083, 0.03526948392391205, 0.0030824083369225264, 0.008333975449204445, -0.01770816743373871, -0.05179058015346527, -0.02704564668238163, -0.008633802644908428, -0.015652209520339966, -0.017132990062236786, 0.002644905121996999, 0.036052703857421875, 0.005696719046682119, -0.014049051329493523, 0.01747564971446991, -0.0010677523678168654, 0.03764362633228302, 0.002592894248664379, -0.009025413542985916, 0.010206366889178753, -0.0014364175731316209, 0.007801629137247801, 0.02902817912399769, 0.04532899335026741, -0.012415298260748386, 0.02164875529706478, 0.036419838666915894, -0.02968902327120304, 0.017842784523963928, 0.011136443354189396, 0.023594573140144348, 0.02807362750172615, -0.03671354800462723, 0.007281520403921604, 0.051545821130275726, 0.01590920425951481, 0.0026785593945533037, 0.010585740208625793, -0.026702987030148506, -0.0023068345617502928, 0.017316557466983795, -0.030570147559046745, 0.0112282270565629, -0.013608488254249096, 0.03984643891453743, 0.005806859582662582, -0.000603478925768286, 0.000140066011226736, 0.014991365373134613, -0.007746558636426926, -0.0002845299895852804, 0.0054458430968225, -0.00846859160810709, -0.01473437063395977, 0.03984643891453743, 0.04378702491521835, -0.018577056005597115, 0.00015593697025906295, -0.06383262574672699, -0.010126820765435696, -0.027706490829586983, -0.0040476685389876366, 0.011393438093364239, -0.01309449877589941, 0.011063016019761562, -0.05942699685692787, 0.020094549283385277, 0.01590920425951481, -0.014342759735882282, -0.017218654975295067, -0.0449373833835125, -0.013841007836163044, 0.026849841699004173, -0.02250540442764759, -0.018246633931994438, 0.005344880744814873, 0.015260598622262478, 0.010830496437847614, -0.004546361044049263, -0.0064554656855762005, -0.03174498304724693, 0.07802852988243103, -0.016276339069008827, 0.025846337899565697, -0.0011151740327477455, 0.0269477441906929, 0.006834839005023241, 0.005378535017371178, -0.02178337238729, -0.007361066527664661, 0.002811645856127143, 0.01900538057088852, -0.019556082785129547, 0.02497745119035244, 0.03103518672287464, 0.0038151496555656195, 0.02897922694683075, 0.049661193042993546, -0.029909303411841393, -0.014134716242551804, 0.007018406875431538, -0.0042495932430028915, -0.011234345845878124, -0.04765418544411659, 0.005485616158694029, 0.020767631009221077, 0.012500963173806667, 0.004035430960357189, -0.03585689887404442, -0.04452129825949669, 0.033629611134529114, -0.0031512463465332985, -0.009863706305623055, 0.010102344676852226, 0.0092089818790555, -0.00846859160810709, -0.023508908227086067, -0.00571813527494669, 0.020633013918995857, -0.0013889959082007408, -0.03343380615115166, 0.03127994388341904, -0.0037661981768906116, -0.026751939207315445, 0.010701999068260193, -0.04968566820025444, 0.020070072263479233, 0.03397227078676224, 0.017145227640867233, -0.045084238052368164, 0.023435480892658234, 0.014012337662279606, -0.014917938970029354, -0.02344772033393383, 0.018160969018936157, 0.014403948560357094, -0.04246533662080765, 0.03791285678744316, 0.040458329021930695, -0.05193743482232094, -0.013559537008404732, -0.023655762895941734, -0.03894083574414253, -0.014526327140629292, -0.011925783939659595, -0.021122528240084648, 0.0449373833835125, -0.02968902327120304, 0.024377796798944473, 0.044545773416757584, -0.02645822986960411, -0.0005438194493763149, 0.020596301183104515, 0.013841007836163044, -0.008737824857234955, 0.008113694377243519, -0.01860153116285801, -0.002208931837230921, -0.004638144746422768, -0.016362003982067108, 0.04958776757121086, -0.0399932935833931, 0.021905750036239624, 0.04420311376452446, 0.010585740208625793, -0.00173471518792212, 0.0013063903898000717, 0.01368191558867693, 0.009417025372385979, -0.031059661880135536, -0.030986234545707703, 0.029126081615686417, 0.026898793876171112, 0.032014213502407074, 0.022811351343989372, 0.017549077048897743, 0.02196693979203701, -0.03872055560350418, 0.02543025091290474, 0.04633249714970589, -0.02057182416319847, -0.005978189408779144, -0.005892524495720863, 0.014183667488396168, 0.026482706889510155, 0.005696719046682119, -0.012513200752437115, 0.012513200752437115, -0.010916161350905895, -0.026654036715626717, 0.030961759388446808, -0.07210540771484375, 0.013375969603657722, 0.013938910327851772, -0.021734420210123062, 0.005302048288285732, 0.031475748866796494, 0.04302828013896942, 0.019421467557549477, 0.015174933709204197, 0.022126032039523125, -0.054825566709041595, -0.010885567404329777, 0.005681421607732773, 0.0215630903840065, 0.005932297557592392, 0.014783321879804134, 0.03935692459344864, -0.03238134831190109, -0.04909825325012207, 0.017769357189536095, -0.03301771730184555, 0.016472145915031433, -0.05286750942468643, -0.015970394015312195, 0.038573700934648514, -0.0015985690988600254, 0.031916312873363495, -0.006005724426358938, -0.012641698122024536, 0.06510535627603531, 0.009300765581429005, -0.017634741961956024, -0.013327018357813358, 0.020865533500909805, -0.005084826610982418, 0.03715411201119423, -0.01577458716928959, 0.007244806736707687, 0.009973847307264805, -0.08566494286060333, -0.029542168602347374, 0.0010065630776807666, 0.02011902444064617, 0.00704288249835372, -0.013302542269229889, -0.008309499360620975, 0.003934468608349562, 0.01532178744673729, 0.040458329021930695, -0.016631238162517548, -0.009912658482789993, 0.005748729687184095, -0.015248360112309456, -0.0005560572608374059, -0.07264387607574463, -0.02304387092590332, -0.013804294168949127, 0.007281520403921604, 0.0014891932951286435, 0.02883237414062023, -0.019029855728149414, 0.033042192459106445, -0.01444066222757101, -0.0060577355325222015, -0.016998372972011566, -0.048045795410871506, -0.0512031614780426, 0.01513822004199028, 0.004151690285652876, -0.02003335952758789, 0.003894695546478033, -0.0057211946696043015, 0.024634791538119316, -0.03455968573689461, 0.017353270202875137, -0.02452464960515499, -0.061434004455804825, 0.01742669753730297, -0.020412733778357506, -0.012690650299191475, 0.0014922528062015772, -0.01989874243736267, -0.045206617563962936, 0.025283396244049072, 0.0018004935700446367, -0.019923219457268715, 0.016729140654206276, 0.0063636815175414085, -0.049979377537965775, -0.0008176413248293102, -0.02304387092590332, 0.00828502420336008, 0.001941228867508471, -0.021012388169765472, 0.017683692276477814, 0.00950269028544426, -0.003775376593694091, -0.02232183702290058, -0.03372751176357269, 0.0030808786395937204, -0.026384804397821426, -0.01743893511593342, -0.008964224718511105, -0.002485813107341528, 0.012678411789238453, -0.03715411201119423, 0.06427318602800369, -0.03664012253284454, -0.02309282124042511, 0.015052555128932, -0.02232183702290058, -0.02511206641793251, 0.009417025372385979, 0.014232618734240532, 0.002121737226843834, -0.05786055326461792, -0.007911769673228264, 0.0026953862980008125, 0.034755490720272064, -0.0009484333568252623, 0.038524750620126724, -0.010145177133381367, -0.031647078692913055, 0.012219492346048355, 0.036003753542900085, 0.009557760320603848, -0.008364570327103138, 0.00775879668071866, -0.02327639050781727, -0.022970443591475487, -0.055412981659173965, -0.014208143576979637, 0.014611992053687572, -0.009319121949374676, 0.036542218178510666, 0.020412733778357506, 0.023741427809000015, -0.08375584334135056, -0.005537626799196005, -0.019262375310063362, -0.015419689938426018, 0.014783321879804134, -0.03468206524848938, 0.0012918580323457718, 0.012629460543394089, -0.013106736354529858, -0.020902246236801147, -0.010793783701956272, 0.0163987185806036, -0.028734469786286354, -0.030300915241241455, 0.023924995213747025, -0.04483947902917862, 0.012580509297549725, 0.026360327377915382, 0.012146065942943096, -0.008083099499344826, -0.028000200167298317, 0.00026062794495373964, -0.042073726654052734, 0.011393438093364239, -0.05193743482232094, -0.016606761142611504, -0.006577844265848398, 0.03921006992459297, 0.05198638513684273, -0.005770145915448666, -0.04953881353139877, -0.016924945637583733, 0.03318904712796211, 0.0060332599096000195, -0.024806121364235878, 0.02946874126791954, -0.0014264743076637387, 0.05575564131140709, 0.002871305448934436, -0.006060794927179813, 0.023300865665078163, -0.015468642115592957, 0.025993192568421364, 0.0006111275870352983, 0.03803523629903793, 0.02066972851753235, -0.018491391092538834, -0.003882457735016942, -0.04501080885529518, 0.01311897486448288, -0.0034939059987664223, 0.028685519471764565, 0.04231848195195198, 0.010677523910999298, -0.006822600960731506, 0.04217163100838661, -0.06725922226905823, 0.03436388075351715, -0.02995825558900833, 0.03455968573689461, 0.004573896061629057, -0.011852357536554337, -0.010934518650174141, -0.025993192568421364, -0.02506311610341072, 0.017916211858391762, -0.012250087223947048, 0.008713348768651485, -0.01248872559517622, -0.02421870455145836, 3.05468201986514e-05, 0.011797286570072174, 0.015358501113951206, -0.038157615810632706, -0.0066757467575371265, 0.011827881447970867, 0.010322625748813152, -0.00031550705898553133, -0.014807797968387604, 0.0018035530811175704, 0.04219610616564751, -0.043689124286174774, -0.032063163816928864, 0.030031682923436165, -0.02344772033393383, -0.0016108069103211164, -0.0024261537473648787, -0.03930797427892685, -0.02569948323071003, 0.0025990132708102465, 0.0030717002227902412, 0.002750456565991044, 0.02339876815676689, -0.015064792707562447, -0.07127323746681213, 0.018430201336741447, -0.03561214357614517, 0.013192402198910713, 0.003157365135848522, 0.006865433417260647, 0.04248981177806854, 0.030203012749552727, -0.006492179352790117, 0.00977192260324955, -0.025846337899565697, 0.039870914071798325, -0.02902817912399769, -0.03365408629179001, -0.031696029007434845, -0.01475884672254324, 0.01309449877589941, -0.010720356367528439, -0.030300915241241455, 0.02030259184539318, -0.013865483924746513, 0.004017074126750231, 0.06368576735258102, -0.01577458716928959, -0.03886741027235985, 0.00028854553238488734, 0.03720306232571602, 0.0016352826496586204, 0.0013943499652668834, 0.006957217585295439, -0.0005292869755066931, -0.011613719165325165, -0.025772910565137863, -0.017402222380042076, -0.004641204606741667, -0.018356774002313614, 0.02699669636785984, -0.005770145915448666, -0.03125546872615814, 0.0021171479020267725, -0.0018509747460484505, -0.011020183563232422, 0.008780657313764095, -0.008921392261981964, -0.005338761955499649, -0.0030579327140003443, 0.009979966096580029, -0.02246869169175625, 0.0038916361518204212, -0.004179225768893957, -0.0197641272097826, 0.010206366889178753, 0.012335752137005329, 0.043126180768013, -0.013045547530055046, 0.004319960717111826, -0.0014907229924574494, 0.005243918392807245, 0.0078628184273839, 0.03402122110128403, 0.01747564971446991, 0.07930126786231995, 0.011111967265605927, -0.06167875975370407, 0.0018310882151126862, -0.03840237110853195, -0.00214468315243721, 0.04621012136340141, -0.015077030286192894, -0.01626410149037838, 0.018613768741488457, -0.02807362750172615, -0.00742225581780076, -0.006724698469042778, 0.009955490939319134, -0.028758946806192398, -0.007544634398072958, 0.040776513516902924, 0.009013175964355469, -0.0007924007368274033, 0.03872055560350418, 0.049612242728471756, 0.051545821130275726, -0.011577005498111248, -0.011491340585052967, -0.0015213176375254989, -0.0035183816216886044, 0.028783421963453293, 0.015125981532037258, -0.0031818407587707043, 0.02807362750172615, -0.006730817258358002, -0.009484332986176014, -0.02147742547094822, -0.03597927838563919, 0.014563040807843208, 0.01612948626279831, -0.03580794855952263, -0.011350605636835098, 0.0345841608941555, 0.010396053083240986, 0.05022413283586502, 0.06006336584687233, -0.013314779847860336, 0.010414409451186657, 0.007795510347932577, 0.032136593014001846, 0.033580660820007324, 0.029860353097319603, -0.02241973951458931, 0.0033715274184942245, 0.06539906561374664, -0.03490234538912773, -0.0372764877974987, 0.0075018019415438175, 0.008890797384083271, -0.0337030366063118, -0.012513200752437115, -0.021905750036239624, 0.02277463860809803, -0.009667901322245598, 0.0037937334273010492, -0.07102847844362259, -0.003472489770501852, -0.044545773416757584, -0.015395214781165123, 0.0023955591022968292, -0.007972958497703075, -0.026164522394537926, -0.015052555128932, 0.03238134831190109, 0.032014213502407074, 0.019237900152802467, -0.030031682923436165, 0.01904209330677986, 0.005846632644534111, -0.012861980125308037, 0.014330522157251835, -0.02097567357122898, -0.021893512457609177, 0.045573752373456955, -0.012403060682117939, 0.008841846138238907, 0.004693215247243643, 0.02775544300675392, 0.009147792123258114, -0.008456354029476643, -0.009716852568089962, -0.013730866834521294, -0.016631238162517548, 0.016227388754487038, 0.032136593014001846, 0.04743390530347824, 0.015921441838145256, -0.004616728518158197, -0.02951769344508648, 0.003570392495021224, 0.032552678138017654, 0.04082546755671501, -0.04204925149679184, 0.02412080205976963, 0.0007250925991684198, 0.005984308198094368, 0.008841846138238907, -0.013889959082007408, 0.0046993340365588665, -0.002277769846841693, 0.015309549868106842, -0.017316557466983795, 0.0012696768390014768, 0.008193240500986576, -0.014428424648940563, -0.015566544607281685, -0.0314512737095356, 0.035098154097795486, 0.03064357489347458, -0.02075539343059063, 0.009533285163342953, -0.00588640570640564, 0.009294646792113781, -0.017549077048897743, 0.02161204256117344, -0.0422205813229084, -0.012323514558374882, -0.0050970641896128654, -0.020388256758451462, -0.022493166849017143, 0.013804294168949127, 0.010928399860858917, -0.026262424886226654, 0.01051231287419796, 0.006816482171416283, -0.012396941892802715, -0.04532899335026741, -0.003307278733700514, 0.022676734253764153, 0.01850362867116928, 0.015223884955048561, 0.012935406528413296, -0.007324352860450745, 0.018589293584227562, -0.0051796697080135345, -0.019103283062577248, -0.010708117857575417, -0.008138169534504414, -0.03309114649891853, 0.03397227078676224, -0.007636418100446463, -0.0008612386300228536, 0.009845349937677383, 0.023692477494478226, 0.023876044899225235, -0.02052287384867668, -0.027682015672326088, 0.015101506374776363, 0.005363237578421831, -0.02317848615348339, -0.01379205659031868, 0.029444266110658646, -0.025405775755643845, 0.02331310324370861, 0.003772317199036479, -0.03842684626579285, -0.0024077969137579203, -0.02139176055788994, -0.006779768504202366, 0.009973847307264805, 0.019788602367043495, -0.013926672749221325, 0.029933780431747437, 0.01796516217291355, -0.022028129547834396, -0.00346943037584424, -8.561713912058622e-05, 0.03974853456020355, -0.025821862742304802, 0.019262375310063362, -0.004323020111769438, -0.004482112359255552, -0.01724313013255596, -0.0512031614780426, -0.03203868865966797, -0.050517842173576355, 0.0049012587405741215, 0.0067675309255719185, -0.025283396244049072, -0.04351779446005821, -0.0037539603654295206, 0.013608488254249096, -0.007826104760169983, 0.013657440431416035, -0.0034786087926477194, 0.013045547530055046, -0.0013446337543427944, 0.021893512457609177, 0.027192501351237297, 0.07332919538021088, 0.01417142990976572, -0.006443227641284466, 0.009294646792113781, 0.051056306809186935, 0.004102739039808512, 0.024451224133372307, 0.005378535017371178, -0.016153961420059204, -0.04608774185180664, -0.007703726179897785, -0.0028514189179986715, 0.016900470480322838, -0.02344772033393383, 0.009753566235303879, -0.006847076583653688, -0.011546410620212555, 0.028905799612402916, 0.012629460543394089, 0.0059475949965417385, 0.020327068865299225, 0.014000100083649158, -0.020902246236801147, -0.016729140654206276, 0.015566544607281685, 0.0033807058352977037, -0.003451073542237282, -0.047458380460739136, 0.002655613236129284, 0.012158303521573544, 0.008003553375601768, -0.03769257664680481, 0.012641698122024536, 0.00824219174683094, -0.031010709702968597, 0.04001776874065399, 0.004212879575788975, -0.015480879694223404, -0.002868246054276824, 0.03541633486747742, 0.015566544607281685, 0.016227388754487038, -0.02667851187288761, -0.017279842868447304, -0.008003553375601768, 0.01720641553401947, 0.042881425470113754, -0.014820035547018051, 0.0002569948264863342, 0.012519320473074913, 0.008058624342083931, 0.0031145326793193817, 0.02412080205976963, -0.01984979212284088, -0.005751789081841707, -0.04657725617289543, 0.015542068518698215, 0.042122676968574524, 0.012384703382849693, 0.04601431265473366, -0.00723256915807724, 0.002485813107341528, -0.01586025208234787, 0.0462590716779232, -0.006461584474891424, -0.014342759735882282, 0.018650483340024948, 0.003411300480365753, -0.0012237849878147244, 0.01341268327087164, 0.008181001991033554, 0.007746558636426926, 0.010726475156843662, 0.0006849371129646897, -0.015297312289476395, 0.03634641319513321, 0.023190725594758987, -0.013082261197268963, 0.020792106166481972, 0.036860402673482895, 0.0034816681873053312, -0.016068296507000923, -0.009992203675210476, 0.004258771426975727, -0.03152469918131828, -0.012176659889519215, -0.0005258450983092189, 0.006103627383708954, -0.02995825558900833, 0.02124490588903427, 0.006969455163925886, 0.012690650299191475, -0.030398817732930183, 0.03037434257566929, 0.013608488254249096, -0.0007162966066971421, 0.006510535720735788, 0.014110240153968334, -0.004362793173640966, 0.015701161697506905, 0.0006245127297006547, -0.014330522157251835, -0.02098791114985943, 0.012274563312530518, 0.017487887293100357, 0.006926622707396746, 0.01738998480141163, -0.028293907642364502, -0.0001438903418602422, 0.015297312289476395, 0.020021121948957443, 0.01761026494204998, 0.013865483924746513, 0.0014318283647298813, 0.003255267860367894, -0.00945985782891512, -0.017842784523963928, -0.007728201802819967, -0.015578782185912132, -0.03850027546286583, -0.005305107682943344, 0.015970394015312195, -0.02506311610341072, -0.006128103006631136, 0.0032583274878561497, 0.037937331944704056, 0.011613719165325165, -0.018883001059293747, 0.011326129548251629, -0.0386226512491703, 0.014930176548659801, 0.011736097745597363, 0.020290354266762733, -0.026874316856265068, -0.02381485514342785, -0.024867309257388115, -0.0008168764761649072, -0.03429045528173447, -0.011687146499752998, -0.0036377008073031902, -0.013559537008404732, 0.021355047821998596, 0.02591976523399353, -0.02956664375960827, 0.02538130059838295, -0.0038549224846065044, 0.006639033555984497, 0.00412109587341547, 0.01309449877589941, 0.03394779562950134, -0.0032399706542491913, 0.030888332054018974, 0.006810363382101059, 0.0057732053101062775, 0.016325291246175766, -0.025944240391254425, 0.0005369356367737055, -0.01417142990976572, -0.022383026778697968, 0.0026081916876137257, 0.013963386416435242, -0.010910042561590672, -0.012972120195627213, 0.02699669636785984, 0.024194227531552315, 0.009404787793755531, 0.03495129942893982, 0.01590920425951481, 0.01962951011955738, -0.005054231733083725, 0.012066519819200039, -0.02080434374511242, -0.0013346904888749123, -0.00013538121129386127, 0.03947930410504341, -0.017316557466983795, 0.020388256758451462, -0.007752677425742149, -0.002472045598551631, -0.008058624342083931, -0.006920503918081522, 0.003555095288902521, -0.0007499507046304643, 0.024916261434555054, 0.020498398691415787, 0.005228621419519186, -0.0062535409815609455, -0.0256015807390213, 0.004524944815784693, -0.019935457035899162, 0.010628572665154934, 0.004378090612590313, 0.006975574418902397, 0.002640316030010581, 0.012984358705580235, 0.0029982731211930513, 0.00041379229514859617, -0.025675008073449135, -0.0013798174913972616, 0.008982581086456776, 0.01868719607591629, 0.027706490829586983, -0.031230991706252098, -0.0027795215137302876, -0.008737824857234955, 0.004944091197103262, 0.01551759336143732, 0.007887293584644794, 0.0073855421505868435, 0.007330471649765968, 0.006418752018362284, -0.01905433088541031, 0.00704288249835372, 0.006932741962373257, 0.02861209213733673, 0.018711671233177185, 0.013620726764202118, -0.020473921671509743, 0.025014163926243782, -0.03700725734233856, -0.007599704433232546, -0.010671405121684074, 0.01612948626279831, -0.03208764269948006, 0.011313891969621181, -0.019127758219838142, 0.04684648662805557, -0.003002862213179469, 0.01563997194170952, 0.00044056258047930896, 0.035954803228378296, -0.03333590179681778, 0.014428424648940563, -0.011387319304049015, -0.0051276590675115585, -0.021232668310403824, -0.018185444176197052, -0.022848064079880714, 0.035024724900722504, 0.0037325441371649504, 0.005054231733083725, 0.010561264120042324, -0.03076595440506935, 0.00876230001449585, 0.00313288951292634, -0.02628690004348755, -0.005072588566690683, 0.021991414949297905, 0.00038549225428141654, -0.02569948323071003, 0.03737439215183258, 0.011882951483130455, 0.010139058344066143, -0.03517157956957817, 0.013584013096988201, -0.019666224718093872, 0.010567382909357548, -0.010420529171824455, -0.023374292999505997, 0.027706490829586983, -0.021257145330309868, 0.0036468792241066694, -0.030937284231185913, 0.011864595115184784, 0.03673802316188812, 0.010757070034742355, -0.024108562618494034, -0.01823439635336399, -0.03884293511509895, 0.015223884955048561, 0.024634791538119316, 0.0022945967502892017, 0.0008811251609586179, -0.010757070034742355, -0.005650827195495367, 0.004668739624321461, -0.0020559586118906736, -0.002605132292956114, 0.015493117272853851, -0.02591976523399353, 0.00540301064029336, 0.016998372972011566, -0.005507032386958599, -0.03495129942893982, -0.02861209213733673, 0.0034051816910505295, -0.015223884955048561, 0.0013117444468662143, 0.01551759336143732, -0.0021385641302913427, 0.026311377063393593, 0.012329633347690105, 0.020180214196443558, -0.00590782193467021, 0.012250087223947048, 0.009074365720152855, 0.007942364551126957, -0.0032583274878561497, -0.0033807058352977037, -0.002652553841471672, -0.025234445929527283, -0.009594473987817764, 0.00918450579047203, -0.009282409213483334, 0.0008811251609586179, 0.04564717784523964, -0.004402566235512495, 0.01756131462752819, -0.06167875975370407, -8.824636461213231e-05, 0.02026587910950184, -0.010010560974478722, 0.015052555128932, -0.014073526486754417, -0.013229114934802055, 0.05061574652791023, 0.004194522742182016, 0.004442339297384024, -0.028636567294597626, -0.002871305448934436, -0.009557760320603848, -0.030178537592291832, 0.023876044899225235, -0.013620726764202118, 0.04437444359064102, -0.022762399166822433, -0.03296876698732376, -0.001159536186605692, 0.03607717901468277, -0.0028391811065375805, 0.002834591781720519, 0.025723960250616074, 0.021049100905656815, 0.005681421607732773, 0.028098102658987045, -0.009117198176681995, 0.020314829424023628, 0.004075204022228718, 0.005898643285036087, -0.015933679416775703, -0.043419890105724335, -0.019507132470607758, -0.03311562165617943, -0.01971517503261566, -0.012788552790880203, 0.03561214357614517, -0.004252652637660503, -0.04011566936969757, -0.010536788031458855, -0.0008581791771575809, 0.014550803229212761, 0.011087491177022457, 0.021183717995882034, -0.018185444176197052, -0.02709459885954857, -0.032993242144584656, -0.011222108267247677, 0.01756131462752819, -0.02080434374511242, 0.025356823578476906, -0.012372465804219246, -0.003968122880905867, 0.003291981527581811, -0.011105848476290703, -0.016765853390097618, 0.041168127208948135, -0.0015381446573883295, -0.042342960834503174, -0.02174665778875351, 0.009826993569731712, 0.012886455282568932, 0.01823439635336399, 0.039968814700841904, -0.00824219174683094, 0.02052287384867668, -0.04244086146354675, -0.03208764269948006, -0.005858870223164558, 0.013657440431416035, -0.03710515797138214, 0.01725536771118641, -0.01770816743373871, -0.003833506256341934, -0.0020192451775074005, 0.02215050719678402, -0.005032815504819155, -0.033262476325035095, 0.010616334155201912, 0.011081372387707233]
metadata : {"source": "pydantic_ai_docs", "crawled_at": "2025-03-15T11:18:06.700933", "url_path": "/examples/weather-agent/", "chunk_size": 1815}
updated_dt: 2025-03-15T11:18:06.702452
---
Table of contents 
  * [ Running the Example  ](https://ai.pydantic.dev/examples/weather-agent/#running-the-example)
  * [ Example Code  ](https://ai.pydantic.dev/examples/weather-agent/#example-code)
  * [ Running the UI  ](https://ai.pydantic.dev/examples/weather-agent/#running-the-ui)
  * [ UI Code  ](https://ai.pydantic.dev/examples/weather-agent/#ui-code)


# Weather agent
Example of PydanticAI with multiple tools which the LLM needs to call in turn to answer a question.
Demonstrates:
  * [tools](https://ai.pydantic.dev/tools/)
  * [agent dependencies](https://ai.pydantic.dev/dependencies/)
  * [streaming text responses](https://ai.pydantic.dev/results/#streaming-text)
  * Building a [Gradio](https://www.gradio.app/) UI for the agent


In this case the idea is a "weather" agent â€” the user can ask for the weather in multiple locations, the agent will use the `get_lat_lng` tool to get the latitude and longitude of the locations, then use the `get_weather` tool to get the weather for those locations.
## Running the Example
To run this example properly, you might want to add two extra API keys **(Note if either key is missing, the code will fall back to dummy data, so they're not required)** :
  * A weather API key from [tomorrow.io](https://www.tomorrow.io/weather-api/) set via `WEATHER_API_KEY`
  * A geocoding API key from [geocode.maps.co](https://geocode.maps.co/) set via `GEO_API_KEY`


With [dependencies installed and environment variables set](https://ai.pydantic.dev/examples/#usage), run:
[pip](https://ai.pydantic.dev/examples/weather-agent/#__tabbed_1_1)[uv](https://ai.pydantic.dev/examples/weather-agent/#__tabbed_1_2)
```
python-mpydantic_ai_examples.weather_agent

```

```
uvrun-mpydantic_ai_examples.weather_agent

```

## Example Code
pydantic_ai_examples/weather_agent.py