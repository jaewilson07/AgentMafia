---
url: https://ai.pydantic.dev/api/models/anthropic/
session_id: pydantic_ai_docs
chunk_number: 3
title: AnthropicModel Class in Pydantic
summary: The `AnthropicModel` class provides a way to interact with the Anthropic API using the Anthropic Python client. It includes an `__init__` method for initialization, with private methods matching those of the base class. Currently, it does not support streaming responses, but this feature is anticipated for future updates.
embedding: [0.014682007022202015, 0.046744205057621, -0.01831604726612568, -0.03517361730337143, -0.034322839230298996, -0.002988359658047557, -0.01395276840776205, -0.027176298201084137, 0.025037197396159172, -0.026908909901976585, -0.013393685221672058, -0.0345902256667614, -0.0286104679107666, -0.04623373970389366, -0.009401103481650352, -0.005469291005283594, -0.012785986065864563, 0.029339706525206566, 0.002461180789396167, 0.016675259917974472, 0.05751262977719307, 0.04684143885970116, -0.005785294342786074, 0.025499049574136734, 0.014317387714982033, -0.02999602071940899, -0.035975780338048935, 0.03101695515215397, 0.005113787017762661, -0.023311331868171692, 0.011181660927832127, -0.013563841581344604, -0.04071583226323128, -0.0017349806148558855, -0.025134429335594177, -0.017282959073781967, 0.005265711806714535, -0.006320069544017315, 0.017197880893945694, 0.019689446315169334, 0.006927768234163523, -0.07603529840707779, 0.04219861701130867, 0.061061594635248184, -0.03308313339948654, 0.021087154746055603, 0.014900779351592064, 0.03874688595533371, -0.0012632542056962848, 0.017951427027583122, -0.021986549720168114, -0.008550324477255344, -0.001444804365746677, -0.024538883939385414, -0.014037846587598324, -0.01979883201420307, -0.004952746443450451, -0.007225540932267904, -0.035270847380161285, 0.009443641640245914, 0.021913625299930573, -0.0388198122382164, -0.03133295848965645, -0.005138095002621412, -0.032013583928346634, -0.01927621103823185, -0.006198529619723558, 0.03760441392660141, -0.035781316459178925, 0.009206639602780342, -0.024915657937526703, 0.0004797023721039295, -0.055567994713783264, 0.015982482582330704, -0.04212569445371628, -0.00630183843895793, -0.01493724063038826, 0.07486851513385773, -0.019264057278633118, 0.015204627998173237, -0.013721843250095844, 0.03157603740692139, 0.027492301538586617, -0.010804887861013412, -0.002213543513789773, -0.019239749759435654, -0.04888330399990082, 0.01020934246480465, -0.039549048990011215, -0.06310345977544785, 0.02763814851641655, 0.00021193502470850945, -0.053283046931028366, -0.014050000347197056, 0.054935988038778305, -0.02586366795003414, -0.00222721672616899, -0.005031747743487358, 0.059603117406368256, 0.013284299522638321, 0.026325520128011703, -0.009401103481650352, -0.04958823695778847, 0.04215000197291374, -0.012713062576949596, -0.03838226571679115, -0.002926070475950837, 0.02280086651444435, 0.001994771882891655, 0.03140588477253914, -0.07647284120321274, -0.01819450780749321, 0.050852250307798386, -0.07783408463001251, -0.11648374050855637, 2.789243467304914e-07, -0.07666730135679245, 0.048737458884716034, -0.015459861606359482, -0.045674655586481094, 0.03101695515215397, 0.037750259041786194, 0.015593555755913258, -0.02247270755469799, 0.006101297680288553, -0.018085122108459473, 0.011558434925973415, -0.02846462093293667, -0.08464031666517258, -0.047838062047958374, 0.053283046931028366, -0.003153957659378648, 0.00848955474793911, -0.039937976747751236, -0.02074684388935566, -0.056977856904268265, -0.013527379371225834, -0.033544983714818954, -0.009948031976819038, 0.019932527095079422, 0.03592716529965401, -0.021925779059529305, 0.0019461560295894742, -0.006970307324081659, -0.006775843445211649, 0.014378157444298267, -0.009978417307138443, -0.005095555912703276, 0.0022150627337396145, 0.0019233672646805644, 0.012749524787068367, 0.023663798347115517, 0.03320467099547386, 0.0023305255454033613, 0.02367595210671425, 0.015435554087162018, 0.0018777898512780666, 0.030871108174324036, 0.01775696501135826, -0.04227153956890106, 0.007444312330335379, 0.015423400327563286, -0.009820415638387203, -0.02298317477107048, -0.04898053780198097, 0.01730726659297943, -0.04817837476730347, -0.014876470901072025, -0.041201990097761154, -0.05707508698105812, -0.014414619654417038, 0.03772595152258873, -0.010276190005242825, -0.0061164903454482555, -0.014475389383733273, -0.046890053898096085, -0.04997716471552849, -0.04781375452876091, 0.0037798876874148846, -0.0016195178031921387, 0.016650952398777008, 0.005660715978592634, -0.03753148764371872, -0.026544291526079178, -0.017161419615149498, 0.037118252366781235, -0.014852163381874561, 0.02897508628666401, 0.03906289115548134, 0.014718469232320786, -0.004937554243952036, 0.0314301922917366, 0.0269332192838192, 0.010573961772024632, -0.007863624952733517, -0.015204627998173237, 0.024478115141391754, -0.011904822662472725, 0.03415268287062645, 0.036534860730171204, 0.010075649246573448, -0.005302173551172018, 0.013527379371225834, -0.029509862884879112, 0.024757657200098038, -0.020382223650813103, -0.013284299522638321, 0.02700614184141159, -0.0572209358215332, 0.012895372696220875, 0.022387629374861717, -0.05624861642718315, 0.016650952398777008, 0.02445380762219429, -0.03519792482256889, 0.02292240597307682, -0.07788269966840744, -0.03286436200141907, -0.0054297903552651405, 0.027419377118349075, -0.03242681920528412, 0.044021714478731155, 0.011430817656219006, 0.013004758395254612, 0.02022422105073929, 0.009437564760446548, -0.03548961877822876, -0.01787850446999073, -0.013162760064005852, 0.001108290976844728, 0.017331574112176895, -0.0008484997088089585, 0.016894031316041946, 0.004752206150442362, -0.01279814075678587, -0.04693866893649101, 0.01577586494386196, 0.01458477508276701, 0.003627962898463011, -0.021366696804761887, 0.02254563197493553, 0.019008824601769447, -0.01965298503637314, 0.009006098844110966, 0.009376795031130314, 0.027881229296326637, -0.017513884231448174, -0.05255380645394325, -0.018145890906453133, 0.009164100512862206, 0.04086167737841606, -0.06674965471029282, 0.019823141396045685, 0.019458521157503128, -0.018862975761294365, -0.009850800037384033, -0.02865908294916153, -0.016553720459342003, -0.0691804513335228, -0.02406487986445427, 0.002174043096601963, -0.006745458580553532, -0.012044593691825867, 0.013199221342802048, -0.008301167748868465, -0.01174074411392212, -0.0035641544964164495, -0.010172881186008453, 0.026519984006881714, -0.038212113082408905, 0.009449719451367855, 0.03772595152258873, 0.013867690227925777, -0.020029759034514427, -0.011850129812955856, -0.0031235727947205305, 0.010318728163838387, 0.03886842727661133, -0.0068001514300704, -0.03031202405691147, 0.013588149100542068, 0.004451395012438297, 0.05031747370958328, 0.010999351739883423, -0.005843025632202625, 0.03296159207820892, 0.0348576121032238, -0.0067333048209548, -0.022241782397031784, -0.0339825265109539, 0.04511557146906853, -0.0011713397689163685, 0.001557228621095419, -0.05099809914827347, 0.0033241133205592632, -0.007128308992832899, -2.151871558453422e-05, 0.014147232286632061, -0.0008021626272238791, -0.005533099174499512, 0.053526125848293304, 0.02822154015302658, -0.003840657416731119, 0.0030673604924231768, -0.01407430786639452, 0.01652941294014454, 0.0043085855431854725, -0.01902097836136818, 0.0910089984536171, -0.00804593414068222, 0.055130451917648315, 0.022582093253731728, -0.026787370443344116, -0.025255968794226646, 0.022253936156630516, -0.00507732480764389, 0.02203516475856304, 0.0061347209848463535, 0.035902854055166245, 0.0219622403383255, -0.08789757639169693, -0.012652292847633362, -0.030603719875216484, -0.00547536788508296, 0.015666479244828224, -0.00022693758364766836, -0.010810964740812778, -0.018546972423791885, -0.04054567590355873, 0.01020934246480465, 0.0012222345685586333, -0.045990657061338425, 0.01493724063038826, 0.001153108780272305, 0.08021626621484756, -0.01831604726612568, -0.019422059878706932, 0.010683348402380943, 0.05517906695604324, 0.050657786428928375, -0.01933698169887066, -0.008598940446972847, -0.034444376826286316, 0.009024329483509064, -0.036413323134183884, -0.01375830452889204, -0.0181337371468544, 0.03108987957239151, -0.0028850508388131857, 0.026447059586644173, 0.033350519835948944, -0.01493724063038826, -0.008143166080117226, 0.024344420060515404, -0.04871315136551857, -0.010415960103273392, 0.031892042607069016, 0.00144784280564636, -0.003971312660723925, 0.01595817506313324, -0.03971920534968376, 0.024623962119221687, 0.00715261697769165, -0.006806228309869766, 0.008301167748868465, 0.010725886560976505, -0.017842041328549385, -0.007839316502213478, -0.06733305007219315, 0.0022591210436075926, -0.00410196790471673, -0.02419857308268547, -0.039670590311288834, -0.01735588349401951, -0.024077033624053, -0.016821106895804405, 0.02215670421719551, -0.02853754349052906, 0.013478763401508331, -0.010683348402380943, 0.07097923755645752, -0.013879844918847084, 0.05814463645219803, -0.0529913492500782, 0.01219651848077774, 0.011607050895690918, 0.004910207819193602, 0.005469291005283594, -0.04385155811905861, 0.0376773364841938, 0.04808114469051361, -0.02246055379509926, -0.020187759771943092, 0.026957526803016663, -0.015010165050625801, 0.016881877556443214, 0.00746862031519413, -0.011874438263475895, 0.06402716785669327, 0.03466314822435379, -0.026398442685604095, 0.01576371118426323, 0.021816393360495567, 0.015690786764025688, 0.01960436813533306, -0.019251903519034386, -0.0009548470261506736, 0.029655709862709045, 0.024295805022120476, 0.011953438632190228, 0.059846196323633194, -0.07593806087970734, 0.04370570927858353, 0.02335994876921177, -0.01248213741928339, -0.018230969086289406, 0.023262716829776764, 0.013284299522638321, 0.020588841289281845, 0.0233721025288105, 0.003024821635335684, -0.09314809739589691, 0.025134429335594177, -0.04317093640565872, -0.07506297528743744, 0.02055238001048565, 0.039670590311288834, -0.027662457898259163, -0.006320069544017315, -0.012074979022145271, -0.0013171875616535544, -0.005347751080989838, 0.04341401532292366, 0.015532786026597023, 0.03947612643241882, 0.020892690867185593, -0.030530797317624092, -0.015994636341929436, 0.01442677341401577, 0.021233001723885536, 0.024988582357764244, 0.008677941747009754, -0.037896107882261276, -0.0008226725040003657, -0.02916955016553402, 0.0218285471200943, -0.023517949506640434, 0.007262002676725388, -0.06441608816385269, -0.026203980669379234, -0.02317763864994049, -0.004427087027579546, 0.02739506959915161, -0.010956812649965286, 0.003141803666949272, -0.028829239308834076, 0.03242681920528412, 0.016553720459342003, 0.04285493120551109, 0.011169507168233395, 0.02388256974518299, 0.015557093545794487, -0.02221747487783432, 0.029509862884879112, -0.03172188624739647, 0.004475702997297049, 0.03320467099547386, -0.003980428446084261, -0.02987448126077652, -0.0272006057202816, 0.03128434345126152, -0.018145890906453133, -0.017598962411284447, 0.020394377410411835, -0.013138451613485813, -0.03461453318595886, -0.012518598698079586, 0.03682655841112137, 0.02311686985194683, -0.01012426521629095, 0.044775258749723434, -0.04431340843439102, 0.014280925504863262, 0.028999395668506622, -0.02617967128753662, 0.06067266687750816, -0.05172733590006828, -0.011345739476382732, -0.013187067583203316, -0.006174221634864807, 0.007031077053397894, 0.016492949798703194, 0.02469688653945923, -0.013053374364972115, 0.04234446585178375, -0.06412439793348312, -0.05751262977719307, -0.006159028969705105, -0.02865908294916153, -0.02912093512713909, 0.003251189598813653, -0.012555060908198357, 0.014438928104937077, 0.03427422046661377, 0.01896020770072937, -0.019324827939271927, 0.011467279866337776, 0.02170700766146183, -0.0632006898522377, 0.032135121524333954, -0.07525744289159775, 0.02439303696155548, 0.0010680309496819973, 0.03804195672273636, 0.033496368676424026, 0.00791224092245102, 0.024028416723012924, 0.06135328859090805, -0.0024140842724591494, -8.91133604454808e-05, 0.04215000197291374, -0.02260640263557434, 0.007845393382012844, 0.0024110455997288227, -0.0054389056749641895, -0.012117517180740833, -0.01741665229201317, -0.04521280527114868, -0.056540314108133316, 0.014985856600105762, 0.021111462265253067, 0.0024915658868849277, 0.005997988861054182, -0.03959766402840614, -0.01863205060362816, 0.025255968794226646, -0.023347795009613037, -0.009638105519115925, -0.036097317934036255, -0.024332266300916672, -0.011394355446100235, 0.03420129790902138, 0.015617863275110722, -0.033034514635801315, 0.014888624660670757, 0.03388529643416405, -0.018862975761294365, 0.014317387714982033, 0.021694853901863098, 0.0070736161433160305, 0.03279143571853638, -0.026276903226971626, 0.009376795031130314, -0.06295761466026306, -0.028440311551094055, 0.021245155483484268, -0.03359359875321388, -0.011218123137950897, 0.00931602530181408, -0.010871734470129013, -0.00016626264550723135, 0.002564489608630538, 0.010142495855689049, 0.03339913487434387, -0.003363613737747073, 0.022253936156630516, -0.00036670835106633604, 0.008951405994594097, -0.029193859547376633, -0.03191635012626648, 0.03084680065512657, -0.03325328975915909, -0.024478115141391754, 0.010330882854759693, -0.009571258910000324, -0.007529390510171652, 0.015192474238574505, -0.011564511805772781, 0.03281574323773384, -0.018534818664193153, -0.01741665229201317, 0.003548962064087391, 0.005007439758628607, 0.026592906564474106, -0.04470233619213104, 0.006362608168274164, -0.00919448584318161, 0.046063583344221115, 0.009334255941212177, 0.007043231278657913, -0.005979757755994797, -0.009856877848505974, 0.0272006057202816, 0.02061314880847931, -0.07107647508382797, 0.014548313803970814, 0.009601644240319729, 0.0007182242115959525, 0.0068123056553304195, 0.014475389383733273, 0.060380969196558, 0.013831228949129581, 0.007869701832532883, 0.04326816648244858, -0.010628655552864075, -0.024235034361481667, 0.0331803634762764, 0.011704281903803349, -0.04744913429021835, -0.02094130590558052, 0.04297647252678871, -0.006186375394463539, -0.006265376228839159, -0.013940614648163319, 0.010422036983072758, 0.008659710176289082, -0.01516816671937704, -0.017659733071923256, 0.04334109276533127, -0.006484148092567921, -0.0016559796640649438, 0.0036401168908923864, 0.01640787161886692, 0.03478468954563141, 0.015204627998173237, -0.016444334760308266, -0.00665430398657918, 0.0015238052001222968, -0.002651086775586009, 0.022630710154771805, 0.005080363247543573, -0.0034000757150352, 0.010069572366774082, 0.007486851420253515, -0.03235389292240143, 0.0035368080716580153, 0.02892647124826908, -0.010379498824477196, -0.007924394682049751, -0.019628677517175674, -0.0004709667118731886, 0.04074013978242874, -0.008769095875322819, -0.006277530454099178, 0.03133295848965645, -0.035975780338048935, -0.013320761732757092, 0.05197041481733322, 0.015314014628529549, -0.04205276817083359, 0.0059524113312363625, -0.007474697194993496, -0.009765722788870335, 0.003925735596567392, 0.0478866808116436, -0.015751557424664497, 0.011400433257222176, -0.011102660559117794, -0.01481570117175579, 0.051873184740543365, -0.019968988373875618, 0.008993945084512234, -0.006581380032002926, 0.024283651262521744, 0.0165901817381382, 0.024988582357764244, 0.04098321869969368, 0.008112781681120396, 0.01146120298653841, 0.011564511805772781, 0.007401773706078529, 0.03305882588028908, 0.002667798427864909, 0.02496427483856678, -0.011327508836984634, 0.027540918439626694, 0.0334477499127388, -0.04168814793229103, -0.02751660905778408, 0.052699655294418335, -0.005299135111272335, -0.017598962411284447, -0.03006894513964653, -0.002028195420280099, 0.059846196323633194, -0.02610674872994423, 0.018486203625798225, 0.022934559732675552, -0.001815500669181347, 0.006775843445211649, -0.0011569069465622306, -0.047667909413576126, -0.011540203355252743, 0.002757434034720063, 0.033544983714818954, -0.00628968421369791, -0.015812328085303307, 0.02771107293665409, -0.021014230325818062, -0.014208002015948296, 0.0027179336175322533, -0.02143961936235428, 2.0450494048418477e-05, -0.0032299200538545847, -0.02463611587882042, 0.005229249596595764, -0.016432181000709534, 0.03651055321097374, 0.010865657590329647, -0.001955271465703845, -0.024490268900990486, -0.0054358672350645065, -0.0045334342867136, 0.050220243632793427, -0.04482387751340866, 0.030360640957951546, 0.03860103711485863, 0.020904844626784325, -0.004919323138892651, 0.023019637912511826, -0.004506087861955166, -0.003293728455901146, -0.04309801012277603, 0.03957335650920868, 0.009948031976819038, -0.04193123057484627, 0.03760441392660141, 0.04742482677102089, 0.0037008868530392647, 0.006854844279587269, -0.026058131828904152, -0.022436246275901794, 0.02387041598558426, -0.014475389383733273, -0.022776557132601738, 0.00014565784658771008, -9.576006414135918e-05, -0.01928836479783058, 0.013685381039977074, 0.0376773364841938, -0.004569896496832371, -0.0055999462492764, -0.017854195088148117, 0.008380169048905373, -7.491788710467517e-05, -0.01908174715936184, 0.009723183698952198, 0.03945181891322136, -0.01775696501135826, 0.025815052911639214, -0.022047318518161774, 0.007371388375759125, -0.013077681884169579, 0.005918988026678562, 0.0037434257101267576, -0.012591523118317127, 0.0264956746250391, 0.033739447593688965, -0.042417388409376144, 8.735672599868849e-05, 0.015107396990060806, -0.031235726550221443, -0.018607743084430695, 0.026641523465514183, -0.047084517776966095, -0.01033695973455906, 0.013551686890423298, 0.020272837951779366, 0.016140485182404518, -0.01922759599983692, 0.007590160239487886, 0.007736008148640394, -0.0211236160248518, 0.011388278566300869, 0.018777897581458092, -0.027151990681886673, 0.022484861314296722, 0.0001287562190555036, -0.0036644248757511377, -0.028124308213591576, 0.00047628406900912523, 0.012427443638443947, -0.004582050256431103, -0.0008728076354600489, 0.05561660975217819, 0.017149265855550766, -0.01033695973455906, 0.010902119800448418, 0.0038953504990786314, -0.0037191177252680063, -0.022266089916229248, 0.009808261878788471, -0.018085122108459473, 0.015338322147727013, 0.01903313212096691, -0.01730726659297943, 0.008860250934958458, -0.07744515687227249, -0.005624254234135151, 0.002078330609947443, 0.007201232947409153, 0.019446367397904396, -0.009328179061412811, -0.01379476673901081, -0.005858218297362328, 0.04052136838436127, -0.0188386682420969, -0.006338300183415413, 0.014888624660670757, -0.010628655552864075, 0.0013498513726517558, 0.033860985189676285, -0.011400433257222176, -0.03366652503609657, -0.001428092597052455, 0.004512164741754532, 0.023700259625911713, -0.005466252099722624, 0.03033633343875408, -0.015933867543935776, 0.02661721594631672, -0.028440311551094055, -0.01654156669974327, -0.005019593518227339, 0.027929844334721565, 7.971301238285378e-05, -0.05192179977893829, -0.002982282778248191, -0.010069572366774082, -0.021427465602755547, 0.012372750788927078, -0.01446323562413454, 0.044532179832458496, 0.01375830452889204, -0.00275439559482038, 0.008586786687374115, -0.031697578728199005, 0.005068209487944841, -0.04093460366129875, 0.03604870289564133, 0.02463611587882042, 0.03524653986096382, 0.042174309492111206, -0.02387041598558426, 0.004910207819193602, -0.04132353141903877, 0.004144506994634867, 0.025304585695266724, -0.00014622756862081587, -0.03276712819933891, 0.028780624270439148, -0.01330860797315836, 0.054498445242643356, -0.05060917139053345, 0.017574654892086983, -0.030117562040686607, 0.007122232113033533, -0.009559105150401592, 0.027151990681886673, 0.023153331130743027, -0.0054237134754657745, -0.024611808359622955, -0.016821106895804405, 0.01168605126440525, -0.00047590426402166486, -0.03689948096871376, 0.0027316068299114704, 0.01801219768822193, 0.032329585403203964, -0.017781272530555725, -0.03313174843788147, -0.006660380866378546, -0.00758408335968852, -0.006101297680288553, 0.02963140234351158, 0.007353157736361027, -0.010288343764841557, 0.021245155483484268, -0.007474697194993496, 0.03135726600885391, 0.030214793980121613, -0.04499403387308121, -0.0023685067426413298, -0.022509170696139336, 0.0006107374792918563, 0.0025173930916935205, 0.033350519835948944, 0.020637456327676773, 0.0049800933338701725, 0.010099956765770912, -0.03988936170935631, -0.02444165199995041, 0.01095073577016592, -0.034176990389823914, 0.01685757003724575, 0.00922487024217844, -0.010397729463875294, 0.028756314888596535, 0.01379476673901081, -0.008349783718585968, 0.07141678035259247, 0.02802707627415657, 0.010099956765770912, -0.022521324455738068, 0.013575995340943336, 0.009601644240319729, 0.02292240597307682, 0.014475389383733273, 0.012567214667797089, -0.024052726104855537, 0.0070675392635166645, -0.044726643711328506, -0.007808931637555361, 0.03745856508612633, 0.0034243836998939514, -0.007596237119287252, 0.027881229296326637, -0.00189602083992213, 0.03313174843788147, -0.01953144557774067, -0.0005211018724367023, -0.01216005627065897, 0.004922361578792334, 0.028294464573264122, 0.018109429627656937, -0.021463928744196892, -0.024867042899131775, 0.009638105519115925, 0.005830871872603893, -0.023092560470104218, 0.02591228485107422, -0.03561116009950638, -0.016760338097810745, 0.008611094206571579, -0.04552880674600601, -0.06597179919481277, -0.04623373970389366, 0.011363971047103405, -0.01801219768822193, 0.0181337371468544, -0.016675259917974472, -0.027030451223254204, 0.02016345225274563, 0.017088495194911957, 0.008301167748868465, -0.001099935150705278, 0.006690765731036663, -0.009388948790729046, -0.02975294180214405, -0.014791392721235752, 0.021354541182518005, -0.04936946555972099, -0.002482450334355235, -0.0070736161433160305, -0.04295216500759125, -0.03160034492611885, -0.012384905479848385, 0.024271497502923012, 0.028829239308834076, -0.01098112016916275, -0.03235389292240143, 0.028683392331004143, -0.024599654600024223, 0.002213543513789773, 0.007644853089004755, 0.002953417133539915, -0.012178287841379642, -0.024538883939385414, -0.0037859645672142506, 0.004664089530706406, -0.014560467563569546, 0.020795458927750587, 0.015666479244828224, 0.01801219768822193, -0.012688755057752132, -0.027346454560756683, 0.021670546382665634, 0.005809602327644825, 0.0279055368155241, 0.014293080195784569, 0.04008382558822632, 0.013721843250095844, -0.030360640957951546, -0.020637456327676773, 0.006945999339222908, 0.00774208502843976, 0.017866350710392, 0.02802707627415657, 0.003801156999543309, -0.047910988330841064, 0.030239101499319077, 0.014718469232320786, 0.003260304918512702, 0.02783261239528656, 0.03352067619562149, -0.010750195011496544, -0.019373442977666855, 0.011698205024003983, 0.013174913823604584, -0.022667171433568, -0.03898996487259865, 0.04253892973065376, 0.034176990389823914, -0.025450432673096657, 0.022958867251873016, -0.04161522537469864, -0.01040380634367466, -0.028318772092461586, -0.0225334782153368, -0.017866350710392, -0.03186773508787155, 0.016128331422805786, -0.03369083255529404, 0.0022500054910779, -0.001865635858848691, -0.0524565763771534, -0.04195553809404373, -0.024016262963414192, -0.011600973084568977, -0.019203288480639458, 0.030360640957951546, -0.00848955474793911, 0.028513235971331596, -0.009595566429197788, 0.04239308089017868, 0.019883910194039345, 0.014402465894818306, 0.0004614714125636965, 0.024405190721154213, -0.01781773380935192, 0.014840008690953255, 0.04042413458228111, 0.00571237038820982, 0.012591523118317127, 0.005405482370406389, -0.005493598524481058, -0.0272006057202816, 0.0134666096419096, 0.029315399006009102, -0.01098112016916275, -0.01755034551024437, -0.00571237038820982, 0.03439576178789139, 0.01960436813533306, 0.0487617664039135, 0.03006894513964653, 0.008532093837857246, 0.018814360722899437, 0.003916619811207056, 0.007796777877956629, -0.0325726643204689, 0.020187759771943092, 0.01426877174526453, 0.02591228485107422, 0.031381573528051376, -0.008659710176289082, 0.007377465721219778, 0.006478071212768555, 0.031260035932064056, -0.005852140951901674, -0.0027422416023910046, -0.007134385872632265, -0.04078875482082367, -0.025960899889469147, 0.0411047600209713, 0.012044593691825867, 0.01908174715936184, 0.007237694691866636, 0.016128331422805786, 0.012700908817350864, 0.021877164021134377, 0.004472664557397366, 0.0033089208882302046, -0.003907504491508007, -0.029193859547376633, 0.030603719875216484, 0.013819074258208275, -0.006970307324081659, 0.013259992003440857, -0.04256323724985123, -0.03646193817257881, 0.0476192906498909, 0.009133715182542801, -0.013272145763039589, -0.009917647577822208, -0.002734645502641797, 0.01113912183791399, 0.0012716101482510567, 0.043195243924856186, 0.0012655331520363688, -0.006013181526213884, 0.036996714770793915, 0.006216760724782944, 0.0032633435912430286, -0.007669161073863506, 0.020844073966145515, -0.010458499193191528, -0.01344230119138956, -0.010835273191332817, -0.03665640205144882, 0.004861591849476099, 0.0077603161334991455, 0.017975736409425735, -0.012409212999045849, -0.04591773450374603, 0.0012321097310632467, -0.0024110455997288227, -0.06339515745639801, 0.009437564760446548, 0.01966513879597187, -0.014536159113049507, -0.00020205990585964173, 0.0021527735516428947, -0.010300497524440289, 0.013782612979412079, -0.01458477508276701, -0.009844723157584667, -0.01477923896163702, 0.015739403665065765, 0.020904844626784325, 0.01819450780749321, -0.00379204167984426, -0.014961549080908298, -0.027783997356891632, -0.015581401996314526, -0.02834307961165905, -0.007748161908239126, 0.033739447593688965, 0.017538191750645638, 0.009559105150401592, 0.030360640957951546, -0.046501126140356064, 0.026325520128011703, -0.07209740579128265, 0.0003112558333668858, 0.016456488519906998, 0.015216782689094543, -0.020467301830649376, 0.00010834132990567014, -0.0308954156935215, 0.0033453828655183315, -0.01260367687791586, -0.008914943784475327, -0.006104336120188236, -0.010640809312462807, 0.008617171086370945, -0.01066511683166027, 0.06008927524089813, -0.005125940777361393, -0.02393118478357792, 0.003907504491508007, 0.01184405293315649, -0.04270908236503601, 0.009480103850364685, 0.06062404811382294, 0.0020175606478005648, -0.033617906272411346, -0.012099286541342735, 0.01775696501135826, 0.012664446607232094, 0.011771129444241524, 0.02444165199995041, 0.02586366795003414, 0.010324805974960327, -0.04035121202468872, 0.02637413516640663, 0.022946713492274284, 0.027054758742451668, 0.029072318226099014, -0.01634710282087326, -0.0026951448526233435, 0.015277552418410778, 0.014767085202038288, 0.010646886192262173, 0.0068305362947285175, 0.02445380762219429, 0.03082249127328396, -0.00034410954685881734, -0.0026419712230563164, 0.004229584708809853, -0.02904801070690155, -0.026957526803016663, 0.012251211330294609, -0.008465246297419071, -0.016954801976680756, -0.002608547918498516, -0.010452422313392162, 0.012469982728362083, -0.009309948422014713, -0.010185034945607185, -0.026471367105841637, -0.016140485182404518, 0.03167327120900154, -0.030433565378189087, -0.02994740568101406, 0.0016574990004301071, -0.006806228309869766, 2.0379280613269657e-05, 0.02067391946911812, 0.037823185324668884, -0.02943693846464157, -0.019932527095079422, -0.012846756726503372, -0.01260367687791586, 0.06480501592159271, 0.025499049574136734, -0.011929131112992764, 0.0006942960899323225, -0.004381509497761726, 0.020455148071050644, 0.013503070920705795, 0.0033119593281298876, -0.010555731132626534, -0.0037069637328386307, -0.03429853171110153, -0.022703634575009346, 0.035975780338048935, -0.01110873743891716, 0.02190147154033184, 0.007298464886844158, 0.0014835451729595661, -0.04168814793229103, 0.0052414038218557835, -0.036534860730171204, -0.013733997009694576, 0.01903313212096691, 0.02810000069439411, 0.016359256580471992, -0.005718447268009186, -0.02936401404440403, -0.00016028060053940862, -0.02125731110572815, -0.007815008983016014, 0.045334342867136, -0.008058088831603527, -0.0027589532546699047, 0.013381531462073326, 0.018170200288295746, 0.03223235532641411, 0.009170177392661572, 0.002772626467049122, 0.028440311551094055, 0.02035791613161564, -0.024210726842284203, 0.006013181526213884, 0.01628633216023445, 0.05294273421168327, 0.016237717121839523, 0.016881877556443214, -0.007025000173598528, 0.0061316825449466705, -0.05644308030605316, 0.012858910486102104, -0.014013538137078285, -0.011795436963438988, -0.011540203355252743, 0.01560570951551199, 0.01308983564376831, 0.015046626329421997, 0.02119654044508934, -0.00989333912730217, 0.015800172463059425, -0.012263365089893341, -0.0022727942559868097, 0.014147232286632061, 0.015386938117444515, -0.05746401473879814, 0.02035791613161564, -0.03592716529965401, 0.014098616316914558, -0.019178979098796844, -0.022582093253731728, -0.0011455125641077757, 0.001167541602626443, -0.0018139814492315054, -0.01541124563664198, 0.0038254649844020605, -0.039549048990011215, -0.010057417675852776, 0.02637413516640663, -0.04501834139227867, -0.002332044765353203, 0.01474277675151825, 0.019762370735406876, -0.024016262963414192, -0.04180968925356865, 0.022484861314296722, -0.01838897168636322, 0.006478071212768555, -0.009759645909070969, -0.01311414409428835, -0.01685757003724575, -0.015800172463059425, 0.0120385168120265, -0.004855514969676733, 0.013478763401508331, 0.0382850356400013, -0.0011006947606801987, -0.03084680065512657, 0.009358564391732216, -0.012627984397113323, -0.013503070920705795, -0.03327759727835655, -0.03186773508787155, -0.011667820625007153, -0.019434213638305664, 0.022837327793240547, 0.008568555116653442, -0.002883531618863344, -0.013806920498609543, -0.025499049574136734, -0.026908909901976585, 0.005548291839659214, 0.018923746421933174, 0.006538840942084789, 0.017015570774674416, -0.011114814318716526, 0.008544247597455978, -0.012664446607232094, 0.0017182688461616635, -0.012378828600049019, 0.04263615980744362, -0.01864420436322689, 0.005229249596595764, 0.005706293508410454, -0.006544917821884155, -0.018145890906453133, 0.023153331130743027, -0.0112667391076684, 0.007571929134428501, -0.004153622314333916, -0.009607721120119095, 0.015058781020343304, 0.00961379799991846, 0.010774502530694008, -0.021354541182518005, -0.023919031023979187, -0.008641479536890984, -0.0047278981655836105, 0.004594204481691122, 0.009899416007101536, 0.016298485919833183, -0.020795458927750587, 0.008124935440719128, -0.008282937109470367, -0.0056880624033510685, -0.014438928104937077, 0.0003412609512452036, 0.010798810981214046, 0.015520632266998291, -0.006031412165611982, 0.0029701287858188152, 0.007091847248375416, -0.005800486542284489, 0.02131807990372181, -0.009474026970565319, 0.014402465894818306, -0.011005428619682789, -0.0024277574848383665, 0.00014309411926660687, 0.008866327814757824, 0.02355441264808178, 0.01235452014952898, 0.010519268922507763, 0.006611764896661043, 0.017161419615149498, -0.01375830452889204, 0.005150248762220144, 0.030628029257059097, 0.04122629761695862, -0.01787850446999073, 0.027419377118349075, 0.0035033845342695713, 0.010975043289363384, 0.0063929930329322815, 0.0032663820311427116, 0.028902163729071617, 0.007134385872632265, 0.029266782104969025, 0.008866327814757824, 7.206929876701906e-05, -0.014025692827999592, -0.03531946614384651, -0.006083066575229168, 0.0033423444256186485, 0.05182456970214844, 0.0005940257688052952, -0.007571929134428501, 0.023408563807606697, 0.009692798368632793, -0.012232980690896511, -0.026787370443344116, -0.01407430786639452, 0.02419857308268547, 0.018607743084430695, -0.0012009651400148869, 0.033933911472558975, 0.04499403387308121, 0.054109517484903336, 0.0010361267486587167, -0.008708326146006584, -0.0012047631898894906, -0.003006590763106942, -0.012725216336548328, 0.006326146423816681, 0.0030293792951852083, 0.029971713200211525, 0.007845393382012844, 0.028829239308834076, 0.022509170696139336, 0.013174913823604584, 0.0009290198213420808, 0.016833262518048286, -0.013041219674050808, 0.0031904196366667747, -0.024174265563488007, -0.0314301922917366, 0.016565874218940735, 0.02489135041832924, -0.011631358414888382, -0.02272794209420681, 0.009182331152260303, 0.009923724457621574, -0.004925400018692017, -0.026325520128011703, 0.027151990681886673, -0.05143564194440842, 0.0027680688071995974, 0.008447015658020973, 0.001719788066111505, -0.01908174715936184, 0.014244464226067066, 0.035538237541913986, 0.0030339371878653765, 0.013782612979412079, -0.018218815326690674, -0.002529547084122896, 0.047789447009563446, -0.0012419847771525383, 0.017696194350719452, -0.027783997356891632, -0.0013118701754137874, 0.006295761559158564, -0.0017911926843225956, -0.03337482735514641, 0.016772491857409477, -0.013515225611627102, 0.004123237449675798, -0.033156055957078934, 0.025012889876961708, -0.004117160569876432, 0.0013870729599148035, 0.006417301017791033, 0.006976384203881025, 0.017453115433454514, -0.058193255215883255, 0.011941284872591496, 0.01516816671937704, -0.01411077007651329, 0.007930471561849117, -0.012883218005299568, 0.013478763401508331, -0.005335596855729818, -0.032524049282073975, -0.005654639098793268, -0.02126946486532688, 0.014888624660670757, 0.005378135945647955, 0.004861591849476099, 0.024295805022120476, -0.0009502892498858273, 0.013697534799575806, 0.003552000503987074, -0.004785629455000162, 0.011333585716784, 0.061061594635248184, 0.002985321218147874, 0.02286163531243801, -0.005378135945647955, -0.01609186828136444, 0.0068001514300704, 0.008623248897492886, -0.0164200272411108, -0.036364708095788956, -0.006842690519988537, 0.00964418239891529, -0.005071247927844524, 0.007268079556524754, -0.002406487939879298, -0.02177993208169937, -0.007365311495959759, -0.0061225672252476215, 0.04691436141729355, 0.005132017657160759, 0.00903040636330843, -0.007571929134428501, -0.04317093640565872, 0.02968001738190651, 0.03502776846289635, 0.02865908294916153, 0.014220155775547028, -0.027540918439626694, -0.006848767399787903, -0.03651055321097374, 0.007128308992832899, -0.023603027686476707, 0.027662457898259163, -0.02515873685479164, -0.019968988373875618, -0.01756250113248825, -0.005332558415830135, -0.026714447885751724, 0.026738755404949188, -0.0157150961458683, -0.012871064245700836, 0.03779887780547142, 0.004211354069411755, -0.013819074258208275, 0.009607721120119095, 0.01525324396789074, -0.03563546761870384, -0.01660233549773693, -0.010099956765770912, 0.0056941392831504345, -0.004503049422055483, 0.016164792701601982, 0.022618556395173073, 0.014329541474580765, -0.011916977353394032, 0.009431487880647182, 0.02617967128753662, 0.012943987734615803, 0.027346454560756683, -0.003962197341024876, -0.01903313212096691, -0.019045285880565643]
metadata : {"source": "pydantic_ai_docs", "crawled_at": "2025-03-15T11:17:26.516401", "url_path": "/api/models/anthropic/", "chunk_size": 5000}
updated_dt: 2025-03-15T11:17:26.516401
---
```
@dataclass(init=False)
classAnthropicModel(Model):
"""A model that uses the Anthropic API.
  Internally, this uses the [Anthropic Python client](https://github.com/anthropics/anthropic-sdk-python) to interact with the API.
  Apart from `__init__`, all methods are private or match those of the base class.
  !!! note
    The `AnthropicModel` class does not yet support streaming responses.
    We anticipate adding support for streaming responses in a near-term future release.
  """
  client: AsyncAnthropic = field(repr=False)
  _model_name: AnthropicModelName = field(repr=False)
  _system: str | None = field(default='anthropic', repr=False)
  def__init__(
    self,
    model_name: AnthropicModelName,
    *,
    api_key: str | None = None,
    anthropic_client: AsyncAnthropic | None = None,
    http_client: AsyncHTTPClient | None = None,
  ):
"""Initialize an Anthropic model.
    Args:
      model_name: The name of the Anthropic model to use. List of model names available
        [here](https://docs.anthropic.com/en/docs/about-claude/models).
      api_key: The API key to use for authentication, if not provided, the `ANTHROPIC_API_KEY` environment variable
        will be used if available.
      anthropic_client: An existing
        [`AsyncAnthropic`](https://github.com/anthropics/anthropic-sdk-python?tab=readme-ov-file#async-usage)
        client to use, if provided, `api_key` and `http_client` must be `None`.
      http_client: An existing `httpx.AsyncClient` to use for making HTTP requests.
    """
    self._model_name = model_name
    if anthropic_client is not None:
      assert http_client is None, 'Cannot provide both `anthropic_client` and `http_client`'
      assert api_key is None, 'Cannot provide both `anthropic_client` and `api_key`'
      self.client = anthropic_client
    elif http_client is not None:
      self.client = AsyncAnthropic(api_key=api_key, http_client=http_client)
    else:
      self.client = AsyncAnthropic(api_key=api_key, http_client=cached_async_http_client())
  @property
  defbase_url(self) -> str:
    return str(self.client.base_url)
  async defrequest(
    self,
    messages: list[ModelMessage],
    model_settings: ModelSettings | None,
    model_request_parameters: ModelRequestParameters,
  ) -> tuple[ModelResponse, usage.Usage]:
    check_allow_model_requests()
    response = await self._messages_create(
      messages, False, cast(AnthropicModelSettings, model_settings or {}), model_request_parameters
    )
    return self._process_response(response), _map_usage(response)
  @asynccontextmanager
  async defrequest_stream(
    self,
    messages: list[ModelMessage],
    model_settings: ModelSettings | None,
    model_request_parameters: ModelRequestParameters,
  ) -> AsyncIterator[StreamedResponse]:
    check_allow_model_requests()
    response = await self._messages_create(
      messages, True, cast(AnthropicModelSettings, model_settings or {}), model_request_parameters
    )
    async with response:
      yield await self._process_streamed_response(response)
  @property
  defmodel_name(self) -> AnthropicModelName:
"""The model name."""
    return self._model_name
  @property
  defsystem(self) -> str | None:
"""The system / model provider."""
    return self._system
  @overload
  async def_messages_create(
    self,
    messages: list[ModelMessage],
    stream: Literal[True],
    model_settings: AnthropicModelSettings,
    model_request_parameters: ModelRequestParameters,
  ) -> AsyncStream[RawMessageStreamEvent]:
    pass
  @overload
  async def_messages_create(
    self,
    messages: list[ModelMessage],
    stream: Literal[False],
    model_settings: AnthropicModelSettings,
    model_request_parameters: ModelRequestParameters,
  ) -> AnthropicMessage:
    pass
  async def_messages_create(
    self,
    messages: list[ModelMessage],
    stream: bool,
    model_settings: AnthropicModelSettings,
    model_request_parameters: ModelRequestParameters,
  ) -> AnthropicMessage | AsyncStream[RawMessageStreamEvent]:
    # standalone function to make it easier to override
    tools = self._get_tools(model_request_parameters)
    tool_choice: ToolChoiceParam | None
    if not tools:
      tool_choice = None
    else:
      if not model_request_parameters.allow_text_result:
        tool_choice = {'type': 'any'}
      else:
        tool_choice = {'type': 'auto'}
      if (allow_parallel_tool_calls := model_settings.get('parallel_tool_calls')) is not None:
        tool_choice['disable_parallel_tool_use'] = not allow_parallel_tool_calls
    system_prompt, anthropic_messages = await self._map_message(messages)
    try:
      return await self.client.messages.create(
        max_tokens=model_settings.get('max_tokens', 1024),
        system=system_prompt or NOT_GIVEN,
        messages=anthropic_messages,
        model=self._model_name,
        tools=tools or NOT_GIVEN,
        tool_choice=tool_choice or NOT_GIVEN,
        stream=stream,
        temperature=model_settings.get('temperatu