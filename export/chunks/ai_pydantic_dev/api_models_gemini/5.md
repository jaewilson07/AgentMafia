---
url: https://ai.pydantic.dev/api/models/gemini/
session_id: pydantic_ai_docs
chunk_number: 5
title: Processing Parts in Gemini Model
summary: This chunk describes the processing of different parts of a message in the Gemini model, distinguishing between system prompts, user prompts, tool returns, and retry prompts. Each part type is handled appropriately, with responses being constructed or transformed into the necessary format for further processing.
embedding: [-0.032324064522981644, 0.006339123472571373, 0.04366344213485718, -0.0046723708510398865, -0.015192036516964436, -0.022460170090198517, -0.006079547107219696, 0.0010827057994902134, 0.018498217687010765, -0.0056013804860413074, -0.030739283189177513, -0.029318444430828094, 0.04593132063746452, -0.06677938252687454, -0.028061550110578537, -0.03461926430463791, -0.031340405344963074, 0.011605787090957165, -0.02019229345023632, 0.059292662888765335, 0.06617826223373413, 0.0222142543643713, 0.012657753191888332, -0.0009486484341323376, -0.0206021498888731, -0.0006672986201010644, -0.021749749779701233, 0.027856621891260147, -0.008846082724630833, -0.02961900644004345, 0.03202350065112114, -0.027460426092147827, 0.019577506929636, -0.02177707478404045, -0.04800792783498764, 0.00299878790974617, 0.016271326690912247, 0.028252815827727318, 0.00634595425799489, 0.016312312334775925, -0.01601175032556057, -0.054319728165864944, 0.013532115146517754, 0.03434602543711662, -0.031094493344426155, 0.03740629181265831, -0.018511880189180374, 0.025137903168797493, 0.024249879643321037, -0.011742406524717808, -0.008586506359279156, 0.03614939749240875, 0.006407432723790407, 0.038116712123155594, 0.0008406339911743999, -0.062079690396785736, -0.025561422109603882, 0.010868044570088387, -0.05380057543516159, -0.007274963427335024, 0.012411839328706264, -0.009460868313908577, -0.021326230838894844, 0.038909099996089935, 0.005345219746232033, -0.004037092439830303, -0.025288183242082596, 0.007035880349576473, -0.04314429312944412, 0.00660553015768528, -0.00949502270668745, 0.007172499317675829, -0.026722682639956474, -0.0488276444375515, -0.013620917685329914, -0.0016257665120065212, -0.04735215753316879, 0.06421094387769699, 0.0203835591673851, -0.027638031169772148, -0.01370288897305727, -0.011544308625161648, 0.0012133477721363306, -0.027296483516693115, -0.050876930356025696, 0.0019007123773917556, -0.06098673865199089, 0.0023515550419688225, -0.010676777921617031, -0.03994740545749664, -0.03344434127211571, -0.03795276954770088, -0.026517754420638084, 0.0620250403881073, 0.05276226997375488, 0.01500076986849308, -0.014140070416033268, 0.007035880349576473, -0.009877556003630161, 0.018061036244034767, 0.05254368111491203, -0.03338969126343727, -0.08891166746616364, 0.02317058853805065, 0.059729840606451035, -0.015506260097026825, 0.004276175983250141, -0.017159350216388702, -0.04819919541478157, -0.0044503649696707726, -0.09372065961360931, 0.01560189388692379, 0.01817033253610134, -0.02640845999121666, -0.026872964575886726, -0.01489147450774908, -0.03483785316348076, -0.02041088417172432, -0.021162288263440132, -0.054920852184295654, -0.061478566378355026, -0.04475639760494232, 0.025315506383776665, -0.033717576414346695, -0.0054818387143313885, 0.005331557709723711, -0.002462558215484023, -0.05852759629487991, -0.08617928624153137, -0.001967314165085554, 0.001958775334060192, -0.001861434313468635, 0.010970508679747581, -0.0017811707220971584, -0.026080572977662086, -0.02621719241142273, -0.04623188078403473, 0.036504607647657394, -0.028881264850497246, 0.04497498646378517, -0.0010229350300505757, -0.011721912771463394, -0.010963677428662777, 0.020123984664678574, 0.00014996073150541633, -0.0036135734990239143, -0.06355517357587814, 0.021271584555506706, -0.07071401178836823, 0.008866575546562672, -0.015724850818514824, -0.009973189793527126, -0.00862066075205803, 0.0077531300485134125, -0.010089315474033356, 0.007090528029948473, -0.0010861213086172938, 0.05522141233086586, 0.013040286488831043, -0.01982342265546322, -0.011469167657196522, 0.02061581239104271, -0.042297251522541046, -0.0035930806770920753, -0.05563127249479294, 0.018949059769511223, -0.0012842189753428102, -0.002621377818286419, -0.06360982358455658, -0.07295456528663635, -0.01582048460841179, -0.03276124596595764, -0.06426559388637543, 0.020342573523521423, 0.0062708137556910515, -0.039100367575883865, -0.007582356687635183, -0.02479635551571846, -0.05983913689851761, -0.021531159058213234, -0.005485254339873791, 0.01420838013291359, -0.0583636537194252, -0.036286015063524246, -0.05022115632891655, 0.004539167508482933, 0.010137132368981838, 0.033908843994140625, 0.018033713102340698, 0.004276175983250141, 0.028853939846158028, 0.017118364572525024, 0.059729840606451035, 0.005922435317188501, -0.012534796260297298, -0.02401762641966343, 0.06705262511968613, -0.05240706354379654, 0.016749493777751923, 0.06929317116737366, 0.00991854164749384, 0.036668550223112106, 0.023088617250323296, -0.009317418560385704, 0.0070017254911363125, -0.04005670174956322, -0.015355980023741722, 0.033307719975709915, -0.009617979638278484, 0.003290811087936163, 0.0232388973236084, -0.009474529884755611, 0.027883945032954216, 0.024851001799106598, -0.023102279752492905, 0.03164096921682358, -0.036504607647657394, -0.012753386981785297, 0.022842703387141228, 0.013846339657902718, -0.019659480080008507, 0.04964735731482506, 0.04186007380485535, -0.041095007210969925, 0.002097102114930749, 0.04377273842692375, 0.00980924628674984, -0.041532184928655624, -0.02101200819015503, 0.027870282530784607, -0.0035111091565340757, 0.02218693122267723, -0.006294722203165293, -0.0027375039644539356, 0.012616767548024654, -0.06076814606785774, 0.03716037794947624, -0.009358404204249382, 0.043909359723329544, 0.0005656881839968264, 0.013941972516477108, -0.0013286201283335686, -0.016735831275582314, -0.003818501951172948, 0.07443004846572876, 0.011523815803229809, -0.009139813482761383, -0.042488519102334976, 0.009296925738453865, 0.033280398696660995, 0.03677784278988838, -0.008040030486881733, 0.01982342265546322, 0.028853939846158028, -0.012377684935927391, 0.036914464086294174, -0.010929523035883904, 0.036094747483730316, -0.023471150547266006, -0.037324320524930954, -0.006977817043662071, 0.039127692580223083, -0.031531672924757004, 0.007466230075806379, 0.003220793791115284, -0.0186211746186018, -0.042488519102334976, -0.024058612063527107, 0.005013918504118919, -0.03778882697224617, 0.03273392096161842, -0.030110836029052734, 0.048718348145484924, -0.026941273361444473, -0.04538484290242195, -0.020492855459451675, 0.013361341319978237, 0.02699592150747776, 0.013914648443460464, 0.00848404224961996, -0.02520621195435524, -0.014754856005311012, -0.032843217253685, 0.012480149045586586, -0.03385419771075249, 0.017719488590955734, 0.03735164552927017, 0.002809228841215372, -0.02000102587044239, -0.01468654628843069, 0.03961952030658722, 0.0035452640149742365, 0.03139505535364151, -0.028170844539999962, -0.005218847189098597, 0.004487935453653336, 0.019864408299326897, -0.016722170636057854, 0.0022610449232161045, 0.023129602894186974, 0.025889307260513306, 0.011031987145543098, -0.0015497722197324038, -0.0058097243309021, -0.030083511024713516, 0.0027153033297508955, 0.03967416658997536, -0.02139454148709774, -0.0027699510101228952, -0.009153475053608418, 0.01601175032556057, 0.01799272745847702, -0.013778029941022396, -0.027542397379875183, -0.015342317521572113, -0.020301587879657745, -0.014344998635351658, -0.026681696996092796, 0.0067011634819209576, -0.025083255022764206, -0.04877299442887306, -0.01736428029835224, -0.03366293013095856, -0.007841932587325573, -0.018033713102340698, 0.021121302619576454, 0.0152876703068614, -0.061096031218767166, -0.014071760699152946, 0.0001573253539390862, 0.0037672698963433504, -0.07022218406200409, -0.0033369199372828007, 0.020315250381827354, 0.03795276954770088, -0.008081016130745411, 0.0004290691576898098, 0.002974879462271929, 0.012958315201103687, 0.049319472163915634, -0.0620250403881073, -0.008934885263442993, -0.037078406661748886, 0.012138601392507553, -0.03483785316348076, -0.006103455554693937, 0.012261558324098587, 0.043909359723329544, -0.010533327236771584, 0.03997473046183586, 0.033498987555503845, 0.0216267928481102, 0.009816077537834644, 0.030493369325995445, -0.0307939313352108, -0.03117646463215351, 0.022145945578813553, -0.0002813498140312731, -0.020014688372612, 0.011161775328218937, -0.06415630131959915, 0.006427925545722246, 0.022323550656437874, -0.013921479694545269, -0.0015463567106053233, 0.03923698514699936, -0.003798009129241109, -0.031313084065914154, -0.024673398584127426, 0.013737044297158718, 0.042707111686468124, 0.018853425979614258, -0.06896528601646423, 0.0029526788275688887, -0.013067610561847687, -0.03038407303392887, -0.023758050054311752, 0.010628961026668549, 0.008081016130745411, -0.008934885263442993, 0.06175180524587631, -0.04519357532262802, -0.044701747596263885, -0.007473061326891184, -0.014181056059896946, -0.014850488863885403, 0.0152876703068614, 0.000669433269649744, -0.049893271178007126, 0.014864151366055012, 0.03661390021443367, -0.046914976090192795, -0.012172755785286427, -0.013238384388387203, 0.020520178601145744, 0.04803525283932686, -0.006707994733005762, 0.042871054261922836, 0.03617671877145767, 0.014754856005311012, 0.03259730339050293, -0.006947077810764313, 0.013354511000216007, 0.006629438605159521, 0.011920010671019554, -0.025739027187228203, 0.03781614825129509, 0.023758050054311752, 0.005901942495256662, -0.023061292245984077, 0.06825487315654755, -0.0412042997777462, 0.010724593885242939, -0.01579315960407257, -0.009904880076646805, -0.04180542379617691, 0.04459245130419731, -0.008333761245012283, 0.02442748285830021, 0.04535751789808273, -0.030657311901450157, -0.07530441135168076, -0.014181056059896946, -0.03221476823091507, -0.015615555457770824, 0.02138087898492813, 0.017897093668580055, -0.01717301271855831, 0.02620353177189827, -0.054292403161525726, -0.0008346569375135005, 0.013170074671506882, 0.04240654781460762, 0.005874618422240019, 0.002223474904894829, -0.02321157418191433, -0.01938624121248722, 0.03306180611252785, -0.025875644758343697, 0.020069336518645287, 0.031722940504550934, -0.027446763589978218, -0.036094747483730316, 0.036067426204681396, 0.0029321860056370497, -0.011831208132207394, 0.0013499668566510081, -0.00991854164749384, 0.010745086707174778, -0.07896580547094345, 0.0028946157544851303, 0.01636696048080921, 0.003359120571985841, 0.012029306031763554, -0.0022337213158607483, -0.04773469269275665, 0.061533212661743164, 0.017323292791843414, 0.04481104388833046, -0.03997473046183586, 0.05423775687813759, 0.003917550668120384, -0.011277901008725166, 0.0015463567106053233, -0.011899517849087715, -0.016640199348330498, -0.03333504498004913, 0.02521987445652485, 0.023949317634105682, 0.01038987748324871, -0.0013380126329138875, -0.012220572680234909, 0.011353041976690292, 0.017500897869467735, -0.04005670174956322, -0.007520877756178379, -0.013060780242085457, 0.023867346346378326, 0.004563075955957174, -0.013641410507261753, 0.005864372011274099, 0.019140327349305153, -0.009208123199641705, 0.018347935751080513, -0.02942774072289467, 0.13137286901474, -0.0013149582082405686, -0.0016633367631584406, -0.008661646395921707, -0.011353041976690292, 0.015615555457770824, -0.006284475792199373, -0.01450894121080637, -0.017856108024716377, 0.0483904629945755, 0.0032310402020812035, 0.007841932587325573, -0.04716088995337486, -0.029673654586076736, -0.025520436465740204, -0.02956436015665531, -0.004805574659258127, -0.046122584491968155, -0.0011612618109211326, -0.005027580540627241, -0.0015753882471472025, -0.01101149432361126, 0.007527709007263184, -0.022651435807347298, 0.014536265283823013, -0.08169818669557571, -0.0006382670835591853, 0.01763751730322838, 0.010601636953651905, -0.02277439273893833, 0.018443569540977478, 0.003483785316348076, 0.02258312702178955, 0.0037911783438175917, -0.007718975655734539, -0.003268610453233123, 0.013040286488831043, -0.020848065614700317, -0.030739283189177513, 0.005509162787348032, -0.005116383079439402, -0.013142751529812813, -0.029345769435167313, -0.02344382554292679, -0.006219581700861454, 0.04557611048221588, -0.014850488863885403, 0.006813874468207359, -0.0023857099004089832, -0.017719488590955734, 0.024632412940263748, 0.011421351693570614, -0.012254727073013783, 0.002628208603709936, -0.032843217253685, -0.03735164552927017, 0.02322523668408394, 0.0017487236764281988, 0.011448674835264683, -0.00038701610174030066, 0.06470277160406113, -0.0008598460699431598, 0.00781460851430893, 0.00014024798292666674, 0.006373277865350246, 0.06022167205810547, -0.060112375766038895, 0.02863534912467003, -0.05705210939049721, 0.031094493344426155, -0.007466230075806379, 2.157353264919948e-05, 0.0072408090345561504, -0.01420838013291359, 0.009351572953164577, -0.01289683673530817, -0.011981489136815071, 0.03920966386795044, 0.03338969126343727, -0.049510739743709564, 0.014727531932294369, 0.016052735969424248, -0.01897638477385044, -0.03041139803826809, -0.015533584170043468, 0.007561863400042057, 0.017883431166410446, 0.014809503220021725, 0.0013926603132858872, 0.006028315052390099, -0.030903225764632225, -0.021859046071767807, 0.0003637481713667512, -0.03399081528186798, 0.00991171132773161, -0.011353041976690292, -0.015588232316076756, -0.0015941733727231622, 0.02317058853805065, -0.017309632152318954, 0.021353555843234062, 0.0034547538962215185, -0.0038765650242567062, -0.0062127504497766495, 0.0035418483894318342, 0.02460508793592453, -0.013839508406817913, 0.01179705373942852, -0.003089298028498888, -0.010772410780191422, -0.02139454148709774, 0.011277901008725166, 0.01119592972099781, -0.05281691998243332, 0.03685981407761574, 0.03702376037836075, 0.0001274399401154369, -0.01659921370446682, 0.043936681002378464, -0.006889014970511198, -0.025315506383776665, 0.0012124939821660519, 0.012254727073013783, -0.05538535863161087, 0.009419882670044899, 0.028908587992191315, 0.022309888154268265, -0.012773879803717136, -0.021941017359495163, 0.021941017359495163, -0.007596018258482218, -0.0012765341671183705, -0.007657496724277735, 0.052297767251729965, 0.003313011722639203, 0.017282307147979736, 0.016339637339115143, -0.001508786459453404, 0.014331337064504623, 0.011626279912889004, 0.0027409193571656942, 0.010888537392020226, -0.028116198256611824, -0.009747767820954323, 0.04125894978642464, -0.01662653684616089, 0.010929523035883904, 0.04754342511296272, 0.006591868586838245, -0.026299163699150085, 0.022747069597244263, 0.022159608080983162, -0.01703639328479767, -0.004607476759701967, -0.025260860100388527, -0.018347935751080513, 0.005611626897007227, 0.0018272795714437962, -0.03858121484518051, 0.019905393943190575, -0.00028946157544851303, -0.03420940786600113, 0.03002886474132538, 0.019659480080008507, -0.020725106820464134, 0.025137903168797493, -0.01778779923915863, 0.013368172571063042, -0.005488669965416193, 0.014809503220021725, -0.00821080431342125, -0.019304269924759865, -0.003637481713667512, -0.002677733078598976, 0.008203973062336445, -0.04166880622506142, 0.0022012742701917887, -0.024891987442970276, -0.000251677876804024, 0.00045126976328901947, 0.04057585448026657, 0.04027529060840607, -0.005823386367410421, 0.021640455350279808, 0.0372423492372036, 0.019946379587054253, 0.07311850786209106, 0.026135221123695374, -0.012794372625648975, 0.01041037030518055, -0.01110029686242342, 0.009973189793527126, -0.04620455950498581, -0.02758338302373886, 0.004457196220755577, -0.0019792683888226748, -0.011004663072526455, -0.08688970655202866, 0.03524770960211754, 0.06279011070728302, -0.03642263635993004, 0.013866832479834557, -0.012582613155245781, 0.013579932041466236, 0.03336236998438835, 0.012671415694057941, -0.02340283989906311, -0.00680362805724144, -0.018470892682671547, 0.009863894432783127, 0.022460170090198517, 0.01500076986849308, 0.022364536300301552, 0.014577250927686691, -0.02418156899511814, -0.015328655950725079, 0.006062469910830259, -0.009283263236284256, 0.0076711587607860565, -0.04027529060840607, -0.01617569290101528, -0.017692165449261665, 0.0040405080653727055, 0.015847807750105858, -0.03699643537402153, -0.04420991986989975, -0.011940503492951393, 0.01677681691944599, -0.006526974495500326, -0.021367216482758522, 0.021558484062552452, -0.009454037062823772, 0.02139454148709774, 0.0031541918870061636, 0.0007710437057539821, -0.028881264850497246, 0.029509712010622025, -0.017309632152318954, -0.0022012742701917887, -0.010526496917009354, -0.0423792265355587, 0.009583825245499611, 0.03062998689711094, -0.023853683844208717, -0.008559182286262512, 0.005328142549842596, -0.0004627969756256789, -0.0011450382880866528, -0.003046604571864009, -0.02642212063074112, -0.013135920278728008, -0.024755369871854782, -0.0033488741610199213, 0.013832677155733109, 0.004088324494659901, -0.012364022433757782, -0.03778882697224617, -0.0072203162126243114, 0.03661390021443367, -0.026080572977662086, -0.0001796326832845807, -0.01901737041771412, 0.06038561463356018, -0.02159946970641613, 0.01011663954705, -0.026094235479831696, 0.01060846820473671, 0.032679274678230286, -0.019113002344965935, 0.01658555120229721, -0.008313268423080444, -0.006308383774012327, 0.0005699575413018465, -0.05095890164375305, 0.038499243557453156, 0.02838943526148796, -0.0019468212267383933, -0.008627492003142834, 0.024482131004333496, -0.00790341105312109, -0.028444083407521248, 0.03038407303392887, 0.0170090701431036, 0.004289837554097176, -0.03644995763897896, 0.015588232316076756, -0.016530903056263924, -0.005697013810276985, 0.017446251586079597, 0.048691023141145706, -0.029728302732110023, -0.01500076986849308, -0.01430401299148798, -0.018347935751080513, 0.003890227060765028, -0.0006651639123447239, 0.014426969923079014, -0.02381269820034504, -0.0230203066021204, 0.02658606506884098, -0.013976126909255981, -0.05016651004552841, -0.017719488590955734, -0.019085679203271866, -0.012138601392507553, -0.03161364421248436, -0.004740680567920208, -0.020069336518645287, -0.012685077264904976, 0.012930992059409618, -0.004586983937770128, 0.029455063864588737, -0.09781923145055771, -0.03259730339050293, 0.028143521398305893, 0.001314104301854968, 0.03718770295381546, -0.017254984006285667, 0.0033488741610199213, 0.02102566882967949, -0.005024164915084839, -0.00870946329087019, 0.028444083407521248, -0.01511006522923708, -0.02317058853805065, 0.015560908243060112, 0.06044026091694832, -0.007254470605403185, 0.008770941756665707, -0.009317418560385704, 0.015369641594588757, -0.04180542379617691, -0.025875644758343697, 0.016694845631718636, -0.007336442358791828, -0.0015079325530678034, -0.0053178961388766766, -0.023266222327947617, 0.01069727074354887, 0.014058099128305912, -0.007213484961539507, -0.011988320387899876, -0.031531672924757004, 0.021859046071767807, 0.019113002344965935, 0.01148283015936613, -0.031504347920417786, 0.0539645180106163, -0.005082228220999241, -0.002404494909569621, 0.048308491706848145, 0.003661390161141753, 0.024441145360469818, -0.02437283657491207, 0.01260310597717762, 0.037105731666088104, 0.008695801720023155, 0.026927612721920013, -0.017869770526885986, -0.01878511719405651, -0.009857063181698322, 0.03377222642302513, -0.014823165722191334, 0.03426405414938927, -0.0178151223808527, 0.0005605649785138667, 0.014700207859277725, 0.031914208084344864, -0.034291379153728485, 0.004221528302878141, 0.0224328450858593, 0.017692165449261665, -0.009214953519403934, -0.012575781904160976, 0.006636269856244326, 0.0018665575189515948, -0.027323806658387184, -0.0016232049092650414, -0.015028093941509724, 0.0027904438320547342, -0.03281589224934578, 0.015888793393969536, -0.027528734877705574, 0.006496235262602568, -0.021654117852449417, -0.02179073542356491, 0.006274229381233454, 0.014481618069112301, 0.00122359418310225, 0.03461926430463791, -0.008183480240404606, 0.01419471763074398, 0.02296566031873226, -0.01319056749343872, 0.04024796932935715, 0.04800792783498764, -0.058910127729177475, -0.013668734580278397, -0.0016932222060859203, -0.009850232861936092, 0.008559182286262512, 0.022747069597244263, 0.01618935540318489, 0.0025564837269484997, -0.006865106523036957, -0.028280140832066536, -0.02019229345023632, -0.005587718449532986, -0.020287927240133286, 0.01170825120061636, -0.0012389639159664512, -0.015697527676820755, 0.041887395083904266, 0.02720084972679615, -0.016927098855376244, 0.0009016856201924384, 0.006458664778620005, -0.023115940392017365, 0.005686767399311066, 0.017254984006285667, 0.013525284826755524, 0.015752173960208893, 0.0167904794216156, 0.024509454146027565, -0.008784604258835316, 0.007370596751570702, -0.021080316975712776, -0.010601636953651905, 0.06634220480918884, -0.011380366049706936, 0.005512577947229147, 0.007999044843018055, -0.00715200649574399, 0.03278856724500656, 0.0335809588432312, 0.005690183024853468, -0.019755112007260323, -0.02239185944199562, 0.004467442631721497, 0.02019229345023632, -0.0004820090252906084, 0.002725549740716815, 0.024687059223651886, 0.004166880622506142, -0.010710932314395905, -0.008566013537347317, -0.0172276608645916, 0.003716037841513753, 0.0006557713495567441, -0.009706782177090645, -0.04478371888399124, -0.02761070616543293, -0.0076506659388542175, 0.008176648989319801, 0.0351930633187294, -0.019536521285772324, -0.028034226968884468, 0.004323992412537336, 0.045521464198827744, 0.013778029941022396, 0.02822549268603325, -0.04664173722267151, -0.019044693559408188, -0.01963215507566929, 0.010458187200129032, 0.006824120879173279, -0.0012406716123223305, -0.003053435357287526, -0.019468212500214577, -0.04303499683737755, -0.04136824235320091, 0.007438906468451023, 0.011339379474520683, 0.03858121484518051, -0.007268132641911507, -0.011756068095564842, 0.010820227675139904, -0.05057636648416519, -0.021708764135837555, -0.017733151093125343, -0.02360776998102665, 0.02498762123286724, -0.023703401908278465, -0.006322045810520649, 0.021039331331849098, -0.015096403658390045, 0.0067797196097671986, 0.03022013045847416, 0.008975870907306671, -0.030657311901450157, -0.007076865993440151, 0.03472856059670448, -0.03879980742931366, 0.02582099847495556, 0.003910719882696867, 0.027255497872829437, 0.07022218406200409, -0.006448418367654085, -0.008313268423080444, -0.018156670033931732, -0.006041976623237133, -0.005901942495256662, 0.0347558818757534, 0.02640845999121666, 0.004949024412781, 0.03155899792909622, 0.007473061326891184, 0.01560189388692379, 0.051915232092142105, 0.015164713375270367, 0.008279113098978996, -0.006199088878929615, 0.010014175437390804, 0.004095155745744705, -0.0061888424679636955, -0.009194460697472095, 0.005980498157441616, 0.024646073579788208, -0.011783392168581486, -0.01821131817996502, 0.004006353206932545, 0.028471406549215317, -0.024277202785015106, 0.003818501951172948, -0.0011817546328529716, -0.027883945032954216, -0.028088873252272606, 0.010929523035883904, -0.008661646395921707, 0.023334531113505363, -0.044483158737421036, -0.04218795895576477, -0.014112746343016624, 0.013361341319978237, 0.025288183242082596, 0.0013713135849684477, -0.014809503220021725, 0.02461875043809414, -0.052707623690366745, 0.009850232861936092, 0.023061292245984077, -0.018498217687010765, -0.026695359498262405, 0.042105987668037415, -0.021271584555506706, -0.0011698005255311728, 0.02562973089516163, -0.008654816076159477, 0.019263284280896187, -0.026913950219750404, -0.003137114690616727, 0.029919568449258804, 0.02520621195435524, 0.04218795895576477, 0.029864920303225517, -0.020274264737963676, 0.028334787115454674, -0.001764093292877078, 0.029291121289134026, 0.03256997838616371, -0.013935141265392303, -0.014823165722191334, -0.0013354510301724076, 0.024564102292060852, 0.010430863127112389, -0.0076984828338027, 0.01980976015329361, 0.017897093668580055, 0.005253002047538757, 0.038335300981998444, -0.006335707847028971, 0.004566491115838289, 0.008723125793039799, 0.05287156626582146, -0.005164199508726597, 0.010307906195521355, -0.007964889518916607, -0.015028093941509724, 0.019099341705441475, 0.02460508793592453, 0.03426405414938927, 0.018129346892237663, -0.02761070616543293, 0.012165925465524197, -0.016517240554094315, -0.0025752687361091375, 0.01841624639928341, -0.03404546529054642, -0.007705313619226217, -0.0053793746046721935, 0.00908516626805067, -0.001063066883943975, -0.0232388973236084, -0.0048499759286642075, -0.010956846177577972, -0.019700465723872185, 0.017965402454137802, 0.022951997816562653, 0.001576242153532803, -0.027911268174648285, 0.008497703820466995, 0.009317418560385704, 0.053718604147434235, 0.015233022160828114, 0.024878326803445816, -0.032324064522981644, 0.017746813595294952, -0.017295969650149345, 0.01741892658174038, -0.021490173414349556, -0.005297403316944838, 0.011585294269025326, 0.015738513320684433, -0.00334716634824872, -0.005925850477069616, 0.003972198348492384, -0.00890756119042635, -0.005840463563799858, 0.024058612063527107, -0.037296995520591736, -0.012883175164461136, 0.009242277592420578, -0.03164096921682358, -0.0013175198109820485, 0.012254727073013783, -0.013238384388387203, 0.01841624639928341, 0.012589444406330585, 0.018511880189180374, -0.012726062908768654, -0.03505644574761391, 0.011318886652588844, -0.026668036356568336, 0.01260310597717762, 0.005973667372018099, 0.006322045810520649, 0.03855389356613159, 0.00929009448736906, -0.023744387552142143, 0.0005891695618629456, 0.022897349670529366, -0.05166931822896004, 0.04180542379617691, 0.015642879530787468, -0.0159844271838665, 0.008313268423080444, -0.049292147159576416, -0.011257408186793327, -0.08967673778533936, -0.0032942264806479216, 0.008381578139960766, -0.02401762641966343, 0.000592585070990026, -0.0023037383798509836, -0.03295250982046127, 0.01101149432361126, 5.7209221267839894e-05, -0.01450894121080637, -0.003798009129241109, 0.017528222873806953, 0.009071503765881062, -0.008846082724630833, 0.07016753405332565, 0.01683146506547928, -0.009331080131232738, 0.00287241511978209, 0.009358404204249382, 0.011790222488343716, 0.022255240008234978, 0.01617569290101528, 0.001832402776926756, -0.014754856005311012, -0.023676078766584396, 0.01148966047912836, -0.010471848770976067, -0.00908516626805067, 0.050275806337594986, 0.010321567766368389, -0.009467699564993382, -0.001881927251815796, 0.024072274565696716, 0.0018443570006638765, 0.0165718887001276, 0.03317110240459442, 0.003485493129119277, -0.003616988891735673, -0.032132796943187714, 0.03142237663269043, 0.018867088481783867, -0.028061550110578537, 0.022309888154268265, 0.0504397489130497, -0.005106136668473482, -0.017938079312443733, -0.007869256660342216, 0.02401762641966343, -0.021080316975712776, 0.007315949536859989, -0.013122258707880974, -0.01582048460841179, 0.019153987988829613, -0.022733407095074654, 0.016476254910230637, -0.006451833993196487, 0.021941017359495163, -0.012924160808324814, 0.010669946670532227, 0.0031046676449477673, -0.04319893941283226, -0.00729545671492815, 0.005464761517941952, -0.005287156440317631, -0.004706525709480047, -0.0038799806497991085, -0.0031251604668796062, -0.013443313539028168, -0.005266663618385792, -0.02561606839299202, 0.0024027873296290636, 0.03778882697224617, 0.006550882942974567, -0.0022200592793524265, -0.03847191855311394, 0.002549652708694339, 0.02258312702178955, 0.008784604258835316, -0.015861470252275467, -0.04784398525953293, -0.008292775601148605, -0.03644995763897896, -0.022501155734062195, 0.021230598911643028, -0.0069812326692044735, 0.0009332787594757974, -0.020711446180939674, -0.015888793393969536, 0.010014175437390804, -0.0069812326692044735, -0.001440476975403726, -0.018156670033931732, -0.0002181635209126398, 0.025889307260513306, 0.01662653684616089, -0.01661287434399128, 0.012343529611825943, 0.004173711407929659, -0.04205133765935898, 0.005717506632208824, -0.00011804738460341468, -0.011455506086349487, -0.012644091621041298, 0.0030295271426439285, 0.02322523668408394, 0.011448674835264683, 0.011332549154758453, 0.01802005060017109, -0.011448674835264683, 0.011052479967474937, -0.00868897046893835, 0.005577472038567066, 0.02879929356276989, 0.014126407913863659, 0.049319472163915634, 0.04117697849869728, 0.01419471763074398, 0.006745564751327038, -0.04899158701300621, -0.006274229381233454, -0.018061036244034767, 0.00168980669695884, -0.0009768260642886162, 0.03281589224934578, 0.024345511570572853, 0.0005469030584208667, -0.003353997366502881, 0.0010775825940072536, -0.005912188906222582, -0.007930735126137733, 0.0019041277701035142, 0.048882290720939636, -0.0005375104956328869, -0.06382841616868973, 0.03216012194752693, -0.04125894978642464, -0.00012711973977275193, 0.004303499590605497, -0.024277202785015106, 0.023525798693299294, 0.012534796260297298, -0.0173779409378767, -0.02703690715134144, -0.02344382554292679, -0.03601277619600296, -0.017651179805397987, 0.018047373741865158, -0.044674426317214966, 0.003644312731921673, 0.01859385147690773, 0.01038987748324871, -0.04139556735754013, -0.007493554148823023, 0.002216643886640668, -0.04265246167778969, 0.023539459332823753, -0.0014438924845308065, 0.014222041703760624, 0.04054852947592735, 0.011072972789406776, 0.013969296589493752, -0.0035862496588379145, -0.018962722271680832, -0.0056013804860413074, 0.001718838233500719, -0.02636747434735298, -0.015465274453163147, 0.003569172229617834, 0.003186638932675123, -0.008074184879660606, -0.009925372898578644, -0.024659736081957817, -0.049100879579782486, -0.0018221563659608364, -0.016503579914569855, 0.00744573725387454, -0.0060317302122712135, -0.02937309257686138, 0.0184025838971138, 0.028963236138224602, 0.01717301271855831, 0.01409908477216959, 0.022856364026665688, -0.0037741009145975113, 0.020465532317757607, -0.007978552021086216, 0.013088103383779526, 0.023307207971811295, 0.008053692057728767, -0.023512136191129684, 0.004918285179883242, 0.019550183787941933, 0.027515074238181114, -0.005782400723546743, 0.009850232861936092, -0.005174445919692516, 0.0015873424708843231, -0.009460868313908577, 0.013928310945630074, 0.026763668283820152, -0.018757794052362442, -0.0076301731169223785, -0.0016684599686414003, -0.02101200819015503, -0.00038402757490985096, -0.0011996858520433307, -0.02142186462879181, -0.01461823657155037, 0.021326230838894844, 0.01359359361231327, 0.03205082565546036, -9.83550344244577e-05, 0.03778882697224617, 0.003644312731921673, 0.008081016130745411, -0.009652134962379932, 0.042105987668037415, 0.003058558562770486, -0.0010673361830413342, 0.009276432916522026, 0.009570163674652576, 0.0014985400484874845, -0.01743258908390999, -0.006837782915681601, -0.0061102863401174545, 0.024687059223651886, 0.01841624639928341, -0.008880237117409706, 0.020287927240133286, 0.007746299263089895, 0.027310146018862724, 0.02299298346042633, 0.01797906495630741, -0.037870798259973526, 0.0076506659388542175, 0.0186211746186018, 0.0018648498225957155, 0.00991854164749384, -0.0006971840048208833, -0.01762385480105877, 0.03486517816781998, 0.021134965121746063, -0.004894376732409, 0.019878068938851357, 0.0539645180106163, -0.03683249279856682, -0.010663115419447422, -0.008791434578597546, -0.031668294221162796, 0.00212613376788795, -0.01199515163898468, -0.015738513320684433, 0.049893271178007126, 0.016558226197957993, -0.011168606579303741, 0.03513841703534126, 0.010895367711782455, 0.01332035567611456, -0.01860751211643219, 0.0025769765488803387, 0.029919568449258804, -0.012049798853695393, -0.005860956385731697, 0.024085935205221176, 0.05639633908867836, 0.02523353509604931, 0.0305753406137228, -0.01501443237066269, 0.01078607328236103, -0.017760474234819412, -0.007124682888388634, -0.0230203066021204, 0.007896579802036285, 0.01717301271855831, -0.0070222183130681515, -0.006533805280923843, 0.05319945141673088, -0.008128833025693893, 0.012678246945142746, 0.0016027120873332024, -0.00013042848149780184, -0.03306180611252785, -0.0052393400110304356, 0.012234234251081944, -0.006677255500108004, -0.004402548540383577, -0.00900319404900074, -0.014522603712975979, 0.007391090039163828, 0.0034684156998991966, -0.027474088594317436, -0.0011791930301114917, -0.005293987691402435, 0.007343273144215345, -0.026490431278944016, 0.00084362254710868, 0.029345769435167313, -0.01019177958369255, 0.007841932587325573, 0.05333607271313667, -0.0184025838971138, -0.009324248880147934, 0.007466230075806379, 0.0011791930301114917, 0.03060266375541687, -0.02441382221877575, 0.012971977703273296, -0.02718718722462654, 0.019495535641908646, 0.011783392168581486, 0.01490513700991869, -0.04800792783498764, -0.016640199348330498, -0.004382055718451738, -0.0222142543643713, -0.020465532317757607, 0.03344434127211571, -0.009474529884755611, 0.008046860806643963, 0.03642263635993004, 0.0015113480621948838, 0.03002886474132538, -0.035876158624887466, 0.029099853709340096, 0.018566526472568512, -0.022678758949041367, 0.002462558215484023, 0.020711446180939674, 0.01941356435418129, 0.01250747311860323, 0.0017726320074871182, 0.00675922678783536, 0.018771454691886902, 0.025096917524933815, 0.002348139649257064, 0.023457488045096397, 0.03218744322657585, -0.030165482312440872, 0.03538433089852333, -0.008531859144568443, 0.0008333761361427605, 0.006636269856244326, 0.020014688372612, -0.007179330103099346, 0.00870946329087019, -0.0034393842797726393, 0.04382738471031189, 0.02379903569817543, -0.002397664124146104, -0.013566270470619202, -0.017104703933000565, 0.008497703820466995, 0.02277439273893833, 0.017295969650149345, -0.02240552194416523, 0.00034496307489462197, 0.001630889717489481, 0.005847294814884663, 0.006199088878929615, 0.038280654698610306, 0.02362143062055111, -0.019345255568623543, 0.010594806633889675, -0.023512136191129684, -0.004146387800574303, 0.03718770295381546, 0.024905649945139885, -0.012951484881341457, -0.024441145360469818, 0.010027837008237839, -0.025520436465740204, 0.0024471883662045, -0.03144970163702965, 0.018894413486123085, -0.003548679407685995, -0.01720033586025238, 0.013081273064017296, 0.017063718289136887, 0.02343016490340233, 0.03363560512661934, -0.009276432916522026, -0.0015463567106053233, 0.023853683844208717, -0.01209078449755907, -0.019276946783065796, -0.015547246672213078, 0.02042454667389393, -0.0495653860270977, 0.003927797079086304, -0.011236915364861488, -0.023279882967472076, -0.04265246167778969, 0.006964155472815037, -0.014754856005311012, 0.043499499559402466, 0.0018955891719087958, -0.011564801447093487, 0.0056013804860413074, 0.009454037062823772, -0.0175965316593647, -0.006434756796807051, -0.006718241143971682, -0.027460426092147827]
metadata : {"source": "pydantic_ai_docs", "crawled_at": "2025-03-14T10:14:44.149148", "url_path": "/api/models/gemini/", "chunk_size": 3976}
updated_dt: 2025-03-14T10:14:44.150657
---
rt in m.parts:
          if isinstance(part, SystemPromptPart):
            sys_prompt_parts.append(_GeminiTextPart(text=part.content))
          elif isinstance(part, UserPromptPart):
            message_parts.extend(await cls._map_user_prompt(part))
          elif isinstance(part, ToolReturnPart):
            message_parts.append(_response_part_from_response(part.tool_name, part.model_response_object()))
          elif isinstance(part, RetryPromptPart):
            if part.tool_name is None:
              message_parts.append(_GeminiTextPart(text=part.model_response()))
            else:
              response = {'call_error': part.model_response()}
              message_parts.append(_response_part_from_response(part.tool_name, response))
          else:
            assert_never(part)
        if message_parts:
          contents.append(_GeminiContent(role='user', parts=message_parts))
      elif isinstance(m, ModelResponse):
        contents.append(_content_model_response(m))
      else:
        assert_never(m)
    return sys_prompt_parts, contents
  @staticmethod
  async def_map_user_prompt(part: UserPromptPart) -> list[_GeminiPartUnion]:
    if isinstance(part.content, str):
      return [{'text': part.content}]
    else:
      content: list[_GeminiPartUnion] = []
      for item in part.content:
        if isinstance(item, str):
          content.append({'text': item})
        elif isinstance(item, BinaryContent):
          base64_encoded = base64.b64encode(item.data).decode('utf-8')
          content.append(
            _GeminiInlineDataPart(inline_data={'data': base64_encoded, 'mime_type': item.media_type})
          )
        elif isinstance(item, (AudioUrl, ImageUrl, DocumentUrl)):
          client = cached_async_http_client()
          response = await client.get(item.url, follow_redirects=True)
          response.raise_for_status()
          mime_type = response.headers['Content-Type'].split(';')[0]
          inline_data = _GeminiInlineDataPart(
            inline_data={'data': base64.b64encode(response.content).decode('utf-8'), 'mime_type': mime_type}
          )
          content.append(inline_data)
        else:
          assert_never(item)
    return content

```
  
---|---  
####  __init__
```
__init__(
  model_name: GeminiModelName[](https://ai.pydantic.dev/api/models/gemini/#pydantic_ai.models.gemini.GeminiModelName "pydantic_ai.models.gemini.GeminiModelName"),
  *,
  provider: (
    Literal[](https://docs.python.org/3/library/typing.html#typing.Literal "typing.Literal")["google-gla", "google-vertex"]
    | Provider[](https://ai.pydantic.dev/api/providers/#pydantic_ai.providers.Provider "pydantic_ai.providers.Provider")[AsyncClient]
  ) = "google-gla"
) -> None

```

```
__init__(
  model_name: GeminiModelName[](https://ai.pydantic.dev/api/models/gemini/#pydantic_ai.models.gemini.GeminiModelName "pydantic_ai.models.gemini.GeminiModelName"),
  *,
  provider: None = None,
  api_key: str[](https://docs.python.org/3/library/stdtypes.html#str) | None = None,
  http_client: AsyncClient | None = None,
  url_template: str[](https://docs.python.org/3/library/stdtypes.html#str) = "https://generativelanguage.googleapis.com/v1beta/models/{model}:"
) -> None

```

```
__init__(
  model_name: GeminiModelName[](https://ai.pydantic.dev/api/models/gemini/#pydantic_ai.models.gemini.GeminiModelName "pydantic_ai.models.gemini.GeminiModelName"),
  *,
  provider: (
    Literal[](https://docs.python.org/3/library/typing.html#typing.Literal "typing.Literal")["google-gla", "google-vertex"]
    | Provider[](https://ai.pydantic.dev/api/providers/#pydantic_ai.providers.Provider "pydantic_ai.providers.Provider")[AsyncClient]
    | None
  ) = None,
  api_key: str[](https://docs.python.org/3/library/stdtypes.html#str) | None = None,
  http_client: AsyncClient | None = None,
  url_template: str[](https://docs.python.org/3/library/stdtypes.html#str) = "https://generativelanguage.googleapis.com/v1beta/models/{model}:"
)