---
url: https://ai.pydantic.dev/api/pydantic_graph/persistence/
session_id: pydantic_ai_docs
chunk_number: 11
title: Pydantic Graph Persistence API
summary: This documentation chunk describes methods for JSON serialization and deserialization of history in the Pydantic Graph persistence layer. It includes 'dump_json' to convert history into JSON bytes and 'load_json' to restore history from JSON data, each requiring a properly set type adapter.
embedding: [0.05770246684551239, 0.03380466625094414, -0.012454351410269737, -0.02035962976515293, 0.029033195227384567, 0.021774897351861, -0.04102253168821335, -0.029356684535741806, 0.0006441361038014293, -0.010937993414700031, 0.030448462814092636, 0.01726626046001911, 0.03750457987189293, -0.06320179253816605, -0.023412562906742096, 0.03829308599233627, 0.01804465614259243, 0.05624676123261452, 0.017185388132929802, -0.00445809168741107, -0.021370533853769302, -0.02110769972205162, 0.026323970407247543, -0.017872802913188934, 0.03426968306303024, -0.02788076363503933, 8.450535096926615e-05, 0.022239912301301956, 0.015123140998184681, -0.008926291950047016, -0.01055384986102581, -0.00690953666344285, 0.010291013866662979, 0.0068741547875106335, 0.04714861512184143, 0.006479901727288961, 0.0002699432661756873, 0.0039020937401801348, -0.0016654662322252989, 0.022603839635849, -0.016811352223157883, -0.08742307871580124, -0.01942959614098072, 0.07011637836694717, -0.002529790159314871, 0.009800725616514683, 0.021047044545412064, 0.11936768144369125, 0.032874636352062225, 0.027254002168774605, -0.04581421986222267, 0.0008984419400803745, 0.013131657615303993, -0.029174722731113434, -0.0627974271774292, -0.004303928464651108, -0.0012288815341889858, 0.015952082350850105, -0.03835374116897583, 0.006717464420944452, 0.038576140999794006, -0.028507525101304054, -0.0012674223398789763, 0.05475062131881714, -0.008163059130311012, 0.015840884298086166, 0.006353538949042559, 0.064495749771595, -0.016932660713791847, 0.0015037213452160358, 0.005913794972002506, 0.044762879610061646, -0.027840327471494675, -0.04346892237663269, 0.005752050317823887, -0.02401910535991192, 0.0410023108124733, 0.04217496141791344, 0.016406990587711334, -0.02436281368136406, -0.011413118802011013, 0.04334761202335358, -0.04059794917702675, 0.004978707991540432, 0.014304307289421558, -0.044843751937150955, -0.03038780763745308, -0.0586324967443943, 0.020036140456795692, -0.0364128015935421, 0.028911886736750603, -0.005848086439073086, -0.10092876851558685, 0.017468441277742386, 0.03497731685638428, -0.03344074264168739, 0.012747514061629772, -0.04035533219575882, -0.011675954796373844, -0.028932105749845505, -0.021451406180858612, 0.003591240616515279, -0.0602903813123703, 0.029538648203015327, 0.034957099705934525, 0.06004776433110237, 0.020986391231417656, 0.03724174574017525, 0.0019270379561930895, -0.01298002153635025, -0.049372605979442596, -0.0028659161180257797, -0.01135246455669403, -0.007227971684187651, -0.03833352401852608, -0.0002470399485900998, -0.04069904237985611, 0.02519175596535206, 0.008147895336151123, 0.007531243376433849, -0.039647698402404785, -0.02335190959274769, -0.0418514721095562, 0.008749384433031082, 0.0292960312217474, -0.014354852959513664, -0.05378015339374542, -0.0001576380163896829, -0.03481557220220566, 0.019783413037657738, 0.014931068755686283, -0.02982170134782791, 0.03222765401005745, -0.06356571614742279, 0.021370533853769302, -0.009694579988718033, -0.045005496591329575, -0.015729684382677078, 0.0025259992107748985, 0.010291013866662979, 0.012707077898085117, -0.026950731873512268, -0.018246836960315704, 0.003328405087813735, 0.03509862720966339, 0.057055484503507614, -0.00730884401127696, 0.044843751937150955, 0.01519390381872654, -0.007329062093049288, 0.053982336074113846, 0.048523448407649994, 0.019197087734937668, -0.023918015882372856, 0.027152912691235542, 0.014658124186098576, 0.02486826665699482, 0.047350797802209854, 0.013192311860620975, -0.00021323779947124422, -0.02420106902718544, 0.026243098080158234, 0.001980110537260771, -0.027415746822953224, 0.03718109056353569, 0.037059783935546875, -0.020662901923060417, -0.060169074684381485, -0.03325878083705902, -0.014102126471698284, -0.0046072001568973064, -0.049938712269067764, -0.014425616711378098, 0.02143118903040886, -0.0123532610014081, 0.020642682909965515, -0.04302412271499634, 0.003914730157703161, -0.03208613023161888, -0.02771901898086071, -0.029518429189920425, -0.04144711047410965, -0.06570883095264435, -0.014102126471698284, -0.05458887666463852, -0.005939067807048559, 0.04217496141791344, 0.06607276201248169, 0.010978429578244686, 0.05240532383322716, -0.014162780717015266, 0.0074200439266860485, 0.00732400780543685, -0.011655736714601517, -0.0047335634008049965, 0.0033637869637459517, 0.05090918391942978, -0.0013192312326282263, -0.02689007669687271, 0.057904645800590515, -0.03608931228518486, 0.04326673969626427, -0.02361474372446537, -0.013920163735747337, 0.029114067554473877, -0.018641090020537376, -0.01687200739979744, -0.0221994761377573, -0.03653411194682121, -0.04880649968981743, -0.012221843004226685, 0.010361777618527412, -0.0033435686491429806, 0.010907666757702827, 0.010483086109161377, 0.0031034788116812706, -0.044156335294246674, 0.01599251851439476, 0.011868026107549667, 0.0343303382396698, 0.0305697713047266, 0.06417226046323776, -0.0064647383987903595, 0.00794066023081541, -0.000645715685095638, -0.0171651691198349, -0.03251070901751518, -0.05353753641247749, -0.010452759452164173, 0.053133174777030945, 0.007010627072304487, -0.0194801427423954, -0.009537889622151852, -0.00044543007970787585, -0.02862883359193802, -0.02739552967250347, -0.044682007282972336, -0.008688729256391525, 0.030266499146819115, 0.004961017053574324, -0.006500120274722576, 0.04136623814702034, -0.02151206135749817, 0.011959007941186428, 0.010513413697481155, 0.03168176859617233, -0.015052377246320248, -0.06320179253816605, 0.03544233366847038, 0.027092257514595985, 0.014081908389925957, -0.01809520274400711, -0.000986264320090413, -0.020319193601608276, -0.02889166958630085, -0.03081238828599453, 0.02377648837864399, -0.007581788580864668, -0.007445316296070814, 0.024504341185092926, 0.04427764564752579, 0.010245523415505886, 0.036958690732717514, 0.030529335141181946, -0.006545610725879669, -0.0005458887899294496, 0.043994590640068054, -0.021491842344403267, -0.02529284730553627, -0.004359528422355652, -0.0043671103194355965, 0.011231156066060066, 0.009987742640078068, 0.03489644452929497, 0.005908740684390068, 0.04229627177119255, -0.01644742675125599, 0.008789820596575737, -0.02814359962940216, 0.011372682638466358, 0.0046628001146018505, 0.012666641734540462, -0.024342596530914307, 0.003985493443906307, 0.026647459715604782, 0.017943566665053368, -0.03449208289384842, 0.0012162452330812812, 0.022401656955480576, -0.01373820099979639, 0.004569291137158871, 0.03184351325035095, 0.009573271498084068, -0.014850196428596973, 0.033380087465047836, -0.0014215853298082948, -0.0028886613436043262, 0.043913718312978745, 0.0014102127170190215, 0.009517671540379524, -0.004566763993352652, -0.0326724536716938, -0.012747514061629772, 0.013273184187710285, 0.00908803753554821, 0.03214678168296814, -0.0051707797683775425, -0.024180850014090538, 0.047027308493852615, -0.010103996843099594, 0.0017766657983884215, 0.005448778625577688, 0.001178968115709722, 0.0017488659359514713, -0.024666085839271545, 0.02921515889465809, 0.034471865743398666, 0.016993315890431404, 0.014658124186098576, 0.018449019640684128, -0.012302715331315994, -0.006616374012082815, 0.046784691512584686, 0.021168353036046028, -0.023473218083381653, -0.01013937871903181, -0.04067882150411606, 0.04164929315447807, -0.011069411411881447, 0.028689488768577576, -0.009204291738569736, 0.021916422992944717, -0.004397437442094088, 0.012535223737359047, 0.06558752804994583, -0.08523952215909958, -0.028002072125673294, 0.00732400780543685, 0.0024956720881164074, 0.023816924542188644, -0.07383651286363602, 0.020612355321645737, -0.052203141152858734, -0.030023882165551186, -0.026485715061426163, 0.024160632863640785, -0.018964581191539764, 0.07678835093975067, -0.02638462372124195, -0.04884693771600723, 0.02998344600200653, 0.04138645529747009, 0.02630375139415264, 0.01969243213534355, -0.05309273675084114, -0.021451406180858612, -0.00924978218972683, -0.03926355391740799, 0.003384005045518279, -0.0016326118493452668, -0.028911886736750603, 0.023978669196367264, 0.014243653044104576, -0.0011821271618828177, -0.029882356524467468, -0.0046072001568973064, -0.048523448407649994, -0.005979503970593214, 0.017741385847330093, -0.03946573659777641, 0.016942769289016724, 0.014789542183279991, 0.0339057594537735, 0.03180307522416115, -0.014263871125876904, -0.009654143825173378, 0.005499323830008507, 0.014718778431415558, 0.03133805841207504, 0.03283419832587242, 0.00849160272628069, 0.0313987135887146, 0.0028810796793550253, 0.025009792298078537, -0.022462312132120132, 0.014263871125876904, 0.0038667120970785618, 0.002048346446827054, -0.00940647255629301, 0.012474569492042065, 0.02820425294339657, -0.022401656955480576, -0.01406169030815363, 0.009735016152262688, 0.00013276028039399534, 0.02561633661389351, 0.011524318717420101, -0.05268837511539459, 0.009472181089222431, -0.023331690579652786, -0.029761048033833504, 0.013495584018528461, -0.00032822825596667826, 0.024302160367369652, -0.008678620681166649, -0.012646423652768135, 0.019844068214297295, 0.006227175705134869, 0.024908702820539474, -0.025757862254977226, 0.0494130440056324, 0.013758419081568718, -0.0029518429655581713, -0.03350139781832695, 0.026930512860417366, -0.03744392469525337, -0.007500916253775358, 0.0066062649711966515, 0.01201966218650341, 0.025252411141991615, 0.001317967544309795, -0.024686302989721298, -0.007526188623160124, -0.02078421041369438, -0.011453554965555668, 0.07185513526201248, 0.061341725289821625, -0.030266499146819115, 0.05826857313513756, -0.028851233422756195, 0.00289877038449049, -0.0031161149963736534, -0.00069057458313182, 0.026182442903518677, 0.03798981383442879, -0.032935287803411484, -0.028790578246116638, -0.02167380601167679, -0.0035154225770384073, -0.03900071978569031, -0.011059301905333996, -0.005362851545214653, 0.02100660838186741, 0.06623450666666031, -0.030367590487003326, -0.07242124527692795, 0.013111439533531666, -0.03869744762778282, 0.03234896436333656, 0.00613113958388567, 0.04253888875246048, -0.016184590756893158, -0.05717679485678673, -0.007217862643301487, 0.017023641616106033, -0.004523800686001778, 0.02612178958952427, -0.05252663046121597, 0.02980148419737816, -0.03091347962617874, 0.016781024634838104, 0.00678317341953516, 0.011291810311377048, 0.03879854083061218, 0.01302045863121748, -0.016942769289016724, 0.04553116858005524, -0.005474051460623741, -0.022886892780661583, 0.014637906104326248, 0.01617448218166828, 0.017518986016511917, 0.0113019198179245, -0.007106663193553686, 0.011564754880964756, -0.024342596530914307, -0.04549073055386543, 0.02022821269929409, 0.03364292159676552, 0.030124973505735397, -0.028588397428393364, 0.019045453518629074, -0.018428800627589226, -0.04900868237018585, 0.014759214594960213, 0.0104729775339365, 0.017680730670690536, -0.00399812962859869, -0.026364406570792198, 0.01753920502960682, -0.035725388675928116, 0.02563655376434326, 0.045167241245508194, -0.00544372433796525, -0.012252170592546463, 0.036796946078538895, -0.05378015339374542, -0.030165409669280052, 0.03851548582315445, -0.04205365478992462, 0.0074200439266860485, -0.0054386695846915245, 0.03817177936434746, 0.03918268159031868, 0.0006267611752264202, -0.03552320599555969, 0.030266499146819115, -0.023574307560920715, -0.01809520274400711, 0.004981235135346651, 0.021774897351861, 0.015052377246320248, -0.003126224037259817, -0.028426652774214745, 0.017973894253373146, -0.010078724473714828, -0.01734713278710842, 0.004882671870291233, 0.025434372946619987, 0.01881294511258602, -0.006404084153473377, -0.01674058847129345, 0.019146542996168137, -0.004447982646524906, -0.013637110590934753, 0.020167557522654533, 0.01407179981470108, -0.03960726410150528, 0.04650163650512695, -0.031196532770991325, 0.026404842734336853, 0.01440539862960577, -0.01897468976676464, 0.044924624264240265, -0.024484122171998024, -0.0146480156108737, -7.186903530964628e-05, -0.007844624109566212, -0.007854732684791088, 0.042741067707538605, 0.0022353639360517263, -0.00743520725518465, -0.008511820808053017, 0.027011385187506676, 0.006515283603221178, 0.01916676200926304, 0.025899389758706093, -0.01724604144692421, -0.012221843004226685, -0.0019927467219531536, -0.01406169030815363, 0.013424820266664028, 0.0007183744455687702, -0.046946436166763306, 0.028022291138768196, 0.0033991686068475246, -0.0035760768223553896, -0.018883708864450455, -0.017438113689422607, 0.026344187557697296, 0.008532039821147919, -0.01921730674803257, 0.02870970591902733, 0.04791690409183502, -0.009310436435043812, 0.033198125660419464, 0.05006002262234688, 0.015163577161729336, -0.03944551944732666, -0.004422709811478853, 0.03259158134460449, -0.018964581191539764, 0.017155060544610023, -0.023715835064649582, 0.01665971614420414, -0.01448627095669508, -0.011837699450552464, -0.03392597660422325, -0.014769324101507664, 0.015931865200400352, -0.018833162263035774, -0.005625687073916197, -0.019490251317620277, 0.026991168037056923, 0.005610523745417595, 0.029457775875926018, -0.03424946591258049, -0.017023641616106033, 0.008415785618126392, -0.02990257367491722, -0.031621113419532776, 0.014557033777236938, 0.008875747211277485, -0.00506463460624218, 0.021977078169584274, -0.0006128612440079451, -0.011817481368780136, -0.014364962466061115, -0.07452392578125, 0.05200096219778061, -0.012747514061629772, -0.012919367291033268, -0.007682878989726305, 0.03728218004107475, -0.0007556515629403293, -0.0007550197769887745, 0.0119387898594141, 0.027415746822953224, -0.020207993686199188, 0.020541591569781303, -0.02153228037059307, 0.014375071041285992, -0.03388553857803345, -0.0351390615105629, -0.008830256760120392, -0.014890632592141628, -0.02395845204591751, 0.0001844901853473857, 0.07525178045034409, -0.07048030942678452, 0.02327103540301323, 0.03156045824289322, 0.013940381817519665, 0.0134046021848917, 0.00670230109244585, -0.008370294235646725, -0.03509862720966339, 0.021249225363135338, -0.03289485350251198, -0.011645627208054066, -0.022603839635849, -0.019126325845718384, 0.030771952122449875, 0.03623083978891373, -0.03174242004752159, 0.016700152307748795, 0.025434372946619987, 0.008799929171800613, -0.028871450573205948, -0.0024906175676733255, 0.018479345366358757, 0.03669585660099983, 0.01561848446726799, 0.029498212039470673, 0.0410023108124733, 0.03089326061308384, -0.03586691617965698, 0.03489644452929497, 0.015183795243501663, 0.003856603056192398, 0.002484299475327134, -0.013515802100300789, -0.013354056514799595, 0.023089073598384857, -0.0014721306506544352, -0.008617966435849667, -0.0032475327607244253, -0.050787873566150665, -0.020804427564144135, 0.02478739432990551, -0.03313747048377991, 0.03606909513473511, -0.014344744384288788, -0.010644830763339996, 0.038050469011068344, 0.04318586736917496, -0.0024388085585087538, 0.0005297774914652109, 0.027415746822953224, 0.01003323309123516, -0.018671417608857155, -0.0011499045649543405, 0.037221528589725494, -0.003689803648740053, 0.0019042924977838993, -0.005610523745417595, 0.033198125660419464, -0.0037782578729093075, -0.006075540091842413, 0.018671417608857155, -0.04783603176474571, -0.009881597943603992, -0.014516597613692284, -0.0284670889377594, 0.045773785561323166, -0.007445316296070814, -0.02478739432990551, 0.009972578845918179, 0.01729658618569374, -0.0023073910269886255, -0.004786635749042034, -0.023574307560920715, -0.033278997987508774, -0.004501054994761944, -0.008001314476132393, 0.03944551944732666, 0.006914590951055288, 0.022846456617116928, 0.025899389758706093, 0.03459317237138748, 0.018277164548635483, -0.03685760125517845, -0.018802834674715996, -0.0010323869064450264, -0.011524318717420101, 0.016457535326480865, -0.0351390615105629, -0.011251374147832394, 0.003626622259616852, -0.03449208289384842, -0.025858953595161438, 0.033622704446315765, -0.022826237604022026, 0.027233785018324852, -0.0032955508213490248, -0.016599062830209732, 0.009664253331720829, 0.052284013479948044, -0.0068033915013074875, -0.012545332312583923, 0.011231156066060066, 0.0006267611752264202, -0.009467126801609993, -0.03952639177441597, 0.002954370342195034, -0.04197278246283531, 0.002546217292547226, 0.011898353695869446, -0.0042685470543801785, 0.005559978075325489, -0.03617018461227417, 0.017812147736549377, 0.00391725730150938, 0.037221528589725494, -0.03453252092003822, -0.008041750639677048, -0.00972996186465025, 0.04803821071982384, -0.05729810148477554, 0.045086368918418884, -0.0063383751548826694, 0.015871210023760796, 0.0033132415264844894, 0.007591897621750832, 0.0012926949420943856, -0.05741941183805466, -0.030286718159914017, 0.029356684535741806, 0.019308287650346756, -0.0035684951581060886, 0.012464459985494614, 0.0026561531703919172, 0.008961673825979233, -0.01762007735669613, 0.04892781004309654, 0.03006431832909584, 0.012696968391537666, 0.021390752866864204, -0.012909258715808392, 0.05333535373210907, -0.05584239959716797, 0.0024767175782471895, -0.04480331391096115, 0.005514487624168396, -0.05373971536755562, -0.04130558297038078, 0.0007082654046826065, 0.018267055973410606, 0.018529891967773438, -0.011564754880964756, -0.036898039281368256, 0.01348547451198101, -0.02798185497522354, 0.01807498373091221, 0.021734461188316345, -0.00441007362678647, 0.03625105693936348, -0.030347371473908424, 0.03453252092003822, -0.0034699318930506706, 0.026930512860417366, 0.012868822552263737, 0.027092257514595985, 0.013778637163341045, 0.03443142771720886, 0.004541491158306599, -0.017791930586099625, -0.030286718159914017, -0.007283571641892195, -0.018914034590125084, -0.019156651571393013, -0.012343151494860649, 0.019146542996168137, 0.0326724536716938, 0.01184780802577734, 0.007824406027793884, 0.020824646577239037, -0.0728660449385643, -0.03382488712668419, 0.01900501735508442, 0.0008864374249242246, 0.011018865741789341, 0.008486548438668251, -0.036392584443092346, 0.005347688216716051, 0.007485752459615469, -0.06130128726363182, -0.021471625193953514, -0.03368335962295532, 9.429849160369486e-05, 0.043549794703722, 0.03360248729586601, 0.009927088394761086, 0.017893020063638687, 0.009613707661628723, -0.007738478947430849, -0.015658920630812645, 0.0065203383564949036, -0.006201902870088816, -0.00743520725518465, 0.026101570576429367, 0.020945955067873, 0.01591164618730545, -0.0021949277725070715, -0.005092434585094452, 0.019197087734937668, 0.001968737691640854, 0.052728813141584396, -0.019702540710568428, -0.01679113507270813, 0.0041977837681770325, -0.028487306088209152, 0.04981740564107895, 0.003694858169183135, 0.02921515889465809, 0.02806272730231285, -0.026768768206238747, 0.003492677351459861, -0.016558626666665077, -0.004811908584088087, -0.031014569103717804, 0.023129509761929512, 0.006040158215910196, -0.030549554154276848, 0.04156842082738876, -0.023392345756292343, 0.022806020453572273, 0.010432541370391846, 0.012626205570995808, 0.01822661980986595, -0.02270492911338806, 0.017630185931921005, 0.03099435195326805, -0.018914034590125084, -0.030691079795360565, -0.011584972962737083, 0.024423468858003616, -0.005853140726685524, -0.020218102261424065, -0.006368702277541161, -0.014496379531919956, 0.03736305236816406, -0.011777045205235481, 0.0008308376418426633, -0.01996537670493126, 0.001496139564551413, -0.0032121511176228523, 0.007692988030612469, -0.004260965157300234, -0.017731275409460068, 0.014294198714196682, -0.028568178415298462, 0.028325561434030533, 0.0038161668926477432, -0.05818770080804825, -0.014738996513187885, -0.020743774250149727, 0.05301186442375183, 0.01820640079677105, 0.04658250883221626, 0.01892414502799511, -0.012949694879353046, 0.00429887417703867, 0.01617448218166828, 0.03081238828599453, 0.01013937871903181, 0.014455943368375301, -0.011787153780460358, 0.043994590640068054, 0.029579084366559982, -0.03912203013896942, -0.02737531065940857, -0.014476161450147629, 0.023008201271295547, -0.022421875968575478, 0.018570328131318092, -0.023473218083381653, 0.006282775662839413, -0.0013028039829805493, 0.019823849201202393, 0.01610371842980385, -0.0401935875415802, 0.0009180282359011471, -0.0034067502710968256, -0.04033511504530907, -0.023473218083381653, 0.03129762411117554, 0.03315768763422966, 0.013950491324067116, 0.04086078703403473, 0.02078421041369438, -0.01625535450875759, -0.011554645374417305, 0.0322478748857975, -0.01013937871903181, 0.006399029400199652, 0.011868026107549667, -0.02063257433474064, 0.024059541523456573, 0.007460480090230703, 0.015891429036855698, -0.012504896149039268, -0.008385458029806614, 0.00401076627895236, 0.012211734429001808, -0.01644742675125599, 0.025393936783075333, -0.014961396344006062, 0.03760566934943199, -0.049857839941978455, 0.07250211387872696, 0.0059997220523655415, 0.003985493443906307, 0.02014733850955963, -0.03752479702234268, -0.03273310884833336, -0.008203495293855667, -0.009664253331720829, -0.013798855245113373, -0.001780456630513072, -0.01122104749083519, -0.05244575813412666, 0.02798185497522354, 0.0510709285736084, -0.002625826047733426, 0.0008403148967772722, -0.017781822010874748, -0.02622287906706333, 0.00304787908680737, 0.002997333649545908, -0.021552497521042824, 0.01617448218166828, 0.07173383235931396, -0.006965136621147394, 0.012919367291033268, -0.014253762550652027, 0.01591164618730545, -0.01583077386021614, 0.04136623814702034, 0.002694062190130353, -0.032025475054979324, 0.04013293236494064, 0.00011238422302994877, 0.014718778431415558, 0.0023516181390732527, -0.018115419894456863, 0.01858043670654297, -0.002149437088519335, 0.015335431322455406, 0.039890315383672714, 0.005686341319233179, 0.0027066986076533794, 0.05131354555487633, 0.016649607568979263, 0.007005572784692049, -0.004463145975023508, 0.022057950496673584, 0.00515814358368516, -0.006110921502113342, 0.03073151595890522, 0.0010254369117319584, 0.043751973658800125, -0.008895965293049812, 0.01924763433635235, -0.0028760251589119434, -0.020541591569781303, 0.01268685981631279, 0.051960524171590805, 0.012151080183684826, -0.0036392584443092346, 0.039647698402404785, -0.00947723537683487, 0.01406169030815363, -0.006641646847128868, -0.013849399983882904, 0.00948734488338232, 0.043751973658800125, 0.03653411194682121, 0.043549794703722, -0.003154024016112089, -0.06938853114843369, 0.00651022931560874, 0.05644894391298294, -0.022745365276932716, 0.005752050317823887, 0.017903130501508713, 0.0018347927834838629, 0.014931068755686283, -0.03247027471661568, 0.005918849725276232, -0.01192868035286665, -0.0862908661365509, 0.00019128220446873456, -0.028851233422756195, -0.0024678721092641354, 0.014577251859009266, -0.03809090703725815, -0.015840884298086166, -0.020703338086605072, -0.01063472218811512, -0.010038288310170174, -0.05099005624651909, 0.015840884298086166, -0.006141248624771833, 0.03408772125840187, -0.0009256100165657699, -0.012282497249543667, -0.012798058800399303, 0.00678317341953516, -0.02084486372768879, -0.008254040032625198, 0.029457775875926018, 0.02521197497844696, 0.032955508679151535, -0.01721571385860443, -0.020319193601608276, 0.0006368702161125839, -0.013343947939574718, -0.016599062830209732, 0.0038363849744200706, -0.0005446251598186791, -0.005092434585094452, -0.00479169050231576, 0.021148135885596275, 0.021977078169584274, 0.02294754609465599, 0.004784108605235815, 0.009072873741388321, -0.003298077965155244, 0.006889318581670523, -0.014688451774418354, 0.006621428765356541, -0.014658124186098576, -0.02014733850955963, 0.01708429679274559, -0.01929817907512188, 0.005893576890230179, 0.0123532610014081, -0.014385180547833443, 0.01461768802255392, -0.019045453518629074, -0.00026662624441087246, -0.010786358267068863, -0.014890632592141628, 0.014991723001003265, 0.0030175517313182354, 0.022806020453572273, -0.00437721936032176, 0.02395845204591751, 0.022624056786298752, 0.002653626026585698, 0.0025714898947626352, 0.0023756271693855524, -0.046339891850948334, -0.015001832507550716, 0.005474051460623741, -0.005014089401811361, -0.03623083978891373, -0.006914590951055288, 0.03030693531036377, -0.0023503543343394995, -0.010826794430613518, 0.004923108033835888, 0.001728647737763822, -0.0194599237293005, 0.002546217292547226, 0.022603839635849, -0.008774656802415848, -0.035786040127277374, -0.009219454601407051, -0.0326724536716938, 0.007728369906544685, 0.01868152618408203, -0.03499753773212433, 0.002513362793251872, -0.0011732818093150854, -0.01604306511580944, 0.0008226240752264857, 0.01596219278872013, -0.008061968721449375, 0.023594526574015617, -0.03406750410795212, -0.009628871455788612, -0.029437556862831116, 0.004816962871700525, -0.0006128612440079451, 0.026485715061426163, 0.005342633463442326, -0.0020559283439069986, -0.006065431050956249, 0.013192311860620975, 0.06215044856071472, 0.03536146134138107, 0.004981235135346651, -0.0335216149687767, -0.0008043014095164835, -0.009927088394761086, -0.008203495293855667, 0.031439151614904404, 0.020410174503922462, 0.023149726912379265, 0.017943566665053368, -0.013293402269482613, -0.0012604723451659083, 0.019389159977436066, 0.009047601372003555, -0.008961673825979233, -0.012717186473309994, -0.0023730997927486897, -0.005757104605436325, 0.025575900450348854, 0.00501661654561758, 0.0005379910580813885, -0.007965932600200176, -0.0019573650788515806, 0.0119387898594141, -0.03526037186384201, -0.019924940541386604, -0.008719056844711304, 0.0005749522824771702, -0.0029114068020135164, -0.023837143555283546, -0.021552497521042824, -0.01783236674964428, -0.02881079725921154, -8.067496673902497e-05, -0.006975245662033558, 0.055559344589710236, 0.007960878312587738, -0.003020079107955098, 0.004245801363140345, -0.01866130903363228, -0.023412562906742096, 0.015820665284991264, 0.020379846915602684, 0.004963544197380543, -0.02217925898730755, 0.01054374035447836, 0.016588954254984856, 0.015133249573409557, 0.004266019910573959, 0.015153467655181885, -0.019550904631614685, 0.012383587658405304, 0.006768010091036558, -0.0194599237293005, 0.0011341092176735401, 0.03006431832909584, 0.008067023009061813, 0.012747514061629772, -0.03249049186706543, 0.010897557251155376, -0.00026157169486396015, -0.012322933413088322, -0.012413915246725082, -0.007020736113190651, 0.0008674829732626677, 0.013889836147427559, -0.0393848642706871, 0.012696968391537666, -0.007212808355689049, -0.024079760536551476, 0.017064079642295837, 0.010018070228397846, 0.0024855630472302437, -0.017852583900094032, 0.013000240549445152, 0.022037731483578682, 0.004667854402214289, -0.014102126471698284, -0.0007354334811680019, 0.015385976061224937, 0.017549313604831696, -0.0221994761377573, 0.013071003369987011, 0.0002468820021022111, 0.03331943228840828, 0.03673629090189934, 0.0006842564325779676, 0.0005948544712737203, -0.025313064455986023, -0.0005692659760825336, 0.015578048303723335, -0.019277961924672127, 0.03212656453251839, -0.006146303378045559, 0.019833959639072418, -0.023634962737560272, -0.016093609854578972, 0.037059783935546875, 0.0007417516317218542, 0.015739792957901955, 0.00738971633836627, 0.0007739742286503315, -0.022421875968575478, 0.009224509820342064, 0.04193234443664551, 0.005787431728094816, 0.04427764564752579, -0.031095441430807114, 0.024241505190730095, 0.016538407653570175, 0.005544814746826887, -0.0179941114038229, 0.006206957623362541, -0.0004770208615809679, 0.03032715432345867, 0.002501990180462599, 0.03435055539011955, -0.030529335141181946, 0.04306456074118614, 0.0008099877159111202, -0.009542944841086864, 0.00409163860604167, -0.0008068286697380245, 0.03794937953352928, 0.01649797149002552, 0.03558386117219925, -0.014728887937963009, -0.017812147736549377, 0.02025853842496872, 0.022745365276932716, 0.04597596451640129, 0.036958690732717514, -0.035381678491830826, -0.0335216149687767, -0.0007246925961226225, -0.021471625193953514, 0.019975485280156136, -0.01138279214501381, 0.03226809203624725, 0.02745618298649788, 0.012828386388719082, 0.007263353560119867, -0.015952082350850105, -0.0276381466537714, -0.016457535326480865, -0.009972578845918179, 0.025575900450348854, -0.02460543066263199, -0.002360463608056307, 0.017731275409460068, -0.04168972745537758, -0.01876239851117134, -0.026849640533328056, -0.027516838163137436, -0.01913643442094326, 0.0038995665963739157, 0.010038288310170174, 0.014253762550652027, 0.015001832507550716, 0.0011688590748235583, 0.004063838627189398, 0.01604306511580944, -0.03099435195326805, -0.0009060237207449973, -0.01758974976837635, -0.019490251317620277, 0.026364406570792198, 0.00843600369989872, -0.009558107703924179, 0.0018840744160115719, 0.022624056786298752, -0.0031439149752259254, -0.006358593236654997, -0.02185576967895031, 0.003659476526081562, -0.032874636352062225, 0.01210053451359272, -0.01054374035447836, -0.007692988030612469, 0.0015808029565960169, 0.003763094311580062, 0.022057950496673584, 0.0016869480023160577, 0.011918571777641773, 0.02151206135749817, 0.0051278164610266685, 0.011827589944005013, 0.019368942826986313, 0.029073631390929222, 0.012737404555082321, -0.04043620452284813, 0.012070206925272942, 0.02905341424047947, 4.517482375376858e-05, -0.004455564543604851, 0.017387568950653076, 0.020207993686199188, 0.0024539721198379993, -0.011109847575426102, -0.025495028123259544, 0.06732628494501114, -0.009093091823160648, -0.023493435233831406, 0.021491842344403267, 0.009957415983080864, 0.0510709285736084, -0.019732868298888206, 0.03344074264168739, 0.00465016346424818, -0.006469792686402798, 0.012029770761728287, 0.0009470917284488678, -0.02270492911338806, -0.010144433006644249, -0.019227415323257446, 0.016427207738161087, 0.011463664472103119, 0.03321834281086922, 0.012383587658405304, -0.0016187118599191308, 0.010270795784890652, -0.003060515271499753, -0.021471625193953514, -0.02519175596535206, 0.008046804927289486, 0.02110769972205162, 0.027435965836048126, -0.019277961924672127, -0.028689488768577576, -0.026000481098890305, 0.022806020453572273, -0.019712649285793304, -0.00017927770386449993, 0.014506489038467407, -0.007970986887812614, -0.028103163465857506, -0.013536020182073116, -0.01456714328378439, 0.0028482251800596714, 0.02454477734863758, 0.028588397428393364, 0.017438113689422607, -0.014759214594960213, 0.0018398473039269447, 0.003957693465054035, -0.014182998798787594, 0.004445455502718687, 0.02689007669687271, -0.034714482724666595, 0.032025475054979324, -0.006985354702919722, -0.0030074426904320717, -0.01118061039596796, 0.028002072125673294, -0.038919847458601, -0.00931549072265625, 0.002412272384390235, 0.002289700089022517, 0.014546925202012062, 0.005468996707350016, -0.04063838720321655, 0.024969356134533882, 0.026404842734336853, 0.021127916872501373, 0.004230638034641743, 0.008698838762938976, -0.03968813642859459, 0.004890253767371178, -0.012343151494860649, -0.020086685195565224, -0.030185626819729805, -0.04884693771600723, 0.0058581954799592495, 0.04086078703403473, -0.028750142082571983, -0.00544372433796525, 0.023978669196367264, 0.014546925202012062, -0.00670230109244585, -0.025737645104527473, -0.0011587500339373946, 0.03141893073916435, 0.02228034846484661, -0.011554645374417305, 0.014789542183279991, -0.011726499535143375, 0.024261724203824997, -0.007981096394360065, -0.017741385847330093, -0.059239041060209274, 0.010270795784890652, 0.02462564967572689, 0.017711058259010315, -0.04217496141791344, 0.00044353463454172015, 0.016669826582074165, 0.02905341424047947, 0.0012105589266866446, 0.005115179810672998, -0.010948102921247482, -0.022967765107750893, 0.006737682968378067, 0.015416303649544716, -0.04658250883221626, 0.008370294235646725, 0.015214121900498867, -0.026142006739974022, -0.012039880268275738, 0.02017766609787941, -0.0063232118263840675, 0.004164929036051035, 0.019025234505534172, -0.012990131042897701, 0.04003184288740158, -0.04205365478992462, -0.0022113549057394266, -0.035219933837652206, -0.03718109056353569, 0.006206957623362541, 0.03073151595890522, -0.014203216880559921, 0.009603599086403847, 0.022219695150852203, -0.010270795784890652, -0.0001502141822129488, 0.03147958591580391, -0.01586110144853592, 0.005559978075325489, -0.013192311860620975, 0.040982093662023544, 0.018651200458407402, 0.005893576890230179, 0.030286718159914017, -0.028871450573205948, 0.00048207538202404976, -0.032773543149232864, -0.04456069692969322, -0.04682512581348419, 0.018398473039269447, -0.03081238828599453, 0.007895168848335743, 0.0011688590748235583, -0.006262557115405798, -0.028406433761119843, -0.01753920502960682, -0.03835374116897583, -0.00914363656193018, -0.011989334598183632, -0.03129762411117554, 0.016467643901705742, -0.0030377700459212065, 0.008097350597381592, -0.004015820566564798, 0.03014519065618515, 0.051960524171590805, 0.01596219278872013, -0.02486826665699482, -0.005120234563946724, 0.018721962347626686, 0.006641646847128868, 0.009270000271499157, -0.041062965989112854, 0.011564754880964756, 0.014809760265052319, 0.009669307619333267, -0.017043860629200935, 0.02211860381066799, 0.02731465734541416, -0.013384384103119373, 0.010270795784890652, -0.017893020063638687, -0.00965919904410839, 0.005327470134943724, -0.019864285364747047, -0.009992796927690506, -0.02670811302959919, -0.008895965293049812, 0.01809520274400711, -0.03643302246928215, -0.005292088259011507, 0.0018171019619330764, -0.035300806164741516, -0.0016351391095668077, 0.009952360764145851, 0.004652691073715687, -0.004945853259414434, -0.009745125658810139, 0.024564994499087334, 0.0034749864134937525, -0.01649797149002552, 0.011130065657198429, -0.015355649404227734, -0.0054639424197375774, -0.028082944452762604, 0.000946459942497313, -0.009881597943603992, 0.02185576967895031, -0.02161315269768238, 0.0040006572380661964, -0.06469792872667313, -0.011291810311377048, 0.0049306899309158325, -0.010371887125074863, -0.011959007941186428, -0.008966729044914246, -0.005082325544208288, -0.006287829950451851, 0.0056357961148023605, -0.0023288726806640625, 0.03841439634561539, -0.03323855996131897, 0.015557830221951008, -0.01916676200926304, -0.00279515259899199, -0.023837143555283546, 0.010149487294256687, -0.015153467655181885, 0.0019737922120839357, 0.023473218083381653, -0.015850992873311043, -0.02494913898408413, 0.007728369906544685, 0.0005111389327794313, -0.030953915789723396]
metadata : {"source": "pydantic_ai_docs", "crawled_at": "2025-03-15T11:18:00.743304", "url_path": "/api/pydantic_graph/persistence/", "chunk_size": 2530}
updated_dt: 2025-03-15T11:18:09.176878
---
```
defdump_json(self, *, indent: int | None = None) -> bytes:
"""Dump the history to JSON bytes."""
  assert self._snapshots_type_adapter is not None, 'type adapter must be set to use `dump_json`'
  return self._snapshots_type_adapter.dump_json(self.history, indent=indent)

```
  
---|---  
####  load_json
```
load_json(json_data: str[](https://docs.python.org/3/library/stdtypes.html#str) | bytes[](https://docs.python.org/3/library/stdtypes.html#bytes) | bytearray[](https://docs.python.org/3/library/stdtypes.html#bytearray)) -> None

```

Load the history from JSON.
Source code in `pydantic_graph/pydantic_graph/persistence/in_mem.py`
```
162
163
164
165
```
| ```
defload_json(self, json_data: str | bytes | bytearray) -> None:
"""Load the history from JSON."""
  assert self._snapshots_type_adapter is not None, 'type adapter must be set to use `load_json`'
  self.history = self._snapshots_type_adapter.validate_json(json_data)

```
  
---|---  
###  FileStatePersistence `dataclass`
Bases: `BaseStatePersistence[](https://ai.pydantic.dev/api/pydantic_graph/persistence/#pydantic_graph.persistence.BaseStatePersistence "pydantic_graph.persistence.BaseStatePersistence")[StateT, RunEndT]`
File based state persistence that hold graph run state in a JSON file.
Source code in `pydantic_graph/pydantic_graph/persistence/file.py`
```
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
```
| ```
@dataclass
classFileStatePersistence(BaseStatePersistence[StateT, RunEndT]):
"""File based state persistence that hold graph run state in a JSON file."""
  json_file: Path
"""Path to the JSON file where the snapshots are stored.
  You should use a different file for each graph run, but a single file should be reused for multiple
  steps of the same run.
  For example if you have a run ID of the form `run_123abc`, you might create a `FileStatePersistence` thus:
  ```py
  from pathlib import Path
  from pydantic_graph import FullStatePersistence
  run_id = 'run_123abc'
  persistence = FullStatePersistence(Path('runs') / f'{run_id}.json')