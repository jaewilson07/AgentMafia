---
url: https://ai.pydantic.dev/api/pydantic_graph/persistence/
session_id: pydantic_ai_docs
chunk_number: 8
title: Setting Graph Types in Pydantic
summary: The method set_graph_types is used to set the types of the state and run end from a graph. Customization of this method is generally unnecessary; instead, users should implement set_types and should_set_types as needed.
embedding: [0.016313349828124046, 0.017115825787186623, 0.03346215561032295, -0.06696828454732895, -0.011586436070501804, -0.008546920493245125, 0.0003545185609254986, -0.03750751540064812, -0.009629713371396065, -0.002760572824627161, 0.0209303367882967, -0.01342223770916462, 0.041816700249910355, -0.005078684538602829, 0.004589504096657038, -0.0100529370829463, -0.01792929507791996, 0.033000458031892776, 0.03955217823386192, 0.056327227503061295, 0.013653087429702282, 0.007766429800540209, 0.020457645878195763, -0.005139145068824291, -0.014015850611031055, 0.009541771374642849, 0.012476854957640171, 0.05496411770582199, 0.011278636753559113, -0.02400832623243332, 0.010619067586958408, 0.004364151041954756, -0.02794375829398632, -0.012685718946158886, 0.018412979319691658, 0.012213027104735374, -0.009783613495528698, 0.014829318970441818, -0.006353852339088917, 0.02486576698720455, 0.022205503657460213, -0.05478823184967041, -0.014169749803841114, 0.029966438189148903, -0.030406150966882706, 0.027460074052214622, -0.006645162124186754, 0.05821799486875534, 0.013872943818569183, 0.018456950783729553, -0.017390647903084755, -0.04027770459651947, -0.010992824099957943, -0.002937832148745656, -0.029790552332997322, -0.004254222847521305, -0.03317634388804436, 0.009657195769250393, 0.006771579384803772, 0.004350409843027592, 0.04142095893621445, -0.03693588823080063, 0.010080419480800629, 0.05514000356197357, -0.04573014751076698, 0.007683984003961086, -0.03429761156439781, 0.015455910004675388, -0.046081915497779846, -0.029306868091225624, 0.03898055478930473, 0.03950820863246918, -0.04977550730109215, -0.018577871844172478, -0.03352811187505722, 0.0013782252790406346, -0.00589765002951026, 0.08482062816619873, 0.02301897294819355, -0.016808027401566505, -0.005309533793479204, 0.027372131124138832, 0.002738587325438857, 0.04339966922998428, 0.004548280965536833, -0.02809765748679638, -0.02160089835524559, -0.033572085201740265, -0.015334988944232464, -0.04647766053676605, 0.02785581536591053, -0.026140935719013214, -0.02126012183725834, 0.023568613454699516, 0.046829428523778915, -0.001964967232197523, 0.055008091032505035, -0.03363804146647453, -0.0173356831073761, -0.008827237412333488, 0.04946770519018173, 0.0050841812044382095, -0.036408230662345886, 0.036825958639383316, 0.04568617418408394, 0.0006774327484890819, 0.013070467859506607, 0.04638971760869026, 0.004806612152606249, -0.012125084176659584, -0.08499651402235031, -0.03508909419178963, 0.03612241894006729, 0.021117214113473892, -0.04230038449168205, -0.04388335347175598, -0.045004621148109436, 0.015499881468713284, 0.032318901270627975, -0.002819659188389778, -0.026316819712519646, 0.026910431683063507, -0.0224363524466753, 0.012817632406949997, 0.0313735194504261, 0.00709037110209465, -0.02486576698720455, -0.008898691274225712, -0.06775976717472076, -0.004144294653087854, 0.00491928867995739, -0.03154940530657768, 0.0010333254467695951, -0.01684100553393364, 0.009113050997257233, -0.01343323104083538, -0.057602398097515106, 0.021249128505587578, -0.051578328013420105, 0.005804210901260376, 0.000638614350464195, 0.029328852891921997, 0.0016612905310466886, 0.019292404875159264, 0.011443529278039932, 0.04212450236082077, -0.014994211494922638, 0.034737322479486465, -0.05549177527427673, 0.037903256714344025, 0.00554313138127327, 0.03618837520480156, -0.012322955764830112, -0.03796921297907829, 0.01919347047805786, -0.013653087429702282, -0.0036083944141864777, 0.020391687750816345, -0.0034187682904303074, -0.024206198751926422, -0.0009007244952954352, 0.04036564752459526, 0.01012988667935133, 0.010448679327964783, 0.005419461987912655, -0.02910899743437767, -0.03174727410078049, -0.009701167233288288, -0.023744499310851097, -0.0460379458963871, -0.008217135444283485, 0.00619445601478219, -0.024645911529660225, 0.04612588882446289, 0.023656556382775307, 0.015455910004675388, -0.06375838071107864, -0.01459847018122673, -8.601025911048055e-05, -0.00717281736433506, -0.012278984300792217, 0.00888220127671957, -0.09919924288988113, -0.01582966558635235, -0.052677612751722336, -0.022304439917206764, 0.020556580275297165, 0.009877052158117294, 0.00804125051945448, -0.018445957452058792, 0.0032016600016504526, 0.0006602564826607704, -0.005218842998147011, -0.0030999763403087854, 0.020281760022044182, -0.009569252841174603, 0.05452440679073334, 0.02653667703270912, 0.016786042600870132, 0.05298541113734245, 0.019951974973082542, 0.0007001054473221302, 0.02519555203616619, -0.006738600786775351, -0.004638971760869026, -0.035484835505485535, -0.032406844198703766, -0.020413674414157867, -0.03475930914282799, -0.028229571878910065, 0.008898691274225712, -0.02085338719189167, -0.03128557652235031, 0.04100323095917702, 0.02636079117655754, 0.060020819306373596, -0.07246469706296921, -0.03420966863632202, 0.02094133011996746, 0.04529043287038803, -0.037749357521533966, 0.03634227439761162, 0.03374796733260155, -0.005361749790608883, 0.012982524931430817, 0.014488541521131992, -0.025811150670051575, -0.030955791473388672, 0.005559620447456837, 0.05791019648313522, -0.053337179124355316, -0.020644523203372955, 0.011487500742077827, -0.0016324343159794807, -0.03128557652235031, -0.018742764368653297, -0.02359060011804104, -0.04889608174562454, 0.02842744253575802, -0.015104140155017376, -0.01146551501005888, 0.03201110288500786, -0.04586206004023552, -0.00771696213632822, 0.01702788472175598, 0.004710425157099962, 0.0064802695997059345, -0.042322371155023575, -0.010816938243806362, 0.03262669965624809, 0.004850583616644144, 0.018226101994514465, 0.004067344591021538, 0.014444570057094097, -0.0012346315197646618, -0.023634571582078934, 0.03308840095996857, 0.01960020512342453, -0.011740336194634438, 0.007980789989233017, 0.004894554615020752, 0.04454292356967926, -0.011696364730596542, 0.019292404875159264, -0.016895970329642296, -0.014620455913245678, 0.01480733323842287, 0.010877398774027824, 0.03212103247642517, -0.07607033848762512, 0.015269031748175621, 0.062263354659080505, 0.01827007345855236, -0.022535288706421852, -0.013686065562069416, 0.004748899955302477, -0.027833830565214157, 0.011163212358951569, -0.02644873410463333, -0.03143947571516037, -0.009981484152376652, -0.04271811246871948, 0.012993517331779003, 0.05887756496667862, -0.008250114507973194, 0.012289976701140404, -0.021040264517068863, 0.022557273507118225, 0.004792870953679085, -0.012487847357988358, 0.02684447541832924, 0.014576484449207783, 0.020534595474600792, -0.033000458031892776, 0.016027536243200302, -0.019116520881652832, -0.008167668245732784, -0.018797729164361954, 0.0191824771463871, 0.0014414340257644653, 0.01951226219534874, -0.004229488782584667, -0.052413783967494965, 0.024733852595090866, 0.007299235090613365, 0.019314391538500786, -0.010701513849198818, -0.03401179611682892, 0.009695670567452908, -0.0010505017125979066, -0.012828625738620758, -0.02710830420255661, -0.026162920519709587, -0.04317981004714966, -0.007623523473739624, -0.009102057665586472, 0.04568617418408394, -0.023568613454699516, -0.015093146823346615, -0.015170096419751644, -0.059932876378297806, -0.04946770519018173, 0.04183868691325188, 0.02433811128139496, -0.010805945843458176, -0.024228183552622795, -0.05263363942503929, 0.011130234226584435, 0.004619734361767769, -0.0011576818069443107, -0.007073882035911083, -0.037309642881155014, -0.02561328001320362, 0.017742417752742767, 0.060020819306373596, -0.008458977565169334, -0.010041944682598114, 0.02686646208167076, 0.0019951974973082542, 0.053996749222278595, -0.024799810722470284, -0.004556525498628616, -0.035836607217788696, -0.014059821143746376, -0.0005489541217684746, 0.0017025135457515717, -0.0013390633976086974, 0.03508909419178963, -0.04964359104633331, -0.002201312920078635, 0.03442952409386635, 0.020127860829234123, -0.006760586518794298, 0.045510292053222656, -0.0024321621749550104, 0.0072057959623634815, 0.01038821879774332, -0.030472107231616974, -0.018226101994514465, 0.013488194905221462, -0.04801665246486664, 0.019248435273766518, 0.0029405802488327026, -0.017412632703781128, -0.05364498123526573, -0.015807680785655975, -0.01458747684955597, -0.012037142179906368, -0.006381334271281958, -0.009574749507009983, 0.02994445152580738, 0.037331629544496536, 0.048324454575777054, 0.03174727410078049, 0.011344593949615955, -0.005023720674216747, -0.019237441942095757, -0.021985648199915886, 0.0383649542927742, 0.026338806375861168, 0.004311935044825077, 0.021062251180410385, 0.05162230134010315, -0.015972573310136795, 0.006788068450987339, 0.00709037110209465, 0.0016956430627033114, 0.016467250883579254, -0.00376229383982718, 0.0027166015934199095, -0.014752369374036789, 0.0015857148682698607, -0.0050704400055110455, 0.026954403147101402, 0.03860679641366005, 0.013949893414974213, 0.004856079816818237, 0.021457992494106293, 0.03471533581614494, 0.01593959517776966, -0.02660263329744339, 0.007359695620834827, 0.023150887340307236, 0.009003122337162495, 0.01935836300253868, -0.0032016600016504526, 0.035418879240751266, 0.028119642287492752, 0.004518050700426102, -0.023282799869775772, 0.04293796792626381, -0.022667203098535538, 0.010893888771533966, -0.03579263389110565, -0.02001793123781681, -0.026470718905329704, 0.015796687453985214, -0.008563409559428692, -0.008563409559428692, 0.01513711828738451, -0.03522100672125816, -0.05593148618936539, -0.0035534303169697523, -0.02717426046729088, -0.005804210901260376, 0.01179530005902052, 0.019984953105449677, -0.029416795819997787, 0.027591988444328308, -0.07382780313491821, 0.02018282376229763, 0.02403031289577484, 0.05848182365298271, -0.020204810425639153, 0.02627284824848175, 0.021139200776815414, 0.005474426317960024, -0.011971184983849525, 0.03761744126677513, -0.020138852298259735, -0.04704928398132324, -0.01567576639354229, 0.03983799368143082, 0.05412866547703743, -0.028383471071720123, -0.04403725266456604, -0.010311268270015717, -0.01892964169383049, 0.003597401548177004, -0.031571388244628906, -0.0066286725923419, 0.01037722546607256, -0.019490277394652367, -0.010399211198091507, -0.0018248087726533413, 0.010707010515034199, 0.06389029324054718, -0.03225294500589371, 0.06380234658718109, -0.04383938014507294, 0.03278059884905815, 0.00573275750502944, 0.0069474647752940655, 0.005037461407482624, -0.006436298135668039, 0.02367854304611683, 0.026668589562177658, -0.0004376517899800092, -0.019204463809728622, 0.0013706677127629519, 0.021370049566030502, 0.005202353931963444, 0.005320526659488678, 0.02968062460422516, 0.021139200776815414, -0.026162920519709587, 0.017368661239743233, 0.027130289003252983, 0.005820699967443943, 0.018698792904615402, -0.015972573310136795, -0.045422349125146866, 0.011399557814002037, 0.02776787243783474, 0.04263016954064369, 0.029724596068263054, 0.05601942911744118, -0.023304786533117294, -0.026338806375861168, 0.016489235684275627, -0.016148457303643227, 0.017709439620375633, 0.01047066505998373, -0.008678833954036236, 0.023128900676965714, 0.024623924866318703, -0.024733852595090866, -0.019644176587462425, 0.011575443670153618, -0.003976653795689344, -0.013037488795816898, -0.02842744253575802, -0.001003095181658864, 0.047664884477853775, -0.002407428342849016, -0.06397823244333267, 0.06494560092687607, 0.02785581536591053, 0.00012710451846942306, 0.04427909478545189, -0.05364498123526573, 0.003391286125406623, 0.013741029426455498, -0.023392729461193085, 0.007183810230344534, 0.02959268167614937, -0.03225294500589371, 0.03176926076412201, 0.01593959517776966, -0.010415700264275074, -0.05940521880984306, 0.0028114146552979946, -0.023634571582078934, -0.015565838664770126, -0.009074576199054718, -0.01691795513033867, 0.04139897599816322, -0.026668589562177658, -0.02069948799908161, -0.006414312869310379, 0.019831053912639618, -0.011861257255077362, 0.007651005405932665, 0.03834296762943268, -0.058657705783843994, -0.01726972684264183, 0.01776440255343914, 0.007848876528441906, -0.005468929652124643, 0.04194861650466919, -0.02776787243783474, -0.005485419183969498, -0.012564797885715961, 0.008876705542206764, -0.026338806375861168, 0.007771926466375589, 0.03917842358350754, -0.03141748905181885, 0.004226740915328264, 0.01958921179175377, 0.02669057622551918, 0.02293103002011776, 0.0039326827973127365, -0.05755842477083206, 0.015499881468713284, 0.017313698306679726, -0.024492010474205017, -0.003350062994286418, 0.021370049566030502, 0.05030316114425659, -0.00850294902920723, -0.02543739415705204, 0.0073926737532019615, 0.0014977722894400358, -0.008162171579897404, 0.07395971566438675, 0.02219451032578945, -0.006282398942857981, -0.05061095952987671, 0.02752603031694889, -0.036078449338674545, 0.0265146903693676, 0.0025022414047271013, -0.021117214113473892, -0.01909453421831131, -0.004938526079058647, -0.019962968304753304, -0.02427215501666069, -0.008453481830656528, -0.029746580868959427, -0.038233041763305664, -0.030801892280578613, 0.028977083042263985, 0.013620108366012573, -0.059009477496147156, 0.0069089895114302635, -0.032648686319589615, 0.038233041763305664, 0.010047441348433495, -0.018127165734767914, -0.001503268606029451, 0.017390647903084755, 0.043663494288921356, -0.01710483431816101, 0.05188612639904022, -0.003251127665862441, -0.0036111425142735243, 0.010871903039515018, -0.05703077092766762, -0.015444917604327202, 0.01575271598994732, 0.012366926297545433, 0.009288935922086239, 0.012300970032811165, 0.005515649449080229, -0.020875371992588043, 0.023832442238926888, -0.008579898625612259, -0.04212450236082077, 0.021578913554549217, 0.009789109230041504, 0.034561436623334885, 0.002000693930312991, -0.00896464753895998, -0.0030587532091885805, -0.030384164303541183, -0.025987034663558006, 0.026250863447785378, 0.0455542616546154, -0.04634574428200722, -0.01585165224969387, 0.001200278988108039, 0.010734491981565952, -0.0034187682904303074, 0.040079835802316666, -0.012685718946158886, -0.010102405212819576, 0.007953307591378689, -0.0071343425661325455, -0.0017354920273646712, -0.012696711346507072, -0.003006537212058902, 0.04212450236082077, 0.006469276733696461, -0.050742875784635544, 0.03401179611682892, 0.03636426106095314, -0.01584065891802311, 0.027042346075177193, 0.00538098718971014, 0.014994211494922638, 0.006188959814608097, -0.013763015158474445, -0.01960020512342453, 0.010107901878654957, 0.031153662130236626, -0.012048134580254555, 0.06617680191993713, 0.015543852932751179, -0.013697057962417603, -0.02534945122897625, 0.006342859473079443, 0.022469332441687584, 0.011102751828730106, 0.006024067290127277, -0.010954349301755428, -0.01902857795357704, -0.045510292053222656, -0.009019612334668636, -0.01343323104083538, -0.04328973963856697, 0.011047787964344025, -0.01146551501005888, -0.0033995306584984064, 0.01030577253550291, 0.019292404875159264, -0.00761253060773015, 0.007771926466375589, 0.023722514510154724, 0.018621843308210373, -0.02451399713754654, 0.03403378278017044, 0.062087468802928925, -0.011185198090970516, 0.017280718311667442, 0.005452440585941076, 0.022370396181941032, -0.02219451032578945, 0.02308492921292782, -0.003097228007391095, -0.00753008434548974, -0.012202034704387188, -0.05179818719625473, 0.048324454575777054, 0.020402681082487106, -0.01935836300253868, -0.028119642287492752, 0.015906615182757378, -0.03328626975417137, 0.001816564123146236, 0.0009646202670410275, 0.02627284824848175, -0.023480672389268875, -0.016808027401566505, -0.00742015615105629, 0.046741485595703125, -0.01676405593752861, 0.04546631872653961, -0.019490277394652367, -0.04709325730800629, -0.02134806290268898, -0.0026355294976383448, -0.026624619960784912, -0.0031274582725018263, 0.009646202437579632, -0.011333601549267769, 0.0019388592336326838, -0.006112010218203068, 0.03834296762943268, -0.008491956628859043, -0.004463086370378733, 0.023282799869775772, -0.02519555203616619, -0.0007646883022971451, 0.002355212578549981, 0.0017272473778575659, 0.02910899743437767, 0.02126012183725834, 0.03084586374461651, -0.010745485313236713, -0.030911820009350777, -0.008722805418074131, -0.014037836343050003, 0.008431496098637581, -0.0037513012066483498, 0.0018248087726533413, -0.004405374173074961, 0.02400832623243332, -0.010827931575477123, -0.02144699916243553, -0.024975694715976715, 0.02636079117655754, -0.016225408762693405, 0.03504512086510658, 0.019204463809728622, 0.009811094962060452, -0.06626474112272263, -0.0006685010739602149, -0.01726972684264183, 0.038079142570495605, 0.0072607602924108505, -0.005331519525498152, -0.004875317215919495, -0.019149499014019966, 0.017896316945552826, 0.008250114507973194, -0.017665468156337738, 0.050259191542863846, -0.033572085201740265, 0.02385442703962326, -0.0038145098369568586, 0.004806612152606249, -0.016313349828124046, -0.04331172630190849, 0.03616638854146004, 0.04353158175945282, 0.006496758665889502, -0.007161824498325586, -0.05342512205243111, 0.04164081811904907, 0.00010511887376196682, -0.018786735832691193, -0.046653542667627335, 0.0014854052569717169, -0.022304439917206764, -0.038255028426647186, -0.04537837579846382, 0.013774008490145206, -0.012520826421678066, -0.0020322983618825674, -0.035902563482522964, -0.010118894279003143, -0.004193762317299843, 0.03704581782221794, 0.037727370858192444, -0.009800102561712265, 0.011124737560749054, -0.05681091174483299, 0.019644176587462425, 0.006216441746801138, -0.022249475121498108, 0.03135153278708458, 0.00733770988881588, 0.01710483431816101, 0.02719624526798725, 0.027460074052214622, -0.004078337457031012, -0.032824572175741196, -0.01582966558635235, -0.006249420344829559, -0.014026843011379242, 0.0011652393732219934, 0.038650769740343094, 0.024975694715976715, -0.013169403187930584, -0.03409973904490471, -0.0024156731087714434, -0.10544316470623016, 0.021117214113473892, 0.03359406813979149, -0.021809762343764305, 0.030472107231616974, -0.010739988647401333, -0.01076197437942028, -0.006265909411013126, 0.04537837579846382, -0.05505206063389778, 0.00016489234985783696, -0.015027189627289772, -0.0023455938789993525, -0.0227771308273077, 0.03209904581308365, -0.03645220398902893, -0.008986633270978928, -0.019237441942095757, 0.017390647903084755, -0.019413325935602188, -0.034561436623334885, 0.0039903949946165085, -0.030735936015844345, 0.004611489363014698, 0.015356974676251411, 0.0007440767367370427, -0.0018577872542664409, -0.010399211198091507, 0.0020680250599980354, 0.019699139520525932, -0.003792524104937911, -0.03036217950284481, -0.0343855544924736, 0.011740336194634438, -0.02576717920601368, 0.04643368721008301, 0.028669284656643867, 0.028383471071720123, 0.024470025673508644, 0.012487847357988358, -0.0011418795911595225, -0.017148805782198906, 0.002907601883634925, 0.007975293323397636, 0.049819476902484894, 0.011064277030527592, 0.002355212578549981, 0.01530201081186533, -0.029130982235074043, 0.028713256120681763, 0.03027423657476902, -0.012707704678177834, 0.014928254298865795, -0.01942431926727295, 0.07066187262535095, 0.00554587971419096, -0.010206837207078934, -0.03429761156439781, -0.014609462581574917, 0.034561436623334885, -0.029988422989845276, 0.019160492345690727, 0.0027399612590670586, -0.02042466588318348, 0.009316418319940567, -0.021304093301296234, -0.00546343345195055, -0.02301897294819355, 0.0037183226086199284, -0.049071963876485825, -0.013411245308816433, -0.003616638947278261, -0.00014196200936567038, 0.010030951350927353, 0.007002428639680147, 0.01566477306187153, 0.00934389978647232, -0.0007475120364688337, 0.0043614027090370655, -0.0016118227504193783, 0.052765555679798126, 0.01976509764790535, 0.03396782651543617, 0.024909738451242447, -0.008893194608390331, -0.010789456777274609, 0.007469623815268278, 0.022645216435194016, 0.000189454440260306, 0.010668535716831684, -0.022205503657460213, 0.02785581536591053, 0.012509833090007305, -0.012971531599760056, -0.024887753650546074, -0.017962273210287094, 0.029240911826491356, -0.03313237056136131, 0.005919635761529207, -0.0008512567728757858, -0.007040903437882662, -0.00015561716281808913, 0.010333254002034664, -0.011443529278039932, -0.04595000296831131, 0.015104140155017376, 0.045906033366918564, -0.022227490320801735, -0.01176232099533081, 0.05689885467290878, 0.023216843605041504, -0.04889608174562454, -0.018643829971551895, 0.003745804773643613, -0.018599858507514, 0.006392327137291431, 0.03201110288500786, -0.034561436623334885, 0.002517356537282467, -0.02600902132689953, -0.013279330916702747, 0.029746580868959427, 0.00912404339760542, 0.020710479468107224, -0.030318208038806915, 0.008222632110118866, 0.006623176392167807, -0.02585512213408947, -0.012300970032811165, -0.016555191949009895, 0.04476277902722359, 0.03359406813979149, -0.03493519499897957, 0.031043734401464462, 0.0040453593246638775, 0.001538995304144919, 0.023062944412231445, -0.03647419065237045, -0.005221591331064701, -0.012685718946158886, -0.01442258432507515, -0.04295995458960533, 0.0044328561052680016, -0.056239284574985504, -0.00494402227923274, -0.003674351377412677, 0.017324689775705338, -0.07057392597198486, -0.01171835046261549, -0.0109268669039011, -0.011938206851482391, 0.01902857795357704, -0.015895623713731766, 0.05813005194067955, -0.0288451686501503, 0.03744155913591385, -0.015269031748175621, 0.027877800166606903, -0.039991892874240875, -0.0402117483317852, -0.014928254298865795, 0.01676405593752861, -0.031483449041843414, 0.028537370264530182, 0.02194167673587799, 0.016632141545414925, -0.004218495916575193, 0.019402334466576576, -0.01876475103199482, 0.012465862557291985, -0.04104720428586006, 0.014356628060340881, 0.026954403147101402, 0.02486576698720455, 0.016060516238212585, 0.06503354758024216, 0.044411007314920425, -0.01076197437942028, -0.01961119845509529, -0.001422196626663208, -0.008321567438542843, 0.01776440255343914, 0.0232608150690794, 0.016808027401566505, 0.07272852212190628, -0.005760239437222481, 0.022205503657460213, 0.027218231931328773, -0.008079725317656994, 0.02717426046729088, 0.0027207238599658012, 0.02935083955526352, -0.021227141842246056, 0.04353158175945282, -0.0325387567281723, -0.004009632393717766, 0.0241842120885849, 0.006062542088329792, 0.0013466209638863802, -0.0125538045540452, 0.022535288706421852, 0.013554152101278305, -0.004207503516227007, -0.02085338719189167, -0.015016197226941586, 0.009997973218560219, 0.00018979796732310206, 0.01176232099533081, -0.022491317242383957, 0.018709786236286163, -0.0004421176272444427, -0.01677504926919937, 0.020985299721360207, 0.012213027104735374, -0.06353852152824402, 0.026800503954291344, 0.025547321885824203, -0.03737559914588928, 0.022293446585536003, 0.01063006091862917, -0.022392382845282555, -0.00018601918418426067, -0.002525601303204894, 0.01092137023806572, -0.03401179611682892, 0.02686646208167076, 0.015378960408270359, 0.038233041763305664, 0.01037722546607256, -0.010503643192350864, -0.012817632406949997, 0.015488889068365097, -0.037661414593458176, -0.022084582597017288, 0.030669977888464928, 0.009932016022503376, 0.02761397324502468, -0.017368661239743233, -0.015488889068365097, 0.02352464199066162, 0.010047441348433495, 0.012476854957640171, -0.010476160794496536, -0.0309338066726923, 0.015071161091327667, -0.01117420569062233, -0.012520826421678066, 0.03278059884905815, 0.030054379254579544, 0.0042899493128061295, 0.017951281741261482, -0.00937687885016203, 0.018544893711805344, -0.033989809453487396, 0.010701513849198818, -0.015730731189250946, -0.00031192137976177037, 0.003924438264220953, -0.005386483855545521, 0.03605646267533302, 0.0027166015934199095, 0.03478129580616951, 0.003979402128607035, -0.006128499284386635, -0.009986980818212032, 0.009272446855902672, -0.016401292756199837, 0.008283092640340328, 0.018325036391615868, 0.02851538546383381, -0.026074977591633797, 0.025415409356355667, -0.008272100239992142, 0.006161477882415056, -0.026580648496747017, 0.007453134283423424, -0.030626006424427032, -0.02226046845316887, -0.011564450338482857, 0.0012538689188659191, -0.023040957748889923, -0.016071507707238197, 0.0218537338078022, 0.0034462502226233482, -0.00535625359043479, -0.01371904369443655, -0.02669057622551918, -0.011410551145672798, -0.011894235387444496, -0.009486806578934193, 0.03172529116272926, -0.01768745295703411, 0.019083542749285698, -0.04638971760869026, 0.0007248393376357853, 0.039310336112976074, 0.021150192245841026, 0.041245073080062866, -0.024953709915280342, -0.045906033366918564, -0.005260066129267216, -0.020226795226335526, -0.025217536836862564, 0.046917371451854706, 0.040563520044088364, -0.004160783719271421, 0.01179530005902052, -0.018401987850666046, 0.010025455616414547, -0.008354546502232552, 0.02101827971637249, -0.040673449635505676, -0.002187571953982115, 0.022667203098535538, 0.057250626385211945, 0.06292292475700378, 0.013356280513107777, -0.010250807739794254, -0.055667661130428314, 0.01851191557943821, -0.01176232099533081, 0.0232608150690794, 0.022139547392725945, 0.0009075950365513563, -0.01884170062839985, 0.021139200776815414, 0.011432536877691746, -0.017214762046933174, 0.03313237056136131, -0.021238135173916817, 0.0010058433981612325, 0.019995946437120438, 0.0008622496388852596, 0.03546284884214401, 0.013235359452664852, 0.020391687750816345, -0.019732119515538216, -0.023634571582078934, -0.006320873741060495, -0.017863338813185692, -0.0224363524466753, -0.026294834911823273, -0.0502152182161808, 0.007299235090613365, 0.028977083042263985, -0.01701689139008522, -0.04120110347867012, 0.01216905564069748, -0.007486112881451845, 0.01652221381664276, 0.06450589001178741, 0.016126472502946854, -0.027635958045721054, 0.012454869225621223, 0.015554845333099365, -0.0033940342254936695, 0.01633533649146557, 0.016324343159794807, 0.008387524634599686, -0.04113514721393585, -0.04161883145570755, 0.030626006424427032, 0.0009982858318835497, -0.008629366755485535, 0.013938900083303452, -0.029065025970339775, 0.014917261898517609, -0.012740682810544968, -0.0021023775916546583, 0.007700473070144653, 0.027591988444328308, 0.047576941549777985, 0.0037128261756151915, -0.018314044922590256, 0.044169165194034576, -0.0029955445788800716, 0.0316593311727047, 0.009684678167104721, 0.04027770459651947, 0.02142501436173916, 0.009102057665586472, -0.036144405603408813, -0.016038529574871063, 0.013741029426455498, -0.04339966922998428, 0.04559823125600815, -0.02427215501666069, -0.047576941549777985, 0.0026149179320782423, 0.024557968601584435, 0.03069196455180645, 0.015345982275903225, -0.002731716725975275, -0.0011961566051468253, -0.0028059182222932577, 0.028207585215568542, 0.02552533708512783, 0.0346713662147522, 0.004185517784208059, 0.017214762046933174, 0.002529723569750786, -0.0055541242472827435, 0.020556580275297165, -0.004537288099527359, 0.00021796708460897207, -0.04113514721393585, -0.010360736399888992, 0.024953709915280342, 0.0037842795718461275, 0.024535981938242912, -0.023304786533117294, -0.007359695620834827, 0.011685371398925781, -0.012333948165178299, -0.0021202408242970705, 0.01667611300945282, 0.04005784913897514, -0.010970838367938995, 0.009563757106661797, 0.019292404875159264, -0.00448232376947999, 0.014026843011379242, -0.02436009794473648, -0.0028471413534134626, 0.01288358960300684, 0.013356280513107777, -0.011949199251830578, -0.018918650224804878, 0.0182590801268816, 0.014950240030884743, 0.024470025673508644, 0.004072841256856918, -0.06573708355426788, 0.019699139520525932, -0.06635268777608871, -0.01582966558635235, 0.03513306379318237, -0.02477782405912876, -0.009360389783978462, 0.01576370932161808, 0.03902452439069748, 0.015236053615808487, 0.004218495916575193, 0.026118949055671692, 0.03135153278708458, 0.02735014632344246, 0.004042610991746187, -0.020633529871702194, -0.01800624467432499, 0.007442141883075237, 0.006150485016405582, 2.310210584255401e-05, 0.005320526659488678, 0.04443299397826195, 0.01635732129216194, 0.026558661833405495, 0.01968814805150032, -0.01521406788378954, 0.005309533793479204, 0.02484378218650818, -0.023568613454699516, 0.01652221381664276, -0.017654474824666977, -0.030538063496351242, 0.010586089454591274, 0.03451746702194214, -0.020149845629930496, -0.0017368661938235164, -0.021710826084017754, 0.008722805418074131, 0.014862298034131527, -0.00014033025945536792, 0.02135905623435974, -0.020787429064512253, 0.02917495369911194, -0.026954403147101402, 0.00016291708743665367, -0.023502657189965248, -0.02484378218650818, 0.006540730129927397, -0.0054991599172353745, 0.012081113643944263, -0.0040453593246638775, 0.0029048537835478783, 0.028229571878910065, -0.009877052158117294, 0.016906963661313057, 0.005246324930340052, -0.03319832682609558, 0.009310921654105186, -0.03660610318183899, 0.02818560041487217, 0.011201687157154083, -0.006952960975468159, 0.0004204754950478673, -0.009272446855902672, -0.00027275944012217224, 0.023128900676965714, 0.0038557329680770636, 0.007738947868347168, -0.0006272780010476708, -0.010531125590205193, 0.018907656893134117, -0.002316737547516823, 0.021139200776815414, -0.07395971566438675, 0.02917495369911194, 0.0028279039543122053, -0.012465862557291985, -0.02943878248333931, -0.012542812153697014, 0.0032401347998529673, 0.006826543714851141, -0.019787082448601723, -0.014400599524378777, 0.023304786533117294, 0.005595347378402948, -0.0031769261695444584, 0.026316819712519646, 0.005433203186839819, 0.025833135470747948, 0.010833428241312504, 0.0224363524466753, 0.008266603574156761, 0.019116520881652832, -0.004496064968407154, 0.011141226626932621, -0.02286507375538349, 0.008959151804447174, 0.005097921937704086, 0.00011035764327971265, -0.026822490617632866, 0.010393714532256126, -0.022667203098535538, -0.019160492345690727, 0.014631448313593864, -0.01304848212748766, -0.023832442238926888, 0.0015115132555365562, -0.03827701136469841, 0.0028636306524276733, -0.01818213053047657, -0.00554313138127327, -0.014059821143746376, -0.00322089740075171, 0.009640706703066826, 0.018314044922590256, -0.005875664297491312, 0.01264174748212099, 0.012861603870987892, 0.015653781592845917, -0.041486915200948715, 0.017951281741261482, 0.021161185577511787, -0.0011576818069443107, 0.021798769012093544, -0.0061669740825891495, 0.000917213736101985, -0.013554152101278305, -0.0132573451846838, 0.015104140155017376, 0.015642788261175156, 0.012158063240349293, -0.01833602972328663, 0.031901173293590546, -0.00527380732819438, 0.014202727936208248, 0.014565491117537022, 0.03517703711986542, -0.0227771308273077, -0.021908698603510857, -0.00904159713536501, 0.017445610836148262, 0.009794605895876884, 0.011916221119463444, -0.032890528440475464, 0.011520478874444962, 0.0007564437109977007, -0.012235012836754322, 0.035836607217788696, -0.009558260440826416, -0.004946770612150431, -0.010514635592699051, -0.007782919332385063, -0.00546618178486824, -0.032472800463438034, -0.022821102291345596, -0.024206198751926422, 0.038233041763305664, -0.01067403145134449, -0.01521406788378954, 0.03704581782221794, 0.015159104019403458, 0.005095173604786396, -0.03236287459731102, 0.004496064968407154, 0.01851191557943821, -0.007865365594625473, -0.005548627581447363, 0.044916678220033646, -0.0016351825324818492, 0.02561328001320362, 0.0035671712830662727, -0.012531818822026253, -0.02411825582385063, 0.010448679327964783, 0.04071741923689842, -0.009618720971047878, -0.005947117693722248, 0.03379194065928459, 0.007211292162537575, -0.019951974973082542, -0.0014909016899764538, 0.017214762046933174, 0.03893658146262169, -0.011806292459368706, -0.029790552332997322, 0.004012380726635456, -0.022414367645978928, -0.03761744126677513, -0.00573275750502944, 0.006029563955962658, -0.011608421802520752, 0.020985299721360207, 0.011971184983849525, 0.030208280310034752, -0.011113745160400867, -0.0074476380832493305, 0.025811150670051575, -0.03018629364669323, -0.0026410259306430817, -0.01154246460646391, -0.015719737857580185, 0.0033885380253195763, 0.014785347506403923, 0.012026148848235607, -0.015269031748175621, 0.039068493992090225, -0.005413965787738562, 0.01976509764790535, 0.04586206004023552, -0.009805599227547646, 0.025217536836862564, -0.037991199642419815, 0.0004228801990393549, -0.00912404339760542, -0.004207503516227007, -0.021117214113473892, -0.020578566938638687, -0.00410581985488534, 0.01591760851442814, -0.013235359452664852, 0.012366926297545433, -0.0014785347739234567, -0.012674725614488125, 0.0003069402591791004, 0.028229571878910065, -0.009728648699820042, -0.004408122505992651, -0.009338404051959515, 0.009420850314199924, -0.0025420906022191048, -0.008376531302928925, -0.02917495369911194, -0.001076609711162746, 0.0003461021988186985, -0.03979402035474777, -0.020248781889677048, -0.0049165403470396996, 0.029065025970339775, 0.030054379254579544, -0.01467541977763176, 0.01364209409803152, -0.009646202437579632, 0.04361952468752861, -0.00028443930204957724, -0.030164308845996857, 0.007557566277682781, 0.06666048616170883, 0.011047787964344025, 0.0007557566277682781, 0.003787027671933174, 0.0034654876217246056, 0.00013835499703418463, 0.019314391538500786, -0.01093236356973648, -0.013477201573550701, 0.031175648793578148, 0.00654622633010149, 0.010542117990553379, -0.03508909419178963, 0.04546631872653961, 0.002212305786088109, 0.0038200062699615955, 0.01609349437057972, 0.01928141340613365, -0.008915180340409279, 0.02567923627793789, 0.0022150538861751556, 0.019292404875159264, -0.012465862557291985, -0.03271464258432388, 0.05628325790166855, -0.02935083955526352, 0.029724596068263054, 0.03401179611682892, -0.02268918789923191, -0.008255610242486, 0.0015128874219954014, 0.03387988358736038, -0.010245312005281448, -0.0139608858153224, 0.010344247333705425, -0.0132573451846838, -0.011053284630179405, -0.00020577192481141537, 0.04295995458960533, -0.0009391993517056108, 0.009915526956319809, -0.008145682513713837, 0.006018571089953184, 0.010624564252793789, 0.0013555525802075863, -0.029065025970339775, 0.019622189924120903, -0.046741485595703125, -0.0009632461587898433, 0.0024733853060752153, -0.0200069397687912, 0.010058433748781681, 0.008244617842137814, -0.0055129011161625385, -0.012520826421678066, 0.005359001457691193, -0.0304501224309206, -0.009734145365655422, -0.01083892397582531, -0.02119416370987892, -0.016665121540427208]
metadata : {"source": "pydantic_ai_docs", "crawled_at": "2025-03-15T11:18:00.274809", "url_path": "/api/pydantic_graph/persistence/", "chunk_size": 4518}
updated_dt: 2025-03-15T11:18:00.276317
---
```
set_graph_types(graph: Graph[](https://ai.pydantic.dev/api/pydantic_graph/graph/#pydantic_graph.graph.Graph "pydantic_graph.Graph")[StateT, Any[](https://docs.python.org/3/library/typing.html#typing.Any "typing.Any"), RunEndT]) -> None

```

Set the types of the state and run end from a graph.
You generally won't need to customise this method, instead implement [`set_types`](https://ai.pydantic.dev/api/pydantic_graph/persistence/#pydantic_graph.persistence.BaseStatePersistence.set_types) and [`should_set_types`](https://ai.pydantic.dev/api/pydantic_graph/persistence/#pydantic_graph.persistence.BaseStatePersistence.should_set_types).
Source code in `pydantic_graph/pydantic_graph/persistence/__init__.py`
```
197
198
199
200
201
202
203
204
205
206
```
| ```
defset_graph_types(self, graph: Graph[StateT, Any, RunEndT]) -> None:
"""Set the types of the state and run end from a graph.
  You generally won't need to customise this method, instead implement
  [`set_types`][pydantic_graph.persistence.BaseStatePersistence.set_types] and
  [`should_set_types`][pydantic_graph.persistence.BaseStatePersistence.should_set_types].
  """
  if self.should_set_types():
    with _utils.set_nodes_type_context(graph.get_nodes()):
      self.set_types(*graph.inferred_types)

```
  
---|---  
####  should_set_types
```
should_set_types() -> bool[](https://docs.python.org/3/library/functions.html#bool)

```

Whether types need to be set.
Implementations should override this method to return `True` when types have not been set if they are needed.
Source code in `pydantic_graph/pydantic_graph/persistence/__init__.py`
```
208
209
210
211
212
213
```
| ```
defshould_set_types(self) -> bool:
"""Whether types need to be set.
  Implementations should override this method to return `True` when types have not been set if they are needed.
  """
  return False

```
  
---|---  
####  set_types
```
set_types(
  state_type: type[](https://docs.python.org/3/library/functions.html#type)[StateT], run_end_type: type[](https://docs.python.org/3/library/functions.html#type)[RunEndT]
) -> None

```

Set the types of the state and run end.
This can be used to create [type adapters](https://docs.pydantic.dev/latest/api/type_adapter/#pydantic.type_adapter.TypeAdapter) for serializing and deserializing snapshots, e.g. with [`build_snapshot_list_type_adapter`](https://ai.pydantic.dev/api/pydantic_graph/persistence/#pydantic_graph.persistence.build_snapshot_list_type_adapter).
Parameters:
Name | Type | Description | Default  
---|---|---|---  
`state_type` |  `type[](https://docs.python.org/3/library/functions.html#type)[StateT]` |  The state type. |  _required_  
`run_end_type` |  `type[](https://docs.python.org/3/library/functions.html#type)[RunEndT]` |  The run end type. |  _required_  
Source code in `pydantic_graph/pydantic_graph/persistence/__init__.py`
```
215
216
217
218
219
220
221
222
223
224
225
```
| ```
defset_types(self, state_type: type[StateT], run_end_type: type[RunEndT]) -> None:
"""Set the types of the state and run end.
  This can be used to create [type adapters][pydantic.TypeAdapter] for serializing and deserializing snapshots,
  e.g. with [`build_snapshot_list_type_adapter`][pydantic_graph.persistence.build_snapshot_list_type_adapter].
  Args:
    state_type: The state type.
    run_end_type: The run end type.
  """
  pass

```
  
---|---  
###  build_snapshot_list_type_adapter
```
build_snapshot_list_type_adapter(
  state_t: type[](https://docs.python.org/3/library/functions.html#type)[StateT], run_end_t: type[](https://docs.python.org/3/library/functions.html#type)[RunEndT]
) -> TypeAdapter[](https://docs.pydantic.dev/latest/api/type_adapter/#pydantic.type_adapter.TypeAdapter "pydantic.TypeAdapter")[list[](https://docs.python.org/3/library/stdtypes.html#list)[Snapshot[](https://ai.pydantic.dev/api/pydantic_graph/persistence/#pydantic_graph.persistence.Snapshot "pydantic_graph.persistence.Snapshot")[StateT, RunEndT]]]

```

Build a type adapter for a list of snapshots.
This method should be called from within [`set_types`](https://ai.pydantic.dev/api/pydantic_graph/persistence/#pydantic_graph.persistence.BaseStatePersistence.set_types) where context variables will be set such that Pydantic can create a schema for [`NodeSnapshot.node`](https://ai.pydantic.dev/api/pydantic_graph/persistence/#pydantic_graph.persistence.NodeSnapshot.node).
Source code in `pydantic_graph/pydantic_graph/persistence/__init__.py`
```
228
229
230
231
232
233
234
235
236
237
238
```
|