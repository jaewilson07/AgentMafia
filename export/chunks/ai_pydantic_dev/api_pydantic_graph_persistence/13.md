---
url: https://ai.pydantic.dev/api/pydantic_graph/persistence/
session_id: pydantic_ai_docs
chunk_number: 13
title: File State Persistence in Pydantic Graph
summary: This section explains how to specify the path for storing JSON snapshots using the FullStatePersistence class. It emphasizes using a unique file for each graph run while allowing the reuse of a file for different steps within the same run. Additionally, it describes the should_set_types method that indicates if types need to be set based on the snapshots type adapter.
embedding: [0.013781788758933544, 0.038261476904153824, 0.025543099269270897, -0.054616719484329224, 0.02713821269571781, 0.024330811575055122, 0.03277428448200226, -0.0450034961104393, 0.023352475836873055, -0.03332725912332535, -0.008214839734137058, 0.013696716167032719, 0.057977091521024704, -0.05270257964730263, -0.009522832930088043, 0.05151156336069107, 0.03483729809522629, 0.04187707230448723, 0.008220156654715538, 0.01170814037322998, 0.01201652828603983, -0.017790842801332474, -0.006747334264218807, -0.02862698771059513, -0.025011394172906876, -0.004554051905870438, 0.02454349398612976, 0.04632212221622467, 0.026287484914064407, -0.004992708098143339, 0.0004037633480038494, -0.014589980244636536, -0.023735303431749344, -0.004500881303101778, -0.01599368080496788, 0.028159087523818016, -0.02271442860364914, -0.009629174135625362, -0.007369428873062134, 0.007204600144177675, 0.02826542779803276, -0.0624859482049942, -0.007055722642689943, 0.04887430742383003, 0.014834564179182053, 0.011484824120998383, -0.014398566447198391, 0.06788807362318039, 0.029903078451752663, 0.04230243340134621, -0.052149608731269836, -0.024819981306791306, 0.01580226607620716, -0.025777049362659454, -0.014675052836537361, -0.01636587455868721, 0.009166590869426727, 0.020566342398524284, -0.016493482515215874, 0.016504118219017982, 0.04895937815308571, -0.01331388857215643, -0.016695531085133553, 0.05546744540333748, 0.012845988385379314, 0.024968858808279037, -0.003833591705188155, 0.031200438737869263, -0.050150398164987564, -0.008719959296286106, 0.024075593799352646, 0.03424178808927536, -0.04428037628531456, -0.04636465758085251, -0.004963464569300413, 0.016461580991744995, -0.010017318651080132, 0.050150398164987564, 0.0406009778380394, -0.04257892072200775, -0.022927111014723778, 0.02403305657207966, -0.0056998757645487785, 0.007039771880954504, -0.003583690384402871, -0.02662777714431286, -0.0598912313580513, -0.0416218526661396, -0.014547443948686123, 0.0049342205747962, 0.06359189748764038, -0.04445052146911621, -0.05691368132829666, 0.036942850798368454, 0.026074804365634918, -0.030647465959191322, 0.05134141817688942, -0.05002278834581375, -0.021098047494888306, -0.02174672670662403, 0.029541518539190292, 0.0003761811531148851, -0.05742412060499191, 0.01672743260860443, 0.024990126490592957, 0.04479081183671951, 0.024054326117038727, -0.013920031487941742, -0.0008593678940087557, -0.00894327461719513, -0.07711846381425858, -0.047725822776556015, 0.030477318912744522, 0.008454106748104095, -0.0025255978107452393, -0.0550420805811882, -0.04649226740002632, 0.02545802667737007, 0.03149819374084473, 0.006843040697276592, -0.031519461423158646, 0.0234588161110878, -0.03613466024398804, 0.04606690630316734, -0.0007310941000469029, -0.00903366506099701, -0.012207942083477974, -0.0007736305124126375, -0.07069547474384308, 0.011803846806287766, 0.011484824120998383, -0.020194148644804955, 0.04963996261358261, -0.013165011070668697, 0.0443229116499424, -0.01620636321604252, -0.04981010779738426, 0.007933035492897034, -0.03719806671142578, -0.013048036023974419, -0.017737671732902527, 0.01403700653463602, 0.0003409557102713734, 0.0239692535251379, 0.02362896129488945, 0.039197277277708054, -0.019279615953564644, 0.07120590656995773, -0.0203004889190197, 0.012059065513312817, -0.004960806109011173, 0.04857655242085457, -0.005545681342482567, -0.018375718966126442, 0.020725853741168976, 0.0368790440261364, 0.019035032019019127, 0.01161243300884962, 0.0015366269508376718, -0.0072737219743430614, -0.03351867198944092, 0.016419043764472008, 0.007305623963475227, -0.0009889709763228893, 0.0524473637342453, -0.02303345315158367, -0.011474189348518848, -0.04211102053523064, -0.010665998794138432, -0.0331571102142334, -0.016216997057199478, -0.021289460361003876, -0.017365479841828346, 0.0023860253859311342, 0.02866952307522297, -0.020396197214722633, -0.06044420227408409, 0.020151611417531967, -0.004968781489878893, -0.025224076583981514, -0.04908698797225952, -0.01201652828603983, -0.06567617505788803, -0.023203598335385323, -0.04538632184267044, -0.01750372163951397, 0.043068088591098785, 0.03436939790844917, 0.013728618621826172, 0.006422994192689657, 0.004636466037482023, -0.010921216569840908, -0.018694741651415825, 0.01331388857215643, 0.0008726605447009206, -0.04513110592961311, 0.03368881717324257, 0.021161850541830063, -0.033965304493904114, 0.04627958685159683, -0.03407164290547371, 0.03909093886613846, 0.004718880169093609, -0.0017439917428418994, 0.01617445982992649, -0.04000547155737877, -0.024990126490592957, -0.05623310059309006, -0.05789202079176903, -0.02324613370001316, -0.027116945013403893, 0.002857913263142109, -0.016291435807943344, 0.019407225772738457, 0.021342631429433823, 0.04423784092068672, -0.05827484652400017, 0.015376903116703033, 0.005434023216366768, 0.05474432557821274, 0.026010999456048012, 0.02530914917588234, 0.027840062975883484, 0.004748124163597822, 0.04904445260763168, 0.010985021479427814, 0.004803952760994434, -0.04895937815308571, 0.033965304493904114, 0.047555677592754364, -0.006954698823392391, 0.003530520014464855, 0.009246346540749073, -0.004479613155126572, -0.03298696503043175, -0.026904262602329254, -0.023714033886790276, -0.033561207354068756, 0.029647860676050186, 0.003612934146076441, -0.022225260734558105, 0.030945219099521637, -0.049214597791433334, 0.0004143974219914526, 0.0258833896368742, 0.013526570051908493, -0.022437943145632744, -0.07622519880533218, 0.01615319214761257, 0.014813295565545559, 0.013079938478767872, 0.02290584333240986, 0.008124449290335178, 0.004676343873143196, 0.009241029620170593, -0.04225989803671837, 0.021310728043317795, 0.002980205463245511, -0.01692948117852211, 0.030562393367290497, 0.04183453321456909, 0.06376203894615173, 0.02454349398612976, 0.009251663461327553, -0.002202587202191353, 0.011208337731659412, -0.003870811080560088, -0.007326892111450434, 0.016280801966786385, -0.047725822776556015, -0.030200833454728127, 0.06593139469623566, -0.01733357645571232, 0.017514357343316078, -0.005348950158804655, 0.04070731997489929, -0.011548628099262714, -0.0050591714680194855, -0.04351472109556198, 0.023012183606624603, -0.006109288427978754, -0.01747182011604309, -0.04043083265423775, 0.01804606057703495, 0.0005340310162864625, 0.02141707018017769, -0.027840062975883484, 0.027648650109767914, 0.012346185743808746, 0.004296174738556147, 0.01255886722356081, 0.0005204060580581427, 0.029541518539190292, -0.008900738321244717, 0.04057971015572548, -0.017992891371250153, -7.211246702354401e-05, -8.78143691807054e-05, 0.007380062714219093, 0.025734512135386467, -0.003708641044795513, -0.035815637558698654, -0.08273326605558395, 0.007305623963475227, 0.005561632104218006, 0.010756388306617737, -0.016472214832901955, -0.03594324365258217, -0.007427916396409273, 0.01732294261455536, -0.0024671102873981, -0.030987756326794624, -0.02737216278910637, -0.024075593799352646, 0.0007656548987142742, 0.011654969304800034, 0.01600431464612484, -0.009225078858435154, 0.024479689076542854, -0.008491326123476028, -0.03758089616894722, -0.026882994920015335, 0.04738553240895271, 0.0035252028610557318, -0.007789475377649069, -0.018737277016043663, -0.039920397102832794, 0.014430468901991844, -0.008704007603228092, 0.01452617533504963, 0.011378482915461063, -0.022289065644145012, -0.009023030288517475, 0.005986995995044708, 0.054063744843006134, -0.048831768333911896, -0.013165011070668697, 0.002956278854981065, -0.03736821562051773, 0.022182725369930267, -0.06793060898780823, 0.014068908989429474, -0.06367696821689606, -0.008406252600252628, -0.020789658650755882, 0.00801279116421938, -0.01789718307554722, 0.0663142204284668, -0.021342631429433823, -0.027244554832577705, 0.027648650109767914, 0.04768328741192818, -0.04147297516465187, 0.032838087528944016, -0.014228420332074165, 0.042515117675065994, -0.001357841189019382, -0.03217877447605133, -0.008353082463145256, 0.014494272880256176, -0.05023546889424324, 0.028775865212082863, 0.04115395247936249, 0.013664813712239265, -0.0226718932390213, -0.017907818779349327, -0.029307568445801735, -0.03819767385721207, -0.014643150381743908, 0.024883784353733063, 0.04479081183671951, -0.007146112620830536, 0.04504603147506714, 0.04781089723110199, 0.009416491724550724, 0.014281591400504112, -0.008119132369756699, 0.007709719706326723, 0.024245738983154297, 0.029903078451752663, 0.012899158522486687, 0.018726643174886703, 0.030987756326794624, -0.012463160790503025, -0.006582505535334349, 0.020736487582325935, -0.021098047494888306, 0.038771916180849075, 0.0021042218431830406, -0.018163036555051804, 0.017960987985134125, -0.001471493043936789, -0.009060249663889408, 0.027053140103816986, 0.014111445285379887, 0.0142390551045537, -0.011399751529097557, 0.01936468854546547, 0.020311124622821808, -0.040260687470436096, -0.029881810769438744, 0.0005619455478154123, -0.006625041831284761, 0.027308359742164612, -0.00028961297357454896, -0.012569501996040344, 0.002040417166426778, 0.007507672067731619, 0.02811655029654503, -0.017354844138026237, 0.036177195608615875, 0.007178015075623989, 0.004785343073308468, -0.0386868417263031, 0.007252453826367855, -0.030753806233406067, -0.014164616353809834, 0.008751860819756985, -0.0026199754793196917, 0.015153586864471436, -0.029307568445801735, -0.024330811575055122, -0.05636071041226387, -0.027606112882494926, 0.0056998757645487785, 0.014866466633975506, 0.045684076845645905, -0.033412329852581024, 0.043812476098537445, -0.05550998076796532, 0.0038894207682460546, 0.0028738644905388355, 0.028329232707619667, 0.01198462676256895, 0.020428098738193512, -0.05044815316796303, 0.01746118627488613, -0.052915263921022415, 0.022182725369930267, -0.02567070908844471, 0.008236107416450977, 0.0002460796386003494, -0.0076937684789299965, 0.03745328634977341, -0.04074985533952713, -0.066994808614254, -0.011952724307775497, -0.0323701873421669, 0.009145323187112808, -0.041983410716056824, -0.028222890570759773, -0.008416887372732162, -0.044918421655893326, -0.011548628099262714, 0.03909093886613846, 0.035028714686632156, 0.04912952333688736, -0.032838087528944016, 0.04874669760465622, -0.017067724838852882, 0.04243004322052002, -0.013377693481743336, 0.013803056441247463, 0.04130282998085022, 0.01639777608215809, 0.013345791026949883, 0.034156717360019684, -0.009560052305459976, -0.034497007727622986, 0.0036315438337624073, 0.03088141605257988, 0.01013429369777441, 0.00910278595983982, 0.02046000026166439, -0.0009065567282959819, -0.03626226633787155, -0.03590070828795433, 0.01479202788323164, 0.013888129964470863, 0.022629356011748314, -0.010931851342320442, 0.0165785551071167, 0.014377297833561897, 0.03696411848068237, 0.03938869386911392, 0.04228116571903229, 0.08634886145591736, 0.016302069649100304, -0.04013307765126228, -0.005763680208474398, -0.02061951346695423, 0.008863518945872784, 0.04283414036035538, -0.007640598341822624, 0.009714246727526188, -0.0018848935142159462, -0.037687238305807114, -0.0028313281945884228, 0.0315832644701004, -0.03683650866150856, -0.0007570147281512618, -0.0008141729631461203, 0.02454349398612976, 0.07001488655805588, 0.02452222630381584, -0.025628171861171722, 0.029860541224479675, -0.02123628929257393, 0.00866678822785616, 0.020895998924970627, -0.016461580991744995, 0.015695925801992416, 0.020608877763152122, -0.015685291960835457, 0.022799503058195114, 0.0008108498295769095, -0.021799897775053978, 0.017907818779349327, 0.024649834260344505, 0.012399355880916119, -0.04815118759870529, -0.020194148644804955, -0.0077682072296738625, 0.007427916396409273, -0.003822957631200552, -0.02157658152282238, 0.0576368011534214, -0.022246528416872025, 0.023331206291913986, -0.0412815622985363, 0.007954304106533527, -0.002703719073906541, -0.014313493855297565, 0.02399052120745182, -0.03758089616894722, 0.0003442788729444146, -0.009910977445542812, -0.02883966825902462, -0.020385561510920525, 0.03353993967175484, -0.01096375286579132, -0.034114181995391846, -0.028541915118694305, 0.005689241457730532, -0.01876918040215969, 0.020374927669763565, 0.029307568445801735, -0.024713639169931412, 0.0034002522006630898, -0.02010907605290413, 0.013739252462983131, 0.032689210027456284, -0.01096375286579132, -0.019258348271250725, 0.05206453427672386, -0.006880260072648525, -0.05036307871341705, -0.029988151043653488, 0.014345395378768444, 0.039367422461509705, -0.0009869770146906376, -0.01105946023017168, 0.023288670927286148, 0.020140977576375008, 0.007241819519549608, 0.019396591931581497, 0.027287090197205544, 0.006609090603888035, -0.0435359887778759, -0.004748124163597822, -0.025032661855220795, -0.0032992283813655376, -0.012090967036783695, -0.003825616091489792, 0.005186780355870724, -0.024437153711915016, -0.0650806650519371, 0.004141980316489935, -0.015196123160421848, -0.004056907724589109, -0.004851806443184614, -0.026478899642825127, 0.00399044482037425, 0.036007050424814224, -0.018354449421167374, 0.03230638429522514, -0.013739252462983131, 0.01690821349620819, 0.0003695348568726331, 0.007231185212731361, 0.01096375286579132, -0.015089782886207104, 0.014536809176206589, -0.017971621826291084, 0.0631665289402008, 0.010043904185295105, -0.013324522413313389, -0.0135903749614954, -0.08026615530252457, 0.026457631960511208, 0.005646705161780119, 0.030094493180513382, -0.009086835198104382, -0.016227630898356438, -0.026861727237701416, -0.022203993052244186, 0.017960987985134125, 0.01971561461687088, -0.0360921211540699, 0.01935405470430851, -0.0129416948184371, -0.00947497971355915, -0.018886154517531395, -0.01747182011604309, -0.01441983412951231, 0.007188648916780949, -0.021651020273566246, 0.01673806831240654, 0.08286087960004807, -0.05614802613854408, -0.0283079631626606, 0.03715553134679794, 0.013792422600090504, -0.013441497460007668, 0.013165011070668697, -0.0014635175466537476, -0.006396408658474684, 0.0160149484872818, -0.04298301786184311, -0.010320390574634075, -0.024671103805303574, -0.006077385973185301, 0.033752620220184326, 0.02043873257935047, -0.04449305683374405, 0.03032844327390194, -0.0014954197686165571, 0.017365479841828346, 0.009395224042236805, 0.005646705161780119, 0.022735698148608208, -0.0078958161175251, -0.021640386432409286, -0.01783338002860546, 0.03975025191903114, 0.0033364477567374706, -0.020970437675714493, 0.05487193539738655, 0.015132319182157516, -0.0154513418674469, -0.035028714686632156, 0.010469268076121807, 0.010814876295626163, 0.004288199357688427, -0.009804636240005493, -0.009070884436368942, -0.0035996416117995977, -0.05355330929160118, -0.027967672795057297, -0.014877100475132465, -0.04230243340134621, 0.01729104109108448, -0.020502537488937378, -0.012814085930585861, 0.04815118759870529, 0.026287484914064407, -0.015674658119678497, 0.0010793607216328382, 0.02939264103770256, 0.0027595479041337967, -0.04338711127638817, 0.019460396841168404, 0.07001488655805588, 0.008592349477112293, -0.004442393779754639, 0.0008081913110800087, 0.017439918592572212, -0.03088141605257988, 0.00883161649107933, 0.00734284333884716, -0.040069274604320526, -0.012835354544222355, -0.02641509473323822, 0.02197004295885563, 0.010070488788187504, -0.020555708557367325, -0.010027952492237091, 0.0247561763972044, -0.022076383233070374, -0.005492510739713907, 0.010277854278683662, -0.005737094674259424, -0.025351684540510178, -0.007459818385541439, 0.004721538629382849, 0.042153555899858475, 0.008810348808765411, 0.012314283289015293, -0.006284750998020172, 0.017769575119018555, -0.0078958161175251, -0.002424573991447687, -0.009155957028269768, 0.00949093047529459, 0.005519095808267593, -0.0019181250827386975, -0.002063014777377248, -0.014887734316289425, 0.028031477704644203, -0.019098836928606033, -0.0009145322837866843, 0.030626196414232254, -0.018365083262324333, 0.006917479448020458, 0.011803846806287766, -0.03662382811307907, -0.014579345472157001, 0.021066144108772278, 0.016865676268935204, 0.0012721037492156029, -0.007874548435211182, -0.014568711631000042, -0.020576976239681244, -0.02713821269571781, 0.0038309332448989153, -0.01440920028835535, 0.009825904853641987, 0.030966488644480705, -0.040090542286634445, -0.0022810136433690786, -0.03088141605257988, -0.0039824689738452435, -0.033220916986465454, 0.04002673923969269, 0.03324218466877937, 0.010878680273890495, -0.01496217306703329, 0.05555251985788345, -0.048236262053251266, 0.01971561461687088, -0.005986995995044708, -0.0028658888768404722, -0.019449761137366295, -0.010761705227196217, 0.021289460361003876, -0.019215811043977737, -0.023565156385302544, 0.03741075098514557, 0.027797527611255646, 0.001847674255259335, 0.012388722039759159, 0.0037059825845062733, 0.028754595667123795, -0.033412329852581024, 0.03949503228068352, 0.03815513849258423, 0.005293121561408043, -0.014164616353809834, -0.0104054631665349, 0.047513142228126526, -0.009517516009509563, -0.0055244131945073605, -0.04513110592961311, -0.0036421779077500105, -0.04130282998085022, -0.0016668945318087935, -8.872823673300445e-05, 0.003921322990208864, 0.0074066477827727795, -0.03628353774547577, -0.044578131288290024, 0.002173343440517783, 0.00827864371240139, 0.007794792298227549, 0.03034971095621586, -0.01440920028835535, 0.0165785551071167, -0.023139793425798416, 0.0226718932390213, 0.015270561911165714, 0.0062687997706234455, 0.013983836397528648, 0.02900981530547142, 0.009501565247774124, 0.027946405112743378, -0.006561237387359142, 0.0019447103841230273, -0.02975420095026493, -0.030370978638529778, 0.0276911873370409, -0.010586243122816086, -0.012792817316949368, 0.005037902854382992, 0.02547929435968399, 0.006773919332772493, -0.0025827561039477587, -0.0050591714680194855, -0.07954303920269012, 0.005295780021697283, 0.014100811444222927, -0.02605353482067585, 0.000992958783172071, -0.009118737652897835, -0.0010773668764159083, -0.002453817753121257, 0.00646021356806159, -0.043068088591098785, -0.003612934146076441, -0.01750372163951397, -0.007555525284260511, 0.025224076583981514, 0.03926108404994011, -0.039728984236717224, 0.04311062768101692, -0.0033896181266754866, 0.009161273948848248, -0.021640386432409286, -0.015281196683645248, -0.00526121910661459, -0.0069121625274419785, 0.012899158522486687, -0.004944854881614447, 0.023373743519186974, -0.01783338002860546, -0.017960987985134125, -0.008161668665707111, -0.014706955291330814, 0.011187069118022919, -0.008571081794798374, -0.011293410323560238, -0.002538890577852726, -0.014909002929925919, 0.04802357777953148, 0.004580636974424124, 0.03294442966580391, 0.023565156385302544, 0.012399355880916119, -0.017418649047613144, -0.01321818120777607, 0.012835354544222355, -0.02309725619852543, 0.049384742975234985, 0.011740041896700859, -0.02254428341984749, 0.016482848674058914, -0.03962264209985733, 0.022756965830922127, 0.025947194546461105, 0.03930361941456795, 0.02809528261423111, -0.021129949018359184, 0.03628353774547577, 0.030987756326794624, -0.002691755536943674, -0.007512988988310099, -0.0006493445252999663, 0.01013429369777441, -0.066994808614254, 0.005625437013804913, 0.002098904689773917, -0.008220156654715538, 0.027265822514891624, -0.0022451234981417656, 0.00010526093683438376, -0.019843224436044693, -0.007284355815500021, -0.033220916986465454, -0.009363321587443352, 0.0037405432667583227, -0.005742412060499191, 0.012580135837197304, 0.0011604457395151258, 0.051809318363666534, 0.0030865464359521866, -0.06133746728301048, 0.0038070064038038254, -0.00910278595983982, 0.049172062426805496, 0.017812110483646393, 0.04096253961324692, 0.006332604214549065, 0.0038787866942584515, -0.00493156211450696, -0.014207152649760246, -0.0072365025989711285, 0.02584085427224636, 0.005359584465622902, -0.007810743525624275, 0.009778051637113094, 0.01134658046066761, -0.0330507718026638, -0.05746665596961975, -0.003445447189733386, 0.012697110883891582, -0.0309026837348938, 0.007108893245458603, -0.0048730745911598206, 0.005933825857937336, -0.0012029821518808603, 0.02343754842877388, 0.008725276216864586, -0.016450947150588036, 0.01599368080496788, 0.0085444962605834, -0.028733327984809875, -0.016514752060174942, 0.03381642699241638, 0.016982652246952057, -0.044748276472091675, 0.014898369088768959, 0.03200862929224968, -0.014079543761909008, 0.0002784803800750524, 0.04542885720729828, -0.008868835866451263, 0.010756388306617737, 0.007943670265376568, -0.02043873257935047, -0.013771154917776585, 0.000352254428435117, 0.021693555638194084, -0.010889314115047455, -0.0005469913012348115, -0.0019048324320465326, -0.02439461648464203, -0.012090967036783695, 0.047725822776556015, -0.005545681342482567, 0.03445447236299515, -0.04581168666481972, 0.055339835584163666, -0.01877981424331665, -0.01656792126595974, 0.028137817978858948, -0.0517667792737484, -0.011537994258105755, -0.019577370956540108, -0.009607905521988869, -0.03166833892464638, -0.0013498655753210187, 0.01653601974248886, -0.025415489450097084, -0.004317442886531353, 0.03928235173225403, -0.018886154517531395, -0.006114605348557234, -0.004865099210292101, -0.04606690630316734, 0.00931546837091446, -0.007858596742153168, 0.05155409872531891, 0.0006137867458164692, 0.05750919133424759, -0.011229605413973331, 0.029839273542165756, -0.01386686135083437, -0.031753409653902054, -6.322302215266973e-05, 0.008151034824550152, -0.03109409660100937, 0.0275210402905941, 0.050320543348789215, 0.006492115557193756, 0.04277033358812332, 0.008315863087773323, -0.007832012139260769, 0.016280801966786385, 0.0015033953823149204, -0.010644730180501938, 0.004524807911366224, 0.03466715291142464, 0.0008660142193548381, 0.0316896066069603, -0.014366663992404938, 0.00810318160802126, -0.019800687208771706, 0.003788396716117859, 0.0011544640874490142, 0.03086014650762081, 0.028903473168611526, 0.004522149451076984, 0.05338316410779953, -0.012686477042734623, -0.003921322990208864, -0.002590731717646122, -0.014951539225876331, 0.007225868292152882, 0.026351289823651314, 0.005566949490457773, -0.01201652828603983, 0.05074590817093849, -0.012346185743808746, 0.010277854278683662, 0.024139398708939552, -0.010368243791162968, 0.0165785551071167, 0.026691582053899765, -0.0057317777536809444, 0.016323337331414223, -0.0029748883098363876, -0.042897943407297134, 0.008709324523806572, 0.041962143033742905, -0.008347765542566776, -0.006013581529259682, -0.017546258866786957, 0.013058669865131378, 0.015408805571496487, -0.05100112408399582, 0.022033847868442535, -0.027988940477371216, -0.07469388842582703, 0.022289065644145012, 0.00014380953507497907, -0.01713152974843979, 0.01822684146463871, -0.0247561763972044, -0.0024485005997121334, -0.012484429404139519, -0.01746118627488613, -0.0046603926457464695, -0.028712060302495956, 0.018684107810258865, -0.00836903415620327, 0.017960987985134125, 0.01320754736661911, -0.010703218169510365, -0.02473490685224533, 0.026457631960511208, -0.015929875895380974, -0.004702928941696882, 0.025224076583981514, 0.005550998263061047, 0.027095677331089973, 0.008044693619012833, -0.008411570452153683, 0.0398140549659729, 0.012165405787527561, -0.006571871228516102, -0.006625041831284761, -0.011835749261081219, -0.01265457458794117, -0.019641175866127014, -0.005800899583846331, -0.003660787595435977, -0.003862835466861725, 0.010495852679014206, -0.0038522013928741217, -0.00019623230036813766, -0.004346686881035566, -0.018173670396208763, -0.006598456762731075, -0.0071248444728553295, -0.017450552433729172, -0.004867757670581341, -0.02063014730811119, 0.01728040724992752, -0.0009610564447939396, -0.004732172936201096, 0.014898369088768959, -0.01602558232843876, 0.004942196421325207, 0.006603773683309555, -0.0028339866548776627, 0.014632516540586948, 0.01507914811372757, 0.011431653052568436, 0.0012142808409407735, 0.026181144639849663, -0.01584480330348015, 0.010022635571658611, -0.04479081183671951, 0.004131346475332975, -0.04185580089688301, 0.0038814451545476913, -0.004386564716696739, -0.0016057485481724143, -0.04096253961324692, -0.017801476642489433, 0.02362896129488945, -0.014015738852322102, -0.01385622750967741, 0.0018702716333791614, -0.02658523991703987, 0.01784401386976242, 0.022629356011748314, 0.020789658650755882, 0.009506882168352604, -0.0030971805099397898, 0.04704524204134941, -0.07643788307905197, -0.004256296902894974, 0.03309330716729164, -0.01858839951455593, 0.03604958578944206, 0.0019035032019019127, -0.05172424390912056, -0.0076990858651697636, -0.008868835866451263, -0.0021839775145053864, -0.0021866359747946262, -0.0195135660469532, 0.008629568852484226, -0.015376903116703033, -0.021151216700673103, 0.009320785291492939, -0.020906632766127586, 0.0013943958329036832, -0.033497404307127, -0.017163431271910667, 0.04113268479704857, 0.03492237254977226, 0.039728984236717224, 0.03371008485555649, -0.03311457484960556, -0.02956278808414936, -0.003650153521448374, -0.017344210296869278, 0.029498983174562454, 0.02046000026166439, 0.006561237387359142, -0.01880108192563057, -0.009267615154385567, 0.00276486505754292, 0.009140005335211754, 0.021863702684640884, -0.03164707124233246, -0.006747334264218807, 0.030030688270926476, -0.014068908989429474, 0.014866466633975506, 0.0005071134655736387, 0.021906238049268723, -0.0035943244583904743, -0.001721394364722073, -0.013260717503726482, -0.01730167493224144, -0.03560295328497887, -0.023309938609600067, -0.006199677940458059, 0.00399576174095273, 0.031519461423158646, -0.013622277416288853, -0.04998025298118591, -0.01899249665439129, -0.005848752800375223, 0.003966517746448517, 0.044025156646966934, 0.035071250051259995, -0.006497432943433523, -0.011325312778353691, -0.0011464884737506509, -0.013005499728024006, 0.017812110483646393, 0.00646553048864007, 0.013515936210751534, -0.038771916180849075, -0.00856044702231884, 0.04632212221622467, 0.014706955291330814, -0.014441102743148804, 0.010070488788187504, -0.042855408042669296, 0.0074066477827727795, -0.00827332679182291, -0.007874548435211182, -0.030477318912744522, 0.016972018405795097, 0.026351289823651314, 0.010346975177526474, -0.0170889925211668, 0.031200438737869263, 0.007789475377649069, 0.00892200693488121, 0.01320754736661911, 0.016461580991744995, 0.0056201196275651455, -0.0015127002261579037, -0.048491477966308594, -0.007268404588103294, 0.009916294366121292, -0.000955739407800138, 0.0018556497525423765, -0.006109288427978754, -0.006050800904631615, -0.008576398715376854, 0.005274511873722076, 0.045641541481018066, 0.014324127696454525, -0.010708535090088844, 0.02211892046034336, -0.001270109903998673, 0.028797132894396782, -0.0157916322350502, 0.04336584359407425, 0.0015180172631517053, 0.020864097401499748, 0.028882205486297607, -0.0010733790695667267, 0.008432838134467602, -0.016280801966786385, -0.01403700653463602, -0.013526570051908493, -0.012229210697114468, 0.02956278808414936, 0.002580097643658519, 0.014441102743148804, -0.01386686135083437, -0.02773372270166874, 0.025011394172906876, -0.011474189348518848, 0.007906450890004635, 0.0002464119461365044, -0.012962963432073593, -0.015089782886207104, 0.024713639169931412, 0.02862698771059513, -0.015196123160421848, 0.03109409660100937, -0.040111809968948364, -0.0018835642840713263, 0.022820770740509033, -0.007512988988310099, -0.016259532421827316, 0.01969434693455696, 0.002291647717356682, 0.009347370825707912, 0.03481603041291237, 0.03458208218216896, -0.05351077392697334, 0.0024857199750840664, -0.028393037617206573, -0.027010604739189148, 0.028690790757536888, -0.01783338002860546, 0.017344210296869278, 0.02490505389869213, 0.02214018814265728, 0.014345395378768444, -0.0013664814177900553, 0.04891684278845787, 0.01784401386976242, 0.01969434693455696, 0.032242581248283386, -0.028563182801008224, -0.03277428448200226, 0.007257770746946335, -0.0208109263330698, -0.014026372693479061, 0.0023993179202079773, 0.02992434613406658, 0.019056299701333046, -0.007225868292152882, -0.0008912701741792262, -0.014823930338025093, -0.03086014650762081, 0.006821772549301386, -0.01881171576678753, 0.028775865212082863, -0.009533467702567577, -0.04296175017952919, 0.022778233513236046, -0.0026571948546916246, -0.0367727056145668, 0.022416675463318825, -0.04449305683374405, -0.019588004797697067, 0.018513960763812065, -0.014983441680669785, 0.00706635694950819, -0.011591164395213127, 0.006986601278185844, -0.010198098607361317, 0.02305472083389759, -0.028052745386958122, -0.005354267545044422, 0.001170415198430419, -0.006720748730003834, 0.039728984236717224, 0.016259532421827316, -0.00369534851051867, 0.015249294228851795, -0.017631331458687782, 0.013281986117362976, -4.2017141822725534e-05, -0.020959803834557533, -0.013834958896040916, -0.009336736053228378, 0.024309543892741203, -0.002517622197046876, -0.02811655029654503, 0.023352475836873055, -0.0005732442368753254, -0.0010893301805481315, 0.022182725369930267, 0.018737277016043663, 0.03994166478514671, -0.010267219506204128, -0.01535563450306654, 0.039920397102832794, 0.044663205742836, 0.016482848674058914, -0.08426457643508911, 0.012069699354469776, 0.0380062609910965, -0.01582353562116623, -0.0276911873370409, 0.019258348271250725, 0.03051985614001751, -0.0004223730065859854, -0.032625406980514526, -0.02917996048927307, 0.06503812968730927, -0.007151429541409016, -0.01517485547810793, 0.0058328015729784966, -0.00023860252986196429, 0.06376203894615173, -0.02176799438893795, 0.02192750573158264, 0.0036155926063656807, 0.011378482915461063, 0.014536809176206589, 0.006034849677234888, -0.02788260020315647, 0.013749886304140091, -0.010299121960997581, 0.0025335734244436026, -0.007922401651740074, 0.0204706359654665, -0.005340974777936935, -0.008427521213889122, 0.013122474774718285, -0.004312125965952873, -0.03579436615109444, -0.012441892176866531, -0.02456476166844368, -0.008225473575294018, -0.003788396716117859, -0.011208337731659412, -0.029498983174562454, -0.015281196683645248, 0.020417464897036552, 0.011389116756618023, -0.012718379497528076, 0.019088203087449074, -0.001321951043792069, -0.0364324152469635, -0.01255886722356081, 0.0021467581391334534, 0.018545864149928093, 0.005237292498350143, 0.030413515865802765, 0.012973597273230553, -0.019417859613895416, -0.0054871938191354275, -0.004788001999258995, -0.004822562448680401, 0.005715826526284218, -0.0110807279124856, -0.03906967118382454, 0.027797527611255646, -0.020970437675714493, 0.00987375807017088, 0.005176146514713764, 0.01533436682075262, -0.029647860676050186, -0.010219366289675236, -0.02828669548034668, 0.011580530554056168, -0.017003919929265976, 0.02121502161026001, -0.031519461423158646, 0.02269316092133522, 0.03975025191903114, -0.009453711099922657, 0.0247561763972044, -0.0079808896407485, -0.03515632078051567, 0.010634096339344978, -0.03760216385126114, -0.022820770740509033, -0.03649621829390526, -0.027967672795057297, -0.004915610887110233, 0.021459605544805527, -0.003054644213989377, -0.019449761137366295, 0.025415489450097084, 0.025224076583981514, 0.01161243300884962, -0.017035821452736855, -0.002122831530869007, 0.010533072054386139, 0.000792240141890943, -0.008214839734137058, 0.029690396040678024, -0.011314678005874157, 0.035624220967292786, -0.0040196883492171764, -0.022586820647120476, -0.02309725619852543, -0.006784553173929453, 0.03439066559076309, 0.005370218772441149, -0.04255765303969383, 0.022608088329434395, -0.029520250856876373, 0.0005991648649796844, 0.0023341840133070946, 0.026542704552412033, 0.024309543892741203, -0.0065559204667806625, -0.005503144580870867, -0.009517516009509563, -0.038771916180849075, -0.009496248327195644, 0.027414700016379356, -0.019279615953564644, -0.01562148705124855, 0.02194877527654171, 0.015025977976620197, 0.033199649304151535, 0.015536414459347725, -0.012431258335709572, 0.02788260020315647, -0.04272779822349548, 0.00883161649107933, -0.0028260110411792994, -0.03481603041291237, 0.011399751529097557, 0.01282471977174282, 0.012409990653395653, -0.00613587349653244, 0.03962264209985733, -0.03645368292927742, -0.0062315803952515125, 0.027031872421503067, -0.005317048169672489, 0.0035172272473573685, -0.05355330929160118, 0.030179565772414207, 0.015249294228851795, 0.007911767810583115, -0.01321818120777607, -0.042493849992752075, 0.0018024792661890388, -0.005444657057523727, -0.02384164370596409, -0.01714216358959675, -0.004617856349796057, 0.0009404529118910432, -0.0033417646773159504, 0.008719959296286106, 0.010315073654055595, -0.018343815580010414, -0.011101996526122093, 0.0030280589126050472, -0.0009238371276296675, 0.003333789063617587, -0.012463160790503025, 0.0011165800970047712, 0.0027489138301461935, -0.04508856683969498, -0.03911220654845238, 0.02530914917588234, 0.060359131544828415, 0.005032585933804512, -0.012356819584965706, 0.014387932606041431, -0.0021082095336169004, 0.03185975179076195, 0.02049190364778042, -0.03558168560266495, 0.003195545868948102, 0.04700270667672157, -0.01105946023017168, 0.007906450890004635, 0.014898369088768959, 0.01749308779835701, -0.0009896355913951993, 0.022608088329434395, -0.020364293828606606, -0.006199677940458059, 0.009751466102898121, -0.033497404307127, -0.018109865486621857, -0.04221736267209053, 0.0036049585323780775, 0.016504118219017982, -0.023161061108112335, -5.4873598855920136e-05, 0.0015871388604864478, -0.01934342086315155, 0.025777049362659454, -0.021151216700673103, 0.042132288217544556, -0.009124054573476315, -0.007475769612938166, 0.03649621829390526, 0.010995655320584774, 0.01096375286579132, 0.009182541631162167, 0.01385622750967741, -0.0008095205994322896, -0.02066204883158207, 0.01935405470430851, 0.02513900399208069, -0.008390301838517189, -0.011272141709923744, -0.004229711834341288, -0.010931851342320442, -0.009017713367938995, 0.02197004295885563, -0.010261902585625648, -0.02177862823009491, -0.02492632158100605, 0.023947983980178833, 0.017067724838852882, -0.004490246996283531, -0.009421809576451778, 0.01638714224100113, -0.03560295328497887, 0.0009065567282959819, 0.010346975177526474, -0.01654665358364582, -0.007709719706326723, 0.005492510739713907, -0.005598851479589939, 0.006050800904631615, 0.024054326117038727, -0.0034613984171301126, -0.04389755055308342, -0.016440313309431076, -0.021087413653731346, -0.017025187611579895]
metadata : {"source": "pydantic_ai_docs", "crawled_at": "2025-03-15T11:18:00.969046", "url_path": "/api/pydantic_graph/persistence/", "chunk_size": 873}
updated_dt: 2025-03-15T11:18:00.969046
---
```

Path to the JSON file where the snapshots are stored.
You should use a different file for each graph run, but a single file should be reused for multiple steps of the same run.
For example if you have a run ID of the form `run_123abc`, you might create a `FileStatePersistence` thus:
```
frompathlibimport Path
frompydantic_graphimport FullStatePersistence
run_id = 'run_123abc'
persistence = FullStatePersistence(Path('runs') / f'{run_id}.json')

```

####  should_set_types
```
should_set_types() -> bool[](https://docs.python.org/3/library/functions.html#bool)

```

Whether types need to be set.
Source code in `pydantic_graph/pydantic_graph/persistence/file.py`
```
104
105
106
```
| ```
defshould_set_types(self) -> bool:
"""Whether types need to be set."""
  return self._snapshots_type_adapter is None

```
  
---|---  
© Pydantic Services Inc. 2024 to present