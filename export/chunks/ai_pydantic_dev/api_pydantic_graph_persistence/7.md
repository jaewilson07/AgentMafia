---
url: https://ai.pydantic.dev/api/pydantic_graph/persistence/
session_id: pydantic_ai_docs
chunk_number: 7
title: Recording Node Run in Pydantic Graph
summary: This section describes the procedure for recording the run of a node in Pydantic Graph, including required parameters like snapshot ID, potential errors such as GraphNodeRunningError and LookupError, and the return type which is an async context manager. It specifies that the node's status should be updated to 'running' during the recording.
embedding: [0.0502060204744339, 0.05123703554272652, -0.016148855909705162, -0.07961240410804749, 0.020037580281496048, 0.014355783350765705, 0.018199682235717773, -0.03938034549355507, -0.010876103304326534, 0.004073635675013065, 0.019163457676768303, 0.006432646419852972, 0.03034774586558342, -0.049668096005916595, 0.0051326691173017025, 0.015532487072050571, -0.03465111926198006, 0.020474642515182495, 0.042495809495449066, 0.03953723981976509, 0.027478830888867378, -0.02566334418952465, 0.015510073862969875, -0.0012208300177007914, 0.00936880148947239, 0.004681599326431751, 0.013190287165343761, 0.06419198215007782, 0.023287523537874222, -0.049040522426366806, -0.009452852420508862, -0.014378197491168976, -0.031446002423763275, 0.024968529120087624, 0.013885102234780788, -0.0003880320000462234, -0.03738555312156677, 0.022828049957752228, 0.0011339780176058412, 0.01212565042078495, 0.025282317772507668, -0.0377889946103096, 0.029697757214307785, -0.008085634559392929, 0.004614359233528376, -0.0011171679943799973, -0.006830484140664339, 0.06674710661172867, 0.022749602794647217, -0.009458455257117748, -0.043638892471790314, -0.030549466609954834, -0.01006361749023199, 0.03489766642451286, -0.03922345116734505, -0.0071722883731126785, -0.030840840190649033, 0.003597351023927331, -0.022895289584994316, -0.018804844468832016, 0.039111386984586716, -0.0025831444654613733, -0.005320381373167038, 0.03693728521466255, -0.019353972747921944, 0.020922910422086716, -0.005743434187024832, 0.05213357135653496, -0.039066560566425323, -0.054509393870830536, 0.026246093213558197, 0.005269951187074184, -0.06764364242553711, -0.058409325778484344, -0.0012558508897200227, 0.005482878535985947, 0.02915983460843563, 0.04440094903111458, 0.011184287257492542, -0.029428796842694283, -0.0028072786517441273, 0.025058183819055557, -0.019510865211486816, 0.01005801372230053, 0.015532487072050571, -0.03967171907424927, -0.0344269834458828, -0.04630608856678009, 0.008522695861756802, -0.01478163804858923, 0.020889289677143097, -0.04045619070529938, -0.025909891352057457, 0.0575127899646759, 0.03142358735203743, -0.009828276932239532, 0.0417337529361248, -0.023265110328793526, -0.03570454940199852, -0.0008951352210715413, 0.017011770978569984, -0.026918495073914528, -0.018580710515379906, -0.008741226978600025, 0.017191078513860703, 0.05168530344963074, 0.01915225200355053, 0.01934276521205902, 0.0033452000934630632, -0.014086822979152203, -0.09341906011104584, -0.032858047634363174, 0.024296127259731293, 0.014366989955306053, -0.043683718889951706, -0.05684038624167442, -0.044244054704904556, -0.0037570465356111526, 0.02008240856230259, 0.003734633093699813, -0.0445578433573246, 0.00883087981492281, -0.010926533490419388, 0.010041204281151295, 0.025461623445153236, 0.00511305732652545, -0.04310097172856331, 0.010472661815583706, -0.0490853488445282, -0.0031799012795090675, 0.04872673377394676, -0.03870794549584389, 0.005253140814602375, -0.062354084104299545, 0.008113651536405087, 0.025125423446297646, -0.04570092633366585, 0.018121235072612762, -0.04563368484377861, -0.0036898062098771334, -0.03175979107618332, -0.018659157678484917, -0.002326791174709797, 0.02499094232916832, 0.000546676863450557, 0.06970568001270294, -0.01257391832768917, 0.025573691353201866, -0.009581728838384151, 0.038663119077682495, 0.04588023200631142, 0.052537012845277786, -0.021595312282443047, -0.01873760297894478, 0.014333370141685009, -0.004373414907604456, 0.00533719127997756, 0.03314942121505737, -0.03615281730890274, -0.026201266795396805, -0.020653950050473213, 0.03108738735318184, -0.003846700070425868, -0.038214851170778275, 0.01629454270005226, -0.011262734420597553, -0.0744573175907135, -0.03377699479460716, -0.02629091963171959, -0.04670953005552292, 0.0025187060236930847, -0.01599196158349514, -0.027209868654608727, 0.021023770794272423, 0.050519805401563644, 0.0018308947328478098, -0.06674710661172867, 0.0007077732007019222, -0.025013355538249016, -0.0031602897215634584, -0.010573522187769413, 0.00976103637367487, -0.039447586983442307, -0.020059993490576744, -0.038954492658376694, -0.034270089119672775, -0.006606350187212229, 0.021359970793128014, -0.022861668840050697, 0.0184798501431942, -0.015633348375558853, 0.029540862888097763, 0.011111443862318993, 0.007060221396386623, 0.0063093723729252815, -0.01370579469949007, 0.020732397213578224, 0.0485026016831398, 0.02038498781621456, 0.04500611126422882, -0.002419246593490243, 0.03299252688884735, 0.02164013870060444, -0.012910119257867336, 0.02566334418952465, -0.04433370754122734, -0.03149082884192467, -0.045499205589294434, -0.008556315675377846, -0.01587989553809166, 0.003216323209926486, -0.03994068130850792, -0.036578670144081116, 0.023511657491326332, 0.01029895804822445, 0.048771560192108154, -0.06854017823934555, 0.007990377955138683, 0.011498074978590012, 0.016462642699480057, -0.0032975717913359404, 0.023892685770988464, 0.007917533628642559, -0.006163685582578182, 0.0265150535851717, 0.003333993488922715, -0.01249547116458416, -0.019398799166083336, 0.01934276521205902, 0.05217839777469635, -0.02611161209642887, -0.0068697077222168446, -0.027434002608060837, 0.0006391321658156812, 0.008113651536405087, -0.040859632194042206, -0.03812519460916519, -0.02123669721186161, 0.016451437026262283, -0.002329592825844884, 0.0027988734655082226, 0.02781503088772297, -0.024968529120087624, 0.031670134514570236, 0.018995357677340508, -0.015016978606581688, 0.0013574116164818406, -0.0727538987994194, 0.026716774329543114, 0.036982111632823944, 0.014837672002613544, 0.007878310978412628, 0.003129471093416214, 0.016541089862585068, -0.0038971302565187216, -0.05854380503296852, 0.015218699350953102, -0.006427043117582798, -0.021886685863137245, 0.04339234530925751, 0.06616435945034027, 0.021965133026242256, -0.03848380967974663, -0.00016258470714092255, 0.020407402887940407, -0.018009169027209282, 0.032925285398960114, -0.005073833744972944, -0.0008566121687181294, -0.04561127349734306, 0.004093247465789318, 0.028308125212788582, 0.018580710515379906, -0.023287523537874222, -0.012742018327116966, 0.013683381490409374, -0.04440094903111458, 0.014131649397313595, 0.0059003280475735664, -0.0023337954189628363, 0.038954492658376694, -0.014804051257669926, 0.007934344001114368, 0.08046410977840424, 0.01811002753674984, 0.010500678792595863, 0.003841096768155694, 0.031849443912506104, 0.05280597507953644, 0.008035204373300076, 0.01766175962984562, -0.033261489123106, 0.04440094903111458, -0.013750622048974037, 0.027949512004852295, -0.042226847261190414, 0.022491848096251488, -0.0014288543025031686, 0.03487525135278702, 0.012629951350390911, 0.021102217957377434, -0.02967534400522709, -0.03119945526123047, -0.006102048791944981, 0.0084610590711236, 0.033866651356220245, -0.026021959260106087, -0.01743762567639351, 0.03196151182055473, -0.011464455164968967, -0.00915027130395174, 0.00922311469912529, -0.02915983460843563, -0.018950531259179115, -0.028801221400499344, 0.04108376428484917, 0.030370159074664116, -0.04525265842676163, 0.03588385507464409, -0.017897101119160652, -0.022828049957752228, -0.06275752186775208, 0.06002308800816536, 0.05563006177544594, -0.009172684513032436, -0.014916119165718555, -0.04576816409826279, -0.012988566420972347, 0.03344079479575157, 0.03303735330700874, -0.012775639072060585, -0.04670953005552292, -0.03518904000520706, 0.023870272561907768, 0.03971654921770096, -0.032521843910217285, 0.0027932701632380486, -7.757138519082218e-05, 0.006931344512850046, 0.03942517191171646, -0.031333934515714645, -0.00030520750442519784, -0.04957844316959381, -0.06181615963578224, -0.014535090886056423, 0.025394383817911148, 0.022749602794647217, 0.03465111926198006, -0.05388181656599045, -0.008102444931864738, 0.018199682235717773, 0.010651969350874424, 0.003939155489206314, 0.054464567452669144, -0.012641158886253834, 0.0046563842333853245, -0.010041204281151295, -0.028352953493595123, -0.023668551817536354, 0.02420647442340851, -0.05500248819589615, -0.025237489491701126, -0.01703418605029583, -0.025820238515734673, -0.022155648097395897, -0.042047541588544846, -0.023489244282245636, -0.012035996653139591, 0.016485055908560753, -0.0009000381687656045, 0.04359406605362892, 0.0279270987957716, 0.03875277191400528, 0.002020007697865367, 0.009576126001775265, -0.014120442792773247, 0.006057221908122301, -0.007777450140565634, 0.03440457209944725, 0.0338442362844944, 0.024856463074684143, 0.00016057101311162114, 0.03267873823642731, -0.02287287637591362, -0.007362802512943745, 0.005205512512475252, -0.023085802793502808, 0.0009322574478574097, 6.728398147970438e-05, 0.03182702884078026, 0.003244339954108, -0.029316728934645653, -0.024520261213183403, -0.014916119165718555, 0.0242513008415699, -0.004236132837831974, 0.011744622141122818, 0.01486008521169424, 0.0530301071703434, -0.0007249334594234824, -0.00033970311051234603, 0.014770431444048882, 0.0023828246630728245, 0.013683381490409374, -0.012685985304415226, -0.015588521026074886, 0.029585689306259155, 0.019421212375164032, 0.020205682143568993, 0.008864500559866428, 0.04206995293498039, 0.021998753771185875, -0.004902931395918131, -0.03870794549584389, -0.01576782763004303, -0.03028050623834133, 0.014165270142257214, -0.00723392516374588, -0.02781503088772297, 0.014479056932032108, -0.016193682327866554, -0.060605838894844055, -0.025865064933896065, -0.02443060837686062, -0.011061013676226139, 0.05217839777469635, -0.009548109024763107, -0.05567488819360733, 0.014714398421347141, -0.04742675647139549, 0.023040976375341415, 0.015678174793720245, 0.055316273123025894, -0.009402422234416008, 0.04675435647368431, -0.025752998888492584, -0.006068428512662649, -0.0172134917229414, -0.006281355861574411, -0.004855303093791008, 0.014176476746797562, -0.02555127814412117, 0.003810278372839093, 0.048592254519462585, -0.012618744745850563, -0.02272718958556652, -0.045947473496198654, -0.021774619817733765, 0.03570454940199852, -0.029518449679017067, 0.0169221181422472, 0.011520488187670708, -0.042047541588544846, -0.013044599443674088, -0.019096218049526215, -0.005928344558924437, 0.0682263970375061, -0.026313332840800285, 0.05926103517413139, -0.04998188465833664, -0.003373216837644577, -0.0008664180641062558, 0.0037598481867462397, 0.03090807981789112, 0.010836879722774029, 0.006460662931203842, 0.01644022949039936, 0.011178684420883656, -0.008573126047849655, 0.03290287405252457, 0.031042560935020447, -0.00983387976884842, 0.018614329397678375, 0.027792617678642273, 0.012685985304415226, -0.012831672094762325, 0.006331786047667265, 0.0380803681910038, 0.0397837869822979, -0.005541713442653418, -0.04417681321501732, -0.0023856263142079115, -0.006561523303389549, 0.018322955816984177, 0.020015167072415352, 0.036690738052129745, 0.033373553305864334, -0.0026699963491410017, -0.02000396139919758, 0.01019249390810728, -0.03823726251721382, 0.046619873493909836, 0.013761828653514385, -0.009273544885218143, 0.017359180375933647, 0.0242513008415699, -0.047068141400814056, -0.0434371717274189, 0.027389176189899445, -0.0281960591673851, -0.028913287445902824, -0.019107425585389137, -0.03718383237719536, 0.04186823591589928, -0.027658136561512947, -0.0699298158288002, 0.008976567536592484, 0.012248924002051353, -0.00017361631034873426, 0.008769243024289608, -0.03377699479460716, 0.013392006978392601, 0.017583314329385757, -0.010293354280292988, 0.010383008047938347, -0.006421439349651337, -0.01929793879389763, 0.024385780096054077, 0.018872084096074104, -0.03893207758665085, -0.04778537154197693, -0.04670953005552292, -0.022402195259928703, -0.005272752605378628, -0.009766640141606331, -0.020317748188972473, 0.02837536670267582, -0.011357991024851799, 0.007334785535931587, -0.039111386984586716, 0.021337557584047318, -0.03478559851646423, -0.003846700070425868, 0.012360990978777409, -0.03729590028524399, -0.01644022949039936, -0.004000792279839516, -0.022077200934290886, -0.009648969396948814, 0.024744395166635513, 0.0008250933606177568, 0.018647950142621994, -0.012921325862407684, -0.0031658930238336325, -0.016384197399020195, -0.002539718523621559, 0.04845777526497841, -0.023309936746954918, -0.009789053350687027, -0.005855501163750887, 0.01478163804858923, 0.007065824698656797, 0.01502818614244461, -0.05652659758925438, 0.0207211896777153, 0.02149445191025734, -0.008276148699223995, -0.001367217511869967, 0.020328955724835396, 0.04635091498494148, -0.009794656187295914, -0.012999773025512695, 0.031109800562262535, 0.005636970512568951, -0.00013421775656752288, 0.07696761935949326, 0.028128819540143013, 0.018210887908935547, -0.02149445191025734, -0.0003339246613904834, 0.005743434187024832, -0.01539800688624382, 0.027052976191043854, 0.002154488116502762, -0.014960945583879948, 0.008276148699223995, -0.02200995944440365, -0.021953927353024483, -0.0284874327480793, -0.0070770313031971455, -0.018457436934113503, -0.04361648112535477, 0.023377178236842155, 0.025080597028136253, -0.0338442362844944, 0.042159609496593475, -0.0242513008415699, 0.01818847469985485, 0.008180891163647175, -0.026134025305509567, 0.0010975562036037445, 0.013660968281328678, 0.022032374516129494, -0.019690172746777534, 0.03357527405023575, -4.56147754448466e-05, 0.0011381804943084717, 0.012058409862220287, -0.0620402954518795, 0.014109236188232899, 0.00885329395532608, 0.03137876093387604, -0.0024234489537775517, 0.00786710437387228, 0.003476878860965371, 0.007693400140851736, 0.01145324856042862, -0.01881605014204979, -0.027052976191043854, 0.0063093723729252815, 0.006623160094022751, 0.00983948353677988, -0.019062597304582596, -0.012641158886253834, -0.014714398421347141, 0.006578333210200071, -0.03090807981789112, 0.03902173042297363, 0.06858500838279724, -0.06441611796617508, 0.0019513667793944478, 0.013560107909142971, 0.02391509898006916, 0.006046014837920666, 0.01158772874623537, -0.018793636932969093, -0.029473623260855675, 0.010859292931854725, -0.01886087656021118, 0.009217510931193829, 0.008141668513417244, -0.019331559538841248, 0.03574937582015991, 0.01517387293279171, -0.026358161121606827, 0.014826465398073196, 0.029989130795001984, -0.0009434641106054187, 0.014736811630427837, 0.015924721956253052, 0.034202851355075836, 0.017101425677537918, -0.01814364828169346, 0.005866707768291235, 0.02510301023721695, -0.01167738251388073, -0.028621913865208626, 0.03137876093387604, 0.001994792837649584, -0.0355476550757885, -0.04303373023867607, -0.029473623260855675, 0.024946115911006927, -0.0019331559306010604, -0.0026097605004906654, -0.028218472376465797, -0.014714398421347141, -0.02729952335357666, -0.035121798515319824, 0.015521280467510223, -0.05123703554272652, 0.0024780817329883575, 0.01113946083933115, 0.02112463116645813, -0.01342562772333622, -0.010685589164495468, -0.00556132523342967, 0.0011795052560046315, 0.0017846671398729086, 0.024721981957554817, 0.011610141955316067, 0.024968529120087624, 0.08248131722211838, -0.004659185651689768, -0.0075645227916538715, 0.010315768420696259, 0.010539902374148369, 0.007032204885035753, 0.029742583632469177, 0.025371970608830452, -0.03429250419139862, 0.004353803116828203, -0.04913017526268959, 0.030594293028116226, 0.04415440186858177, -0.02617885358631611, 0.0036589878145605326, 0.009105443954467773, 0.0005904530407860875, -0.006342992652207613, -0.002183905802667141, -0.013369593769311905, -0.000687811232637614, -0.006415836047381163, -0.00018771224131342024, 0.02956327609717846, -0.01587989553809166, 0.031177042052149773, 0.021561691537499428, -0.0013027789536863565, -0.014400610700249672, -0.032006338238716125, -0.025932306423783302, 0.002705017337575555, -0.015947135165333748, 0.014423023909330368, -0.004555523861199617, 0.012596331536769867, 0.04292166233062744, -0.04823363944888115, -0.0360855758190155, 0.02413923293352127, -0.01717987284064293, 0.010696795769035816, -0.02543921023607254, -0.02911500819027424, -0.00028034261777065694, -0.0033031750936061144, -0.00750288600102067, -0.010310164652764797, 0.001539520570077002, 0.024340953677892685, -0.02978741005063057, 0.0029529656749218702, 0.020631536841392517, -0.020037580281496048, 0.01418768335133791, 0.017135044559836388, -0.008130460977554321, -0.00890932697802782, -0.030930494889616966, -0.01266357209533453, -0.03258908540010452, 0.011402818374335766, -0.011313164606690407, 0.0049589648842811584, -0.02889087423682213, 0.017135044559836388, -0.020990150049328804, 0.004098850768059492, -0.012529091909527779, -0.004003593698143959, -0.021987546235322952, -0.0076261600479483604, 0.0036870045587420464, -0.016204889863729477, -0.008029601536691189, 0.03433733060956001, -0.019779827445745468, 0.019421212375164032, -0.012506677769124508, 0.005424043163657188, -0.0070770313031971455, -0.047023314982652664, 0.040299296379089355, 0.010607142001390457, 0.002573338570073247, 0.0059227412566542625, -0.06069549173116684, 0.031670134514570236, -0.01930914632976055, -0.023825446143746376, -0.027165042236447334, 0.0245426744222641, -0.02022809535264969, -0.014972152188420296, -0.03931310772895813, 0.006499886512756348, 0.0018238906050100923, -0.00974422600120306, -0.030325332656502724, -0.009693795815110207, 0.01150928158313036, 0.05262666568160057, 0.03588385507464409, 0.008780449628829956, 0.03915621340274811, -0.04227167367935181, 0.0019849869422614574, -0.007654176559299231, 0.003485284047201276, 0.005771450698375702, 0.006544713396579027, 0.004328588023781776, 0.029585689306259155, 0.014602331444621086, -0.0024976935237646103, -0.027344349771738052, -0.013179080560803413, 0.024609914049506187, -0.06127823889255524, -0.037699341773986816, 0.03565972298383713, 0.0055361101403832436, 0.011077824048697948, -0.02246943488717079, -0.010920929722487926, -0.09350871294736862, -0.007116254884749651, 0.002944560721516609, -0.049040522426366806, 0.016597123816609383, 0.012764432467520237, -0.01830054260790348, -0.012966153211891651, 0.015442833304405212, -0.040590669959783554, -0.011811862699687481, -0.012092029675841331, -0.0031799012795090675, -0.02859950065612793, 0.038326915353536606, -0.010836879722774029, 0.0011746023083105683, -0.011251527816057205, 0.034830424934625626, -0.013694588094949722, -0.01948845200240612, 0.015364387072622776, -0.049892231822013855, 0.021147044375538826, -0.0030398175586014986, -0.005146677140146494, 0.005236330907791853, -0.028958113864064217, -0.00361696258187294, -0.0013994367327541113, 0.006365405861288309, -0.013223906978964806, -0.018401402980089188, 0.01173341553658247, -0.027613310143351555, 0.041599273681640625, 0.04005274921655655, 0.04198030009865761, 0.013190287165343761, 0.0022063192445784807, 0.013347180560231209, -0.016059203073382378, 0.005199909210205078, -0.007990377955138683, 0.02729952335357666, -0.006662383675575256, 0.0017258318839594722, 0.022379782050848007, -0.02938396856188774, 0.012988566420972347, 0.02127031795680523, -0.023758206516504288, 0.019499659538269043, -0.018233302980661392, 0.06786777824163437, 0.030101198703050613, -0.03198392316699028, -0.028240885585546494, -0.025394383817911148, 0.025640930980443954, -0.008645969443023205, 0.031333934515714645, 0.004530308768153191, -0.005550118628889322, 0.005295166280120611, -0.0009868900524452329, 0.014490264467895031, -0.011834275908768177, 0.025932306423783302, -0.020396195352077484, 0.0023337954189628363, 0.0018154855351895094, 0.0017174269305542111, -0.009452852420508862, 0.03205116465687752, 0.032858047634363174, 0.013403214514255524, -0.034942492842674255, -0.012876499444246292, -0.02606678567826748, 0.05213357135653496, 0.028846047818660736, 0.03005637228488922, -0.005662185605615377, -0.007906327024102211, -0.01545403990894556, 0.0024696767795830965, -0.02685125544667244, 0.027344349771738052, 0.01212565042078495, -0.02160651981830597, 0.02967534400522709, 0.020967736840248108, -0.023870272561907768, -0.051640477031469345, -0.01855829730629921, 0.046844009310007095, -0.021135836839675903, 0.013279940001666546, -0.0017622536979615688, 0.0029249489307403564, -0.02205478772521019, -0.0014197488781064749, 0.02465474233031273, -0.043795786798000336, 0.0012894710525870323, 0.02729952335357666, -0.004460266791284084, -0.025304730981588364, 0.05289562791585922, 0.012562711723148823, 0.0059003280475735664, 0.0030538260471075773, 0.011598935350775719, 0.007911930792033672, -0.01320149376988411, 0.019869480282068253, 0.003838295117020607, 0.01629454270005226, -0.009217510931193829, -0.02075481042265892, -0.005219521000981331, 0.013773035258054733, 0.034942492842674255, -0.005160685628652573, -0.005855501163750887, 0.005418439861387014, -0.035345934331417084, -0.020698776468634605, 0.03500973433256149, 0.013739415444433689, 0.04437853395938873, -0.052492186427116394, 0.03850622475147247, -0.008545109070837498, -0.006483076605945826, 0.007945550605654716, -0.04783019796013832, -0.011486868374049664, -0.009940343908965588, -0.019443625584244728, -0.02718745544552803, -0.0035469208378344774, -0.051192209124565125, -0.031625308096408844, 0.019331559538841248, 0.041375137865543365, -0.025596104562282562, -0.021584104746580124, -0.01409802958369255, -0.015947135165333748, 0.010142064653337002, -0.0014372593723237514, 0.07737106084823608, -0.03063911944627762, 0.057288654148578644, 0.0017006167909130454, 0.0349649079144001, -0.01570058800280094, -0.00396156869828701, -0.027613310143351555, -0.004897328093647957, -0.041263073682785034, 0.007217115256935358, 0.01143643818795681, 0.007586936466395855, -0.0036477812100201845, 0.0016151657328009605, -0.020878084003925323, -0.026873668655753136, -0.025909891352057457, 0.004194107837975025, 0.014669571071863174, 0.04827846586704254, 0.02696332149207592, 0.0727538987994194, 0.046395741403102875, 0.013616141863167286, -0.012898912653326988, -0.0006937648286111653, -0.027232283726334572, 0.025528864935040474, 0.02123669721186161, 0.039626892656087875, 0.05652659758925438, -0.01311184000223875, -0.004622763954102993, 0.02402716688811779, -0.02662712149322033, 0.007015394512563944, 0.05137151479721069, 0.01979103311896324, -0.008483472280204296, 0.05441973730921745, -0.0284874327480793, 0.0007984774420037866, 0.015330766327679157, -0.015666967257857323, 0.004062429070472717, 0.008948550559580326, 0.029070181772112846, 0.002322588814422488, -0.024677155539393425, -0.02391509898006916, 0.00037752572097815573, 0.017729001119732857, -0.016339369118213654, 0.024049580097198486, -0.026940908282995224, 0.023197870701551437, -0.013392006978392601, -0.01500577200204134, 0.02053067646920681, -0.01881605014204979, -0.0490853488445282, 0.026873668655753136, 0.012394610792398453, -0.031446002423763275, 0.02391509898006916, -0.02492370270192623, -0.016899704933166504, -0.0027386373840272427, 0.006163685582578182, 0.004365009721368551, -0.0369597002863884, 0.03379940986633301, -0.010926533490419388, 0.04056825861334801, 0.050519805401563644, -0.008954154327511787, 0.0010499277850612998, 0.02707538940012455, -0.023780619725584984, -0.015431626699864864, 0.015375593677163124, -0.000483639189042151, 0.0265150535851717, -0.0015787439187988639, 0.015375593677163124, 0.006208512000739574, -0.011027393862605095, 0.0029613706283271313, -0.04451301693916321, -0.015779035165905952, 0.03760968893766403, 0.011923929676413536, 0.027949512004852295, 0.03998550772666931, 0.012327371165156364, 0.028465019538998604, 0.00556132523342967, -0.020463434979319572, -0.0035777392331510782, -0.029742583632469177, 0.006757640745490789, 0.019107425585389137, -0.010584728792309761, -0.0034460604656487703, 0.02301856316626072, 0.021438417956233025, -0.015162666328251362, 0.03225288540124893, -0.006040411535650492, 0.010427835397422314, -0.0036814012564718723, 0.0037710547912865877, -0.016003169119358063, 0.006533506326377392, 0.02346683107316494, 0.02115825191140175, -0.03489766642451286, 0.008696399629116058, -0.026761600747704506, -0.008746829815208912, -0.031109800562262535, -0.01923069916665554, -0.037811409682035446, -0.01639540307223797, -0.03310459479689598, -0.014736811630427837, -0.022480642423033714, 0.0025271109770983458, -0.01900656521320343, -0.010993773117661476, -0.01545403990894556, -0.015095425769686699, -0.008752433583140373, -0.029989130795001984, -0.011744622141122818, 0.004401431884616613, 0.0149497389793396, 0.012685985304415226, 0.015297146514058113, -0.05607832968235016, 0.021707380190491676, 0.05105772987008095, -0.004250141326338053, 0.03265632688999176, -0.030101198703050613, -0.052492186427116394, -0.0007956757326610386, -0.02685125544667244, -0.03205116465687752, 0.01554369367659092, 0.009228718467056751, -0.008797260001301765, -0.02004878781735897, -0.027232283726334572, -0.004505093675106764, 0.00185751065146178, -0.011867895722389221, 0.012685985304415226, -0.024856463074684143, 0.02736676298081875, 0.019533280283212662, 0.06867466121912003, 0.01545403990894556, -0.008903724141418934, -0.03397871553897858, 0.03158048167824745, -0.003017404116690159, 0.021875480189919472, 0.00943043828010559, 0.014131649397313595, 0.014086822979152203, 0.013358387164771557, -0.028218472376465797, -0.01000198069959879, 0.011879103258252144, -0.015252320095896721, 0.001041522715240717, 0.01249547116458416, -0.010920929722487926, 0.04274235665798187, -0.009301561862230301, 0.018289335072040558, 0.0007970766164362431, -0.01472560502588749, -0.004065230488777161, -0.021561691537499428, -0.022693568840622902, -0.016686776652932167, -0.03588385507464409, 0.022043580189347267, 0.023870272561907768, 0.00476845121011138, -0.028173645958304405, 0.013268733397126198, -0.018457436934113503, 0.04175616800785065, 0.06706089526414871, 0.015050599351525307, -0.005079437047243118, 0.011968756094574928, 0.006146875210106373, -0.0210125632584095, 0.008438645862042904, 0.02120307832956314, 0.005928344558924437, -0.05150599777698517, -0.030325332656502724, 0.04321303963661194, 0.0033087783958762884, -0.0010128056164830923, 0.009335181675851345, -0.02443060837686062, 0.02149445191025734, -0.013604934327304363, -0.014613538049161434, -0.011778242886066437, 0.04581299424171448, 0.02803916484117508, -0.008320975117385387, -0.009979567490518093, -0.005258744116872549, -0.022525468841195107, 0.016485055908560753, -0.005311976186931133, 0.031109800562262535, 0.00043531027040444314, 0.0028941305354237556, -0.03456146642565727, -0.005309174302965403, 0.00476845121011138, -0.019880687817931175, 0.015140253119170666, 0.0035413175355643034, -0.03328390046954155, -0.000876924314070493, 0.032925285398960114, 0.031849443912506104, 0.015823861584067345, -0.023220283910632133, -0.01143643818795681, 0.009245527908205986, -0.007609349675476551, 0.010097237303853035, -0.0030005942098796368, 0.006326182745397091, 0.009525695815682411, -0.009660176001489162, 0.004986981861293316, 0.0011129655176773667, -0.005945154931396246, 0.006522299721837044, 0.0030538260471075773, -0.0023141836281865835, 0.03684763237833977, -0.006085238419473171, 0.01446785032749176, -0.030885666608810425, 0.0007501485524699092, 0.014837672002613544, -0.01243943814188242, -0.00509624695405364, -0.015308353118598461, 0.007911930792033672, -0.011968756094574928, -0.0033171833492815495, 0.0094472486525774, -0.01195754949003458, 0.015106632374227047, -0.0025383178144693375, -0.009531298652291298, 0.013829068280756474, -0.01150928158313036, -0.021953927353024483, -0.01424371637403965, 0.010013187304139137, 0.02034016139805317, 0.03323907405138016, 0.00297537911683321, -0.0496232695877552, 0.024296127259731293, -0.05464387312531471, -0.02097894437611103, 0.015902308747172356, -0.0009805862791836262, -0.015285939909517765, 0.01685487851500511, 0.018580710515379906, 0.0029221472796052694, 0.005227925721555948, 0.024385780096054077, 0.040142402052879333, 0.044131986796855927, 0.004524705465883017, -0.03543558716773987, -0.033014941960573196, -0.012450644746422768, 0.01545403990894556, 0.02436336688697338, 0.017247112467885017, 0.026089198887348175, 0.024946115911006927, 0.03305976837873459, 0.024946115911006927, 0.0010555310873314738, -0.017493659630417824, 0.028330540284514427, -0.009351992048323154, 0.012473057955503464, -0.026784013956785202, -0.013470454141497612, 0.001986387651413679, 0.005342794582247734, 0.0013223907444626093, 0.011744622141122818, -0.03693728521466255, -0.0025327142793685198, 0.02685125544667244, -0.010562315583229065, 0.003633772721514106, 0.006992981303483248, 0.018468642607331276, -0.00750288600102067, 0.007267545443028212, -0.017493659630417824, -0.02112463116645813, 0.010416628792881966, -0.024228887632489204, 0.020508263260126114, 0.0025215076748281717, -0.0394924134016037, 0.002085847081616521, 0.011016187258064747, 0.018177269026637077, -0.0006531405379064381, -0.016675570979714394, 0.0013034794246777892, -0.012854086235165596, 0.03619764372706413, 0.009660176001489162, -0.013156666420400143, -0.01000198069959879, 0.007614952977746725, 0.01426613051444292, 0.011245924048125744, 0.030997734516859055, 0.015633348375558853, -0.001542322221212089, -0.03366493061184883, 0.005737830884754658, 0.01195754949003458, 0.0036645911168307066, -0.09261217713356018, 0.04612677916884422, 0.020743602886795998, -0.033597689121961594, -0.011049807071685791, -0.010427835397422314, -0.000343905616318807, -0.01737038604915142, -0.006942551117390394, -0.02402716688811779, 0.06472990661859512, -0.006836087442934513, 0.014624744653701782, 0.028868461027741432, 0.006858500652015209, 0.023153044283390045, 0.008808466605842113, 0.00907742790877819, 0.01960051991045475, 0.013010979630053043, 0.010803259909152985, -0.004832889884710312, -0.03774416819214821, -0.011100237257778645, -0.028465019538998604, 0.006427043117582798, -0.009643365629017353, 0.0009434641106054187, 0.008819673210382462, -0.011800656095147133, 0.0022035175934433937, 0.002084446372464299, -0.026896081864833832, 0.03128910809755325, -0.015935927629470825, 0.015969548374414444, -0.005782657768577337, -0.005199909210205078, -0.00720590865239501, 0.0012509479420259595, 0.02194271981716156, 0.02048584818840027, -0.009682589210569859, 0.010270941071212292, 0.014232509769499302, 0.006724020466208458, -0.026313332840800285, 0.00777184683829546, 0.03684763237833977, 0.015857482329010963, 0.049040522426366806, -0.0007655577501282096, -0.0006632966105826199, -0.004331389907747507, -0.021662551909685135, -0.016171269118785858, 0.008836483582854271, -0.007357199210673571, -0.006141271907836199, 0.01602558232843876, -0.005872311070561409, 0.00743004260584712, 0.013089426793158054, 0.04590264707803726, -0.0034516637679189444, 0.003476878860965371, -0.0044238450936973095, 0.015868688002228737, -0.012170476838946342, -0.015162666328251362, -0.013044599443674088, 0.03140117600560188, 0.024116819724440575, -0.03034774586558342, 0.026380574330687523, -0.008724416606128216, -0.014288543723523617, 0.01539800688624382, -0.05370251089334488, -0.0031406779307872057, -0.023959925398230553, -0.0024920899886637926, -0.014972152188420296, 0.03850622475147247, -0.03875277191400528, -0.022480642423033714, 0.00777184683829546, 0.009901120327413082, 0.0245426744222641, -0.017829861491918564, -0.0095929354429245, 0.03565972298383713, 0.009155874140560627, -0.011632555164396763, 0.023937512189149857, -0.029473623260855675, 0.03830450400710106, -0.0030482225120067596, -0.017908308655023575, -0.02893570065498352, -0.002076041419059038, 0.022334953770041466, -0.005073833744972944, 0.00349088734947145, 0.005712615791708231, -0.0014323564246296883, 0.010326975025236607, 0.013302354142069817, 0.022032374516129494, 0.03915621340274811, -0.008657176047563553, -0.014826465398073196, 0.012484264560043812, -0.037766583263874054, -0.019578106701374054, 0.015409213490784168, -0.005314778070896864, 0.008763640187680721, 0.05092324689030647, 0.0225702952593565, 0.04054584354162216, -0.03514421358704567, -0.02543921023607254, 0.005961964838206768, -0.004409836605191231, 0.00013518083142116666, -0.02127031795680523, -0.0301684383302927, 0.009497678838670254, -0.0020634338725358248, 0.017616933211684227, 0.0005064028082415462, 0.05706452205777168, -0.02060912363231182, 0.0016922118375077844, 0.02770296484231949, -0.021225491538643837, 0.018457436934113503, -0.04612677916884422, -0.0002083745930576697, -0.013212700374424458, 0.010052410885691643, -0.02499094232916832, -0.02413923293352127, -0.0026910090819001198, 0.011845482513308525, -0.009038204327225685, 0.02409440651535988, -0.009452852420508862, -0.040859632194042206, -0.010422231629490852, 0.034673530608415604, -0.001309783197939396, -0.025752998888492584, -0.00217550084926188, 0.004841294605284929, 0.003983981907367706, -0.014232509769499302, -0.028285712003707886, 0.023511657491326332, 0.016003169119358063, -0.04742675647139549, -0.0059955851174890995, -0.012080823071300983, 0.024004753679037094, 0.04393026605248451, -0.007816674187779427, 0.0369597002863884, 0.020071201026439667, 0.020553089678287506, -0.006438249722123146, -0.029002942144870758, 0.025461623445153236, 0.047471582889556885, 0.000970080029219389, -0.007004187908023596, 0.009021393954753876, 0.04005274921655655, 0.019062597304582596, 0.023377178236842155, 0.01919707842171192, 0.019286731258034706, 0.0023169852793216705, 0.029742583632469177, 0.0014806853141635656, -0.010943342931568623, 0.012842878699302673, 0.003107057884335518, 0.009251131676137447, -0.00011723259376594797, -0.0033059767447412014, -0.021875480189919472, -0.013279940001666546, 0.0009525695932097733, 0.009245527908205986, -0.01743762567639351, 0.010276544839143753, 0.027120215818285942, 0.009256734512746334, 0.007446852512657642, 0.009234321303665638, -0.0003967872471548617, -0.009032600559294224, -0.015644554048776627, 0.03034774586558342, 0.002947362372651696, 0.022256508469581604, -0.010489472188055515, -0.009385611861944199, -0.028016751632094383, 0.013941136188805103, 0.028958113864064217, 0.00784469023346901, -0.019555693492293358, -0.03678039088845253, -0.0011914123315364122, -0.003913940396159887, -0.0031014543492347, -0.007222718559205532, 0.006264545954763889, -0.061054106801748276, 0.0169221181422472, 0.002880122046917677, -0.025013355538249016, -0.011296354234218597, 0.010203701443970203, 0.023601312190294266, 0.011621348559856415, 0.011811862699687481, 8.680815517436713e-05, -0.03028050623834133, -0.009570522233843803, -0.008124858140945435, -0.037363141775131226]
metadata : {"source": "pydantic_ai_docs", "crawled_at": "2025-03-15T11:18:00.105265", "url_path": "/api/pydantic_graph/persistence/", "chunk_size": 4821}
updated_dt: 2025-03-15T11:18:00.105265
---
```

Record the run of the node, or error if the node is already running.
Parameters:
Name | Type | Description | Default  
---|---|---|---  
`snapshot_id` |  `str[](https://docs.python.org/3/library/stdtypes.html#str)` |  The ID of the snapshot to record. |  _required_  
Raises:
Type | Description  
---|---  
`GraphNodeRunningError` |  if the node status it not `'created'` or `'pending'`.  
`LookupError[](https://docs.python.org/3/library/exceptions.html#LookupError)` |  if the snapshot ID is not found in persistence.  
Returns:
Type | Description  
---|---  
`AbstractAsyncContextManager[](https://docs.python.org/3/library/contextlib.html#contextlib.AbstractAsyncContextManager "contextlib.AbstractAsyncContextManager")[None]` |  An async context manager that records the run of the node.  
In particular this should set:
  * [`NodeSnapshot.status`](https://ai.pydantic.dev/api/pydantic_graph/persistence/#pydantic_graph.persistence.NodeSnapshot.status) to `'running'` and [`NodeSnapshot.start_ts`](https://ai.pydantic.dev/api/pydantic_graph/persistence/#pydantic_graph.persistence.NodeSnapshot.start_ts) when the run starts.
  * [`NodeSnapshot.status`](https://ai.pydantic.dev/api/pydantic_graph/persistence/#pydantic_graph.persistence.NodeSnapshot.status) to `'success'` or `'error'` and [`NodeSnapshot.duration`](https://ai.pydantic.dev/api/pydantic_graph/persistence/#pydantic_graph.persistence.NodeSnapshot.duration) when the run finishes.

Source code in `pydantic_graph/pydantic_graph/persistence/__init__.py`
```
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
```
| ```
@abstractmethod
defrecord_run(self, snapshot_id: str) -> AbstractAsyncContextManager[None]:
"""Record the run of the node, or error if the node is already running.
  Args:
    snapshot_id: The ID of the snapshot to record.
  Raises:
    GraphNodeRunningError: if the node status it not `'created'` or `'pending'`.
    LookupError: if the snapshot ID is not found in persistence.
  Returns:
    An async context manager that records the run of the node.
  In particular this should set:
  - [`NodeSnapshot.status`][pydantic_graph.persistence.NodeSnapshot.status] to `'running'` and
   [`NodeSnapshot.start_ts`][pydantic_graph.persistence.NodeSnapshot.start_ts] when the run starts.
  - [`NodeSnapshot.status`][pydantic_graph.persistence.NodeSnapshot.status] to `'success'` or `'error'` and
   [`NodeSnapshot.duration`][pydantic_graph.persistence.NodeSnapshot.duration] when the run finishes.
  """
  raise NotImplementedError

```
  
---|---  
####  load_next `abstractmethod` `async`
```
load_next() -> NodeSnapshot[](https://ai.pydantic.dev/api/pydantic_graph/persistence/#pydantic_graph.persistence.NodeSnapshot "pydantic_graph.persistence.NodeSnapshot")[StateT, RunEndT] | None

```

Retrieve a node snapshot with status `'created`' and set its status to `'pending'`.
This is used by [`Graph.iter_from_persistence`](https://ai.pydantic.dev/api/pydantic_graph/graph/#pydantic_graph.graph.Graph.iter_from_persistence) to get the next node to run.
Returns: The snapshot, or `None` if no snapshot with status `'created`' exists.
Source code in `pydantic_graph/pydantic_graph/persistence/__init__.py`
```
175
176
177
178
179
180
181
182
183
184
```
| ```
@abstractmethod
async defload_next(self) -> NodeSnapshot[StateT, RunEndT] | None:
"""Retrieve a node snapshot with status `'created`' and set its status to `'pending'`.
  This is used by [`Graph.iter_from_persistence`][pydantic_graph.graph.Graph.iter_from_persistence]
  to get the next node to run.
  Returns: The snapshot, or `None` if no snapshot with status `'created`' exists.
  """
  raise NotImplementedError

```
  
---|---  
####  load_all `abstractmethod` `async`
```
load_all() -> list[](https://docs.python.org/3/library/stdtypes.html#list)[Snapshot[](https://ai.pydantic.dev/api/pydantic_graph/persistence/#pydantic_graph.persistence.Snapshot "pydantic_graph.persistence.Snapshot")[StateT, RunEndT]]

```

Load the entire history of snapshots.
`load_all` is not used by pydantic-graph itself, instead it's provided to make it convenient to get all [snapshots](https://ai.pydantic.dev/api/pydantic_graph/persistence/#pydantic_graph.persistence.Snapshot) from persistence.
Returns: The list of snapshots.
Source code in `pydantic_graph/pydantic_graph/persistence/__init__.py`
```
186
187
188
189
190
191
192
193
194
195
```
| ```
@abstractmethod
async defload_all(self) -> list[Snapshot[StateT, RunEndT]]:
"""Load the entire history of snapshots.
  `load_all` is not used by pydantic-graph itself, instead it's provided to make it convenient to
  get all [snapshots][pydantic_graph.persistence.Snapshot] from persistence.
  Returns: The list of snapshots.
  """
  raise NotImplementedError

```
  
---|---  
####  set_graph_types