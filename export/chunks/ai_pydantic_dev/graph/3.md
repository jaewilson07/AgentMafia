---
url: https://ai.pydantic.dev/graph/
session_id: test
chunk_number: 3
title: Creating a Graph with Pydantic
summary: This section demonstrates how to create a graph using Pydantic's BaseNode for defining nodes. It includes two nodes: 'DivisibleBy5', which checks if a number is divisible by 5, and 'Increment', which increments the number. The graph is then executed synchronously to show the output when starting with the number 4, ultimately producing the result 5.
embedding: [-0.007565035484731197, 0.040630050003528595, -0.030559994280338287, -0.04617732763290405, 0.052624162286520004, -0.0067279464565217495, -0.002526884200051427, 0.014980144798755646, -0.0003644694807007909, 0.015117577277123928, 0.04560260847210884, -0.029510509222745895, -0.013830709271132946, -0.05592254176735878, 0.0104511184617877, -0.007914863526821136, -0.010626032017171383, 0.025375040248036385, 0.022901255637407303, 0.03255901485681534, 0.02701173722743988, 0.009982598014175892, 0.06326893717050552, -0.005503547843545675, -0.006306278519332409, 0.006840391084551811, -0.006337513215839863, 0.030285129323601723, 0.0015835973899811506, -0.005431707948446274, 0.020839767530560493, -0.00873945839703083, -0.010269957594573498, -0.004579001571983099, -0.02286377362906933, 0.006515550892800093, 0.002971978159621358, 0.01731649786233902, 0.022763822227716446, 0.013368436135351658, 0.01179420854896307, -0.06966578960418701, -0.011831690557301044, 0.03163446858525276, -0.035857394337654114, -0.0036357147619128227, -0.023788319900631905, 0.05647227168083191, 0.01834099367260933, 0.04257909208536148, -0.048975951969623566, -0.020065147429704666, -0.029135694727301598, -0.019652850925922394, -0.05972067639231682, -0.015142564661800861, -0.04025523364543915, 0.021352015435695648, 0.015442417934536934, -0.020065147429704666, 0.035557541996240616, -0.012718754820525646, 0.014018116518855095, 0.07061532884836197, -0.0487760491669178, 0.058021511882543564, -0.0622694231569767, 0.03860604390501976, -0.03298380598425865, -0.01060104463249445, 0.04875106364488602, 0.01171299908310175, -0.03670697659254074, -0.024725358933210373, -0.007133997045457363, -0.03615724667906761, 0.015592344105243683, 0.026661908254027367, 0.0007679822738282382, -0.009270448237657547, 0.0309847854077816, 0.029935302212834358, -0.01787872053682804, 0.023563429713249207, 0.05027531459927559, -0.06306903064250946, -0.02986033819615841, -0.01897818222641945, -0.06681719422340393, -0.04780152812600136, 0.013355942443013191, -0.015829727053642273, -0.01882825419306755, 0.04647717997431755, 0.06007050350308418, 0.03870599344372749, 0.032059259712696075, -0.023563429713249207, -0.043878454715013504, -0.023963233456015587, 0.013355942443013191, -0.0189032182097435, -0.06401856243610382, -0.022701352834701538, 0.042529117316007614, 0.022626390680670738, 0.0065780202858150005, 0.07106510549783707, -0.06052028387784958, -0.01764133758842945, -0.06876623630523682, -0.028311097994446754, -0.013081076554954052, 0.009970104321837425, -0.04215430095791817, -0.03215920925140381, -0.052624162286520004, -0.017016643658280373, 0.02407567761838436, -0.010526081547141075, -0.029885325580835342, 0.008983089588582516, -0.01850341446697712, -0.0032577754464000463, 0.0052786581218242645, 0.009439115412533283, -0.024675384163856506, -0.031184688210487366, 0.006409353110939264, -0.002684619277715683, -0.03065994568169117, -0.03185935690999031, -0.014580341055989265, -0.05347374454140663, -0.006290661171078682, 0.012031592428684235, -0.045252781361341476, 0.008820668794214725, -0.023313552141189575, 0.031109724193811417, 0.010657266713678837, -0.04392842948436737, 0.015929678454995155, 0.0037512830458581448, 0.024050690233707428, 0.031334612518548965, -0.021264558658003807, 0.07721208781003952, -0.02653696946799755, 0.017353978008031845, 0.0805104672908783, 0.04257909208536148, -0.00885190349072218, -0.006634242366999388, -0.0014102450804784894, -0.0166043471544981, 0.02440051920711994, 0.02278880961239338, -0.009426621720194817, -0.04637722671031952, -0.03938066214323044, 0.038256216794252396, -0.042229264974594116, 0.0018569007515907288, -0.03418321534991264, 0.03818125277757645, -0.04852617159485817, -0.010376155376434326, -0.03565749153494835, -0.02636205591261387, -0.006840391084551811, -0.03405827656388283, -0.005750301294028759, 0.016941681504249573, 0.006740440148860216, 0.008121012710034847, -0.06891616433858871, 0.000869104522280395, 0.0027361565735191107, -0.013668288476765156, -0.004188568331301212, -0.024050690233707428, -0.0668671652674675, -0.012106555514037609, -0.02241399511694908, 0.0018600241746753454, 0.010038821026682854, 0.026961760595440865, -0.005322386510670185, 0.02686181105673313, -0.0197902824729681, 0.032209184020757675, 0.02127705328166485, 0.03203427046537399, -0.005831511691212654, -0.007471331395208836, 0.09045558422803879, 0.02502521313726902, 0.024512963369488716, 0.04385346546769142, -0.006459328345954418, 0.05052519217133522, -0.015692295506596565, 0.002411315916106105, 0.035782430320978165, -0.03823122754693031, -0.015592344105243683, -0.04950069263577461, -0.018153585493564606, -0.02446298860013485, -0.0012540717143565416, -0.010700996033847332, -0.0025877917651087046, 0.004201062023639679, -0.002286377362906933, -0.006112623494118452, -0.047926466912031174, 0.005078756250441074, 0.032459061592817307, 0.04502788931131363, -0.011825443245470524, 0.03453304246068001, 0.013830709271132946, 0.005341127514839172, 0.01716657169163227, 0.011644282378256321, 0.00498192897066474, -0.005500424187630415, -0.017678819596767426, 0.045802511274814606, 0.0016679309774190187, -0.04130471870303154, 0.0010869662510231137, -0.014130561612546444, -0.021339522674679756, -0.016566865146160126, -0.03293382748961449, -0.0355825275182724, -0.008420865051448345, -0.012087814509868622, -0.044678062200546265, 0.011350676417350769, 0.012456383556127548, 0.0020864754915237427, 0.05892106890678406, 0.04025523364543915, -0.014467895962297916, 0.0060845124535262585, 0.005116237793117762, 0.05992057919502258, 0.04028022289276123, -0.0028517248574644327, -0.022101648151874542, -0.00901432428508997, -0.0379563644528389, -0.05227433145046234, 0.004694569855928421, -0.001753826392814517, 0.004738298244774342, 0.054923031479120255, -0.002804872812703252, -0.005437954794615507, -0.06396859139204025, 0.012400161474943161, 0.014280487783253193, -0.00010151265450986102, 0.02723662555217743, -0.02207666076719761, -0.0008472402696497738, -0.06571773439645767, 0.009507831186056137, 0.02247646450996399, 0.012231494300067425, -0.026786847040057182, 0.00909553375095129, -0.02683682180941105, 0.013493374921381474, 0.08001071214675903, 0.00785864144563675, 0.0015617331955581903, -0.01529249083250761, 0.01700415089726448, 0.0352826751768589, 0.05172460153698921, -0.003260898869484663, 0.03353353589773178, -0.01589219644665718, -0.007877382449805737, 0.015117577277123928, -0.014630315825343132, 0.03838115558028221, 0.030285129323601723, 0.03455803170800209, -0.029735399410128593, 0.05872116610407829, -0.05102494731545448, 0.01354334969073534, 0.024675384163856506, 0.014018116518855095, -0.01008879579603672, 0.0006863817106932402, -0.004113605245947838, -0.034907858818769455, 0.016416938975453377, 0.00030200014589354396, 0.018853243440389633, -0.009395387023687363, 0.007933604530990124, 0.031159700825810432, 0.004004283808171749, -0.0330587662756443, 0.01405559852719307, 0.009170496836304665, 0.01520503405481577, 0.0009807684691622853, 0.04830128327012062, 0.08945607393980026, -0.0394306406378746, -0.007839900441467762, -0.028336087241768837, -0.015267503447830677, -0.028311097994446754, 0.05512293428182602, 0.006453081499785185, -0.007571282330900431, -0.022626390680670738, -0.015504886396229267, -0.00017325476801488549, 0.01124447863548994, -0.015117577277123928, -0.001072910730727017, -0.02803623303771019, 0.014780242927372456, 0.03803132474422455, -0.008170987479388714, -0.01100709568709135, 0.004344741813838482, 0.04130471870303154, 0.02781134471297264, 0.062069524079561234, -0.02373834326863289, -0.04572754725813866, -0.014068092219531536, -0.037931375205516815, -0.0154549116268754, 0.009514078497886658, 0.003114095889031887, 0.04562759771943092, -0.03548257797956467, 0.0006926286732777953, 0.014280487783253193, -0.017366472631692886, 0.04207933694124222, 0.04247914254665375, 0.04542769491672516, 0.014280487783253193, 0.0017819375498220325, 0.0020802286453545094, -0.037131767719984055, 0.006415599957108498, -0.05227433145046234, -0.0022941860370337963, -0.029835350811481476, 0.02430056780576706, -0.004413458053022623, -0.010369908064603806, -0.02026505023241043, 0.009920128621160984, 0.04622730240225792, 0.029210656881332397, 0.024350542575120926, 0.04495292901992798, 0.04330373555421829, -0.014567847363650799, -0.0309098232537508, -0.02843603678047657, 0.0143054760992527, -0.018928205594420433, 0.02701173722743988, 0.03041006810963154, -0.017853733152151108, 0.018378475680947304, 0.010494846850633621, -0.0019334256649017334, -0.01139440480619669, 0.016479408368468285, -0.009482843801379204, 0.013006113469600677, -0.0189032182097435, 0.02501271851360798, 0.024325555190443993, -0.038880910724401474, -0.004950694274157286, 0.029210656881332397, -0.019078131765127182, -0.005531658884137869, 0.01016375981271267, -0.010551068931818008, 0.05507295951247215, 0.02733657695353031, -0.0006051716045476496, -0.02127705328166485, -0.03678194060921669, 0.015217527747154236, 0.018728304654359818, 0.014080585911870003, 0.04600241035223007, 0.018865736201405525, -0.017216546460986137, -0.0014211771776899695, 0.01804114133119583, -0.02581232599914074, 0.0012915533734485507, -0.032284148037433624, -0.008433358743786812, -0.05502298101782799, -0.031884342432022095, -0.03065994568169117, -0.010694748722016811, 0.026112178340554237, -0.030834859237074852, -0.04612734913825989, 0.0016476284945383668, -0.03026014193892479, 0.002024006098508835, 0.026811834424734116, 0.012256481684744358, -0.04322877526283264, 0.009726474061608315, -0.053973499685525894, 0.034907858818769455, 0.037706486880779266, 0.032059259712696075, -0.00033713915036059916, 0.07731203734874725, -0.016104592010378838, 0.03790638595819473, 0.007059033960103989, 0.007065280806273222, -0.053223866969347, -0.010301192291080952, -0.03155950456857681, 0.03978046774864197, 0.008970594964921474, -0.07376378029584885, -0.007471331395208836, -0.05030030012130737, -0.03313373029232025, 0.007821159437298775, -0.048401232808828354, -0.010332426987588406, 0.0309098232537508, -0.05697202682495117, 0.020914729684591293, -0.03233412280678749, 0.002993842586874962, 0.07261434197425842, -0.0062188212759792805, 0.020677346736192703, -0.022039178758859634, -0.009220472536981106, 0.0027096071280539036, -0.02971041202545166, 0.054223377257585526, -0.029610460624098778, -0.0050287810154259205, 0.038805946707725525, 0.0019459194736555219, 0.010838428512215614, 0.0028673422057181597, 0.012169024907052517, -0.02398822084069252, 0.005284904967993498, 0.012250235304236412, 0.02518763206899166, -0.009988845326006413, 0.0027908170595765114, 0.05712195113301277, 0.028710901737213135, 0.017216546460986137, -0.037706486880779266, -0.023875776678323746, 0.006343760062009096, 0.0032640222925692797, 0.021976709365844727, 0.034433092921972275, -0.0005938490503467619, -0.05807148665189743, -0.024525457993149757, -0.02415064163506031, -0.01859087124466896, -0.006815403699874878, 0.03540761396288872, -0.013405917212367058, 0.024875285103917122, 0.010413636453449726, -0.05407344922423363, -0.039280712604522705, 0.02542501501739025, -0.02255142666399479, 0.030934810638427734, -0.01203783880919218, -0.000952657253947109, -0.0037294188514351845, -0.010988354682922363, -0.07551292330026627, 0.03990540653467178, -0.008770693093538284, 0.025762349367141724, 0.02686181105673313, -0.006884119939059019, -0.027436528354883194, 0.028785865753889084, -0.0016897952882573009, -0.01810361072421074, 0.012443889863789082, 0.005419214256107807, 0.024013208225369453, -0.02016509883105755, 0.014717773534357548, -0.0015476775588467717, -0.026786847040057182, 0.00861452054232359, -0.012468877248466015, -0.0220891535282135, -0.0168292373418808, 0.03955557942390442, -0.05407344922423363, 0.00715273804962635, -0.01425550039857626, 0.012256481684744358, 0.00044821741175837815, 0.0013477756874635816, 0.02923564426600933, -0.07426353543996811, -0.017678819596767426, 0.007621258031576872, 0.00949533749371767, -0.031484540551900864, -0.007590023335069418, 0.01636696420609951, 0.026037216186523438, -0.01627950742840767, -0.00692784832790494, -0.022501451894640923, -0.005175583530217409, 0.041754499077796936, -0.043728530406951904, -0.015904691070318222, 0.02240150049328804, 0.014230513013899326, 0.009232966229319572, -0.004732051398605108, -0.07156486064195633, -0.01589219644665718, 0.021314533427357674, -0.0036919373087584972, 0.012187765911221504, -0.010151265189051628, 0.003826246364042163, 0.00011078544775955379, -0.025000223889946938, 0.03828120231628418, 0.04287894442677498, -0.018166080117225647, 0.07666235417127609, 0.03458302095532417, -0.026561956852674484, -0.0484761968255043, 0.008826916106045246, -0.02836107462644577, -0.0042416672222316265, 0.031409576535224915, -0.01706662029027939, 0.022763822227716446, -0.03955557942390442, -0.0116005539894104, -0.01410557422786951, 0.00480389129370451, -0.016017135232686996, -0.024125654250383377, -0.04217929020524025, -0.003492035437375307, -0.02676185965538025, -0.01604212261736393, 0.02533755823969841, -0.0030016510281711817, 0.02548748441040516, 0.013993129134178162, -0.03190933167934418, 0.0024409890174865723, -0.005697202403098345, -0.008945607580244541, 0.03463299572467804, -0.028735890984535217, -0.015067601576447487, 0.01786622777581215, 0.003595109796151519, -0.058171436190605164, 0.014430414885282516, 0.01865334063768387, -0.019677838310599327, -0.018853243440389633, 0.02103966847062111, -0.005437954794615507, 0.00834590196609497, 0.024662889540195465, 0.024587927386164665, -0.01857837848365307, 0.02136451005935669, -0.04800143092870712, 0.01859087124466896, -0.014630315825343132, -0.033633485436439514, -0.047076884657144547, -0.013718264177441597, -0.036731965839862823, 0.043653566390275955, 0.06326893717050552, -0.03280888870358467, 0.024200616404414177, 0.024750346317887306, -0.008514569140970707, -0.02303868718445301, -0.019003169611096382, 0.04442818462848663, 0.007615010719746351, -0.01529249083250761, -0.003082861192524433, -0.013468386605381966, -0.056122444570064545, -0.00034162914380431175, 0.030210167169570923, 0.01881576143205166, -0.04342867434024811, -0.02686181105673313, -0.010432377457618713, -0.01700415089726448, 0.005700326059013605, -0.03190933167934418, -0.008764446713030338, 0.030360093340277672, -0.02542501501739025, 0.01891571283340454, 0.021314533427357674, 0.009126768447458744, 0.02400071546435356, 0.027061711996793747, 0.033558521419763565, -0.018328500911593437, -0.02628709189593792, 0.0017350855050608516, 0.01875329203903675, -0.024288075044751167, -0.01144438050687313, -0.0014016554923728108, -0.010476105846464634, -0.0398804172873497, -0.015442417934536934, 0.00462897727265954, -0.0315844900906086, 0.022526439279317856, -0.02024006098508835, -0.03280888870358467, -0.02295123040676117, 0.02693677321076393, 0.010213734582066536, 0.028061222285032272, 0.0395805649459362, -6.564159411936998e-05, -0.031409576535224915, 0.033308643847703934, 0.05372362211346626, 0.014180537313222885, -0.003935567568987608, -0.013630807399749756, -0.0004856990126427263, -0.038156263530254364, -0.003935567568987608, 0.047451701015233994, -0.0077649373561143875, -0.005587881430983543, -0.04767658933997154, 0.058821119368076324, 0.05067511647939682, -0.031659454107284546, -0.0076337517239153385, 0.03653206303715706, 0.010513587854802608, 0.00013274731463752687, -0.002283253939822316, 0.02741154097020626, -0.0055722640827298164, 0.011238232254981995, -0.018715810030698776, 0.010850922204554081, 0.015692295506596565, 0.05522288382053375, -0.03230913728475571, -0.03278390318155289, -0.006796662695705891, -0.024363037198781967, -0.011481862515211105, 0.009401633404195309, 0.02248895727097988, 0.0057065729051828384, 0.00498192897066474, 0.0351327508687973, 0.010095043107867241, -0.01203783880919218, 0.008214716799557209, 0.010326179675757885, -0.028261123225092888, 0.03823122754693031, -0.0072214542888104916, -0.02025255560874939, 0.020115124061703682, 0.016729285940527916, 0.002579983090981841, -0.03985543176531792, -0.01505510788410902, 0.004350988660007715, -0.015829727053642273, -0.012450137175619602, -0.007002811413258314, -0.027061711996793747, -0.013218509964644909, 0.020602384582161903, -0.00881442241370678, -0.00810851901769638, -0.026961760595440865, -0.004316630307585001, -0.004582125227898359, -0.01969033107161522, -0.02413814701139927, 0.0042416672222316265, -0.0289108045399189, 0.014630315825343132, -0.05022533982992172, -0.023288564756512642, -0.019977690652012825, 0.004291642922908068, 0.002936058444902301, -0.013805720955133438, -0.005069385748356581, 0.0023254207335412502, -0.019128108397126198, 0.026162153109908104, -0.020952211692929268, 0.03868100792169571, -0.04812636971473694, 0.009045558050274849, -0.014605328440666199, -0.002773638116195798, 0.034832894802093506, 0.025837313383817673, -0.010663514025509357, -0.0005591004737652838, -0.017778770998120308, 0.0209771990776062, -0.04167953506112099, -0.014755254611372948, -0.02501271851360798, 0.008152247406542301, -0.0010385526111349463, -0.019965196028351784, 0.00732765207067132, 0.008377136662602425, 0.00040917409933172166, 0.019128108397126198, -0.02811119705438614, -0.009507831186056137, -0.0026924279518425465, 0.017491411417722702, 0.04472803696990013, -0.0021489448845386505, 0.05577261373400688, -0.03778144717216492, 0.01080094650387764, -0.006237562280148268, 0.005447325296700001, -0.004297889769077301, 0.01986524648964405, 0.018241044133901596, 0.029135694727301598, 0.0029001384973526, 0.01076346542686224, -0.03105974942445755, -0.04442818462848663, -0.033958327025175095, -0.05122484639286995, -0.03323368355631828, -0.021864265203475952, -0.012019098736345768, 0.02493775449693203, 0.0009753023623488843, 0.010176253505051136, -0.10204989463090897, -0.004397840704768896, 0.05837133899331093, -0.02843603678047657, 0.025862300768494606, -0.02375083789229393, 0.007821159437298775, -0.002670563757419586, 0.0012540717143565416, -0.02628709189593792, -0.018166080117225647, -0.02176431380212307, -0.033008791506290436, 0.008964348584413528, 0.02763642929494381, 0.009220472536981106, 0.0033046274911612272, 0.004960064310580492, 0.026337068527936935, -0.03183436766266823, -0.013243497349321842, -0.02526259608566761, -0.031809382140636444, 0.03295881673693657, 0.014517871662974358, 0.0157172828912735, 0.006328142713755369, 0.014218018390238285, 0.010732230730354786, 0.022426487877964973, 0.02271384745836258, -0.04672705754637718, -0.0038543574046343565, 0.025562448427081108, -0.013318460434675217, 0.014355450868606567, 0.03425817936658859, 0.05482308194041252, 0.02016509883105755, 0.035157736390829086, -0.014230513013899326, -0.028136184439063072, -0.010494846850633621, -0.043328724801540375, 0.011575566604733467, -0.0033889610785990953, -0.03915577381849289, 0.012219000607728958, -0.035707466304302216, -0.013768239878118038, 0.0028345456812530756, -0.016641829162836075, -0.010613538324832916, -0.010257462970912457, 0.06771674752235413, 0.04800143092870712, -0.03758154809474945, -0.02215162292122841, -0.010332426987588406, 0.03248405084013939, 0.023413503542542458, 0.024350542575120926, 0.0332086943089962, -0.01564231887459755, -0.007977332919836044, -0.029810363426804543, 0.04450314864516258, -0.019990185275673866, -0.005156842991709709, -0.03783142566680908, 0.007333898916840553, 0.008602025918662548, 0.010900897905230522, -0.006734193302690983, -0.011494356207549572, 0.014567847363650799, 0.00045446434523910284, -0.012806211598217487, 0.01675427332520485, -0.019415466114878654, -0.0023347910027951, 0.010382401756942272, 0.01275623682886362, 0.02883584052324295, 0.009526572190225124, 0.0027189773973077536, 0.01020124088972807, 0.018091116100549698, -0.007677480112761259, 0.00833965465426445, -0.015304985456168652, -0.009039311669766903, -0.014405426569283009, -0.007590023335069418, -0.0315844900906086, -0.01929052732884884, 0.017903709784150124, 0.00014416749763768166, 0.021939227357506752, 0.006852885242551565, 0.017266521230340004, 0.03338360786437988, -0.004700816702097654, 0.01445540226995945, -0.03965552896261215, 0.009945116937160492, -0.00135089922696352, -0.01627950742840767, -0.030684933066368103, -0.004572754725813866, 0.016891706734895706, -0.013268484733998775, -0.0006926286732777953, -0.01231270469725132, -0.04020525887608528, 0.006715452764183283, 0.03913078457117081, -0.004794520791620016, -0.005734684411436319, -0.006050154101103544, 0.014505377970635891, -0.005431707948446274, -0.014417920261621475, 0.04112980514764786, -0.0030344475526362658, 0.008370889350771904, -0.013730757869780064, -0.004444692749530077, 0.005906474776566029, 0.004041765350848436, 0.01560483779758215, 0.016004640609025955, -0.036806926131248474, 0.07866137474775314, 0.028086209669709206, -0.01986524648964405, 0.034033287316560745, -0.009426621720194817, -0.003432689467445016, -0.007971085608005524, 0.008208469487726688, -0.0419543981552124, -0.0020037037320435047, -0.008589532226324081, -0.025225114077329636, -0.0011338182957842946, 0.0014953594654798508, -0.024975236505270004, -0.026911785826086998, 0.029260631650686264, -0.0006945808418095112, 0.02876087836921215, 0.02763642929494381, -0.004291642922908068, -0.017029138281941414, 0.04757663980126381, 0.00402927165850997, -0.025912277400493622, -0.00442595174536109, 0.018940700218081474, -0.03433314338326454, 0.027536479756236076, 0.00422917352989316, -0.04695194587111473, -0.015080095268785954, -0.0041073583997786045, -0.016142074018716812, -0.003954308573156595, -0.023076169192790985, 0.009282941929996014, -0.03893088549375534, 0.004276025574654341, 0.03470795601606369, 0.024438001215457916, 0.05267413705587387, 0.04035518318414688, 0.06331890821456909, -0.006125117652118206, -0.033158719539642334, 0.016404444351792336, -0.0212020892649889, -0.011281960643827915, 0.03748159483075142, 0.008683236315846443, 0.03835616633296013, -0.010975860990583897, 0.03668198734521866, 0.03978046774864197, -0.003748159622773528, 0.014317969791591167, 0.011481862515211105, 0.026012226939201355, 0.016954176127910614, 0.04375351592898369, 0.03303378075361252, 0.009270448237657547, -0.004691446200013161, 0.013618312776088715, 0.010700996033847332, 0.007415108848363161, -0.006453081499785185, 0.00024538731668144464, -0.02256392128765583, -0.023613406345248222, -0.0055285352282226086, 0.050550177693367004, -0.013843202963471413, -0.0033733437303453684, -0.024525457993149757, 0.014530365355312824, 0.017841240391135216, -0.029810363426804543, 0.02471286617219448, 0.002256704494357109, -0.02375083789229393, 0.021164607256650925, 0.0019287404138594866, 0.010919637978076935, 0.018465932458639145, -0.011769221164286137, -0.0235009603202343, -0.03985543176531792, -0.021327028051018715, 0.0037981350906193256, -0.03303378075361252, 0.02478782832622528, 0.01374325156211853, 0.02373834326863289, 0.00012728125147987157, 0.002272321842610836, -0.000937039905693382, 0.03011021576821804, -0.02938557043671608, 0.011163268238306046, 0.005331757012754679, -0.02763642929494381, -0.00034475259599275887, -0.003376467153429985, 0.02701173722743988, -0.009732721373438835, -0.011525590904057026, -0.025862300768494606, -0.012662532739341259, -0.040405161678791046, -0.006646736524999142, -0.0029220026917755604, -0.009351658634841442, 0.01946544274687767, 0.003131275065243244, -0.0001775495329638943, -0.028386062011122704, 0.009332917630672455, 0.002369149122387171, -0.0075025660917162895, -0.0034732946660369635, -0.00539734959602356, 0.005238052923232317, 0.006540538277477026, 0.005509794689714909, 0.018865736201405525, 0.01794118992984295, 0.01770380698144436, 0.015442417934536934, -0.02398822084069252, -0.00949533749371767, -0.007933604530990124, -0.0005981437861919403, 0.016104592010378838, 0.050475217401981354, 0.041104815900325775, -0.025562448427081108, 0.04315381124615669, -3.2674386602593586e-05, 0.028061222285032272, -0.001742894179187715, 0.005834634881466627, -0.05457320436835289, -0.005506671033799648, -0.024825310334563255, -0.029435547068715096, 0.0006196176400408149, -0.002904823748394847, 0.008071037009358406, 0.028560975566506386, 0.007427603006362915, -0.01961536891758442, -0.017378967255353928, -0.0381062887609005, -0.0016304494347423315, 0.009245459921658039, 0.032758913934230804, -0.007852394133806229, 0.01746642403304577, -0.014180537313222885, 0.004307260271161795, -0.00639685895293951, 0.0003615412279032171, -0.008183482103049755, 0.0177912637591362, -0.04352862760424614, -0.0017803758382797241, 0.00540047325193882, -0.005887734238058329, 0.02621212974190712, 0.009526572190225124, 0.006715452764183283, 0.0014977020910009742, -0.04260408133268356, 0.009720227681100368, 0.050250325351953506, 0.016804248094558716, -0.026412030681967735, -0.009888894855976105, 0.010344920679926872, 0.02286377362906933, 0.04870108515024185, -0.010463612154126167, -0.00825844518840313, -0.03105974942445755, 0.004657088313251734, -0.002628396963700652, 0.019652850925922394, 0.0023472849279642105, 0.018453439697623253, 0.013043595477938652, -0.006915354635566473, 0.016304494813084602, -0.006150105036795139, 0.03323368355631828, -0.015192540362477303, -0.014555352739989758, 0.02413814701139927, 0.01020124088972807, 0.03858105465769768, -0.0059533268213272095, 0.022838786244392395, -0.024100666865706444, -0.015867209061980247, -0.00692784832790494, -0.012481371872127056, -0.0005395787884481251, -0.010219981893897057, -0.01140689942985773, -0.016404444351792336, 0.0028345456812530756, -0.038006339222192764, -0.00498192897066474, -0.004906965419650078, -0.009045558050274849, 0.019352996721863747, 0.05237428471446037, -0.0009151756530627608, -0.008770693093538284, 0.020290037617087364, 0.006796662695705891, -0.002228593220934272, 0.015242516063153744, 0.008745705708861351, -0.002277006860822439, -0.04107983037829399, -0.0042073093354702, 0.008558297529816628, 0.0013883807696402073, -0.010120030492544174, 0.006034536752849817, -0.010613538324832916, 0.007165231741964817, 0.0030375709757208824, 0.03011021576821804, 0.015067601576447487, 0.046277277171611786, 0.02836107462644577, 0.009476596489548683, 0.00213645095936954, 0.02390076406300068, -0.0154923927038908, 0.0024487976916134357, 0.008139753714203835, 0.0012962385080754757, 0.0154549116268754, 0.010719736106693745, -0.03145955130457878, 0.01922805793583393, -0.00034807127667590976, -0.02271384745836258, 0.012562581337988377, -0.02002766542136669, 0.0022645131684839725, -0.012387667782604694, 0.03638213500380516, -0.005144348833709955, 0.0011494356440380216, -0.020190086215734482, 0.016816742718219757, 0.01159430667757988, 0.013518362306058407, 0.040230248123407364, 0.012968632392585278, 0.02081478014588356, -0.01685422472655773, 0.027061711996793747, 0.0027299094945192337, 0.03113471157848835, -0.011413145810365677, 0.010769711807370186, -0.02016509883105755, 0.0018959440058097243, 0.055472761392593384, 0.0033952079247683287, 0.05982062593102455, -0.009945116937160492, 0.007939851842820644, 0.022051671519875526, -0.007639998570084572, -0.01961536891758442, -0.022139130160212517, -0.02296372503042221, -0.051099907606840134, -0.004525902681052685, 0.03710677847266197, -0.019590381532907486, 0.003062558826059103, -0.0025768596678972244, 0.02748650312423706, 0.019015662372112274, 0.03203427046537399, 0.01564231887459755, -0.011744233779609203, 0.023151133209466934, 0.035632502287626266, -0.013430905528366566, -0.004797644447535276, -0.03225915879011154, 0.02495024912059307, -0.025462497025728226, -0.004294766113162041, 0.019915221258997917, 0.01731649786233902, 0.0019303022418171167, 0.022851279005408287, 0.03715675696730614, 0.02106465771794319, -0.018291018903255463, 0.01882825419306755, -0.005697202403098345, -0.004138593096286058, -0.021489448845386505, -0.017341485247015953, -0.03026014193892479, 0.012650039047002792, 0.01922805793583393, 0.0007488510455004871, -0.008152247406542301, 0.01722904108464718, 0.018316006287932396, 0.02517513930797577, -0.013380929827690125, -0.00925795454531908, -0.0012095622951164842, 0.017691312357783318, -0.011281960643827915, 0.026237117126584053, -0.010188747197389603, -0.020839767530560493, 0.02422560565173626, -0.0061844633892178535, -0.02996028959751129, 0.001947481301613152, -0.048176344484090805, -0.009788943454623222, 0.0036294679157435894, -0.011119539849460125, -0.033083755522966385, -0.017741288989782333, 0.03230913728475571, 0.008071037009358406, 0.01827852427959442, -0.0200901348143816, -0.005275534465909004, -0.02676185965538025, -0.008164741098880768, 0.018178574740886688, 0.0033952079247683287, 0.0006141515914350748, 0.0008808175334706903, 0.01025121659040451, -0.0037387891206890345, -0.003935567568987608, -0.047951456159353256, 0.015279997140169144, -0.013255991041660309, 0.013056089170277119, 0.00910178106278181, -0.003189059207215905, 0.02636205591261387, 0.01595466583967209, 0.023688368499279022, -0.0008722279453650117, -0.02200169675052166, 0.034832894802093506, 0.013118558563292027, -0.023688368499279022, 0.004007407464087009, 0.014392932876944542, 0.004385346546769142, -0.06276918202638626, 0.02121458388864994, -0.023788319900631905, 0.0033983313478529453, -0.03448306769132614, -0.002617464866489172, -0.005131855141371489, -0.009701486676931381, -0.0704154223203659, -0.007277676369994879, 0.031734418123960495, -0.01414305530488491, 0.002673687180504203, 0.005416090600192547, -0.021551918238401413, 0.020514925941824913, 0.00814600009471178, 0.02382580190896988, 0.011488108895719051, 0.010176253505051136, -0.030759897083044052, 0.016729285940527916, -0.016104592010378838, -0.002548748627305031, 0.012443889863789082, -0.005890857428312302, -0.018803266808390617, 0.021901745349168777, 0.02136451005935669, -0.015279997140169144, 0.0076337517239153385, 0.0018850119085982442, -0.013468386605381966, -0.007590023335069418, -0.014805230312049389, 0.03313373029232025, 0.0068778726272284985, -0.027761368080973625, -0.005172460339963436, -0.011025835759937763, 0.03715675696730614, 0.0010854045394808054, 0.02192673273384571, 0.010076302103698254, 0.043403688818216324, -0.045802511274814606, -0.009888894855976105, -0.009938869625329971, 0.01905314438045025, -0.004566507879644632, 0.019265539944171906, -0.037931375205516815, -0.000625083688646555, 0.012831199914216995, 0.00042205839417874813, -0.020777298137545586, -0.017891215160489082, -0.01659185253083706, -0.008189728483557701, 0.010569809935986996, 0.004944447427988052, 0.005072509404271841, 0.0005212284158915281, 0.04050511121749878, 0.006765427999198437, 0.007515059784054756, -0.023625899106264114, 0.03500781208276749, -0.0209022369235754, -0.025474991649389267, -0.017828745767474174, 0.03215920925140381, -0.01365579478442669, -0.023863282054662704, 0.006640489213168621, 0.03473294526338577, -0.039605554193258286, -0.02978537417948246, 0.008958101272583008, 0.011962875723838806, -0.017678819596767426, 0.00615635234862566, -0.020277542993426323, 0.05482308194041252, -0.02486279234290123, -0.017353978008031845, 0.02621212974190712, 0.0024425506126135588, -0.0009713980252854526, -0.00615635234862566, -0.011762973852455616, 0.0212020892649889, -0.007839900441467762, -0.01740395464003086, -0.003926197066903114, 0.012206505984067917, 0.011281960643827915, -0.008214716799557209, -0.02581232599914074, -0.0061532286927104, -0.009289189241826534, 0.027686405926942825, 0.012968632392585278, 0.005253670271486044, -0.005640980321913958, -0.017441436648368835, 0.011488108895719051, -0.0166043471544981, -0.013093571178615093, 0.04545268043875694, -0.005194324534386396, -0.017591362819075584, 0.009076792746782303, -0.04125474393367767, -0.0007527553825639188, -0.004788273945450783, 0.012868680991232395, -0.011881666257977486, -0.005566016770899296, 0.00712775019928813, 0.004953817464411259, -0.001800678321160376, 0.007340145763009787, 0.016429433599114418, -0.019178083166480064, 0.026561956852674484, -0.04510285332798958, -0.015467405319213867, 0.00830842088907957, 0.018316006287932396, 0.013555844314396381, 0.012918656691908836, 0.03373343497514725, -0.004197938833385706, 0.008383383974432945, 0.022226586937904358, 0.003932443913072348, 0.030609970912337303, -0.01709160767495632, 0.040954891592264175, -0.019652850925922394, 0.01612957939505577, -0.0352826751768589, -0.009045558050274849, -0.016329482197761536, -0.029335595667362213, -0.006168846040964127, 0.033083755522966385, 0.004338494502007961, 0.015979653224349022, 0.04045513644814491, 0.029085718095302582, -0.011013342067599297, 0.002370710950344801, -0.026636920869350433, 0.01611708663403988, 0.004285395611077547, -0.022339031100273132, -0.020464951172471046, 0.020839767530560493, 0.02168934978544712, -0.0011057070223614573, -0.003323368262499571, 0.010394896380603313, 0.021027175709605217, 0.027911294251680374, 0.01755388081073761, -0.00845834705978632, -0.018803266808390617, -0.004510285332798958, -0.005131855141371489, -0.03598233312368393, 0.0046508414670825005, -0.001969345612451434, 0.01627950742840767, 0.0037918880116194487, 0.031659454107284546, 0.03503279760479927, -0.004016777500510216, 0.014068092219531536, -0.02113961987197399, 0.01028869766741991, 0.003392084501683712, 0.01827852427959442, 0.0016944805392995477, -0.02081478014588356, 0.011525590904057026, -0.0008979965932667255, -0.0054098437540233135, -0.005981437861919403, 0.03430815413594246, 0.015567355789244175, -0.004244790878146887, 0.0030922316946089268, 0.033483557403087616, -0.014505377970635891, 0.0032546520233154297, -0.01724153384566307, -0.011937888339161873, 0.003726295428350568, -0.0062188212759792805, 0.01859087124466896, -0.00619695708155632, -0.014080585911870003, 0.0007101981318555772, -0.021976709365844727, 0.0054285842925310135, 0.02310115657746792, -0.03428316488862038, -0.0404801219701767, -0.019278034567832947, 0.012856187298893929, 0.00014348424156196415, -0.006902860477566719, -0.0332086943089962, 0.014917675405740738, -0.004282272420823574, 0.0012532909167930484, -0.014880193397402763, 0.009514078497886658, -0.032284148037433624, -0.01068850141018629, -0.013193521648645401, 0.021089645102620125, -0.01044487114995718, 0.021089645102620125, -0.022976217791438103, 0.012918656691908836, -0.01955289952456951, -0.017041632905602455, -0.0026502611581236124, -0.008270938880741596, 0.014555352739989758, -0.025862300768494606]
metadata : {"source": "test", "crawled_at": "2025-03-14T10:04:52.191229", "url_path": "/graph/", "chunk_size": 2391}
updated_dt: 2025-03-14T10:04:54.240566
---
```
from__future__import annotations
fromdataclassesimport dataclass
frompydantic_graphimport BaseNode, End, Graph, GraphRunContext

@dataclass
classDivisibleBy5(BaseNode[None, None, int]): [](https://ai.pydantic.dev/graph/#__code_4_annotation_1)
  foo: int
  async defrun(
    self,
    ctx: GraphRunContext,
  ) -> Increment | End[int]:
    if self.foo % 5 == 0:
      return End(self.foo)
    else:
      return Increment(self.foo)

@dataclass
classIncrement(BaseNode): [](https://ai.pydantic.dev/graph/#__code_4_annotation_2)
  foo: int
  async defrun(self, ctx: GraphRunContext) -> DivisibleBy5:
    return DivisibleBy5(self.foo + 1)

fives_graph = Graph(nodes=[DivisibleBy5, Increment]) [](https://ai.pydantic.dev/graph/#__code_4_annotation_3)
result = fives_graph.run_sync(DivisibleBy5(4)) [](https://ai.pydantic.dev/graph/#__code_4_annotation_4)
print(result.output)
#> 5
# the full history is quite verbose (see below), so we'll just print the summary
print([item.data_snapshot() for item in result.history])
#> [DivisibleBy5(foo=4), Increment(foo=4), DivisibleBy5(foo=5), End(data=5)]

```

_(This example is complete, it can be run "as is" with Python 3.10+)_
A [mermaid diagram](https://ai.pydantic.dev/graph/#mermaid-diagrams) for this graph can be generated with the following code:
graph_example_diagram.py```
fromgraph_exampleimport DivisibleBy5, fives_graph
fives_graph.mermaid_code(start_node=DivisibleBy5)

```

In order to visualize a graph within a `jupyter-notebook`, `IPython.display` needs to be used:
jupyter_display_mermaid.py```
fromgraph_exampleimport DivisibleBy5, fives_graph
fromIPython.displayimport Image, display
display(Image(fives_graph.mermaid_image(start_node=DivisibleBy5)))

```

## Stateful Graphs
The "state" concept in `pydantic-graph` provides an optional way to access and mutate an object (often a `dataclass` or Pydantic model) as nodes run in a graph. If you think of Graphs as a production line, then your state is the engine being passed along the line and built up by each node as the graph is run.
In the future, we intend to extend `pydantic-graph` to provide state persistence with the state recorded after each node is run, see [#695](https://github.com/pydantic/pydantic-ai/issues/695).
Here's an example of a graph which represents a vending machine where the user may insert coins and select a product to purchase.
vending_machine.py