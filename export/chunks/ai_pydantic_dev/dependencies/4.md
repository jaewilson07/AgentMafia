---
url: https://ai.pydantic.dev/dependencies/
session_id: pydantic_ai_docs
chunk_number: 4
title: Testing Dependencies in Pydantic Applications
summary: This code snippet demonstrates how to customize and test dependencies in a Pydantic application by subclassing 'MyDeps' to create 'TestMyDeps'. The example shows how to override dependencies during a test block and safely call application code while using these mock dependencies to ensure proper testing.
embedding: [-0.039642583578825, -7.566052954643965e-05, 0.04220503196120262, -0.0221827644854784, 0.010576380416750908, 0.036075253039598465, 0.0004996931529603899, 0.010457050055265427, -0.02436838112771511, 0.0035359275061637163, 0.01949470490217209, -0.04288332909345627, -0.016454938799142838, -0.03100060112774372, -0.01550030056387186, -0.047279685735702515, -0.029141569510102272, 0.03778355196118355, -0.01211510505527258, 0.0746627151966095, 0.049766767770051956, 0.039115022867918015, 0.036175742745399475, -0.0034197380300611258, -0.0021290930453687906, -0.0399189256131649, -0.02571241185069084, 0.04612407088279724, 0.03275914490222931, -0.03391475975513458, 0.03285963088274002, -0.0005122541333548725, -0.017987383529543877, 0.06215193495154381, 0.03582403436303139, 0.009602900594472885, 0.013942734338343143, -0.021416541188955307, -0.01090924721211195, 0.017585430294275284, 0.008711068890988827, -0.053911905735731125, 0.01953238807618618, 0.02433069795370102, -0.06782951951026917, 0.06190071254968643, -0.010802478529512882, 0.00242584734223783, 0.008246310986578465, 0.009709669277071953, -0.05310799926519394, -0.012353764846920967, 0.011342602781951427, 0.011229553259909153, -0.024380942806601524, 0.004914499819278717, -0.005222244653850794, 0.038486968725919724, -0.013565903529524803, -0.06421194225549698, 0.027558881789445877, -0.01339004933834076, -0.03208084776997566, 0.026277657598257065, -0.05320848897099495, -0.028915472328662872, 0.0030381970573216677, -0.009100460447371006, -0.020914100110530853, -0.009866682812571526, 0.045872852206230164, 0.039642583578825, -0.052706047892570496, -0.029141569510102272, -0.021680323407053947, -0.012548460625112057, 0.02453167550265789, 0.05526849627494812, 0.03831111639738083, -0.040948931127786636, -0.01777384616434574, 0.029543522745370865, -0.045646753162145615, 0.002728882012888789, -0.03348768502473831, -0.03067401424050331, -0.05295726656913757, -0.00800137035548687, -0.004258186090737581, -0.026579121127724648, -0.003771446645259857, 0.004496845882385969, -0.05908704549074173, 0.0366530604660511, 0.05265580117702484, 0.050017986446619034, 0.012535899877548218, -0.010124183259904385, -0.005275628995150328, 0.02863912843167782, 0.024029234424233437, 0.012309800833463669, -0.11124040931463242, -0.0016423535998910666, 0.06521682441234589, 0.00813326146453619, -0.017296526581048965, 0.005215964280068874, -0.03851209208369255, 0.03409061208367348, -0.049138717353343964, 0.0032752864062786102, 0.033889636397361755, 0.010256074368953705, -0.031176455318927765, 0.00346684199757874, 0.01975848712027073, -0.05712752416729927, 0.010526136495172977, -0.06180022656917572, -0.050445061177015305, -0.03524622693657875, 0.040119901299476624, -0.0032062006648629904, 0.04537041112780571, -0.010884124785661697, -0.012561021372675896, -0.02122812718153, -0.05026920884847641, 0.010161866433918476, 0.0002847819123417139, -0.015651032328605652, 0.011901567690074444, -0.013339804485440254, -0.012447972781956196, 0.0008714208961464465, -0.03906477615237236, -0.017711039632558823, -0.0228610597550869, 0.02306203544139862, 0.04755602777004242, 0.004038368351757526, 0.007498929742723703, 0.01139912661164999, -0.004895658232271671, 0.03539695963263512, -0.033336952328681946, 0.009364241734147072, -0.0027869767509400845, 0.016379572451114655, 0.009791316464543343, 0.023991551250219345, -0.06375974416732788, -3.113268758170307e-05, -0.011568700894713402, -0.012014617212116718, 0.001377787091769278, 0.03489451855421066, 0.04951554536819458, -0.01110394299030304, -0.04220503196120262, 0.005159439519047737, -0.030874991789460182, 0.010004853829741478, -0.05235433951020241, -0.03067401424050331, -0.03582403436303139, -0.002122812671586871, -0.03527135029435158, 0.0175100639462471, 0.0039001971017569304, -0.04366211220622063, 0.008309115655720234, 0.006738988216966391, 0.05667532980442047, -0.009125581942498684, -0.004361814819276333, -0.02426789328455925, -0.05451483279466629, -0.046400412917137146, -0.007932284846901894, -0.018904337659478188, -0.04846042022109032, -0.0012168489629402757, -0.06521682441234589, -0.04104941710829735, -0.010023695416748524, 0.04866139590740204, 0.03047303855419159, 0.04788261279463768, 0.03155328705906868, 0.012133946642279625, -0.0023551916237920523, 0.019871536642313004, 0.05677581578493118, -0.013038340024650097, 0.0412755161523819, 0.008842959068715572, 0.03775843232870102, -0.018376775085926056, 0.0039033375214785337, 0.04516943171620369, 0.02469496801495552, 0.023099718615412712, -0.007329355925321579, -0.026051558554172516, -0.00914442352950573, -0.031176455318927765, -0.012328642420470715, -0.02926718071103096, 0.04079819843173027, -0.043134547770023346, 0.00019989688007626683, 0.05602215602993965, -0.01992177963256836, -0.017560308799147606, -0.006820634473115206, 0.03745696693658829, -0.04180308058857918, 0.041853323578834534, -0.0228610597550869, -0.0058628567494452, 0.05562020465731621, -0.04549602046608925, -0.02632790058851242, 0.012177910655736923, -0.0497165247797966, -0.04288332909345627, 0.00832795724272728, 0.042807962745428085, -0.011047418229281902, -0.03851209208369255, -0.002956550335511565, -0.02730766125023365, -0.01019326876848936, -0.058383628726005554, 0.001473564887419343, -0.03331182897090912, -0.004189100582152605, 0.008610580116510391, 0.009175825864076614, 0.02296154759824276, -0.0007552314200438559, -0.00044356106081977487, 0.02678009867668152, 0.019117875024676323, -0.03263353556394577, -0.029015960171818733, 0.062955841422081, -0.021793372929096222, 0.054565075784921646, -0.0017035885248333216, 0.034417200833559036, -0.01550030056387186, -0.010758514516055584, -0.05627337470650673, 0.01806274987757206, -0.012768278829753399, -0.03142767772078514, 0.044239919632673264, -0.01848982460796833, 0.045847728848457336, -0.023765452206134796, 0.013704074546694756, 0.0063872793689370155, -0.014570784755051136, 0.04753090441226959, -0.010117902420461178, 0.038285993039608, 0.027031319215893745, 0.014721517451107502, 0.006896000821143389, 0.017321648076176643, 0.0005730966222472489, -0.029292302206158638, -0.006481487303972244, -0.007272831629961729, 0.0034480004105716944, -0.01507322583347559, -0.010978332720696926, -0.017849212512373924, 0.006814354099333286, 0.014834566041827202, 0.032382313162088394, -0.025486312806606293, 0.01622883975505829, -6.462056626332924e-05, 0.0023096578661352396, -0.02851351909339428, 0.047832369804382324, -0.01730908825993538, 0.06938708573579788, 0.013101145625114441, -0.024406064301729202, 0.04157698154449463, -0.02655399963259697, -0.002923577791079879, 0.010017414577305317, 0.015085786581039429, -0.02504667639732361, -0.013013218529522419, -0.01659310981631279, 0.0071786236949265, -0.002245282521471381, -0.03939136490225792, 0.003495104145258665, 0.02577521651983261, 0.00832795724272728, 0.008346798829734325, -0.010224671103060246, 0.01019326876848936, 0.023803135380148888, 0.02489594556391239, 0.011210711672902107, -0.019645437598228455, -0.045320164412260056, 0.025750095024704933, -0.04386308789253235, 0.024117160588502884, -0.02093922346830368, -0.0625036433339119, -0.0011697451118379831, 0.04223015531897545, -0.019457021728157997, -0.043034058064222336, -0.017912017181515694, 0.031075967475771904, -0.016517743468284607, -0.012535899877548218, 0.047179196029901505, -0.0457221195101738, -0.015186275355517864, 0.007335636764764786, 0.018464701250195503, 0.006390419788658619, -0.002446258906275034, -0.017811529338359833, 0.011003455147147179, -0.0016282224096357822, 0.04908847063779831, -0.028136687353253365, 0.02561192214488983, 0.013364926911890507, -0.033236462622880936, 0.034442320466041565, 0.024456309154629707, 0.00242584734223783, 0.016969939693808556, -0.015889693051576614, 0.03941648453474045, -0.011003455147147179, -0.015412373468279839, -0.001492406358011067, 0.006845756899565458, 0.01900482550263405, -0.05768021196126938, -0.038788434118032455, 0.022823376581072807, -0.02126581035554409, -0.0013126267585903406, -0.05235433951020241, -0.004440321121364832, -0.020361416041851044, 0.0003658397472463548, -0.024707529693841934, -0.005065232049673796, -0.007071855012327433, -0.0254486296325922, -0.013779440894722939, 0.021479347720742226, 0.03200548142194748, 0.0354723259806633, -0.023263011127710342, -0.021517029032111168, -0.0020851294975727797, 0.004452882334589958, -0.00889948382973671, 0.02547375112771988, 0.044013820588588715, 0.0031088527757674456, 0.03589940071105957, -0.03961746022105217, 0.01659310981631279, -0.009659425355494022, 0.05356019735336304, 0.016341889277100563, 0.008227469399571419, 0.018841532990336418, 0.006327614653855562, 0.02906620316207409, 0.06089583411812782, -0.09265009313821793, -0.007699906360358, 0.007480088155716658, -0.022057153284549713, 0.01115418691188097, -0.021290931850671768, 0.018866654485464096, 0.04092380777001381, 0.01393017265945673, 0.004751206375658512, -0.02655399963259697, -0.016781525686383247, 0.008604300208389759, 0.012642668560147285, 0.018627995625138283, 0.056625086814165115, 0.0004914499586448073, 0.014445174485445023, 0.006814354099333286, 0.04092380777001381, -0.022233007475733757, 0.02028604969382286, -0.021956665441393852, -0.030071085318922997, -0.044440895318984985, 0.010130464099347591, -0.023363500833511353, 0.05702703818678856, 0.04810871183872223, -0.01259242370724678, -0.06416169553995132, -0.001578763360157609, -0.045546263456344604, 0.0005872277542948723, 0.027357904240489006, 0.027332782745361328, -0.018841532990336418, 0.009747352451086044, -0.02806132286787033, -0.01636701077222824, 0.013578464277088642, 0.024255333468317986, 0.006092095281928778, 0.01066430751234293, -0.023702647536993027, 0.0018307688878849149, 0.015311885625123978, 0.006732707377523184, 0.007668503560125828, -0.0250843595713377, -0.01216534897685051, 0.00579063082113862, 0.04677724465727806, -0.04712895303964615, 0.0010182277765125036, -0.03936624154448509, -0.0681309774518013, 0.04233064129948616, -0.014784322120249271, -0.005146878771483898, -0.027131807059049606, -0.00535727571696043, -0.012272117659449577, -0.010400526225566864, -0.032156214118003845, 0.016844330355525017, -0.01004253700375557, 0.05687630549073219, -0.01740957610309124, 0.057730454951524734, 0.03831111639738083, -0.03632647544145584, 0.06617145985364914, 0.020976906642317772, 0.038914043456315994, 0.051098234951496124, -0.011147907003760338, -0.006820634473115206, 0.01838933490216732, 0.032482802867889404, -0.0014814154710620642, -0.010230951942503452, -0.03632647544145584, -0.0158771313726902, -0.04413942992687225, 0.05406263843178749, 0.029844986274838448, -0.016442377120256424, -0.00612349808216095, -0.008189786225557327, 0.017133234068751335, 0.027784978970885277, -0.004952182527631521, -0.025134604424238205, 0.020650319755077362, -0.045847728848457336, -0.017271405085921288, -0.03210597112774849, -0.009514973498880863, -0.025699850171804428, 0.006349596194922924, 0.05009335279464722, -0.013239316642284393, -0.002020754385739565, 0.03504525125026703, 0.03622598573565483, -0.00033875505323521793, -0.00029341760091483593, -0.004817151930183172, 0.031930115073919296, 0.0014892661711201072, -0.019808730110526085, 0.06074510142207146, -0.0013134118635207415, -0.041074540466070175, 0.025222530588507652, -0.007492649368941784, 0.008057895116508007, 0.017974821850657463, -0.028814982622861862, -0.008334238082170486, 0.013427731581032276, 0.019607754424214363, -0.01019326876848936, 0.004945902153849602, -0.029543522745370865, 0.010576380416750908, 0.009916926734149456, -0.0031528163235634565, 0.012799681164324284, -0.04351137951016426, -0.02534814178943634, 0.014068343676626682, 0.014972737990319729, -0.03808501735329628, -0.003711781930178404, -0.00655685318633914, 0.00035524138365872204, 0.014369809068739414, -0.0038028492126613855, -0.008566617034375668, 0.005263068247586489, -0.01712067238986492, -0.041200149804353714, 0.031101088970899582, 0.007040452677756548, 0.0032376032322645187, 0.021140199154615402, 0.003878215327858925, -0.010413086973130703, 0.028789861127734184, -0.005024408455938101, -0.023765452206134796, -0.03539695963263512, 0.02904108166694641, -0.006544292438775301, 0.006079534534364939, -0.0008549345075152814, -0.01512346975505352, 0.060242660343647, -0.00971595011651516, 0.028714494779706, 0.004129435867071152, 0.038285993039608, 0.012655229307711124, -0.02185617759823799, -0.003243883838877082, 0.013201633468270302, -0.000763082061894238, 0.013766879215836525, -0.03491963818669319, -0.005099774803966284, -0.012083702720701694, -0.005605355836451054, 0.02296154759824276, 0.023891063407063484, 0.005253647454082966, -0.0277598574757576, 0.012303520925343037, 0.018238604068756104, 0.012177910655736923, -0.05142482370138168, 0.009395644068717957, 0.00870478805154562, 0.004619315732270479, 0.031201576814055443, 0.0013573754113167524, -0.007210026495158672, -0.012912729755043983, 0.004377515986561775, -0.022986669093370438, 0.01095949113368988, 0.030221818014979362, -0.0068269153125584126, -0.027784978970885277, 0.001300850766710937, -0.02100202813744545, -0.03655257448554039, -0.006198863964527845, -0.000910674047190696, 0.00813326146453619, -0.025523995980620384, -0.0003299230884294957, -0.008541494607925415, 0.0053604161366820335, -0.019281167536973953, 0.017057867720723152, -0.022032031789422035, 0.044466014951467514, 0.018075309693813324, -0.04712895303964615, -0.016291644424200058, -0.007065574638545513, -0.0015112479450181127, -0.009295156225562096, 0.002264124108478427, 0.01712067238986492, -0.011053699068725109, 0.005027548875659704, -0.0009428616613149643, -0.027483515441417694, -0.018439579755067825, -0.038914043456315994, -0.038285993039608, -0.01095949113368988, -0.007932284846901894, 0.0016486340900883079, 0.02688058651983738, -0.027332782745361328, -0.005529989954084158, -0.008811556734144688, -0.006896000821143389, 0.002818379318341613, 0.02524765394628048, 0.0035955924540758133, 0.013465414755046368, -0.0022075995802879333, 0.003953581675887108, 0.006063833367079496, -0.02302435226738453, 0.011461932212114334, -0.011863884516060352, -0.013754318468272686, 0.01177595742046833, -0.026855463162064552, -0.017849212512373924, 0.0024054355453699827, 0.02577521651983261, -0.04883725196123123, -0.001848040265031159, 0.011976934038102627, 0.016681035980582237, 0.014156271703541279, 0.02208227664232254, 0.016417255625128746, -0.011191870085895061, -0.008491250686347485, 0.062302667647600174, -0.02698107436299324, 0.012611265294253826, 0.0030900111887604, 0.005950783845037222, 0.013251877389848232, 0.014068343676626682, 0.03994404897093773, 0.00378400762565434, -0.03228182718157768, -0.017623113468289375, 0.0452699214220047, -0.044993579387664795, 0.004308430477976799, 0.01777384616434574, -0.0155128613114357, 0.001691027544438839, 0.01616603508591652, 0.016505181789398193, -0.007034171838313341, 0.0338393934071064, -0.0020254647824913263, 0.0015230238204821944, -0.0036803793627768755, 0.02198178693652153, -0.0022766850888729095, -0.007184904534369707, -0.011606384068727493, 0.007436124607920647, -0.036401841789484024, -0.02700619585812092, 0.021843615919351578, 0.0021181022748351097, -0.011443090625107288, -0.037255991250276566, 0.007078135851770639, 0.04745553806424141, -0.05451483279466629, -0.0026048419531434774, 0.04240600764751434, -0.009734791703522205, 0.03316109627485275, -0.01104113832116127, -0.006619658321142197, -0.003044477663934231, -0.007461246568709612, 0.04177795723080635, -0.005146878771483898, -0.02420508861541748, -0.014545663259923458, -0.009207229129970074, -0.02969425544142723, -0.01897970400750637, 0.002287676092237234, 0.02873961813747883, 0.01247937511652708, -0.03740672394633293, -0.04529504477977753, -0.003928459715098143, 0.037708185613155365, 0.05345970764756203, -0.006638499908149242, -0.00669502466917038, 0.028438152745366096, -0.005457764025777578, 0.003834251780062914, -0.04288332909345627, 0.006104656495153904, -0.007297953590750694, -0.01134888269007206, 0.04212966561317444, -0.02818693220615387, -0.02463216334581375, 0.021504469215869904, -0.014420052990317345, -0.026353023946285248, -0.003129264572635293, -0.035522568970918655, -0.015311885625123978, 0.027558881789445877, -0.0012301950482651591, -0.008748751133680344, -0.018401896581053734, -0.01420651562511921, -0.01865311712026596, -0.010136744007468224, -0.018050188198685646, -0.006676183082163334, -0.06828171014785767, 0.011788519099354744, -0.006035570986568928, -0.008064175955951214, 0.00737331947311759, -0.006217705551534891, -0.009709669277071953, 0.011939250864088535, -0.013477976433932781, 0.001665905467234552, 0.033563051372766495, 0.028588885441422462, -0.016517743468284607, 0.034542810171842575, -0.0420040562748909, 0.009238631464540958, -0.0117257134988904, -0.009571498259902, 0.001318907248787582, 0.003755745477974415, 0.0029534101486206055, -0.01085900329053402, -0.058785580098629, 0.019846413284540176, 0.0009601330966688693, -0.008359359577298164, -0.024406064301729202, 0.03718062490224838, -0.03200548142194748, -0.013000656850636005, -0.0069588059559464455, -0.03100060112774372, 0.013603586703538895, 0.03240743651986122, 0.03112621046602726, -0.03218133747577667, 0.014118588529527187, 0.012611265294253826, 0.011072540655732155, -0.022459106519818306, -0.03363841399550438, 0.03270890191197395, 0.017849212512373924, -0.01242913119494915, 0.011072540655732155, 0.02642838843166828, -0.01014302484691143, 0.010544977150857449, 0.01393017265945673, -0.006302492693066597, -0.006085814908146858, 0.0029000258073210716, -0.026830341666936874, -0.04873676225543022, -0.013754318468272686, -0.013917611911892891, -0.005586514249444008, 0.006544292438775301, 0.02808644436299801, 0.00976619403809309, 0.021353736519813538, -0.10601501911878586, -0.06089583411812782, 0.005800051614642143, -0.02969425544142723, 0.011417968198657036, 0.03544720262289047, 0.03223158046603203, 0.01354078110307455, -0.01177595742046833, 0.025159725919365883, 0.00397556321695447, -0.02571241185069084, -0.01076479535549879, -0.01630420610308647, 0.03871306777000427, -0.011267236433923244, 0.029618889093399048, -0.008786434307694435, 0.05361044034361839, 0.004616175312548876, -0.0072791120037436485, -0.025222530588507652, -0.040371123701334, 0.024946188554167747, 0.018640555441379547, 0.006063833367079496, 0.004003825597465038, 0.027684491127729416, 0.014269320294260979, 0.00039508339250460267, -0.015600788407027721, -0.026026437059044838, -0.017660796642303467, 0.010978332720696926, -0.02214508131146431, 0.04856090992689133, 0.008861800655722618, 0.015424934215843678, 0.025599362328648567, -0.026805220171809196, -0.005818893201649189, -0.002515344647690654, -0.0011548289330676198, -0.02201947011053562, 0.020436782389879227, -0.0043021501041948795, -0.03223158046603203, -0.023338377475738525, -0.01550030056387186, 0.005027548875659704, 0.016354450955986977, 0.01573896035552025, 0.000658668577671051, 0.0342915877699852, 0.02884010598063469, 0.012253276072442532, -0.022559594362974167, 0.02773473598062992, -0.010752234607934952, 0.025825459510087967, -8.179384167306125e-05, -0.003228182438760996, 0.03002084232866764, 0.01859031245112419, -0.006120357662439346, 0.0039001971017569304, -0.008943446911871433, 0.0016282224096357822, -0.011549859307706356, 0.023966429755091667, -0.01622883975505829, 0.005099774803966284, 0.03321133926510811, -0.007882040925323963, -0.018904337659478188, -0.0033946160692721605, 0.004264466930180788, -0.014545663259923458, -0.0010527706472203135, -0.011537298560142517, 0.03753233328461647, -0.024029234424233437, 0.016932256519794464, 0.051952384412288666, -0.047606270760297775, 0.003633275395259261, 0.009797596372663975, 0.010902966372668743, 0.013038340024650097, 0.029543522745370865, 0.03230694681406021, 0.013603586703538895, -0.01430700346827507, 0.030498160049319267, -0.03358817100524902, 0.019607754424214363, -0.045847728848457336, -0.009973451495170593, 0.010362843051552773, 0.008660824038088322, 0.019381655380129814, 0.044666994363069534, -0.016969939693808556, 0.0060669733211398125, -0.01254217978566885, 0.022132519632577896, -0.015236519277095795, -0.01567615568637848, -0.018213480710983276, -0.0017271405085921288, 0.01469639502465725, -0.021353736519813538, -0.027609124779701233, 0.017321648076176643, -0.04298381507396698, -0.03484427556395531, 0.042154788970947266, 0.01926860772073269, -0.03414085507392883, 0.01577664352953434, 0.024870822206139565, 0.04331040382385254, -0.009810158051550388, 0.033990126103162766, -0.009577779099345207, -0.02600131370127201, -0.019871536642313004, -0.025297896936535835, -0.025209970772266388, 0.017711039632558823, 0.03750720992684364, 0.0004482714575715363, -0.050771649926900864, 0.013829684816300869, 0.023263011127710342, -0.0060983761213719845, 0.052404582500457764, 0.02394130639731884, -0.0023551916237920523, -0.028362786397337914, 0.004528248216956854, -0.056424107402563095, 0.006965086329728365, 0.010425647720694542, -0.02250935137271881, -0.008453567512333393, 0.022421423345804214, 0.011945531703531742, -0.030397672206163406, -0.013515659607946873, 0.0158771313726902, 0.013452854007482529, -0.0155128613114357, 0.03343743830919266, -0.0014091896591708064, 0.038361359387636185, 0.0020238945726305246, -0.038788434118032455, 0.015387251041829586, -0.022484228014945984, -0.04220503196120262, 0.011606384068727493, -0.026252534240484238, -0.015613350085914135, 0.025222530588507652, -0.009854121133685112, -0.020110195502638817, -0.0155128613114357, -0.0023442006204277277, -0.043586745858192444, -0.008371921256184578, -0.008302834816277027, 0.014847127720713615, -0.0021024008747190237, 0.007794113829731941, 0.06647292524576187, 0.0350201278924942, -0.012950412929058075, 0.011713152751326561, 0.007059294264763594, 0.005573953501880169, 0.0187787264585495, -0.0014036941574886441, -0.00808301754295826, 0.04147649183869362, 0.0017192898085340858, 0.02312484011054039, 0.008629421703517437, -0.014997859485447407, 0.006280510686337948, -0.0024321277160197496, -0.027609124779701233, -0.016580548137426376, 0.006016729399561882, -0.03680379316210747, 0.01190784852951765, 0.004170258995145559, -0.009973451495170593, 0.026026437059044838, 0.008309115655720234, 0.02384081855416298, 0.019482145085930824, -0.012579862959682941, -0.009577779099345207, 0.017233721911907196, 0.0546153225004673, -0.01468383427709341, -0.01185760460793972, 0.007053013425320387, 0.0218184944242239, -0.005489166360348463, -0.021240686997771263, 0.04263210669159889, 0.02400411292910576, -0.007216306868940592, -0.00447486387565732, -0.04660138860344887, -0.01590225286781788, -0.007819236256182194, -0.01828884705901146, 0.00038193355430848897, -0.019557511433959007, -0.03627622872591019, -0.006242827512323856, -0.004217362962663174, 0.011976934038102627, 0.01014302484691143, 0.006148620042949915, 0.0448177233338356, 0.0284883975982666, 0.000357792858267203, 0.03316109627485275, -0.014909932389855385, 0.010651745833456516, -0.012259556911885738, -0.026152046397328377, -0.017321648076176643, -0.002124382881447673, 0.004364954773336649, -0.022459106519818306, 0.006801793351769447, -0.019281167536973953, -0.010268635116517544, -0.02512204274535179, 0.026629365980625153, 0.015550544485449791, 0.04954066872596741, 0.05245482549071312, 0.03090011328458786, 0.016404693946242332, 0.01463359035551548, -0.0028858946170657873, 0.04006965830922127, -0.018364213407039642, 0.009640583768486977, -0.024192526936531067, 0.02394130639731884, 0.041501615196466446, -0.01908019185066223, -0.002705330029129982, 0.011449371464550495, 0.027483515441417694, 0.003893916727975011, -0.018376775085926056, -0.050671160221099854, -0.01926860772073269, 0.009690827690064907, 0.01930629089474678, -0.0017240002052858472, 0.007926004938781261, -0.017711039632558823, 0.01573896035552025, 0.02806132286787033, 0.007053013425320387, 0.005687002558261156, 0.0018684519454836845, -0.03567330166697502, -0.0230871569365263, -0.01845214143395424, -0.051851898431777954, -0.035095494240522385, -0.012184190563857555, -0.009207229129970074, -0.004204801749438047, 0.014131149277091026, -0.02861400693655014, -0.024933626875281334, -0.025662166997790337, 0.016894573345780373, 0.008541494607925415, 0.020373977720737457, 0.0007701476570218801, 0.004220503382384777, -0.023212768137454987, -0.0037683064583688974, -0.026177169755101204, -0.019067630171775818, -0.0021102516911923885, 0.02571241185069084, -0.028111565858125687, 0.006858317647129297, 0.021793372929096222, 0.004493705462664366, 0.05137457698583603, 0.024418625980615616, 0.02873961813747883, -0.015952497720718384, -0.01871592178940773, 0.055670447647571564, 0.014897371642291546, -0.030422793701291084, 0.017170917242765427, 0.010168147273361683, 0.002626823727041483, 0.02263496071100235, 0.029292302206158638, -0.041727714240550995, -0.003476262791082263, -0.03670330345630646, 0.001030788873322308, 0.007436124607920647, 0.02404179610311985, 0.008641982451081276, -0.02057495340704918, -0.01620371825993061, -0.04936481639742851, 0.0033694941084831953, 0.00737331947311759, 0.011003455147147179, -0.05607239902019501, 0.028664251789450645, -0.0003715314669534564, 0.01949470490217209, -0.00104099465534091, -0.034969884902238846, 0.014671273529529572, -0.06009192764759064, -0.0033537927083671093, 0.0006849681958556175, -0.01027491595596075, -0.019029946997761726, -0.033236462622880936, -0.03270890191197395, -0.03481915220618248, 0.0008462988189421594, -0.01649262197315693, 0.012831083498895168, -0.02136629819869995, 0.024380942806601524, 0.022647522389888763, 0.06300608068704605, 0.03069913573563099, -0.010601501911878586, 0.03208084776997566, 0.03177938610315323, 0.0023724630009382963, 0.005881698336452246, -0.0014955466613173485, -0.008679665625095367, -0.03582403436303139, -0.0011289218673482537, 0.02700619585812092, 0.051098234951496124, 0.010953211225569248, -0.026152046397328377, 0.002722601406276226, -0.0027854065410792828, -0.002166776219382882, 0.014131149277091026, -0.008993691764771938, 0.023501671850681305, 0.033135976642370224, -0.002695909235626459, -0.0234514269977808, -0.004848554264754057, -0.006569414399564266, 0.010815039277076721, -0.02230837382376194, -0.014457736164331436, 0.007027891464531422, 0.013955295085906982, -0.0027948273345828056, 0.007819236256182194, 0.019029946997761726, -0.02208227664232254, 0.029895231127738953, 0.005385538097470999, -0.0027775559574365616, -0.007272831629961729, -0.02031117118895054, 0.015852009877562523, 0.0043932171538472176, -0.007140940520912409, -0.01740957610309124, 0.009496131911873817, 0.003312969347462058, -0.011681750416755676, -0.05245482549071312, -0.004195381421595812, 0.03622598573565483, 0.020160440355539322, 0.023690085858106613, 0.015537983737885952, -0.03240743651986122, -0.020210683345794678, -0.036828916519880295, -0.002697479445487261, 0.032256703823804855, 0.011355163529515266, -0.0019548090640455484, -0.04491821303963661, 0.012831083498895168, 0.01458334643393755, 0.02463216334581375, -0.01134888269007206, -0.018627995625138283, 0.011832482181489468, -0.032131094485521317, -0.0007367824437096715, 0.0459984615445137, -0.01254217978566885, 0.010614063590765, 0.035296469926834106, -0.0019516687607392669, 0.015148592181503773, 0.0234514269977808, -0.007216306868940592, -0.02600131370127201, 0.023263011127710342, 0.017283964902162552, 0.00023865941329859197, -0.01100973505526781, 0.020185561850667, 0.030749380588531494, -0.03037255071103573, -0.023526793345808983, -0.013427731581032276, 0.012548460625112057, -0.024569358676671982, 0.005002426914870739, -0.013239316642284393, -0.021341174840927124, -0.006120357662439346, 0.025599362328648567, 0.04991750046610832, 0.01604042388498783, 0.007819236256182194, 0.002411716151982546, -0.017108110710978508, 0.015035542659461498, 0.019394217059016228, 0.007291673216968775, -0.05607239902019501, 0.02273544855415821, -0.018477262929081917, 0.029015960171818733, -0.03341231867671013, -0.0015457906993106008, -0.00047221590648405254, 0.025486312806606293, -0.016907135024666786, 0.009263752959668636, 0.008126980625092983, 0.0015190985286608338, 0.031704019755125046, -0.032482802867889404, -0.034417200833559036, 0.0029298581648617983, -0.016253961250185966, -0.02103971131145954, -0.007712467107921839, 0.010607782751321793, -0.031201576814055443, 0.0007418853347189724, 0.00819606613367796, 0.019670559093356133, 0.01920580118894577, -0.04504382237792015, 0.009671987034380436, -0.005947643890976906, -0.0013306832406669855, 0.014407491311430931, 0.012278398498892784, -0.0032313228584825993, -0.00189200381282717, 0.012937852181494236, 0.010425647720694542, 0.005407519638538361, -0.020173000171780586, -0.015387251041829586, -0.012278398498892784, 0.015952497720718384, -0.00033757745404727757, -0.02806132286787033, -0.0069588059559464455, -0.013515659607946873, -0.020110195502638817, -0.00598532659932971, -0.012667790055274963, 0.012761997990310192, 0.0469028539955616, -0.009025094099342823, 0.008321676403284073, -0.005982186645269394, -0.017283964902162552, -0.022358618676662445, 0.024129722267389297, -0.03635159507393837, -0.024569358676671982, -0.015475178137421608, 0.020562391728162766, 0.022873619571328163, -0.015035542659461498, 0.0006971366819925606, 0.032809387892484665, 0.016605669632554054, 0.004462303128093481, -0.003199920291081071, 0.0057812100276350975, -0.05491678789258003, 0.0228610597550869, -0.039868682622909546, 0.05617288872599602, 0.0008502241689711809, 0.01316395029425621, -0.014080905355513096, -0.004927060566842556, -0.017497502267360687, 0.04768163710832596, -0.003790288232266903, 0.0038813557475805283, -0.02014787867665291, 0.013842245563864708, -0.003991264384239912, -0.014043222181499004, -0.007699906360358, -0.013779440894722939, -0.008773873560130596, -0.008246310986578465, 0.003991264384239912, -0.0024054355453699827, 0.03569842502474785, -0.001681606750935316, -0.0020270347595214844, -0.009207229129970074, 0.009251192212104797, -0.03723086789250374, -0.01190784852951765, -0.005837734788656235, 0.058785580098629, -0.04431528225541115, -0.010852722451090813, -0.003966142423450947, -0.006274230312556028, 0.011706871911883354, 0.01835165172815323, 0.020097633823752403, -0.005633618216961622, 0.02328813448548317, -0.03778355196118355, 0.008441006764769554, 0.006638499908149242, -0.015663594007492065, -0.021215565502643585, 0.03419110178947449, -0.004741785582154989, 0.024933626875281334, 0.01747238077223301, 0.014294442720711231, -0.0635085254907608, -0.003652116982266307, -0.002038025762885809, 0.05426361411809921, -0.034417200833559036, 0.004905079025775194, -0.0048454138450324535, 0.04484284669160843, 0.013038340024650097, -0.024808017536997795, 0.010243512690067291, 0.02730766125023365, -0.015412373468279839, -0.01848982460796833, -0.016442377120256424, -0.03014645166695118, 0.013578464277088642, -0.029191814363002777, 0.01306346245110035, 0.01663079299032688, 0.0030570386443287134, -0.022785693407058716, 0.023463988676667213, -0.004848554264754057, -0.003941020462661982, -0.011273517273366451, -0.010067658498883247, 0.014093466103076935, 0.028362786397337914, 0.0010268634650856256, -0.027508636936545372, 0.03924063220620155, -0.0018449000781401992, 0.014407491311430931, 0.0008517942624166608, 0.0138799287378788, -0.045747239142656326, 0.017685918137431145, 0.01128607802093029, 0.002097690710797906, -0.0018072170205414295, -0.03037255071103573, -0.00958405900746584, 0.01166290882974863, 0.0041482774540781975, 0.02012275718152523, 0.003520226338878274, -0.014281881041824818, 0.018025066703557968, -0.04778212681412697, 0.01223443541675806, 0.003799709025770426, 0.03230694681406021, 0.014181393198668957, 0.016643352806568146, -0.02289874292910099, 0.033688660711050034, 0.014168832451105118, 0.01946958340704441, -0.012460533529520035, -0.03351280465722084, 0.004069771151989698, -0.009879243560135365, -0.02469496801495552, -0.01581432670354843, -0.007706186734139919, -0.0030209256801754236, 0.018301408737897873, 0.01737189292907715, 0.027357904240489006, 0.024996433407068253, 0.005018128082156181, 0.006038710940629244, 0.008101859129965305, -0.024192526936531067, -0.005906820297241211, 0.03424134477972984, 0.06913585960865021, -0.024066917598247528, -0.03469354286789894, -0.002947129774838686, 0.008981130085885525, -0.013377487659454346, 0.021290931850671768, 0.0024509693030267954, -0.01041936781257391, 0.043260157108306885, 0.04828456789255142, 0.01626652292907238, -0.062302667647600174, 0.01425675954669714, 0.01134888269007206, -0.00048085159505717456, 0.016567988321185112, -0.01985897496342659, 0.013364926911890507, 0.07044220715761185, 0.007768991868942976, 0.007417283020913601, -0.0013471695128828287, 0.02861400693655014, 0.019683120772242546, 0.016768964007496834, 0.0012011476792395115, -0.03579891100525856, 0.0261269249022007, 0.0027037598192691803, -0.01636701077222824, -0.017459819093346596, 0.010400526225566864, 0.009182106703519821, 0.04034600034356117, 0.03245767951011658, 0.04308430477976799, 0.0021746268030256033, 0.02063775807619095, 0.02622741274535656, -0.0033066889736801386, 0.000327567890053615, -0.01185760460793972, 0.009200948290526867, -0.024707529693841934, -0.0003214836469851434, 0.0138799287378788, 0.014859688468277454, 0.033135976642370224, 0.03122670017182827, 0.008610580116510391, 0.004308430477976799, -0.013892489485442638, -0.016052985563874245, -0.019356533885002136, -0.0004847769159823656, 0.031075967475771904, -0.026051558554172516, -0.013377487659454346, -0.037582576274871826, -0.016580548137426376, -0.02155471220612526, -0.04243113100528717, 0.005887978710234165, 0.026704732328653336, -0.020361416041851044, 0.002697479445487261, -0.007693625520914793, 0.0016863171476870775, 0.037582576274871826, -0.017585430294275284, -0.022132519632577896, 0.018138114362955093, -0.013641268946230412, 0.007379600312560797, -0.009138143621385098, 0.036301352083683014, -0.013364926911890507, -0.0037745870649814606, -0.013666391372680664, -0.058031920343637466, 0.004945902153849602, -0.0039849840104579926, -0.05059579387307167, 0.013025779277086258, -0.025134604424238205, 0.03587427735328674, -0.0038530933670699596, -0.010670587420463562, 0.01430700346827507, -0.0068834396079182625, -0.0293927900493145, 0.0074424054473638535]
metadata : {"source": "pydantic_ai_docs", "crawled_at": "2025-03-16T00:34:54.860087", "url_path": "/dependencies/", "chunk_size": 1374}
updated_dt: 2025-03-16T00:34:54.861597
---
```
fromjoke_appimport MyDeps, application_code, joke_agent

classTestMyDeps(MyDeps): 
Define a subclass of MyDeps in tests to customise the system prompt factory.
[](https://ai.pydantic.dev/dependencies/#__code_5_annotation_1)
  async defsystem_prompt_factory(self) -> str:
    return 'test prompt'

async deftest_application_code():
  test_deps = TestMyDeps('test_key', None) 
Create an instance of the test dependency, we don't need to pass an http_client here as it's not used.
[](https://ai.pydantic.dev/dependencies/#__code_5_annotation_2)
  with joke_agent.override(deps=test_deps): 
Override the dependencies of the agent for the duration of the with block, test_deps will be used when the agent is run.
[](https://ai.pydantic.dev/dependencies/#__code_5_annotation_3)
    joke = await application_code('Tell me a joke.') 
Now we can safely call our application code, the agent will use the overridden dependencies.
[](https://ai.pydantic.dev/dependencies/#__code_5_annotation_4)
  assert joke.startswith('Did you hear about the toothpaste scandal?')

```

## Examples
The following examples demonstrate how to use dependencies in PydanticAI:
  * [Weather Agent](https://ai.pydantic.dev/examples/weather-agent/)
  * [SQL Generation](https://ai.pydantic.dev/examples/sql-gen/)
  * [RAG](https://ai.pydantic.dev/examples/rag/)


Â© Pydantic Services Inc. 2024 to present