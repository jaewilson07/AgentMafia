---
url: https://ai.pydantic.dev/dependencies/
session_id: pydantic_ai_docs
chunk_number: 2
title: Using Dependencies in Pydantic Agents
summary: This document chunk demonstrates how to define dependencies for a Pydantic agent using a dataclass. It shows the setup of an async HTTP client and the use of a `RunContext` to access these dependencies within a system prompt function, highlighting type safety through static type checkers.
embedding: [-0.0469428151845932, 0.03181514889001846, 0.027110962197184563, -0.007155313156545162, 0.022864816710352898, 0.03122093342244625, 0.005440761335194111, 0.029066912829875946, 0.002318049082532525, -0.004174964502453804, 0.012490849941968918, -0.015201945789158344, 0.016588442027568817, -0.056747328490018845, -0.03154280036687851, -0.049740567803382874, -0.044912587851285934, 0.02244391478598118, 0.00980451237410307, 0.07165216654539108, 0.04246146231889725, 0.02733379229903221, 0.021713528782129288, 0.020252754911780357, -0.010652503930032253, -0.016786513850092888, -0.01771497167646885, 0.05283542722463608, 0.041545383632183075, 0.007093416061252356, 0.02032703161239624, -0.026145366951823235, -0.019868992269039154, 0.022196326404809952, 0.028868841007351875, 0.005221026483923197, 0.009953065775334835, 0.006938673090189695, -0.0037107355892658234, 0.01739310659468174, 0.012503229081630707, -0.06873062252998352, 0.01895291544497013, -0.02557591162621975, -0.06120392680168152, 0.013580240309238434, -0.018891017884016037, 0.0011868783039972186, 0.05293446406722069, -0.0007354157860390842, -0.07873320579528809, 0.010596795938909054, 0.013171718455851078, 0.022295361384749413, -0.03196369856595993, -0.0069634318351745605, -0.012398003600537777, 0.03208749368786812, -0.034736692905426025, -0.0670965388417244, 0.029215466231107712, -0.013654516078531742, -0.023100025951862335, 0.026987167075276375, -0.026665301993489265, 0.007118174806237221, 0.009631199762225151, -0.006542531307786703, -0.06254090368747711, 0.038524799048900604, 0.0272347554564476, 0.03847528249025345, -0.060411639511585236, -0.015573329292237759, -0.02043844759464264, -0.03186466544866562, 0.020413687452673912, 0.0657595545053482, 0.045729633420705795, -0.04139683023095131, 0.0017547848401591182, 0.011642858386039734, -0.04535824805498123, -0.002950947731733322, -0.016786513850092888, -0.034216757863759995, -0.07546503096818924, 0.009315524250268936, 0.011698565445840359, -0.018420599400997162, -0.02043844759464264, 0.017640694975852966, -0.041768211871385574, 0.04337754100561142, 0.03540518507361412, 0.042486220598220825, -0.00754526536911726, -0.020884105935692787, -0.04053026810288429, 0.009816891513764858, 0.04632384330034256, -0.014892459847033024, -0.08789398521184921, -0.0038902373053133488, 0.022778159007430077, 0.018569152802228928, 0.011754273436963558, -0.011110542342066765, -0.0331026092171669, 0.007941407151520252, -0.05333060398697853, 0.001638727611862123, 0.02064889669418335, 0.026318678632378578, -0.028646012768149376, 0.0033145935740321875, -0.006214476190507412, -0.057787202298641205, 0.006957242265343666, -0.029314501211047173, -0.028126075863838196, 0.02911643125116825, 0.010856764391064644, 0.0034910005051642656, 0.020574619993567467, 0.028992636129260063, -0.009340283460915089, -0.031171416863799095, -0.03518235310912132, -0.002947852946817875, 0.05451903119683266, -0.017207413911819458, 0.0025640903040766716, 0.005338631104677916, -0.03134473040699959, 0.019225262105464935, -0.05531131476163864, -0.014706768095493317, -0.026789097115397453, 0.051696520298719406, 0.03622222691774368, -0.02137928456068039, -0.005750247277319431, 0.033176884055137634, -0.019621403887867928, 0.052884943783283234, -0.0335482694208622, 0.02105741761624813, -0.060411639511585236, 0.015858056023716927, 0.001985351787880063, 0.027903245761990547, -0.044689759612083435, 0.017108378931879997, -0.0038840477354824543, 0.009092695079743862, 0.01440966222435236, 0.031097140163183212, 0.03835148736834526, -0.02097076177597046, -0.015684744343161583, 0.011228146962821484, -0.01989375241100788, -0.02306288667023182, -0.04357561096549034, -0.047735098749399185, 0.0005624905461445451, -0.007557644974440336, -0.02745758555829525, -0.022072531282901764, -0.016922688111662865, 0.0009338735835626721, -0.02807655744254589, 0.025501634925603867, 0.06065922975540161, -0.029314501211047173, -0.038401007652282715, -0.01200805138796568, -0.04010936990380287, -0.062392350286245346, 0.008461344055831432, -0.018903397023677826, -0.006907724775373936, 0.009538354352116585, -0.056202635169029236, -0.022778159007430077, -0.016068506985902786, 0.04191676527261734, 0.014063037931919098, 0.06481871753931046, 0.0347614511847496, 0.036841198801994324, 0.03424151614308357, 0.012961268424987793, -0.013988761231303215, 0.0008054369827732444, 0.04780937731266022, 0.0004704185121227056, 0.0352071113884449, -0.010398725047707558, 0.014038278721272945, 0.040926411747932434, 0.010417294688522816, -0.014830563217401505, 0.03614794835448265, -0.054964691400527954, -0.027853727340698242, -0.0186558086425066, -0.048453107476234436, 0.0101016191765666, 0.025006458163261414, -0.05630166828632355, 0.007656680420041084, 0.04548204317688942, -0.05273639038205147, -0.023025749251246452, -0.02589777670800686, 0.04035695642232895, 0.024498900398612022, 0.04345181584358215, 0.026888132095336914, 0.032236047089099884, 0.04147110506892204, -0.042486220598220825, -0.02439986541867256, 0.02001754567027092, -0.029710642993450165, -0.027110962197184563, -0.016377992928028107, 0.031270451843738556, 0.056846365332603455, -0.03669264540076256, -0.00018162951164413244, -0.004982722457498312, 0.01111673191189766, -0.0302800964564085, 0.04134731367230415, 0.00641873711720109, -0.003305308986455202, -0.002859649481251836, -0.014050658792257309, -0.02222108468413353, -0.023000989109277725, 0.02043844759464264, 0.03367206081748009, 0.03050292655825615, -0.01667509786784649, -0.049393944442272186, 0.025105493143200874, 0.011587151326239109, 0.005939033813774586, -0.025204529985785484, 0.015461914241313934, -0.013481204397976398, -0.0469428151845932, -0.0760592445731163, -0.013691654428839684, -0.026665301993489265, -0.03743540868163109, 0.04466500133275986, -0.022580089047551155, 0.03760872408747673, -0.013926863670349121, 0.034637659788131714, -0.00032747472869232297, -0.021849703043699265, 0.00484964344650507, -0.011191008612513542, 0.003274360438808799, -0.030775275081396103, 0.02829938754439354, 0.010343017987906933, 0.04766082391142845, -0.03409296274185181, -0.03921804949641228, -0.018383460119366646, -0.011432408355176449, 0.011265285313129425, -0.036841198801994324, -0.003989272750914097, -0.03582608327269554, 0.017467383295297623, -0.0024635074660182, 0.05050809308886528, -0.035256631672382355, 0.023112405091524124, -0.0029788014944642782, 0.013988761231303215, -0.009383611381053925, 0.03827721253037453, -0.0057935756631195545, 0.03018106147646904, -0.003475526347756386, -0.03342447429895401, 0.03750968724489212, -0.037881068885326385, 0.006220665760338306, 0.033176884055137634, -0.0026956219226121902, -0.006072112824767828, 0.000732707791030407, 0.014533456414937973, -0.005929748993366957, -0.0014336933381855488, -0.007074846886098385, 0.023842791095376015, -0.0025099304039031267, 0.00047467395779676735, 0.028447940945625305, -0.01036777626723051, -0.019868992269039154, 0.04723992198705673, 0.0030267718248069286, 0.041446346789598465, -0.014669629745185375, -0.016514165326952934, 0.050136711448431015, -0.044070787727832794, 0.04654667526483536, -0.03250839561223984, -0.03738589212298393, -0.0035869411658495665, 0.05417240783572197, -0.006059733219444752, -0.004951773677021265, -0.019980408251285553, -0.009420749731361866, -0.003019034629687667, -0.03339971601963043, 0.0429566390812397, -0.0276804156601429, -0.02524166740477085, 0.014471558853983879, 0.07021615654230118, 0.05793575569987297, -0.010572037659585476, -0.02681385539472103, 0.017207413911819458, 0.030725756660103798, 0.06655184179544449, -0.053033497184515, -0.003998557571321726, -0.024907423183321953, -0.017269311472773552, 0.03884666785597801, 0.02494456060230732, 0.013047924265265465, 0.03198846057057381, -0.015573329292237759, 0.03698975220322609, -0.003871668130159378, 0.008647034876048565, -0.0007725540781393647, 0.025600671768188477, -0.04035695642232895, -0.03092382848262787, -0.0431794673204422, -0.012812715023756027, -0.010646313428878784, 0.014966736547648907, -0.06214476376771927, 0.024127518758177757, -0.033473990857601166, -0.022369638085365295, -0.012243260629475117, 0.013394548557698727, -0.0028550070710480213, -0.024276072159409523, -0.0004858928150497377, 0.03646981343626976, 0.057985272258520126, 0.050656646490097046, -0.03810390084981918, -0.034513864666223526, 0.014682009816169739, -0.026318678632378578, -0.040703579783439636, 0.018494876101613045, 0.039143770933151245, 0.024127518758177757, 0.018061595037579536, -0.001234848634339869, -0.010157326236367226, 0.0003980761975981295, 0.03560325503349304, 0.03186466544866562, -0.016897927969694138, -0.013283133506774902, -0.0007640432449989021, 0.018197769299149513, 0.06932483613491058, -0.08036728948354721, -0.023558063432574272, 0.009915927425026894, -0.01476866565644741, -0.010906281881034374, -0.005431476980447769, 0.008727501146495342, 0.034736692905426025, 0.009395990520715714, 0.03193894028663635, 0.01843297854065895, -0.031295210123062134, 0.014483938924968243, -0.02066127583384514, 0.011085784062743187, 0.04535824805498123, -0.014954357407987118, 0.02338475175201893, -0.005985456518828869, 0.06303608417510986, -0.019621403887867928, 0.006211381405591965, -0.019324297085404396, -0.022604847326874733, -0.03461289778351784, -0.022481054067611694, -0.015647605061531067, 0.044169824570417404, 0.06486824154853821, -0.014694388955831528, -0.0821499302983284, -0.019930889829993248, -0.00890081375837326, -0.011661427095532417, 0.046992335468530655, 0.03555373474955559, -0.055707454681396484, 0.013926863670349121, 0.0047258492559194565, -0.01377831120043993, -0.003302214201539755, 0.021527836099267006, 0.03367206081748009, 0.005075568333268166, -0.011717135086655617, 0.007142934016883373, 0.030428649857640266, 0.00848610233515501, -0.01719503477215767, 0.016736995428800583, -0.017058860510587692, 0.0006580443005077541, 0.06189717352390289, -0.05719298869371414, -0.001358642941340804, -0.028447940945625305, -0.037782035768032074, 0.029215466231107712, 0.0036178897134959698, 0.019522368907928467, -0.004905350971966982, -0.03842576593160629, 0.014273487962782383, -0.0318894237279892, 0.004633003380149603, 0.031196175143122673, 0.011407649144530296, 0.057589128613471985, 0.009705476462841034, 0.03238460049033165, -0.012168983928859234, -0.015647605061531067, 0.03832672908902168, -0.009884978644549847, 0.04560583829879761, 0.04095117002725601, 0.02002992480993271, -0.0011156965047121048, 0.027507103979587555, 0.01591995358467102, 0.002331976080313325, -0.0036890716291964054, 0.007755715865641832, -0.0173807255923748, -0.01572188176214695, 0.024263691157102585, 0.053083017468452454, 0.004153300542384386, 0.019200503826141357, 0.035355664789676666, 0.0002820189984049648, 0.011067214421927929, 0.019423333927989006, -0.012125656008720398, 0.02462269552052021, -0.037782035768032074, -0.033053088933229446, -0.039143770933151245, -0.007631921675056219, 0.0027652562130242586, 0.013394548557698727, 0.05645022168755531, -0.012651782482862473, 0.03456338122487068, 0.0093279043212533, 0.006746791768819094, 0.0063197012059390545, -0.022778159007430077, -0.030255338177084923, 0.021849703043699265, 0.00479084113612771, -0.027705173939466476, 0.046893298625946045, 0.042164355516433716, -0.026491990312933922, 0.05238976702094078, -0.003107238095253706, -0.00398617796599865, 0.03255791217088699, -0.03448910638689995, -0.00024178583407774568, 0.00419043842703104, 0.0265167485922575, -0.010305879637598991, 0.023409511893987656, -0.022493433207273483, -0.006517772562801838, 0.0058152396231889725, 0.0007102700765244663, 0.015474293380975723, -0.02484552562236786, -0.015325739979743958, -0.00481869513168931, -0.0055119432508945465, -0.006932483520358801, 0.00843658484518528, -0.03176562860608101, 0.015895193442702293, 0.021032659336924553, -0.002692527137696743, 0.0010321353329345584, 0.020265134051442146, 0.016291335225105286, -0.028472699224948883, 0.03877238929271698, 0.008944141678512096, -0.0018708420684561133, -0.03255791217088699, -0.009259817190468311, -0.0026167030446231365, 0.01377831120043993, -0.03050292655825615, -0.00024159241002053022, -0.02943829633295536, 0.02157735452055931, 0.03981226310133934, 0.0014097081730142236, -0.007248159032315016, -0.0007787438225932419, 0.05744057521224022, 0.0029648744966834784, 0.004168774466961622, -0.013716413639485836, 0.04607625678181648, 0.013171718455851078, 0.00235673482529819, -0.01471914816647768, 0.028646012768149376, -0.006400167942047119, 0.025402599945664406, -0.01136432122439146, 0.02106979861855507, 0.015239084139466286, -0.001398102380335331, 0.03679167851805687, 0.021837322041392326, -0.0016928877448663116, -0.03198846057057381, 0.004738228861242533, 0.01708362065255642, 0.0069634318351745605, -0.043649885803461075, 0.0017222889000549912, 0.02484552562236786, -0.004784651566296816, -0.02473410964012146, -0.018259666860103607, -0.038623835891485214, -0.03228556737303734, 0.015276222489774227, -0.03387013450264931, 0.04775986075401306, 0.024907423183321953, -0.00864084530621767, 0.008479912765324116, 0.010460622608661652, 0.0020549860782921314, -0.0169969629496336, -0.002664673374965787, -0.004506114404648542, -0.0016619390808045864, 0.012113276869058609, -0.005861662328243256, -0.03218653053045273, 0.011389079503715038, -0.004369940608739853, 0.011234336532652378, -0.05209266021847725, 0.035801324993371964, 0.009445508942008018, -0.03401868790388107, -0.006740602198988199, -0.008195186033844948, 0.004648477770388126, -0.006938673090189695, 0.017108378931879997, 0.00043366706813685596, -0.011240527033805847, 0.004660857375711203, -0.023335235193371773, -0.011525253765285015, 0.00261825043708086, -0.03186466544866562, -0.04620005190372467, 0.0025780173018574715, -0.03973798453807831, 0.04456596449017525, 0.04704185202717781, -0.011382889933884144, 0.018581531941890717, -0.007935217581689358, 0.014310626313090324, 0.01440966222435236, 0.021106936037540436, -0.0174921415746212, -0.01991851069033146, -0.01471914816647768, -0.009965444914996624, 0.029512573033571243, -0.01897767372429371, 0.025427358224987984, 0.016514165326952934, -0.0024155371356755495, -0.019646162167191505, 0.003961419221013784, -0.001875484362244606, -0.020289894193410873, -0.0067529818043112755, -0.047190405428409576, 0.011537632904946804, 0.025625430047512054, 0.0013880440965294838, -0.007260538637638092, 0.01230515819042921, 0.04498686641454697, -0.0112095782533288, 0.003942850045859814, 0.0628875270485878, -0.025278804823756218, 0.006381598766893148, -0.022567709907889366, 0.011939965188503265, -0.018272045999765396, 0.012534177862107754, -0.0012402646243572235, -0.03112189844250679, -0.012862232513725758, -0.04587818682193756, 0.004490640014410019, -0.03255791217088699, -0.020611759275197983, 0.01979471556842327, -0.00811471976339817, -0.018618669360876083, 0.03240935876965523, 0.03906949609518051, 0.02745758555829525, 0.03312736749649048, 0.007929028011858463, -0.017677832394838333, -0.0003882113378494978, 0.039886537939310074, 0.017628315836191177, 0.013976382091641426, -0.0265167485922575, 0.0087460707873106, -0.027705173939466476, -0.037262097001075745, 0.01709599979221821, -0.018631048500537872, -0.02295147255063057, -0.03387013450264931, 0.02607109025120735, 0.06788881868124008, -0.032632190734148026, 0.0106277447193861, 0.03835148736834526, -0.0006019499851390719, 0.04823027923703194, -0.0055212280713021755, -0.012014240957796574, 0.013431686908006668, 0.013803069479763508, 0.021045038476586342, -0.014347764663398266, 0.002997370669618249, 0.016687478870153427, -0.013307892717421055, -0.0012302063405513763, -0.015486672520637512, 0.005824523977935314, 0.022604847326874733, 0.027952764183282852, -0.028002280741930008, -0.038401007652282715, -0.011853308416903019, 0.03092382848262787, 0.029908714815974236, -0.02129262685775757, -0.021218350157141685, 0.02314954251050949, -0.02066127583384514, 0.009600251913070679, -0.01751689985394478, -0.030676240101456642, 0.013765931129455566, -0.01991851069033146, 0.018717704340815544, -0.03228556737303734, -0.008213754743337631, 0.022060152143239975, -0.013010785914957523, -0.015177186578512192, -0.007532886229455471, -0.04412030428647995, -0.006969621870666742, 0.02442462556064129, -0.007173882331699133, 0.03857431933283806, -0.009953065775334835, -0.02525404654443264, -0.04575439170002937, -0.02400372363626957, -0.008616086095571518, -0.02002992480993271, -0.0572425052523613, 0.03176562860608101, -0.004685616120696068, -0.01320885680615902, 0.006548720877617598, -0.02567494846880436, -0.014558215625584126, 0.0012464543106034398, 0.01698458380997181, -0.000796152395196259, 0.01634085364639759, 0.034835729748010635, -0.021032659336924553, 0.029512573033571243, -0.06214476376771927, 0.009123642928898335, 0.0042801895178854465, 0.0055428920313715935, 0.023855170235037804, -0.0073905223980546, 0.016105644404888153, -0.0020936718210577965, -0.031047621741890907, 0.011215767823159695, -0.01216279435902834, 0.0012874612584710121, -0.024647453799843788, 0.03099810518324375, -0.011042456142604351, -0.012800335884094238, 0.009990204125642776, -0.03939136117696762, 0.0017130043124780059, 0.027531862258911133, 0.0012201480567455292, -0.03627174347639084, 0.0163284745067358, -0.0007404449279420078, 0.03404344618320465, -0.024127518758177757, -0.004014031495898962, -0.008820347487926483, 0.0020781976636499166, -0.022926712408661842, 0.008120909333229065, 0.030205819755792618, -0.01739310659468174, 0.01242276281118393, 0.031245693564414978, -0.010689642280340195, -0.01199567224830389, -0.023199060931801796, -0.022679124027490616, -0.034439586102962494, -0.061451513320207596, -0.031369488686323166, -0.019027190282940865, 0.007037708535790443, 0.02775469236075878, 0.005186982918530703, 0.0022700787521898746, -0.10111521929502487, -0.044070787727832794, 0.020166099071502686, -0.01601898856461048, 0.005103421863168478, 0.007421471178531647, 0.03290453925728798, 0.040901653468608856, -0.004580390639603138, -0.0006104608764871955, 0.01408779714256525, -0.009785942733287811, -0.012571316212415695, -0.007248159032315016, 0.0265167485922575, 0.009111263789236546, 0.04315470904111862, -0.012552746571600437, 0.061154406517744064, -0.020463205873966217, -0.02862125262618065, -0.005849282722920179, -0.05134989693760872, 0.022914333269000053, 0.02222108468413353, -0.01377831120043993, -0.007118174806237221, 0.040084607899188995, 0.004942489322274923, 0.002353640040382743, -0.022183947265148163, -0.02262960746884346, -0.005316967144608498, 0.01000877283513546, -0.02995823137462139, 0.05986694619059563, 0.007755715865641832, 0.03300357237458229, 0.03270646557211876, -0.013357410207390785, 0.029165947809815407, -0.01079486683011055, 0.0069943806156516075, -0.022914333269000053, 0.040703579783439636, 0.007272917777299881, -0.006062828004360199, 0.020896485075354576, -0.011989482678472996, -0.0016402751207351685, 0.020611759275197983, 0.002607418457046151, -0.004521588329225779, 0.00994687620550394, 0.03528138995170593, 0.013505963608622551, -0.027606138959527016, 0.015313360840082169, 0.0008448964217677712, 0.028893601149320602, 0.006523962132632732, -0.019559506326913834, 0.02505597658455372, 0.0016464648069813848, -0.006821068469434977, 0.016576062887907028, 0.006223761010915041, -0.00037563848309218884, 0.0015489767538383603, 0.005323156714439392, -0.02827462926506996, 0.015845676884055138, 0.030255338177084923, -0.005626453086733818, 0.002692527137696743, 0.027383308857679367, 0.00859132781624794, 0.008560379035770893, -0.010869143530726433, 0.017875904217362404, 0.05194410681724548, -0.04790841415524483, 0.03250839561223984, 0.05362771078944206, -0.040827374905347824, 0.002152474131435156, -0.007718577515333891, -0.009909737855196, -0.026789097115397453, 0.04545728489756584, 0.003961419221013784, 0.0011017697397619486, 0.00020348695397842675, 0.02303812839090824, -0.0318894237279892, -0.0034260086249560118, -0.03080003336071968, 0.00725434860214591, 0.010986748151481152, 0.0027652562130242586, 0.01414969377219677, 0.012181363999843597, -0.013060303404927254, 0.007353384047746658, -0.00574096292257309, 0.05229073390364647, -0.03255791217088699, 0.0009609535918571055, -0.021973496302962303, -0.00709960563108325, -0.002551710931584239, -0.01645226962864399, -0.0335482694208622, 0.03906949609518051, -0.009860219433903694, 0.016006609424948692, 0.049517739564180374, -0.02482076734304428, -0.032533153891563416, 0.017120758071541786, -0.00765049085021019, 0.0656605213880539, -0.016179921105504036, 0.016477027907967567, -0.02000516653060913, 0.01016351580619812, -0.035578496754169464, -0.03080003336071968, -0.03884666785597801, -0.012515608221292496, 0.028324145823717117, 0.012391814030706882, -0.030106784775853157, 0.02001754567027092, -0.013691654428839684, -0.005923559423536062, 0.01876722276210785, -0.02303812839090824, -0.007180071901530027, -0.019633783027529716, 0.011562392115592957, -0.022889574989676476, 0.0010344565380364656, -0.0318894237279892, -0.008219944313168526, 0.019113847985863686, 0.03060196340084076, 0.018148250877857208, -0.03248363733291626, 0.02998299151659012, 0.0010692736832424998, -0.0073967124335467815, -0.022864816710352898, 0.04043123498558998, 0.019410952925682068, 0.04976532608270645, -0.007730957120656967, -0.059371769428253174, 0.013815449550747871, -0.01601898856461048, -0.03196369856595993, 0.03481097146868706, 0.009278385899960995, -0.017009343951940536, 0.0295620895922184, -0.013369789347052574, -0.010596795938909054, 0.004759892821311951, -0.018482495099306107, -0.03721258044242859, 0.0013315629912540317, 0.005480994936078787, 0.0006290300516411662, -0.00838706735521555, 0.042288150638341904, 0.04790841415524483, 0.02410275861620903, -0.029512573033571243, 0.0014166715554893017, 0.04132255166769028, 0.01866818778216839, 0.03738589212298393, 0.013023165054619312, -0.00896271038800478, 0.02966112643480301, -0.010565847158432007, 0.0197080597281456, 0.041966281831264496, -0.0027404974680393934, -0.013580240309238434, 0.037262097001075745, 0.02033941075205803, -0.001864652382209897, 0.017888283357024193, -0.00828184187412262, 0.04842834919691086, 0.030428649857640266, -0.03733637556433678, 0.014570594765245914, -0.006827258039265871, 0.005332441534847021, 0.02212204970419407, -0.004441122058779001, -0.026442471891641617, 0.014582973904907703, 0.06605666130781174, -0.013741172850131989, -0.0018832215573638678, 0.003976893611252308, 0.01989375241100788, -0.04015888646245003, -0.0015559402527287602, 0.009990204125642776, 0.016006609424948692, -0.02609584853053093, -0.0011481925612315536, -0.037757277488708496, -0.021527836099267006, -0.023025749251246452, -0.021428801119327545, -0.019361436367034912, -0.02985919639468193, 0.004608244635164738, 0.023409511893987656, -0.007334814872592688, 0.00035010589635930955, 0.01590757444500923, -0.005552176386117935, 0.03770775720477104, 0.003255791263654828, 0.0014406567206606269, 0.02545211836695671, -0.003330067964270711, 0.011704755946993828, 0.005186982918530703, -0.036519333720207214, -0.0034879057202488184, 0.014904838986694813, 0.007774285040795803, 0.0001324986369581893, 0.013357410207390785, -0.009154591709375381, -0.0167741347104311, -0.017541658133268356, 0.02129262685775757, 0.023644721135497093, 0.01356786023825407, 0.03179038688540459, 0.016811272129416466, -0.002799299778416753, -0.0017408579587936401, 0.007898079231381416, 0.023310475051403046, -0.011296234093606472, 0.03530614823102951, -0.009488836862146854, 0.0032403171062469482, 0.04441741108894348, -0.013976382091641426, 0.01476866565644741, -0.004462786018848419, 0.03906949609518051, -0.023186681792140007, -0.004153300542384386, -0.017653074115514755, -0.024907423183321953, -0.001344716059975326, 0.019299538806080818, 0.011488115414977074, 0.02693765051662922, -0.02139166370034218, 0.016897927969694138, 0.00529530318453908, 0.034934766590595245, 0.003142829053103924, -0.0025594481267035007, -0.017628315836191177, 0.0047475132159888744, -0.005131275858730078, -0.046472396701574326, -0.03419199958443642, 0.0035126646980643272, -0.020673656836152077, 0.01158096082508564, -0.0022994799073785543, -0.01823490671813488, -0.0025315943639725447, -0.046249568462371826, 0.018408220261335373, 0.01085057482123375, 0.03981226310133934, 0.001982257002964616, -0.022703884169459343, -0.017368346452713013, -0.00016702566063031554, -0.027160480618476868, 0.019138606265187263, -0.001326920697465539, -7.229396578622982e-05, -0.01760355569422245, -0.0068953451700508595, 0.01646464876830578, 0.020871726796030998, 0.013964002020657063, 0.01739310659468174, 0.014830563217401505, -0.010497760958969593, -0.02002992480993271, 0.02946305461227894, 0.0030886689200997353, -0.04213959723711014, -0.001666581374593079, 0.013926863670349121, -0.021985875442624092, -0.005583125166594982, 0.03562801331281662, -0.017999697476625443, -0.004738228861242533, -0.027804210782051086, 0.03050292655825615, -0.0043730353936553, 0.02555115334689617, 0.014298247173428535, -0.004834169056266546, 0.014793424867093563, -0.011234336532652378, -0.004357561003416777, 0.027309032157063484, -0.0025315943639725447, -0.03634602203965187, 0.020067064091563225, 0.01771497167646885, -0.00458658067509532, 0.002601228654384613, -0.02002992480993271, 0.025192148983478546, -0.03802962228655815, 0.004184248857200146, 0.010924851521849632, -0.002208181656897068, 0.013741172850131989, -0.034117721021175385, -0.004620623774826527, -0.024647453799843788, 0.015239084139466286, -0.026368195191025734, -0.006000930909067392, 0.01544953417032957, 0.0204260665923357, 0.011902826838195324, 0.06640328466892242, 0.015796158462762833, -0.006164958700537682, 0.02001754567027092, 0.023446649312973022, -0.0036086051259189844, 0.0038933323230594397, -0.009971634484827518, -0.022023014724254608, -0.030775275081396103, -0.027606138959527016, 0.048156000673770905, -0.002612060634419322, 0.009179350920021534, 0.0019513083389028907, 0.0008154952665790915, -0.006146389525383711, 0.005700729787349701, 0.002398515585809946, -0.012509418651461601, 0.011091973632574081, 0.05063188821077347, 0.0068520172499120235, -0.019250020384788513, -0.008083770982921124, 0.009798322804272175, 0.010906281881034374, -0.029364019632339478, 0.01325837429612875, 0.018148250877857208, 0.025749223306775093, -0.020067064091563225, -0.006746791768819094, 0.0039397552609443665, -0.05179555341601372, 0.016402751207351685, -0.007823802530765533, -0.023335235193371773, 0.004085213411599398, 0.01069583185017109, -0.0013957812916487455, 0.017442623153328896, -0.002742044860497117, -0.041743453592061996, 0.005443856585770845, 0.01499149575829506, 0.008721311576664448, -0.03488524630665779, 0.0019776145927608013, -0.000951669062487781, 0.0295620895922184, 0.012453711591660976, 0.012212312780320644, -0.03228556737303734, -0.02031465247273445, -0.03429103270173073, 0.0017640694277361035, 0.028943117707967758, 0.014582973904907703, 0.013629757799208164, -0.04211483523249626, 0.001897148322314024, 0.004193533677607775, 0.021614493802189827, 0.0067220330238342285, -0.012181363999843597, -0.0011481925612315536, -0.021973496302962303, -0.014372523874044418, 0.033473990857601166, -0.019930889829993248, -0.02137928456068039, 0.013307892717421055, -0.008968900889158249, -0.0062980372458696365, 0.028423182666301727, 0.006728222593665123, -0.03513283655047417, 0.022493433207273483, 0.04785889387130737, 0.0011420028749853373, -0.013382168486714363, -0.00879558827728033, 0.012416573241353035, -0.02985919639468193, -0.017058860510587692, -0.01242276281118393, 0.00770000834017992, -0.0276804156601429, 0.007402902003377676, -0.007087226491421461, -0.012701299972832203, 0.008207565173506737, 0.0009601798956282437, 0.027507103979587555, 0.012069948948919773, 0.005830713547766209, 0.020351789891719818, -0.03624698519706726, 0.0084984814748168, 0.015697123482823372, 0.014248729683458805, -0.012107087299227715, -0.01823490671813488, -0.023496167734265327, 0.020067064091563225, -0.02409037947654724, 0.001284366357140243, -0.0007416055304929614, 0.027110962197184563, -0.01252179779112339, -0.00823232438415289, 0.008003304712474346, -0.010726780630648136, 0.02745758555829525, -0.039564672857522964, -0.03070099838078022, -0.014001140370965004, -0.024746490642428398, -0.02924022451043129, 0.0014909481396898627, 0.009030797518789768, -0.010955799371004105, -0.006920103915035725, 0.0023691144306212664, 0.022183947265148163, 0.020289894193410873, -0.036940231919288635, 0.004487545229494572, -0.0017253836849704385, -0.024263691157102585, 0.023310475051403046, 0.023607581853866577, -0.020166099071502686, -0.013431686908006668, 0.023199060931801796, 0.0004402436607051641, -0.02988395467400551, -0.006096871569752693, -0.042808085680007935, -0.012317537330091, 0.03409296274185181, -0.012311347760260105, -0.014310626313090324, 0.013741172850131989, -0.018358701840043068, -0.008015683852136135, 0.002214371459558606, 0.008337548933923244, 0.03406820446252823, 0.001535823568701744, -0.007056277710944414, 0.015598087571561337, -0.0011381342774257064, -0.013245995156466961, -0.022617226466536522, 0.048453107476234436, -0.01780162751674652, -0.026244401931762695, -0.05407337099313736, 0.02619488351047039, 0.009346473030745983, -0.021713528782129288, 0.003528138855472207, 0.029636366292834282, 0.027804210782051086, 0.007291486952453852, 0.013456445187330246, 0.0012944246409460902, -0.01573426090180874, 0.02254294976592064, -0.04013412818312645, 0.05154796689748764, 0.007043898571282625, 0.02797752246260643, 0.0001755365083226934, -0.0020054683554917574, -0.019361436367034912, 0.00020638838759623468, -0.023075265809893608, -0.01283747423440218, -0.04124827682971954, 0.004357561003416777, 0.0057533420622348785, -0.013951622880995274, -0.016922688111662865, -0.04213959723711014, -0.007860940881073475, -0.017653074115514755, -0.016155162826180458, -0.0047475132159888744, -0.004224481992423534, -0.0349842831492424, -0.006845827214419842, 0.005908085033297539, 0.006505392957478762, -0.034216757863759995, -0.010324448347091675, 0.03503379970788956, 0.02589777670800686, -0.0054221926257014275, -0.005375769454985857, -0.018482495099306107, 0.003651933278888464, 0.012144225649535656, 0.016823651269078255, -0.0014344670344144106, 0.010652503930032253, 0.030750514939427376, -0.006304227281361818, -0.008052822202444077, 0.014261108823120594, 0.00770000834017992, -0.0375344455242157, 0.02577398344874382, 0.02807655744254589, 0.018395839259028435, 0.02503121644258499, 0.01855677179992199, -0.0281755942851305, -0.0020193953532725573, -0.027729934081435204, 0.023743756115436554, -0.021515456959605217, -0.015746640041470528, -0.021552596241235733, 0.05283542722463608, 0.017058860510587692, -0.015288601629436016, 0.017566418275237083, 0.020983140915632248, -0.017937801778316498, 0.003385775489732623, -0.02338475175201893, -0.004134731367230415, -0.012224691919982433, -0.031914182007312775, -0.0017687117215245962, 0.008510861545801163, -0.01200805138796568, -0.028646012768149376, 0.020500343292951584, 0.0042894743382930756, -0.001825966639444232, -0.019955648109316826, 0.007291486952453852, 0.055707454681396484, 0.01504101324826479, 0.0025037406012415886, -0.012546557001769543, 0.046051498502492905, -0.01085057482123375, -0.0017362156650051475, -0.006951052695512772, 0.00529530318453908, -0.05110230669379234, -0.007644300814718008, -0.01541239582002163, 0.02139166370034218, 0.011401459574699402, -0.0387476310133934, -0.012651782482862473, -0.005666686221957207, 0.00017843794194050133, 0.007730957120656967, 0.002203539479523897, -0.011228146962821484, -0.00010213033965555951, -0.047091368585824966, 0.013332650996744633, 0.018061595037579536, 0.049715809524059296, -0.009086505509912968, -0.005010575987398624, -0.023743756115436554, 0.02619488351047039, 0.006957242265343666, 0.011661427095532417, 0.01665033958852291, -0.026987167075276375, 0.0059266542084515095, 0.002214371459558606, -0.005044619552791119, -0.042164355516433716, 0.001142776571214199, 0.0024604126811027527, 0.015969470143318176, 0.02597205340862274, 0.00906793586909771, 0.0039397552609443665, 0.025526395067572594, 0.014694388955831528, -0.002164853736758232, -0.01026874128729105, -0.014892459847033024, 0.003534328658133745, 0.06462065130472183, -0.01294888835400343, -0.03523186966776848, -0.03216177225112915, 0.022679124027490616, -0.0034167240373790264, 0.031072381883859634, -0.009965444914996624, -0.008028062991797924, 0.026244401931762695, 0.020388929173350334, 0.008956520818173885, -0.04669522866606712, 0.016056125983595848, 0.03179038688540459, -0.004088308196514845, 0.005781196057796478, -0.013023165054619312, 0.015028634108603, 0.05471710115671158, 0.005725488532334566, 0.010070670396089554, -0.007805233355611563, 0.0452839732170105, 0.016625581309199333, 0.02410275861620903, 0.023322854191064835, -0.03458813950419426, 0.029834438115358353, 0.010541088879108429, -0.005573840346187353, -0.002508383011445403, 0.012645592913031578, -0.02209729142487049, 0.011983293108642101, 0.04315470904111862, 0.03181514889001846, -0.008523240685462952, 0.026665301993489265, 0.008510861545801163, 0.0205374825745821, 0.013184097595512867, 0.0008735238807275891, -0.0021075988188385963, -0.009148402139544487, -0.015622846782207489, 0.015585708431899548, 0.033498749136924744, 0.015759021043777466, 0.030032508075237274, 0.011506684124469757, -0.01094960980117321, -0.020252754911780357, -0.008250893093645573, -0.008182805962860584, 0.013803069479763508, 0.01614278368651867, -0.006585859227925539, -0.022468673065304756, -0.011135301552712917, 0.007557644974440336, -0.005131275858730078, -0.03384537622332573, 0.01036777626723051, -0.011983293108642101, -0.02295147255063057, -0.01351834274828434, 0.005029145162552595, -0.03339971601963043, 0.050557609647512436, 0.0011141491122543812, -0.01972043886780739, 0.00917316135019064, -0.004075929056853056, -0.006387788336724043, -0.015263843350112438, 0.03612319007515907, -0.01843297854065895, -0.008814157918095589, -0.0159447118639946, -0.0316665954887867, 0.001988446805626154, 0.017343588173389435, -0.06471968442201614, 0.014223970472812653, -0.025848260149359703, 0.025600671768188477, -0.002203539479523897, 0.014706768095493317, -0.006511582527309656, 0.0017238362925127149, -0.03268170729279518, 0.002325786277651787]
metadata : {"source": "pydantic_ai_docs", "crawled_at": "2025-03-15T11:24:53.303497", "url_path": "/dependencies/", "chunk_size": 4179}
updated_dt: 2025-03-15T11:24:53.305028
---
```
fromdataclassesimport dataclass
importhttpx
frompydantic_aiimport Agent, RunContext

@dataclass
classMyDeps:
  api_key: str
  http_client: httpx.AsyncClient

agent = Agent(
  'openai:gpt-4o',
  deps_type=MyDeps,
)

@agent.system_prompt 
RunContext[](https://ai.pydantic.dev/api/tools/#pydantic_ai.tools.RunContext) may optionally be passed to a system_prompt[](https://ai.pydantic.dev/api/agent/#pydantic_ai.agent.Agent.system_prompt) function as the only argument.
[](https://ai.pydantic.dev/dependencies/#__code_1_annotation_1)
async defget_system_prompt(ctx: RunContext[MyDeps]) -> str: 
RunContext[](https://ai.pydantic.dev/api/tools/#pydantic_ai.tools.RunContext) is parameterized with the type of the dependencies, if this type is incorrect, static type checkers will raise an error.
[](https://ai.pydantic.dev/dependencies/#__code_1_annotation_2)
  response = await ctx.deps.http_client.get( 
Access dependencies through the .deps[](https://ai.pydantic.dev/api/tools/#pydantic_ai.tools.RunContext.deps) attribute.
[](https://ai.pydantic.dev/dependencies/#__code_1_annotation_3)
    'https://example.com',
    headers={'Authorization': f'Bearer {ctx.deps.api_key}'}, 
Access dependencies through the .deps[](https://ai.pydantic.dev/api/tools/#pydantic_ai.tools.RunContext.deps) attribute.
[](https://ai.pydantic.dev/dependencies/#__code_1_annotation_4)
  )
  response.raise_for_status()
  return f'Prompt: {response.text}'

async defmain():
  async with httpx.AsyncClient() as client:
    deps = MyDeps('foobar', client)
    result = await agent.run('Tell me a joke.', deps=deps)
    print(result.data)
    #> Did you hear about the toothpaste scandal? They called it Colgate.

```

_(This example is complete, it can be run "as is" — you'll need to add`asyncio.run(main())` to run `main`)_
### Asynchronous vs. Synchronous dependencies
[System prompt functions](https://ai.pydantic.dev/agents/#system-prompts), [function tools](https://ai.pydantic.dev/tools/) and [result validators](https://ai.pydantic.dev/results/#result-validators-functions) are all run in the async context of an agent run.
If these functions are not coroutines (e.g. `async def`) they are called with [`run_in_executor`](https://docs.python.org/3/library/asyncio-eventloop.html#asyncio.loop.run_in_executor) in a thread pool, it's therefore marginally preferable to use `async` methods where dependencies perform IO, although synchronous dependencies should work fine too.
`run` vs. `run_sync` and Asynchronous vs. Synchronous dependencies
Whether you use synchronous or asynchronous dependencies, is completely independent of whether you use `run` or `run_sync` — `run_sync` is just a wrapper around `run` and agents are always run in an async context.
Here's the same example as above, but with a synchronous dependency:
sync_dependencies.py```
fromdataclassesimport dataclass
importhttpx
frompydantic_aiimport Agent, RunContext

@dataclass
classMyDeps:
  api_key: str
  http_client: httpx.Client 
Here we use a synchronous httpx.Client instead of an asynchronous httpx.AsyncClient.
[](https://ai.pydantic.dev/dependencies/#__code_2_annotation_1)

agent = Agent(
  'openai:gpt-4o',
  deps_type=MyDeps,
)

@agent.system_prompt
defget_system_prompt(ctx: RunContext[MyDeps]) -> str: 
To match the synchronous dependency, the system prompt function is now a plain function, not a coroutine.
[](https://ai.pydantic.dev/dependencies/#__code_2_annotation_2)
  response = ctx.deps.http_client.get(
    'https://example.com', headers={'Authorization': f'Bearer {ctx.deps.api_key}'}
  )
  response.raise_for_status()
  return f'Prompt: {response.text}'

async defmain():
  deps = MyDeps('foobar', httpx.Client())
  result = await agent.run(
    'Tell me a joke.',
    deps=deps,
  )
  print(result.data)
  #> Did you hear about the toothpaste scandal? They called it Colgate.

```

_(This example is complete, it can be run "as is" — you'll need to add`asyncio.run(main())` to run `main`)_
## Full Example
As well as system prompts, dependencies can be used in [tools](https://ai.pydantic.dev/tools/) and [result validators](https://ai.pydantic.dev/results/#result-validators-functions).
full_example.py