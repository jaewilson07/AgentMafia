---
url: https://ai.pydantic.dev/dependencies/
session_id: pydantic_ai_docs
chunk_number: 3
title: Using Dependencies with Pydantic AI Agents
summary: This document chunk demonstrates how to define dependencies for an agent using Pydantic AI. It shows the creation of a custom dependency class `MyDeps`, along with examples of system prompts and tool functions that utilize an async HTTP client to fetch external data and handle responses.
embedding: [-0.03616812825202942, 0.014589558355510235, 0.009004591032862663, -0.017659731209278107, 0.0010740922298282385, 0.017497485503554344, 0.011706591583788395, 0.016062242910265923, -0.0034133826848119497, -0.01969403214752674, 0.03918837755918503, -0.03467048332095146, 0.0022137064952403307, -0.03070172294974327, -0.026533277705311775, -0.05406498536467552, -0.039987120777368546, 0.030152585357427597, -0.007506945636123419, 0.06175289675593376, 0.045104075223207474, 0.041384924203157425, 0.035743795335292816, 0.009104433469474316, 0.002268308075144887, -0.015600468963384628, -0.023288380354642868, 0.04445509612560272, 0.0524175763130188, -0.02053021639585495, 0.02743186429142952, -0.017485005781054497, -0.010446074418723583, 0.02516043558716774, 0.02580941654741764, -0.006159065291285515, 0.01619952730834484, -0.006995250470936298, -0.0035943479742854834, 0.01716051623225212, 0.0018439753912389278, -0.06889166682958603, 0.029853057116270065, 0.013179276138544083, -0.05875760689377785, 0.03951286897063255, -0.019806355237960815, 0.009784613735973835, 0.02205282263457775, -0.02021820843219757, -0.05386529862880707, 0.009229237213730812, 0.01637425273656845, 0.025584768503904343, -0.028455255553126335, -0.008505376055836678, -8.039116801228374e-05, 0.026433434337377548, -0.023775113746523857, -0.05960627272725105, 0.029204078018665314, -0.003750352654606104, -0.01855831779539585, 0.023637831211090088, -0.027581628412008286, -0.013903138227760792, 0.000616218545474112, -0.003251137677580118, -0.04443013668060303, 0.025784455239772797, 0.025172917172312737, 0.035494185984134674, -0.0502459891140461, -0.0305769182741642, -0.03664238005876541, -0.025834375992417336, 0.008811145089566708, 0.053216319531202316, 0.06384959816932678, -0.038364674896001816, -0.008917228318750858, 0.019182337448000908, -0.02451145648956299, 0.005042071454226971, -0.027232177555561066, -0.050171107053756714, -0.07812714576721191, -0.00751318596303463, -0.009965579956769943, -0.03209952637553215, -0.016586419194936752, 0.039238300174474716, -0.038639239966869354, 0.03936310485005379, 0.05491365119814873, 0.04310721531510353, -0.00045475366641767323, -0.011818915605545044, -0.005725372117012739, 0.008511615917086601, 0.05616168677806854, -0.013441364280879498, -0.08227062970399857, 0.017971741035580635, 0.05651113763451576, 0.020817264914512634, -0.001650529564358294, 0.0015740873059257865, -0.058158546686172485, 0.02070494182407856, -0.06300093233585358, -0.007394622080028057, 0.010627039708197117, -0.0015647270483896136, -0.05101977288722992, 0.012879746966063976, 0.01686098612844944, -0.056061845272779465, 0.02755666896700859, -0.05611176788806915, -0.03943798691034317, 0.005547526758164167, 0.019731473177671432, -0.02031804993748665, 0.024274328723549843, 0.025135476142168045, -0.011931238695979118, -0.0379902608692646, -0.03908853605389595, 0.0049859099090099335, 0.023313339799642563, -0.003187175840139389, 0.005815854761749506, -0.012804864905774593, -0.026533277705311775, -0.0061715454794466496, -0.04552840813994408, -0.010321269743144512, -0.020193247124552727, 0.035094816237688065, 0.03332260251045227, -0.03150046616792679, -0.00459589809179306, 0.013329040259122849, -0.003550666617229581, 0.052966710180044174, -0.04857362061738968, 0.018233828246593475, -0.01699827052652836, 0.027356982231140137, 0.01072688214480877, 0.030427154153585434, -0.04333186149597168, -0.00016916758613660932, -0.013229197822511196, 0.00751318596303463, 0.006496035028249025, 0.03791537880897522, 0.019806355237960815, -0.02353798784315586, -0.02367527224123478, 0.017584849148988724, -0.026633121073246002, -0.012779904529452324, -0.047849759459495544, -0.03759089112281799, -0.007095093373209238, -0.0067394026555120945, -0.0286050196737051, -0.006087303161621094, -0.010377432219684124, -0.01585007645189762, 0.005482004955410957, 0.03000282123684883, 0.045428566634655, -0.021940499544143677, -0.020729903131723404, -0.031250860542058945, -0.03814002498984337, -0.05261726304888725, -0.003159094834700227, -0.019906198605895042, -0.030302351340651512, 0.0050514317117631435, -0.05825839191675186, -0.03689198940992355, 0.014314990490674973, 0.04550344869494438, 0.00764422956854105, 0.06784331798553467, 0.03769073262810707, 0.017235398292541504, 0.030202507972717285, 0.021254079416394234, 0.014639480039477348, -0.010951529256999493, 0.04358147084712982, -0.006951569113880396, 0.04013688489794731, 0.009073232300579548, 0.018046623095870018, 0.037316322326660156, 0.010358711704611778, -0.007650469895452261, 0.022988850250840187, -0.059855878353118896, -0.016748663038015366, -0.019007612019777298, -0.03252385929226875, 0.002776883542537689, 0.03307299315929413, -0.06040501594543457, 0.02398728020489216, 0.038464516401290894, -0.05566247180104256, -0.023750154301524162, -0.018096543848514557, 0.05161883309483528, 0.0023759515024721622, 0.06210234761238098, -0.01424010843038559, 0.04747534543275833, 0.04517895728349686, -0.04807440564036369, -0.0008603658643551171, 0.011531866155564785, -0.01717299595475197, -0.04857362061738968, -0.010614559054374695, 0.03424615040421486, 0.02580941654741764, -0.04240831360220909, -0.0073072598315775394, -0.026433434337377548, 0.018970170989632607, -0.05930674076080322, 0.033122915774583817, -0.011045131832361221, 0.002346310531720519, 0.020542697980999947, -0.006989010144025087, -0.009116914123296738, -0.019943639636039734, 0.010414873249828815, 0.02568461187183857, 0.029927939176559448, -0.02224002778530121, -0.04722573980689049, 0.03237409144639969, 0.0012706582201644778, 0.030102664604783058, -0.03257377818226814, 0.01991867832839489, -0.013641050085425377, -0.029628410935401917, -0.06459841877222061, 0.010471034795045853, -0.016586419194936752, -0.05276702716946602, 0.05131930112838745, -0.03182495757937431, 0.038589321076869965, -0.022177627310156822, 0.034520719200372696, 0.016149604693055153, -0.024835946038365364, 0.00897962972521782, -0.028629980981349945, 0.01586255617439747, -0.018970170989632607, 0.011188656091690063, 0.0033260199707001448, 0.047550227493047714, -0.03694191202521324, -0.02458633854985237, -0.008455454371869564, -0.0059250579215586185, 0.007538146339356899, -0.006889167241752148, 0.010027981363236904, -0.025185396894812584, 0.02376263402402401, 0.007494465447962284, 0.04467974230647087, -0.028155725449323654, 0.001168475137092173, 0.006496035028249025, -0.005194955971091986, -0.016012322157621384, 0.044879429042339325, -0.008542817085981369, 0.05790894106030464, 0.0035225858446210623, -0.03332260251045227, 0.04607754573225975, -0.029902977868914604, -0.015138695016503334, 0.021815694868564606, 0.004545976407825947, -0.03302307426929474, 0.016049763187766075, 0.012979590333998203, -0.015163655392825603, -0.006389952264726162, -0.013765853829681873, 0.01755988784134388, 0.026483355090022087, 0.010383672080934048, 0.023076213896274567, -0.012748703360557556, -0.01430250983685255, 0.05486372858285904, 0.013054472394287586, 0.020729903131723404, -0.010483515448868275, -0.02320101670920849, 0.04999638348817825, -0.04787471890449524, 0.03556906804442406, -0.02935384213924408, -0.061353523284196854, -0.000614268472418189, 0.03589355945587158, -0.00771911209449172, -0.028530137613415718, -0.018408553674817085, 0.012330610305070877, 0.003180935513228178, -0.022651880979537964, 0.04882322624325752, -0.01508877333253622, -0.014277549460530281, 0.017622290179133415, 0.05626153200864792, 0.045428566634655, 0.0010670720366761088, -0.05336608365178108, 0.017410123720765114, 0.014776764437556267, 0.06494787335395813, -0.05004630237817764, 0.007488225121051073, -0.020118365064263344, -0.02760658971965313, 0.019182337448000908, 0.04507911577820778, 0.021553607657551765, 0.032823387533426285, -0.037366241216659546, 0.037016794085502625, -0.0072136567905545235, 0.008436733856797218, 0.0072198971174657345, 0.020754864439368248, -0.01491404790431261, -0.039812397211790085, -0.03140062466263771, 0.031899839639663696, -0.007001490332186222, 0.005301039200276136, -0.06285116821527481, 0.02306373231112957, -0.01093904860317707, -0.023438144475221634, -0.012542776763439178, 0.018158946186304092, 0.018146464601159096, -0.02423688769340515, -0.006595878396183252, 0.038015224039554596, 0.027806276455521584, 0.06404928863048553, -0.05805870518088341, -0.02494826912879944, 0.010371191427111626, -0.030901407822966576, -0.041210196912288666, 0.00919179618358612, 0.013803294859826565, 0.019007612019777298, 0.031600311398506165, -0.019943639636039734, -0.004365011118352413, -0.00018905817705672234, 0.03873908519744873, 0.03175007551908493, -0.002026500878855586, -0.0038096345961093903, -0.009547486901283264, 0.01628688909113407, 0.06439873576164246, -0.06874190270900726, -0.021428804844617844, 0.0025413164403289557, -0.011126254685223103, -0.009372761473059654, -0.018670640885829926, 0.020243167877197266, 0.041734375059604645, 0.028280530124902725, 0.01586255617439747, 0.00751318596303463, -0.013666010461747646, 0.014901568181812763, -0.017185475677251816, -0.002024940913543105, 0.04620235040783882, 0.009091952815651894, 0.00573161244392395, -0.015300939790904522, 0.059206899255514145, -0.02952856756746769, 0.008848586119711399, -0.013041991740465164, -0.017572367563843727, -0.035394344478845596, 0.0014414832694455981, -0.023388223722577095, 0.02655823901295662, 0.054614122956991196, -0.004527255892753601, -0.07997424155473709, -0.005113833583891392, 0.0017238517757505178, -0.02650831639766693, 0.049472205340862274, 0.04747534543275833, -0.044355254620313644, 0.02013084478676319, -0.0025444363709539175, -0.006864206399768591, 0.0072136567905545235, 0.004889186937361956, 0.04170941188931465, -0.012711262330412865, -0.02066750079393387, -0.010664480738341808, 0.029428724199533463, -0.0005233957199379802, -0.010034221224486828, -0.005004630424082279, -0.041384924203157425, 0.014963969588279724, 0.054614122956991196, -0.06869198381900787, 0.004558457061648369, -0.028280530124902725, -0.05960627272725105, 0.020455334335565567, -0.012293169274926186, -0.0038033942691981792, -0.017634769901633263, -0.022389793768525124, 0.00932283978909254, -0.01925721950829029, -0.034271109849214554, 0.043706271797418594, 0.017260359600186348, 0.057409726083278656, -0.0024711142759770155, 0.03307299315929413, -0.013641050085425377, -0.022938929498195648, 0.06694473326206207, -0.0002289368858328089, 0.05096985027194023, 0.04358147084712982, 0.005987459793686867, -0.004283888731151819, 0.02550988644361496, 0.03017754666507244, -0.010339991189539433, -0.000945388397667557, -0.020330531522631645, -0.008680100552737713, -0.024598820134997368, 0.03616812825202942, 0.056810665875673294, 0.0049047875218093395, -0.0010272908257320523, 0.024249369278550148, -0.0017815735191106796, 0.021366402506828308, 0.006168425548821688, -0.016536496579647064, 0.022614439949393272, -0.03956278786063194, -0.0327734649181366, -0.03372197225689888, -0.0138656971976161, 0.0034414634574204683, 0.019007612019777298, 0.050770167261362076, -0.013329040259122849, 0.031550388783216476, 0.018421033397316933, 0.03372197225689888, -0.008642659522593021, -0.01654897816479206, -0.037890419363975525, 0.016848506405949593, -0.002257387852296233, -0.014739323407411575, 0.04083578661084175, 0.019319619983434677, -0.0305769182741642, 0.029428724199533463, 0.0003453553654253483, 0.0024789145682007074, 0.036492615938186646, -0.04812432453036308, 0.013229197822511196, 0.0023182297591120005, 0.01628688909113407, -0.025397563353180885, 0.005588087718933821, -0.029778175055980682, 0.009603648446500301, -0.009516285732388496, 0.0117939542979002, 0.026708003133535385, -0.02573453262448311, -0.0314505435526371, -0.0012105964124202728, 0.0003671960439532995, -0.010115344077348709, 0.004308849573135376, -0.032698582857847214, 0.00832440983504057, 0.010358711704611778, 0.012155885808169842, -0.007943758741021156, 0.013017031364142895, -0.003778433660045266, -0.03105117380619049, 0.0436813123524189, 0.011575547978281975, 0.02353798784315586, -0.012299410067498684, -0.018945209681987762, -0.01543822418898344, 0.026882728561758995, -0.0323241725564003, -0.009073232300579548, -0.024823466315865517, 0.03389669954776764, 0.022439714521169662, -0.000957088777795434, -0.008717541582882404, -0.022152666002511978, 0.06789323687553406, 0.003831475041806698, 0.024361692368984222, -0.011213617399334908, 0.03262370079755783, 0.01624944806098938, -0.015962399542331696, -0.01196867972612381, 0.00891098752617836, -0.009828295558691025, 0.0340714231133461, -0.01995611935853958, 0.01290470827370882, 0.002154424786567688, -0.012081002816557884, 0.025035632774233818, 0.02760658971965313, 0.004443013574928045, -0.029453685507178307, 0.0009711291640996933, 0.02166593074798584, 0.009703491814434528, -0.04512903466820717, 0.0057721734046936035, 0.021416323259472847, 0.002811204409226775, 0.02585933730006218, -0.01830871030688286, -0.02398728020489216, -0.02463626116514206, 0.004068602342158556, -0.02481098659336567, 0.024661220610141754, 0.010102863423526287, -0.014751803129911423, -0.004692621063441038, 0.008848586119711399, -0.01220580656081438, -0.0336221307516098, -0.0009344680584035814, -0.00466141989454627, 0.008024881593883038, -0.006939088460057974, -0.01207476295530796, -0.02783123590052128, 0.009478844702243805, 0.002106063300743699, 0.026658080518245697, -0.04415556788444519, 0.0189951304346323, 0.023051252588629723, -0.03242401406168938, -0.021828176453709602, 0.001505445223301649, -0.009591168724000454, -0.000658729812130332, 0.006714441813528538, 0.01682354509830475, -0.0013595808995887637, -0.006364991422742605, -0.004193406086415052, -0.01450219564139843, -0.006764363497495651, -0.033172838389873505, -0.028230609372258186, 0.00525111798197031, -0.026283670216798782, 0.02573453262448311, 0.04438021406531334, -0.018483435735106468, 5.8696765336208045e-05, -0.004623978864401579, 0.01272998284548521, 0.014052902348339558, 0.005575607530772686, -0.014227627776563168, -0.02231490984559059, -0.02720721811056137, 0.0031388143543154, 0.025172917172312737, -0.0259841401129961, 0.02144128456711769, -0.004623978864401579, 0.002748802537098527, -0.012299410067498684, -0.011038891971111298, -0.004929748363792896, -0.01568783074617386, -0.0034820246510207653, -0.05411490797996521, 0.0007273718365468085, 0.02720721811056137, 0.014939009211957455, 0.006951569113880396, 0.02795604057610035, 0.024611299857497215, -0.01316679548472166, 0.003149734577164054, 0.06629575043916702, -0.028205648064613342, 0.019981080666184425, -0.018807925283908844, -0.0015569267561659217, -0.003691070945933461, 0.019332101568579674, 0.01004670187830925, -0.016848506405949593, -0.022215068340301514, -0.03838963434100151, 0.032998111099004745, -0.032648660242557526, -0.005441443528980017, 0.012130924500524998, -0.004561576992273331, 0.0030826525762677193, 0.038289789110422134, 0.0227142833173275, 0.008262008428573608, 0.025522366166114807, 0.023562947288155556, -0.0015725272241979837, 0.0005253457929939032, 0.03394661843776703, 0.005160634871572256, 0.023725192993879318, -0.005737852305173874, 0.004798704292625189, -0.03661742061376572, -0.04263295978307724, 0.02952856756746769, -0.00695780897513032, -0.04230847209692001, -0.04078586399555206, 0.019806355237960815, 0.05905713513493538, -0.040186807513237, 0.013391442596912384, 0.03252385929226875, -0.005737852305173874, 0.04078586399555206, -0.010159024968743324, -0.013641050085425377, -0.0023026291746646166, 0.019993560388684273, 0.04058618098497391, -0.0025615969207137823, -0.027881158515810966, 0.007363421376794577, -0.007968719117343426, -0.009272919036448002, -0.01238053198903799, -0.0042714085429906845, 0.01860823854804039, 0.00217782543040812, -0.038414593786001205, -0.05281694605946541, -0.009210516698658466, 0.03170015290379524, 0.0318748764693737, -0.018009182065725327, -0.0029531687032431364, 0.0262087881565094, -0.028754783794283867, 0.005082632880657911, -0.022963890805840492, -0.004960949067026377, 0.005984339863061905, -0.006789323873817921, 0.02590925805270672, -0.023999761790037155, -0.02131647989153862, 0.01909497380256653, -0.014165225438773632, -0.031999681144952774, -0.0006154385046102107, -0.023687751963734627, 0.0025023152120411396, 0.02280164510011673, -0.001722291810438037, 0.013940579257905483, -0.0112448176369071, -0.016910908743739128, -0.012736222706735134, -0.02013084478676319, -0.01803414151072502, -0.017584849148988724, -0.06889166682958603, 0.015513106249272823, -0.015375821851193905, -0.01995611935853958, 0.0019422583281993866, -0.011825155466794968, -0.007806474808603525, 0.006895407103002071, -0.00048595460248179734, 0.0028502056375145912, 0.02590925805270672, 0.04817424714565277, -0.019444424659013748, 0.038065142929553986, -0.060255251824855804, 0.008904747664928436, -0.010190226137638092, 0.003229296999052167, 0.003912597429007292, -0.003797154175117612, 0.01572527177631855, -0.028580058366060257, -0.03691694885492325, 0.012717502191662788, 0.001970339333638549, -0.010389911942183971, -0.03175007551908493, 0.03988727927207947, -0.020367972552776337, -0.03546922653913498, 0.00987197645008564, -0.03516969829797745, 0.0033759414218366146, 0.03516969829797745, 0.008636419661343098, -0.03087644837796688, 0.008411772549152374, -4.2462525016162544e-05, 0.021391363814473152, -0.029453685507178307, -0.004789344035089016, -0.005959379021078348, 0.007575587835162878, -0.013329040259122849, 0.007082612719386816, 0.026283670216798782, -0.021016951650381088, 0.014427313581109047, 0.025222837924957275, -0.015325900167226791, 0.006402432452887297, -0.0019282179418951273, -0.022252509370446205, -0.03546922653913498, -0.051044732332229614, -0.03372197225689888, -0.014764283783733845, 0.005447683855891228, 0.0371415950357914, -0.004467974416911602, 0.016449134796857834, -0.09894441068172455, -0.040810827165842056, 0.030452115461230278, -0.028804706409573555, 0.017222916707396507, 0.009971819818019867, 0.035793714225292206, 0.03302307426929474, -0.02563469111919403, 0.005407122429460287, 0.018857846036553383, -0.019119935110211372, -0.014427313581109047, -0.015163655392825603, 0.04328194260597229, -0.001129473908804357, 0.039812397211790085, 0.008705061860382557, 0.05166875198483467, -0.011731552891433239, -0.026633121073246002, -0.013154315762221813, -0.04008696600794792, 0.03873908519744873, 0.018071582540869713, -0.0028860867023468018, 0.0005487464950419962, 0.02091710828244686, 0.02222754806280136, -0.015662871301174164, -0.013216717168688774, -0.011188656091690063, -0.007943758741021156, 0.0024149524979293346, -0.015538066625595093, 0.04954708740115166, 0.006577157881110907, 0.021079353988170624, 0.03419622778892517, -0.013616088777780533, 0.016124645248055458, 0.0007425823132507503, 0.013116873800754547, -0.013041991740465164, 0.018620720133185387, -0.0029453684110194445, -0.023687751963734627, 0.009928137995302677, -0.013790814206004143, 0.003077972447499633, 0.031250860542058945, -0.0009110673563554883, -0.002915727673098445, 0.0200934037566185, 0.01970651187002659, 0.027456825599074364, -0.02100447192788124, 0.016299370676279068, -0.014090343378484249, 0.020991990342736244, 0.00040795226232148707, -0.0060186609625816345, 0.001658329856581986, -0.007013970986008644, -0.023999761790037155, 0.013591128401458263, -0.0101527851074934, 0.019494345411658287, 0.0023681512102484703, 0.013041991740465164, -0.0349450521171093, 0.007076372858136892, 0.025322681292891502, 0.01017774548381567, -0.0021029431372880936, 0.014789244160056114, 0.015662871301174164, -0.002336950274184346, 0.013578647747635841, 0.01572527177631855, 0.042957451194524765, -0.04113531485199928, 0.02830549143254757, 0.05281694605946541, -0.05191836133599281, 0.021166715770959854, 0.0030857727397233248, 0.003148174611851573, -0.00528543908149004, 0.03529449924826622, 0.019506826996803284, 0.009360281750559807, -0.00853657629340887, 0.016174566000699997, -0.03599340096116066, -0.0012581777991726995, -0.04420548677444458, 0.012230767868459225, 0.003962519112974405, 0.025659650564193726, 0.015962399542331696, 0.024211928248405457, -0.0057784137316048145, 0.01890776865184307, -0.01698579080402851, 0.052567340433597565, -0.030377233400940895, -0.01336648128926754, -0.029503606259822845, -0.0010826725047081709, 0.011045131832361221, -0.005659850314259529, -0.050820086151361465, 0.03691694885492325, -0.028205648064613342, -0.019057532772421837, 0.05860784277319908, -0.02554732747375965, -0.029428724199533463, 0.016798585653305054, 0.008517855778336525, 0.05057048052549362, -0.0017846936825662851, 0.012056042440235615, -0.012024841271340847, -0.01624944806098938, -0.02341318316757679, -0.02703249268233776, -0.0331977978348732, 0.003837715368717909, 0.03419622778892517, 0.012698781676590443, -0.03551914915442467, 0.014539636671543121, -0.02026812918484211, -0.011057612486183643, 0.026807846501469612, -0.01960666850209236, 0.0010202706325799227, -0.03871412202715874, -0.003307299455627799, -0.04917267709970474, 0.011038891971111298, -0.02808084338903427, -0.032473936676979065, 0.004467974416911602, 0.0349450521171093, 0.01795925945043564, -0.021191677078604698, 0.008998350240290165, -0.005740972701460123, -0.0036411494947969913, -0.025934219360351562, 0.027107374742627144, 0.012093483470380306, 0.04682636633515358, -0.005968739278614521, -0.04665164276957512, 0.016848506405949593, -0.004240207374095917, -0.022614439949393272, 0.040910668671131134, -0.018832886591553688, -0.026807846501469612, 0.022464675828814507, -0.02175329439342022, -0.011563067324459553, -0.011850115843117237, 0.002485154662281275, -0.0344957560300827, -0.006926608271896839, 0.015238538384437561, 0.008311930112540722, -0.006577157881110907, 0.03868916258215904, 0.05970611423254013, 0.02778131514787674, -0.019456904381513596, 0.006021780893206596, 0.03289826959371567, 0.02441161312162876, 0.03621804714202881, -0.013666010461747646, -0.01607472263276577, 0.045753054320812225, 0.0016224487917497754, 0.034445833414793015, 0.018932728096842766, 0.00015337210788857192, 0.010052941739559174, 0.013940579257905483, -0.0012004560558125377, -0.0043462906032800674, -0.0007765133632346988, -0.032998111099004745, 0.02965337038040161, 0.019731473177671432, -0.019556747749447823, 0.008187126368284225, -0.012567738071084023, 0.02423688769340515, 0.0176846906542778, -0.008829865604639053, -0.023250939324498177, 0.026708003133535385, 0.06939088553190231, -0.022913968190550804, -0.006408672779798508, -0.005404002498835325, 0.010102863423526287, -0.014202666468918324, -0.01316679548472166, 0.01621200703084469, 0.02224002778530121, -0.012255728244781494, 0.0015912478556856513, -0.05059543997049332, -0.010059182532131672, -0.011188656091690063, -0.03729135915637016, 0.01295462902635336, -0.023438144475221634, -0.01336648128926754, 0.03227424994111061, 0.002155984751880169, 0.004820544738322496, -0.006255787797272205, 0.0011957759270444512, 0.03988727927207947, 0.014452273957431316, 0.0037066712975502014, 0.02580941654741764, -0.005828334949910641, 0.009703491814434528, 0.014801724813878536, -0.03432103246450424, -0.00843049306422472, 0.008330650627613068, 0.002505435375496745, -0.003853315720334649, 0.01716051623225212, 0.0066520399414002895, -0.02332582138478756, -0.02381255477666855, 0.02703249268233776, 0.026832805946469307, 0.034046463668346405, 0.04113531485199928, 0.02738194353878498, -0.004446133505553007, 0.01264885999262333, 0.0025116754695773125, 0.025934219360351562, -0.025447484105825424, 0.022264989092946053, -0.027182256802916527, 0.015300939790904522, 0.05421474948525429, -0.017921818420290947, 0.014589558355510235, 0.0029999702237546444, 0.017971741035580635, -0.01628688909113407, -0.016436653211712837, -0.02755666896700859, -0.021216638386249542, 0.0017098113894462585, 0.03075164370238781, -0.0030732923187315464, 0.015550547279417515, -0.01654897816479206, 0.020405413582921028, 0.027057453989982605, 0.0397624745965004, 0.016274409368634224, -0.01572527177631855, -0.023750154301524162, -0.01585007645189762, -0.020031001418828964, -0.043132174760103226, -0.03254881873726845, -0.010907847434282303, -0.033222757279872894, -0.009890696965157986, 0.013641050085425377, -0.014115304686129093, -0.010914088226854801, -0.039937201887369156, 0.011538106948137283, 0.0168110653758049, 0.05126938223838806, 0.0008759663323871791, -0.023825036361813545, -0.006808044388890266, 0.014040421694517136, -0.0152884591370821, 0.01007166225463152, -0.009622368961572647, 0.006720682140439749, -0.015700312331318855, 0.001313559478148818, 0.02219010703265667, 0.0031762553844600916, 0.02196546085178852, 0.00860521849244833, 0.011144975200295448, -0.012199566699564457, -0.012480375356972218, 0.03734128177165985, 0.002923527965322137, -0.05126938223838806, -0.014364912174642086, 0.024087123572826385, -0.022676842287182808, 0.00342898303642869, 0.047675032168626785, -0.04897299036383629, 0.0014711242401972413, -0.04023673012852669, 0.017060672864317894, -0.006751882843673229, 0.031775034964084625, 0.01032751053571701, -0.013591128401458263, 0.000937588163651526, -0.030502036213874817, -0.010109104216098785, 0.023787595331668854, -0.004277648404240608, -0.0467514842748642, 0.020729903131723404, 0.007775273639708757, 0.011806434951722622, -0.002347870497033, -0.034046463668346405, 0.023687751963734627, -0.05596200376749039, -0.004517895635217428, 0.003572507295757532, -0.013903138227760792, 0.00013835665595252067, -0.026458395645022392, -0.005510085728019476, -0.028979431837797165, 0.006689480971544981, -0.02783123590052128, 0.0013970219297334552, 0.005956259090453386, 0.008255768567323685, 0.012124684639275074, 0.07068884372711182, 0.006664520129561424, -0.004343170672655106, 0.020205726847052574, 0.00528543908149004, 0.006920367944985628, 0.01904505304992199, -0.0016130885342136025, -0.014352431520819664, -0.024561379104852676, -0.009004591032862663, 0.03132574260234833, 0.022352350875735283, 0.014589558355510235, 0.0060997833497822285, 0.006508515682071447, -0.01042111311107874, -0.019456904381513596, 0.021853135898709297, -0.01778453402221203, 0.032873306423425674, 0.04480454698204994, 0.006439873483031988, -0.026533277705311775, 0.004701981320977211, 0.016311850398778915, 0.013154315762221813, -0.03035227209329605, 0.0010639519896358252, 0.028155725449323654, 0.03384677693247795, -0.0038439554627984762, 0.006789323873817921, 0.005990580189973116, -0.03324772045016289, 0.011706591583788395, 0.019406983628869057, -0.011600508354604244, -0.00858025811612606, -0.0005616169073618948, 0.005207436624914408, 0.00019656590302474797, -0.0010397712467238307, -0.025884298607707024, 0.008068562485277653, 0.00703269150108099, -0.0012792384950444102, -0.0537155345082283, 0.0024523937609046698, 0.01663633994758129, 0.022352350875735283, 0.0067331623286008835, 0.01651153713464737, -0.01526349876075983, -0.02690768800675869, -0.03726639971137047, -0.016711222007870674, 0.03459560126066208, 0.011263538151979446, 0.01351624634116888, -0.02743186429142952, -0.004121643956750631, 0.010065422393381596, 0.04460486024618149, 0.002268308075144887, -0.010864166542887688, -0.005825215019285679, -0.031300779432058334, -0.01118241623044014, 0.037416163831949234, -1.6733940356061794e-05, -0.0022152666933834553, 0.02765651047229767, -0.014988930895924568, -0.004205886274576187, 0.02362534962594509, -0.009073232300579548, -0.030027782544493675, 0.01773461326956749, 0.05062040314078331, 0.0032792184501886368, -0.0021747052669525146, 0.012680061161518097, 0.02458633854985237, -0.02843029424548149, -0.02882966585457325, -0.015775194391608238, 0.0006969509413465858, -0.02690768800675869, 0.0007636429509148002, -0.010914088226854801, -0.018770484253764153, -0.0032542578410357237, 0.01247413456439972, 0.025048112496733665, 0.01628688909113407, 0.011694111861288548, 0.009428923018276691, -0.03367205336689949, 0.008486654609441757, 0.004620858933776617, 0.01829623058438301, -0.016848506405949593, -0.0014680040767416358, -0.02114175632596016, 0.020343011245131493, -0.02947864681482315, -0.010115344077348709, 0.0005740972701460123, 0.03309795632958412, -0.013453844003379345, -0.0029048072174191475, 0.016349291428923607, -0.005968739278614521, 0.028405332937836647, -0.05136922374367714, -0.041160278022289276, -0.004945348482578993, -0.024424094706773758, -0.028105804696679115, -0.0010631720069795847, 0.009903177618980408, 0.0033291401341557503, 0.0025210357271134853, 0.010258868336677551, 0.03294818848371506, 0.037316322326660156, -0.04787471890449524, -0.001112313475459814, -0.0028143245726823807, -0.006374351680278778, 0.01563790999352932, 0.019906198605895042, -0.01882040500640869, -0.01951930671930313, 0.02332582138478756, -0.005597448442131281, -0.021952979266643524, -0.021216638386249542, -0.035494185984134674, -0.007494465447962284, 0.02283908613026142, 0.0037940340116620064, -0.0384395569562912, 0.0067331623286008835, -0.007057652343064547, -0.0035132255870848894, -0.0066457996144890785, -0.002170025138184428, 0.019194817170500755, 0.021154236048460007, -0.015076292678713799, 0.010333750396966934, -0.0010467914398759604, -0.011394582688808441, -0.02502315118908882, 0.03586859628558159, -0.022552037611603737, -0.023600390180945396, -0.0262087881565094, 0.022302430123090744, -0.0015928078209981322, -0.005260478239506483, 0.0066520399414002895, 0.023176057264208794, 0.01654897816479206, 0.003581867553293705, 0.012056042440235615, 0.010215187445282936, -0.02783123590052128, 0.02336326241493225, -0.02633359096944332, 0.04637707397341728, 0.007968719117343426, 0.042483195662498474, -0.004327570088207722, 0.0004465634119696915, -0.020080924034118652, 0.01743508316576481, -0.010464794933795929, 0.005478884559124708, -0.027282100170850754, 0.003678590524941683, -0.007344700861722231, -0.006751882843673229, -0.009397722780704498, -0.025784455239772797, 0.0048174248076975346, -0.01743508316576481, -0.024686181917786598, 0.0067331623286008835, 0.0008049841853789985, -0.01991867832839489, -0.011893797665834427, -0.002737882314249873, 0.01808406412601471, -0.026832805946469307, -0.012736222706735134, 0.01637425273656845, 0.04305729269981384, -0.027182256802916527, -0.00549136521294713, -0.027132336050271988, -0.0062776287086308, 0.007837675511837006, 0.027506746351718903, 0.010970249772071838, -0.0033946619369089603, 0.02975321374833584, -0.009753413498401642, 0.0036536299157887697, 0.02110431343317032, 0.012286929413676262, -0.022951409220695496, 0.03566891327500343, 0.01207476295530796, 0.03679214417934418, 0.020343011245131493, 0.009984300471842289, -0.05201820284128189, -0.002385311760008335, -0.009254198521375656, 0.031899839639663696, -0.038888849318027496, -0.003067052224650979, -0.02563469111919403, 0.05074520409107208, 0.017672210931777954, -0.01750996708869934, 0.021029431372880936, 0.04218366742134094, -0.0117939542979002, -0.0034820246510207653, -0.01887032762169838, -0.015775194391608238, -0.003709791461005807, -0.04712589457631111, -0.006049861665815115, 0.016910908743739128, -0.008436733856797218, -0.024074643850326538, 0.035843636840581894, -0.015425743535161018, 0.00840553268790245, -0.015949919819831848, 0.0019469385733827949, 0.03459560126066208, 0.014165225438773632, 0.010964009910821915, -0.024349212646484375, 0.06369983404874802, 0.0030389714520424604, -0.004090442787855864, 0.01371593214571476, 0.0152884591370821, -0.02276420406997204, -0.009659809991717339, -0.024661220610141754, 0.002797164022922516, 0.018932728096842766, -0.04123516008257866, -0.005116953980177641, 0.006951569113880396, 0.003460183972492814, -0.0017191716469824314, 0.0070389313623309135, -0.020692462101578712, 0.008330650627613068, -0.05271710455417633, 0.0061777858063578606, 0.01908249408006668, 0.03838963434100151, 0.008380572311580181, -0.0003242947568651289, -0.02257699891924858, 0.036367811262607574, -0.0021575449500232935, 0.01042111311107874, -0.007457023952156305, -0.04797456040978432, -0.017534926533699036, -0.0035225858446210623, -0.013191756792366505, -0.035793714225292206, 0.00658339774236083, -0.01176899392157793, 0.02241475321352482, 0.03207456320524216, 0.020929589867591858, 0.022826606407761574, 0.007937518879771233, 0.008349371142685413, 0.015662871301174164, -0.013141835108399391, -0.01052719634026289, 0.010308790020644665, 0.0655469298362732, -0.01214340515434742, -0.03721647709608078, -0.03249889612197876, 0.014252588152885437, -0.009953099302947521, 0.034570638090372086, -0.010052941739559174, -0.0033541007433086634, 0.026583198457956314, 0.011781473644077778, 0.007962479256093502, -0.05905713513493538, 0.024087123572826385, 0.026433434337377548, -0.007375901564955711, 0.019456904381513596, -0.0032885789405554533, 0.019818834960460663, 0.06519748270511627, 0.001755052711814642, 0.01852087676525116, -0.017809495329856873, 0.03878900408744812, 0.016748663038015366, 0.01895768940448761, 0.016399212181568146, -0.027332020923495293, 0.006602118257433176, 0.0007289319182746112, -0.023463105782866478, -0.0047519030049443245, 0.017310280352830887, -0.013990500941872597, 0.020280608907341957, 0.02952856756746769, 0.05261726304888725, -0.022002901881933212, 0.03202464431524277, 0.023475585505366325, -0.010814244858920574, 0.021603528410196304, -0.003338500391691923, 0.009559967555105686, -0.016798585653305054, -0.02056765742599964, 0.00421524653211236, 0.022090263664722443, 0.010652000084519386, 0.02748178504407406, 0.004808064550161362, -0.006964049302041531, -0.024973230436444283, -0.016661301255226135, -0.014776764437556267, 0.011350900866091251, 0.01663633994758129, -0.014339950866997242, -0.014190186746418476, -0.02219010703265667, 0.004268288146704435, 0.0013041992206126451, -0.03599340096116066, -0.00023322700872085989, -0.005790893919765949, -0.020779823884367943, -0.010308790020644665, -0.008012400940060616, -0.017085634171962738, 0.03883892670273781, -0.018009182065725327, -0.01939450204372406, 0.00361930881626904, 0.0011770554119721055, -0.010945289395749569, -0.013965539634227753, 0.038589321076869965, -0.023001331835985184, -0.011675391346216202, -0.015700312331318855, -0.034221187233924866, -0.013778334483504295, 0.017572367563843727, -0.06155321002006531, 0.014002980664372444, -0.029603449627757072, 0.031949758529663086, 0.003043651580810547, 0.0012581777991726995, -0.01093904860317707, -0.006221467163413763, -0.0194319449365139, -0.00414972472935915]
metadata : {"source": "pydantic_ai_docs", "crawled_at": "2025-03-15T11:24:53.504305", "url_path": "/dependencies/", "chunk_size": 3962}
updated_dt: 2025-03-15T11:24:53.505831
---
```
fromdataclassesimport dataclass
importhttpx
frompydantic_aiimport Agent, ModelRetry, RunContext

@dataclass
classMyDeps:
  api_key: str
  http_client: httpx.AsyncClient

agent = Agent(
  'openai:gpt-4o',
  deps_type=MyDeps,
)

@agent.system_prompt
async defget_system_prompt(ctx: RunContext[MyDeps]) -> str:
  response = await ctx.deps.http_client.get('https://example.com')
  response.raise_for_status()
  return f'Prompt: {response.text}'

@agent.tool 
To pass RunContext to a tool, use the tool[](https://ai.pydantic.dev/api/agent/#pydantic_ai.agent.Agent.tool) decorator.
[](https://ai.pydantic.dev/dependencies/#__code_3_annotation_1)
async defget_joke_material(ctx: RunContext[MyDeps], subject: str) -> str:
  response = await ctx.deps.http_client.get(
    'https://example.com#jokes',
    params={'subject': subject},
    headers={'Authorization': f'Bearer {ctx.deps.api_key}'},
  )
  response.raise_for_status()
  return response.text

@agent.result_validator 
RunContext may optionally be passed to a result_validator[](https://ai.pydantic.dev/api/agent/#pydantic_ai.agent.Agent.result_validator) function as the first argument.
[](https://ai.pydantic.dev/dependencies/#__code_3_annotation_2)
async defvalidate_result(ctx: RunContext[MyDeps], final_response: str) -> str:
  response = await ctx.deps.http_client.post(
    'https://example.com#validate',
    headers={'Authorization': f'Bearer {ctx.deps.api_key}'},
    params={'query': final_response},
  )
  if response.status_code == 400:
    raise ModelRetry(f'invalid response: {response.text}')
  response.raise_for_status()
  return final_response

async defmain():
  async with httpx.AsyncClient() as client:
    deps = MyDeps('foobar', client)
    result = await agent.run('Tell me a joke.', deps=deps)
    print(result.data)
    #> Did you hear about the toothpaste scandal? They called it Colgate.

```

_(This example is complete, it can be run "as is" — you'll need to add`asyncio.run(main())` to run `main`)_
## Overriding Dependencies
When testing agents, it's useful to be able to customise dependencies.
While this can sometimes be done by calling the agent directly within unit tests, we can also override dependencies while calling application code which in turn calls the agent.
This is done via the [`override`](https://ai.pydantic.dev/api/agent/#pydantic_ai.agent.Agent.override) method on the agent.
joke_app.py```
fromdataclassesimport dataclass
importhttpx
frompydantic_aiimport Agent, RunContext

@dataclass
classMyDeps:
  api_key: str
  http_client: httpx.AsyncClient
  async defsystem_prompt_factory(self) -> str: 
Define a method on the dependency to make the system prompt easier to customise.
[](https://ai.pydantic.dev/dependencies/#__code_4_annotation_1)
    response = await self.http_client.get('https://example.com')
    response.raise_for_status()
    return f'Prompt: {response.text}'

joke_agent = Agent('openai:gpt-4o', deps_type=MyDeps)

@joke_agent.system_prompt
async defget_system_prompt(ctx: RunContext[MyDeps]) -> str:
  return await ctx.deps.system_prompt_factory() 
Call the system prompt factory from within the system prompt function.
[](https://ai.pydantic.dev/dependencies/#__code_4_annotation_2)

async defapplication_code(prompt: str) -> str: 
Application code that calls the agent, in a real application this might be an API endpoint.
[](https://ai.pydantic.dev/dependencies/#__code_4_annotation_3)
  ...
  ...
  # now deep within application code we call our agent
  async with httpx.AsyncClient() as client:
    app_deps = MyDeps('foobar', client)
    result = await joke_agent.run(prompt, deps=app_deps) 
Call the agent from within the application code, in a real application this call might be deep within a call stack. Note app_deps here will NOT be used when deps are overridden.
[](https://ai.pydantic.dev/dependencies/#__code_4_annotation_4)
  return result.data

```

_(This example is complete, it can be run "as is")_
test_joke_app.py