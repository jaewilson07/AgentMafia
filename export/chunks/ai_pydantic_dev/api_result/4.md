---
url: https://ai.pydantic.dev/api/result/
session_id: pydantic_ai_docs
chunk_number: 4
title: Streaming Response Handling in Pydantic API
summary: This section discusses the implementation of debouncing in the Pydantic API to efficiently handle long structured responses by reducing validation overhead. It explains how the response messages are streamed asynchronously, indicating whether each message is the last one, and includes a method to retrieve and validate the entire response.
embedding: [0.050886303186416626, 0.03665538877248764, -0.03551260381937027, -0.008975179865956306, 0.0092500951141119, 0.021022943779826164, -0.015556978061795235, 0.008996741846203804, 0.004355522338300943, 0.026995614171028137, 0.016678201034665108, 0.01440341118723154, -0.006700389087200165, -0.03866065293550491, 0.011729723773896694, 0.02891463227570057, 0.00881885550916195, 0.03631039708852768, 0.015050270594656467, 0.04993757605552673, 0.0352754220366478, -0.011438637040555477, -0.00711545767262578, -0.016688982024788857, 0.021659022197127342, 0.013239063322544098, -0.02386912703514099, 0.08792980760335922, -0.033981699496507645, -0.03240767493844032, -0.044978316873311996, -0.018381599336862564, 0.0013482983922585845, -0.027275921776890755, 0.034693244844675064, -0.008619406260550022, -0.012753918766975403, 0.052395641803741455, 0.012883290648460388, -0.03473636880517006, 0.030467096716165543, -0.04148527607321739, -0.023567257449030876, 0.000423827936174348, 0.008096528239548206, 0.024214118719100952, 0.024257242679595947, 0.008867369964718819, 0.05472433939576149, 0.04390021786093712, -0.0326017327606678, 0.0013098911149427295, 0.012969538569450378, 0.01405841950327158, -0.02768559940159321, -0.046660151332616806, -0.058389876037836075, 0.02264009229838848, -0.005304250400513411, -0.06468597799539566, 0.0026103488635271788, 0.002460762392729521, -0.028612764552235603, -0.021475745365023613, -0.004115645308047533, -0.0066680461168289185, -0.02105528675019741, 0.02071029506623745, -0.008635577745735645, 0.011880657635629177, -0.005328507628291845, -0.006209854036569595, -0.054249975830316544, -0.0004009183030575514, -0.018985334783792496, -0.004269274417310953, 0.04553892835974693, -0.012840166687965393, -0.004414818249642849, -0.04042873531579971, -0.01840316131711006, -0.025766581296920776, -0.05179190635681152, -0.015578540042042732, -0.01515808142721653, 0.001094271196052432, -0.03251548483967781, 0.0007250219932757318, -0.0072448295541107655, 0.002730287378653884, -0.022618530318140984, 0.02803059108555317, -0.035728223621845245, 0.025874391198158264, 0.036353521049022675, -0.027901219204068184, 0.0021791087929159403, -0.037755049765110016, 0.00504820141941309, -0.026930928230285645, 0.0660659447312355, 0.011557227931916714, -0.07413013279438019, 0.0024176384322345257, 0.03120020404458046, 0.015718692913651466, 0.00533389812335372, 0.020031090825796127, -0.048945724964141846, -0.05593181028962135, -0.008711044676601887, 0.047565754503011703, 0.037755049765110016, -0.021119972690939903, -0.005347374361008406, -0.021885422989726067, -0.02837558276951313, -0.01666742004454136, 0.014802307821810246, 0.028354020789265633, 0.0030591078102588654, 0.03553416579961777, -0.02803059108555317, 0.015891188755631447, -0.024127870798110962, -0.022187290713191032, 0.012204088270664215, -0.061365433037281036, -0.04036404937505722, -0.0011313308496028185, 0.06593657284975052, -0.008242071606218815, -0.0005120973219163716, -0.037043504416942596, -0.030596468597650528, 0.007056162226945162, -0.04709139093756676, 0.03076896443963051, -0.04211057350039482, 0.020074214786291122, -0.04976508021354675, -0.04752263054251671, 0.02345944754779339, 0.00630149245262146, 0.013109691441059113, 0.011621913872659206, -0.032472360879182816, -0.004282750654965639, -0.03531854599714279, 0.0021049894858151674, 0.01330374926328659, 0.023481009528040886, -0.0361379012465477, 0.040493421256542206, 0.01737896539270878, -0.00471129547804594, -0.009287828579545021, 0.015255110338330269, 0.012301117181777954, -0.033722955733537674, -0.03311922028660774, -0.002433809917420149, -0.012840166687965393, 0.004821800626814365, -0.013637960888445377, -0.027793409302830696, -0.0011515452060848475, -0.031954873353242874, 0.00019725854508578777, -0.002420333679765463, 0.04001905769109726, 0.016947725787758827, -0.02395537495613098, 0.019060801714658737, -0.014802307821810246, -0.04176558181643486, -0.08439364284276962, -0.025249093770980835, -0.002296352293342352, -0.0722326785326004, -0.032041121274232864, -0.028246210888028145, -0.04804012179374695, -0.04627203568816185, -0.026866242289543152, -0.007088505197316408, 0.030898336321115494, 0.02264009229838848, -0.008781122043728828, 0.02052701637148857, -0.054594967514276505, 0.06158105283975601, 0.0008180080913007259, -0.009541181847453117, -0.055198702961206436, -0.007530525792390108, 0.03189018741250038, 0.0224675964564085, 0.005312336143106222, 0.04213213548064232, 0.03848815709352493, 0.026413440704345703, 0.02395537495613098, -0.050023823976516724, 0.03482261672616005, -0.0255725234746933, -0.023286951705813408, 0.02503347396850586, -0.0608048215508461, -0.02803059108555317, -0.003406794974580407, -0.0007890341803431511, 0.014133886434137821, -0.020289834588766098, -0.011002006940543652, -0.011546446941792965, -0.0413990281522274, -0.0068998378701508045, 0.01771317794919014, 0.019179392606019974, 0.011028959415853024, 0.06313351541757584, 0.052309393882751465, 0.01878049597144127, -0.030639592558145523, 0.038466595113277435, -0.028699012473225594, -0.01655961014330387, -0.031847063452005386, 0.0018368122400715947, 0.006242197006940842, -0.034951988607645035, -0.008840417489409447, -0.009417200461030006, 0.006376959383487701, -0.06028733029961586, 0.0008415915071964264, -0.006937571335583925, 0.016688982024788857, -0.0387684628367424, -0.034412939101457596, -0.01639789529144764, -0.002689858665689826, 0.030790526419878006, -0.009120723232626915, -0.01216096431016922, -0.008403786458075047, -0.03973875194787979, 0.021917765960097313, 0.056708041578531265, 0.02660749852657318, -0.08823167532682419, 0.0008698916644789279, -0.011966906487941742, -0.03570666164159775, -0.03357202187180519, 0.004255798179656267, 0.0068028089590370655, -0.02449442446231842, 0.015114957466721535, 0.036073215305805206, 0.048341989517211914, -0.04752263054251671, 0.062271036207675934, 0.0003968754317611456, -0.015319796279072762, 0.038811586797237396, -0.046832647174596786, 0.039436884224414825, -0.003932368475943804, 0.0006074417615309358, 0.006959133315831423, 0.021637460216879845, -0.007859346456825733, -0.035555727779865265, 0.04245556518435478, 0.01825222745537758, -0.05174878239631653, 0.027426855638623238, -0.04118340462446213, 0.026197820901870728, 0.010937320999801159, 0.006797418463975191, 0.01649492420256138, -0.0326017327606678, -0.0009467062773182988, 0.025680333375930786, -0.035555727779865265, 0.02061326429247856, 0.02803059108555317, 0.04536643251776695, 0.018661905080080032, -0.011621913872659206, -0.056276801973581314, 0.024559110403060913, -0.037151314318180084, 0.035189174115657806, 0.020408425480127335, -0.021702146157622337, -0.026370316743850708, -0.034585434943437576, -0.0171849075704813, 0.003724834183230996, 0.012441270053386688, 0.02061326429247856, 0.02723279781639576, -0.029151814058423042, -0.0017492166953161359, 0.0023340857587754726, 0.0032962895929813385, 0.031157080084085464, 0.06330601125955582, -0.04873010516166687, 0.014424973167479038, -0.024020060896873474, -0.022101042792201042, 0.042865242809057236, -0.016613515093922615, 0.04635828360915184, -0.04644453153014183, 0.01717412658035755, 0.0038730730302631855, 0.0018529837252572179, 0.01053303387016058, 0.026219382882118225, 0.005541432183235884, -0.02714654989540577, -0.0018098597647622228, -0.018306132405996323, 0.004789457656443119, -0.031092394143342972, -0.04510768875479698, 0.002602263120934367, 0.0020281749311834574, -0.011034349910914898, -0.01551385410130024, -0.04288680478930473, -0.013422340154647827, 0.03305453434586525, 0.07175831496715546, 0.008791903033852577, 0.012322679162025452, -0.025400027632713318, -0.00841995794326067, -0.03268798068165779, 0.016106808558106422, 0.016699763014912605, 0.00770841259509325, -0.04191651567816734, 0.00762216467410326, 0.035986967384815216, 0.017670053988695145, 0.00018816208466887474, -0.017853330820798874, 0.03005741722881794, 0.0022114519961178303, -0.012495175004005432, 0.029583053663372993, 0.010867244563996792, -0.021615898236632347, -0.041204966604709625, -0.030704278498888016, 0.004943086765706539, 0.009886173531413078, -0.0017802120419219136, 0.04073060303926468, -0.05623367801308632, -0.0012236430775374174, -0.0432102344930172, -0.0033825377468019724, 0.08115933835506439, 0.016613515093922615, 0.04131277650594711, -0.009147675707936287, -0.02934587188065052, -0.0024392004124820232, 0.007331077475100756, 0.0370003804564476, 0.028504954650998116, 0.02820308692753315, -0.006150558590888977, 0.026046887040138245, -0.015125738456845284, -0.025356903672218323, -0.010026326403021812, 0.06179667264223099, -0.03339952602982521, 0.010921149514615536, 0.01414466742426157, 0.003665538737550378, 0.008985960856080055, -0.015729473903775215, 0.0003901373129338026, 0.03605165332555771, 0.03859596699476242, 0.025615647435188293, -0.022898836061358452, 0.018273789435625076, 0.05140379071235657, -0.028418706730008125, 0.08184932172298431, 0.037043504416942596, -0.00868948269635439, 0.03816472738981247, 0.002773411339148879, 0.03950157016515732, 0.039889685809612274, -0.016721324995160103, 0.025011911988258362, -0.0013543626992031932, 0.023481009528040886, -0.009648991748690605, 0.006932180840522051, -0.037668801844120026, -0.027168111875653267, 0.0045468853786587715, -0.015265891328454018, 0.03249392285943031, 0.01569713093340397, 0.06999023258686066, -0.02309289388358593, -0.0679202750325203, -0.01243048906326294, -0.0038434253074228764, 0.026995614171028137, 0.06550533324480057, 0.04618578776717186, -0.061667300760746, -0.006506331264972687, -0.011363170109689236, -0.03322703018784523, -0.0277502853423357, 0.037884421646595, -0.012096278369426727, -0.004433684982359409, 0.028354020789265633, -0.01842472329735756, -0.03232142701745033, -0.029022442176938057, -0.03762567788362503, 0.039803437888622284, 0.0009453586535528302, -0.03745318204164505, 0.02380443923175335, -0.05515557900071144, 0.03801379352807999, -0.011082864366471767, 0.008479253388941288, 0.030380848795175552, -0.02292039804160595, 0.012214869260787964, 0.008452300913631916, -0.006075091660022736, -0.05153316259384155, -0.015535416081547737, -0.012505955994129181, 0.052223145961761475, 0.005177573766559362, 0.06360787898302078, -0.06563470512628555, -0.012279555201530457, -0.023373199626803398, -0.032752666622400284, 0.013282187283039093, -0.05386185646057129, -0.037065066397190094, 0.009821487590670586, 0.018187541514635086, -0.0002526796015445143, 0.048945724964141846, 0.02343788556754589, 0.013325311243534088, -0.025270655751228333, 0.03939376026391983, 0.005463270004838705, -0.022014794871211052, 0.04476269707083702, 0.012020811438560486, 0.008010280318558216, 0.006096653640270233, -0.007649117149412632, -0.028440268710255623, -0.06123606115579605, 0.0035792908165603876, -0.02203635685145855, -0.005536041688174009, 0.010732482187449932, -0.07365576922893524, -0.025335341691970825, -0.01806895062327385, 0.015707911923527718, 0.02565877139568329, -0.014543564058840275, -0.007239439059048891, 0.0017276547150686383, -0.01666742004454136, -0.04873010516166687, -0.0077946605160832405, 0.058734867721796036, -0.01198846846818924, -0.029949607327580452, -0.006716560572385788, 0.0008564154268242419, 0.027513103559613228, 0.03426200523972511, -0.011050521396100521, 0.000956139643676579, -0.01620383746922016, 0.010020935907959938, 0.029561491683125496, 0.0001762019091984257, -0.015707911923527718, 0.027469979599118233, 0.01939501240849495, -0.007584431208670139, 0.00819894764572382, -0.00889432244002819, -0.016990849748253822, -0.027103425934910774, 0.01956750825047493, -0.008091137744486332, -0.026370316743850708, 0.04280055686831474, -0.00934712402522564, -0.0326017327606678, -0.006145168095827103, 0.0012916980776935816, 0.013282187283039093, 0.02272634021937847, 0.046487655490636826, 0.05153316259384155, 0.018823619931936264, 0.006075091660022736, 0.012150183320045471, 0.007525135297328234, -0.03120020404458046, 0.0009231228032149374, 0.013163596391677856, -0.011568008922040462, 0.003069888800382614, -0.011535665951669216, 0.005703147035092115, -0.024084746837615967, -0.027362169697880745, 0.005282688420265913, 0.008155823685228825, 0.01441419217735529, -0.023157579824328423, -0.003164222463965416, -0.004468723200261593, -0.003932368475943804, -0.02079654298722744, 0.028957756236195564, -0.025141283869743347, -0.018791276961565018, 0.024817854166030884, -0.019847813993692398, -0.021044505760073662, 0.0054551842622458935, -0.008188166655600071, -0.0015497682616114616, -0.024472862482070923, 0.022273538634181023, 0.011740504764020443, -0.048255741596221924, 0.03208424523472786, 0.036526016891002655, 0.022769464179873466, -0.002827316289767623, 0.03674163669347763, 0.0207210760563612, -0.02184229902923107, -0.006274539977312088, -0.015147300437092781, -0.013077348470687866, -0.01781020686030388, 0.010813339613378048, -0.021993232890963554, -0.06330601125955582, 0.04506456479430199, -0.006037358194589615, -0.05481058731675148, -6.0516766097862273e-05, -0.0006269823061302304, -0.0030887555330991745, 0.02591751515865326, 0.010818730108439922, 0.01778864488005638, -0.007358029950410128, -0.01655961014330387, 0.03223517909646034, 0.01524432934820652, -0.003654757747426629, 0.02238134853541851, -0.03991124778985977, -0.004808324389159679, -0.004819105379283428, -0.016850696876645088, -0.03296828642487526, 0.022144166752696037, 0.043123986572027206, 0.014090762473642826, -0.02580970525741577, 0.020408425480127335, -0.009460324421525002, 0.008279805071651936, 0.016246961429715157, -0.01141707506030798, -0.03859596699476242, 0.0058432999067008495, 0.010748653672635555, -0.0004605506837833673, -0.0013429078971967101, -0.022769464179873466, -0.0026373013388365507, 0.01584806479513645, -0.033270154148340225, 0.042520251125097275, 0.013098910450935364, -0.006479378789663315, 0.012883290648460388, 0.015901969745755196, 0.022963522002100945, -0.0005259104655124247, 0.01550307311117649, -0.010225774720311165, -0.026564374566078186, 0.009082989767193794, -0.025529399514198303, 0.01584806479513645, -0.009099161252379417, 0.02703873999416828, 0.021896203979849815, 0.026478126645088196, -0.026650622487068176, -0.025486275553703308, 0.03240767493844032, 0.01831691339612007, -0.05330124497413635, 0.005713928025215864, 0.021012162789702415, 0.06106356531381607, 0.02354569546878338, 0.03120020404458046, -0.0031157080084085464, -0.03268798068165779, -0.025874391198158264, 0.005449793767184019, 0.0025941773783415556, 0.0024958006106317043, 0.022338224574923515, -0.03747474402189255, 0.03624571114778519, -0.0041776360012590885, 0.011568008922040462, -0.02617625892162323, -0.03298984840512276, 0.0038326443172991276, 0.004242321942001581, -0.0027626303490251303, 0.01123379822820425, 0.003204651176929474, -0.039609380066394806, 0.02281258814036846, -0.04873010516166687, 0.0176161490380764, 0.01568634994328022, -0.003406794974580407, 0.03674163669347763, 0.019621413201093674, 0.007525135297328234, 0.003094146028161049, 0.05338749289512634, -0.0277718473225832, 0.017335841432213783, 0.008932055905461311, -0.0012532908003777266, -0.02563720941543579, -0.003121098503470421, 0.04532330855727196, -0.010279679670929909, 0.015007146634161472, -0.031415823847055435, -0.023847563192248344, 0.012991100549697876, -0.04506456479430199, 0.028181524947285652, 0.0038434253074228764, 0.0026979444082826376, 0.044288333505392075, 0.011028959415853024, -0.042434003204107285, 0.0009723111288622022, -0.004083302337676287, 0.0215835552662611, 0.021033724769949913, -0.005069763399660587, 0.031868625432252884, 0.015125738456845284, -0.006269149482250214, -0.011179893277585506, -0.02723279781639576, -0.001729002338834107, 0.019632194191217422, 0.009012913331389427, 0.009713677689433098, -0.014295601285994053, 0.006139777600765228, 0.008603234775364399, -0.004972734488546848, -0.021119972690939903, -0.005223392974585295, 0.023243827745318413, 0.014543564058840275, -0.026456564664840698, -0.04101090878248215, -0.011945344507694244, 0.006867494899779558, 0.0043016173876821995, -0.019351888447999954, 0.019157830625772476, -0.0001381315232720226, -0.02149730734527111, 0.01710944063961506, 0.023502571508288383, -0.03402482345700264, 0.029281185939908028, 0.0224675964564085, 0.019459698349237442, 0.037043504416942596, -0.008651749230921268, 0.011665037833154202, 0.0038434253074228764, -0.028849946334958076, -0.030273038893938065, -0.017831768840551376, -0.01814441755414009, 0.004180331248790026, -0.003231603652238846, -0.0015713302418589592, -0.03904876857995987, -0.026370316743850708, 0.004147988278418779, 0.01737896539270878, 0.006058920174837112, -0.0317176915705204, -0.02369662933051586, 0.03320546820759773, -0.018478628247976303, 0.0028785259928554296, -0.011945344507694244, 0.004633133299648762, -0.02600376307964325, 0.01912548765540123, 0.027642475441098213, -0.0014325248776003718, 0.03022991493344307, -0.009616648778319359, -0.052740633487701416, 0.004439075477421284, -0.031157080084085464, -0.003134574741125107, -0.04735013470053673, 0.02414943277835846, -0.0003685753035824746, 0.007363420445472002, -0.01947047933936119, 0.04081685096025467, 0.006748903542757034, -0.023071331903338432, -0.008732606656849384, -0.008667920716106892, 0.012387365102767944, 0.03493042662739754, 0.051878154277801514, -0.013594836927950382, 0.0018637647153809667, 0.01859721913933754, 0.009659772738814354, -0.014371068216860294, 0.015621664002537727, 0.013497807085514069, 0.008382224477827549, -0.004077911842614412, 0.014575907029211521, 0.021206220611929893, -0.01008562184870243, 0.024515986442565918, 0.03866065293550491, -0.017907235771417618, -0.0021588944364339113, -0.010646234266459942, -0.01351936999708414, 0.0007836436852812767, 0.006727341562509537, -0.05403435230255127, -0.007584431208670139, -0.08840417116880417, 0.0030456315726041794, 0.018888305872678757, -0.011266141198575497, 0.005972672253847122, -0.012225650250911713, -0.005503698717802763, 0.024710044264793396, -0.0048514483496546745, 0.0017936882795765996, 0.011686599813401699, 0.0002808112767525017, -0.0012876552063971758, -0.05192127823829651, 0.03208424523472786, 0.02017124369740486, 0.006290711462497711, -0.03842347115278244, 0.023933812975883484, -0.05261126160621643, 0.010867244563996792, -0.014101543463766575, -0.05808800831437111, 0.0207210760563612, -0.007530525792390108, -0.03488730266690254, 0.02053779736161232, -0.03654757887125015, 0.028224648907780647, -0.02660749852657318, -0.02326538972556591, 0.018392380326986313, 0.023136017844080925, -0.01524432934820652, -0.03156675770878792, 0.023373199626803398, 0.0013961390359327197, 0.008425348438322544, 0.00621524453163147, -0.023071331903338432, 0.011805190704762936, -0.011665037833154202, -0.014392630197107792, -0.01710944063961506, 0.035728223621845245, -0.0008638273575343192, -0.03631039708852768, -0.009907735511660576, -0.028526516631245613, 0.01965375617146492, -0.012505955994129181, -0.041118718683719635, -0.039350636303424835, 0.0011758024338632822, 0.05498308315873146, 0.0476088784635067, -0.035641975700855255, -0.020031090825796127, -0.0022370568476617336, 0.02820308692753315, -0.0044768089428544044, 0.018457066267728806, 0.03329171612858772, -0.01920095458626747, 0.030165227130055428, -0.010915759019553661, 0.00951961986720562, 0.011999249458312988, -0.005328507628291845, -0.006700389087200165, 0.046142663806676865, 0.014220134355127811, -0.00947110541164875, -0.013034224510192871, 0.007390372920781374, 0.017918016761541367, 0.016818353906273842, 0.020591702312231064, -0.03827253729104996, 0.028979318216443062, -0.0012782218400388956, -0.0005707190139219165, 0.015707911923527718, 0.005201830994337797, -0.015233548358082771, 0.0074388873763382435, -0.0030887555330991745, -0.008845807984471321, 0.023286951705813408, 0.04506456479430199, 0.026133134961128235, 0.023200703784823418, 0.002540272194892168, -0.0010430613765493035, -0.04700514301657677, -0.02925962395966053, 0.028763698413968086, -0.040234677493572235, 0.01735740341246128, -0.02019280567765236, 0.029841797426342964, 0.024882540106773376, 0.005509089212864637, -0.0034687856677919626, -0.004239626694470644, 0.0006411323556676507, -0.024084746837615967, 0.013142034411430359, 0.0036493672523647547, 0.01441419217735529, -0.00323699414730072, -0.001229707384482026, 0.03633195906877518, 0.03120020404458046, -0.008414567448198795, -0.0027626303490251303, 0.06632468849420547, -0.0440942756831646, -0.0035253858659416437, 0.020225148648023605, -0.03419731929898262, 0.02891463227570057, -0.02317914180457592, -0.028159962967038155, -0.005223392974585295, 0.020117338746786118, -0.013767332769930363, -0.017519120126962662, 0.0026251727249473333, -0.021346373483538628, -0.0011124641168862581, 0.021195439621806145, -0.0069267903454601765, 0.013163596391677856, -0.008436129428446293, -0.008048013783991337, -0.011665037833154202, -0.010290460661053658, -0.034865740686655045, -0.0414421521127224, 0.0022640093229711056, -0.012980319559574127, 0.038294099271297455, -0.01268923282623291, -0.04288680478930473, -0.027620913460850716, 0.001256659859791398, 0.03219205513596535, -0.028052153065800667, 0.0027545446064323187, 0.03367983177304268, -0.022316662594676018, 0.005589946638792753, -0.00013434131687972695, -0.0033771470189094543, -0.0036197195295244455, -0.03756099194288254, -0.0034822619054466486, -0.0007101981318555772, -0.0029324309434741735, 0.0009318823576904833, 0.027814971283078194, -0.0072178770788013935, -0.007234048563987017, 0.0028785259928554296, -0.04661702737212181, -0.03197643533349037, -0.00982687808573246, -0.04601329192519188, 0.053646236658096313, -0.04812636971473694, 0.004703209735453129, 0.012010030448436737, -0.002633258467540145, -0.0006084524793550372, 0.020483892410993576, 0.015977436676621437, 0.007034600246697664, 0.00289739272557199, 0.04946321249008179, 0.010915759019553661, 0.04213213548064232, 0.009530400857329369, 0.020214367657899857, 0.015589321032166481, -0.009454933926463127, -0.019696880131959915, 0.03691413253545761, -0.038380347192287445, -0.003191174939274788, 0.01728193648159504, 0.040407173335552216, -0.016451800242066383, 0.02574501931667328, -0.028095277026295662, 0.02492566406726837, 0.025766581296920776, -0.0012303811963647604, -0.027879657223820686, 0.02229510061442852, 0.010489909909665585, 0.046573903411626816, 0.027814971283078194, -0.024710044264793396, 0.010409052483737469, 0.024731606245040894, -0.0025685722939670086, 0.0027949733193963766, -0.045797672122716904, 0.0038488158024847507, -0.020128119736909866, 0.024429738521575928, 0.015309015288949013, 0.007180143613368273, -0.017141783609986305, -0.012010030448436737, 0.012829385697841644, -0.024127870798110962, -0.017864111810922623, -0.013778113760054111, -0.01957828924059868, 0.005557603668421507, -0.028957756236195564, 0.043404292315244675, -0.02768559940159321, 0.005094020627439022, 0.004018616396933794, 0.031243328005075455, 0.03907033056020737, -0.007525135297328234, 0.020397644490003586, -0.010538424365222454, -0.03911345452070236, 0.014964022673666477, 0.030790526419878006, -0.036784760653972626, -0.011492541991174221, 0.022101042792201042, 0.018047388643026352, 0.010452176444232464, -0.009508838877081871, 0.05235251784324646, -0.026025325059890747, -0.0476088784635067, 0.021260125562548637, 0.008306757546961308, 0.01441419217735529, 0.0010430613765493035, -0.005751661490648985, 0.024365052580833435, -0.009352514520287514, 0.04025623947381973, -0.015837283805012703, 0.037841297686100006, 0.02027905359864235, -0.03764723986387253, -0.02096903882920742, 0.016688982024788857, 0.00022202114632818848, 0.024214118719100952, 0.005398584064096212, 0.024343490600585938, -0.015621664002537727, 0.020289834588766098, 0.0007337815477512777, -0.021809956058859825, -0.022963522002100945, 0.0034283569548279047, 0.0022114519961178303, 0.0037032722029834986, -0.048341989517211914, -0.017400527372956276, 0.0014648678479716182, 0.03805691748857498, -0.0016508400440216064, -0.003301680088043213, -0.009142285212874413, -0.029130252078175545, 0.015082613565027714, 0.011050521396100521, -0.02257540635764599, -0.013540931977331638, -0.0334857739508152, -0.02757778950035572, 0.004789457656443119, -0.04025623947381973, 0.01876971498131752, -0.040493421256542206, 0.0039835781790316105, 0.005161401815712452, 0.012031592428684235, -0.0036305005196481943, -0.019157830625772476, -0.008366052992641926, -0.008775731548666954, -0.012624546885490417, 0.05588868632912636, -0.007778489030897617, 0.020332958549261093, 0.020117338746786118, -0.07115457952022552, 0.007492792326956987, 0.02908712811768055, -0.008312148042023182, 0.005681585054844618, 0.011708161793649197, -0.003951235208660364, -0.018931429833173752, -0.020031090825796127, -0.020570140331983566, -0.040946222841739655, -0.01700163073837757, 0.04532330855727196, 0.024170994758605957, 0.0033852329943329096, 0.02184229902923107, 0.042089011520147324, -0.017432870343327522, 0.00012878236884716898, 0.01788567379117012, -0.021432621404528618, 0.022014794871211052, 0.013573274947702885, 0.01533057726919651, 0.01370264682918787, -0.020397644490003586, -0.006684217602014542, -0.009088380262255669, -0.00040462426841259, 0.01030663214623928, 0.0053177266381680965, -0.00702920975163579, 0.03316234424710274, 0.024084746837615967, -0.025680333375930786, -0.023416323587298393, -0.03219205513596535, -0.016904601827263832, -0.009972421452403069, -0.03387388959527016, -0.017411308363080025, -0.038811586797237396, 0.007126238662749529, 0.0010787734063342214, 0.006064310669898987, 0.013605617918074131, 0.027103425934910774, 0.02723279781639576, 0.01885596290230751, 0.0023987716995179653, 0.04202432557940483, -0.0012829385232180357, 0.04105403274297714, 0.014726840890944004, 0.004738247953355312, -0.03288203850388527, -0.005681585054844618, -0.004363608080893755, 0.013174377381801605, 0.011481761001050472, 0.006290711462497711, 0.01348702609539032, -0.01709865964949131, 0.030898336321115494, 0.03357202187180519, 0.01004788838326931, 0.026154696941375732, 0.0458407960832119, 0.003379842499271035, 0.022769464179873466, 0.019545946270227432, 0.03850971907377243, 0.014511221088469028, -0.012171745300292969, -0.023675067350268364, 0.012214869260787964, 0.0006424799794331193, -0.005449793767184019, 0.06744591146707535, 0.03385232761502266, 0.0017802120419219136, -0.0055252606980502605, -0.035814471542835236, -0.025529399514198303, -0.019847813993692398, -0.016365552321076393, -0.017659272998571396, -0.04150683805346489, 0.00323699414730072, 0.026025325059890747, 0.008452300913631916, 0.009082989767193794, -0.02326538972556591, 0.01701241172850132, -0.00934712402522564, 0.015104175545275211, 0.013066567480564117, -0.025507837533950806, 0.014888555742800236, -0.001932493643835187, 0.015104175545275211, 0.01177284773439169, 0.008748779073357582, -0.02274790219962597, 0.01841394230723381, -0.00955735333263874, 0.02089357189834118, 0.039523132145404816, -0.012700013816356659, 0.0011360475327819586, 0.01939501240849495, -0.004713990725576878, 0.0076706791296601295, 0.019179392606019974, 0.0067381225526332855, -0.05541432276368141, 0.003290899097919464, -0.002406857442110777, -0.015050270594656467, 0.0176161490380764, 0.003652062499895692, 0.00542014604434371, -0.03294672444462776, -0.02837558276951313, -0.015589321032166481, 0.006306882947683334, 0.0019432746339589357, -0.003980882931500673, 0.044547077268362045, 0.03430512920022011, 0.008091137744486332, -0.004873010329902172, -0.036957256495952606, 0.006409302353858948, -0.016893820837140083, 0.026284068822860718, 0.01965375617146492, -0.03245079889893532, 0.013174377381801605, -0.015718692913651466, 0.02574501931667328, 0.025184407830238342, 0.010004764422774315, -0.013918266631662846, 0.009018303826451302, 0.01022038422524929, 0.002635953715071082, -0.021745270118117332, -0.009325562044978142, -0.0027222016360610723, 0.009896954521536827, 0.04161464795470238, 0.02986335940659046, 0.01957828924059868, -0.025594085454940796, -0.015114957466721535, -0.013454683125019073, -0.015632444992661476, -0.004738247953355312, 0.039091892540454865, 0.003231603652238846, -0.013325311243534088, -0.03100614622235298, -0.014985584653913975, -0.001521468162536621, -0.00588103337213397, 0.014166229404509068, 0.02483941614627838, -0.00227883318439126, -0.02503347396850586, 0.006953742820769548, 0.001505296677350998, 0.027620913460850716, -0.00022505329980049282, -0.014392630197107792, -0.0071478006429970264, -0.02908712811768055, -0.004121035803109407, -0.020235929638147354, -0.033722955733537674, 0.002363733481615782, 0.031502071768045425, 0.019006896764039993, -0.002117118099704385, -0.0502394437789917, -0.000784317497164011, -0.02292039804160595, -0.020667169243097305, 0.0017626929329708219, 0.006010405719280243, 0.013907485641539097, 0.018748153001070023, -0.04122652858495712, -0.009622039273381233, 0.017519120126962662, 0.04004061967134476, -0.027275921776890755, -0.01902845874428749, 0.0295183677226305, 0.02880682237446308, -0.02106606774032116, -0.005519870202988386, -0.0079294228926301, -0.011578789912164211, 0.021615898236632347, -0.001421743887476623, -0.005740880500525236, -0.03156675770878792, -0.012150183320045471, 0.020731857046484947, -0.008037232793867588, -0.007579040713608265, -0.027081863954663277, -0.0037787393666803837, 0.029992731288075447, 0.030510220676660538, 0.015114957466721535, 0.03753942996263504, 0.03549104183912277, 0.04786762595176697, -0.01939501240849495, -0.004994296468794346, 0.0035065191332250834, 0.05049818754196167, 0.008004889823496342, 0.021648241207003593, 0.00015767206787131727, -0.016602734103798866, 0.009535791352391243, 0.010748653672635555, -0.01494246069341898, -0.003056412562727928, 0.04096778482198715, -0.008888931944966316, -0.005681585054844618, -0.010042497888207436, 0.002564529422670603, -0.016710544005036354, -0.023308513686060905, -0.010258117690682411, 0.025227531790733337, -0.016333209350705147, -0.033701393753290176, 0.01966453716158867, 0.0005006425199098885, 0.02363194338977337, 0.015934312716126442, 0.008646358735859394, 0.027448417618870735, 0.008166604675352573, 0.0025281435810029507, -0.0012869813945144415, -0.024623796343803406, 0.01895299181342125, 0.0052341739647090435, -0.004732857458293438, -0.0458407960832119, 0.028440268710255623, 0.010382100008428097, -0.021885422989726067, -0.0030887555330991745, 0.006479378789663315, 0.010425223968923092, -0.028504954650998116, 0.023416323587298393, 0.0031130127608776093, 0.00355772883631289, 0.03145894780755043, 0.0009217751794494689, -0.006091263145208359, 0.00784317497164011, 0.011956125497817993, 0.007131629157811403, -0.01039827149361372, -0.01746521331369877, 0.002069951267912984, -0.014888555742800236, -0.01502870861440897, -0.01533057726919651, 0.0018745457055047154, -0.011600351892411709, -0.005129058845341206, 0.020160462707281113, -0.013907485641539097, 0.04170089587569237, -0.01824144646525383, -0.027168111875653267, -0.02846183069050312, 0.059899214655160904, -0.026650622487068176, 0.029410557821393013, 0.026111572980880737, 0.00018580372852738947, 0.041118718683719635, 0.006053529679775238, 0.016246961429715157, 0.01441419217735529, 0.010651624761521816, -0.02193932794034481, 0.03633195906877518, -0.006193682551383972, 0.00920158065855503, -0.01902845874428749, -0.06063232570886612, 0.009503448382019997, -0.0127754807472229, 0.0001333305990556255, -0.026866242289543152, 0.021702146157622337, -0.005924157332628965, -0.03240767493844032, 0.013864361681044102, -0.00022134733444545418, -0.01114755030721426, 0.0037437009159475565, -0.0255725234746933, 0.005778613965958357, -0.030273038893938065, -0.02371819131076336, 0.04213213548064232, 0.007428106386214495, -0.03654757887125015, -0.00044336848077364266, -0.025486275553703308, -0.006344616413116455, 0.020505454391241074, 0.0012128620874136686, -0.01475918386131525, 0.02634875476360321, -0.0028327067848294973, -0.021637460216879845, -0.0072178770788013935, 0.00040395045652985573, 0.02150808833539486, 0.0033528897911310196, 0.015449168160557747, -0.005562994163483381, -0.002463457640260458, 0.03234298899769783, -0.021022943779826164, 0.006565626710653305, -0.000913015624973923, 0.0007000909536145627, -0.01048451941460371, 0.03232142701745033, -0.015147300437092781, 0.008387614972889423, -0.034240443259477615, -0.0002533534134272486, -0.032666418701410294, -0.028397144749760628, -0.040234677493572235, -0.014155448414385319, -0.0396740660071373, 0.0008469820604659617, 0.0016737496480345726, -0.020667169243097305, 0.0005127711337991059, -0.014489659108221531, 0.009417200461030006, 0.007789270021021366, -0.004832581616938114, -0.026391878724098206, -0.037668801844120026, 0.01612837053835392, 0.04735013470053673, -0.002396076451987028, -0.03648289293050766, 0.0405581071972847, -0.010015545412898064, -0.004352827090770006, -0.009503448382019997, -0.012268774211406708, -0.02589595317840576, -0.0003679014916997403, -0.007740755565464497, -0.02669374644756317, 0.0046708667650818825, 0.020074214786291122, -0.0035199953708797693, -0.004007835406810045, 0.036353521049022675, 0.006015796214342117, 0.04236931726336479, 0.016850696876645088, -0.01972922310233116, 0.020494673401117325, 0.014187791384756565, 0.01022038422524929, 3.350110273458995e-05, -0.010107183828949928, -0.04036404937505722, 0.024817854166030884, -0.025788143277168274, 0.01533057726919651, 0.035124488174915314, -0.028957756236195564, -0.04152840003371239, -0.013508588075637817, -0.011751285754144192, -0.008290586061775684, 0.0414205901324749, 0.0440942756831646, -0.023739753291010857, 0.006975304801017046, 0.0018139026360586286, 0.006371568888425827, -0.000583184533752501, -0.011815971694886684, 0.010479128919541836, 0.008204338140785694, 0.03620258718729019, 0.009088380262255669, 0.052050650119781494, -0.03074740245938301, 0.009007522836327553, 0.0007735365070402622, 0.020429987460374832, 0.024710044264793396, 0.016883039847016335, -0.0061990730464458466, 0.019944842904806137, -0.0030483268201351166, 0.04096778482198715, 0.005627680104225874, -0.01840316131711006, 0.0031264889985322952, -0.02142184041440487, -0.007212486583739519, -0.010608500801026821, 0.04267118498682976, 0.006376959383487701, 0.0008968441397882998, 0.012732356786727905, 0.02503347396850586, 0.009972421452403069, 0.04012686759233475, 0.009180018678307533, 0.02142184041440487]
metadata : {"source": "pydantic_ai_docs", "crawled_at": "2025-03-15T11:17:20.079217", "url_path": "/api/result/", "chunk_size": 3718}
updated_dt: 2025-03-15T11:17:20.079217
---
`None` means no debouncing.
        Debouncing is particularly important for long structured responses to reduce the overhead of
        performing validation as each token is received.
    Returns:
      An async iterable of the structured response message and whether that is the last message.
    """
    # if the message currently has any parts with content, yield before streaming
    msg = self._stream_response.get()
    for part in msg.parts:
      if part.has_content():
        yield msg, False
        break
    async for msg in self._stream_response_structured(debounce_by=debounce_by):
      yield msg, False
    msg = self._stream_response.get()
    yield msg, True
    await self._marked_completed(msg)
  async defget_data(self) -> ResultDataT:
"""Stream the whole response, validate and return it."""
    usage_checking_stream = _get_usage_checking_stream_response(
      self._stream_response, self._usage_limits, self.usage
    )
    async for _ in usage_checking_stream:
      pass
    message = self._stream_response.get()
    await self._marked_completed(message)
    return await self.validate_structured_result(message)
  defusage(self) -> Usage:
"""Return the usage of the whole run.
    !!! note
      This won't return the full usage until the stream is finished.
    """
    return self._initial_run_ctx_usage + self._stream_response.usage()
  deftimestamp(self) -> datetime:
"""Get the timestamp of the response."""
    return self._stream_response.timestamp
  async defvalidate_structured_result(
    self, message: _messages.ModelResponse, *, allow_partial: bool = False
  ) -> ResultDataT:
"""Validate a structured result message."""
    if self._result_schema is not None and self._result_tool_name is not None:
      match = self._result_schema.find_named_tool(message.parts, self._result_tool_name)
      if match is None:
        raise exceptions.UnexpectedModelBehavior(
          f'Invalid response, unable to find tool: {self._result_schema.tool_names()}'
        )
      call, result_tool = match
      result_data = result_tool.validate(call, allow_partial=allow_partial, wrap_validation_errors=False)
      for validator in self._result_validators:
        result_data = await validator.validate(result_data, call, self._run_ctx)
      return result_data
    else:
      text = '\n\n'.join(x.content for x in message.parts if isinstance(x, _messages.TextPart))
      for validator in self._result_validators:
        text = await validator.validate(
          text,
          None,
          self._run_ctx,
        )
      # Since there is no result tool, we can assume that str is compatible with ResultDataT
      return cast(ResultDataT, text)
  async def_validate_text_result(self, text: str) -> str:
    for validator in self._result_validators:
      text = await validator.validate(
        text,
        None,
        self._run_ctx,
      )
    return text
  async def_marked_completed(self, message: _messages.ModelResponse) -> None:
    self.is_complete = True
    self._all_messages.append(message)
    await self._on_complete()
  async def_stream_response_structured(
    self, *, debounce_by: float | None = 0.1
  ) -> AsyncIterator[_messages.ModelResponse]:
    async with _utils.group_by_temporal(self._stream_response, debounce_by) as group_iter:
      async for _items in group_iter:
        yield self._stream_response.get()
  async def_stream_response_text(
    self, *, delta: bool = False, debounce_by: float | None = 0.1
  ) -> AsyncIterator[str]:
"""Stream the response as an async iterable of text."""
    # Define a "merged" version of the iterator that will yield items that have already been retrieved
    # and items that we receive while streaming.