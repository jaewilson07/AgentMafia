---
url: https://ai.pydantic.dev/examples/stream-markdown/
session_id: pydantic_ai_docs
chunk_number: 1
title: Stream Markdown Example
summary: This document provides an example of streaming markdown output using the 'rich' library in the terminal. It demonstrates how to stream text responses from OpenAI and Google Gemini models, given the appropriate environment settings and dependencies.
embedding: [0.01031634584069252, 0.02226782962679863, 0.007901085540652275, -0.020183339715003967, 0.020932259038090706, -0.027709966525435448, 0.0020127170719206333, 0.007264504674822092, -0.015777206048369408, 0.023703254759311676, 0.0369466207921505, -0.0031782209407538176, -0.01676328107714653, -0.024726776406168938, 0.031454555690288544, -0.0013535133330151439, -0.007351878564804792, 0.009617355652153492, -0.00486484682187438, 0.054671015590429306, 0.044410839676856995, 0.005117606371641159, 0.03814489021897316, 0.059613876044750214, -0.014591419138014317, 0.01662597991526127, -0.040466535836458206, 0.0379951074719429, 0.02588759921491146, -0.022991783916950226, 0.00019395806884858757, -0.010416201315820217, 0.012244809418916702, -0.06745254993438721, 0.006877563893795013, -0.003476227866485715, 0.01839841902256012, -0.01970902644097805, -0.004958461504429579, 0.02603738382458687, 0.023066675290465355, -0.06915009766817093, 0.021493947133421898, 0.019047481939196587, 0.010790660046041012, 0.023166529834270477, 0.010091669857501984, -0.0011171360965818167, 0.056268706917762756, 0.052823685109615326, -0.04630809649825096, 0.011002853512763977, -0.029532333835959435, -0.030630746856331825, -0.015540048480033875, -0.012756570242345333, -0.028034497052431107, 0.0458088181912899, -0.004995907191187143, -0.05841560661792755, 0.0220181904733181, -0.030705638229846954, -0.042388759553432465, 0.034075770527124405, -0.05596914142370224, -0.018123816698789597, -0.09031951427459717, -0.014117104932665825, -0.028184281662106514, 0.008088314905762672, 0.011801700107753277, 0.004924135748296976, -0.031629305332899094, -0.01166439801454544, -0.037695541977882385, -0.045009974390268326, -0.05202483758330345, 0.027934642508625984, -0.0055139088071882725, -0.04613335058093071, 0.045259613543748856, 0.02436479926109314, -0.048205357044935226, -0.01910989172756672, -0.022080600261688232, 0.006428212858736515, -0.07509151101112366, 0.0019549881108105183, -0.025563068687915802, -0.0037321080453693867, -0.016064291819930077, 0.0007551590097136796, -0.03165426850318909, 0.028633631765842438, 0.1026516929268837, 0.05132584646344185, -0.012687919661402702, -0.027260616421699524, 0.016888100653886795, 0.04276321828365326, 0.05841560661792755, -0.022143010050058365, -0.05217462033033371, -0.015552530996501446, 0.03327692300081253, 0.010977890342473984, 0.03839452937245369, -0.0034138180781155825, -0.02301674708724022, -0.020520353689789772, -0.07229555398225784, 0.042388759553432465, 0.030231323093175888, -0.016563570126891136, -0.029432477429509163, -0.01200141105800867, 0.008107037283480167, -0.03689669445157051, -0.01015408057719469, -0.019372012466192245, -0.035423822700977325, 0.007645204663276672, -0.004290676210075617, -0.012300978414714336, -0.002961346646770835, -0.014678793027997017, 0.005304835736751556, -0.04478529840707779, -0.047356583178043365, -0.023803111165761948, 0.018523238599300385, 0.024876561015844345, 0.020120929926633835, -0.01482857670634985, 0.014354261569678783, 0.0204204972833395, -0.06031286343932152, 0.0207824744284153, -0.0075890361331403255, 0.03939308598637581, 0.007826193235814571, -0.019272157922387123, 0.02603738382458687, 0.022642288357019424, -0.02297930046916008, -0.0014635106781497598, -0.027959605678915977, -0.015427711419761181, -0.05192498117685318, -0.004409254994243383, 0.02500138059258461, 0.036347486078739166, -0.036846768110990524, 0.002324766246601939, -0.043312426656484604, 0.004992786794900894, 0.02681126445531845, 0.025163644924759865, -0.009829549118876457, -0.04203926399350166, 0.006808912847191095, 0.07898588478565216, -0.049528446048498154, 0.0020251991227269173, -0.04198933765292168, -0.011264975182712078, -0.022242864593863487, -0.0010804702760651708, -0.03921834006905556, -0.01801147870719433, 0.02419005148112774, -0.005579439457505941, -0.0037321080453693867, 0.010796901769936085, 0.023353761062026024, -0.02372821979224682, -0.0734938234090805, -0.05846553295850754, -0.012207363732159138, -0.008394123055040836, -0.022854480892419815, 0.02688615769147873, -0.0296571534126997, 0.024676848202943802, -0.045084863901138306, -0.030306216329336166, 0.01570231467485428, -0.0220181904733181, -0.010528539307415485, 0.04733162000775337, 0.013368186540901661, 0.0006701255915686488, 0.007220817729830742, 0.020046038553118706, -0.020395534113049507, -0.0296571534126997, 0.08053365349769592, -0.020183339715003967, 0.03951790928840637, 0.004593363963067532, 0.0468822680413723, 0.06845110654830933, -0.001286422717384994, -0.007258263882249594, 0.014903469011187553, -0.007888603024184704, -0.045259613543748856, 0.0022467540111392736, -0.005910211242735386, -0.00720209488645196, 0.026436805725097656, -0.01612670160830021, 0.028683559969067574, -0.023753182962536812, 0.0013464922085404396, -0.04381170496344566, -0.0019549881108105183, 0.012637991458177567, 0.01945938728749752, 0.011920278891921043, -0.054071880877017975, 0.05921445041894913, -0.007195854093879461, 0.020145894959568977, 0.01365527231246233, 0.007813711650669575, 0.03754575550556183, -0.06176077201962471, 0.009130558930337429, 0.02546321228146553, 0.06245976313948631, 0.01166439801454544, -0.027210688218474388, -0.016114220023155212, 0.02578774467110634, -0.03435037285089493, -0.024052750319242477, -0.016950510442256927, 0.01701292023062706, -0.01432929839938879, -0.003806999884545803, 0.0051519316621124744, 0.012675437144935131, -0.02030816115438938, 0.06715298444032669, 0.00034832488745450974, -0.014441635459661484, -0.06455673277378082, 0.009598632343113422, 0.022455058991909027, 0.041639842092990875, -0.02347858063876629, -0.026586590334773064, -0.047606222331523895, -0.019334567710757256, -0.0035542401019483805, -0.02880837954580784, -0.006602960638701916, -0.04388659447431564, -0.015752242878079414, -0.04009207710623741, 0.01974647119641304, -0.08662485331296921, -0.004627689253538847, 0.010690804570913315, -0.0037102645728737116, 0.008568869903683662, 0.03370131179690361, -0.01289387233555317, -0.04610838741064072, 0.03792021423578262, 0.02155635692179203, 0.009948127903044224, -0.009879477322101593, -0.05661820247769356, 0.029532333835959435, -0.013592861592769623, 0.02482663281261921, 0.015689833089709282, 0.030730603262782097, -0.019309602677822113, 0.020794957876205444, 0.04985297471284866, 0.05317318066954613, -0.03594806417822838, 0.03859424218535423, -0.011034058406949043, 0.010447406210005283, 0.009486295282840729, -0.009168004617094994, 0.025912564247846603, 0.012469485402107239, 0.013979802839457989, -0.03165426850318909, 0.010322586633265018, -0.02286696434020996, 0.04917895048856735, 0.05437144637107849, -0.016987957060337067, 0.0013886188389733434, -0.017399862408638, -0.0012747208820655942, -0.0016101737273856997, -0.004917894955724478, 0.036172740161418915, 0.027285579591989517, -0.026262057945132256, -0.00972969364374876, 0.0326777882874012, -0.0358731746673584, 0.009898199699819088, 0.02013341337442398, -0.015153108164668083, 0.0026321348268538713, 0.014441635459661484, -0.02513868175446987, 0.047606222331523895, -0.016363859176635742, 0.016114220023155212, 0.006194176152348518, 0.012213604524731636, -0.025912564247846603, 0.04056639224290848, 0.004727545194327831, -0.048854418098926544, 0.034250516444444656, 0.030131468549370766, -0.013393150642514229, -0.007620241027325392, 0.007676409557461739, -0.005376607179641724, -0.022504987195134163, -0.0076888916082680225, 0.04383666813373566, 0.012906353920698166, -0.05277375504374504, 0.02344113402068615, 0.027260616421699524, 0.0045122308656573296, 0.057516902685165405, -0.037271153181791306, -0.014291851781308651, -0.01882280595600605, 0.008855955675244331, -0.05472094193100929, -0.006958696525543928, 0.043487172573804855, 0.009661042131483555, -0.007083516102284193, -0.01917230151593685, -0.011127673089504242, 0.023141566663980484, 0.04763118550181389, 0.026262057945132256, 0.038444459438323975, -0.03275268152356148, 0.0038850121200084686, -0.014716238714754581, 0.000578851206228137, 0.013468042016029358, -0.08407852798700333, 0.01386746484786272, -0.009118076413869858, -0.005635607987642288, 0.02958226203918457, 0.02713579684495926, -0.027160760015249252, -0.022779589518904686, -0.0014385466929525137, 0.009061908349394798, 0.03192887082695961, 0.05606899410486221, 0.0063782851211726665, -0.02020830474793911, -0.03147951886057854, -0.002114133210852742, -0.004253230057656765, 0.015677349641919136, -0.015577495098114014, 0.0016226556617766619, -0.030805494636297226, 0.03602295741438866, 0.013942357152700424, 0.028883270919322968, 0.01814877986907959, 0.021493947133421898, 0.0028256052173674107, -0.000744237273465842, 0.008013422600924969, 0.04283811151981354, 0.05731719359755516, -0.04024185985326767, -0.024264944717288017, 0.02126927115023136, 0.027110831812024117, 0.02698601223528385, 0.0122510502114892, 0.026911120861768723, 0.058864954859018326, 0.003931819461286068, 0.0202457495033741, 0.0068650818429887295, -0.002391856862232089, 0.0066154426895082, 0.04965326562523842, 0.020507872104644775, 0.07354374974966049, 0.009299064986407757, -0.02461443841457367, 0.00802590511739254, 0.020607726648449898, -0.02880837954580784, 0.019646616652607918, -0.023590916767716408, -0.00980458501726389, -0.025812707841396332, -0.006287790834903717, -0.009929404594004154, 0.039293233305215836, 0.06395760178565979, -0.0053734867833554745, -0.08073335886001587, -0.002624333603307605, -0.01970902644097805, -0.038020070642232895, 0.06999886780977249, 0.029532333835959435, -0.06136135011911392, 0.027285579591989517, -0.03772050514817238, -0.0027912799268960953, -0.005960139445960522, 0.05152555927634239, 0.011876591481268406, 0.024664366617798805, -0.006059994921088219, 0.009242896921932697, 0.03841949254274368, 0.0034450229723006487, -0.046083420515060425, 0.01365527231246233, -0.02134416438639164, -0.02731054462492466, -0.02432735450565815, -0.020432980731129646, -0.02259236015379429, -0.006890045944601297, -0.019384494051337242, -0.006409490015357733, -0.03881891816854477, -0.0009470692602917552, -0.004740026779472828, -0.012475726194679737, 0.007252022624015808, -0.0018785360734909773, -2.1892199583817273e-05, 0.03899366408586502, 0.032552968710660934, 0.033576492220163345, -0.024626919999718666, 0.008225616067647934, 0.028533777222037315, -0.038119927048683167, 0.02805946208536625, -0.052574045956134796, 0.0064906226471066475, 0.054920654743909836, 0.0014557094546034932, 0.029682116582989693, -0.000949409615714103, 0.058365676552057266, -0.01896010711789131, -0.03779539465904236, -0.011564542539417744, -0.017637019976973534, -0.05996336787939072, 0.03157937526702881, 0.0011756452731788158, -0.02379062958061695, -0.010778178460896015, 0.024514583870768547, -0.0022826397325843573, -0.0032577933743596077, 0.033401742577552795, -0.011121432296931744, 0.0561189241707325, -0.016326412558555603, -0.05891488492488861, -0.020944740623235703, 0.030530890449881554, 0.020657654851675034, 0.01693802885711193, -0.0022857601288706064, -0.013630308210849762, 0.030530890449881554, -0.030306216329336166, -0.04066624864935875, 0.00737684266641736, 0.01474120281636715, -0.005183136556297541, -0.008300508372485638, -0.03749582916498184, -0.025213573127985, 0.05546985939145088, 0.0126067865639925, -0.03774546831846237, 0.01587706245481968, -0.005885247606784105, 0.019409459084272385, 0.06315875053405762, -0.05167534202337265, -0.022043153643608093, 0.04486018791794777, 0.034175626933574677, 0.01814877986907959, 0.0016819450538605452, -0.034325409680604935, 0.010172802954912186, -0.026536662131547928, 0.00018888726481236517, 0.036597128957509995, 0.010472370311617851, 0.029307657852768898, 0.008562629111111164, -0.000335452874423936, -0.007901085540652275, 0.009842030704021454, -0.03217850998044014, 0.002863051136955619, -0.010790660046041012, 0.005295474547892809, 0.008300508372485638, -0.005267390049993992, 0.011639433912932873, -0.07329411059617996, -0.008625038899481297, -0.012906353920698166, 0.00911183562129736, -0.012525653466582298, -0.040366679430007935, -0.0035199145786464214, 0.015602458268404007, -0.03782036155462265, 0.008350435644388199, -0.00818817038089037, -0.014890986494719982, -0.006858841050416231, -0.019122373312711716, -0.005161293316632509, 0.014316815882921219, 0.057516902685165405, -0.005844681058079004, 0.0214814655482769, -0.05497058108448982, 0.02151891030371189, 0.004131530877202749, -0.009767139330506325, 0.010640877299010754, 0.003005033591762185, 0.002518236869946122, -0.0047181835398077965, -0.017786802724003792, -0.0040098316967487335, 0.0085251834243536, 0.0013940796488896012, 0.02696104906499386, 0.05996336787939072, -0.032303329557180405, -0.022030672058463097, 0.008238098584115505, 0.01899755373597145, 0.004284434951841831, -0.0018067647470161319, 0.0057229818776249886, 0.032303329557180405, -0.03300232067704201, 0.008219375275075436, 0.002563484013080597, -0.01509069837629795, 0.017374897375702858, -0.004353085998445749, -0.019047481939196587, 0.004434218630194664, 0.013443078845739365, -0.034150660037994385, -0.005479583516716957, 0.01029762253165245, 0.017349934205412865, -0.017986513674259186, -0.0009969971142709255, 0.02248002216219902, -0.0036915417294949293, -0.0032858778722584248, 0.037770431488752365, -0.03599799424409866, 0.013380669057369232, 0.03956783562898636, -0.008132001385092735, -0.026112275198101997, 0.012781534343957901, 0.03487461432814598, -0.01743730716407299, -0.034924544394016266, 0.003906855825334787, 0.011633193120360374, 0.006777707953006029, 0.006808912847191095, 0.0172251146286726, -0.03914344683289528, 0.000989195890724659, -0.030031612142920494, -0.0020532836206257343, -0.017911622300744057, -0.018660539761185646, -0.03292742744088173, 0.009598632343113422, -0.046682555228471756, 0.0015641464851796627, 0.0429629310965538, -0.024639403447508812, 0.005479583516716957, 0.011782976798713207, 0.031204916536808014, 0.002033000346273184, 0.020819921046495438, 0.026836229488253593, -0.02500138059258461, -0.012026375159621239, -0.0084378095343709, 0.03402584046125412, -0.02326638624072075, 0.017961550503969193, 0.04069121181964874, 0.010409960523247719, -0.013330740854144096, -0.028084425255656242, 0.033226996660232544, -0.02101963199675083, 0.0020345605444163084, -0.049703191965818405, 0.03469986841082573, 0.013805055059492588, 0.012993727810680866, 0.0021359766833484173, 0.009823308326303959, 0.010734491981565952, -0.01576472446322441, 0.011889073997735977, 0.014841058291494846, -0.012157435528934002, 0.007170889992266893, -0.010016778483986855, 0.013056137599050999, 0.017674464732408524, 0.008999498561024666, -0.03809496387839317, -0.0033358056098222733, -0.02155635692179203, -0.005766668822616339, 0.029357586055994034, -0.022330239415168762, 0.039368122816085815, -0.036522235721349716, 0.016288967803120613, -0.047181833535432816, 0.022105563431978226, 0.00793853122740984, 0.017836730927228928, -0.02546321228146553, 0.005295474547892809, -0.04183955490589142, 0.0010742292506620288, 0.010590949095785618, -0.013293295167386532, 0.025588031858205795, -0.01839841902256012, 0.01550260279327631, -0.03682180121541023, -0.026336951181292534, 0.044086307287216187, -0.0020080364774912596, 0.03225340321660042, -0.07589036226272583, -0.015352819114923477, 0.027959605678915977, -0.010197767056524754, -0.003763312939554453, 0.009636078961193562, -0.006212898995727301, 0.029956720769405365, -0.003332685213536024, -0.026287022978067398, 0.008294266648590565, 0.011733048595488071, 0.004505990073084831, 0.031629305332899094, -0.024052750319242477, 0.01978391781449318, 0.012794015929102898, -0.10684563964605331, -0.016925547271966934, 0.0075890361331403255, -0.013892428949475288, -0.014279370196163654, 0.012544376775622368, -0.02613723836839199, -0.004621448460966349, 0.006971178576350212, 0.028334064409136772, -0.04461054876446724, -0.022217901423573494, 0.03312714025378227, -0.030231323093175888, 0.030980242416262627, -0.044985007494688034, -0.013180957175791264, 0.001656981068663299, 0.006964937783777714, 0.0022483142092823982, 0.0089682936668396, 0.008674967102706432, 0.012394593097269535, -0.03534892946481705, -0.01107774581760168, 0.0001267699699383229, -0.045509252697229385, 0.01049109362065792, 0.044660478830337524, -0.02443969063460827, -0.015203035436570644, 0.014591419138014317, -0.02621212974190712, 0.014092140831053257, -0.0245021004229784, 0.007276986725628376, 0.0007360460003837943, -0.04818039387464523, 0.023066675290465355, -0.02998168393969536, -0.0026102913543581963, -0.005367245990782976, -0.0032453113235533237, 0.0034138180781155825, -0.0058758859522640705, 0.011776736006140709, -0.03487461432814598, 0.0023575315717607737, 0.021543875336647034, -0.02105707861483097, 0.0204204972833395, -0.03612281382083893, 0.009055666625499725, 0.027260616421699524, -0.0033888539765030146, 0.003323323791846633, 0.0027085868641734123, 0.0005928934551775455, -0.017175186425447464, -0.025862636044621468, 0.00368842133320868, -0.049628302454948425, 0.004808677826076746, -0.013730163685977459, 0.013118547387421131, -0.026287022978067398, -0.012088784947991371, 0.055320076644420624, 0.011358589865267277, -0.016001882031559944, 0.007127203047275543, -0.010622153989970684, -0.03147951886057854, -0.008400363847613335, 0.0175746101886034, 0.04168976843357086, -0.03724619001150131, 0.002508875448256731, -0.0021297356579452753, 0.0170503668487072, -0.013667753897607327, 0.012831461615860462, 0.005295474547892809, -0.03594806417822838, 0.022030672058463097, 0.0490042008459568, -0.018298564478754997, -0.014354261569678783, -0.03220347315073013, -0.035323966294527054, -0.021194379776716232, -0.05671805888414383, -0.03175412490963936, 0.013917393051087856, -0.0062503451481461525, -0.007364360615611076, -0.02606234699487686, 0.009885718114674091, -0.08243090659379959, -0.011726807802915573, -0.012725365348160267, -0.005123847629874945, 0.01643875055015087, -0.016288967803120613, 0.007732578553259373, 0.014591419138014317, -0.004612086806446314, -0.022417612373828888, -0.002156259724870324, -0.016114220023155212, -0.026237094774842262, -0.027410399168729782, 0.012388352304697037, -0.02933262288570404, 0.031704194843769073, -0.054421376436948776, 0.01932208426296711, -0.02933262288570404, -0.032902464270591736, -0.017874177545309067, -0.020607726648449898, 0.023104120045900345, -0.0026258938014507294, -0.02372821979224682, 0.00697741936892271, 0.011127673089504242, 0.024239979684352875, 0.015452675521373749, 0.009941887110471725, 0.0038694096729159355, -0.004053518641740084, -0.034999433904886246, -0.014092140831053257, 0.03537389263510704, -0.007283227518200874, 0.042813148349523544, 0.043387316167354584, -0.022355202585458755, -0.024814151227474213, -0.039268266409635544, -0.004459182731807232, -0.016151664778590202, 0.04733162000775337, -0.01220112293958664, -0.03182901442050934, -0.025338392704725266, -0.00690876878798008, 0.00038479562499560416, -0.02028319612145424, 0.03821978345513344, -0.010659599676728249, 0.02234272100031376, 0.029781972989439964, 0.045509252697229385, -0.06645399332046509, 0.017911622300744057, -0.014504045248031616, 0.040042150765657425, -0.0057479459792375565, -0.017212633043527603, 0.016101736575365067, 0.01541522890329361, -0.022929374128580093, -0.01182666327804327, 0.002633695024996996, -0.008400363847613335, -0.051725272089242935, -0.03497447073459625, 0.014142069034278393, 0.010878033936023712, 0.008206893689930439, -0.027285579591989517, -0.00011994389933533967, -0.0028287258464843035, 0.005591921042650938, 0.019596688449382782, -0.027410399168729782, -0.00016060781490523368, 0.0507766418159008, -0.05367245897650719, -0.0018098852597177029, 0.041215453296899796, -0.018673023208975792, -0.012531895190477371, 0.0125194126740098, -0.024377280846238136, -0.020894812420010567, 0.035498712211847305, 0.029357586055994034, -0.009136799722909927, 0.0013464922085404396, -0.004449821077287197, -0.03966769203543663, -0.01056598499417305, -0.04144012928009033, 0.010684563778340816, 0.012613027356564999, -0.002566604409366846, 0.050801604986190796, 0.004318760707974434, 0.008175688795745373, 0.018847770988941193, -0.007095998153090477, 0.04321257025003433, -0.03654719889163971, -0.04311271384358406, -0.027285579591989517, -0.015040770173072815, 0.010984131135046482, 0.005947657395154238, -0.021468983963131905, 0.0019347048364579678, -0.007351878564804792, -0.014466599561274052, 0.0596638023853302, -0.032053690403699875, -0.04905413091182709, 0.012276014313101768, 0.007476698141545057, -0.01726256124675274, 0.0078012291342020035, -0.00930530671030283, -0.023129085078835487, -0.009511258453130722, -0.01718766801059246, -0.004861725959926844, -0.008812268264591694, -0.013929875567555428, 0.019896255806088448, 0.019509313628077507, -0.015565012581646442, 0.026012418791651726, 0.01566486805677414, -0.024589475244283676, 0.02578774467110634, 0.02248002216219902, -0.04655773565173149, -0.023066675290465355, -0.0018270479049533606, -0.034425266087055206, 0.001393299549818039, 0.010447406210005283, -0.03108009696006775, 0.0032172270584851503, 0.00059718411648646, 0.017924103885889053, -0.014429153874516487, 0.02706090360879898, 0.016850655898451805, -0.0005238525336608291, -0.01811133325099945, -0.007901085540652275, 0.024090196937322617, 0.031729161739349365, -0.014441635459661484, -0.06974922865629196, 0.0436868853867054, -0.0440363809466362, 0.007863638922572136, 0.03597302734851837, -0.0058883680030703545, -0.02596249058842659, 0.02638687752187252, -0.0161641463637352, -0.003635372966527939, -0.022742142900824547, -0.02671140991151333, -0.024202533066272736, -0.03242814913392067, 0.027934642508625984, 0.03772050514817238, -0.005841560661792755, 0.00886219646781683, 0.020832402631640434, 0.03697158768773079, -0.017836730927228928, 0.012176158837974072, 0.03177908807992935, -0.005170654971152544, 0.029382551088929176, -0.008762340992689133, 0.009324029088020325, 0.022005707025527954, -0.03891877457499504, 0.0011647235369309783, 0.016650943085551262, -0.02898312732577324, 0.017711911350488663, 0.016176629811525345, -0.021606285125017166, 0.00610056146979332, 0.026436805725097656, 0.014017248526215553, 0.019908737391233444, 0.09286583214998245, -0.0001243320875801146, -0.003928699064999819, 0.01182666327804327, 0.010915480554103851, 0.018847770988941193, 0.01789914071559906, -0.037695541977882385, -0.028034497052431107, 0.040791068226099014, -0.021107006818056107, 0.006715298164635897, 0.003778915386646986, -0.0021000909619033337, -0.02453954704105854, 0.001001677825115621, -0.005186257418245077, 0.03637245297431946, -0.009192968718707561, -0.0013254288351163268, -0.029432477429509163, 0.019584206864237785, -0.0014229442458599806, -0.01726256124675274, -0.006297152489423752, -0.027834786102175713, -9.693027823232114e-05, -0.013517970219254494, 0.008381640538573265, 0.01191403716802597, 0.00225455523468554, 0.014042212627828121, 0.023004265502095222, 0.007932290434837341, 0.021256789565086365, -0.012132472358644009, -0.016675908118486404, -0.01218239963054657, 0.027110831812024117, -0.0220181904733181, -0.02386552095413208, 0.0025744056329131126, 0.02340368740260601, 0.0008409725269302726, -0.006715298164635897, 0.028583703562617302, 0.01601436361670494, -0.012126230634748936, 0.01960917003452778, 0.03132973611354828, 0.014791131019592285, 0.0532730333507061, -0.019908737391233444, -0.005214341916143894, -0.011383553966879845, 0.021718623116612434, 0.03784532472491264, -0.015814652666449547, 0.021431537345051765, 0.013542934320867062, 0.028783416375517845, -0.011371071450412273, -0.012600545771420002, 0.024389764294028282, 0.013268331065773964, 0.036422379314899445, 0.01516558974981308, -0.020932259038090706, 0.0031891425605863333, -0.004493508022278547, -0.022754626348614693, 0.004515351727604866, 0.0043562063947319984, 0.04528457671403885, -0.017749356105923653, 0.007807470392435789, -0.0034106974489986897, 0.04141516610980034, -0.017000438645482063, 0.0018083249451592565, -0.0042625917121768, -0.021406574174761772, 0.003005033591762185, -0.014117104932665825, -0.023703254759311676, 0.03547374904155731, -0.01063463557511568, -0.012263532727956772, 0.003863168880343437, -0.017399862408638, -0.02322893962264061, -0.042613435536623, -0.009648560546338558, 0.03068067505955696, 0.026187166571617126, 0.022105563431978226, -0.013642789795994759, -0.011751771904528141, 0.019222229719161987, 0.004016072954982519, 0.009242896921932697, 0.007607758976519108, 0.010940443724393845, -0.02688615769147873, -0.0023403686936944723, 0.005236185155808926, 0.005086401477456093, 0.0031782209407538176, 7.898744661360979e-05, 0.012419557198882103, 0.016401303932070732, -0.062309980392456055, 0.027934642508625984, 0.012232327833771706, -0.032552968710660934, -0.018273599445819855, -0.0028474486898630857, -0.0036572162061929703, -0.01441667228937149, -0.0211319699883461, -0.01861061342060566, -0.0032421909272670746, -0.0009876356925815344, -0.02731054462492466, -0.007695132866501808, 0.030980242416262627, -0.002371573820710182, 0.020732546225190163, -0.00332020316272974, -0.01022897195070982, -0.010541020892560482, 0.007982217706739902, 0.02326638624072075, -0.019634133204817772, 0.01074073277413845, -0.01054726168513298, 0.01683817431330681, 0.006790190003812313, -0.0005410152371041477, -0.00024944430333562195, -0.05302339419722557, -0.011296180076897144, 0.0010367833310738206, -0.028683559969067574, -0.003295239293947816, -0.0376456119120121, -0.018373455852270126, 0.0020595246460288763, 0.028359029442071915, -0.002465188503265381, -0.03387605771422386, 0.0001839139877120033, 0.024065231904387474, 0.0002685573126655072, 0.06435701996088028, 0.006559273693710566, 0.006627924274653196, 0.019983628764748573, 0.026262057945132256, 0.024988897144794464, 0.010447406210005283, 0.0025868876837193966, -0.008000941015779972, -0.006883804686367512, 0.002594688907265663, 0.019409459084272385, 0.016775764524936676, -0.003654095809906721, 0.021818477660417557, -0.006031910423189402, 0.036846768110990524, 0.014316815882921219, 0.016139183193445206, 0.009311547502875328, 0.013293295167386532, 0.020445462316274643, 0.014516527764499187, -0.028933199122548103, 0.026661481708288193, 0.012544376775622368, 0.00937395729124546, -0.006066236179322004, 0.022579878568649292, 0.07534115016460419, 0.03846942260861397, -0.0557694286108017, -0.00011038739467039704, 0.014017248526215553, -0.022629806771874428, 0.021643729880452156, -0.009436367079615593, -0.010952926240861416, -0.03083045780658722, 0.008219375275075436, 0.010541020892560482, 0.013243366964161396, -0.026611553505063057, -0.019896255806088448, 0.009810825809836388, 0.01566486805677414, 0.0072395410388708115, -0.008369158953428268, 0.012163677252829075, -0.004546556621789932, 0.00444045988842845, 0.007127203047275543, 0.023640844970941544, -0.0010531659936532378, 0.03504936397075653, -0.009698488749563694, 0.025563068687915802, 0.05317318066954613, 0.0123446648940444, 0.04493508115410805, -0.009236655198037624, 0.013380669057369232, -0.0077013736590743065, 0.014216960407793522, 0.003441902343183756, -0.01811133325099945, -0.014391708187758923, 0.010072947479784489, -0.014653828926384449, 0.028433920815587044, 0.0021921454463154078, -0.0027179482858628035, 0.006590478587895632, 0.013131028972566128, -0.008487737737596035, -0.005002148449420929, 0.016850655898451805, -0.013218402862548828, 0.0379951074719429, 0.01593947224318981, -0.012781534343957901, -0.028134353458881378, -0.010366273112595081, 0.012363388203084469, -0.035748355090618134, 0.008312989957630634, -0.0026851831935346127, -0.02603738382458687, -0.03250304237008095, -0.0014276249567046762, 0.0300066489726305, 0.01896010711789131, 0.019222229719161987, 0.01015408057719469, 0.023166529834270477, 0.02180599607527256, 0.00022057976457290351, 0.01899755373597145, -0.011414758861064911, 0.002607170958071947, 0.003650975413620472, -0.02748529054224491, -0.025525622069835663, 0.008568869903683662, -0.003053401131182909, 0.011470927856862545, -0.011882832273840904, -0.017037885263562202, -0.04471040517091751, 0.04401141405105591, 0.011814181692898273, -0.018885215744376183, 0.00047431475832127035, -0.012750329449772835, -0.005058316979557276, 0.006621683482080698, -0.036172740161418915, 0.005229944363236427, -0.038519348949193954, -0.026112275198101997, 0.014067176729440689, 0.021693658083677292, -0.004278194159269333, -0.018048923462629318, 0.008824750781059265, 0.021681176498532295, 0.007645204663276672, -0.003654095809906721, 0.006840117741376162, -0.025563068687915802, 0.018048923462629318, -0.00028259953251108527, 0.003588565392419696, -0.026686444878578186, -0.00396926561370492, 0.00012228426930960268, -0.009011980146169662, -0.0006291691679507494, 0.00553887290880084, -0.001038343645632267, -0.012968763709068298, 0.034325409680604935, 0.026361914351582527, -0.00455591781064868, 0.047506365925073624, 0.014928432181477547, -0.010303863324224949, 0.006397007964551449, -0.030356144532561302, 0.029682116582989693, -0.03177908807992935, 0.005186257418245077, -0.004100325983017683, 0.015540048480033875, 0.011645675636827946, -0.01801147870719433, -0.01832352764904499, -0.0068650818429887295, -0.016526123508810997, -0.012513171881437302, 0.003953663166612387, -0.029357586055994034, 0.00762648181989789, -0.01910989172756672, 0.0033982153981924057, -0.021256789565086365, 0.009954368695616722, 0.011121432296931744, 0.0202457495033741, 0.014129586517810822, 0.0012333743507042527, -0.002735110931098461, -0.013168475590646267, 0.007738819345831871, 0.02105707861483097, -0.012569340877234936, 0.01440418977290392, 0.00010892466525547206, -0.016713352873921394, 0.016576051712036133, 0.005476463120430708, -0.024589475244283676, -0.014316815882921219, -0.015889544039964676, 0.014903469011187553, 0.01583961583673954, 0.005885247606784105, -0.007838674820959568, -0.0015040769940242171, -0.034150660037994385, -0.0027366713620722294, 0.010884275659918785, 0.005264269653707743, 0.006877563893795013, 0.011701843701303005, 0.029632190242409706, 0.010035501793026924, -0.028633631765842438, 0.03135469928383827, 0.043986450880765915, -0.03572338819503784, -0.02815931662917137, 0.0264617707580328, 0.022529950365424156, 0.0020532836206257343, -0.013305776752531528, 0.004630809649825096, 0.009879477322101593, -0.013305776752531528, -0.0010999733349308372, -0.0077013736590743065, -0.024339836090803146, -0.006094320211559534, 0.008425327949225903, 0.037945181131362915, 0.012481966987252235, -0.00012481966405175626, 0.01303117349743843, 0.012045098468661308, 0.009274101816117764, -0.014266888611018658, -0.009149282239377499, 0.006415730807930231, -0.018198708072304726, -0.007189612835645676, 0.024102678522467613, 0.03402584046125412, -0.01220112293958664, -0.013705199584364891, 0.007370601408183575, 0.021568838506937027, -0.008893401362001896, 0.00655303243547678, 0.02013341337442398, 0.01289387233555317, -0.021331680938601494, -0.0032141064293682575, -0.006081838626414537, 0.04134027287364006, -0.01441667228937149, -0.018710467964410782, 0.017037885263562202, -0.02205563522875309, -0.003139214590191841, -0.004331242758780718, 0.002566604409366846, -0.015465157106518745, -0.0031407750211656094, -0.020432980731129646, 0.012806498445570469, 0.03387605771422386, 0.03050592727959156, -0.013642789795994759, -0.040890924632549286, -0.02517612650990486, -0.03639741614460945, -0.002802201546728611, 0.005020871292799711, 0.013355704955756664, 0.008712412789463997, -0.024726776406168938, -0.007283227518200874, -0.0019471868872642517, -0.008381640538573265, 0.02588759921491146, -0.012481966987252235, 0.003972386009991169, -0.019347049295902252, -0.008181929588317871, -0.00383508438244462, -0.00236533279530704, -0.0076888916082680225, -0.025475693866610527, -0.014366744086146355, 0.014616383239626884, 0.04124042019248009, 0.019097410142421722, -0.008868437260389328, -0.00868120789527893, -0.012818980030715466, 0.008132001385092735, 0.0023575315717607737, -0.027285579591989517, -0.010310105048120022, -0.00146975158713758, -0.011121432296931744, 0.024914005771279335, 0.015178072266280651, -0.0021000909619033337, -0.023590916767716408, 0.01012287475168705, -0.017961550503969193, 0.012906353920698166, -0.007657686714082956, 0.036672018468379974, -0.022642288357019424, 0.010360032320022583, -0.02950737066566944, -0.012294737622141838, -0.012681678868830204, -0.025762779638171196, -0.007720096502453089, 0.023041710257530212, 0.006397007964551449, 0.027285579591989517, 0.03737100958824158, 0.013967321254312992, 0.020432980731129646, -0.03669698163866997, -0.0078012291342020035, 0.02517612650990486, -1.6906726159504615e-05, 0.012619268149137497, 0.005417173728346825, 0.036672018468379974, 0.048030607402324677, 0.01672583632171154, 0.005311076994985342, -0.012881389819085598, 0.008150724694132805, -0.005301715340465307, -0.004992786794900894, 0.011140155605971813, -0.014566455036401749, -0.002441784832626581, -0.003501191735267639, -0.028134353458881378, 0.0037539515178650618, 0.05841560661792755, 0.02013341337442398, 0.01029762253165245, 0.01982136443257332, 0.04019193351268768, 0.02053283527493477, 0.02883334457874298, -0.03809496387839317, 0.002639936050400138, 0.030955277383327484, 0.017661983147263527, -0.012319701723754406, -0.021444018930196762, -0.011027817614376545, 0.010746973566710949, -0.012388352304697037, -0.01935953088104725, 0.018061406910419464, -0.011321144178509712, -0.015864580869674683, 0.00737684266641736, -0.020195823162794113, 0.013455560430884361, 0.023640844970941544, 0.019634133204817772, -0.03435037285089493, -0.023066675290465355, 0.0014471280155703425, 0.008943329565227032, -0.003317082766443491, -0.02045794390141964, 0.021818477660417557, 0.0028287258464843035, -0.007120962254703045, -0.015365301631391048, 0.005570077802985907, -0.03317706659436226, 0.02915787510573864, 0.009991814382374287, 0.0078012291342020035, 0.03489958122372627, 0.014204478822648525, -0.019022516906261444, 0.009586150757968426, 0.04421112686395645, -0.026761338114738464, -0.02234272100031376, -0.03187894448637962, -0.04099078103899956, 0.02613723836839199, 0.02176855131983757, -0.061211567372083664, -0.006871322635561228, -0.015115661546587944, -0.0035292762331664562, 0.0007395565626211464, 0.00695245573297143, 0.01942194066941738, -0.005760427564382553, -0.01605181023478508, -0.03420059010386467]
metadata : {"source": "pydantic_ai_docs", "crawled_at": "2025-03-14T10:15:03.598821", "url_path": "/examples/stream-markdown/", "chunk_size": 3079}
updated_dt: 2025-03-14T10:15:03.598821
---
Table of contents 
  * [ Running the Example  ](https://ai.pydantic.dev/examples/stream-markdown/#running-the-example)
  * [ Example Code  ](https://ai.pydantic.dev/examples/stream-markdown/#example-code)


# Stream markdown
This example shows how to stream markdown from an agent, using the [`rich`](https://github.com/Textualize/rich) library to highlight the output in the terminal.
It'll run the example with both OpenAI and Google Gemini models if the required environment variables are set.
Demonstrates:
  * [streaming text responses](https://ai.pydantic.dev/results/#streaming-text)


## Running the Example
With [dependencies installed and environment variables set](https://ai.pydantic.dev/examples/#usage), run:
[pip](https://ai.pydantic.dev/examples/stream-markdown/#__tabbed_1_1)[uv](https://ai.pydantic.dev/examples/stream-markdown/#__tabbed_1_2)
```
python-mpydantic_ai_examples.stream_markdown

```

```
uvrun-mpydantic_ai_examples.stream_markdown

```

## Example Code
```
importasyncio
importos
importlogfire
fromrich.consoleimport Console, ConsoleOptions, RenderResult
fromrich.liveimport Live
fromrich.markdownimport CodeBlock, Markdown
fromrich.syntaximport Syntax
fromrich.textimport Text
frompydantic_aiimport Agent
frompydantic_ai.modelsimport KnownModelName
# 'if-token-present' means nothing will be sent (and the example will work) if you don't have logfire configured
logfire.configure(send_to_logfire='if-token-present')
agent = Agent(instrument=True)
# models to try, and the appropriate env var
models: list[tuple[KnownModelName, str]] = [
  ('google-gla:gemini-1.5-flash', 'GEMINI_API_KEY'),
  ('openai:gpt-4o-mini', 'OPENAI_API_KEY'),
  ('groq:llama-3.3-70b-versatile', 'GROQ_API_KEY'),
]

async defmain():
  prettier_code_blocks()
  console = Console()
  prompt = 'Show me a short example of using Pydantic.'
  console.log(f'Asking: {prompt}...', style='cyan')
  for model, env_var in models:
    if env_var in os.environ:
      console.log(f'Using model: {model}')
      with Live('', console=console, vertical_overflow='visible') as live:
        async with agent.run_stream(prompt, model=model) as result:
          async for message in result.stream():
            live.update(Markdown(message))
      console.log(result.usage())
    else:
      console.log(f'{model} requires {env_var} to be set.')

defprettier_code_blocks():
"""Make rich code blocks prettier and easier to copy.
  From https://github.com/samuelcolvin/aicli/blob/v0.8.0/samuelcolvin_aicli.py#L22
  """
  classSimpleCodeBlock(CodeBlock):
    def__rich_console__(
      self, console: Console, options: ConsoleOptions
    ) -> RenderResult:
      code = str(self.text).rstrip()
      yield Text(self.lexer_name, style='dim')
      yield Syntax(
        code,
        self.lexer_name,
        theme=self.theme,
        background_color='default',
        word_wrap=True,
      )
      yield Text(f'/{self.lexer_name}', style='dim')
  Markdown.elements['fence'] = SimpleCodeBlock

if __name__ == '__main__':
  asyncio.run(main())

```

© Pydantic Services Inc. 2024 to present