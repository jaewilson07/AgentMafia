---
url: https://ai.pydantic.dev/api/tools/
session_id: pydantic_ai_docs
chunk_number: 8
title: Using Tools with Pydantic AI Agents
summary: This document snippet provides examples of how to create tools using the Pydantic AI library. It illustrates the implementation of an asynchronous tool function and demonstrates how to incorporate a custom preparation method that conditionally registers the tool based on the context's dependencies.
embedding: [-0.016899939626455307, 0.039429377764463425, 0.019485846161842346, -0.04965858906507492, 0.019909203052520752, -0.017311854287981987, -0.0010920026106759906, 0.04398332163691521, 0.003318200586363673, 0.012918097898364067, 0.018936628475785255, -0.032449714839458466, 0.057118818163871765, -0.06197025626897812, 0.017998376861214638, -0.009331009350717068, -0.03720961511135101, 0.009508361108601093, 0.022620974108576775, 0.04512752965092659, 0.05995645374059677, 0.0024228584952652454, 0.009348171763122082, 0.013364339247345924, 0.04892629757523537, -0.008398479782044888, 0.0015632729046046734, 0.05496770888566971, -0.02219761721789837, 0.026156574487686157, 0.015240838751196861, -0.017369063571095467, -0.03858266398310661, -0.02049274928867817, 0.012986750341951847, -0.03920053690671921, 0.022323479875922203, 0.002201168332248926, -0.021419556811451912, 0.004413778893649578, 0.004439523443579674, -0.04061935096979141, -0.020561400800943375, 0.013913558796048164, 0.01939431019127369, -0.022048870101571083, -0.009948880411684513, 0.0308478232473135, 0.010366516187787056, -0.03192337974905968, -0.029383238404989243, 0.04565386474132538, 0.0076261404901742935, 0.06338907033205032, -0.03837670758366585, 0.006081460975110531, -0.007998007349669933, 0.022517995908856392, -0.021957334131002426, -0.0021239344496279955, -0.005060255993157625, 0.021911565214395523, -0.019016722217202187, 0.03897169232368469, -0.04787362366914749, 0.0012200108030810952, 0.005209002643823624, 0.015744289383292198, -0.02894843928515911, -0.02510390430688858, 0.022231943905353546, 0.053686197847127914, -0.043937552720308304, -0.03460082411766052, 0.007872144691646099, -0.01661388762295246, -0.0001339973823633045, 0.043685827404260635, -0.009451150894165039, -0.027895769104361534, -0.040276091545820236, -0.013696159236133099, -0.017655115574598312, 0.030001109465956688, -0.030390141531825066, -0.07185620814561844, -0.024211421608924866, -0.025881964713335037, 0.019085373729467392, -0.023639319464564323, 0.0005449286545626819, -0.018719227984547615, 0.009096446447074413, 0.043937552720308304, 0.07149005681276321, 0.02551581896841526, 0.01104159839451313, 0.01980622485280037, -0.0329531654715538, 0.007185620721429586, 0.008346990682184696, 0.04373159632086754, -0.0377359502017498, -0.0028991347644478083, 0.05922415852546692, 0.006659285165369511, -0.007443067152053118, -0.015584100969135761, -0.04016166925430298, 0.033387962728738785, -0.10526705533266068, -0.003003543708473444, 0.014828924089670181, 0.04171779006719589, -0.043662942945957184, -0.019588826224207878, -0.004007585346698761, 0.02219761721789837, -0.007597535382956266, -0.013970769010484219, -0.051352016627788544, -0.013215592131018639, 0.012288784608244896, 0.018673459067940712, 0.0063903965055942535, 0.03684346750378609, -0.010360795073211193, -0.011075925081968307, -0.06357214599847794, 0.008507180027663708, 0.024074116721749306, 0.04029897600412369, 0.016247740015387535, -0.022426459938287735, -0.002587338211014867, -0.029108628630638123, -0.049567051231861115, 0.010955782607197762, -0.03938360884785652, 0.009988928213715553, 0.010212047956883907, -0.02826191484928131, -0.0035184368025511503, -0.0005367046687752008, -0.030207067728042603, 0.044486772269010544, -0.010252095758914948, -0.03883438929915428, -0.06293138861656189, 0.04267892614006996, 0.010034696198999882, -0.011819659732282162, 0.013753369450569153, -0.01645369827747345, -0.005603754427284002, 0.0032180824782699347, -0.0073858569376170635, 0.031213968992233276, 0.023524897173047066, 0.013890674337744713, -0.013650390319526196, 0.018719227984547615, -0.032312408089637756, 0.02592773362994194, -0.02076735906302929, -0.01851327158510685, 0.022861257195472717, -0.008575832471251488, -0.03794190660119057, -0.022014545276761055, 0.00799228623509407, -0.01664821244776249, -0.04837707802653313, 0.04675230383872986, 0.06833204627037048, -0.04155760258436203, -0.04480715095996857, -0.009800134226679802, -0.040001481771469116, -0.031603001058101654, -0.023502014577388763, -0.005703872535377741, -0.03345661610364914, -0.0046912492252886295, -0.04089396074414253, -0.035447537899017334, 0.03787325695157051, -0.027186360210180283, 0.019245563074946404, 0.03508139029145241, 0.013856347650289536, 0.014314031228423119, 0.018970953300595284, -0.045310601592063904, -0.017700884491205215, -0.023685086518526077, 0.04439523443579674, -0.006521980278193951, 0.03986417502164841, 0.016419371590018272, -0.014565756544470787, 0.02714059315621853, 0.03260990232229233, 0.036271363496780396, 0.04160337150096893, -0.028994208201766014, 0.017323294654488564, 0.025195440277457237, 0.010503821074962616, -0.047644782811403275, -0.013249917887151241, -0.03963533416390419, 0.02974938414990902, 0.017380505800247192, 0.003020706819370389, -0.011161739937961102, 0.003464086912572384, 0.04540213942527771, 0.003870280459523201, 0.02974938414990902, -9.179357221000828e-06, 0.008867604658007622, 0.045997124165296555, 0.01878788135945797, 0.018753554672002792, 0.04196951538324356, -0.009988928213715553, -0.053686197847127914, 0.018032703548669815, 0.021167831495404243, -0.006441886071115732, 0.003678625915199518, -0.0043136607855558395, -0.05405234172940254, 0.03151146322488785, -0.042038168758153915, 0.018822206184267998, -0.02482929453253746, 0.022586647421121597, -0.06540288031101227, -0.009182262234389782, -0.024463148787617683, -0.017792420461773872, -0.002946333261206746, 0.02455468475818634, -0.0031265458092093468, 0.024074116721749306, -0.03398295119404793, 0.05647806078195572, -0.004983021877706051, 0.06737091392278671, -0.04647769406437874, 0.04979589208960533, 0.009182262234389782, -0.055333856493234634, -0.0044652679935097694, 0.020332559943199158, -0.057393427938222885, -0.054098110646009445, -0.009948880411684513, 0.007362972479313612, 0.002733224770054221, -0.03059609793126583, 0.025012366473674774, -0.019302774220705032, 0.02922304905951023, 0.02771269530057907, 0.013936442323029041, -0.005377773195505142, 0.005429262761026621, 0.03892592713236809, 0.04920090362429619, 0.043548520654439926, 0.003009264590218663, -0.04068800434470177, -0.031625885516405106, -0.010967224836349487, 0.0479651615023613, 0.005166095215827227, -0.022449342533946037, -0.001907965401187539, 0.036683280020952225, 0.008226849138736725, 0.01815856620669365, 0.009605618193745613, 0.005480751860886812, 0.016556676477193832, -0.02219761721789837, -0.021350905299186707, -0.004462407901883125, -0.016385044902563095, 0.014382683672010899, 0.04595135897397995, 0.007013989612460136, -0.006790868937969208, -0.02227771282196045, 0.03771306574344635, -0.017803862690925598, -0.007002547383308411, -0.027232129126787186, 0.016144761815667152, 0.009290961548686028, 0.02647695317864418, -0.011224671266973019, 0.016293508931994438, 0.006830916274338961, 0.025676008313894272, -0.03304469957947731, 0.014760271646082401, -0.012517625465989113, 0.04727863892912865, 0.056981515139341354, -0.01804414577782154, -0.02565312385559082, 0.008724579587578773, 0.011442070826888084, 0.006144392304122448, 0.006132950074970722, 0.013204149901866913, -0.030664749443531036, 0.005100303329527378, -0.042587388306856155, 0.029932457953691483, 0.036156944930553436, 0.003175174817442894, 0.004971579648554325, -0.019245563074946404, -0.00929668266326189, -0.0020438400097191334, 0.04469272866845131, -0.003747278358787298, -0.02961207926273346, -0.02268962748348713, -0.008078102022409439, 0.06238217279314995, 0.03414313867688179, 0.03842247277498245, -0.0002565526810940355, 0.031213968992233276, 0.03492119908332825, -0.052862368524074554, 0.006453327834606171, -0.07254272699356079, -0.038880158215761185, 0.020263908430933952, 0.050528187304735184, 0.029955342411994934, 0.004928672220557928, -0.02112206257879734, 0.03318200632929802, 0.04704979434609413, -0.008804673328995705, 0.014073747210204601, 0.02439449541270733, -0.04814823344349861, -0.03171741962432861, -0.0002440379175823182, -0.009834459982812405, -0.0038273727986961603, -0.008146754465997219, -0.02906285971403122, -0.011607981286942959, 0.01620197296142578, -0.005243328865617514, -0.06810320913791656, 0.032998934388160706, -0.011184624396264553, 0.003444063477218151, -0.012586277909576893, -0.021842913702130318, 0.03647732362151146, 0.04718710109591484, -0.012609162367880344, -0.019646035507321358, -0.012654930353164673, -0.03537888452410698, -0.003478389699012041, 0.02428007498383522, 0.049978967756032944, 0.020115161314606667, 0.06668438762426376, 0.007889308035373688, -0.011642307043075562, -0.006544864736497402, 0.033273544162511826, 0.013925000093877316, 0.029177282005548477, 0.003913188353180885, 0.0018593365093693137, -0.008455690927803516, 0.03192337974905968, -0.09940871596336365, -0.0018035564571619034, -0.030252836644649506, -0.028879787772893906, 0.023147309198975563, -0.0016419371822848916, 0.025538703426718712, 0.04499022290110588, -0.025058135390281677, 0.004954416770488024, 0.01570996269583702, -0.0025644542183727026, -0.005766803864389658, -0.007877865806221962, 0.04306795448064804, 0.04583693668246269, -0.011356255039572716, 0.007368693593889475, 0.006172997411340475, 0.062061794102191925, 0.00812959112226963, 0.007500277366489172, -0.020149488002061844, 0.02386816032230854, -0.02318163588643074, 0.017700884491205215, 0.020744474604725838, 0.014371241442859173, 0.02398258075118065, -0.01686561293900013, -0.07107814401388168, 0.002997822593897581, -0.00987450685352087, -0.0015103534096851945, 0.06618093699216843, 0.018387408927083015, -0.10096483677625656, 0.03855977952480316, -0.027323665097355843, 0.03746134042739868, -0.024989483878016472, 0.08384749293327332, -0.0016390766249969602, -0.04210682213306427, -0.012929540127515793, -0.03345661610364914, -0.016156204044818878, 0.01782674714922905, 0.025744659826159477, -0.005795408971607685, -0.03414313867688179, 0.0028333428781479597, 0.021682724356651306, -0.05002473294734955, 0.03318200632929802, -0.016716865822672844, -0.06251947581768036, 0.03714096173644066, -0.014165284112095833, 0.017460599541664124, -0.002332752337679267, -0.011270440183579922, -0.023524897173047066, 0.029657848179340363, -0.012460415251553059, 0.033662572503089905, -0.002389962552115321, 0.05418964847922325, 0.02741520293056965, 0.03183184191584587, 0.006436164956539869, -0.01268925704061985, 0.05730189010500908, -0.012609162367880344, 0.012243015691637993, -0.008055217564105988, 0.01565275341272354, -0.004845716990530491, -0.021991660818457603, 0.016774076968431473, 0.03128262236714363, 0.009605618193745613, -0.00042228391976095736, -0.0033668293617665768, 0.020057950168848038, -0.010475216433405876, 0.014268262311816216, -0.001473166630603373, 0.03608829155564308, -0.00987450685352087, -0.022586647421121597, -0.008501458913087845, 0.02370797097682953, 0.03347950056195259, 0.02200310304760933, -0.010726941749453545, 0.012952424585819244, 0.0005781821673735976, 0.004147750791162252, 0.005575149320065975, 0.019737573340535164, 0.021717051044106483, -0.010034696198999882, 0.015732847154140472, 0.029863804578781128, -0.008913373574614525, 0.0017349040135741234, -0.014245378784835339, 0.016270624473690987, -0.01296386681497097, 0.02216329239308834, 0.024097001180052757, 0.03528734669089317, 0.018948068842291832, -0.008495737798511982, 0.05418964847922325, 0.008163917809724808, 0.03112243302166462, 0.05414387956261635, -0.06421290338039398, 0.027346549555659294, 0.02508101984858513, 0.015915920957922935, 0.012975308112800121, 0.019932087510824203, -0.0031093826983124018, -0.028696713969111443, 0.025996385142207146, -0.04050493240356445, -0.019085373729467392, -0.03347950056195259, -0.019268447533249855, 0.023799506947398186, 0.021213600412011147, 0.019863435998558998, 0.012883772142231464, -0.006270254962146282, -0.031053781509399414, -0.02051563374698162, 0.038719967007637024, 0.009222309105098248, 0.0055923121981322765, 0.011310487054288387, -0.0493839792907238, 0.01776953600347042, -0.005864061415195465, 0.01268925704061985, -0.007917913608253002, 0.0034326212480664253, -0.015172186307609081, 0.03279297426342964, -0.0047398777678608894, -0.023090099915862083, -0.005632359534502029, 0.026705794036388397, 0.0025730356574058533, 0.016156204044818878, 0.026499835774302483, 0.002763260155916214, 0.04331967979669571, 0.006047134753316641, 0.026408299803733826, -0.03265567123889923, 0.03700365871191025, -0.026682909578084946, -0.01776953600347042, -0.01241464726626873, 0.008272617124021053, -0.042999301105737686, 0.02049274928867817, 0.015309491194784641, 0.023421918973326683, 0.028834018856287003, 0.020733032375574112, 0.04004724696278572, 0.032312408089637756, -0.010646847076714039, 0.008530063554644585, -0.039566680788993835, 0.015172186307609081, -0.012391762807965279, 0.0005481467233039439, -0.019348541274666786, -0.005809711758047342, -0.006796590052545071, 0.025698890909552574, -0.05309120938181877, -0.039269186556339264, -0.006367512512952089, 0.004396616015583277, -0.025012366473674774, -0.011853985488414764, -0.002620234154164791, -0.005575149320065975, 0.020996199920773506, -0.0005342016811482608, -0.01667109690606594, 0.0011434919433668256, -0.06297715753316879, -0.028742482885718346, 0.008684531785547733, 0.0006250231526792049, -0.0008209685911424458, -0.01996641419827938, -0.02104196883738041, 0.01702580228447914, -0.005572288762778044, -0.029383238404989243, 0.015069207176566124, 0.015275164507329464, -0.02357066608965397, 0.02343336120247841, 0.002201168332248926, -0.021636955440044403, -0.032998934388160706, 0.03666039556264877, -0.009399661794304848, -0.07716532796621323, 0.010612521320581436, 0.009702876210212708, 0.015893036499619484, -0.034898318350315094, -0.025264093652367592, 0.0024657663889229298, 0.023616435006260872, 0.018742112442851067, 0.013776253908872604, 0.05469309911131859, -0.030138414353132248, -0.009142214432358742, -0.030069762840867043, 0.008501458913087845, 0.001719171181321144, 0.04924667254090309, -0.02796442247927189, -0.016224857419729233, -0.0008746032835915685, 0.014886134304106236, 0.08407633751630783, -0.022186174988746643, 0.026774445548653603, 0.02357066608965397, -0.005469310097396374, -0.03208356723189354, 0.020229581743478775, 0.02496659941971302, -0.020916106179356575, 0.009782970882952213, -0.02633964829146862, 0.028147494420409203, 0.033822763711214066, 0.0003257414500694722, -0.005349168088287115, -0.005892666522413492, 0.030687633901834488, -0.027529623359441757, 0.015572658739984035, -0.009073561988770962, -0.016304951161146164, 0.009525524452328682, -0.019794782623648643, -0.00867881067097187, 0.00021114195988047868, 0.0032810138072818518, -0.023227404803037643, -0.018215777352452278, 0.0019637453369796276, -0.02592773362994194, 0.03279297426342964, -0.042289894074201584, -0.009868786670267582, -0.02255232259631157, -0.02370797097682953, -0.004928672220557928, 0.04359428957104683, 0.06320600211620331, 0.004021888133138418, 0.019485846161842346, -0.003704370465129614, -0.039543796330690384, 0.004439523443579674, -0.011161739937961102, -0.016831286251544952, 0.020309675484895706, 0.01521795429289341, 0.03455505520105362, -0.04357140511274338, -0.007700513582676649, 0.0438917838037014, -0.012643488124012947, -0.021488210186362267, -0.04975012317299843, 0.018913744017481804, 0.06352637708187103, -0.01568708010017872, 0.03837670758366585, 0.018055588006973267, 0.027323665097355843, 0.024714874103665352, 0.006853800732642412, -0.03512715920805931, -0.0015089231310412288, -0.02090466395020485, -0.004971579648554325, 0.014748829416930676, -0.007940797135233879, 0.036980774253606796, -0.028902672231197357, -0.04430370032787323, -0.028193263337016106, -0.007832097820937634, -0.02051563374698162, -0.03164876997470856, -0.03235817700624466, -0.014886134304106236, 0.011762448586523533, 0.009182262234389782, 0.06842358410358429, -0.03741557151079178, -0.015126418322324753, 0.011241834610700607, -0.04418927803635597, -0.013066845014691353, -0.012048500590026379, 0.023776624351739883, 0.03373122587800026, 0.020755916833877563, 0.022392133250832558, 0.006419002078473568, -0.0037587203551083803, -0.010950062423944473, -0.04565386474132538, -0.009971764869987965, 0.018478944897651672, -0.029039977118372917, 0.007397298701107502, 0.032152220606803894, 0.03418890759348869, -0.0069052898325026035, -0.02549293451011181, -0.002138237003237009, -0.033410847187042236, -0.04199239984154701, -0.0029949620366096497, -0.0015504006296396255, -0.030344372615218163, 0.015172186307609081, -0.007071199826896191, 0.008604437112808228, 0.03318200632929802, 0.006808032281696796, 0.0012300226371735334, -0.006893847603350878, -0.03549330309033394, -0.007483114488422871, -0.016304951161146164, 0.009617060422897339, -0.015572658739984035, 0.03743845596909523, -0.03515004366636276, 0.005984202958643436, 0.0003632857697084546, -0.0005159659194760025, 0.009559850208461285, -0.003192337928339839, -0.04155760258436203, -0.023685086518526077, -0.05743919685482979, -0.0025315582752227783, -0.004791367333382368, -0.009731481783092022, -0.002498662332072854, 0.0315343476831913, -0.03043590858578682, -0.009834459982812405, -0.006624958943575621, -0.005237608216702938, 0.007711955811828375, -0.007191341836005449, 0.03535600006580353, -0.018810763955116272, -0.019096815958619118, -0.0004694824747275561, 0.006316023413091898, -0.0181814506649971, 0.012311668135225773, 0.0029277398716658354, -0.014085189439356327, -0.03947514668107033, -0.0020881779491901398, 0.009948880411684513, -0.011922637932002544, 0.012506183236837387, 0.012609162367880344, 0.025012366473674774, -0.043937552720308304, -0.0014481371035799384, -0.005629498977214098, 0.02936035394668579, -0.04370871186256409, -0.015309491194784641, 0.0335710346698761, 0.021110620349645615, 0.004625457338988781, -0.020321117714047432, -0.01810135692358017, -0.08883623778820038, -0.02241501770913601, -0.012723582796752453, 0.012471857480704784, -0.007740560919046402, -0.0002556587860453874, -0.029680732637643814, 0.017792420461773872, -0.006710774730890989, -0.015275164507329464, 0.004153471905738115, 0.0023012864403426647, 0.006956779398024082, 0.010681173764169216, 0.039841290563344955, 0.003732975572347641, -0.006012808531522751, -0.010829919949173927, 0.02268962748348713, -0.0014288285747170448, -0.03151146322488785, 0.008215406909584999, -0.04510464519262314, 0.0030350093729794025, -0.024371610954403877, 0.0069052898325026035, -0.0035270184744149446, 0.0004555374616757035, 0.020401213318109512, 0.019325658679008484, -0.027071939781308174, 0.010555310174822807, -0.02617945894598961, 0.01508064940571785, -0.0671420693397522, 0.030550329014658928, 0.01501199696213007, 0.021820029243826866, 0.04487580433487892, 0.016053225845098495, 0.03208356723189354, -0.03931495547294617, 0.030344372615218163, 0.010578194633126259, 0.020195255056023598, -0.0038616990204900503, -0.006573469843715429, 0.025607354938983917, -0.007540324702858925, 0.023913929238915443, 0.021442441269755363, 0.003129406366497278, 0.010509542189538479, -0.016716865822672844, 0.06402982771396637, 0.010761267505586147, -0.004064795561134815, -0.029818037524819374, 0.0001652842911425978, 0.043548520654439926, 0.05634075775742531, -0.006441886071115732, 0.01906249113380909, -0.004050493240356445, -0.004019027575850487, -0.004591131117194891, -0.01501199696213007, -0.00902207288891077, -0.027918653562664986, -0.010715499520301819, -0.014954786747694016, 0.005472170654684305, -0.000996890477836132, -0.010103348642587662, 0.008804673328995705, 0.012448973022401333, -0.002934891264885664, -0.02826191484928131, 0.022643858566880226, -0.01056103128939867, 0.03480678051710129, -0.025126788765192032, 0.0067336587235331535, 0.04920090362429619, -0.028216147795319557, -0.030092647299170494, -0.01722031645476818, 0.00943398755043745, 0.0038845830131322145, -0.014027979224920273, -0.011670912615954876, 0.028994208201766014, 0.035584840923547745, -0.036980774253606796, -0.04769055172801018, 0.00803233403712511, -0.011911195702850819, 0.012906655669212341, 0.010841362178325653, 0.007403019815683365, -0.0037758834660053253, 0.03869708254933357, -0.004207821562886238, -0.0014338345499709249, -0.02894843928515911, 0.022231943905353546, 0.008175360038876534, -0.014577198773622513, -0.028605177998542786, 0.03576791286468506, 0.028971323743462563, 0.024051234126091003, -0.020366886630654335, 0.016877055168151855, -0.027781348675489426, 0.02453180029988289, 0.08142177760601044, -0.014005094766616821, -0.04391466826200485, -0.004442384000867605, -0.012082827277481556, 0.045310601592063904, 0.020035065710544586, -0.008713137358427048, -0.03125973790884018, -0.005157513543963432, -0.03473812714219093, 0.004413778893649578, -0.039566680788993835, -0.004502454772591591, 0.033250659704208374, 0.03460082411766052, -0.018890859559178352, 0.020893221721053123, -0.0030178462620824575, 0.006727937608957291, 0.030802054330706596, -0.039703987538814545, -0.0018321616807952523, 0.002621664432808757, -0.026797330006957054, -0.012471857480704784, 0.03691212087869644, -0.0008102416759356856, -0.02894843928515911, 0.005037372000515461, -0.004373731557279825, -0.014451336115598679, 0.01128760352730751, -0.01248329970985651, -0.03155723214149475, -0.00799228623509407, 0.0034154581371694803, 0.047232870012521744, -0.004516757559031248, 0.018776439130306244, -0.014703061431646347, -0.022128965705633163, -0.030344372615218163, -0.002189726335927844, 0.002716061659157276, 0.018913744017481804, -0.0036671836860477924, -0.019096815958619118, -0.03526446223258972, -0.03647732362151146, 0.013261360116302967, 0.012940982356667519, -0.005595172755420208, -0.009004909545183182, -0.002339903498068452, 0.06224486604332924, 0.007597535382956266, -0.012597720138728619, 0.03288451209664345, 0.004468128550797701, -0.009811575524508953, -0.009462593123316765, -0.020881779491901398, 0.06229063495993614, 0.02768981270492077, 0.012666372582316399, 0.02563023939728737, -0.007900750264525414, -0.006859521381556988, -0.022586647421121597, 0.020641496405005455, -0.020504191517829895, 0.03620271384716034, 0.003152290591970086, 0.04315949231386185, 0.010704057291150093, -0.006230207625776529, 0.014073747210204601, -0.025470050051808357, 0.032312408089637756, 0.013707601465284824, 0.0008345560636371374, -0.009714318439364433, 0.012117153033614159, -0.013661832548677921, 0.056569598615169525, -0.0016390766249969602, 0.005749640520662069, 0.0534573569893837, 0.013616064563393593, 0.0063217440620064735, -0.022804047912359238, -0.02826191484928131, 0.0019623152911663055, -0.015538332052528858, -0.021328020840883255, 0.01733473688364029, -0.01028642151504755, -0.024875061586499214, -0.0072828782722353935, -0.021625515073537827, -0.0329531654715538, -0.005855479743331671, -0.040482047945261, -0.006178718525916338, -0.005240468308329582, 0.020481307059526443, -0.02290702611207962, -0.015240838751196861, 0.004470989108085632, 0.03029860369861126, 0.03391429781913757, 0.06535711139440536, -0.019863435998558998, -0.02604215405881405, -0.006945337168872356, -0.027621159330010414, 0.01851327158510685, 0.0631602331995964, -0.024783525615930557, 0.053960807621479034, -0.038468241691589355, -0.026087921112775803, 0.030916476622223854, 0.025721775367856026, 0.036156944930553436, 0.007116968277841806, 0.007305762264877558, 0.01480603963136673, 0.051214709877967834, 0.023364709690213203, 0.05007050186395645, 0.03995571285486221, -0.002957775257527828, 0.02065293863415718, 0.008604437112808228, 0.004342265892773867, -0.0021410975605249405, 0.010749825276434422, -0.009205145761370659, 0.006213044747710228, 0.05126047879457474, -0.022918468341231346, 0.001375909079797566, 0.021705608814954758, 0.031191086396574974, -0.0012829422485083342, 0.026705794036388397, -0.028078842908143997, -0.011819659732282162, 0.010566752403974533, -0.0004998754593543708, 0.014565756544470787, 0.04192374646663666, -0.004113424569368362, -0.004625457338988781, -0.020012183114886284, 0.025973500683903694, 0.04650057852268219, -0.03624848276376724, -0.01996641419827938, -0.030229952186346054, -0.008964862674474716, -0.012426089495420456, -0.016991475597023964, -0.013009634800255299, 0.0057296170853078365, 0.02002362348139286, -0.002810458652675152, -0.04151183366775513, -0.02466910518705845, -0.033799879252910614, -0.004502454772591591, -0.033548153936862946, -0.001875069341622293, 0.029131513088941574, -0.00782637670636177, 0.0017606486799195409, 0.027392318472266197, 0.010131954215466976, 0.011613702401518822, -0.006047134753316641, -0.04018455371260643, 0.027094824239611626, 0.020893221721053123, 0.006338907405734062, 0.002378520555794239, -0.012185805477201939, 0.026019269600510597, -0.0007809213711880147, 0.004834275227040052, -0.021545419469475746, 0.008947699330747128, 0.006985384505242109, -0.03510427474975586, -0.015812942758202553, 0.0011942661367356777, 0.0446011945605278, 0.02894843928515911, 0.03606540709733963, -0.02082456834614277, -0.010955782607197762, -0.04350275546312332, 0.03601963818073273, -0.0002678159798961133, 0.016968591138720512, 0.02172849327325821, 0.002768981270492077, 0.006928173825144768, -0.029131513088941574, -0.018936628475785255, 0.0002422500983811915, 0.013787695206701756, -0.03171741962432861, 0.027209244668483734, 0.013490201905369759, -0.001146352500654757, -0.008409922011196613, -0.005783966742455959, -0.007036873605102301, -0.035859450697898865, 0.0050087664276361465, -0.01028642151504755, -0.016705423593521118, 0.013993652537465096, 0.0034240398090332747, -0.012883772142231464, -0.007929354906082153, -9.895603579934686e-05, -0.013719042763113976, 0.01053242664784193, 0.011030156165361404, -0.02359355054795742, 0.003910327795892954, 0.0727258026599884, 0.013387222774326801, 0.04814823344349861, 0.025859080255031586, 0.012746467255055904, -0.004408057779073715, -0.002563023939728737, -0.010526705533266068, -0.009828738868236542, -0.013181265443563461, -0.01939431019127369, 0.03425756096839905, 0.010892851278185844, 0.029131513088941574, 0.024028349667787552, -0.011493559926748276, -0.009897391311824322, 0.016362162306904793, 0.011630864813923836, 0.02785000018775463, 0.008839000016450882, 0.024302959442138672, 0.005343446973711252, -0.021076295524835587, 0.0002944545412901789, 0.012975308112800121, 0.015378143638372421, -0.04164913669228554, 0.027666928246617317, 0.002889123046770692, -0.021739935502409935, -0.0051460713148117065, -0.022975679486989975, -0.02510390430688858, -0.02894843928515911, -0.010675452649593353, 0.023776624351739883, -0.023616435006260872, -0.015275164507329464, 0.022804047912359238, -0.005020208656787872, -0.006058576516807079, 0.015275164507329464, 0.011596539057791233, 0.02339903451502323, 0.013833464123308659, -0.016625329852104187, -0.010023253969848156, -0.008272617124021053, 0.019371425732970238, 0.004462407901883125, 0.0018779298989102244, 0.023147309198975563, -0.014691619202494621, -0.004639759659767151, -0.025538703426718712, 0.01330712903290987, 0.04398332163691521, 0.015595543198287487, 0.028742482885718346, -0.017048686742782593, -0.024325843900442123, -0.0056266384199261665, 0.014348356984555721, -0.0070769209414720535, -0.0036671836860477924, 0.021682724356651306, -0.043685827404260635, -0.017185989767313004, 0.025149671360850334, -0.01727752760052681, 0.0027446667663753033, -0.018307313323020935, -0.033273544162511826, 0.0016247740713879466, 0.010692615061998367, 0.016167646273970604, -0.04869745299220085, 0.01743771694600582, 7.866424130043015e-05, 0.005503636319190264, -0.03439486399292946, -0.028879787772893906, 0.004285055678337812, -0.03892592713236809, -0.03732403740286827, -0.013547412119805813, 0.01035507395863533, -0.0017849630676209927, 0.01159081794321537, 0.009794413112103939, 0.005234747659415007, 0.016304951161146164, 0.006338907405734062, 0.005346307530999184, -0.013707601465284824, 0.009325288236141205, -0.030916476622223854, -0.00909072533249855, 0.04142029583454132, 0.0479651615023613, 0.004696970339864492, 0.05277083069086075, 0.000865306647028774, -0.013627506792545319, 0.012048500590026379, -0.010538147762417793, -0.007654745597392321, -0.019428636878728867, 0.0035012736916542053, 0.005829735193401575, -0.0002908789028879255, -0.01200273260474205, -0.006007087416946888, -0.008552948012948036, -0.017105896025896072, -0.01678551733493805, 0.025172555819153786, -0.02329605631530285, -0.03331930935382843, 0.037804603576660156, -0.010063301771879196, 0.007340088486671448, 0.00782637670636177, -0.023913929238915443, 0.026362530887126923, -0.0037873254623264074, -0.049292441457509995, 0.004648341331630945, -0.009508361108601093, -0.014886134304106236, 0.005875503644347191, 0.006012808531522751, -0.016133319586515427, -0.017975494265556335, -0.00861015822738409, 0.004044772125780582, -0.03439486399292946, -0.011956964619457722, -0.006441886071115732, -0.02384527586400509, 0.017403390258550644, -0.020950432866811752, -0.019920645281672478, 0.004468128550797701, -0.0011020144447684288, -0.002741806209087372, -0.0023456246126443148, 0.012048500590026379, 0.014657293446362019, -0.0037272546906024218, -0.01980622485280037, 0.01097294595092535, -0.02071014791727066, -0.005266213323920965, -0.060276828706264496, -0.0012071385281160474, -0.0015975991263985634, -0.013604622334241867, -0.024760641157627106, 0.019954971969127655, -0.01508064940571785, -0.0008989177295006812, 0.01661388762295246, 0.009119330905377865, 0.05290813744068146, 0.00865020602941513, 0.03347950056195259, -0.0049057877622544765, 0.014428451657295227, 0.0005392075981944799, -0.027460969984531403, 0.009474034421145916, 0.002498662332072854, 0.01815856620669365, 0.01234599482268095, -0.005546543747186661, -0.02357066608965397, -0.003306758590042591, -0.02730078063905239, -0.036980774253606796, -0.008289780467748642, 0.005194700323045254, 0.01172812283039093, 0.013341454789042473, 0.012723582796752453, -0.023799506947398186, -0.02063005417585373, -0.02839921973645687, -0.007483114488422871, 0.014920460991561413, 0.003627136582508683, -0.021053411066532135, -0.03032148815691471, -0.005163234658539295, 0.027804233133792877, 0.0005706733209080994, -0.034898318350315094, -0.007586093153804541, 0.009920275770127773, 0.020263908430933952, -0.020538518205285072, -0.026248110458254814, 0.014428451657295227, -0.015721404924988747, 0.013227034360170364, 0.00830694381147623, 0.030756287276744843, 0.0019051048438996077, 0.022369248792529106, -0.019051048904657364, 0.01432547252625227, -0.001570424297824502, -0.026660025119781494, 0.04352563992142677, 0.012815119698643684, 0.0205728430300951, 0.007608977146446705, 0.022254828363656998, -0.04869745299220085, -0.014359799213707447, -0.011459234170615673, -0.007580372039228678, -0.015778616070747375, -0.009233751334249973, -0.007998007349669933, 0.0037587203551083803, 0.011184624396264553, -0.013570296578109264, 0.004116285126656294, 0.0015346677973866463, -0.03169453516602516, -0.011361976154148579, 0.01843317598104477, -0.011281882412731647, -0.040276091545820236, -0.02743808552622795, 0.004233566112816334, -0.009948880411684513, 0.012906655669212341, -0.019863435998558998, 0.02716347575187683, -0.025836195796728134, 0.016796959564089775, -0.015092091634869576, -0.004716993775218725, 0.04347987100481987, 0.005403518211096525, 0.008055217564105988, -0.01165947038680315, 0.0021711329463869333, 0.017517810687422752, 0.003964677453041077, 0.0024514636024832726, 0.010400842875242233, 0.010320748202502728, 0.0073515307158231735, -0.038719967007637024, 0.004362289793789387, 0.04306795448064804, 0.002010944066569209, 0.01487469207495451, -0.006636401172727346, -0.004928672220557928, 0.008724579587578773, 0.010280700400471687, -0.014954786747694016, 0.02920016460120678, 0.001353024854324758, 0.014760271646082401, 0.018135681748390198, 0.006819474510848522, -0.0012335983337834477, 0.018753554672002792, -0.010046138428151608, 0.029703617095947266, -0.024760641157627106, -0.009754365310072899, -0.0157900582998991, -0.017838189378380775, -0.03416602313518524, -0.02617945894598961, 0.003549902467057109, -0.005892666522413492, -0.02563023939728737, 0.007259994279593229, -0.01289521437138319, 0.015435353852808475, 0.024234306067228317, -0.008781789802014828, 0.04823977127671242, -0.033113352954387665, -0.006344628520309925, -0.0058812242932617664, 0.00018030201317742467, 0.01708301156759262, 0.053960807621479034, -0.01111025083810091, -0.042861998081207275, -0.03869708254933357, 0.0028476454317569733, -0.027392318472266197, 0.011785333044826984, 0.006504817400127649, -0.008959141559898853, 0.01076698862016201, -0.007877865806221962, -0.011808217503130436, -0.016899939626455307, 0.023616435006260872, -0.002570175100117922, -0.004290776792913675, 0.005452146753668785, -0.020389771088957787, -0.003964677453041077, 0.007443067152053118, -0.006653564516454935, -0.0267515629529953, 0.005646661855280399, 0.004579688888043165, 0.007505998481065035, 0.001696287072263658, 0.047644782811403275, -0.022941352799534798, 0.00874746311455965, -0.01508064940571785, -0.01639648713171482, -0.007242830935865641, 0.03235817700624466, -0.002202598610892892, -0.00892481580376625, 0.034486401826143265, 0.007683350704610348, 0.014268262311816216, 0.021328020840883255, 0.00043730164179578424, -0.017037244513630867, 0.012609162367880344, 0.0038788621313869953, -0.003238106146454811, 0.0032409667037427425, 0.008564390242099762, 0.0033811319153755903, 0.018936628475785255, 0.024463148787617683, 0.03979552164673805, -0.020069392397999763, 0.0016662515699863434, -0.044235046952962875, -0.015606984496116638, -0.020263908430933952, -0.027094824239611626, 0.015343816950917244, -0.0031208249274641275, 0.004153471905738115, -0.006138671189546585, -0.04361717402935028, -0.003369689919054508, -0.0038130702450871468, 0.022209059447050095, -0.011762448586523533, 0.04105415195226669, 0.00405907491222024, 0.03837670758366585, -0.017643673345446587, 0.013776253908872604, -0.009908833540976048, 0.008919094689190388, 0.0062187653966248035, -0.002969217486679554, -0.012048500590026379, 0.001071263919584453, 0.030344372615218163, -0.03590521961450577, -0.009988928213715553, -0.03125973790884018, -0.01425682008266449, 0.01521795429289341, 0.006722216960042715, 0.006687890738248825, 0.02233492210507393, -0.016693981364369392, 0.05579153820872307, -0.005163234658539295, 0.017391948029398918, -0.017803862690925598, 0.026934634894132614, -0.033136237412691116, -0.013661832548677921]
metadata : {"source": "pydantic_ai_docs", "crawled_at": "2025-03-15T11:17:23.998137", "url_path": "/api/tools/", "chunk_size": 4910}
updated_dt: 2025-03-15T11:17:24.001201
---
```python {noqa="I001"}
  from pydantic_ai import Agent, RunContext, Tool
  async def my_tool(ctx: RunContext[int], x: int, y: int) -> str:
    return f'{ctx.deps} {x} {y}'
  agent = Agent('test', tools=[Tool(my_tool)])
  ```
  or with a custom prepare method:
  ```python {noqa="I001"}
  from typing import Union
  from pydantic_ai import Agent, RunContext, Tool
  from pydantic_ai.tools import ToolDefinition
  async def my_tool(ctx: RunContext[int], x: int, y: int) -> str:
    return f'{ctx.deps} {x} {y}'
  async def prep_my_tool(
    ctx: RunContext[int], tool_def: ToolDefinition
  ) -> Union[ToolDefinition, None]:
    # only register the tool if `deps == 42`
    if ctx.deps == 42:
      return tool_def
  agent = Agent('test', tools=[Tool(my_tool, prepare=prep_my_tool)])
  ```

  Args:
    function: The Python function to call as the tool.
    takes_ctx: Whether the function takes a [`RunContext`][pydantic_ai.tools.RunContext] first argument,
      this is inferred if unset.
    max_retries: Maximum number of retries allowed for this tool, set to the agent default if `None`.
    name: Name of the tool, inferred from the function if `None`.
    description: Description of the tool, inferred from the function if `None`.
    prepare: custom method to prepare the tool definition for each step, return `None` to omit this
      tool from a given step. This is useful if you want to customise a tool at call time,
      or omit it completely from a step. See [`ToolPrepareFunc`][pydantic_ai.tools.ToolPrepareFunc].
    docstring_format: The format of the docstring, see [`DocstringFormat`][pydantic_ai.tools.DocstringFormat].
      Defaults to `'auto'`, such that the format is inferred from the structure of the docstring.
    require_parameter_descriptions: If True, raise an error if a parameter description is missing. Defaults to False.
  """
  if takes_ctx is None:
    takes_ctx = _pydantic.takes_ctx(function)
  f = _pydantic.function_schema(function, takes_ctx, docstring_format, require_parameter_descriptions)
  self.function = function
  self.takes_ctx = takes_ctx
  self.max_retries = max_retries
  self.name = name or function.__name__
  self.description = description or f['description']
  self.prepare = prepare
  self.docstring_format = docstring_format
  self.require_parameter_descriptions = require_parameter_descriptions
  self._is_async = inspect.iscoroutinefunction(self.function)
  self._single_arg_name = f['single_arg_name']
  self._positional_fields = f['positional_fields']
  self._var_positional_field = f['var_positional_field']
  self._validator = f['validator']
  self._parameters_json_schema = f['json_schema']

```
  
---|---  
####  prepare_tool_def `async`
```
prepare_tool_def(
  ctx: RunContext[](https://ai.pydantic.dev/api/tools/#pydantic_ai.tools.RunContext "pydantic_ai.tools.RunContext")[AgentDepsT[](https://ai.pydantic.dev/api/tools/#pydantic_ai.tools.AgentDepsT "pydantic_ai.tools.AgentDepsT")],
) -> ToolDefinition[](https://ai.pydantic.dev/api/tools/#pydantic_ai.tools.ToolDefinition "pydantic_ai.tools.ToolDefinition") | None

```

Get the tool definition.
By default, this method creates a tool definition, then either returns it, or calls `self.prepare` if it's set.
Returns:
Type | Description  
---|---  
`ToolDefinition[](https://ai.pydantic.dev/api/tools/#pydantic_ai.tools.ToolDefinition "pydantic_ai.tools.ToolDefinition") | None` |  return a `ToolDefinition` or `None` if the tools should not be registered for this run.  
Source code in `pydantic_ai_slim/pydantic_ai/tools.py`
```
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
```
| ```
async defprepare_tool_def(self, ctx: RunContext[AgentDepsT]) -> ToolDefinition | None:
"""Get the tool definition.
  By default, this method creates a tool definition, then either returns it, or calls `self.prepare`
  if it's set.
  Returns:
    return a `ToolDefinition` or `None` if the tools should not be registered for this run.
  """
  tool_def = ToolDefinition(
    name=self.name,
    description=self.description,
    parameters_json_schema=self._parameters_json_schema,
  )
  if self.prepare is not None:
    return await self.prepare(ctx, tool_def)
  else:
    return tool_def

```
  
---|---  
####  run `async`
```
run(
  message: ToolCallPart[](https://ai.pydantic.dev/api/messages/#pydantic_ai.messages.ToolCallPart "pydantic_ai.messages.ToolCallPart"),
  run_context: RunContext[](https://ai.pydantic.dev/api/tools/#pydantic_ai.tools.RunContext "pydantic_ai.tools.RunContext")[AgentDepsT[](https://ai.pydantic.dev/api/tools/#pydantic_ai.tools.AgentDepsT "pydantic_ai.tools.AgentDepsT")],
) -> ToolReturnPart[](https://ai.pydantic.dev/api/messages/#pydantic_ai.messages.ToolReturnPart "pydantic_ai.messages.ToolReturnPart") | RetryPromptPart[](https://ai.pydantic.dev/api/messages/#pydantic_ai.messages.RetryPromptPart "pydantic_ai.messages.RetryPromptPart")