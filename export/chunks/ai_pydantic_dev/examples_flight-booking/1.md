---
url: https://ai.pydantic.dev/examples/flight-booking/
session_id: pydantic_ai_docs
chunk_number: 1
title: Flight Booking Example
summary: This document presents a multi-agent workflow for flight booking, showcasing agent delegation, programmatic hand-offs, and usage limits. A series of agents collaborate to find the best flight for a user, with a defined control flow that includes a search agent, extraction agent, and human confirmation.
embedding: [-0.03221525996923447, 0.0013906416716054082, 0.026744283735752106, -0.04159407690167427, 0.015985511243343353, -0.003575063543394208, 0.020931370556354523, 0.034071486443281174, 0.005925873760133982, 0.02867378108203411, 0.03675812482833862, -0.04342588037252426, -0.010367989540100098, -0.049116671085357666, -0.026158107444643974, -0.0137140778824687, -0.019429294392466545, 0.02813645265996456, 0.022103723138570786, 0.04603924602270126, 0.018342426046729088, -0.022006027400493622, 0.01916063018143177, 0.0663844421505928, -0.07209965586662292, -0.026793131604790688, 0.01945371925830841, 0.032703742384910583, -0.0014417794300243258, -0.033998213708400726, 0.07859644293785095, -0.010935847647488117, 0.011760157532989979, 0.00432610185816884, 0.027159491553902626, 0.005895344074815512, -0.01940487138926983, 0.0537816546857357, -0.03304567560553551, -0.010184809565544128, 0.029382076114416122, -0.0192827507853508, 0.030383460223674774, 0.009855085052549839, -0.028453964740037918, 0.02029634639620781, -0.00538244005292654, 0.010807621292769909, 0.025425387546420097, 0.024533912539482117, -0.034779779613018036, -0.0018470652867108583, -0.025034604594111443, -0.0015455815009772778, -0.02218920737504959, 0.02487584762275219, -0.03368069976568222, 0.013579745776951313, 0.0177440382540226, -0.037051212042570114, -0.013530897907912731, -0.01157087180763483, -0.007082961034029722, 0.05456322431564331, -0.006814296822994947, 0.04159407690167427, -0.031091757118701935, 0.014629978686571121, -0.056565992534160614, -0.004545917734503746, -0.00034441662137396634, 0.026255803182721138, -0.04552634432911873, -0.04606367275118828, -0.008542295545339584, -0.03592770919203758, -0.0008639991283416748, 0.05871530622243881, -0.02040625549852848, -0.06936416774988174, 0.03277701139450073, -0.015521454624831676, 0.007028006948530674, 0.011979973874986172, -0.033876094967126846, -0.031091757118701935, -0.0666775330901146, -0.013066842220723629, -0.02867378108203411, -0.037271030247211456, -0.027696819975972176, 0.021383214741945267, -0.022506719455122948, 0.013640806078910828, 0.09945454448461533, 0.039957668632268906, 0.011106816120445728, -0.022702110931277275, 0.011210617609322071, -7.260416896315292e-05, 0.029479771852493286, -0.0029751488473266363, -0.032630469650030136, 0.031506963074207306, 0.023874463513493538, -0.014324678108096123, -0.02945534884929657, 0.02071155607700348, -0.022579992190003395, -0.009592527523636818, -0.07654482871294022, -0.00170662731397897, 0.02232353948056698, 0.02254335582256317, -0.023117318749427795, -0.005074086599051952, 0.014654402621090412, -0.023666860535740852, 0.0333387665450573, -0.01831800304353237, -0.03443784639239311, -0.015374910086393356, 0.010642759501934052, -0.013311082497239113, 0.010404625907540321, 0.0021004644222557545, -0.019588051363825798, -0.05944802612066269, -0.02838069200515747, 0.022579992190003395, 0.03495074808597565, -0.016351871192455292, -0.009421559050679207, 0.0009739071247167885, -0.0370267890393734, 0.00654563307762146, -0.023715708404779434, 0.011839536018669605, -0.006991371046751738, 0.014544494450092316, 0.013640806078910828, -0.010306929238140583, 0.018635515123605728, 0.051974281668663025, -0.03326549381017685, 0.02635350078344345, 0.008939185179769993, 0.025449812412261963, -0.032166413962841034, 0.0381014458835125, 0.03458438813686371, -0.004145974759012461, -0.04796874523162842, 0.004310836549848318, -0.029137836769223213, 0.016400719061493874, -0.006362453103065491, 0.01624196209013462, 0.03783278167247772, -0.019258327782154083, -0.012871449813246727, 0.020540587604045868, -0.02284865640103817, -0.012266956269741058, -0.04105674847960472, -0.02303183637559414, -0.006099895108491182, 0.01743873953819275, -0.025327691808342934, -0.055002856999635696, -0.025254419073462486, -0.026817556470632553, 0.0014547547325491905, 0.0037857205606997013, 0.06140194460749626, -0.03346088528633118, -0.022286903113126755, -0.02450948767364025, 0.013616382144391537, -0.04193601384758949, -0.027745667845010757, -0.01737767830491066, -0.02974843606352806, -0.02547423541545868, -0.037930477410554886, -0.011222830042243004, 0.03390051797032356, 0.010844257660210133, -0.025205571204423904, 0.028991293162107468, 0.043645694851875305, 0.0084507055580616, -0.033167798072099686, 0.013823986053466797, -0.022812020033597946, 0.019832290709018707, 0.07688676565885544, -0.007968331687152386, 0.02825857326388359, 0.005678581073880196, 0.02684197947382927, -0.011082391254603863, 0.014825370162725449, 0.02647561952471733, -0.005306114908307791, -0.04320606216788292, -0.03348530828952789, -0.038052596151828766, 0.00961084570735693, -0.0015692422166466713, 0.012034927494823933, -0.012273062020540237, 0.041203293949365616, -0.04474477469921112, -0.0631604716181755, -0.046503301709890366, -0.023007411509752274, 0.010954165831208229, -0.0003491869429126382, 0.04491574317216873, -0.014752098359167576, 0.004787104669958353, -0.00251414580270648, -0.015790117904543877, -0.020369619131088257, 0.0017997437389567494, 0.03675812482833862, -0.07063421607017517, -0.01756085827946663, 0.022934138774871826, 0.034120332449674606, 0.0036208585370332003, 0.0002783954842016101, -0.009702435694634914, 0.03106733225286007, -0.027403732761740685, -0.022921927273273468, -0.034071486443281174, 0.009238379076123238, 0.01856224238872528, -0.026133684441447258, 0.004777945578098297, 0.003645282471552491, -0.03673370182514191, 0.0021462594158947468, 0.024558335542678833, -0.0258161723613739, -0.06169503182172775, 0.05920378491282463, 0.040201909840106964, 0.043474726378917694, 0.012218107469379902, 0.006035781931132078, -0.05094847083091736, 0.011406010016798973, 0.02017422765493393, 0.010929741896688938, -0.022457871586084366, -0.006747131235897541, -0.0040910206735134125, -0.02100464329123497, 0.01730440743267536, -0.05724986642599106, 0.026671012863516808, -0.014629978686571121, 0.01139379758387804, 0.010508427396416664, 0.00027915873215533793, -0.011125133372843266, -0.019441507756710052, -0.004240617621690035, 0.05754295364022255, 0.026133684441447258, 0.004707726649940014, -0.07937800884246826, 0.004735203925520182, -0.01481315866112709, -0.0020729873795062304, 0.025913868099451065, -0.02231132797896862, -0.04115444794297218, 0.026280228048563004, 0.04503786191344261, 0.024301882833242416, 0.00664943503215909, 0.033412035554647446, 0.007058537099510431, -0.02272653579711914, -0.033118948340415955, 0.02218920737504959, 0.018647726625204086, 0.024436214938759804, 0.03145811706781387, -0.023251650854945183, 0.020369619131088257, 0.05505170300602913, 0.03604982793331146, 0.038834165781736374, 0.01909957081079483, 0.015558090060949326, -0.007547017186880112, -0.020906947553157806, -0.022921927273273468, -0.003094215877354145, -0.0061853788793087006, 0.024851424619555473, -0.03458438813686371, 0.016278598457574844, 0.03348530828952789, 0.008756005205214024, -0.022213632240891457, 0.06863144785165787, 0.010148173198103905, -0.02464381977915764, -0.014288041740655899, -0.01730440743267536, 0.07757063955068588, -0.019356023520231247, 0.042571038007736206, -0.008084345608949661, -0.02647561952471733, -0.02487584762275219, 0.08230889588594437, 0.02249450795352459, -0.014190346002578735, -0.017414314672350883, 0.04955630376935005, 0.02784336358308792, -0.054954007267951965, 0.01541154645383358, -0.03629406914114952, -0.02303183637559414, -0.0094887251034379, 0.01825694367289543, -0.02593829110264778, 0.0018608038080856204, -0.011137345805764198, 0.05720101669430733, 0.011119027622044086, 0.05451437458395958, -0.030139220878481865, -0.003022470511496067, -0.051436953246593475, -0.020076531916856766, -0.03504844382405281, 0.060424983501434326, 0.032288532704114914, 0.019661322236061096, 0.038345687091350555, -0.014520070515573025, -0.024240823462605476, 0.00742489704862237, -0.0051534646190702915, 0.0726858377456665, -0.00432915473356843, -0.027599124237895012, -0.02833184413611889, 0.01980786770582199, -0.018757635727524757, 0.007968331687152386, -0.09706099331378937, 0.004646666813641787, -0.0032514454796910286, 0.02195717953145504, -0.011949444189667702, 0.03819914162158966, -0.009116259403526783, -0.030017100274562836, -0.011406010016798973, 0.03731987625360489, 0.05041114240884781, 0.0027080113068223, -0.055540185421705246, -0.010972484014928341, -0.05075307935476303, -0.05529594421386719, -0.008310267701745033, 0.02492469549179077, -0.041984863579273224, 0.012810389511287212, 0.0016089312266558409, -0.016034359112381935, -0.028405116870999336, 0.01837906241416931, 0.029724013060331345, 0.031922172755002975, -0.030627701431512833, -0.000992988352663815, 0.037808358669281006, 0.02867378108203411, 0.03661158308386803, -0.019087359309196472, 0.0014791787834838033, 0.016400719061493874, 0.0065334211103618145, -0.0032667105551809072, 0.07195311784744263, 0.01839127391576767, 0.04320606216788292, -0.018342426046729088, 0.008407963439822197, -0.01702352985739708, 0.013311082497239113, -0.010123749263584614, -0.038467805832624435, 0.010374095290899277, 0.06447937339544296, -0.0025110929273068905, -0.00862777978181839, -0.004866482689976692, 0.02916225977241993, -0.040250759571790695, 0.025449812412261963, -0.004658878780901432, 0.017621919512748718, 0.009952781721949577, -0.052755847573280334, 0.011296101845800877, 0.045184407383203506, 0.055247098207473755, 0.007314989343285561, -0.028698204085230827, 0.026329075917601585, 0.012230319902300835, -0.04230237379670143, 0.019893351942300797, 0.02446063980460167, -0.028576083481311798, -0.008597249165177345, -0.03123830072581768, 0.021285519003868103, 0.023581376299262047, 0.008377433754503727, 0.018220307305455208, -0.016864774748682976, -0.011277783662080765, 0.04051942378282547, 0.010319141671061516, -0.0031110073905438185, -0.012785965576767921, 0.006350241135805845, -0.048457223922014236, 0.03670927882194519, 0.023422619327902794, -0.023837827146053314, -0.02450948767364025, -0.011406010016798973, -0.028112027794122696, 0.02391109988093376, -0.01594887487590313, -0.03497517481446266, -0.02962631732225418, -0.04987381398677826, 0.03236180543899536, -0.02982170879840851, -0.0327281653881073, 0.027696819975972176, 0.00925669725984335, 0.043645694851875305, -0.030969636514782906, 0.007638607174158096, 0.02755027636885643, -0.027623549103736877, 0.034901902079582214, -0.019893351942300797, 0.016986895352602005, 0.045379798859357834, -0.04398763179779053, 0.0016547262202948332, 0.014239193871617317, 0.043889936059713364, -0.019649110734462738, -0.01445901021361351, -0.033534158021211624, -0.028722628951072693, -0.024314096197485924, 0.02987055666744709, -0.018232518807053566, -0.025083452463150024, 0.009183425456285477, 0.029137836769223213, 0.036391764879226685, -0.021468698978424072, 0.05832451954483986, 0.03106733225286007, 0.06135309860110283, -0.011900595389306545, -0.031922172755002975, -0.012389075942337513, 0.02891802042722702, 0.015545878559350967, 0.0358055904507637, 0.034779779613018036, -0.01270048227161169, 0.0029171418864279985, -0.01898966357111931, -0.020552799105644226, -0.006386877037584782, -0.009983311407268047, -0.014056013897061348, 0.05104616656899452, -0.01892860233783722, -0.010306929238140583, 0.006600587163120508, 0.01116176974028349, -0.03390051797032356, 0.0032422863878309727, -0.032459501177072525, -0.013127901591360569, 0.03136042132973671, -0.027525851503014565, -0.02969958819448948, 0.015582513995468616, 0.011167875491082668, -0.024143127724528313, -0.006218961905688047, 0.008383539505302906, 0.011320525780320168, -0.02862493321299553, -0.0017478427616879344, 0.010117643512785435, -0.0032789225224405527, -0.008456811308860779, 0.03678254783153534, 0.014202558435499668, -0.007455427199602127, 0.01195554994046688, -0.0857282504439354, -0.0036727595143020153, 0.007101279217749834, 0.013909470289945602, 0.010313035920262337, -0.02540096454322338, 0.023056259378790855, -0.04672311991453171, 0.023459255695343018, 0.02689082734286785, 0.010484003461897373, -0.04599040001630783, -0.05016690492630005, -0.016156477853655815, 0.00028755448875017464, -0.01229138020426035, -0.016339657828211784, -0.0029308805242180824, -0.03321664407849312, 0.014288041740655899, 0.009262803010642529, -0.007107384968549013, -0.0084507055580616, 0.03443784639239311, 0.03348530828952789, -0.008078238926827908, -0.017768463119864464, 0.008151511661708355, 0.006875357124954462, 0.010197021998465061, -0.027208339422941208, 0.036562733352184296, -0.012034927494823933, 0.005074086599051952, -0.03094521351158619, -0.0019371288362890482, -0.010972484014928341, -0.014165922068059444, 0.01570463366806507, -0.005651103798300028, -0.022921927273273468, -0.0013013414572924376, -0.013359930366277695, -0.0005014553316868842, -0.012187577784061432, -0.007082961034029722, -0.03238622844219208, 0.01945371925830841, 0.01660832203924656, 0.01754864677786827, -0.019490355625748634, -0.022470083087682724, 0.03648946061730385, -0.022921927273273468, -0.020919159054756165, 0.014935278333723545, -0.0026438983622938395, -0.006289180833846331, -0.02226248010993004, -0.007962225005030632, 0.016852563247084618, -0.03409590944647789, 0.012236425653100014, 0.011882278136909008, -0.01229138020426035, -0.0058159660547971725, -0.00770577322691679, -0.023776767775416374, 0.034535542130470276, 0.01748758740723133, 0.02969958819448948, -0.011033543385565281, 0.016327446326613426, -0.013311082497239113, -0.01232190988957882, -0.027818940579891205, -0.012022715993225574, 0.004790157545357943, -0.011699098162353039, 0.033998213708400726, 0.022457871586084366, 0.009061305783689022, 0.01963689923286438, 0.0056205736473202705, 0.00010475607996340841, -0.0033460885751992464, -0.03160466253757477, 0.0055900439620018005, 0.0072356113232672215, -0.05026460066437721, -0.004753521643579006, 0.058519914746284485, -0.03837011009454727, 0.02315395511686802, 0.000792253646068275, -0.00520536582916975, -0.015460394322872162, -0.022396812215447426, 0.0037277135998010635, -0.01636408269405365, -0.009684117510914803, -0.0020073477644473314, 0.0029079830273985863, -0.051730040460824966, 0.03409590944647789, 0.02374013140797615, 0.004634454846382141, 0.004243670497089624, -0.026084836572408676, -0.01082593947649002, 0.0014181187143549323, -0.015167306177318096, -0.025742899626493454, 0.025913868099451065, -0.0018928602803498507, 0.019551414996385574, 0.007064643315970898, 0.0258894432336092, 0.02367907203733921, -0.02820972353219986, 0.004622242879122496, 0.02289750427007675, -0.021151186898350716, -0.004463486839085817, -0.014715461991727352, 0.013970530591905117, 0.014165922068059444, 0.02129773050546646, 0.009616951458156109, -0.03832126036286354, -0.024362944066524506, 0.005522877909243107, 0.010337459854781628, -0.04955630376935005, 0.04892127960920334, -0.005916715133935213, 0.012462347745895386, -0.02011316642165184, 0.014056013897061348, 0.02333713509142399, 0.040421728044748306, 0.008041603490710258, -0.002141679869964719, -0.07288122922182083, -0.014300254173576832, 0.022238055244088173, 0.004136815667152405, -0.01648620329797268, 0.015900027006864548, 0.004866482689976692, -0.0036422295961529016, -0.018293578177690506, 0.05158349499106407, -0.032044291496276855, 0.01802491396665573, -0.03404705971479416, 0.021737363189458847, 0.0633070170879364, -0.026280228048563004, -0.005724376067519188, -0.00832858495414257, 0.016559474170207977, 0.045721735805273056, 0.03878531977534294, 0.01541154645383358, -0.006447936873883009, 0.04064154252409935, 0.0005071797058917582, 0.009085729718208313, -0.012187577784061432, 0.011918913573026657, -0.008878125809133053, -0.08318815380334854, -0.02755027636885643, 0.017279982566833496, 0.024485064670443535, -0.0037887736689299345, -0.028063179925084114, -0.025254419073462486, 0.018366850912570953, 0.015692422166466713, 0.03526826202869415, -0.021334366872906685, -0.018757635727524757, 0.01951477862894535, -0.01833021454513073, -0.01773182675242424, -0.051681190729141235, 0.014825370162725449, -0.07073191553354263, 0.020491739735007286, 0.007656925357878208, -0.003071318380534649, -0.008279737085103989, 0.04450053349137306, -0.004469592589884996, -0.0333387665450573, -0.024191975593566895, -0.05974111333489418, -0.03482862934470177, -0.004200928844511509, 0.01192502025514841, -0.0215908195823431, 0.03148254007101059, -0.011314420029520988, 0.015692422166466713, -0.024228611961007118, 0.02369128353893757, -0.017353255301713943, -0.04958072677254677, 0.009268909692764282, -0.060131896287202835, -0.0034315725788474083, -0.00020397859043441713, -0.012474560178816319, -0.01886754296720028, -0.0025965769309550524, -0.037759508937597275, -0.02623138017952442, 0.027599124237895012, 0.024191975593566895, -0.049653999507427216, 0.013201174326241016, -0.038712047040462494, 0.008169828914105892, 0.0073394132778048515, -0.0338028222322464, 0.015179518610239029, 0.049605149775743484, -0.010325247421860695, -0.0029308805242180824, -0.02171294018626213, 0.004054384771734476, -0.025034604594111443, 0.0051229349337518215, -0.030261341482400894, 0.008285842835903168, -0.014825370162725449, -0.006466255057603121, 0.051436953246593475, -0.023776767775416374, -0.003981112502515316, 0.025962715968489647, -0.04012863710522652, -0.005064927972853184, -0.007376049179583788, 0.007131808903068304, 0.009195636957883835, -0.02606041170656681, -0.015875602141022682, 0.000532748585101217, 0.01731661893427372, -0.02796548418700695, 0.01986892707645893, 0.0076202889904379845, -0.010007735341787338, 0.013665230013430119, 0.02444842830300331, -0.015240577980875969, -0.001011306419968605, -0.01136937364935875, -0.016156477853655815, -0.026939677074551582, -0.034779779613018036, -0.0028362374287098646, 0.005559513811022043, -0.026524467393755913, -0.02058943547308445, -0.005559513811022043, 0.018366850912570953, -0.08553285896778107, -0.010496215894818306, -0.0184401236474514, -0.010282505303621292, 0.04342588037252426, -0.024839211255311966, 0.05422128736972809, 0.036929093301296234, 0.0008273631101474166, -0.016278598457574844, -0.004567288793623447, 0.03468208387494087, -0.013262233696877956, -0.04012863710522652, 0.013188961893320084, -0.022347964346408844, 0.007583653088659048, 0.022457871586084366, 0.009244485758244991, -0.028356269001960754, -0.029675165191292763, -0.02385004051029682, -0.0631604716181755, 0.006686070933938026, -0.06047383323311806, -0.0028652409091591835, -0.0033918835688382387, 0.016388505697250366, 0.04171619936823845, 0.011735733598470688, -0.01522836647927761, -0.03670927882194519, 0.022164782509207726, -0.0074676391668617725, 0.0021187823731452227, 0.07747294008731842, -0.00871326308697462, 0.026695435866713524, 0.01648620329797268, 0.025620779022574425, -0.017109014093875885, 0.0034498905297368765, 0.028942445293068886, 0.012614998035132885, 0.033289916813373566, -0.014776522293686867, -0.028356269001960754, -0.03070097230374813, -0.0108320452272892, -0.0011685359058901668, 0.025669628754258156, -0.007772939279675484, 0.038467805832624435, -0.007870635017752647, 0.013127901591360569, 0.03854107856750488, -0.04635675996541977, 0.028649356216192245, 0.0019127047853544354, 0.005196206737309694, 0.030065948143601418, 0.02928438037633896, 0.011473176069557667, -0.003575063543394208, -0.017756251618266106, 0.0052816909737885, -0.027159491553902626, 0.02813645265996456, -0.024375155568122864, -0.01583896577358246, -0.002990413922816515, 0.005883132107555866, 0.022812020033597946, 0.001631828723475337, -0.01707237772643566, 0.001437963219359517, 0.014141498133540154, 0.03358300402760506, -0.019294962286949158, -0.00664943503215909, 0.01666938327252865, -0.037344302982091904, -0.0004255119420122355, 0.028038756921887398, -0.031140604987740517, -0.009384923614561558, 0.006182326003909111, -0.01730440743267536, -0.014336890541017056, 0.02022307552397251, 0.008749899454414845, 0.009647481143474579, -0.010716031305491924, 0.0013326347107067704, -0.04249776527285576, 0.013555321842432022, -0.045306526124477386, 0.03011479601264, 0.03592770919203758, 0.004991655703634024, 0.04017748683691025, 0.021322155371308327, 0.025913868099451065, 0.00298888748511672, -0.023788979277014732, 0.057982586324214935, -0.009372711181640625, -0.04022633284330368, -0.04528210312128067, -0.027159491553902626, -0.0029919403605163097, 0.006722706835716963, -0.0427175834774971, 0.02796548418700695, -0.016315234825015068, -0.00987340323626995, 0.03812586888670921, -0.023227227851748466, -0.0431816391646862, -0.01785394735634327, 0.015790117904543877, 0.002762965392321348, 0.018953027203679085, 0.03878531977534294, -0.01270048227161169, -0.025865020230412483, -0.03717333450913429, -0.014556705951690674, -0.03529268503189087, -0.0129447216168046, 0.02375234290957451, -0.01229138020426035, -0.0176707673817873, 0.004591712728142738, 0.013970530591905117, -0.00149444374255836, 0.04804201424121857, -0.02493690699338913, 0.013201174326241016, -0.029064564034342766, 0.02487584762275219, -0.030627701431512833, -0.02522999607026577, 0.018879754468798637, -0.030676549300551414, 0.001735630794428289, -0.003008731873705983, -0.006331922952085733, -0.025694051757454872, 0.04159407690167427, 0.01288366224616766, 0.04975169524550438, 0.01502076257020235, 0.052804697304964066, 0.015045186504721642, 0.03509729355573654, -0.016986895352602005, -0.06320932507514954, 0.03028576448559761, -0.01927053928375244, 0.008017179556190968, 0.04848164692521095, 0.017170075327157974, -0.011943337507545948, 0.012932510115206242, 0.015277214348316193, -0.04325491189956665, 0.019856715574860573, 0.02040625549852848, -0.033998213708400726, -0.0401042141020298, 0.007833999581634998, -0.0024836158845573664, -0.018525606021285057, 0.03231295570731163, 0.056859079748392105, 0.0507042333483696, -0.001345610013231635, -0.009159001521766186, 0.022457871586084366, 0.01714565046131611, 7.8137731179595e-05, -0.024851424619555473, -0.013262233696877956, 0.01934381015598774, -0.006325817201286554, -0.001230359193868935, 0.026744283735752106, -0.0029507249128073454, 0.02576732449233532, 0.018415698781609535, -0.003306399565190077, 0.0017112067434936762, 0.04264431074261665, -0.002071460708975792, 0.044476110488176346, 0.0490189753472805, -0.001895913272164762, -0.01576569490134716, -0.0023691284004598856, 0.025669628754258156, 0.006924204993993044, 0.008615567348897457, 0.0022622733376920223, -0.010538958013057709, 0.040543846786022186, -0.008530083112418652, -0.012132624164223671, -0.008365221321582794, 0.006686070933938026, -0.018879754468798637, 0.02135879173874855, -0.0028377638664096594, 0.025913868099451065, -0.0015860337298363447, -0.0005613704561255872, -0.045135557651519775, -0.030505580827593803, -0.02676870860159397, 0.018049338832497597, -0.02212814800441265, -0.03946918994188309, -0.029675165191292763, 0.0033979895524680614, 0.0316535085439682, 0.03612310066819191, -0.01237686350941658, -0.009097941219806671, 0.009830661118030548, -0.00471383286640048, -0.01837906241416931, 0.003401042427867651, -0.007895058952271938, -0.009739071130752563, 0.028063179925084114, -0.016999106854200363, -0.010923636145889759, -0.0021661038044840097, 0.01625417359173298, 0.001121977693401277, -0.0032514454796910286, 0.01808597519993782, 0.009055199101567268, -0.011979973874986172, 0.0480908639729023, 0.015301638282835484, 0.03429130092263222, 0.04098347947001457, -0.020723767578601837, 0.006869250908493996, 0.011051861569285393, 0.02630465291440487, 0.016107629984617233, -0.02308068424463272, 0.03797932714223862, -0.024546124041080475, 0.016632746905088425, 0.0235081035643816, -0.01826915517449379, -0.010276399552822113, -0.022653263062238693, -0.0045581297017633915, -0.028527235612273216, -0.007418791297823191, -0.017279982566833496, -0.018366850912570953, -0.024314096197485924, 0.013518686406314373, 0.0028423434123396873, -0.002475983463227749, -0.01707237772643566, -0.009952781721949577, 0.0038895225152373314, 0.010746561922132969, -0.010893105529248714, 0.008908655494451523, 0.0031003218609839678, -0.0014410162111744285, -0.017780674621462822, -0.0354880765080452, -0.0104107316583395, 0.020308559760451317, -0.008175935596227646, 0.009769601747393608, 0.0006979922181926668, 0.014739885926246643, 0.007540910970419645, -0.013848409987986088, -0.011167875491082668, 0.0033796716015785933, 0.05216967314481735, 0.0013761399313807487, 0.009159001521766186, 0.017182286828756332, 0.003828462678939104, -0.0031812265515327454, -0.001528026768937707, -0.0027232763823121786, -0.012834814377129078, -0.003434625454246998, 0.02403322048485279, 0.022274691611528397, -0.013750714249908924, -0.004051331430673599, 0.033118948340415955, 0.014568918384611607, -0.015729058533906937, -0.037466421723365784, 0.01903851144015789, 0.016315234825015068, -0.019075147807598114, -0.034315723925828934, 0.01151591818779707, -0.005913661792874336, 0.0003049184160772711, 0.020442891865968704, -0.04491574317216873, -0.001223489991389215, -0.018537819385528564, 0.0003772363706957549, 0.0020684078335762024, 0.020259711891412735, -0.02404543198645115, 0.024082068353891373, -0.01952699013054371, -0.03194659575819969, 0.014300254173576832, 0.0017203657189384103, 0.01636408269405365, -0.014593342319130898, 0.016510626301169395, 0.007681349292397499, 0.008169828914105892, -0.0012853131629526615, -0.05182773619890213, -0.01026418711990118, -0.028649356216192245, -0.014300254173576832, 0.018782058730721474, -0.029797283932566643, -0.024851424619555473, -0.031165027990937233, 0.015521454624831676, -0.014800946228206158, 0.013799562118947506, 0.018794270232319832, -0.007522593252360821, -0.006276968866586685, 0.04147195816040039, 0.0527070015668869, 0.0694618672132492, 0.01576569490134716, -0.038883015513420105, 0.042986247688531876, 0.05133925750851631, -0.006356346886605024, 0.031213877722620964, 0.0005609888467006385, -0.009690223261713982, -0.01252951379865408, -0.0182080939412117, 0.02143206261098385, 0.026206955313682556, -0.01406822632998228, 0.013994954526424408, -0.0005083245923742652, 0.015924450010061264, 0.006099895108491182, 0.021578608080744743, -0.008218677714467049, 0.025156723335385323, 0.04345030337572098, -0.012047139927744865, -0.02321501635015011, 0.02295856364071369, -0.0016806767089292407, -0.006002198904752731, -0.04303509369492531, 0.01737767830491066, 0.03236180543899536, 0.029479771852493286, -0.054123591631650925, 0.004118497483432293, -0.020210864022374153, -0.049531880766153336, 0.01288366224616766, 0.01773182675242424, 0.018134823068976402, 0.0015616097953170538, 0.01577790640294552, -0.006643328815698624, 0.011228935793042183, 0.011296101845800877, 0.0050191329792141914, 0.006643328815698624, 0.021871695294976234, 0.011351055465638638, -0.03123830072581768, 0.020674919709563255, 0.015338274650275707, 0.01505739800632, 0.029186684638261795, -0.010893105529248714, -0.017829522490501404, -0.02867378108203411, -0.01607099361717701, 0.010844257660210133, 0.03148254007101059, 0.036025404930114746, 0.03438899666070938, -0.025913868099451065, -0.023166168481111526, -0.005278637632727623, 0.02410649135708809, 0.004390214569866657, -0.04437841475009918, 0.006716601084917784, 0.01288366224616766, 0.022934138774871826, 0.05236506462097168, -0.008981927298009396, -0.019722383469343185, 0.0017234187107533216, 0.010306929238140583, 0.008389645256102085, 0.028991293162107468, 0.003046894446015358, -0.01695025898516178, -0.000792253646068275, 0.03194659575819969, 0.009952781721949577, 0.004390214569866657, 0.0019584998954087496, 0.01350647397339344, -0.02011316642165184, -0.03717333450913429, 0.021053491160273552, 0.018171459436416626, -0.036977943032979965, 0.016522837802767754, 0.015851179137825966, 0.010160385631024837, -0.018183670938014984, 0.02017422765493393, 0.020565010607242584, 0.014935278333723545, -0.009336075745522976, 0.009293333627283573, -0.0005747273098677397, 0.00513209355995059, -0.004216193687170744, -0.01802491396665573, -0.019710170105099678, 0.019185055047273636, -0.023190591484308243, 0.029137836769223213, 0.004072702489793301, -0.010685501620173454, -0.01588781364262104, -0.001528026768937707, -0.007205081172287464, -0.006490678992122412, -0.009653587825596333, -0.0010716031538322568, -0.013872833922505379, 0.005571725778281689, -0.006838721223175526, -0.0037826676853001118, -0.006295287050306797, -0.007192869205027819, -0.005220630671828985, -0.014056013897061348, -0.0068875690922141075, -0.023373771458864212, 0.0007907271501608193, 0.039005134254693985, 0.01541154645383358, -0.009781813248991966, 0.017402103170752525, -0.030969636514782906, 0.0008525503799319267, 0.017878370359539986, 0.001914231339469552, -0.0027141175232827663, -0.012639421969652176, 0.010435155592858791, 0.008291949518024921, 0.01249287836253643, -0.006734919268637896, 0.021126763895154, -0.015814542770385742, 0.03766181319952011, -0.011686885729432106, -0.05094847083091736, -0.012224214151501656, 0.00682650925591588, 0.021126763895154, -0.012517302297055721, 0.008560613729059696, 0.02552308328449726, 0.021566394716501236, 0.001358585199341178, 0.009372711181640625, -0.004417691845446825, 0.0065334211103618145, -0.038956284523010254, -0.0073943673633039, -0.027281612157821655, 0.007772939279675484, -0.018879754468798637, 0.02718391641974449, 0.0009700909140519798, 0.006252544932067394, 0.01195554994046688, 0.0025919973850250244, -0.005300008691847324, -0.0014249879168346524, 0.0003535756259225309, 0.013567534275352955, -0.0058464957401156425, 0.0031751205679029226, -0.03959130868315697, 0.018171459436416626, 0.0040818615816533566, 0.03057885356247425, -0.004497069865465164, 0.03690467029809952, -0.02278759516775608, -0.0025538348127156496, -0.006899781059473753, -0.0008411016315221786, -0.009024669416248798, 0.0026377923786640167, -0.0215908195823431, -0.004020801745355129, -0.013457626104354858, -0.02767239697277546, -0.012389075942337513, -0.006600587163120508, -0.023959947749972343, 0.020491739735007286, 0.004176504444330931, 0.017121227458119392, 0.013030205853283405, 0.02058943547308445, 0.012242532335221767, -0.028429539874196053, -0.006850933190435171, 0.015277214348316193, 0.04618579149246216, -0.017414314672350883, -0.005586991086602211, -0.029601892456412315, -0.013005781918764114, -0.007070749066770077, -0.026280228048563004, 0.0012540199095383286, -0.009946675971150398, 0.017231134697794914, 0.011894489638507366, 0.007638607174158096, -0.0023920258972793818, -0.0025355168618261814, -0.00023202803276944906, 0.012242532335221767, -0.019502567127346992, 0.026793131604790688, 0.0026515310164541006, 0.025156723335385323, -0.01404380239546299, -0.010300823487341404, 0.006118212826550007, -0.004439062904566526, -0.03724660724401474, 0.01079540979117155, 0.02676870860159397, 0.01624196209013462, 0.006795979104936123, -0.006893674843013287, -0.037808358669281006, 0.04386550933122635, -0.0137140778824687, 0.03219083696603775, 0.014385738410055637, 0.024167552590370178, -0.019478142261505127, -0.006502890959382057, 0.02470487914979458, 0.027477003633975983, -0.011534235440194607, -0.004381055478006601, 0.014141498133540154, -0.05124155804514885, 0.036269646137952805, 0.004900065716356039, -0.0060663120821118355, -0.00351705658249557, -0.006741025019437075, -0.019075147807598114, -0.0018775953212752938, 0.031091757118701935, -0.007412685081362724, -0.0331922210752964, -0.03209314122796059, 0.021908331662416458, -0.012059351429343224, 0.018293578177690506, -0.006741025019437075, -0.021993815898895264, 0.010154279880225658, -0.013823986053466797, -0.005519825033843517, -0.03155581280589104, 0.006582268979400396, 0.03646503761410713, 0.007345519028604031, -0.044012054800987244, 0.020748190581798553, -0.05764064937829971, 0.009262803010642529, 0.022347964346408844, -0.013518686406314373, -0.03741757199168205, -0.022982986643910408, -0.025498660281300545, 0.004069649614393711, 0.0032087035942822695, -0.00685703894123435, -0.0025965769309550524, -0.016437355428934097, 0.0192827507853508, 0.0028698204550892115, 0.009348287247121334, -0.004710779525339603, -0.004158186726272106, -0.00827363133430481, 0.00461003091186285, 0.005910608917474747, 0.011821217834949493, -0.013396565802395344, 0.01695025898516178, 0.008517871610820293, 0.035146139562129974, 0.007174551021307707, 0.0184401236474514, 0.017780674621462822, 0.010740455240011215, -0.007986648939549923, 0.01386062242090702, -0.005544248968362808, -0.017121227458119392, 0.0031232195906341076, 0.0528535433113575, 0.003550639608874917, 0.011522023938596249, -0.005095457658171654, 0.017695190384984016, 0.011424328200519085, -0.03201986849308014, -0.009653587825596333, -0.0040910206735134125, -0.006148742977529764, 0.022030452266335487, -0.005217577796429396, 0.01443458627909422, 0.055540185421705246, -0.010856470093131065, -0.016815926879644394, -0.026988524943590164, -0.0006521972245536745, 0.01174794603139162, -0.0137140778824687, 0.022995200008153915, -0.036440614610910416, 0.040250759571790695, -0.00580070074647665, -0.003593381494283676, 0.014764309860765934, 0.029797283932566643, -0.005498453974723816, 0.023410407826304436, 0.027623549103736877, 0.01607099361717701, -0.009177319705486298, 0.013494262471795082, 0.026622164994478226, 0.019014086574316025, 0.017621919512748718, 0.028112027794122696, 0.0042039817199110985, -0.014214769937098026, -0.02772124484181404, -0.008499553427100182, 0.00788895320147276, 0.006869250908493996, 0.01898966357111931, -0.007247823290526867, 0.0031720674596726894, -0.030310189351439476, -0.007485957350581884, 0.028942445293068886, 0.03292355686426163, 0.011699098162353039, -0.0033979895524680614, 0.02654889225959778, -0.009525361470878124, 0.02671986073255539, 0.009824555367231369, -0.025254419073462486, 0.0035078974906355143, -0.013372141867876053, 0.0015181044582277536, 0.011387691833078861, -0.008365221321582794, -0.00014263237244449556, 0.022445660084486008, -0.013933894224464893, -0.03922494873404503, 0.007205081172287464, 0.025327691808342934, 0.026988524943590164, -0.015313850715756416, 0.033778395503759384, -0.017597494646906853, -0.021993815898895264, -0.027086220681667328, -0.03343646228313446, 0.014446797780692577, 0.005232842639088631, -0.022775383666157722, -0.0034743144642561674, -0.014971914701163769, -0.003135431557893753, -0.03011479601264, 0.008456811308860779, -0.012614998035132885, -0.017951643094420433, -0.025962715968489647, -0.02933322824537754]
metadata : {"source": "pydantic_ai_docs", "crawled_at": "2025-03-15T11:18:02.934023", "url_path": "/examples/flight-booking/", "chunk_size": 1728}
updated_dt: 2025-03-15T11:18:02.934023
---
Table of contents 
  * [ Running the Example  ](https://ai.pydantic.dev/examples/flight-booking/#running-the-example)
  * [ Example Code  ](https://ai.pydantic.dev/examples/flight-booking/#example-code)


# Flight booking
Example of a multi-agent flow where one agent delegates work to another, then hands off control to a third agent.
Demonstrates:
  * [agent delegation](https://ai.pydantic.dev/multi-agent-applications/#agent-delegation)
  * [programmatic agent hand-off](https://ai.pydantic.dev/multi-agent-applications/#programmatic-agent-hand-off)
  * [usage limits](https://ai.pydantic.dev/agents/#usage-limits)


In this scenario, a group of agents work together to find the best flight for a user.
The control flow for this example can be summarised as follows:
```
graph TD
 START --> search_agent("search agent")
 search_agent --> extraction_agent("extraction agent")
 extraction_agent --> search_agent
 search_agent --> human_confirm("human confirm")
 human_confirm --> search_agent
 search_agent --> FAILED
 human_confirm --> find_seat_function("find seat function")
 find_seat_function --> human_seat_choice("human seat choice")
 human_seat_choice --> find_seat_agent("find seat agent")
 find_seat_agent --> find_seat_function
 find_seat_function --> buy_flights("buy flights")
 buy_flights --> SUCCESS
```

## Running the Example
With [dependencies installed and environment variables set](https://ai.pydantic.dev/examples/#usage), run:
[pip](https://ai.pydantic.dev/examples/flight-booking/#__tabbed_1_1)[uv](https://ai.pydantic.dev/examples/flight-booking/#__tabbed_1_2)
```
python-mpydantic_ai_examples.flight_booking

```

```
uvrun-mpydantic_ai_examples.flight_booking

```

## Example Code
flight_booking.py