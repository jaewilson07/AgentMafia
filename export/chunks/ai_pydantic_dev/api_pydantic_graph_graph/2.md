---
url: https://ai.pydantic.dev/api/pydantic_graph/graph/
session_id: pydantic_ai_docs
chunk_number: 2
title: Graph Example with Pydantic
summary: This chunk provides a complete example of defining a graph using Pydantic, including the creation of state with a number, an Increment node that increases the number, and a Check42 node that checks the number against 42, returning either the Increment node or an End node with the current number. This example can be run directly.
embedding: [-0.002055990044027567, 0.01719132997095585, -0.0009975037537515163, -0.04037639498710632, 0.03301199898123741, 0.010262527503073215, -0.016564078629016876, -0.013950532302260399, -0.002463993849232793, 0.04952961578965187, 0.044046975672245026, -0.02416078746318817, 0.02576376311480999, -0.03854110464453697, 0.02576376311480999, -0.03152518346905708, -0.0273435078561306, 0.02258104458451271, 0.05124874785542488, 0.031083783134818077, 0.02813337929546833, 0.00013657596718985587, 0.06723204255104065, 0.003493440803140402, 0.005514583550393581, 0.01596006006002426, 0.014391930773854256, 0.008009068667888641, 0.010611000470817089, 0.020617980509996414, 0.02669302560389042, -0.016505999490618706, -0.02469511330127716, -0.020873527973890305, 0.0060576205141842365, -0.014206078834831715, 0.013416207395493984, 0.027668748050928116, 0.017272640019655228, 0.031385794281959534, -0.016645388677716255, -0.030061597004532814, -6.379595288308337e-05, 0.03463820740580559, -0.047903407365083694, 4.696217001765035e-05, -0.002982347272336483, 0.045928727835416794, 0.021326541900634766, 0.044070206582546234, -0.061238307505846024, -0.012858650647103786, -0.007527014706283808, 0.011267290450632572, -0.05719602108001709, -0.006975266151130199, -0.030595920979976654, 0.03935420885682106, 0.01532119233161211, -0.009466847404837608, 0.04994778335094452, -0.003478921251371503, -0.00918806903064251, 0.09515633434057236, -0.033476632088422775, 0.04060870781540871, -0.03726337105035782, 0.021756324917078018, -0.015228265896439552, -0.014647478237748146, 0.017737271264195442, 0.05361836403608322, -0.03303522989153862, -0.020652826875448227, -0.031014088541269302, 0.0005169014912098646, -0.004120692145079374, 0.035218995064496994, 0.020594749599695206, -0.020455360412597656, 0.03589271008968353, 0.0072656599804759026, 0.007503783330321312, 0.02274366468191147, 0.028853556141257286, -0.05905454233288765, -0.02455572411417961, -0.04437221586704254, -0.03036360628902912, -0.07062384486198425, 0.015553507022559643, -0.022488119080662727, -0.005796266254037619, 0.03921481966972351, 0.06704618781805038, 0.04386112466454506, 0.04502269998192787, 0.022290650755167007, -0.03408065065741539, -0.05742833390831947, 0.015286345034837723, -0.023347685113549232, -0.029225261881947517, -0.0028807094786316156, 0.03166457265615463, 0.0007405049400404096, -0.03728660196065903, 0.07378333061933517, -0.03886634483933449, -0.03013129159808159, -0.05519810691475868, -0.028481852263212204, 0.01295157615095377, 0.02948080748319626, -0.023882009088993073, -0.04597519338130951, -0.04084102436900139, -0.024625418707728386, 0.01532119233161211, -0.009344881400465965, -0.001152864540927112, -0.008978985249996185, -0.018817536532878876, -0.016645388677716255, 0.015890365466475487, 0.008171689696609974, 0.01041353214532137, 0.005491352174431086, -0.01609944924712181, 0.000758654554374516, 0.007852256298065186, -0.04725292697548866, -0.021187152713537216, -0.017934739589691162, -0.01711001992225647, 0.006516443565487862, -0.04850742965936661, -0.0026687216013669968, 0.009774665348231792, 0.010988512076437473, 0.028179842978715897, -0.044558070600032806, -0.004492396488785744, 0.047624628990888596, 0.035079605877399445, 0.05166691541671753, -0.059101004153490067, 0.057521261274814606, 0.004884428810328245, -0.0021343964617699385, 0.07434088736772537, 0.04118949919939041, -0.01334651280194521, 0.0031623917166143656, 0.03324431553483009, -0.016505999490618706, 0.009159029461443424, 0.02018819749355316, 0.01888723112642765, -0.0212800782173872, 0.023022443056106567, 0.026530403643846512, -0.006568714510649443, 0.008450468070805073, -0.009333265945315361, 0.01665700413286686, -0.059890877455472946, -0.023068906739354134, -0.007770945783704519, -0.01465909369289875, 0.02785460092127323, -0.009362305514514446, -0.029387881979346275, 0.04504593089222908, 0.026112236082553864, -0.0008886058931238949, -0.06295743584632874, 0.009095142595469952, 0.0064409407787024975, -0.0024625419173389673, -0.00202985480427742, -0.0501800999045372, -0.06430486589670181, 0.032431211322546005, -0.01908469945192337, 0.019235704094171524, 0.039934996515512466, -0.016087831929326057, -0.004791502375155687, 0.011842271313071251, -0.028876788914203644, 0.03535838425159454, 0.006371246185153723, 0.020048808306455612, -0.004864100832492113, -0.03301199898123741, 0.09989556670188904, 0.01632014848291874, 0.030084827914834023, 0.03517253324389458, -0.016273684799671173, 0.031199941411614418, -0.0051022241823375225, -0.0007905979291535914, 0.025926385074853897, -0.02404463104903698, -0.0015797438099980354, -0.06147062033414841, -0.02669302560389042, -0.02153562568128109, 0.011180172674357891, -0.048925597220659256, 0.00961204431951046, 0.0014860917581245303, -0.020722521468997, 0.037983547896146774, -0.03633410856127739, -0.011638995260000229, 0.02917879819869995, 0.027041498571634293, -0.048832669854164124, 0.020536670461297035, 0.02161693572998047, 0.03503314405679703, 0.02550821751356125, 0.027668748050928116, -0.011877118609845638, -0.024904197081923485, -0.009054487571120262, 0.06997335702180862, -0.02204671874642372, -0.0374956838786602, -0.003528288099914789, -0.04836804047226906, -0.023382531479001045, -0.05533749610185623, -0.006040196865797043, -0.014624246396124363, 0.017272640019655228, -0.034568510949611664, -0.05254971608519554, 0.016598926857113838, -0.02272043377161026, 0.015054029412567616, 0.03954005986452103, 0.022151261568069458, -0.029411112889647484, -0.0013713861117139459, -0.008305271156132221, 0.0507376566529274, 0.00811941921710968, -0.004120692145079374, -0.011098861694335938, -0.027320275083184242, -0.039679449051618576, -0.04293186217546463, 0.010663270950317383, -0.0014752020360901952, 0.012243014760315418, 0.014763635583221912, 0.02046697586774826, -0.03872695565223694, -0.04039962589740753, -0.02114068903028965, -0.005741090979427099, 0.0036851009353995323, 0.027645517140626907, 0.002353643998503685, 0.005935654975473881, -0.050784118473529816, 0.023998167365789413, 0.01604137010872364, 0.030015133321285248, -0.02973635494709015, -0.00537809869274497, -0.04251369461417198, 0.0038273942191153765, 0.054129458963871, 0.02534559555351734, -0.038239095360040665, 0.011708689853549004, 0.04718323051929474, 0.04915791004896164, 0.07633879780769348, -0.01821351796388626, 0.013660137541592121, -0.05069119110703468, 0.012788956053555012, -0.00304042617790401, 0.000937972916290164, 0.03236151859164238, 0.0273435078561306, 0.03631087765097618, 0.00900802481919527, 0.04077133163809776, -0.06463010609149933, -0.0007688183686695993, 0.016227221116423607, 0.05180630460381508, -0.01632014848291874, -0.0019020813051611185, -0.011807424016296864, -0.038634028285741806, 0.024091092869639397, -0.012696029618382454, 0.024091092869639397, 0.007782561704516411, -0.017923124134540558, 0.018527142703533173, 0.014926256611943245, 0.011470566503703594, 0.008874443359673023, -0.008392388932406902, 0.01079685240983963, -0.011563492938876152, 0.013880837708711624, 0.08772224932909012, -0.008369158022105694, -0.02133815735578537, -0.0007248962647281587, -0.014496472664177418, -0.05724248290061951, 0.06263219565153122, 0.041026875376701355, -0.031896885484457016, 0.027273813262581825, 0.0006308811716735363, 0.02613546885550022, 0.018341289833188057, -0.01314904447644949, 0.007195965386927128, -0.022871438413858414, -0.0005394070176407695, 0.04702061042189598, 0.023277990520000458, -0.012974807992577553, -0.0005256133154034615, 0.06839361786842346, 0.0462307408452034, 0.051852770149707794, -0.027645517140626907, -0.036543190479278564, 0.007346970494836569, 0.003406322794035077, -0.041003644466400146, 0.021884098649024963, -0.004846677184104919, 0.029527271166443825, -0.001235626870766282, -0.005462312605232, 0.039958227425813675, -0.020048808306455612, 0.027111193165183067, 0.036519959568977356, 0.002565631875768304, 0.018817536532878876, 0.022673970088362694, 0.015472196973860264, -0.012301093898713589, 0.002850217977538705, -0.04808926209807396, 0.006202817894518375, -0.029085872694849968, -0.0023768756072968245, -0.05840405821800232, 4.129040826228447e-05, -0.004556283354759216, 0.01089558657258749, 0.029109103605151176, 0.02694857120513916, 0.010535497218370438, 0.03449881821870804, 0.01738879829645157, 0.004660825245082378, 0.015948442742228508, -0.022569429129362106, -0.003476017154753208, -0.02669302560389042, 0.030595920979976654, 0.024462798610329628, -0.028737399727106094, 0.030595920979976654, 0.00503833731636405, 0.002731156302616, 0.007230812683701515, 0.004742135293781757, -0.002201187191531062, 0.015390886925160885, -0.012916728854179382, 0.020083654671907425, 0.030293911695480347, -0.028481852263212204, 0.002565631875768304, 0.02404463104903698, -0.005497159902006388, -0.00031344412127509713, -0.023835547268390656, 0.00914741400629282, 0.042351074516773224, 0.021175537258386612, -0.012591487728059292, 0.009524926543235779, -0.022116413339972496, -0.0013423466589301825, 0.01880592107772827, 0.00039275799645110965, 0.055430423468351364, 0.035985637456178665, -0.012057162821292877, 0.014705556444823742, 0.006133123300969601, 0.032686758786439896, -0.015402502380311489, -0.03517253324389458, -0.017969585955142975, -0.04925083741545677, -0.004466261249035597, -0.014322236180305481, 0.0002548208285588771, 0.008409813046455383, 0.008165881969034672, -0.044186364859342575, -0.024207251146435738, -0.02971312403678894, 0.021628551185131073, 0.02145431563258171, 0.009164837189018726, -0.04079456254839897, 0.023533537983894348, -0.04846096411347389, 0.03647349774837494, 0.027970759198069572, 0.0159252118319273, 0.012475330382585526, 0.061610009521245956, 0.017946355044841766, -0.0041816746816039085, -0.02297598123550415, 0.02323152683675289, -0.023289605975151062, -0.004004534333944321, -0.016749931499361992, 0.044697459787130356, 0.017888275906443596, -0.048693280667066574, -0.019526097923517227, -0.011592532508075237, -0.0702056735754013, 0.023603232577443123, -0.013485901989042759, -0.020304353907704353, 0.01880592107772827, -0.03624118119478226, 0.011389256455004215, -0.03935420885682106, -0.010564536787569523, 0.06727850437164307, 0.0032756454311311245, 0.01928216777741909, -0.030177753418684006, -0.01807412877678871, 0.0014084113063290715, -0.02086191065609455, 0.03166457265615463, -0.022000256925821304, 0.03549777343869209, 0.02313860133290291, -0.0009111114777624607, 0.0034498816821724176, -0.0159252118319273, 0.03633410856127739, -0.01936347782611847, 0.00999536458402872, 0.010111521929502487, 0.041677359491586685, 0.005752706900238991, -0.0009365209261886775, 0.041143033653497696, 0.03352309390902519, 0.026112236082553864, -0.03175749629735947, -0.05821820721030235, 0.03133932873606682, 0.0005252503324300051, 0.007248236332088709, -0.029620196670293808, 0.0022200627718120813, -0.02906263992190361, -0.007352778222411871, -0.001575387897901237, -0.03403418883681297, -0.0017336526652798057, 0.024393104016780853, -0.01075619738548994, 0.03884311392903328, 0.013509132899343967, -0.027273813262581825, -0.04293186217546463, -0.002871997654438019, -0.038634028285741806, 0.0036531577352434397, 0.0012908016797155142, -0.026971803978085518, 0.02291790209710598, -0.005714955739676952, -0.08279716223478317, 0.01920085772871971, 0.010947857052087784, 0.0010947857517749071, 0.027111193165183067, -0.028365693986415863, -0.0032901649829000235, 0.03103731945157051, -0.00282989046536386, 0.00551167968660593, 0.01716809906065464, 0.013090965338051319, -0.0010570344747975469, -0.027715211734175682, -0.0058194976300001144, -0.011778384447097778, -0.009408768266439438, -0.001114387298002839, -0.0181786697357893, -0.020281122997403145, 0.008473699912428856, 0.044581301510334015, -0.037472452968358994, 0.0031275444198399782, -0.006748758722096682, 0.010744580999016762, 0.012614719569683075, 0.023010827600955963, 0.03740276023745537, -0.0628645122051239, 0.02094322256743908, -0.0027238966431468725, 0.003545711748301983, -0.0204321276396513, 0.0062550888396799564, -0.008293654769659042, 0.020617980509996414, 0.015344424173235893, -0.015112108550965786, -0.028900019824504852, 0.010001172311604023, 0.043001558631658554, -0.04785694554448128, -0.004056805279105902, 0.0394703634083271, 0.015332807786762714, 0.0064119016751646996, -0.026576867327094078, -0.08200728893280029, -0.03315138816833496, 0.0004737053532153368, -0.015088876709342003, -0.012800571508705616, -0.005854344926774502, 0.0006900489679537714, -0.013311665505170822, -0.025949615985155106, 0.023579999804496765, 0.04067840427160263, -0.029085872694849968, 0.08563140779733658, 0.016564078629016876, -0.016784777864813805, -0.04516208916902542, -0.005035433452576399, -0.006435133051127195, -0.020966453477740288, 0.0039028965402394533, -0.04072486609220505, -0.0032872611191123724, -0.037472452968358994, -0.01999072916805744, -0.011952620930969715, 0.0007985837291926146, -0.002414626767858863, -0.03463820740580559, -0.02370777353644371, 0.013822758570313454, -0.035613931715488434, -0.021303310990333557, 0.028203073889017105, -0.021024532616138458, 0.0217098630964756, 0.01073877327144146, -0.04053901508450508, -0.007091423496603966, 0.004196194466203451, 0.012916728854179382, 0.012788956053555012, -0.03621795028448105, -0.011075630784034729, 0.0005778842605650425, -0.031014088541269302, -0.07517722249031067, 0.03710074722766876, 0.03317461907863617, 0.008880251087248325, -0.007254044525325298, 0.030549459159374237, -0.011174364946782589, -0.0008515806985087693, -0.013578827492892742, 0.010030211880803108, -0.03147871792316437, 0.027413202449679375, -0.04032992944121361, 0.012463713996112347, 0.020037192851305008, -0.022848207503557205, -0.02824953757226467, 0.017992818728089333, -0.007085615769028664, 0.03452204912900925, 0.03826232627034187, -0.05301434546709061, 0.04065517336130142, 0.05069119110703468, -0.0071611180901527405, -0.0073643941432237625, -0.0224068071693182, 0.01612268015742302, -0.021744709461927414, 0.01407830510288477, 0.00941457599401474, -0.0010613903868943453, -0.04079456254839897, -0.000675892224535346, 0.02534559555351734, 0.006667448207736015, -0.04685799032449722, -0.0032466058619320393, -0.013276818208396435, -0.0224068071693182, 0.018329674378037453, -0.028830325230956078, 0.021744709461927414, 0.004509820137172937, -0.021431084722280502, 0.00660356180742383, 0.012452098540961742, 0.008967369794845581, 0.003188527189195156, 0.044325754046440125, 0.030688848346471786, -0.019235704094171524, -0.0033859950490295887, 0.016424689441919327, 0.008740861900150776, -0.005915327463299036, -0.0015013373922556639, -0.0176211129873991, -0.020025575533509254, -0.03642703592777252, -0.021547241136431694, -0.006638409104198217, -0.027970759198069572, 0.015414118766784668, -0.008270423859357834, -0.020002344623208046, -0.03517253324389458, 0.02457895502448082, 0.018759457394480705, 0.005787554197013378, 0.001034528948366642, 0.0049512190744280815, -0.038889575749635696, 0.02562437392771244, 0.04878620803356171, 0.014217694289982319, -0.021779557690024376, -0.008142650127410889, -0.008607280440628529, -0.04053901508450508, -0.02906263992190361, 0.02187248319387436, -0.009019640274345875, -0.013021270744502544, -0.03865726292133331, 0.05366482958197594, 0.037170443683862686, -0.007654788438230753, -0.018271595239639282, 0.023521920666098595, 0.013485901989042759, 0.003423746209591627, -0.007892911322414875, 0.015716128051280975, -0.012533408589661121, 0.0036008867900818586, -0.003595078829675913, -0.008067147806286812, -0.004132308065891266, 0.04648628458380699, -0.02220934070646763, -0.07791854441165924, -0.009565581567585468, 0.009919862262904644, -0.04267631471157074, 0.01537927147001028, 0.02534559555351734, -0.016447920352220535, -0.003812874434515834, 0.04053901508450508, 0.009397152811288834, -0.010901394300162792, 0.011952620930969715, 0.0047653671354055405, -0.02562437392771244, 0.01188292633742094, -0.017261024564504623, -0.0027935912366956472, 0.045905496925115585, -0.004187482874840498, 0.026855645701289177, -0.020989684388041496, -0.019839724525809288, 0.010663270950317383, -0.021303310990333557, -0.028040453791618347, -0.010349645279347897, 0.002362355822697282, -0.01770242303609848, 0.012254630215466022, -0.00565106887370348, -0.027924295514822006, -0.02748289704322815, 0.013625291176140308, -0.0054390812292695045, 0.028458621352910995, -0.0032988768070936203, 0.019526097923517227, -0.024741576984524727, -0.012777339667081833, -0.017969585955142975, 0.010227680206298828, -0.02485773339867592, 0.04332679882645607, 0.011563492938876152, -0.020954838022589684, 0.002805206924676895, 0.0027674557641148567, -0.01776050217449665, 0.02260427549481392, -0.01922408863902092, 0.03168780356645584, -0.049622543156147, 0.006748758722096682, -0.022232571616768837, 0.00023866764968261123, 0.02244165539741516, 0.03331400826573372, -0.007509591057896614, 0.0009975037537515163, -0.011174364946782589, 0.007004305254667997, -0.07396918535232544, -0.0343826599419117, -0.03698459267616272, 0.022883053869009018, 0.010006980039179325, -0.04121273010969162, -0.0026745295617729425, -0.005459408741444349, -6.275234773056582e-05, 0.027947526425123215, -0.024486029520630836, 0.00598211819306016, -0.006046005059033632, 0.029271723702549934, 0.022755280137062073, -0.014833330176770687, 0.05993733927607536, -0.050784118473529816, 0.0071320789866149426, -0.017470108345150948, -0.0007644624565728009, 0.017574651166796684, 0.016250453889369965, 0.02601931057870388, 0.03403418883681297, 0.012707645073533058, 0.011325369589030743, -0.04160766676068306, -0.04785694554448128, -0.034824058413505554, -0.04676506295800209, -0.0422813780605793, -0.008252999745309353, 0.0106400391086936, 0.004347199574112892, -0.01281218696385622, 0.002326056594029069, -0.09515633434057236, 0.02920202910900116, 0.05254971608519554, -0.007753522135317326, 0.035079605877399445, -0.013381360098719597, -0.0025917673483490944, -0.04177028685808182, 0.0360785610973835, -0.05287495627999306, -0.0408642552793026, -0.024369871243834496, -0.04337326064705849, -0.010256718844175339, 0.02576376311480999, -0.0032959729433059692, 0.00490475632250309, -0.012963192537426949, 0.03391803056001663, -0.009867590852081776, -0.0032466058619320393, -0.0009648343548178673, -0.026112236082553864, 0.006771990098059177, 0.030805004760622978, 0.02074575424194336, 0.018259979784488678, -0.006847492419183254, 0.0009604784427210689, 0.03459174558520317, 0.029898975044488907, -0.03879665210843086, -0.013845990411937237, 0.026507172733545303, 0.0013953435700386763, 0.01314904447644949, 0.0295969657599926, 0.01956094615161419, 0.026600098237395287, 0.03647349774837494, 0.023243142291903496, -0.03052622638642788, 0.004515628330409527, -0.008665359579026699, 0.027784906327724457, 0.013694984838366508, -0.031780730932950974, 0.00947265513241291, -0.04105011001229286, -0.03275645151734352, -0.009118374437093735, -0.00304042617790401, -0.01281218696385622, -0.0029242685995996, 0.07564185559749603, 0.03173426538705826, -0.03266352787613869, -0.03422003984451294, -0.00022378494031727314, 0.030828237533569336, 0.01267279777675867, 0.023324454203248024, 0.021977024152874947, -0.013137429021298885, -0.0038273942191153765, -0.027529358863830566, 0.03324431553483009, -0.022534580901265144, -0.011569300666451454, -0.033197853714227676, 0.01855037361383438, -0.004739231429994106, -0.004797310568392277, -0.034545280039310455, -0.0065396749414503574, 0.04042285680770874, -0.014171231538057327, -0.023812314495444298, 0.0006835150998085737, -0.020734138786792755, -0.0029242685995996, 0.0005909519968554378, 0.005918231327086687, 0.02590315230190754, 0.013172276318073273, -0.008607280440628529, 0.0170519407838583, 0.012266246601939201, -0.014926256611943245, 0.000899495673365891, -0.025647606700658798, 0.00796260591596365, 0.008299463428556919, -0.02029273845255375, -0.02641424722969532, -0.029364651069045067, 0.009797896258533001, -0.005607509985566139, 0.00518643856048584, -0.009182261303067207, -0.00660356180742383, 0.020757369697093964, 0.005314211826771498, 0.01657569408416748, -0.0383320190012455, 0.029527271166443825, 0.03340693563222885, -0.01787666045129299, -0.04725292697548866, 0.009083527140319347, 0.006888147909194231, -0.003023002529516816, -0.02745966427028179, -0.013485901989042759, -0.050273023545742035, 0.007085615769028664, 0.04225814715027809, -0.020048808306455612, -0.03517253324389458, -0.021698245778679848, -0.010326413437724113, 0.008084571920335293, -0.002204091055318713, 0.009234531782567501, -0.03624118119478226, -0.005761418957263231, 0.019944265484809875, -0.028226304799318314, -0.014043457806110382, -0.026600098237395287, 0.03898250311613083, 0.014647478237748146, -0.03175749629735947, 0.05194569379091263, 0.014438394457101822, -0.0190266203135252, 0.02021142840385437, -0.010454187169671059, 0.0031798153650015593, -0.031014088541269302, 0.003420842345803976, -0.03844817727804184, 0.036519959568977356, -0.02238357625901699, -0.03161810711026192, -0.003804162610322237, 0.0025148128625005484, -0.044697459787130356, 0.0043820468708872795, 0.0010352549143135548, -0.010053443722426891, 0.008229768835008144, 0.01877107471227646, -0.004172963090240955, -0.017040325328707695, 0.018143823370337486, 0.015112108550965786, -0.020176582038402557, -0.0293181873857975, 0.010152176953852177, -0.019235704094171524, 0.01967710442841053, -0.02119876816868782, -0.014345468021929264, -0.012231399305164814, -0.020141733810305595, -0.007405049167573452, -0.002430598484352231, -0.043140947818756104, -0.0016726700123399496, -0.025833457708358765, 0.010744580999016762, 0.01623883843421936, 0.03907543048262596, 0.03133932873606682, 0.050273023545742035, 0.0544082373380661, -0.022883053869009018, -0.04355911538004875, 0.006975266151130199, 0.023882009088993073, -0.0019151490414515138, 0.029387881979346275, 0.024927427992224693, 0.0507376566529274, -0.03923805058002472, 0.028992945328354836, 0.00786387175321579, 0.003147871932014823, 0.03621795028448105, 0.0125450249761343, 0.015007566660642624, 0.00046063761692494154, 0.017748886719346046, 0.012301093898713589, 0.0009292610920965672, -0.0004943959647789598, 0.00828784704208374, 0.017377182841300964, -0.005502968095242977, -0.006818453315645456, 0.020362433046102524, -0.029782818630337715, -0.018596837297081947, 0.01240563578903675, 0.046579211950302124, -0.011830654926598072, -0.009426192380487919, -0.03459174558520317, 0.024137556552886963, 0.007892911322414875, -0.027808137238025665, 0.010349645279347897, 0.004466261249035597, -0.04223491623997688, -0.0016741219442337751, 0.014914640225470066, -0.009222916327416897, 0.005221285857260227, -0.007062384393066168, -0.0383320190012455, -0.027575822547078133, -0.02641424722969532, 0.016308533027768135, -0.034429121762514114, 0.019061468541622162, -0.002914104610681534, 0.02720411866903305, 0.006162162404507399, -0.02574053220450878, -0.019665487110614777, 0.01787666045129299, -0.019491251558065414, -0.012417251244187355, 0.00842723622918129, -0.0004747943312395364, 0.029759585857391357, -0.0017539802938699722, 0.008804748766124249, 0.0006519347080029547, -0.030270680785179138, -0.0060053495690226555, -0.010982704348862171, -0.02376585267484188, -0.013276818208396435, 0.001740912557579577, 0.002250554272904992, 0.014949487522244453, 0.0041264998726546764, -0.009466847404837608, -0.020025575533509254, 0.00310721667483449, 0.0009800801053643227, -0.032570600509643555, -0.00844466034322977, -0.017655961215496063, 0.012335941195487976, 0.005247421097010374, -0.013439438305795193, 0.0023318645544350147, 0.018538758158683777, 0.029759585857391357, -0.002471253741532564, -0.013787911273539066, -0.021407851949334145, -0.016424689441919327, 0.011917773634195328, 0.027041498571634293, 0.020989684388041496, 0.03951682895421982, -0.03591594099998474, 0.009135797619819641, 0.012417251244187355, 0.007190157659351826, 0.004579514730721712, -0.01877107471227646, -0.03317461907863617, -0.017609497532248497, -0.0023841354995965958, -0.014926256611943245, -0.0073643941432237625, 0.00022832235845271498, 0.01333489641547203, 0.027180887758731842, 0.002516264794394374, -0.008781516924500465, -0.01736556738615036, -0.036264415830373764, -0.037983547896146774, 0.02548498474061489, 0.03960975259542465, -0.0025743436999619007, 0.014113152399659157, 0.0020647018682211637, 0.006690680049359798, -0.0025249766185879707, 0.012742492370307446, -4.662186256609857e-06, 0.005447793286293745, -0.015948442742228508, 0.0003678930224850774, -0.0026745295617729425, -0.027575822547078133, 0.02604254148900509, 0.018585221841931343, 0.014589399099349976, -0.008566625416278839, -0.04799633473157883, -0.017353950068354607, 0.008984792977571487, 0.012974807992577553, -0.01361367478966713, -0.030038364231586456, -0.0020864815451204777, 0.02748289704322815, 0.05213154852390289, -0.021373005583882332, -0.01815543882548809, -0.036659348756074905, 0.01776050217449665, -0.037054285407066345, 0.0068300687707960606, 0.016784777864813805, 0.027668748050928116, 0.005828209221363068, -0.0017801157664507627, 0.020966453477740288, -0.0037867389619350433, 0.022279035300016403, -0.00947265513241291, -0.023835547268390656, 0.030154522508382797, 0.006650024559348822, 0.03352309390902519, 0.011127901263535023, 0.022708818316459656, -0.036125026643276215, -0.012173320166766644, -0.004826349671930075, -0.002013883087784052, 0.006034389138221741, -0.012173320166766644, -0.021361390128731728, -0.010971088893711567, -0.008258807472884655, -0.020896758884191513, -0.017655961215496063, -0.014450009912252426, 0.01242886669933796, -0.014670709148049355, 0.06374730914831161, 0.0032843572553247213, -0.01973518170416355, 0.041816748678684235, 0.00938553735613823, 0.005685916170477867, -0.005752706900238991, 0.008282039314508438, 0.00735858641564846, -0.04739231616258621, -0.020908374339342117, 0.009925669990479946, -0.01059938408434391, -0.012266246601939201, 0.0005506597808562219, -0.008804748766124249, -0.015088876709342003, -0.016052985563874245, 0.012847034260630608, 0.012579872272908688, 0.039679449051618576, 0.04037639498710632, 0.006992689799517393, 0.004457549192011356, 0.013845990411937237, -0.015286345034837723, 0.0125450249761343, 0.015170187689363956, 0.010750389657914639, 0.02683241479098797, -0.003853529691696167, -0.017969585955142975, 0.0248112715780735, 0.0063886698335409164, -0.04448837414383888, 0.02131492644548416, -0.010744580999016762, -0.029806049540638924, -0.016169143840670586, 0.032036274671554565, 0.005108031909912825, -0.01168545801192522, -0.004393662791699171, -0.009240339510142803, -0.0004708014312200248, -0.00024774245684966445, 0.03449881821870804, -0.0017597881378605962, 0.011546068824827671, -0.003934839740395546, 0.016668621450662613, -0.004117788281291723, 0.029759585857391357, -0.012359172105789185, 0.0007089245482347906, -0.021465931087732315, 0.008491123095154762, 0.04939022660255432, 0.011389256455004215, 0.03377864137291908, -0.017272640019655228, 0.013718216679990292, 0.024114325642585754, 0.0023884912952780724, -0.027924295514822006, -0.01823674887418747, -0.0031014089472591877, -0.02655363641679287, -0.013137429021298885, 0.011348601430654526, -0.003310492727905512, 0.008955753408372402, -0.0035108644515275955, 0.03563716262578964, -0.007846448570489883, 0.015425734221935272, 0.0015565123176202178, -0.016169143840670586, 0.0298757441341877, 0.046555981040000916, 0.017632728442549706, -0.021442700177431107, -0.05069119110703468, 0.041537970304489136, -0.027111193165183067, -0.008131034672260284, 0.0270647294819355, 0.009699163027107716, 0.014055074192583561, 0.007887103594839573, 0.028714166954159737, 0.024416334927082062, -0.007195965386927128, 0.0012211072025820613, 0.014264157973229885, -0.003984206821769476, -0.013567212037742138, 0.003641541814431548, -0.05134167522192001, 0.01182484719902277, 0.05970502644777298, 0.01023348793387413, 0.012893497943878174, 0.021582089364528656, 0.015936827287077904, 0.018062513321638107, 0.007039152551442385, -0.00938553735613823, -0.030061597004532814, 0.01065746322274208, -0.010082482360303402, 0.013787911273539066, -0.00584272900596261, -0.029504040256142616, 0.016029754653573036, -0.01320712361484766, -0.039934996515512466, -0.028365693986415863, -0.025159744545817375, -0.020374048501253128, 0.028830325230956078, -0.014682325534522533, 0.014508089050650597, -0.015042413957417011, 0.040074385702610016, 0.00027061099535785615, 0.02943434566259384, -0.020513437688350677, 0.0081019951030612, -0.023556768894195557, -0.02748289704322815, 0.030944393947720528, -0.0025206205900758505, -0.0055349115282297134, 0.0193053986877203, 0.010587768629193306, 0.0025394964031875134, 0.017493339255452156, -0.050923507660627365, 0.016192374750971794, -0.013660137541592121, 0.019595792517066002, -0.0027442241553217173, -0.0045127240009605885, 0.023243142291903496, 0.006063428707420826, 0.02692534029483795, 0.021779557690024376, -0.0248112715780735, 0.025322364643216133, -0.025577912107110023, -0.012231399305164814, -0.024067861959338188, 0.02841215766966343, -0.007660596165806055, -0.0755489245057106, 0.029387881979346275, 0.004350103437900543, -0.0002620806626509875, -0.028574777767062187, -0.0030723693780601025, 0.013102581724524498, 0.02141946740448475, -0.024625418707728386, 0.004021957982331514, 0.02827276848256588, -0.008496930822730064, -0.021442700177431107, 0.002124232705682516, -0.02206995151937008, 0.032547369599342346, 0.007759329862892628, 0.019096314907073975, 0.012324324809014797, 0.005894999951124191, -0.010227680206298828, 0.019468020647764206, -0.02319668047130108, 0.015042413957417011, 0.0024451182689517736, -0.01518180314451456, -0.021222000941634178, 0.02587992139160633, -0.0074166650883853436, -0.0145197045058012, -0.020141733810305595, -0.002010978991165757, -0.023068906739354134, -0.0059763104654848576, -0.022627508267760277, 0.02220934070646763, -0.025531448423862457, -0.014415162615478039, -0.023812314495444298, -0.036008868366479874, 0.02641424722969532, 0.0027108287904411554, -0.004544667433947325, 0.029759585857391357, 0.03445235639810562, -0.008520162664353848, -0.03986530005931854, -0.005067376885563135, 0.026623331010341644, 0.0029112007468938828, 0.01651761494576931, -0.028226304799318314, 0.039563290774822235, 0.014368699863553047, -0.022000256925821304, -0.0011956976959481835, -0.015692897140979767, 0.013509132899343967, -0.029387881979346275, 0.019328631460666656, 0.019793260842561722, 0.004268792923539877, 0.0060053495690226555, 0.03329077735543251, -0.01871299557387829, -0.009083527140319347, -0.011737729422748089, 0.0293181873857975, -0.015239882282912731, -0.004021957982331514, -0.04785694554448128, 0.02880709432065487, -0.013834374025464058, -0.025438522920012474, 0.001356866443529725, 0.01558835431933403, -0.016192374750971794, -0.030874699354171753, 0.008787325583398342, 0.015054029412567616, -0.019328631460666656, -0.009182261303067207, -0.024671882390975952, 0.05682431533932686, -0.024230482056736946, -0.005450697150081396, 0.06751082092523575, 0.021163921803236008, -0.02206995151937008, -0.012277862057089806, -0.0017336526652798057, 0.007532822899520397, 0.0015986195066943765, -0.02331283688545227, 0.03194335103034973, 0.021756324917078018, 0.012986423447728157, -0.01155768521130085, -0.02880709432065487, -0.002587411319836974, 0.011679650284349918, 0.03198981285095215, 0.005964694544672966, 0.01880592107772827, 0.004649209324270487, -0.0009067555656656623, 0.03621795028448105, -0.030712079256772995, -0.026205163449048996, 0.0321292020380497, -0.01663377322256565, 0.01027414295822382, 0.02224418707191944, -0.056080907583236694, -0.0004933069576509297, -0.008549202233552933, -0.010152176953852177, -0.032315053045749664, 0.006429325323551893, -0.0016363706672564149, 0.010767812840640545, 0.0007709963247179985, -0.0010947857517749071, 0.008630512282252312, -0.030015133321285248, 0.04488331079483032, -0.022650739178061485, -0.0013924397062510252, -0.020304353907704353, 0.02841215766966343, 0.01031479798257351, -0.011058206669986248, 0.03233828768134117, -0.02258104458451271, 0.006713911425322294, 0.02996866963803768, -0.013253586366772652, 0.04237430542707443, -0.022813359275460243, 0.025601143017411232, -0.028435388579964638, 0.00881055649369955, -0.025136511772871017, 0.00561041384935379, -0.006551290862262249, -0.029922207817435265, 0.011522837914526463, 0.021884098649024963, 0.01281218696385622, 0.002673077629879117, 0.009292610920965672, 0.014682325534522533, -0.01031479798257351, 0.020455360412597656, -0.014264157973229885, -0.00259321928024292, 0.010006980039179325, -0.009763048961758614, -0.011197595857083797, 0.02303405851125717, 0.012963192537426949, -0.009344881400465965, -0.017748886719346046, 0.018027665093541145, 0.033499862998723984, 0.01738879829645157, 0.0038419137708842754, 0.013021270744502544, -0.002071961760520935, 0.016900936141610146, 0.0019441883778199553, -0.023336069658398628, -0.004910564050078392, 0.013183891773223877, 0.018678147345781326, 0.004071325063705444, 0.03658965602517128, 0.030038364231586456, -0.004289120901376009, 0.015425734221935272, -0.013764679431915283, -0.008653744123876095, -0.00039239501347765326, 0.015936827287077904, 0.019828109070658684, -0.0053055002354085445, 0.02303405851125717, -0.0030810812022536993, 0.0008370609721168876, 0.008183305151760578, 0.028505083173513412, 0.009966325014829636, -0.009228724054992199, 0.009402960538864136, 0.01888723112642765, -0.019909419119358063, -0.013741448521614075, -0.0007212663185782731, -0.008009068667888641, 0.029364651069045067, 0.019944265484809875, -0.009832743555307388, -0.00834592618048191, 0.01716809906065464, -0.0013938916381448507, -0.026460709050297737, -0.008647936396300793, -0.004170059226453304, -0.028458621352910995, -0.0253688283264637, -0.012754108756780624, 0.027273813262581825, -0.023336069658398628, 0.04495300352573395, -0.03131609782576561, 0.022511349990963936, -0.006899763364344835, 0.015553507022559643, -0.0020980972331017256, -0.010059251450002193, -0.027297044172883034, -0.01831805892288685, -0.018933694809675217, 0.011412487365305424, -0.007573477923870087, 0.013125812634825706, -0.031501952558755875, 0.01393891591578722, -0.01600652188062668, -0.02483450248837471, 0.003083985298871994, 0.009704970754683018, 0.0030810812022536993, -0.023324454203248024]
metadata : {"source": "pydantic_ai_docs", "crawled_at": "2025-03-15T11:17:52.489148", "url_path": "/api/pydantic_graph/graph/", "chunk_size": 4243}
updated_dt: 2025-03-15T11:17:52.489148
---
```
from__future__import annotations
fromdataclassesimport dataclass
frompydantic_graphimport BaseNode, End, Graph, GraphRunContext
@dataclass
classMyState:
  number: int
@dataclass
classIncrement(BaseNode[MyState]):
  async defrun(self, ctx: GraphRunContext) -> Check42:
    ctx.state.number += 1
    return Check42()
@dataclass
classCheck42(BaseNode[MyState, None, int]):
  async defrun(self, ctx: GraphRunContext) -> Increment | End[int]:
    if ctx.state.number == 42:
      return Increment()
    else:
      return End(ctx.state.number)
never_42_graph = Graph(nodes=(Increment, Check42))

```

_(This example is complete, it can be run "as is")_
See [`run`](https://ai.pydantic.dev/api/pydantic_graph/graph/#pydantic_graph.graph.Graph.run) For an example of running graph, and [`mermaid_code`](https://ai.pydantic.dev/api/pydantic_graph/graph/#pydantic_graph.graph.Graph.mermaid_code) for an example of generating a mermaid diagram from the graph.
Source code in `pydantic_graph/pydantic_graph/graph.py`
```
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391
392
393
394
395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413
414
415
416
417
418
419
420
421
422
423
424
425
426
427
428
429
430
431
432
433
434
435
436
437
438
439
440
441
442
443
444
445
446
447
448
449
450
451
452
453
454
455
456
457
458
459
460
461
462
463
464
465
466
467
468
469
470
471
472
473
474
475
476
477
478
479
480
481
482
483
484
485
486
487
488
489
490
491
492
493
494
495
496
497
498
499
500
501
502
503
504
505
506
507
508
509
510
511
512
513
514
515
516
517
518
519
520
521
522
523
524
525
526
527
528
529
530
531
532
533
534
535
536
537
538
539
540
541
542
543
544
545
546
547
548
549
550
551
552
553
554
555
556
557
558
559
560
561
562
563
564
565
566
567
```
| ```
@dataclass(init=False)
classGraph(Generic[StateT, DepsT, RunEndT]):
"""Definition of a graph.
  In `pydantic-graph`, a graph is a collection of nodes that can be run in sequence. The nodes define
  their outgoing edges — e.g. which nodes may be run next, and thereby the structure of the graph.
  Here's a very simple example of a graph which increments a number by 1, but makes sure the number is never
  42 at the end.
  ```py {title="never_42.py" noqa="I001" py="3.10"}
  from __future__ import annotations
  from dataclasses import dataclass
  from pydantic_graph import BaseNode, End, Graph, GraphRunContext
  @dataclass
  class MyState:
    number: int
  @dataclass
  class Increment(BaseNode[MyState]):
    async def run(self, ctx: GraphRunContext) -> Check42:
      ctx.state.number += 1
      return Check42()
  @dataclass
  class Check42(BaseNode[MyState, None, int]):
    async def run(self, ctx: GraphRunContext) -> Increment | End[int]:
      if ctx.state.number == 42:
        return Increment()
      else:
        return End(ctx.state.number)
  never_42_graph = Graph(nodes=(Increment, Check42))