---
url: https://ai.pydantic.dev/api/pydantic_graph/graph/
session_id: pydantic_ai_docs
chunk_number: 14
title: Run Node in Graph API
summary: This section describes the parameters for running a node in the graph, including the required 'node' to execute, the 'history' of the graph run which will be updated, and the 'state' representing the current condition of the graph.
embedding: [0.022704312577843666, 0.02310185879468918, 0.02226259373128414, -0.06329821050167084, 0.033173032104969025, -0.0016868110978975892, 0.00047415681183338165, 0.019292039796710014, -0.01048528403043747, 0.023035600781440735, -0.0030561373569071293, 0.012721482664346695, -0.008519638329744339, -0.06700864434242249, -0.014013508334755898, -0.03882702440023422, -0.01994357444345951, -0.019159523770213127, 0.025663824751973152, 0.05817427858710289, -0.0062447902746498585, -0.0072607421316206455, 0.01617792621254921, -0.009982829913496971, 0.0030809841118752956, 0.027519039809703827, 0.0014314427971839905, 0.044039297848939896, -0.010120866820216179, 0.0002703798236325383, 0.01502945926040411, -0.020418420433998108, -0.052917834371328354, -0.0032493891194462776, 0.01674111746251583, -0.004152150359004736, 0.016641730442643166, 0.008387123234570026, -0.014444183558225632, 0.029065053910017014, -0.006990189664065838, -0.04819145053625107, -0.025354621931910515, 0.0026848181150853634, -0.012246635742485523, -0.039754632860422134, -0.020727623254060745, 0.033901866525411606, 0.037435613572597504, 0.04019635170698166, -0.01584663800895214, -0.007321478333324194, -0.025354621931910515, 0.030169349163770676, -0.04911905527114868, 0.018927622586488724, 0.01829817332327366, -0.025354621931910515, -0.002506750402972102, -0.03133990243077278, 0.05088593065738678, 0.010082216933369637, 0.0027496954426169395, 0.0612221322953701, -0.009596326388418674, 0.050046663731336594, 0.02458161488175392, 0.03951168805360794, -0.008204914629459381, -0.0076858955435454845, 0.010800008662045002, 0.04624788835644722, -0.05742335692048073, -0.054198816418647766, 0.0057920292019844055, -0.03078775480389595, 0.042625799775123596, 0.019512899219989777, 0.0037269967142492533, 0.00408589281141758, 0.02009817585349083, 0.00614540372043848, 0.029418427497148514, 0.03997549042105675, 0.021622102707624435, -0.07986263930797577, -0.029241740703582764, -0.05715832859277725, -0.01466504205018282, -0.06515342742204666, 0.006443563383072615, -0.037281010299921036, 0.02224050834774971, 0.08503074198961258, 0.02369817905128002, 0.061796367168426514, 0.015780379995703697, -0.005769943352788687, -0.016288356855511665, 0.011827003210783005, 0.005099083762615919, -0.04558531194925308, -0.024934988468885422, -0.02365400642156601, 0.017480995506048203, 0.043310463428497314, -0.030103091150522232, 0.07809576392173767, 0.005885894410312176, -0.004795402754098177, -0.08666510134935379, -0.04947243258357048, 0.00827117171138525, 0.02773989923298359, -0.05671660974621773, -0.04269205778837204, 0.0070177968591451645, 0.004246015567332506, 0.03288591653108597, -0.005002458114176989, -0.017149707302451134, -0.0034895732533186674, -0.03253253921866417, -0.003550309455022216, -0.0015335901407524943, -0.007917797192931175, -0.003958898596465588, 0.014355839230120182, 0.0006294483318924904, 0.007862582802772522, 0.0025840511079877615, -0.030390208587050438, -0.029087139293551445, -0.033725179731845856, -0.01903805136680603, 0.027828242629766464, -0.056804951280355453, 0.0026061369571834803, -0.0037049108650535345, 0.019534984603524208, -2.230159043392632e-05, -0.050046663731336594, -0.021268729120492935, -0.009690191596746445, 0.01675216108560562, 0.09337921440601349, -0.042625799775123596, 0.05048838257789612, -0.03323929011821747, 0.02010921761393547, 0.08838780224323273, 0.039069969207048416, -0.02367609180510044, 0.00906626507639885, -0.00898896437138319, -0.010827615857124329, -0.018795106559991837, 0.031185301020741463, -0.01584663800895214, 0.004317794926464558, -0.036375489085912704, 0.04079267010092735, -0.02013130486011505, -0.007531294133514166, -0.028071187436580658, -0.0037021501921117306, -0.05464053526520729, 0.002425308572128415, -0.04443684592843056, 0.008746019564568996, 0.03259879723191261, -0.020385291427373886, -0.018728848546743393, 0.04585034400224686, 0.047749731689691544, -0.0026530695613473654, -0.04916322976350784, 0.024139896035194397, -0.010280990041792393, -0.0038539906963706017, -0.03293008729815483, -0.037612300366163254, -0.05954360589385033, 0.011330069974064827, -0.05760004371404648, -0.009093872271478176, 0.009491418488323689, 0.004453070927411318, -0.021423330530524254, 0.013814735226333141, -0.011341113597154617, 0.033371806144714355, 0.001605369383469224, 0.007757674902677536, -0.01555952150374651, 0.021798789501190186, 0.05260863155126572, 0.009761970490217209, 0.04317794740200043, 0.011760745197534561, -0.010363811627030373, 0.005278531927615404, 0.0394454300403595, -0.005273010116070509, 0.03277548402547836, -0.00422116881236434, -0.05954360589385033, -0.022638054564595222, 0.021942349150776863, -0.03544788062572479, 0.006653379648923874, -0.030390208587050438, -0.004337119869887829, -0.02791658602654934, 0.005720249842852354, -0.018022099509835243, -0.03456444293260574, 0.025111675262451172, 0.030699411407113075, 0.036750949919223785, 0.010976695455610752, 0.04024052247405052, -0.002091259229928255, 0.010639885440468788, 0.042272426187992096, 0.015946025028824806, 0.014245409518480301, -0.025001246482133865, -0.011628230102360249, 0.06868717074394226, -0.00917669478803873, -0.0015018417034298182, 0.012235592119395733, -0.043310463428497314, -0.01669694483280182, -0.03114112839102745, -0.006305526476353407, -0.013284672982990742, 0.007299392018467188, -0.031163213774561882, -0.054552190005779266, 0.016266269609332085, 0.028424562886357307, -0.010076695121824741, 0.02809327282011509, -0.0068135024048388, 0.032377939671278, -0.029065053910017014, 0.02171044610440731, 0.04602703079581261, 0.00971227791160345, 0.010523934848606586, -0.00689080310985446, 0.011606143787503242, -0.006029452662914991, -0.05972029268741608, 0.014499397948384285, -0.006896324455738068, 0.022880999371409416, -7.281447324203327e-05, 0.04532027989625931, 0.010584671050310135, -0.02312394417822361, 0.0015404920559376478, -0.04183070734143257, -0.026746032759547234, 0.05194605141878128, -0.02102578431367874, 0.0014031452592462301, -0.0608687587082386, 0.003047855105251074, -0.014896944165229797, 0.007437429390847683, -0.021036826074123383, -0.0380319319665432, 0.004337119869887829, -0.0005428302101790905, 0.014786514453589916, 0.014731300063431263, -0.03765647113323212, 0.003577916882932186, 0.026966892182826996, 0.02970554493367672, 0.05252028629183769, 0.014168109744787216, 0.010838658548891544, -0.021257685497403145, -0.00952454749494791, 0.041720278561115265, -0.028159530833363533, -0.01563682220876217, -0.028755851089954376, -0.017348479479551315, -0.028711678460240364, 0.03418898209929466, -0.02137915790081024, 0.025332534685730934, 0.027099408209323883, 0.028424562886357307, -0.025376707315444946, -0.01705032028257847, -0.014565655961632729, 0.042802486568689346, 0.0011388045968487859, 0.02028590627014637, 0.006228225771337748, 0.0003747702285181731, -0.017834369093179703, 0.02793867141008377, 0.0170724056661129, -0.020186519250273705, 0.03812027350068092, -0.012666267342865467, 0.004798163194209337, 0.021257685497403145, 0.01172761619091034, 0.05609820410609245, -0.06727366894483566, -0.023079773411154747, -0.018640505149960518, 0.016222098842263222, -0.04160984978079796, 0.07336938381195068, 0.06360740959644318, -0.01155092939734459, -0.0077135032042860985, 0.00752025144174695, 0.009927615523338318, 0.015195104293525219, 0.03471904620528221, -0.011164425872266293, -0.02937425673007965, 0.0006957060541026294, 0.012379150837659836, 0.00782393291592598, -0.002508130855858326, -0.0394454300403595, 0.03023560717701912, 0.05729084089398384, 0.06175219640135765, -0.039069969207048416, -0.014168109744787216, 0.01067301444709301, -0.032797571271657944, 0.00337914377450943, 0.045276109129190445, 0.015272404998540878, -0.007299392018467188, -0.004679451696574688, 0.004298469517379999, 0.03474113345146179, 0.005963194649666548, 0.047087155282497406, 0.023609833791851997, 0.0010069792624562979, -0.01708344928920269, -0.02028590627014637, 0.020495722070336342, -0.007188962772488594, 0.015283447690308094, -0.05199022591114044, -0.029131311923265457, -0.032642971724271774, -0.01511780358850956, -0.03553622588515282, -0.04567365720868111, -0.021577931940555573, 0.0208380538970232, 0.028910452499985695, 0.03842947632074356, 0.06886386126279831, 0.05600985884666443, -0.006647857837378979, -0.0060239313170313835, -0.030566895380616188, -0.0039009233005344868, -0.02705523557960987, -0.0008220098679885268, 0.04041720926761627, 0.10636572539806366, 0.002089879009872675, 0.02100369706749916, 0.03385769575834274, -0.02082701027393341, -0.024868730455636978, -0.02632640115916729, 0.011871174909174442, -0.03734726831316948, 0.029948489740490913, 0.03529328107833862, 0.03277548402547836, -0.06806876510381699, -0.019777929410338402, -0.01307485718280077, -0.025398792698979378, 0.01829817332327366, 0.005388961173593998, -0.0023783762007951736, 0.04951660335063934, 0.029926404356956482, 0.01886136457324028, 0.004533132538199425, -0.020904310047626495, 0.001486657653003931, -0.012169335037469864, -0.040461380034685135, 0.06245894357562065, 0.025398792698979378, -0.01120859757065773, 0.021036826074123383, 0.013914121314883232, 0.01955706998705864, -0.012334979139268398, -0.06108961999416351, 0.007343564182519913, -0.036750949919223785, 0.017204921692609787, -0.031074870377779007, -0.027099408209323883, 0.01510675996541977, 0.0006035664118826389, -0.044215984642505646, -0.004972090013325214, -0.019512899219989777, -0.013262586668133736, 0.006250311620533466, 0.010976695455610752, -0.05088593065738678, 0.03756812587380409, -0.032112907618284225, 0.03823070600628853, 0.04819145053625107, -0.003243867540732026, 0.013041728176176548, 0.012577923946082592, 0.0018842039862647653, 0.01669694483280182, -0.019104309380054474, 0.005317182280123234, -0.018563205376267433, 0.03964420408010483, -0.03856199234724045, 0.01921473816037178, 0.0021092041861265898, 0.003028529928997159, -0.007431907579302788, -0.02915339730679989, -0.033570580184459686, -0.024669958278536797, -0.034763216972351074, 0.01581350900232792, 0.0015667190309613943, -0.022858913987874985, -0.015912896022200584, -0.02652517333626747, -0.0295509435236454, 0.1164368987083435, -0.018364431336522102, 0.055435627698898315, -0.022991430014371872, -0.017679767683148384, 0.005985280964523554, 0.004328837618231773, 0.02935216948390007, -0.03222333639860153, 0.013892035000026226, 0.023808607831597328, 0.04176444932818413, 0.023035600781440735, 0.01585768163204193, 0.06117796152830124, -0.008215957321226597, -0.01006013061851263, -0.025177933275699615, -0.026944806799292564, 0.027320267632603645, -0.009706756100058556, 0.04797058925032616, -0.00435368437319994, -0.0010967033449560404, -0.04353132098913193, -0.006653379648923874, 0.02062823623418808, -0.0207828376442194, 0.018430689349770546, -0.026790205389261246, 0.03153867647051811, -0.010253381915390491, -0.020672408863902092, 0.0327313132584095, 0.005642949137836695, 0.03061106614768505, 0.004966568201780319, -0.009093872271478176, 0.008166263811290264, 0.028247874230146408, -0.043288376182317734, -0.009855835698544979, -0.004704297985881567, -0.013649090193212032, -0.07685895264148712, 0.006355219520628452, -0.036198802292346954, 0.023896951228380203, -0.04008592292666435, -0.09320252388715744, 0.044039297848939896, 0.030809840187430382, 0.024934988468885422, 0.01900492236018181, -0.03997549042105675, 0.0003609665436670184, -9.895521361613646e-05, -0.009546632878482342, 0.003265953389927745, 0.011584058403968811, -0.009237430989742279, 0.01708344928920269, 0.021953390911221504, -0.015614735893905163, -0.009822706691920757, 0.018739892169833183, 0.002211351413279772, -0.012842955067753792, 0.021809833124279976, -0.0015115042915567756, 0.05848348140716553, -0.024095725268125534, 0.043310463428497314, -0.012158291414380074, 0.029418427497148514, 0.012677310965955257, -0.015228232368826866, 0.04266997054219246, -0.012831912375986576, 0.017503080889582634, -0.01923682540655136, 0.005079758819192648, -0.021125169470906258, -0.013019641861319542, -0.006703072693198919, 0.03776689991354942, -0.025575479492545128, 0.0059079802595078945, -0.03562456741929054, -0.010242339223623276, -0.00013579381629824638, -0.03734726831316948, 0.01495215855538845, -0.007205527275800705, -0.01585768163204193, -0.019844187423586845, 0.011330069974064827, -0.05000249296426773, -0.001775154727511108, -0.009938658215105534, -0.023587748408317566, 0.0028325174935162067, 0.009044178761541843, 0.011683444492518902, -0.007100618910044432, -0.001021473202854395, 0.014190195128321648, 0.02491290308535099, -0.014521484263241291, 0.029793888330459595, 0.023411061614751816, -0.013306759297847748, -0.008403687737882137, -0.0019532223232090473, 0.006686508189886808, -0.00881779845803976, 0.009380988776683807, -0.022814741358160973, 0.014278538525104523, -0.02899879589676857, 0.008806755766272545, 0.008961357176303864, -0.020882224664092064, -0.00609018886461854, -0.03432149812579155, -0.02436075545847416, 0.01048528403043747, 0.00614540372043848, -0.008144178427755833, 0.0008565190946683288, -0.032488368451595306, 0.0041024573147296906, -0.003936812747269869, -0.03891536965966225, -0.03061106614768505, -0.003760125720873475, 0.024471184238791466, 0.0003240416699554771, -0.020352162420749664, -0.004963807761669159, -0.008729455061256886, -0.025840511545538902, -0.0299043171107769, 0.013218414969742298, 0.012014733627438545, 0.007834975607693195, 0.007150312419980764, 0.04041720926761627, 0.02506750449538231, -0.017160749062895775, 0.006382827181369066, 0.00899448525160551, -0.031229471787810326, -0.014620870351791382, -0.03454235941171646, -0.00826565083116293, -0.022880999371409416, -0.037457697093486786, 0.0056125810369849205, 0.018011057749390602, -0.00977853499352932, 0.029838060960173607, 0.036949723958969116, -0.0383853055536747, 0.029815973713994026, 0.026193885132670403, 0.010457676835358143, 0.000242427340708673, -0.001372777158394456, -0.018276087939739227, -0.026083456352353096, 0.030456464737653732, -0.0002508820907678455, -0.011053996160626411, -0.027165666222572327, -0.018077313899993896, 0.02044050768017769, -0.013295715674757957, -0.059322744607925415, -0.01620001345872879, 0.0019987744744867086, -0.03891536965966225, -0.0022030691616237164, 0.01740369386970997, 0.025332534685730934, 0.027143578976392746, -0.05888102948665619, 0.003475769655779004, -0.011026388965547085, 0.030169349163770676, -0.022174250334501266, 0.003315646667033434, 0.0026848181150853634, -0.02259388193488121, -0.0566282644867897, -0.0030119656585156918, 0.02542087808251381, -0.00244463374838233, -0.001488037989474833, -0.03376935049891472, -0.01562577858567238, -0.018397560343146324, -0.006123317871242762, 0.0003109281533397734, -0.017834369093179703, 0.013947250321507454, -0.025884682312607765, 0.001372777158394456, -0.014499397948384285, -0.0008427153807133436, 0.005206752568483353, 0.008966878056526184, 0.029573028907179832, 0.00036683311918750405, -0.05411047115921974, 0.021036826074123383, 0.03277548402547836, -0.01040798332542181, -0.004709819797426462, -0.011716573499143124, -0.018254002556204796, -0.019822102040052414, 0.016255227848887444, 0.0576883889734745, -0.027430696412920952, -0.006857674103230238, -0.028954623267054558, 0.07270680367946625, 0.08246877789497375, -0.012964427471160889, -0.04673377797007561, -0.009458289481699467, 0.015703080222010612, 0.008254608139395714, -0.018474861979484558, -0.003177609760314226, -0.017679767683148384, 0.0009158749599009752, 0.024625785648822784, -0.013373016379773617, -0.005645710043609142, 0.02915339730679989, 0.0039395736530423164, -0.02398529462516308, 0.011705530807375908, -0.01502945926040411, -0.03573499619960785, 0.03913622722029686, -0.029661372303962708, -0.015968110412359238, -0.007536815945059061, 0.02116934210062027, 0.017326394096016884, -0.03807610273361206, 0.00337914377450943, -0.006057059857994318, -0.04149941727519035, 0.011959518305957317, -0.037457697093486786, -0.03348223492503166, 0.007244177628308535, 0.003448162227869034, -0.028027016669511795, -0.03546996787190437, 0.025906769558787346, 0.01199264731258154, -0.009204301983118057, -0.01023129653185606, -0.013914121314883232, 0.012401237152516842, -0.03288591653108597, -0.007917797192931175, 0.002473621629178524, -0.0110374316573143, -0.03186996281147003, -0.008431294932961464, -0.005330985877662897, 0.007233134470880032, -0.02526627667248249, -0.010761357843875885, -0.059146057814359665, -0.002995401155203581, 0.017933756113052368, -0.026039283722639084, -0.016652774065732956, 0.005941108800470829, -0.012390193529427052, -0.03505033254623413, -0.0057920292019844055, -0.053447894752025604, -0.00030488905031234026, 0.003307364648208022, 0.008779147639870644, -0.005753378849476576, -0.03522702306509018, 0.004563500639051199, -0.014234366826713085, -0.02292517200112343, 0.05570065602660179, -0.007382214535027742, 0.010733750648796558, -0.01147362869232893, -0.03286382928490639, 0.02740861102938652, -0.04110187292098999, -0.018044186756014824, 0.004505524877458811, 0.014687128365039825, -0.016299398615956306, -0.0014700931496918201, -0.01165031548589468, 0.00586380809545517, -0.028601249679923058, 0.026061370968818665, -0.02330063097178936, -0.006885281298309565, 0.002107823733240366, 0.04554114118218422, 0.025111675262451172, 0.015934981405735016, 0.023609833791851997, -0.04571782797574997, 0.018971793353557587, -0.020573021844029427, 0.00977853499352932, 0.013538661412894726, 0.02400738000869751, 0.009281602688133717, 0.03312886133790016, -0.010871787555515766, -0.023388976231217384, -0.011015346273779869, -0.028004929423332214, 0.01006013061851263, -0.058262623846530914, -0.03641965985298157, 0.0055242376402020454, 0.019247867166996002, 0.009220866486430168, -0.0024501553270965815, 0.0020967808086425066, -0.06528594344854355, -0.005924544762820005, 0.023587748408317566, -0.001521166879683733, 0.022660139948129654, -0.002857364248484373, 0.01655338704586029, -0.02630431577563286, 0.01688467524945736, -0.017525166273117065, -0.027695726603269577, -0.01728222146630287, -0.00021447485778480768, -0.03290800005197525, 0.03153867647051811, -0.00050107401330024, -0.0006435971590690315, -0.009546632878482342, 0.0004986583953723311, -0.04602703079581261, -0.02154480293393135, 0.002125768456608057, -0.060736242681741714, -0.0070177968591451645, 0.005416568834334612, 0.02062823623418808, 0.0032990823965519667, 0.003475769655779004, 0.009049700573086739, 0.015890810638666153, -0.003729757620021701, -0.021412286907434464, -0.005485587287694216, -0.001737884827889502, -0.02310185879468918, 0.02884419448673725, -0.0033515363465994596, 0.016796331852674484, 0.013141114264726639, 0.0017144185258075595, 0.006504299584776163, -0.0427362285554409, -0.0048119667917490005, -0.003376383101567626, 0.018088357523083687, -0.011363198980689049, -0.012169335037469864, -0.012003690004348755, -0.0203079916536808, 0.01502945926040411, -0.006355219520628452, 0.007172398269176483, -0.0016122711822390556, -0.009088350459933281, 0.03847365081310272, 0.01395829301327467, -0.03182579204440117, -0.007393257226794958, 0.0027358916122466326, 0.02846873365342617, 0.03785524517297745, 0.03789941594004631, -0.007437429390847683, -0.03133990243077278, -0.014941115863621235, -0.010568106546998024, 0.030279777944087982, -0.029065053910017014, -0.006095710210502148, -0.04163193330168724, -0.0035834384616464376, -0.00855276733636856, -0.01013743132352829, -0.021125169470906258, 0.005775464698672295, 0.020849095657467842, -0.006432520225644112, -0.019833143800497055, 0.008144178427755833, -0.052387770265340805, -0.0104190269485116, 0.018971793353557587, 0.025200020521879196, 0.004585586488246918, 0.0035061377566307783, -0.019634371623396873, 0.012301850132644176, 0.009993872605264187, -0.001655062660574913, -0.000786120246630162, 0.005419329274445772, 0.0027869653422385454, 0.008519638329744339, -0.003715953789651394, -0.04470187425613403, -0.05013500899076462, 0.03153867647051811, -0.0009628075058571994, 0.019844187423586845, -0.009060743264853954, 0.001656442997045815, 0.034939903765916824, -0.024073638021945953, 0.011495715007185936, -0.036927636712789536, 0.029241740703582764, 0.008889577351510525, 0.012401237152516842, -0.035867512226104736, 0.03765647113323212, 0.010380376130342484, 0.013582833111286163, -0.011230683885514736, -0.01057362835854292, -0.025487136095762253, 0.015062588267028332, -0.00528957461938262, -0.040461380034685135, -0.008227000012993813, -0.03136198967695236, -0.013417188078165054, 0.006311047822237015, -0.0016426392830908298, 0.047749731689691544, -0.032642971724271774, 0.015382833778858185, -0.005231599323451519, -0.02455952763557434, -0.015791423618793488, 0.005063194315880537, -0.008668718859553337, 0.008812276646494865, -0.0272540096193552, 0.027143578976392746, 0.008873012848198414, -0.01762455329298973, 0.027872415259480476, -0.009651541709899902, -0.03286382928490639, -0.008541724644601345, 0.005488347727805376, -0.017116578295826912, 0.0023535294458270073, -0.0392024852335453, -0.02416198141872883, 0.00916013028472662, 0.015537435188889503, -0.022284680977463722, -0.012688353657722473, 0.011214119382202625, -0.010639885440468788, 0.004135585855692625, 0.02707732282578945, 0.02135707251727581, -0.019954616203904152, 0.0341448113322258, -0.013085899874567986, 0.02440492808818817, -0.021953390911221504, 0.019623328000307083, 0.003078223206102848, 0.0038512300234287977, 0.0004168714804109186, -0.0014963202411308885, -0.020573021844029427, -0.007807367946952581, 0.003210738766938448, 0.011771788820624352, -0.017149707302451134, -0.0014342035865411162, -0.029948489740490913, 0.04898654296994209, 0.02206382155418396, 0.011528843082487583, 0.06621354818344116, 0.01227976381778717, 0.026569345965981483, 0.005491108633577824, -0.02279265597462654, 0.043288376182317734, -0.01040798332542181, 0.0047125802375376225, 0.018088357523083687, 0.01621105521917343, 0.0327313132584095, -0.029418427497148514, 0.03005891852080822, 0.04503316432237625, -0.0015266883419826627, -0.002528836252167821, 0.025862596929073334, 0.03679512068629265, 0.0024322106037288904, 0.024272412061691284, 0.000870322750415653, -0.0003445746551733464, 0.022483453154563904, 0.002542640082538128, -0.002745554316788912, -0.01603436842560768, 0.00906626507639885, 0.047263842076063156, -0.01653130166232586, -0.006526385433971882, 0.022317808121442795, 0.019292039796710014, -0.02007608860731125, 0.020363206043839455, 0.002254142891615629, 0.011694488115608692, -0.006957060657441616, 0.001808283617720008, 0.0028849716763943434, -0.00391472689807415, -0.03564665466547012, -0.0113024627789855, 0.00431503402069211, -0.010965652763843536, -0.007912276312708855, 0.009292645379900932, -0.02206382155418396, 0.0022983145900070667, 0.03145033121109009, 0.0068135024048388, -0.03452027216553688, 0.014168109744787216, 0.00953006837517023, 0.038164447993040085, 0.013560746796429157, -0.006415956187993288, 0.0029484685510396957, 0.0075699444860219955, -0.01139632798731327, -0.023609833791851997, 0.0031085913069546223, 6.427343760151416e-05, 0.022350937128067017, 0.0021823637653142214, -0.02416198141872883, 0.015934981405735016, 0.001971167279407382, -0.019656457006931305, -0.03856199234724045, -0.00733252102509141, 0.017304308712482452, 0.03003683313727379, 0.012025776319205761, 0.06431416422128677, 0.02614971436560154, 0.01620001345872879, -0.015438049100339413, -0.016122711822390556, 0.005471783224493265, -0.027143578976392746, -0.017348479479551315, 0.007117183413356543, 0.020186519250273705, 0.009005528874695301, 0.026215972378849983, 0.016509216278791428, -0.0005459359963424504, 0.009706756100058556, -0.019888360053300858, 0.0073380423709750175, -0.007222091779112816, -0.005891415756195784, -0.031052784994244576, 0.02652517333626747, 0.03683929145336151, 0.0626356303691864, 0.010617800056934357, 0.010722707957029343, -0.00818835012614727, 0.028159530833363533, -0.018198788166046143, -0.015062588267028332, -0.016840504482388496, -0.004132825415581465, -0.017878541722893715, -0.012765654362738132, 0.01794479973614216, 0.0034674874041229486, -0.012235592119395733, 0.027828242629766464, -0.054198816418647766, -0.015250318683683872, -0.001605369383469224, -0.033173032104969025, -0.0009676387999206781, 0.03480738773941994, 0.021069955080747604, -0.031052784994244576, -0.013119028881192207, 0.007095097564160824, 0.019656457006931305, 0.013604918494820595, 0.013229458592832088, 2.7283858798909932e-05, -0.011374241672456264, -0.0415656752884388, -0.012931298464536667, -0.009403075091540813, -0.03756812587380409, -0.001272010151296854, -0.003241106867790222, 0.015581606887280941, 0.008663197048008442, -0.05552396923303604, -0.006791416555643082, 0.02950677089393139, -0.02367609180510044, 0.022903084754943848, -0.051857709884643555, 0.010225774720311165, 0.04216199740767479, 0.03997549042105675, 0.01290921214967966, -0.0075699444860219955, -0.05181353911757469, 0.040306780487298965, -0.02758529782295227, -0.004461353179067373, -0.021809833124279976, -0.0034536838065832853, -0.0300810057669878, -0.0011512278579175472, -0.015537435188889503, -0.025663824751973152, 0.02274848334491253, -0.0031196344643831253, -0.01620001345872879, 0.021997563540935516, -0.009171172976493835, 0.03918039798736572, -0.004477917682379484, 0.0017585903406143188, 0.01582455262541771, 0.006366262678056955, -0.005836200900375843, -0.006266876123845577, 0.011771788820624352, 0.0156589075922966, -0.03677303344011307, 0.00872393324971199, 0.019247867166996002, -0.008403687737882137, -0.006537428591400385, 0.019634371623396873, 0.019435597583651543, 0.025023331865668297, 0.06851048022508621, 0.026768120005726814, -0.03624297305941582, 0.01059571374207735, -0.009016571566462517, 0.002441873075440526, 0.014234366826713085, 0.006614729296416044, 0.01110921148210764, -0.0355583094060421, -0.03840739279985428, 0.0008827460696920753, -0.007442950736731291, 0.03259879723191261, 0.030103091150522232, 0.008133134804666042, 0.004110739566385746, -0.01688467524945736, -0.019479770213365555, 0.018949707970023155, 0.052741147577762604, 0.06590434908866882, -0.00578650739043951, 0.014201237820088863, 0.010159517638385296, -0.013936207629740238, -0.01655338704586029, 0.011860132217407227, 0.014355839230120182, 0.021820876747369766, -0.02369817905128002, -0.04797058925032616, -0.012876084074378014, 0.004505524877458811, -0.01833130232989788, -0.0018345105927437544, 0.015327619388699532, -0.0003109281533397734, -0.0327313132584095, 0.028380390256643295, 0.002825615694746375, 0.019468726590275764, -0.010971174575388432, -0.039798803627491, 0.039732545614242554, 0.006007366813719273, 0.006620250642299652, -0.0006128839449957013, 0.013814735226333141, 0.0018538357689976692, -0.001441105385310948, 0.02013130486011505, 0.024073638021945953, -0.02327854558825493, 0.005024543963372707, -0.039246656000614166, 0.03416689857840538, 0.04110187292098999, 0.04567365720868111, 0.026061370968818665, -0.035668738186359406, -0.028777936473488808, -0.010755836963653564, 0.0019490813137963414, -0.020871182903647423, -0.03147241845726967, 0.023808607831597328, 0.004751230590045452, -0.021279770880937576, 0.022991430014371872, -0.0024694805033504963, -0.02189817652106285, 0.0035337451845407486, -0.014046636410057545, 0.01723805069923401, 0.022339895367622375, -0.01635461486876011, -0.01794479973614216, 0.01727117970585823, 0.025531308725476265, 0.008635589852929115, -0.012268721126019955, -0.023764435201883316, 0.013549704104661942, -0.006034974008798599, -0.03226751089096069, 0.04611537232995033, 0.013130071572959423, -0.008480988442897797, 0.005637427791953087, 0.03882702440023422, 0.014201237820088863, 0.006283440627157688, -0.014554612338542938, -0.0005876921932213008, 0.007575466297566891, -0.021666275337338448, -0.028777936473488808, -0.05464053526520729, -0.0057920292019844055, 0.030191434547305107, 0.04532027989625931, 0.001321703544817865, 0.02597302570939064, 0.01584663800895214, 0.01155092939734459, 0.004908592905849218, 0.009204301983118057, -0.02296934276819229, 0.0327313132584095, -0.02081596665084362, 0.003009204752743244, 0.015084674581885338, -0.030191434547305107, 0.0013175624189898372, -0.005411047022789717, -0.012611052952706814, -0.03403438255190849, -0.04107978567481041, 0.023212287575006485, 0.01199264731258154, 0.00431503402069211, 0.0038042974192649126, 2.622701504151337e-05, -0.004361966624855995, -0.006095710210502148, 0.026900634169578552, 0.007150312419980764, 0.007641723845154047, -0.015161975286900997, -0.0007108901045285165, 0.003920248709619045, 0.0033046037424355745, 0.014797558076679707, 0.007873625494539738, 0.03489573299884796, -0.0007212429190985858, -0.004022395703941584, -0.014057680033147335, 0.002622701460495591, -0.028424562886357307, 0.05057672783732414, -0.02416198141872883, 0.010209210216999054, 0.026746032759547234, 0.0017599706770852208, 0.03005891852080822, 0.0304343793541193, 0.04664543643593788, 0.017127620056271553, -0.0077135032042860985, -0.014112894423305988, -0.017503080889582634, 0.012080990709364414, -0.0003207632980775088, -0.06126630678772926, 0.008044791407883167, -0.025707995519042015, -0.013373016379773617, -0.02101474069058895, 0.010187124833464622, -0.004593868739902973, -0.0110374316573143, -0.02186504751443863, -0.023057686164975166, 0.04114604368805885, -0.02707732282578945, 0.014168109744787216, -0.013571789488196373, 0.01638774201273918, 0.010904916562139988, 0.007034361362457275, 0.025840511545538902, 0.015934981405735016, 0.019126394763588905, -0.015736209228634834, 0.001938038389198482, -0.030699411407113075, -0.015438049100339413, 0.01675216108560562, -0.007310435175895691, -0.019523940980434418, -0.011042953468859196, 0.010247861035168171, 0.0020332837011665106, -1.9454577341093682e-05, -0.00861350353807211, -0.026392659172415733, -0.01466504205018282, -0.028424562886357307, 0.008392645046114922, -0.01634357124567032, -0.012025776319205761, 0.004593868739902973, -0.005540801677852869, 0.03666260465979576, -0.008105527609586716, -0.013085899874567986, -0.02544296532869339, 0.03577917069196701, 0.0038236225955188274, -0.010656449943780899, -0.05994115024805069, 0.030368121340870857, -0.006868717260658741, 0.030323950573801994, -0.04123438894748688, 0.010004916228353977, -0.006984667852520943, -0.03410064056515694, -0.004107978660613298, 0.012588966637849808, -0.0052647278644144535, -0.014731300063431263, 0.04072641208767891, -0.011606143787503242, -0.006112274713814259, 0.0027510758955031633, 0.008116571232676506, -0.008464423939585686, 0.0013858906459063292, -0.011225162073969841, -0.022682227194309235, 0.01635461486876011, -0.03253253921866417, -0.021754618734121323, 0.03438775613903999, 0.007084054872393608, -0.03268714249134064, -0.03186996281147003, 0.04476813226938248, -0.024095725268125534, -0.0001894556771731004, 0.0030588980298489332, 0.015946025028824806, -0.02134602889418602, 0.006929453462362289, -0.05234359949827194, 0.0220748633146286, -0.012865040451288223, -0.005353071726858616, 0.025862596929073334, -0.024294497445225716, 0.026613518595695496, -0.017480995506048203, -0.020561980083584785, 0.03862825036048889, 0.017326394096016884, 0.009104914963245392, 0.004693255294114351, 0.0008013042970560491, 0.02261596918106079, -0.008519638329744339, -0.010546020232141018, -0.015239275991916656, -0.006581600289791822, 0.049869976937770844, -0.022273637354373932, 0.004176997113972902, -0.007625159341841936, 0.031936220824718475, 0.0056760781444609165, -0.02491290308535099, -0.001088421093299985, 0.030456464737653732, -0.019303083419799805, 0.013262586668133736, 0.005814115051180124, -0.02614971436560154, 0.012566881254315376, 0.016244184225797653, 0.0011332831345498562, 0.008828841149806976, -0.0017157988622784615, 0.015912896022200584, 0.034763216972351074, -0.01172761619091034, -0.027806157246232033, 0.00395337725058198, -0.02240615338087082, 0.005201231222599745, -0.026944806799292564, -0.0035585917066782713, 0.01781228370964527, -0.022472409531474113, -0.015415962785482407, 0.004880985245108604, 0.01993253082036972, -0.008331908844411373, 0.0015473938547074795, 0.007973012514412403, 0.0033018430694937706, 0.035492051392793655, -0.048103105276823044, -0.001005598925985396, -0.04929574579000473, 0.014190195128321648, -0.015393877401947975, -0.00035026867408305407, -0.012865040451288223, -0.04043929651379585, -0.03164910525083542, -0.0017696332652121782, 0.0017820566426962614, 0.026547260582447052, 0.014543569646775723, 0.01741473749279976, -0.019777929410338402, -0.01566995121538639, -0.004384052474051714, -0.016785290092229843, -0.004720862489193678, -0.0005110817146487534, -0.018773021176457405, 0.006609207484871149, 0.003525462932884693, 0.003715953789651394, 0.000989724649116397, -0.040461380034685135, 0.02238406613469124, 0.033084686845541, 0.0017171793151646852, 0.008795712143182755, -0.00040030706441029906, 0.025111675262451172, -0.01764664053916931, -0.029131311923265457, -0.0036220888141542673, 0.02345523238182068, -0.00755890179425478, -0.00792331900447607, 0.030655238777399063, 0.037104323506355286, 0.015449091792106628, 0.025730080902576447, 0.01815461553633213, 0.044900648295879364, -0.002125768456608057, 0.04317794740200043, 0.017878541722893715, 0.005952151957899332, 0.009728842414915562, 0.013273630291223526, -0.0024970879312604666, -0.024338670074939728, 0.02292517200112343, -0.02559756673872471, -0.011904303915798664, -0.027695726603269577, 0.03615462779998779, 0.004400616977363825, 0.012776697054505348, -0.0073380423709750175, -0.013218414969742298, -0.025928854942321777, 0.03162701800465584, -0.0037242360413074493, 0.014653999358415604, -0.03209082409739494, 0.028336219489574432, -0.03719266876578331, 0.007774239405989647, -0.01440001092851162, -0.011352156288921833, -0.03412272781133652, 0.009822706691920757, 0.010076695121824741, 0.019965659826993942, 0.013119028881192207, -0.03792150318622589, -0.002959511475637555, -0.02332271821796894, 0.022516582161188126, 0.014179152436554432, 0.02279265597462654, -0.039246656000614166, -0.008447859436273575, -0.037104323506355286, -0.009397553279995918, 0.0046960157342255116, 0.014278538525104523, -0.03542579337954521, -0.016641730442643166, -0.02667977474629879, 0.011363198980689049, 0.020727623254060745, 0.009817185811698437, 0.003047855105251074, -0.025840511545538902]
metadata : {"source": "pydantic_ai_docs", "crawled_at": "2025-03-15T11:17:54.707372", "url_path": "/api/pydantic_graph/graph/", "chunk_size": 4621}
updated_dt: 2025-03-15T11:17:54.707372
---
```

Run a node in the graph and return the next node to run.
Parameters:
Name | Type | Description | Default  
---|---|---|---  
`node` |  `BaseNode[](https://ai.pydantic.dev/api/pydantic_graph/nodes/#pydantic_graph.nodes.BaseNode "pydantic_graph.nodes.BaseNode")[StateT[](https://ai.pydantic.dev/api/pydantic_graph/state/#pydantic_graph.state.StateT "pydantic_graph.state.StateT"), DepsT[](https://ai.pydantic.dev/api/pydantic_graph/nodes/#pydantic_graph.nodes.DepsT "pydantic_graph.nodes.DepsT"), T]` |  The node to run. |  _required_  
`history` |  `list[](https://docs.python.org/3/library/stdtypes.html#list)[HistoryStep[](https://ai.pydantic.dev/api/pydantic_graph/state/#pydantic_graph.state.HistoryStep "pydantic_graph.state.HistoryStep")[StateT[](https://ai.pydantic.dev/api/pydantic_graph/state/#pydantic_graph.state.StateT "pydantic_graph.state.StateT"), T]]` |  The history of the graph run so far. NOTE: this will be mutated to add the new step. |  _required_  
`state` |  `StateT[](https://ai.pydantic.dev/api/pydantic_graph/state/#pydantic_graph.state.StateT "pydantic_graph.state.StateT")` |  The current state of the graph. |  `None`  
`deps` |  `DepsT[](https://ai.pydantic.dev/api/pydantic_graph/nodes/#pydantic_graph.nodes.DepsT "pydantic_graph.nodes.DepsT")` |  The dependencies of the graph. |  `None`  
`infer_name` |  `bool[](https://docs.python.org/3/library/functions.html#bool)` |  Whether to infer the graph name from the calling frame. |  `True`  
Returns:
Type | Description  
---|---  
`BaseNode[](https://ai.pydantic.dev/api/pydantic_graph/nodes/#pydantic_graph.nodes.BaseNode "pydantic_graph.nodes.BaseNode")[StateT[](https://ai.pydantic.dev/api/pydantic_graph/state/#pydantic_graph.state.StateT "pydantic_graph.state.StateT"), DepsT[](https://ai.pydantic.dev/api/pydantic_graph/nodes/#pydantic_graph.nodes.DepsT "pydantic_graph.nodes.DepsT"), Any[](https://docs.python.org/3/library/typing.html#typing.Any "typing.Any")] | End[](https://ai.pydantic.dev/api/pydantic_graph/nodes/#pydantic_graph.nodes.End "pydantic_graph.nodes.End")[T]` |  The next node to run or [`End`](https://ai.pydantic.dev/api/pydantic_graph/nodes/#pydantic_graph.nodes.End) if the graph has finished.  
Source code in `pydantic_graph/pydantic_graph/graph.py`
```
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
```
| ```
async defnext(
  self: Graph[StateT, DepsT, T],
  node: BaseNode[StateT, DepsT, T],
  history: list[HistoryStep[StateT, T]],
  *,
  state: StateT = None,
  deps: DepsT = None,
  infer_name: bool = True,
) -> BaseNode[StateT, DepsT, Any] | End[T]:
"""Run a node in the graph and return the next node to run.
  Args:
    node: The node to run.
    history: The history of the graph run so far. NOTE: this will be mutated to add the new step.
    state: The current state of the graph.
    deps: The dependencies of the graph.
    infer_name: Whether to infer the graph name from the calling frame.
  Returns:
    The next node to run or [`End`][pydantic_graph.nodes.End] if the graph has finished.
  """
  if infer_name and self.name is None:
    self._infer_name(inspect.currentframe())
  if isinstance(node, End):
    # While technically this is not compatible with the documented method signature, it's an easy mistake to
    # make, and we should eagerly provide a more helpful error message than you'd get otherwise.
    raise exceptions.GraphRuntimeError(f'Cannot call `next` with an `End` node: {node!r}.')
  node_id = node.get_id()
  if node_id not in self.node_defs:
    raise exceptions.GraphRuntimeError(f'Node `{node}` is not in the graph.')
  with ExitStack() as stack:
    if self._auto_instrument:
      stack.enter_context(_logfire.span('run node {node_id}', node_id=node_id, node=node))
    ctx = GraphRunContext(state, deps)
    start_ts = _utils.now_utc()
    start = perf_counter()
    next_node = await node.run(ctx)
    duration = perf_counter() - start
  history.append(
    NodeStep(state=state, node=node, start_ts=start_ts, duration=duration, snapshot_state=self.snapshot_state)
  )
  if isinstance(next_node, End):
    history.append(EndStep(result=next_node))
  elif not isinstance(next_node, BaseNode):
    if TYPE_CHECKING:
      typing_extensions.assert_never(next_node)
    else:
      raise exceptions.GraphRuntimeError(
        f'Invalid node return type: `{type(next_node).__name__}`. Expected `BaseNode` or `End`.'
      )
  return next_node

```
  
---|---  
####  dump_history