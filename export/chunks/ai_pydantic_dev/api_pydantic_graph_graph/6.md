---
url: https://ai.pydantic.dev/api/pydantic_graph/graph/
session_id: pydantic_ai_docs
chunk_number: 6
title: Generating Graph Diagrams with Mermaid
summary: This section describes a method for generating a diagram of a graph as an image using the Mermaid library. It includes parameters for customization, notes that the method requires an external service (mermaid.ink), and conditions for naming the diagram.
embedding: [0.01815793663263321, 0.044541265815496445, -0.03312326967716217, -0.02762489579617977, 0.007964882999658585, 0.023567628115415573, -0.014366719871759415, -0.007482666522264481, -0.06482760608196259, -0.004935788456350565, 0.008768576197326183, 0.00613024365156889, 0.025407809764146805, -0.027735751122236252, -0.008230932988226414, -0.03192604333162308, -0.018756549805402756, -0.019798580557107925, -0.021893728524446487, 0.02873343974351883, 0.06318695843219757, 0.01248219609260559, 0.04117129370570183, 0.012703904882073402, 0.03935328125953674, 0.019432762637734413, -0.013114065863192081, -0.005215695593506098, 0.026516353711485863, 0.038710325956344604, 0.00396581320092082, -0.011916839517652988, 0.01862352527678013, -0.016594890505075455, -0.006473892368376255, 0.009805064648389816, -0.017326530069112778, -0.00721107330173254, -0.05365348979830742, 0.042168982326984406, -0.00759906368330121, -0.06318695843219757, 0.01035933569073677, 0.015874337404966354, -0.05210153013467789, -0.00802030973136425, -0.03948630765080452, 0.06677863746881485, 0.060615140944719315, 0.010525617748498917, 0.004179207608103752, -0.0239888746291399, -0.006036017555743456, 0.033389318734407425, -0.028755610808730125, -0.025363467633724213, 0.0160406194627285, 0.01537549402564764, -0.014688197523355484, -0.003067893208935857, 0.04024011641740799, -0.010830466635525227, -0.019765324890613556, 0.03376622498035431, -0.0572451688349247, 0.03695882856845856, -0.04374311491847038, 0.04868721589446068, 0.014810136519372463, -0.021173175424337387, 0.023079868406057358, 0.04354357719421387, -0.028866464272141457, -0.044607777148485184, -0.06252183765172958, -0.008386129513382912, -0.01769234985113144, 0.035983312875032425, -0.02129511535167694, -0.03392142057418823, -0.019665556028485298, -0.02272513508796692, 0.03276853635907173, 0.020807355642318726, -0.02352328598499298, -0.050327859818935394, -0.01343554351478815, -0.06092553213238716, -0.02204892411828041, -0.06451721489429474, -0.01474362425506115, -0.01999811828136444, -0.02276947721838951, 0.00428729085251689, 0.03977452963590622, 0.06247749179601669, 0.008957029320299625, -0.018047083169221878, 0.016428610309958458, -0.004193064756691456, 0.010060029104351997, -0.01145125087350607, -0.05139206349849701, 0.003999069333076477, 0.010924693197011948, -0.02636115625500679, -0.027270162478089333, 0.02125077322125435, 0.02334591932594776, 0.007493752054870129, -0.022636450827121735, 0.002510850317776203, 0.04190293326973915, 0.012072035111486912, -0.06376340240240097, -0.06363037973642349, -0.013490970246493816, 0.028356535360217094, -0.009400445967912674, -0.009500214830040932, -0.012182889506220818, 0.011046633124351501, -0.031305260956287384, 0.04642578959465027, 0.037091854959726334, 0.013102980330586433, 0.007859570905566216, 0.03412095829844475, -0.03185953199863434, -0.04655881226062775, 0.0009491901146247983, -0.035052135586738586, -0.056624386459589005, -0.005825394298881292, 0.006906223949044943, -0.03751309961080551, -0.012038778513669968, -0.03773481026291847, -0.025651689618825912, 0.046736180782318115, 0.010137627832591534, -0.0005719389882870018, 0.010664185509085655, -0.031416114419698715, 0.024299265816807747, 0.06074816733598709, -0.030728816986083984, 0.04491816833615303, 0.0182022787630558, -0.001808311091735959, 0.04629276320338249, 0.02186047099530697, -0.03214775398373604, -0.01647295244038105, -0.011440165340900421, 4.763271499541588e-05, -0.015397665090858936, -0.03915374353528023, 0.028977319598197937, -0.0225477684289217, -0.024609658867120743, 0.009339476004242897, -0.02200458198785782, -0.009178737178444862, -0.047135256230831146, -0.009877120144665241, -0.0055510299280285835, -0.004129323177039623, -0.003719162428751588, 0.01033716555684805, -0.00978289358317852, 0.0009110839455388486, 0.01240459829568863, 0.01109651755541563, 0.004353803116828203, -0.03804520145058632, -0.0040295543149113655, -0.018047083169221878, -0.0020618902053683996, 0.007754259742796421, -0.048997607082128525, 0.0008591209771111608, -0.047135256230831146, 0.02104014903306961, -0.03452003374695778, 0.005373663268983364, 0.029465077444911003, 0.028533902019262314, 0.059550940990448, 0.07866222411394119, -0.0014979189727455378, 0.03070664592087269, 0.04992878437042236, -0.039619334042072296, -0.03793434798717499, -0.0012990740360692143, 0.07808578014373779, -0.04873155802488327, -0.018678952008485794, 0.025230443105101585, -0.0019898349419236183, -0.033278465270996094, 0.03522950038313866, 0.002088218228891492, -0.0046641952358186245, -0.008569038473069668, 0.01743738353252411, -0.03973018750548363, -0.011739471927285194, 0.025296954438090324, 0.005495602730661631, -0.026693720370531082, 0.019000429660081863, -0.002562120324000716, -0.007100218906998634, 0.042058128863573074, -0.02873343974351883, -0.0030956068076193333, 0.036737121641635895, 0.006994907278567553, -0.02125077322125435, 0.06323130428791046, 0.032280776649713516, -0.0338105671107769, -0.01312515139579773, -0.014876649715006351, 0.014222608879208565, 0.006545947398990393, -0.039508480578660965, 0.04952970892190933, -0.005731168203055859, 0.006418465171009302, 0.025452151894569397, -0.050904303789138794, 0.001102307578548789, -0.03766829892992973, 0.0254299808293581, 0.012072035111486912, -0.015996277332305908, -0.02474268339574337, -0.020629988983273506, 0.03307892754673958, 0.0028738982509821653, -0.03902072086930275, -0.06238881126046181, 0.045006852596998215, 0.020419364795088768, 0.024897878989577293, 0.003785674925893545, 0.024609658867120743, 0.000404964666813612, -0.009987973608076572, -0.04647013172507286, 0.0002090643101837486, -0.029176857322454453, 0.006279896944761276, 0.0023085412103682756, -0.0032341748010367155, -0.04669183865189552, 0.007338555995374918, 0.040439654141664505, 0.001101614790968597, -0.03531818464398384, -0.029509419575333595, 0.01474362425506115, -0.010481275618076324, -0.017758861184120178, -0.009533471427857876, 0.02312421053647995, -0.031083550304174423, -0.015131614170968533, 0.011562105268239975, -0.016561634838581085, -0.013313603587448597, -0.037313561886548996, 0.021572250872850418, 0.014932076446712017, 0.059284888207912445, -0.004425858613103628, -0.030085861682891846, -0.03456437587738037, 0.045405928045511246, 0.009866034612059593, 0.003924242686480284, -0.024321436882019043, -0.008801832795143127, -0.0007070426945574582, -0.04303364455699921, -0.000637758756056428, -0.0277579203248024, 0.04520639032125473, 0.02503090538084507, 0.0002946299791801721, 0.0074549526907503605, -0.005060499534010887, -0.03560640662908554, -0.014399975538253784, 0.04837682470679283, -0.007920540869235992, -0.009793979115784168, 0.015841081738471985, -0.04236852005124092, 0.024432292208075523, 0.044895999133586884, -0.01073624100536108, 0.02520827203989029, -0.02618378959596157, 0.04046182706952095, 0.012504367157816887, -0.013601824641227722, -0.03815605491399765, -0.022991186007857323, -0.028223508968949318, 0.0027755149640142918, 0.02769140899181366, 0.018778720870614052, 0.05591491609811783, -0.011983351781964302, 0.01805816777050495, 0.0022295573726296425, -0.00028198567451909184, 0.0008473427151329815, 0.02099580690264702, -0.011196286417543888, -0.01104108989238739, 0.012903442606329918, 0.000989374821074307, -0.008064651861786842, -0.047312621027231216, 0.023257235065102577, -0.014887735247612, -0.031593479216098785, 0.02463182993233204, -0.0011847554706037045, 0.05573755130171776, -0.015741312876343727, -0.06491629034280777, -0.02682674489915371, -0.030130203813314438, 0.02330157719552517, 0.00041743580368347466, -0.03895420581102371, -0.01456625759601593, -0.0030346368439495564, 0.004816620144993067, -0.0006751720793545246, 0.02467617206275463, 0.021128833293914795, -0.002160273492336273, -0.04088307172060013, 0.01910019852221012, 0.044652119278907776, 0.041304320096969604, 0.007166731636971235, -0.04070570692420006, -0.001392607344314456, -0.038466449826955795, 0.02733667567372322, -0.011684045195579529, 0.017215674743056297, -0.09231947362422943, -0.006324238609522581, -0.003547338070347905, -0.043211013078689575, -0.07311950623989105, -0.0251417588442564, -0.012027693912386894, 0.018656780943274498, 0.03440918028354645, 0.015563946217298508, 0.028511730954051018, 0.04128214716911316, -0.010071114636957645, 0.010126542299985886, -0.007876199670135975, -0.01059213001281023, 0.00222124345600605, -0.05445164069533348, 0.01145125087350607, 0.0665125921368599, -0.02636115625500679, -0.000698382209520787, 0.012238316237926483, -0.011340396478772163, -0.01672791689634323, -0.025363467633724213, 0.015397665090858936, -0.03771263733506203, -0.05533847585320473, 0.0118503263220191, 0.02647201158106327, -0.05422993376851082, -0.01615147478878498, 0.002254499588161707, -0.04948536679148674, 0.028245680034160614, 0.01754823885858059, -0.018180107697844505, 0.04132648929953575, 0.03567291796207428, 0.02035285346210003, 0.009444788098335266, 0.020851697772741318, -0.0066678873263299465, -0.007887284271419048, 0.015187041833996773, 0.08943726122379303, -0.006512691266834736, 0.018856318667531013, -0.0006093523115850985, 0.029442906379699707, -0.054141249507665634, 0.022447999566793442, -0.008718691766262054, -0.032236434519290924, -0.06567009538412094, 0.002829556353390217, -0.03241380304098129, -0.0013849860988557339, 0.0213948842138052, 0.022060008719563484, -0.05631399527192116, 0.03757961466908455, -0.0007205530419014394, 0.013590739108622074, 0.026494182646274567, 0.018800891935825348, -0.024077557027339935, 0.07520356774330139, -0.049574051052331924, 0.012914528138935566, 0.003979669883847237, -0.0011833698954433203, 0.004913617856800556, 0.02104014903306961, -0.03624936193227768, -0.0012692819582298398, 0.03667060658335686, -0.04513987898826599, -0.010619843378663063, 0.015996277332305908, -0.06606917083263397, 0.008391671814024448, 0.013945473358035088, -0.042168982326984406, 0.005814308766275644, 0.01974315382540226, -0.019754240289330482, -0.0022420284803956747, -0.03924242779612541, -0.0401957742869854, 0.0019025371875613928, 0.006318696308881044, 0.020796269178390503, 0.0317930169403553, -0.033145442605018616, 0.05001746863126755, 0.00757134985178709, 0.040727876126766205, -0.02334591932594776, 0.005598143208771944, 0.004678052384406328, -0.01740412786602974, 0.04354357719421387, -0.04358791932463646, -0.0283343642950058, -0.031017038971185684, -0.005467889364808798, -0.0013060023775324225, -0.031238745898008347, 0.04757867380976677, 0.021816128864884377, 0.014632769860327244, 0.001919165370054543, -0.009915919043123722, -0.003159348154440522, -0.016495121642947197, -0.011517764069139957, 0.0156082883477211, -0.008269731886684895, -0.025740372017025948, -0.01895608752965927, 0.02844521775841713, -0.004168122541159391, -0.01586325280368328, 0.07600171864032745, 0.03897637873888016, -0.04660315439105034, 0.03325629606842995, -0.01970989815890789, 0.01193900965154171, 0.007881741970777512, 0.05161377042531967, -0.008912687189877033, 0.02312421053647995, -0.007876199670135975, 0.013867875561118126, -0.010581044480204582, -0.029376395046710968, -0.04704657196998596, 0.0047417934983968735, -0.01830204762518406, 0.01881197839975357, 0.01650620810687542, -0.01519812736660242, -0.03137177228927612, 0.0410604402422905, 0.04059484973549843, -0.051658112555742264, 0.014145011082291603, -0.04908629134297371, 0.031482625752687454, 0.013657252304255962, 0.038932036608457565, -0.008868345059454441, -0.023190723732113838, 0.017426298931241035, 0.008679892867803574, -0.011174115352332592, 0.020563475787639618, 0.03296807408332825, -0.026494182646274567, 0.04298930615186691, -0.013801362365484238, 0.006557032931596041, -0.0010732084047049284, -0.01798056997358799, 0.019654471427202225, -0.015708057209849358, -0.024432292208075523, 0.03711402416229248, -0.020652160048484802, -0.016993967816233635, 0.00010704369924496859, -0.044363897293806076, -0.005066042300313711, 0.02358979918062687, 0.0003775975201278925, -0.03290156275033951, 0.017925143241882324, -0.0037413332611322403, 0.020330682396888733, -0.02347894385457039, -0.025407809764146805, 0.002962581580504775, -0.026959769427776337, -0.018978258594870567, 0.003189832903444767, -0.0032341748010367155, -0.022026753053069115, -0.010653099976480007, 0.02305769734084606, 0.03312326967716217, -0.03527384251356125, -0.0031759762205183506, -0.005298836622387171, 0.003954727668315172, 0.0335223451256752, 0.007410611025989056, -0.0021103890612721443, 0.0029930665623396635, -0.025651689618825912, -0.002957038814201951, -0.029642444103956223, -0.01658380590379238, 0.043211013078689575, 0.007233244366943836, -0.02549649402499199, -0.01306972373276949, 0.02097363770008087, 0.02913251519203186, 0.00709467614069581, 0.014521915465593338, -0.009522385895252228, 0.0028281707782298326, -0.048066433519124985, 0.04303364455699921, 0.004234634805470705, 0.0066457162611186504, -0.010154255665838718, -0.03906506299972534, -0.028822122141718864, 0.024609658867120743, -0.008957029320299625, 0.0004770199884660542, -0.015187041833996773, -0.02629464492201805, -0.013346860185265541, 0.015187041833996773, -0.002440180629491806, -0.026782402768731117, -0.018024912104010582, 0.006324238609522581, -0.00032753986306488514, -0.0206743311136961, -0.002045262139290571, 0.008280817419290543, 0.011794899590313435, -0.03401010483503342, 0.023744994774460793, 0.044895999133586884, -0.018102509900927544, -0.06606917083263397, 0.04726828262209892, 0.02930988185107708, 0.02629464492201805, 0.05591491609811783, -0.007942711934447289, -0.03276853635907173, -0.032236434519290924, -0.04139300063252449, 0.010597673244774342, -0.02136162668466568, -0.020363938063383102, -0.05524979159235954, 0.02100689336657524, -0.04287844896316528, 0.03866598755121231, 0.023257235065102577, -0.01948818936944008, -0.005442947149276733, 0.0312165766954422, -0.015031845308840275, 0.004777821246534586, -0.0025371781084686518, 0.004018469247967005, -0.010531160049140453, 0.017936227843165398, -0.0294872485101223, -0.02966461516916752, -0.04802209138870239, -0.002968124346807599, 0.026560693979263306, 0.009123310446739197, -0.009827235713601112, -0.036160677671432495, -0.002959810197353363, -0.005492831580340862, -0.001211083377711475, 0.013502055779099464, -0.008801832795143127, -0.005118698347359896, -0.027381015941500664, 0.02409972809255123, -0.015153785236179829, -0.010841552168130875, -0.006357495207339525, 0.00825310405343771, 0.005963962525129318, -0.015541775152087212, -0.04387613758444786, -0.008618922904133797, -0.010941321030259132, 0.007765344809740782, 0.019255394116044044, 0.011462336406111717, 0.005559343844652176, -0.007881741970777512, -0.03567291796207428, -0.006446178536862135, -0.01131268311291933, 0.02086278237402439, -0.015807826071977615, -0.013601824641227722, -0.01564154401421547, 0.010558873414993286, 0.03157131001353264, -0.017703434452414513, 0.001106464653275907, -0.03372188284993172, 0.021816128864884377, 0.035406868904829025, 0.019332993775606155, 0.011440165340900421, -0.016949625685811043, -0.009710838086903095, 0.0007690518395975232, -0.010558873414993286, -0.040905244648456573, 0.04462995007634163, 0.01044801902025938, 0.011429079808294773, -0.04726828262209892, 0.016428610309958458, 0.04194727540016174, 0.018601354211568832, -0.00464756740257144, -0.011728386394679546, -0.010974577628076077, -0.007199987769126892, -0.030041519552469254, 0.028201337903738022, -0.01343554351478815, -0.007294214330613613, 0.031083550304174423, 0.022991186007857323, 0.0012976883444935083, 0.030595792457461357, -0.0007049641571938992, 0.02664937824010849, 0.00999905914068222, -0.011301597580313683, -0.053032707422971725, 0.043610088527202606, -0.011240627616643906, -0.0555158406496048, -0.015996277332305908, 0.036515410989522934, 0.0033949133940041065, -0.03948630765080452, -0.002398610347881913, 0.013745935633778572, -0.025917738676071167, 0.019443847239017487, -0.00441477308049798, 0.007754259742796421, 0.026494182646274567, 0.033145442605018616, 0.012859100475907326, 0.01451082993298769, 0.0203861091285944, -0.00834178738296032, -0.0560922846198082, 0.03267985209822655, 0.009616612456738949, 0.02376716583967209, -0.00825310405343771, 0.014787966385483742, 0.019443847239017487, -0.01786971651017666, -0.045760661363601685, -0.01985400915145874, -0.012859100475907326, -0.00927850604057312, 0.007477123755961657, -0.004727936815470457, -0.010880351066589355, -0.016949625685811043, 0.007815229706466198, -0.00613024365156889, 0.0017736690351739526, 0.023368090391159058, 0.01844615861773491, -0.011916839517652988, -0.021738531067967415, 0.0023792108986526728, -0.01942167617380619, -0.009489129297435284, -0.008541325107216835, 0.01751498132944107, 0.01610713265836239, 0.005124240648001432, -0.012825844809412956, 0.0026549608446657658, 0.04117129370570183, 0.054895058274269104, 0.0239888746291399, -0.04686920717358589, -0.0011896054493263364, 0.05077127739787102, 0.013590739108622074, 0.00615795748308301, -0.011157487519085407, 0.0043427180498838425, -0.00942261703312397, 0.00291823991574347, 0.04343272000551224, 0.025585176423192024, -0.04602671414613724, -0.003148262621834874, -0.009162109345197678, -0.025629518553614616, -0.006534861866384745, 0.019000429660081863, 0.02046370692551136, -0.010625386610627174, -0.0005300221964716911, -0.019831838086247444, -0.01073624100536108, 0.03973018750548363, 0.0051630400121212006, 0.004567197989672422, 0.0038632729556411505, 0.021561164408922195, 0.0364045575261116, 0.00829190295189619, -0.010126542299985886, -0.02999717928469181, 0.0014355634339153767, -0.03363319858908653, -0.03671494871377945, -0.0008563495939597487, -0.005880821496248245, -0.03589462861418724, -0.007183359935879707, 0.020230913534760475, -0.006235555279999971, -0.05822068825364113, -0.007360726594924927, 0.027491871267557144, -0.004780592396855354, 0.09356104582548141, -0.0016087732510641217, 0.017559323459863663, -0.02509741671383381, -0.0011889125453308225, -0.000434063927968964, -0.007937168702483177, 0.03844427689909935, 0.047312621027231216, -0.0036443357821553946, 0.03751309961080551, 0.023434603586792946, -0.010797210969030857, 0.005448489915579557, 0.0016101589426398277, 0.01338011585175991, -0.03474174439907074, -0.0020175485406070948, -0.03354451805353165, 0.030130203813314438, 0.03937545418739319, -0.015708057209849358, -0.010957948863506317, -0.0009775965008884668, 0.0046697380021214485, -0.03086184151470661, -0.008336245082318783, -0.026161618530750275, 0.0003762118285521865, 0.021882642060518265, -0.014666026458144188, 0.0601273812353611, 0.03312326967716217, 0.005581514909863472, 0.014344548806548119, 0.0018928374629467726, 0.0008473427151329815, -0.053387440741062164, 0.007815229706466198, 0.017537152394652367, 0.004949645139276981, 0.04329969733953476, -0.0125708794221282, 0.011595361866056919, 0.007349641062319279, 0.017470641061663628, -0.0525892898440361, -0.013546397909522057, -0.016894198954105377, 0.012814759276807308, -0.0015672029694542289, -0.01150667853653431, -0.03567291796207428, -0.020275255665183067, -0.03935328125953674, 0.036803632974624634, 0.013779191300272942, 0.004309461452066898, 0.02549649402499199, 0.0051297834143042564, -0.00768774701282382, -0.03296807408332825, -0.01783645898103714, -0.026338985189795494, 0.04035096988081932, -0.012271572835743427, -0.0010260952403768897, -0.014932076446712017, 0.008818460628390312, 0.0010842938208952546, -0.016750087961554527, 0.0037496474105864763, 0.0280461423099041, -0.006096987519413233, -0.033788397908210754, 0.011484507471323013, -0.027713580057024956, -0.0021159318275749683, 0.03514081984758377, -0.0008286360534839332, -0.0277579203248024, 0.0174817256629467, -0.0156082883477211, 0.009799521416425705, -0.05156942829489708, 0.03908723220229149, -0.008990284986793995, -0.04267891123890877, 0.0106974421069026, -0.0026591180358082056, -0.026848915964365005, -0.011861411854624748, -0.02769140899181366, 0.03405444696545601, 0.0239888746291399, 0.00455056969076395, 0.0004254034429322928, 0.0031676620710641146, 0.007017078343778849, -0.030041519552469254, -0.03536252677440643, 0.024033216759562492, -0.05210153013467789, -0.006706686224788427, -0.021915897727012634, 0.013457714579999447, -0.01931082271039486, 0.011916839517652988, -0.006706686224788427, -0.024476632475852966, -0.012925613671541214, -0.01226048730313778, 0.02636115625500679, -0.030440595000982285, -0.04068353399634361, 0.021051235496997833, -0.006484977435320616, -0.03447569161653519, 0.01564154401421547, -0.025851227343082428, 0.0474013052880764, -0.026205960661172867, 0.025984251871705055, -0.01682768575847149, -0.01306972373276949, 0.011695130728185177, -0.022603195160627365, -0.0038771298713982105, -0.010575502179563046, 0.003059579059481621, 0.0037468760274350643, -0.03452003374695778, 0.05179113894701004, 0.002273899270221591, -0.04593802988529205, -0.0192110538482666, 0.0062632691115140915, -0.008491440676152706, 0.009888204745948315, 0.023434603586792946, -0.0815444365143776, -0.007637862581759691, -0.02405538782477379, 0.009500214830040932, -0.005246180575340986, 0.007737631443887949, -0.011085432022809982, 0.0010926078539341688, 0.015297896228730679, -0.015175956301391125, -0.01546417735517025, 0.01474362425506115, -0.012393512763082981, 0.03254682943224907, -0.025341296568512917, 0.00798705406486988, 0.022991186007857323, 0.006972736679017544, -0.03502996265888214, 0.013956558890640736, -0.05799897760152817, 0.02064107358455658, -0.009805064648389816, 0.008530239574611187, -0.017526067793369293, 4.22415578213986e-05, -0.039109405130147934, 0.000868820701725781, 0.021428139880299568, -0.01977640949189663, 0.017714520916342735, 0.032990243285894394, 0.05125903710722923, -0.016495121642947197, -0.01833530329167843, 0.015264639630913734, -0.020131144672632217, 0.01636209711432457, -0.02485353872179985, 0.061945393681526184, 0.02664937824010849, -0.026605036109685898, 0.04961839318275452, 0.003932557068765163, 0.0035722802858799696, 0.03642673045396805, -0.03507430478930473, 0.01653946377336979, -0.004179207608103752, -0.002628633053973317, 0.0023002270609140396, 0.00708359107375145, 0.016883112490177155, 0.03427615389227867, -0.03514081984758377, -0.012094206176698208, -0.01650620810687542, 0.006889595650136471, 0.02086278237402439, -0.02578471414744854, 0.01402307115495205, 0.03573943302035332, -0.028068313375115395, -0.018213365226984024, 0.021638762205839157, 0.0030983781907707453, -0.004542255774140358, -0.041193462908267975, 0.004301147535443306, 0.029575932770967484, -0.01041476335376501, 0.02751404233276844, -0.024764854460954666, 0.023323748260736465, 0.005127012263983488, 0.0002721126948017627, -0.0046808235347270966, -0.029376395046710968, 0.01697179675102234, 0.007998138666152954, -0.014322377741336823, 0.034653060138225555, 0.007615691516548395, 0.04152602702379227, 0.0014175495598465204, 0.006612460128962994, 0.010226311162114143, 0.008280817419290543, -0.03514081984758377, -0.03706968203186989, 0.04006275162100792, 0.024121899157762527, 0.022159777581691742, 0.017603665590286255, 0.0016974566970020533, -0.00592516316100955, 0.010957948863506317, 0.029575932770967484, -0.019000429660081863, 0.0011487278388813138, 0.039042890071868896, -0.029398564249277115, 0.006024932023137808, 0.08185482770204544, -0.002391682006418705, -0.004794449079781771, -0.0225477684289217, -0.0014411060838028789, 0.020740842446684837, -0.037091854959726334, -0.016317754983901978, -0.010342707857489586, 0.032635509967803955, 0.028822122141718864, 0.0005175510887056589, 0.013357945717871189, 0.04128214716911316, 0.02006463147699833, -0.0066678873263299465, -0.035296015441417694, -0.015109443105757236, -0.0025122358929365873, 0.0283343642950058, 0.01033716555684805, 0.032635509967803955, 0.07076939940452576, 0.008219847455620766, 0.007421696558594704, -0.015586117282509804, 0.016561634838581085, -0.0004714772803708911, -0.04944102466106415, -0.029332052916288376, -0.0056286281906068325, -0.011384738609194756, -0.026383327320218086, -0.0251417588442564, -0.013236005790531635, -0.0025413352996110916, 0.06513799726963043, 0.004653110168874264, -0.007942711934447289, -0.038311250507831573, -0.005030014552175999, -0.013047553598880768, 0.007017078343778849, 0.01514269970357418, -0.0427897684276104, -0.001809696783311665, -0.01700505241751671, 0.011384738609194756, -0.0020715901628136635, -0.008940400555729866, -0.028223508968949318, -0.008391671814024448, 0.0021200887858867645, -0.0005601607263088226, 0.021749617531895638, -0.001919165370054543, 0.0025482636410743, -0.029930666089057922, -0.009123310446739197, 0.007920540869235992, -0.03485259786248207, 0.01769234985113144, 0.005030014552175999, 0.0025302497670054436, 0.040727876126766205, -0.008064651861786842, -0.02176070213317871, 0.025563005357980728, 0.04276759549975395, -0.009228621609508991, -0.004716851282864809, -0.01716024801135063, 0.01393438782542944, -0.01193900965154171, 0.015065101906657219, 0.024764854460954666, 0.007310842163860798, -0.03567291796207428, 0.0025787486229091883, -0.0280461423099041, -0.009805064648389816, 0.029265539720654488, -0.01571914181113243, -0.00884617492556572, 0.04021794721484184, 0.019299736246466637, 0.0061967563815414906, -0.009045712649822235, 0.035628579556941986, -0.022525597363710403, -0.022492341697216034, -0.004520084708929062, -0.03046276606619358, -0.001802768325433135, 0.013956558890640736, -0.022791648283600807, 0.03354451805353165, 0.00439537363126874, -0.029221197590231895, -0.027669237926602364, -0.008059108629822731, 0.028068313375115395, -0.0033616572618484497, 0.04194727540016174, 0.029553761705756187, -0.01740412786602974, 0.018579183146357536, -0.040550511330366135, 0.027890946716070175, 0.030484937131404877, 0.004162579774856567, 0.02075192891061306, -0.01167295966297388, 0.015774568542838097, 0.016096046194434166, 0.026050765067338943, -0.01876763626933098, 0.02233714424073696, 0.006712228991091251, 0.0009831392671912909, -0.008242018520832062, -0.015696970745921135, 0.05063825100660324, 0.064162477850914, 0.03183735907077789, -0.003081750124692917, 0.03647106885910034, 0.017215674743056297, 0.014000900089740753, -0.009234164841473103, -0.018889576196670532, 0.011495593003928661, 0.002617547521367669, 0.01050344668328762, -0.0017487268196418881, 0.0009935317793861032, -0.006961651146411896, -0.030019348487257957, 0.015586117282509804, -0.000347458990290761, -0.002384753432124853, -0.017237845808267593, 0.017326530069112778, -0.005229552276432514, -0.010896979831159115, -0.0021741304080933332, 0.0003025976475328207, -0.011246170848608017, -0.003145491238683462, 0.015087272971868515, -0.003999069333076477, -0.007399525493383408, 0.004896989557892084, -0.016262328252196312, 0.017060479149222374, 0.003309001447632909, -0.01049790345132351, -0.004694680217653513, -0.05134772136807442, -0.00439537363126874, 0.054717689752578735, 0.005753339268267155, 0.020907124504446983, 0.0008417999488301575, -0.0003121241752523929, 0.038998547941446304, 0.009394903667271137, -0.0032923731487244368, -0.01658380590379238, 0.03695882856845856, -0.01826879195868969, 0.004991215653717518, 0.009211993776261806, -0.008297445252537727, -0.056624386459589005, 0.014045242220163345, -0.005262808874249458, -0.017902972176671028, 0.022536681964993477, 0.0001926093827933073, -0.014710367657244205, -0.015985192731022835, 0.010270652361214161, -0.02347894385457039, -0.02363414131104946, -0.018745465204119682, 0.0033367150463163853, -0.006296525243669748, -0.05219021439552307, 0.054141249507665634, -0.003602765267714858, 0.012781502678990364, 0.024498803541064262, 0.035473380237817764, 0.014000900089740753, -0.030684474855661392, 0.009577812626957893, 0.00034434121334925294, 0.009455873630940914, 0.014932076446712017, -0.0038078457582741976, -0.013945473358035088, 0.055116765201091766, 0.008086822926998138, 0.017825374379754066, -0.026981940492987633, 0.006523776799440384, 0.0033422575797885656, 0.0118503263220191, 0.010342707857489586, -0.022924672812223434, -0.036737121641635895, 0.037202708423137665, -0.0035916799679398537, 0.005908535327762365, -0.023789336904883385, -0.021771788597106934, -0.024831367656588554, -0.016495121642947197, -0.01992052048444748, -0.030108032748103142, -0.02786877565085888, -0.032236434519290924, -0.020153315737843513, -0.0051574972458183765, 0.005379205569624901, -0.0065902890637516975, 0.028068313375115395, 0.007964882999658585, 0.018933918327093124, -0.004046182613819838, -0.0062632691115140915, -0.007903913035988808, 0.012515452690422535, -0.004331632517278194, 0.033566687256097794, 0.0070780483074486256, -0.001044801902025938, 0.009677581489086151, 0.007715460378676653, 0.01248219609260559, -0.03305675834417343, 0.00676211342215538, -0.013291432522237301, 0.01743738353252411, 0.016628148034214973, -0.006806455086916685, 0.028423046693205833, 0.009356104768812656, -0.006983822211623192, 0.00798151083290577, -0.011318225413560867, 0.0032840592321008444, 0.01668357476592064, -0.009660953655838966, -0.014388890005648136, -0.006013846956193447, -0.009987973608076572, -0.036338046193122864, 0.008735320530831814, -0.012293743900954723, -0.03212558105587959, -0.0024762083776295185, -0.04010709375143051, 0.014865564182400703, -0.01815793663263321, -0.03520733118057251, 0.03161565214395523, -0.008840631693601608, -0.019499273970723152, -0.006828626152127981, 0.004187521990388632, -0.008596752770245075, 0.002904383232817054, -0.01687202788889408, -0.01112977322191, 0.02197132632136345, -0.006002761423587799, -0.019188882783055305, -0.018745465204119682, -0.027824433520436287, -0.021771788597106934, 0.005345949437469244, -0.0008757491013966501, -0.02664937824010849, 0.018002741038799286, -0.015442006289958954, -0.016639232635498047, 4.429842374520376e-05, -0.001152192009612918, -0.02113991789519787, 0.0029542676638811827, -0.02891080640256405, 0.008319616317749023, -0.03429832682013512, -0.03992972522974014, -0.0160406194627285, 0.007809686474502087, 0.009677581489086151, -0.048421166837215424, 0.050327859818935394, 0.02567386068403721, 0.0497070774435997, 0.0031870617531239986, 0.034830424934625626, 0.013635081239044666, -0.010148712433874607, -0.0413486622273922, -0.0012630464043468237, -0.014444317668676376, 0.0020563476718962193, 0.02197132632136345, -0.0355398952960968, -0.002970895729959011, 0.004484056960791349, -0.02125077322125435, -0.008641093969345093, 0.011584276333451271, -0.039508480578660965, -0.005002301186323166, 0.016838770359754562, 0.00852469727396965, -0.014499744400382042, -0.004143180325627327, -0.022303888574242592, -0.02104014903306961, -0.021527908742427826, -0.019288651645183563, -0.0034115416929125786, 0.04412001743912697, -0.01001568790525198, -0.01863461174070835, -0.0036415643990039825, 0.058752790093421936, -0.02301335707306862, -0.005379205569624901, -0.01906694285571575, -0.011124230921268463, -0.00480276346206665, -0.023257235065102577, 0.0012540394673123956, 0.04001840949058533, -0.015009674243628979, 0.014200437813997269, 0.04283410683274269, -0.021960239857435226, 0.0358281172811985, -0.02427709475159645, -0.003796760458499193, 0.039286769926548004, -0.0028683554846793413, 0.0182022787630558, 0.04655881226062775, 0.01581891067326069, 0.0061912136152386665, -0.006024932023137808, 0.0004271355574019253, 0.006540404632687569, -0.030507108196616173, 0.05196850374341011, -0.0004995372728444636, -0.034187473356723785, -0.01370159350335598, 0.020297424867749214, 0.016317754983901978, -0.010265110060572624, -0.009483586996793747, 0.03815605491399765, -0.02129511535167694, -0.021738531067967415, 0.04174773767590523, -0.01384570449590683, -0.034542206674814224, 0.016982881352305412, 0.018069254234433174, -0.02942073531448841, -0.016417523846030235, 0.0038106171414256096, 0.03489693999290466, -0.0118503263220191, -0.02259211055934429, 0.001971821067854762, -0.0061967563815414906, 0.04467428848147392, -0.008419385179877281, -0.005659112706780434, -0.019177796319127083, 0.01636209711432457, 0.004642024636268616, 9.171462443191558e-05, -0.003151034004986286, -0.009306220337748528, -0.016672490164637566, 0.009178737178444862, -0.008896059356629848, 0.0026605036109685898, -0.02525261417031288, -0.016206901520490646, -0.01783645898103714, 0.021782873198390007, -0.03456437587738037, -0.030906183645129204, -0.014887735247612, -1.1529282346600667e-06, -0.011406909674406052, 0.015951937064528465, 0.009588898159563541, -0.0012381041888147593, 0.015020759776234627, -0.020219827070832253, -0.00455056969076395, -0.012016608379781246, 0.003852187655866146, 0.012072035111486912, 0.01366833783686161, 0.006751027889549732, -0.03895420581102371, 0.01578565500676632, -0.0024526517372578382, -0.03862164542078972, 0.01919996738433838, -0.003386599477380514, 0.025540834292769432, 0.03596113994717598, -0.01375702116638422, 0.01852375641465187, 0.017503896728157997, 0.006895138416439295, -0.02445446327328682, -0.018645696341991425, -0.01629558391869068, 0.015042930841445923, 0.025917738676071167, -0.017204590141773224, 0.00017217060667462647, 0.02071867138147354, -0.003544566920027137, 0.017670178785920143, -0.001977363834157586, -0.009322848170995712, 0.0010288666235283017, 0.039974067360162735, -0.016417523846030235, -0.00021218208712525666, 0.024188412353396416, -0.037424419075250626, -0.01407849881798029, -0.030884012579917908, -0.004691909067332745, -0.021926984190940857, -0.022880330681800842, -0.016162559390068054, 0.01231591496616602, 0.027536213397979736, 0.012515452690422535, 0.026915429159998894, -0.0349634513258934, 0.02445446327328682, 0.025651689618825912, -0.03647106885910034, 0.02347894385457039, -0.030617961660027504, 0.04181424900889397, -0.01384570449590683, 0.0037385618779808283, -0.013945473358035088, 0.014776880852878094, -0.016428610309958458, 0.008602295070886612, -0.019643384963274002, 0.0058586508966982365, 0.012127462774515152, 0.018224449828267097, -0.014344548806548119, -0.029841981828212738, 0.022159777581691742, -0.008275275118649006, 0.0013309447094798088, -0.007410611025989056, 0.009882662445306778, -0.025363467633724213, 0.010880351066589355, -0.027181478217244148, 0.03607199341058731, -0.0031787476036697626, -0.015031845308840275, 0.0016461865743622184, 0.0015214754967018962, 0.01780320331454277, 0.01190575398504734, 0.0020549618639051914, -0.021960239857435226]
metadata : {"source": "pydantic_ai_docs", "crawled_at": "2025-03-15T11:17:53.225044", "url_path": "/api/pydantic_graph/graph/", "chunk_size": 5000}
updated_dt: 2025-03-15T11:17:53.228211
---
```
    """
    if infer_name and self.name is None:
      self._infer_name(inspect.currentframe())
    if title is None and self.name:
      title = self.name
    return mermaid.generate_code(
      self,
      start_node=start_node,
      highlighted_nodes=highlighted_nodes,
      highlight_css=highlight_css,
      title=title or None,
      edge_labels=edge_labels,
      notes=notes,
      direction=direction,
    )
  defmermaid_image(
    self, infer_name: bool = True, **kwargs: typing_extensions.Unpack[mermaid.MermaidConfig]
  ) -> bytes:
"""Generate a diagram representing the graph as an image.
    The format and diagram can be customized using `kwargs`,
    see [`pydantic_graph.mermaid.MermaidConfig`][pydantic_graph.mermaid.MermaidConfig].
    !!! note "Uses external service"
      This method makes a request to [mermaid.ink](https://mermaid.ink) to render the image, `mermaid.ink`
      is a free service not affiliated with Pydantic.
    Args:
      infer_name: Whether to infer the graph name from the calling frame.
      **kwargs: Additional arguments to pass to `mermaid.request_image`.
    Returns:
      The image bytes.
    """
    if infer_name and self.name is None:
      self._infer_name(inspect.currentframe())
    if 'title' not in kwargs and self.name:
      kwargs['title'] = self.name
    return mermaid.request_image(self, **kwargs)
  defmermaid_save(
    self, path: Path | str, /, *, infer_name: bool = True, **kwargs: typing_extensions.Unpack[mermaid.MermaidConfig]
  ) -> None:
"""Generate a diagram representing the graph and save it as an image.
    The format and diagram can be customized using `kwargs`,
    see [`pydantic_graph.mermaid.MermaidConfig`][pydantic_graph.mermaid.MermaidConfig].
    !!! note "Uses external service"
      This method makes a request to [mermaid.ink](https://mermaid.ink) to render the image, `mermaid.ink`
      is a free service not affiliated with Pydantic.
    Args:
      path: The path to save the image to.
      infer_name: Whether to infer the graph name from the calling frame.
      **kwargs: Additional arguments to pass to `mermaid.save_image`.
    """
    if infer_name and self.name is None:
      self._infer_name(inspect.currentframe())
    if 'title' not in kwargs and self.name:
      kwargs['title'] = self.name
    mermaid.save_image(path, self, **kwargs)
  def_get_state_type(self) -> type[StateT]:
    if _utils.is_set(self._state_type):
      return self._state_type
    for node_def in self.node_defs.values():
      for base in typing_extensions.get_original_bases(node_def.node):
        if typing_extensions.get_origin(base) is BaseNode:
          args = typing_extensions.get_args(base)
          if args:
            return args[0]
          # break the inner (bases) loop
          break
    # state defaults to None, so use that if we can't infer it
    return type(None) # pyright: ignore[reportReturnType]
  def_get_run_end_type(self) -> type[RunEndT]:
    if _utils.is_set(self._run_end_type):
      return self._run_end_type
    for node_def in self.node_defs.values():
      for base in typing_extensions.get_original_bases(node_def.node):
        if typing_extensions.get_origin(base) is BaseNode:
          args = typing_extensions.get_args(base)
          if len(args) == 3:
            t = args[2]
            if not typing_objects.is_never(t):
              return t
          # break the inner (bases) loop
          break
    raise exceptions.GraphSetupError('Could not infer run end type from nodes, please set `run_end_type`.')
  def_register_node(
    self: Graph[StateT, DepsT, T],
    node: type[BaseNode[StateT, DepsT, T]],
    parent_namespace: dict[str, Any] | None,
  ) -> None:
    node_id = node.get_id()
    if existing_node := self.node_defs.get(node_id):
      raise exceptions.GraphSetupError(
        f'Node ID `{node_id}` is not unique â€” found on {existing_node.node} and {node}'
      )
    else:
      self.node_defs[node_id] = node.get_node_def(parent_namespace)
  def_validate_edges(self):
    known_node_ids = self.node_defs.keys()
    bad_edges: dict[str, list[str]] = {}
    for node_id, node_def in self.node_defs.items():
      for edge in node_def.next_node_edges.keys():
        if edge not in known_node_ids:
          bad_edges.setdefault(edge, []).append(f'`{node_id}`')
    if bad_edges:
      bad_edges_list = [f'`{k}` is referenced by {_utils.comma_and(v)}' for k, v in bad_edges.items()]
      if len(bad_edges_list) == 1:
        raise exceptions.GraphSetupError(f'{bad_edges_list[0]} but not included in the graph.')
      else:
        b = '\n'.join(f' {be}' for be in bad_edges_list)
        raise exceptions.GraphSetupError(
          f'Nodes are referenced in the graph but not included in the graph:\n{b}'
        )
  def_infer_name(self, function_frame: types.FrameType | None) -> None:
"""Infer the agent name from the call frame.
    Usage should be `self._infer_name(inspect.currentframe())`.
    Copied from `Agent`.
    """
    asse