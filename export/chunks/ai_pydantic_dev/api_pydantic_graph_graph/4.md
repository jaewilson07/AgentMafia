---
url: https://ai.pydantic.dev/api/pydantic_graph/graph/
session_id: pydantic_ai_docs
chunk_number: 4
title: Graph Iteration and Context Management in Pydantic
summary: This section describes an asynchronous context manager for iterating over a graph's nodes during execution. The method ensures that a `GraphRun` object is returned for async iteration, and includes checks for valid results and options for state management.
embedding: [0.04990416392683983, 0.05455191060900688, -0.03710317611694336, -0.07278839498758316, 0.02434157393872738, -0.009014850482344627, 0.004696978721767664, 0.004925919231027365, 0.009467808529734612, 0.030367886647582054, -0.0029442275408655405, 0.02833942137658596, -0.023691678419709206, -0.05427619442343712, 0.02694115974009037, -0.039308883249759674, -0.036295730620622635, 0.0027325188275426626, 0.04112071916460991, 0.014858994632959366, 0.007020850665867329, -0.00867513194680214, 0.004507425241172314, 0.01591261476278305, -0.009216712787747383, 0.035586751997470856, -0.01628679782152176, 0.051007021218538284, -0.027256261557340622, 0.009093626402318478, 0.005391186103224754, 0.0037147486582398415, -0.04265683516860008, -0.03869837522506714, 0.0332825742661953, 0.034582365304231644, 0.016572358086705208, 0.010614974424242973, 0.004251405596733093, 0.06632882356643677, 0.0032273263204842806, -0.03355828672647476, -0.057663533836603165, -0.006951922085136175, 0.003635973436757922, -0.04691070318222046, 0.00669097900390625, 0.03637450560927391, 0.06420188397169113, 0.029127174988389015, -0.03082084469497204, -0.02048158273100853, -0.021387498825788498, 0.029521051794290543, -0.0782632827758789, 0.017389651387929916, 0.015213483944535255, -0.013736446388065815, -0.018738679587841034, -0.04781661927700043, 0.06006618216633797, 0.0006003541056998074, -0.008172939531505108, 0.047501519322395325, -0.03743797168135643, 0.050494980067014694, 0.01846296526491642, 0.04777723178267479, -0.018561435863375664, -0.0157550647854805, 0.006794371642172337, 0.03288869559764862, -0.0469500906765461, -0.03550797700881958, -0.0019706138409674168, -0.010811912827193737, 0.04151459410786629, 0.007488579023629427, 0.02518840879201889, -0.0015324261039495468, 0.0006843606242910028, -0.01162920705974102, 0.012485888786613941, 0.022805456072092056, 0.022332804277539253, -0.07983878999948502, -0.02591708116233349, -0.03615787252783775, -0.014888535253703594, -0.04742274433374405, 0.026015549898147583, -0.013795527629554272, 0.00347842276096344, 0.05305517837405205, 0.053961094468832016, 0.050101105123758316, 0.02589738741517067, -0.002582353539764881, -0.0033701066859066486, 0.03009217232465744, -0.007734751794487238, -0.014829454012215137, -0.03747735917568207, -0.025759529322385788, -0.006897763814777136, 0.028418196365237236, -0.04561091214418411, 0.06940105557441711, 0.01303731556981802, -0.021741988137364388, -0.05652129277586937, -0.015095320530235767, 0.0034562672954052687, 0.035606443881988525, -0.042932551354169846, -0.08594387769699097, -0.010999004356563091, -0.024774838238954544, 0.018738679587841034, -0.026527589187026024, 0.004116010386496782, -0.0009951539104804397, -0.04003755748271942, 0.004359721671789885, 0.030131559818983078, -0.047698456794023514, 0.004480346571654081, -0.008217250928282738, 0.026015549898147583, -0.015085473656654358, -0.011422421783208847, -0.0416327565908432, -0.05845128744840622, -0.03672899305820465, 0.0016628977609798312, 0.02412494271993637, -0.06128719821572304, 0.007424573879688978, 0.0036261265631765127, 0.020855765789747238, -0.016296643763780594, -0.04773784428834915, 0.0107725253328681, -0.023396270349621773, 0.057663533836603165, 0.05809679999947548, -0.03814695030450821, 0.03133288398385048, -0.06341413408517838, 0.033479511737823486, 0.06337474286556244, 0.02050127647817135, -0.017389651387929916, 0.031746454536914825, 0.016808684915304184, -0.007926766760647297, -0.02605493739247322, 0.0076116654090583324, 0.0004440343182068318, -0.00873421411961317, -0.028969625011086464, 0.03710317611694336, -0.016926847398281097, -0.013618283905088902, -0.034582365304231644, -0.019920310005545616, -0.06065699830651283, -0.009871532209217548, 0.014977158047258854, -0.021761681884527206, 0.04423234239220619, -0.00665651448071003, -0.059042103588581085, 0.08239898830652237, 0.048052944242954254, -0.012663132511079311, -0.02640942670404911, 0.017537355422973633, -0.0035670450888574123, 0.012899458408355713, -0.016828378662467003, -0.050652530044317245, -0.05778169631958008, -0.004209556151181459, -0.04639866575598717, 0.013962925411760807, 0.04108132794499397, 0.008404342457652092, -0.0058441441506147385, -0.017360111698508263, -0.0002307870745426044, 0.034917160868644714, -0.0025971238501369953, 0.019910462200641632, -0.0218601506203413, 0.026842691004276276, 0.034030940383672714, 0.031096557155251503, 0.024597594514489174, 0.023179637268185616, -0.01416971068829298, 0.014120476320385933, 0.0012493273243308067, -0.023179637268185616, 0.0508100800216198, 0.03432634472846985, -0.013362263329327106, -0.022352498024702072, 0.01906362734735012, -0.0124169597402215, 0.006533428095281124, -0.00861112680286169, -0.0029245337937027216, 0.011402728036046028, 0.023928003385663033, -0.001266559469513595, -0.04848621040582657, 0.012584357522428036, 0.03115564025938511, 0.03223880007863045, 0.02312055602669716, 0.042774997651576996, 0.0006212787702679634, 0.021466275677084923, 0.03149043396115303, 0.024223411455750465, -0.014947617426514626, -0.03426726534962654, -0.004231711849570274, 0.05372476950287819, -0.00783322099596262, -0.02520810253918171, 0.00086960569024086, -0.04655621573328972, 0.010437729768455029, -0.02782738208770752, -0.02993462234735489, -0.015922462567687035, 0.0037393660750240088, -0.04143581911921501, -0.054867010563611984, 0.007483655586838722, -0.013953078538179398, -0.008793295361101627, 0.046280499547719955, -0.010654361918568611, 0.008596356958150864, -0.006454652640968561, 0.043996017426252365, 0.022647904232144356, 0.009369339793920517, -0.01016201637685299, -0.03306594118475914, -0.013697058893740177, 0.0036876697558909655, -0.06305964291095734, 0.005189324263483286, 0.005090855062007904, 0.008330490440130234, 0.013697058893740177, 0.03410971537232399, 0.028240952640771866, -0.027709219604730606, 0.006272485014051199, -0.018295567482709885, -0.0031756300013512373, 0.04356275126338005, -0.005593047942966223, 0.022647904232144356, -0.039998169988393784, 0.020954234525561333, 0.01075283158570528, -0.0042440202087163925, -0.0573878213763237, -0.021092092618346214, -0.01695638708770275, 0.012269256636500359, 0.041908469051122665, -0.005794909317046404, -0.060775160789489746, 0.02010740153491497, 0.019290106371045113, 0.02973768301308155, 0.04584723711013794, 0.018669750541448593, -0.010191556997597218, -0.03848174586892128, 0.018275873735547066, 0.03989969938993454, 0.0019816916901618242, -0.007572277914732695, -0.012141246348619461, 0.017941080033779144, -0.0033331806771457195, 0.038068175315856934, -0.052228037267923355, 0.019270412623882294, 0.03763490915298462, 0.024794531986117363, -0.024440042674541473, -0.003837835043668747, -0.0033208720851689577, 0.02449912391602993, -0.004527118988335133, 0.037142563611269, 0.019821839407086372, -0.03389308229088783, -0.020048318430781364, -0.0048520672135055065, 0.0029614598024636507, -0.010565740056335926, 0.04604417458176613, -0.029304418712854385, 0.025601979345083237, 0.006671284791082144, 0.04037235304713249, 0.052582524716854095, -0.06254760175943375, 0.015558125451207161, -0.00726702343672514, 0.0010751599911600351, -0.031549517065286636, 0.041396431624889374, 0.06435943394899368, 0.002720210235565901, 0.008394494652748108, 0.01952643319964409, -0.007473808713257313, -0.036472972482442856, 0.039111945778131485, -0.016838224604725838, -0.015262718312442303, -0.0026168175972998142, 0.018955310806632042, -0.006912534590810537, -0.0036261265631765127, 0.015558125451207161, 0.014317414723336697, 0.05789986252784729, 0.031411658972501755, -0.055221498012542725, -0.0006677439087070525, -0.00867513194680214, -0.01066420879215002, 0.01651327684521675, 0.029481664299964905, -0.014671903103590012, 0.00507608475163579, -0.03204186260700226, 0.013756140135228634, 0.016966234892606735, -0.0024986546486616135, 0.021781375631690025, 0.03361736983060837, 0.005622588563710451, 0.0026266647037118673, -0.02800462581217289, 0.0006923612090758979, -0.03147074207663536, 0.0020198484417051077, -0.05474884808063507, -0.021289030089974403, -0.022332804277539253, -0.0035448893904685974, -0.04502009600400925, -0.04151459410786629, -0.00963028334081173, 0.035055018961429596, 0.024971777573227882, 0.06207495182752609, 0.09712997078895569, 0.05967230722308159, 0.030033091083168983, -0.004468037746846676, -0.019851380959153175, 0.01681853085756302, 0.01392353791743517, -0.0010013082064688206, 0.04052990302443504, 0.08310796320438385, 0.0005914303474128246, 0.027768300846219063, 0.031549517065286636, -0.02272667922079563, -0.030505742877721786, -0.04143581911921501, -0.0009453038219362497, -0.032652370631694794, 0.021584438160061836, 0.023868922144174576, 0.017990313470363617, -0.07326104491949081, -0.00019093783339485526, -0.01189507357776165, -0.05037681758403778, -0.01425833348184824, 0.006154322065412998, 0.019546126946806908, 0.03676838055253029, 0.007025774102658033, 0.02924533747136593, 0.018315261229872704, -0.045413970947265625, 0.04080561548471451, 0.00814339891076088, -0.03216002508997917, 0.03080115094780922, 0.020008930936455727, -0.01610955223441124, 0.03206155449151993, 0.013332722708582878, 0.011767063289880753, 0.007178401108831167, -0.013578895479440689, -0.021820763126015663, -0.013342569582164288, 0.003025464713573456, -0.04915580153465271, -0.024755144491791725, 0.027610749006271362, -0.01268282625824213, -0.05545782670378685, 0.012003389187157154, -0.007316257804632187, 0.020343726500868797, 0.0003387954202480614, -0.0012542507611215115, -0.05545782670378685, 0.02605493739247322, -0.0005283485515974462, 0.03288869559764862, 0.025779223069548607, 0.005563506856560707, -0.010230944491922855, 0.022785762324929237, 0.01538088172674179, 0.006567892152816057, -0.02572014182806015, -0.0010443883948028088, -0.016208022832870483, 0.06227188929915428, -0.004768368788063526, 0.004696978721767664, 0.03320379927754402, -0.018118323758244514, 0.02520810253918171, -0.038028787821531296, -0.027709219604730606, -0.03521256893873215, -0.027886463329195976, -0.0002489423204679042, -0.015124861150979996, 0.00490376353263855, -0.007001156453043222, -0.04060867801308632, -0.01270252000540495, 0.1031956672668457, -0.01513470895588398, 0.039092253893613815, 0.003328257240355015, -0.009187172167003155, -0.005263176281005144, 0.013677365146577358, 0.01188522670418024, -0.009748445823788643, 0.0180001612752676, 0.03950582444667816, 0.026822997257113457, 0.024833919480443, 0.05955414101481438, 0.033873386681079865, -0.013677365146577358, 0.004539427813142538, -0.0003815679519902915, -0.025759529322385788, 0.027689525857567787, -0.0016530508873984218, 0.06743167340755463, 0.0016702829161658883, 0.007104549091309309, -0.059593528509140015, -0.01610955223441124, 0.01959536038339138, -0.005415803287178278, 0.009645053185522556, -0.06936167180538177, 0.025129327550530434, -0.026035243645310402, -0.018187252804636955, 0.005913072731345892, -0.002594662131741643, 0.021604131907224655, -0.010250638239085674, -0.0042661759071052074, 0.03993908688426018, -0.005913072731345892, -0.0508100800216198, -0.0190439336001873, 0.021663213148713112, -0.028201565146446228, -0.06558045744895935, 0.01872883178293705, -0.03028911165893078, 0.02150566317141056, -0.0695979967713356, -0.06514719128608704, 0.02361290156841278, 0.0022512509021908045, 0.017212407663464546, 0.006730366498231888, -0.01782291568815708, 0.0009453038219362497, 0.016936693340539932, 0.004394185729324818, -0.019299954175949097, 0.0023214102257043123, -0.01731087639927864, 0.025326265022158623, 0.006434958893805742, -0.017497967928647995, -0.026842691004276276, -0.01686776615679264, -0.012456347234547138, -0.0046625141985714436, 0.014622668735682964, 0.019959697499871254, 0.054867010563611984, 0.0008437575306743383, 0.019713524729013443, 0.01390384417027235, -0.0015459656715393066, 0.014337108470499516, -0.029619520530104637, 0.02467636950314045, -0.0030303881503641605, -0.010585433803498745, -0.007852914743125439, -0.006415265146642923, -0.04411417990922928, -0.013411498628556728, 0.013706905767321587, 0.02971798926591873, -0.015538431704044342, 0.0038993784692138433, -0.034405119717121124, -0.023199332877993584, -0.01699577458202839, -0.034405119717121124, 0.005479808431118727, 0.014337108470499516, -0.027610749006271362, -0.03257359564304352, 0.013470579870045185, -0.04060867801308632, -0.002402647165581584, -0.0027989856898784637, -0.01743888668715954, 0.00019001468899659812, -0.00044434203300625086, 0.013726599514484406, -0.006740213371813297, -0.0012548662489280105, 0.02816217765212059, 0.01626710407435894, -0.0045148106291890144, 0.06593494117259979, 0.008379724808037281, -0.03564583137631416, -0.03607909753918648, 0.009280717931687832, -0.008620974607765675, -0.0038132178597152233, 0.01129441149532795, -0.012938846834003925, -0.003603970864787698, -0.03757582977414131, 0.01242680661380291, 0.02430218644440174, -0.03011186607182026, 0.026527589187026024, -0.005218864884227514, -0.0410025529563427, 0.00209123850800097, -0.01595200225710869, -0.009822297841310501, 0.023356882855296135, -0.03513379395008087, 0.00818771030753851, 0.01050665881484747, -0.001378568122163415, -0.04234173521399498, 0.0021589361131191254, 0.029501358047127724, -0.0118162976577878, -0.02656697668135166, -0.007976001128554344, -0.014799913391470909, -0.027157790958881378, -0.04502009600400925, 0.016503429040312767, 0.028240952640771866, 0.01932949386537075, 0.04052990302443504, 0.0368865430355072, 0.016188329085707664, 0.005061314441263676, 0.017891844734549522, 0.005548736546188593, -0.02412494271993637, -0.013509967364370823, -0.015361187979578972, 0.0007446729578077793, -0.04080561548471451, -0.04041174054145813, -0.0004880377382505685, 0.03147074207663536, -0.012732061557471752, 0.03326287865638733, 0.032987166196107864, -0.02889084815979004, 0.036492668092250824, 0.02001877874135971, 0.007006079889833927, -0.0015718138311058283, 0.006961768958717585, -0.010890687815845013, -0.02607463113963604, 0.0073408749885857105, -0.01302746869623661, -0.01566644199192524, -0.026015549898147583, 0.012899458408355713, 0.033676449209451675, 0.001073929131962359, -0.054827623069286346, -0.011944307945668697, -0.01416971068829298, -0.040687453001737595, 0.019034087657928467, 0.03044666163623333, 0.038028787821531296, 0.025424735620617867, -0.05356721952557564, 0.015725523233413696, -0.013185019604861736, 0.011973848566412926, 0.024952081963419914, 0.013795527629554272, -0.0006258945213630795, -0.01757674291729927, -0.0478953942656517, -0.01532179955393076, 0.012111705727875233, 0.0027595979627221823, -0.006986386142671108, -0.02203739620745182, -0.02032403275370598, -0.023219026625156403, -0.015154402703046799, 0.0009237637277692556, 0.015351340174674988, 0.01651327684521675, -0.030682986602187157, 0.002983615268021822, -0.03231757506728172, 0.010989157482981682, 0.013263794593513012, 0.010349107906222343, 0.00866528507322073, 0.01076267845928669, -0.03731980919837952, 0.03147074207663536, 0.037378888577222824, -0.02083607204258442, 0.01016201637685299, -0.028398502618074417, -0.004534504376351833, -0.01748812198638916, -0.0029319189488887787, 0.02377045340836048, -0.00835510715842247, -0.010447576642036438, -0.015439962968230247, 0.07235512882471085, 0.07432451844215393, -0.023199332877993584, -0.037004705518484116, -0.014071241952478886, 0.005849067587405443, -0.015883073210716248, -0.03170706704258919, 0.005125319119542837, 0.0010382340988144279, 0.0025552744045853615, -0.019674137234687805, -0.020757297053933144, 0.012466194108128548, 0.027748607099056244, 2.5982777515309863e-05, -0.016503429040312767, 0.00677467742934823, -0.004583738744258881, -0.014199251309037209, 0.03273114562034607, 0.0007465192466042936, -0.006666361354291439, -0.0049086869694292545, 0.012653285637497902, 0.01329333521425724, -0.022175252437591553, -0.009984771721065044, -0.016365572810173035, -0.0454927459359169, -0.0019336879486218095, -0.03306594118475914, -0.04482315853238106, 0.04249928519129753, 0.009137936867773533, -0.02097392827272415, -0.042223572731018066, 0.022785762324929237, -0.00474867457523942, 0.0018487583147361875, -0.020225564017891884, 0.004888993222266436, -0.011845839209854603, -0.025444429367780685, 0.01699577458202839, 0.013194866478443146, -0.011826145462691784, 0.00041387815144844353, -0.013529661111533642, -0.029284724965691566, -0.006641744170337915, -0.032455433160066605, -0.02117086760699749, -0.04009663686156273, -0.01514455582946539, 0.009201942011713982, -0.014760525897145271, -0.02170260064303875, 0.013539507985115051, 0.008153245784342289, 0.0006117395823821425, 0.0020481583196669817, -0.037556134164333344, 0.025424735620617867, 0.007931689731776714, -0.006415265146642923, 0.015656594187021255, -0.041396431624889374, 0.002030926290899515, -0.014662056230008602, -0.0039067636243999004, 0.03676838055253029, 0.01835465058684349, -0.01913255639374256, -0.0013797989813610911, -0.016493583098053932, 0.006302025634795427, -0.0549851730465889, -0.02902870625257492, 0.003032849868759513, 0.008552045561373234, -0.009635206311941147, 0.014012159779667854, -0.024617288261651993, 0.025070246309041977, -0.027374424040317535, 0.02079668454825878, -0.029599826782941818, -0.0023411039728671312, -0.024755144491791725, 0.03444450721144676, 0.014366649091243744, 0.007463961839675903, 0.03775307163596153, -0.028103096410632133, 0.012968387454748154, -0.02132841758430004, 0.01733057014644146, -0.016857918351888657, 0.015479350462555885, 0.008172939531505108, 0.03306594118475914, -0.00738518638536334, 0.004642820451408625, -0.0015496582491323352, -0.0017121323617175221, -0.016217868775129318, -0.06589555740356445, -0.04182969406247139, -0.01243665348738432, 0.0037959858309477568, 0.010388495400547981, -0.0009348415187560022, -0.02956043928861618, -0.06593494117259979, -0.0023571052588522434, 0.007001156453043222, 0.010969463735818863, 0.025661060586571693, -0.0009729982702992857, -0.001188399619422853, -0.027945544570684433, 0.020363420248031616, 0.002136780647560954, -0.022431273013353348, -0.014130323193967342, -0.036847155541181564, -0.021466275677084923, 0.019427962601184845, -0.005425650160759687, -0.009256100282073021, 0.00023740297183394432, 0.018344802781939507, -0.0372016467154026, 0.005090855062007904, 0.000777906272560358, -0.06660453230142593, 0.017497967928647995, 0.01715332642197609, 0.011688288301229477, 0.021741988137364388, -0.013135784305632114, 0.006750060245394707, 0.010880840942263603, 0.0034390350338071585, -0.0594753660261631, -0.0249914713203907, 0.0008123705047182739, -0.019201483577489853, 0.03887562081217766, 0.03722133859992027, 0.03615787252783775, 0.01156027801334858, 0.0377727672457695, -0.004012617748230696, -0.03477930277585983, -0.008473270572721958, -0.0058786082081496716, 0.02325841411948204, -0.0011637823190540075, -0.013125937432050705, 0.018610669299960136, -0.008739137090742588, -0.0023152558133006096, -0.010477117262780666, -0.011934461072087288, 0.008694825693964958, 0.008414189331233501, 0.02061944082379341, 0.030190641060471535, -0.02993462234735489, -0.004524657502770424, 0.011520890519022942, 0.04797416925430298, 0.04982538893818855, 0.03294777870178223, -0.002311563352122903, -0.01617848128080368, -0.020560359582304955, -0.018915923312306404, 0.0011127013713121414, -0.04777723178267479, -0.006085393484681845, -0.036472972482442856, 0.025503510609269142, -0.012377572245895863, 0.002176168141886592, -0.016788989305496216, -0.007739675231277943, 0.014809760265052319, -0.018226640298962593, 0.010270331986248493, -0.007710134610533714, -0.0401163324713707, -0.012338184751570225, 0.005578277166932821, 0.0372016467154026, 0.0058441441506147385, 0.027610749006271362, -0.011432268656790257, -0.004364645108580589, 0.011579971760511398, -0.01724194921553135, -0.007011003326624632, -0.0012031699297949672, -0.020028624683618546, 0.03852113336324692, -0.007557507138699293, -0.020225564017891884, -0.02538534626364708, 0.05734843388199806, 0.0037959858309477568, -0.00021632442076224834, -0.015479350462555885, 0.01016201637685299, 0.006917458027601242, -0.01189507357776165, 0.006740213371813297, -0.03483838587999344, 0.017301030457019806, 0.007852914743125439, 0.03127380087971687, 0.007429497316479683, 0.03410971537232399, -0.013185019604861736, 0.019427962601184845, -0.042223572731018066, -0.02674422226846218, -0.017793375998735428, 0.015164249576628208, 0.020895153284072876, -0.023573514074087143, -0.012958540581166744, -0.006277408450841904, -0.006887916941195726, 0.0006351260235533118, -0.004364645108580589, 0.027256261557340622, -0.016936693340539932, 0.005361645482480526, 0.017192713916301727, -0.02589738741517067, -0.01930980011820793, 0.01389399729669094, 0.0017195175169035792, 0.010290026664733887, -0.0064497292041778564, 0.029954316094517708, -0.0017625978216528893, 0.0016456657322123647, 0.04411417990922928, -0.015794452279806137, -0.03357797861099243, -0.009748445823788643, -0.00901977438479662, -0.040687453001737595, 0.04498070850968361, -0.011658747680485249, -0.025503510609269142, -0.0013121014926582575, 0.023219026625156403, -0.023534126579761505, -0.0377727672457695, 0.01830541528761387, -0.018856842070817947, -0.03044666163623333, 0.03846205025911331, 0.029974009841680527, -0.02906809374690056, 0.005479808431118727, -0.012544970028102398, 0.02132841758430004, -0.033873386681079865, 0.014543893747031689, -0.013677365146577358, 0.01586337946355343, -0.01943781040608883, 0.014809760265052319, -0.03267206251621246, -0.006026312243193388, -0.001846296596340835, 0.019605208188295364, -0.025424735620617867, -0.01939842291176319, -0.012476040981709957, 0.04844682291150093, 0.009654900059103966, 0.029954316094517708, 0.04462621733546257, 0.02323872037231922, 0.02727595530450344, -0.005661976058036089, -0.021781375631690025, 0.032435737550258636, -0.016296643763780594, 0.010171863250434399, 0.015371034853160381, 0.014209098182618618, 0.019467351958155632, -0.043326426297426224, -0.00105423538479954, 0.02727595530450344, -0.028772685676813126, 0.00891145784407854, 0.013106243684887886, 0.03584277257323265, -0.013805374503135681, 0.03336134925484657, 0.008158168755471706, -0.009930613450706005, 0.001513963215984404, -0.003047620179131627, 0.006159245502203703, -0.01304716244339943, 0.010900534689426422, 0.047186415642499924, -0.008059700019657612, -0.02572014182806015, 0.00838957168161869, 0.015597513876855373, -0.019831687211990356, -0.0185712818056345, -0.02591708116233349, -0.010555893182754517, 0.00953181367367506, 0.013884150423109531, -0.009945384226739407, -0.00020155403763055801, -0.013057009316980839, -0.0023361805360764265, 0.0028679140377789736, -0.009512119926512241, -0.0021232410799711943, 0.027197180315852165, -0.01713363267481327, -0.008192633278667927, 0.032258495688438416, 0.0005148090422153473, -0.02132841758430004, 0.02607463113963604, 0.018236486241221428, 0.010191556997597218, 0.00927579402923584, 0.0022167868446558714, 0.005277946591377258, 0.01939842291176319, -0.010644515044987202, 0.011796603910624981, 0.02327810786664486, 0.009024697355926037, 0.008202480152249336, -0.0009871532674878836, -0.00766089977696538, 0.02380984090268612, -0.015292258933186531, 0.002141704084351659, -0.04884069785475731, -0.009827220812439919, 0.007961231283843517, 0.020136941224336624, 0.010634668171405792, 0.05565476417541504, 0.019999084994196892, 0.025149021297693253, -0.03294777870178223, -0.019447658210992813, -0.017320724204182625, -0.02449912391602993, -0.025680754333734512, -0.016217868775129318, 0.01444542407989502, 0.01695638708770275, -0.010713443160057068, 0.01066420879215002, 0.012141246348619461, 0.012899458408355713, -0.03424756973981857, -0.004719133954495192, 0.012318491004407406, 0.0012345570139586926, -0.04052990302443504, 0.012485888786613941, 0.027551667764782906, 0.039978474378585815, 0.0002572506491560489, -0.020717909559607506, 0.014356802217662334, 0.030210334807634354, -0.021584438160061836, 0.0014278027229011059, -0.026763916015625, 0.007995694875717163, 0.0019447656814008951, 0.007488579023629427, 0.02061944082379341, 0.008232020772993565, -0.02833942137658596, 0.034011244773864746, -0.03712287172675133, -0.03152982145547867, 0.011077779345214367, -0.02536565251648426, -0.02991492860019207, 0.04446866735816002, 0.023061474785208702, 0.004701902158558369, -0.015784604474902153, 0.00144257303327322, 0.04395662993192673, 0.004155398346483707, 0.026980547234416008, -0.0047388277016580105, -0.0008591433288529515, -0.030230028554797173, -0.019674137234687805, 0.009965077973902225, -0.03639419749379158, 0.0007686748285777867, 0.008158168755471706, 0.00462066475301981, -0.013962925411760807, -0.04848621040582657, -0.01415986381471157, 0.008862223476171494, -0.01711393892765045, 0.012072318233549595, -0.048052944242954254, 0.024715756997466087, 0.040155719965696335, 0.023396270349621773, 0.015725523233413696, -0.016080012544989586, -0.03814695030450821, 0.024794531986117363, -0.007296564057469368, -0.019979391247034073, -0.014967311173677444, -0.009123167023062706, -0.04027388244867325, 0.009261023253202438, -0.021604131907224655, -0.013185019604861736, -0.001973075559362769, 0.007183324545621872, -0.006021388806402683, 0.03060421161353588, -0.0392301082611084, 0.04687131568789482, -0.019004546105861664, 0.011678441427648067, -0.014977158047258854, 0.0011299335164949298, -0.024814225733280182, -0.008074470795691013, 0.020225564017891884, 0.027906157076358795, -0.033164411783218384, 0.015006698668003082, 0.034188490360975266, -0.006636820733547211, -0.028103096410632133, -0.00766089977696538, 0.017458580434322357, 0.027197180315852165, 0.05742720887064934, 0.02765013836324215, -0.016582205891609192, 0.017763834446668625, -3.9233800634974614e-05, -0.040313269942998886, -0.00677467742934823, 0.005031773820519447, 0.019290106371045113, -0.04742274433374405, -0.03917102888226509, 0.016080012544989586, -0.03426726534962654, 0.017094245180487633, 0.05120395869016647, -0.010979310609400272, 0.00433756597340107, 3.109855970251374e-05, -0.01899469830095768, 0.02765013836324215, 0.05352783203125, 0.043680913746356964, -0.015587667003273964, 0.01129441149532795, 0.00892130471765995, -0.01926056668162346, -0.002433418994769454, 0.030190641060471535, -0.007508272770792246, 0.019555972889065742, -0.0055191959254443645, -0.02573983557522297, -0.02658667042851448, -0.008778524585068226, -0.029698295518755913, 0.008684978820383549, -0.0038895313628017902, -0.016720062121748924, -0.02434157393872738, 0.02902870625257492, 0.004293255042284727, 0.00844372995197773, -0.006046005990356207, -0.03674868866801262, -0.017970619723200798, 0.010240791365504265, 0.02254943549633026, -0.0034267264418303967, 0.03143135458230972, -0.007675670087337494, 0.02889084815979004, 0.002919610356912017, 0.042262960225343704, -0.01626710407435894, 0.0018992237746715546, -0.021958621218800545, 0.028240952640771866, 0.057860471308231354, 0.0237901471555233, 0.031746454536914825, -0.014002312906086445, -0.01582399196922779, 0.015784604474902153, 0.002525733783841133, -0.03903317078948021, -0.022076783701777458, 0.0009286871645599604, 0.020068012177944183, -0.03135257586836815, 0.03668960556387901, -0.010201403871178627, -0.028044013306498528, -0.012554816901683807, -0.0032150177285075188, 0.009113320149481297, 0.006223250180482864, -0.006858376320451498, -0.014199251309037209, 0.011402728036046028, 0.020383113995194435, 0.010063547641038895, -0.0035325807984918356, -0.047186415642499924, 0.00739503325894475, -0.010585433803498745, -0.011934461072087288, 0.020068012177944183, 0.015676287934184074, 0.014396189711987972, 0.010516505688428879, 0.019142402336001396, 0.005657052621245384, 0.006306949071586132, -0.03932857885956764, 0.003931380808353424, 0.009206865914165974, -0.006267561577260494, -0.0318252295255661, -0.06731351464986801, 0.01469159685075283, 0.04494132101535797, 0.04112071916460991, 0.022510048002004623, 0.026822997257113457, 0.00957612507045269, 0.015075626783072948, 0.006626973859965801, 0.0035375042352825403, -0.0038427587132900953, 0.023159943521022797, 0.005499502178281546, -0.003077161032706499, -0.007798756938427687, -0.03082084469497204, 0.003471037605777383, -0.01415986381471157, 0.002051851013675332, -0.002899916609749198, -0.032278187572956085, 0.019693830981850624, 0.0025848152581602335, -0.028752991929650307, 0.008232020772993565, -0.005430573597550392, 0.014819607138633728, -0.009261023253202438, 0.01821679249405861, -0.001173013704828918, -0.0031239339150488377, -0.0008585278992541134, -0.023928003385663033, -0.022884231060743332, 0.003724595531821251, -0.01154058426618576, 0.021840456873178482, 0.027591055259108543, 0.007301487494260073, 0.01926056668162346, -0.01390384417027235, -0.04529580846428871, -0.03643358498811722, 0.046083562076091766, -0.006479270290583372, 0.021643519401550293, 0.025503510609269142, 0.006144475191831589, 0.024223411455750465, 0.024006778374314308, 0.043287038803100586, 0.018807608634233475, -0.010457423515617847, -0.017202559858560562, -0.019821839407086372, -0.005701364018023014, -0.006961768958717585, -0.04238112270832062, 0.027531974017620087, -0.029461970552802086, 0.001548427389934659, -0.008867147378623486, -0.0029393041040748358, -0.02048158273100853, 0.005401032976806164, -0.018669750541448593, 0.010447576642036438, 0.022293414920568466, -0.0037639832589775324, 0.004443420562893152, 0.005661976058036089, 0.019733218476176262, 0.016365572810173035, 0.02136780507862568, 0.023829534649848938, 0.013224407099187374, 0.004788062535226345, 0.0001969383010873571, -0.005036697257310152, -0.005440420471131802, -0.01970367692410946, 0.0010130014270544052, -0.012889611534774303, -0.031549517065286636, -3.463729444774799e-05, 0.023711372166872025, -0.012613898143172264, -0.03145104646682739, -0.00844372995197773, -0.0339127741754055, -0.006420188583433628, -0.013608437031507492, -0.0009489964577369392, -0.01741919293999672, -0.02745319902896881, 0.007143937051296234, -0.01755704917013645, 0.012899458408355713, 0.017015470191836357, -0.01966428942978382, -0.00033971856464631855, 0.04813171923160553, 0.016414808109402657, -0.01988092064857483, -0.02678360976278782, 0.029481664299964905, -0.019073475152254105, 0.02591708116233349, -0.04245989769697189, 0.02465667575597763, 0.011865532957017422, -0.039092253893613815, 0.014406036585569382, -0.014248485676944256, -0.00595246022567153, -0.04474438354372978, 0.025621673092246056, 0.004490193445235491, -0.015873227268457413, 0.0015878150006756186, 0.0451776459813118, -0.0010665439767763019, -0.017261642962694168, -0.0014302644412964582, -0.006144475191831589, -0.011520890519022942, -0.01686776615679264, -0.0050465441308915615, 0.0190439336001873, -0.0009071470703929663, -0.04565029963850975, -0.0019189175218343735, 0.03152982145547867, -0.003441496752202511, -0.0021810915786772966, 0.002890069503337145, 0.018590975552797318, -0.02973768301308155, -0.0033331806771457195, -0.030505742877721786, 0.022628210484981537, -0.013687212020158768, 0.007976001128554344, 0.04411417990922928, -0.027000240981578827, 0.03446420282125473, -0.006351260002702475, -0.015252871438860893, 0.03619726002216339, 0.021623825654387474, -0.02241157926619053, -0.002715286798775196, -0.02380984090268612, 0.040155719965696335, -0.006272485014051199, -0.03172675892710686, -0.0006874377722851932, 0.014849147759377956, 0.05459129810333252, -0.02168290689587593, -0.005548736546188593, -0.010713443160057068, 0.027433505281805992, 0.008266485296189785, -0.013441039249300957, 0.00578013900667429, 0.028733298182487488, -0.030564824119210243, 0.027709219604730606, -0.010939923115074635, -0.021840456873178482, 0.009649977087974548, 0.01677914336323738, 0.011373186483979225, -0.01677914336323738, 0.024243105202913284, 0.019231025129556656, 0.01655266433954239, -0.027965238317847252, -0.028910541906952858, 0.01426818035542965, -0.006366030778735876, 0.009773063473403454, -0.019093168899416924, -0.025956468656659126, 0.010221097618341446, 0.004613279830664396, -0.007429497316479683, 0.004408956039696932, 0.0064300354570150375, -0.010477117262780666, -0.015065779909491539, 0.007390109822154045, -0.021958621218800545, 0.02638973295688629, -0.048171110451221466, -0.00578013900667429, -0.0636504590511322, 0.013992466032505035, -0.0186008233577013, -0.006370954215526581, -0.03257359564304352, -0.02554289810359478, -0.004982538986951113, -0.00868990272283554, -0.005593047942966223, 0.01910301484167576, 0.004406494554132223, 0.005671822931617498, -0.0026857461780309677, 0.004423726815730333, -0.007075008470565081, 0.003773830132558942, -0.002114624949172139, -0.02798493206501007, -0.021564744412899017, 0.03237665817141533, 0.008881917223334312, -0.013224407099187374, -0.0024309572763741016, -0.020225564017891884, 0.026763916015625, 0.009113320149481297, -0.006021388806402683, -0.000678821699693799, -0.006710672751069069, 0.016838224604725838, 0.012377572245895863, -0.003926457371562719, 0.0010800835443660617, 0.01788199692964554, 0.012229868210852146, 0.007527966517955065, 0.03178584203124046, 0.03330226615071297, 0.01864021085202694, 0.03143135458230972, 0.017714601010084152, 0.026153406128287315, -0.016326185315847397, 0.008035082370042801, 0.0184432715177536, 0.010270331986248493, 0.006144475191831589, 0.022510048002004623, 0.007020850665867329, -0.016838224604725838, 0.012082165107131004, 0.00340949441306293, -0.02938319370150566, -0.023731065914034843, 0.016926847398281097, -0.007237482815980911, 0.027335036545991898, 0.017054857686161995, 0.015095320530235767, -0.006100163795053959, 0.023573514074087143, 0.0063758776523172855, -0.007360569201409817, -0.02727595530450344, 0.027019934728741646, -0.007729828357696533, 0.015233177691698074, 0.012820683419704437, -0.022293414920568466, -0.039998169988393784, 0.008616050705313683, 0.018187252804636955, 0.04884069785475731, 0.051361508667469025, -0.03816664218902588, -0.016080012544989586, -0.027079015970230103, 0.001272713765501976, 0.01390384417027235, 0.004426188301295042, -0.04285377264022827, 0.010358954779803753, -0.014150016941130161, -0.003803370986133814, -0.0028679140377789736, 0.001222863793373108, -0.020678522065281868, -0.004788062535226345, -0.01830541528761387, 0.008296025916934013, 0.006267561577260494, 0.028201565146446228, -0.0013551816809922457, -0.005548736546188593]
metadata : {"source": "pydantic_ai_docs", "crawled_at": "2025-03-15T11:17:52.854757", "url_path": "/api/pydantic_graph/graph/", "chunk_size": 4128}
updated_dt: 2025-03-15T11:17:52.855984
---
```
    """
    if infer_name and self.name is None:
      self._infer_name(inspect.currentframe())
    async with self.iter(start_node, state=state, deps=deps, infer_name=infer_name, span=span) as graph_run:
      async for _node in graph_run:
        pass
    final_result = graph_run.result
    assert final_result is not None, 'GraphRun should have a final result'
    return final_result
  @asynccontextmanager
  async defiter(
    self: Graph[StateT, DepsT, T],
    start_node: BaseNode[StateT, DepsT, T],
    *,
    history: list[HistoryStep[StateT, T]] | None = None,
    state: StateT = None,
    deps: DepsT = None,
    infer_name: bool = True,
    span: AbstractContextManager[Any] | None = None,
  ) -> AsyncIterator[GraphRun[StateT, DepsT, T]]:
"""A contextmanager which can be used to iterate over the graph's nodes as they are executed.
    This method returns a `GraphRun` object which can be used to async-iterate over the nodes of this `Graph` as
    they are executed. This is the API to use if you want to record or interact with the nodes as the graph
    execution unfolds.
    The `GraphRun` can also be used to manually drive the graph execution by calling
    [`GraphRun.next`][pydantic_graph.graph.GraphRun.next].
    The `GraphRun` provides access to the full run history, state, deps, and the final result of the run once
    it has completed.
    For more details, see the API documentation of [`GraphRun`][pydantic_graph.graph.GraphRun].
    Args:
      start_node: the first node to run. Since the graph definition doesn't define the entry point in the graph,
        you need to provide the starting node.
      history: The history of the graph run so far. If not provided, a new list will be created.
      state: The initial state of the graph.
      deps: The dependencies of the graph.
      infer_name: Whether to infer the graph name from the calling frame.
      span: The span to use for the graph run. If not provided, a new span will be created.
    Yields:
      A GraphRun that can be async iterated over to drive the graph to completion.
    """
    if infer_name and self.name is None:
      self._infer_name(inspect.currentframe())
    if self._auto_instrument and span is None:
      span = logfire_api.span('run graph {graph.name}', graph=self)
    with ExitStack() as stack:
      if span is not None:
        stack.enter_context(span)
      yield GraphRun[StateT, DepsT, T](
        self,
        start_node,
        history=history if history is not None else [],
        state=state,
        deps=deps,
        auto_instrument=self._auto_instrument,
      )
  defrun_sync(
    self: Graph[StateT, DepsT, T],
    start_node: BaseNode[StateT, DepsT, T],
    *,
    state: StateT = None,
    deps: DepsT = None,
    infer_name: bool = True,
  ) -> GraphRunResult[StateT, T]:
"""Synchronously run the graph.
    This is a convenience method that wraps [`self.run`][pydantic_graph.Graph.run] with `loop.run_until_complete(...)`.
    You therefore can't use this method inside async code or if there's an active event loop.
    Args:
      start_node: the first node to run, since the graph definition doesn't define the entry point in the graph,
        you need to provide the starting node.
      state: The initial state of the graph.
      deps: The dependencies of the graph.
      infer_name: Whether to infer the graph name from the calling frame.
    Returns:
      The result type from ending the run and the history of the run.
    """
    if infer_name and self.name is None:
      self._infer_name(inspect.currentframe())
    return _utils.get_event_loop().run_until_complete(
      self.run(start_node, state=state, deps=deps, infer_name=False)
    )
  async defnext(
    self: Graph[StateT, DepsT, T],
    node: BaseNode[StateT, DepsT, T],
    history: list[HistoryStep[StateT, T]],
    *,
    state: StateT = None,
    deps: DepsT = None,
    infer_name: bool = True,
  ) -> BaseNode[StateT, DepsT, Any] | End[T]:
"""Run a node in the graph and return the next node to run.
    Args:
      node: The node to run.
      history: The history of the graph run so far.