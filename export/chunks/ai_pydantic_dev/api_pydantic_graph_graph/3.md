---
url: https://ai.pydantic.dev/api/pydantic_graph/graph/
session_id: pydantic_ai_docs
chunk_number: 3
title: Creating and Running Graphs in Pydantic
summary: This section illustrates how to create a graph using a sequence of nodes, detailing parameters such as names, state types, and a method for capturing the state. It also references examples for running the graph and generating diagrams with Mermaid.
embedding: [0.03371528163552284, 0.04655064269900322, -0.01343421172350645, -0.08583523333072662, 0.0209597647190094, -0.020720224827528, -0.0032188210170716047, 0.0073209465481340885, -0.01133823487907648, 0.055573321878910065, 0.03447382524609566, 0.0307210274040699, 0.01052978727966547, -0.07557492703199387, -0.0010648309253156185, -0.024133672937750816, -0.04631109908223152, 0.008164327591657639, 0.043915700167417526, 0.03419436141848564, 0.024492982774972916, 0.0008327764226123691, 0.01012556254863739, 0.0032238115090876818, -0.013983157463371754, 0.021039612591266632, 0.0419195294380188, 0.044873859733343124, 0.008279107511043549, -0.006422671023756266, 0.0138534065335989, -0.006757029332220554, -0.03209838271141052, -0.006467584986239672, 0.016927504912018776, 0.017256872728466988, 0.0136138666421175, -0.005369692109525204, -0.012126721441745758, 0.05657140538096428, 0.015290647745132446, -0.041440449655056, 0.0004185714933555573, 0.01174744963645935, -0.01495129894465208, -0.0210795346647501, 0.01064955722540617, 0.05784895271062851, 0.048946041613817215, 0.03944428265094757, -0.0064126900397241116, -0.0076503143645823, 0.01863422989845276, 0.004441474098712206, -0.04471416771411896, -0.009581606835126877, -0.013364345766603947, -0.0007485630339942873, -0.014741702005267143, -0.016787774860858917, 0.035192444920539856, -0.011527870781719685, 0.004898097366094589, 0.0472293384373188, -0.05389653891324997, 0.06212075427174568, -0.0017790849087759852, 0.024253442883491516, -0.004576215520501137, -0.002129661850631237, 0.017496414482593536, 0.026469189673662186, -0.03557171672582626, -0.040342558175325394, -0.038905318826436996, -0.03860589116811752, 0.015869537368416786, 0.0026623893063515425, 0.011947066523134708, -0.006357795558869839, 0.03908497095108032, -0.008324021473526955, 0.024632714688777924, 0.014981241896748543, 0.000185893164598383, -0.05852764844894409, -0.0319187268614769, -0.03561164066195488, -0.011198502965271473, -0.060563743114471436, 0.027327541261911392, -0.01320465188473463, -0.005828810855746269, 0.05321784317493439, 0.06751040369272232, 0.042678073048591614, 0.04667041078209877, 0.017715992406010628, -0.008468743413686752, -0.0022481842897832394, -0.00029038009233772755, -0.007635343354195356, -0.013753598555922508, 0.0034059619065374136, 0.00228561251424253, 0.014991222880780697, -0.04958481714129448, 0.0982913225889206, 0.011567794717848301, -0.01802539825439453, -0.018434612080454826, -0.015071069821715355, 0.029503365978598595, 0.0009325848077423871, -0.037767499685287476, -0.04978443309664726, -0.033475738018751144, -0.0004981063539162278, 0.01920313760638237, -0.012436127290129662, -0.008154346607625484, -0.021917926147580147, -0.03549186885356903, 0.0027671880088746548, 0.02129911445081234, 0.006642249412834644, 0.0009350799955427647, 0.04124083369970322, 0.013474134728312492, 0.008019605651497841, 0.01222652941942215, -0.025071872398257256, -0.021798156201839447, -0.0084338104352355, -0.01967223733663559, 0.007490620948374271, -0.05948581174015999, -0.024512944743037224, 0.02151869237422943, 0.03235788643360138, 0.010250323452055454, -0.033735241740942, -0.002869491698220372, 0.019702179357409477, 0.03249761834740639, 0.0768524706363678, -0.051141828298568726, 0.07297990471124649, -0.04164006561040878, 0.021698348224163055, 0.06643247604370117, 0.024732522666454315, -0.001049859682098031, 0.020520608872175217, 0.026628883555531502, -0.017875686287879944, -0.03355558589100838, 0.0003296796348877251, 0.009386980906128883, -0.013943234458565712, 0.006248006131500006, 0.021838080137968063, -0.01641848310828209, 0.0031015463173389435, -0.02363463118672371, -0.004159515257924795, -0.08112427592277527, 0.007480639964342117, 0.0021446330938488245, -0.03038167953491211, 0.03690914809703827, -0.03948420658707619, 0.007655304856598377, 0.061042822897434235, 0.025990109890699387, -0.013314441777765751, -0.0737384483218193, 0.0015632491558790207, 0.011388138867914677, 0.007026511710137129, -0.015979325398802757, -0.032976698130369186, -0.07353883236646652, 0.014851490966975689, -0.056731097400188446, 0.014572027139365673, 0.0419195294380188, 0.008803101256489754, 0.015001203864812851, -0.010549748316407204, -0.020899880677461624, 0.012186606414616108, -0.024273404851555824, -0.014472219161689281, -0.005102704744786024, 0.01733672060072422, 0.09877040237188339, 0.028704898431897163, 0.031699150800704956, 0.05178060010075569, 0.0037877289578318596, 0.007300985045731068, -0.00013606692664325237, 0.006692153867334127, 0.015610034577548504, -0.001956244697794318, 0.01133823487907648, -0.046390946954488754, -0.0007685247110202909, -0.019233079627156258, 0.008274116553366184, -0.011857238598167896, -0.0312001071870327, 0.00896778516471386, 0.016478367149829865, 0.01088909711688757, -0.012356280349195004, -0.028824668377637863, 0.06064358726143837, 0.023355167359113693, 0.005359711591154337, -0.01861426793038845, -0.006043399218469858, 0.014971260912716389, 0.05357715114951134, 0.014162813313305378, -0.015879517421126366, 0.00619810214266181, 0.0033460769336670637, 0.08679339289665222, -0.025451144203543663, -0.0073908125050365925, 0.01210675947368145, -0.05225968360900879, -0.007370851002633572, -0.04379592835903168, -0.044394779950380325, -0.011418081820011139, 0.009312123991549015, -0.038106851279735565, -0.045672327280044556, 0.00953669287264347, 0.0104798823595047, -0.0032487637363374233, 0.025411220267415047, 0.010100610554218292, -0.017436528578400612, -0.0007728913333266973, 0.014172793366014957, 0.03317631408572197, 0.021378960460424423, 0.000997460214421153, -0.0040322598069906235, -0.01432250626385212, -0.004167000763118267, -0.03443390130996704, -0.01943269744515419, -0.003655483014881611, -0.00029006818658672273, -0.0011259636376053095, 0.04583201929926872, -0.02339509129524231, -0.04315715655684471, -0.013763579539954662, -0.0025750568602234125, 0.005798868369311094, 0.03303658217191696, -0.013663770630955696, 0.0409613698720932, -0.058128416538238525, 0.001590696512721479, 0.003381009679287672, 0.018244976177811623, -0.04038248211145401, -0.0008789377752691507, 0.0015445350436493754, 0.04255830496549606, 0.04070186987519264, 0.00802459567785263, -0.0655541643500328, 0.0003574388683773577, 0.02768685296177864, 0.02828570269048214, 0.0696263462305069, -0.01733672060072422, -0.018923673778772354, -0.02652907371520996, 0.022197389975190163, 0.026948269456624985, 0.0036929110065102577, 0.02489221654832363, -0.004239362198859453, 0.023095665499567986, 0.0012675668112933636, 0.005102704744786024, -0.05229960381984711, 0.0003340462571941316, 0.04655064269900322, 0.01524074375629425, -0.02443309873342514, -0.029383594170212746, -0.0029243864119052887, 0.03106037713587284, 0.0208399947732687, -0.010100610554218292, 0.03571144863963127, -0.03475328907370567, -0.014811567962169647, 0.0421590693295002, 0.05102205649018288, 0.0028719869442284107, 0.04315715655684471, -0.014532104134559631, 0.028325626626610756, 0.03203849866986275, 0.028205856680870056, 0.07860910147428513, -0.042997460812330246, -0.013005034998059273, -0.023594707250595093, -0.033575549721717834, -0.06894765049219131, 0.05481477826833725, 0.05134144425392151, -0.010280265472829342, 0.027646929025650024, 0.040242750197649, 0.009217306040227413, -0.0006911731907166541, 0.021019650623202324, 0.0012083054753020406, -0.05645163357257843, 0.006851847283542156, 0.00885300524532795, 0.022516775876283646, -0.03385500982403755, 0.01414285134524107, 0.0339747816324234, 0.08439798653125763, 0.06008465960621834, -0.011697545647621155, -0.04898596554994583, 0.014392372220754623, 0.004641090985387564, -0.0278265830129385, 0.045432787388563156, -0.013474134728312492, 0.0019674731884151697, -0.0006531212711706758, -0.00953669287264347, 0.002134652342647314, 0.001004322082735598, 0.008912891149520874, 0.03139972314238548, 0.052658915519714355, 0.004309228155761957, 0.008643408305943012, 0.023554783314466476, -0.003303658217191696, -0.0007810007664375007, -0.057329948991537094, -0.015729805454611778, -0.028585128486156464, -0.01919315755367279, -0.03307650610804558, -0.03802700340747833, -0.0014921356923878193, 0.06479562073945999, 0.011128637008368969, 0.05213991180062294, 0.07381829619407654, 0.04247845709323883, -0.0030441563576459885, 0.01687760092318058, -0.01769603043794632, 0.003046651603654027, 0.024473020806908607, -0.03341585397720337, 0.026469189673662186, 0.06942673027515411, -0.00023610926291439682, 0.032417770475149155, 0.0344538614153862, -0.016807734966278076, -0.01627875119447708, -0.000825914554297924, -0.002474000910297036, 0.0030366708524525166, 0.0036430067848414183, 0.03271719440817833, 0.016937486827373505, -0.049305353313684464, 0.022077620029449463, 0.023195473477244377, -0.01162767969071865, -0.0040147933177649975, 0.006527469959110022, -0.007106358651071787, 0.03708880394697189, 0.019592389464378357, 0.01198698952794075, -0.0028320634737610817, 0.0021708328276872635, 0.01017546746879816, -0.0017029809532687068, -0.0038101859390735626, 0.0554136261343956, 0.025211604312062263, -0.01944267749786377, 0.028784744441509247, -0.00017887537251226604, 0.005803858861327171, 0.010679499246180058, -0.04319707676768303, -0.01367375161498785, -0.022636545822024345, -0.008987747132778168, -0.031140223145484924, -0.03900512680411339, 0.013823464512825012, -0.023834247142076492, -0.04251838102936745, 0.0037353297229856253, -0.01041999738663435, -0.017286816611886024, 0.009935926645994186, 0.011228445917367935, -0.04519324749708176, 0.01697741076350212, -0.027028117328882217, 0.016697946935892105, 0.027786660939455032, 0.02223731391131878, 0.028006238862872124, 0.029583211988210678, 0.030521411448717117, -0.015230762772262096, -0.02443309873342514, -0.011897162534296513, -0.02828570269048214, 0.03455366939306259, -0.02267646975815296, 0.012585840187966824, 0.024253442883491516, -0.026109879836440086, -0.012496012263000011, -0.017047276720404625, -0.04519324749708176, -0.016837678849697113, -0.020171279087662697, -0.012186606414616108, -0.010839193128049374, -0.0013661275152117014, -0.013943234458565712, -0.031220069155097008, -0.028425434604287148, 0.07122328132390976, -0.008229203522205353, 0.017057256773114204, -0.014591989107429981, -0.015919441357254982, 0.03501278907060623, -0.015889497473835945, 0.059405963867902756, 0.006008466240018606, 0.03161930292844772, 0.00983112771064043, -0.01233631931245327, 0.013663770630955696, 0.0008970280759967864, 0.05202013999223709, -0.03467344120144844, -0.016588157042860985, -0.005077752750366926, -0.019113309681415558, 0.014741702005267143, -0.0242135189473629, 0.04782819002866745, 0.015130954794585705, 0.02585037797689438, -0.04583201929926872, -0.04782819002866745, 0.05154106020927429, 0.00031127745751291513, 0.009496769867837429, 0.0010423740604892373, 0.016797754913568497, -0.0023430022411048412, -0.010559729300439358, 0.017865704372525215, 0.024473020806908607, 0.027167849242687225, -0.013663770630955696, -0.005384663585573435, 0.024253442883491516, 0.014871452935039997, -0.039284590631723404, -0.009716348722577095, -0.023574745282530785, 0.000601969426497817, -0.01129831187427044, -0.03645002841949463, -0.026109879836440086, 0.028824668377637863, -0.047668494284152985, -0.08823063224554062, 0.01779583841562271, 0.01779583841562271, 0.035791296511888504, 0.021378960460424423, -0.02561083808541298, 0.00842882040888071, 0.0138534065335989, -0.0009762509725987911, 0.0028744821902364492, 0.03744811564683914, -0.010390055365860462, 0.011757430620491505, 0.004059706814587116, 0.002177070826292038, -0.0332561619579792, -0.010459921322762966, 0.0028445397038012743, -0.005519405007362366, 0.006826894823461771, -0.002712293528020382, 0.04750880226492882, -0.01779583841562271, 0.01663806103169918, 0.012855323031544685, 0.014911375939846039, 0.00965147279202938, -0.009801185689866543, 0.041959453374147415, -0.03339589387178421, -0.005105200223624706, -0.015610034577548504, 0.0017092189518734813, -0.022317159920930862, 0.006312881596386433, -0.011567794717848301, 0.03411451354622841, -0.004780822899192572, -0.012416166253387928, -0.024153634905815125, -0.022716393694281578, 0.04375600442290306, -0.04251838102936745, 0.014861471951007843, 0.0234948992729187, -0.014162813313305378, -0.004466426093131304, -0.024133672937750816, -0.047428954392671585, -0.02363463118672371, 0.0022531747817993164, -0.008124404586851597, 0.005978523753583431, 0.009067594073712826, 0.010429978370666504, -0.005224970169365406, 0.008009624667465687, 0.03177899494767189, 0.036929111927747726, -0.008872967213392258, 0.0312001071870327, 0.0273475032299757, -0.04583201929926872, -0.03908497095108032, 0.008398877456784248, -0.01314476691186428, -0.022317159920930862, 0.026968231424689293, -0.035891104489564896, -0.0033136392012238503, -0.012266453355550766, -0.012246491387486458, 0.03337593004107475, -0.01233631931245327, 0.005200018174946308, -0.0365099161863327, -0.012645725160837173, -0.0005190037190914154, -0.039144858717918396, -0.03507267311215401, 0.030760951340198517, -0.03201853856444359, 0.003086575074121356, 0.019243061542510986, -0.0308407973498106, -0.013783540576696396, -0.00926222000271082, 0.008648398332297802, 0.009751281701028347, -0.024972062557935715, -0.03597094863653183, 0.014861471951007843, -0.006357795558869839, -0.049385201185941696, 0.018564363941550255, 0.01886378973722458, 0.007116339635103941, 0.0019113309681415558, 0.04750880226492882, 0.007745132315903902, -0.024712560698390007, 0.04647079482674599, 0.013214632868766785, -0.029423518106341362, -0.003782738698646426, -0.03203849866986275, -0.0056790984235703945, -0.02163846231997013, -0.00012889319623354822, 0.018923673778772354, 0.03026190958917141, -0.0010741879232227802, 0.023355167359113693, 0.0269881933927536, -0.03784734755754471, 0.0327770821750164, 0.014462238177657127, -0.009920955635607243, -0.0015021165600046515, -0.0006786971935071051, -0.016039211302995682, -0.0607234351336956, 0.03181891888380051, -0.032158270478248596, -0.025091834366321564, -0.03293677419424057, 0.0005988504271954298, 0.021219266578555107, -0.024293366819620132, -0.06212075427174568, 0.006886780261993408, -0.013823464512825012, -0.031719110906124115, 0.008299069479107857, -0.006602325942367315, 0.030401641502976418, -0.0009899745928123593, -0.056371789425611496, -0.0008265383657999337, -0.025331374257802963, 0.01251597423106432, -6.893018144182861e-05, 0.026708729565143585, 0.02642926573753357, -0.01767606846988201, -0.04710956662893295, 0.036150604486465454, 0.015540168620646, 0.004196943715214729, -0.002759702503681183, -0.015789689496159554, -0.015689881518483162, -0.027028117328882217, -0.015550149604678154, -0.033355969935655594, -0.0011958294780924916, 0.026149801909923553, -0.01489141397178173, 0.018484516069293022, -0.0351724810898304, 0.029423518106341362, 0.006727086845785379, 0.009586597792804241, 0.03573140874505043, 0.016458407044410706, -0.03804696351289749, 0.01018544752150774, 0.020879918709397316, 0.01233631931245327, -0.013524038717150688, -0.0036255402956157923, -0.0009275943739339709, -0.025431182235479355, 0.013164728879928589, 0.027626967057585716, -0.0027522167656570673, -0.020420800894498825, 0.0029368624091148376, 0.08044557273387909, 0.05481477826833725, -0.010380074381828308, -0.030401641502976418, -0.01664804294705391, 0.01872405782341957, -0.020111393183469772, -0.017656106501817703, -0.0031314888037741184, -0.02467263862490654, 0.004790803417563438, -0.008688322268426418, 0.005269883666187525, 0.00039081228896975517, 0.052658915519714355, -0.02175823226571083, -0.056491557508707047, 0.003690415760502219, -0.0024677629116922617, -0.0009132469422183931, 0.02329528145492077, 0.008633427321910858, -0.01709718070924282, 0.004147039260715246, 0.01966225542128086, 0.0020785101223737, 0.004201933741569519, -0.003011718625202775, 0.0046211290173232555, -0.008164327591657639, 0.00044508310384117067, -0.05896680802106857, -0.013354364782571793, 0.05198021978139877, -0.008209241554141045, -0.011967027559876442, -0.0306012574583292, 7.243907020892948e-05, 0.012895246036350727, -0.040562137961387634, 0.0024927149061113596, 0.0010012030834332108, -0.008738226257264614, 0.010549748316407204, -0.01778585836291313, 0.0269881933927536, -0.012146683409810066, -0.019861873239278793, -0.0031364792957901955, 0.02139892242848873, 0.0167478509247303, -0.001478412072174251, 0.00235922122374177, -0.02291600964963436, -0.01653825305402279, -0.00896778516471386, 0.0017179521964862943, -0.03237784653902054, 0.01536051370203495, -0.0005894934292882681, -0.011088714003562927, -0.0004441474156919867, -0.03435405343770981, -0.005704050417989492, -0.004284275695681572, -0.0036305307876318693, 0.008154346607625484, -0.05717025697231293, 0.0016917524626478553, -0.03131987899541855, 0.0020335963927209377, 0.037288419902324677, 0.04423508420586586, -0.009446865878999233, -0.0011677583679556847, -0.011967027559876442, 0.03235788643360138, -0.03864581510424614, -0.028026200830936432, -0.010410016402602196, 0.030780913308262825, 0.01732673868536949, -0.006003475748002529, 0.014851490966975689, 0.04758865013718605, -0.01606915332376957, 0.017296796664595604, -0.02980278991162777, 0.00430423766374588, 0.0016730384668335319, 0.034932941198349, 0.00843880046159029, -0.021119458600878716, 0.04038248211145401, -0.038466159254312515, 0.020660340785980225, 0.0026798557955771685, 0.008388896472752094, 0.027567081153392792, 0.010569710284471512, 0.027207771316170692, 0.055094242095947266, 0.0063727665692567825, -0.023375129327178, -0.020460722967982292, -0.026129841804504395, -0.007725170813500881, -0.06515492498874664, -0.03187880665063858, 0.01420273631811142, 0.009362028911709785, 0.002112195361405611, -0.02177819423377514, -0.028325626626610756, -0.07940756529569626, 0.012915208004415035, 0.004324199166148901, -0.02105957455933094, 0.042198993265628815, 0.002754712011665106, -0.013164728879928589, -0.04575217515230179, 0.03157937899231911, -0.0022793745156377554, -0.02177819423377514, 0.005454529542475939, -0.01390331145375967, -0.014372410252690315, 0.03283696621656418, 0.02177819423377514, -0.01227643433958292, -0.011787372641265392, 0.00976625271141529, -0.03401470556855202, 0.017286816611886024, -0.017646126449108124, -0.04527309164404869, 0.010045716539025307, 0.02535133622586727, -0.0018564363708719611, 0.025930223986506462, 0.0029443479143083096, -0.010105601511895657, 0.03203849866986275, -0.0040098028257489204, -0.015440360642969608, -0.02153865434229374, 0.0023854209575802088, 0.006821904797106981, 0.05158098414540291, 0.025091834366321564, 0.019732121378183365, 0.03808688744902611, 0.028425434604287148, 0.01860428787767887, -0.026608921587467194, -0.0016193913761526346, -0.012505993247032166, 0.004513835068792105, 0.01117854192852974, -0.012835361063480377, 0.022616585716605186, 0.0007897340110503137, -3.3548880310263485e-05, -0.02151869237422943, -0.017017332836985588, -0.011408100835978985, 0.003638016525655985, 0.04004313424229622, 0.033336006104946136, -0.012565878219902515, -0.04343662038445473, -0.011028829030692577, 0.03792719542980194, 0.03922470286488533, 0.032896850258111954, -0.00424435269087553, -0.013284498825669289, -0.015021164901554585, -0.011837276630103588, 0.0023716972209513187, -0.017626164481043816, -0.009646482765674591, -0.06008465960621834, -0.0021146906074136496, 0.011677583679556847, -0.0026099898386746645, -0.027427351102232933, -0.0017578755505383015, 0.003343581687659025, -0.02315554954111576, 0.013134785927832127, 0.008483714424073696, -0.026129841804504395, -0.0301221776753664, 0.009851089678704739, 0.030701065436005592, -0.005619213450700045, 0.024053826928138733, -0.024612752720713615, 0.008239183574914932, 0.0174664705991745, -0.00631787208840251, 0.00013131042942404747, -0.024972062557935715, 0.002525152638554573, 0.030980529263615608, -0.03074098937213421, -0.053137995302677155, -0.0273475032299757, 0.01605917327105999, 0.008947824127972126, 0.021438846364617348, -0.019821949303150177, -0.011887181550264359, 0.031719110906124115, 0.0004042240616399795, 0.035651564598083496, -0.02606995590031147, 0.03339589387178421, 0.012266453355550766, 0.020879918709397316, -0.03165922686457634, -0.004903087858110666, 0.014931337907910347, 0.003777748206630349, -0.05529385805130005, -0.030421601608395576, -0.013224613852798939, 0.02932371012866497, 0.03153945505619049, -0.0197620652616024, -0.02004152722656727, -0.011967027559876442, -0.025930223986506462, 0.010130553506314754, 0.021019650623202324, 0.04343662038445473, -0.037168651819229126, 0.002747226506471634, 0.02443309873342514, -0.028126008808612823, -0.039184778928756714, -0.008638417348265648, -0.0015919441357254982, 0.005968542769551277, -0.026848461478948593, 0.044394779950380325, 0.0035781313199549913, -0.004458940587937832, 0.028365548700094223, -0.011637660674750805, 0.011428062804043293, -0.007375841494649649, -0.024013902992010117, -0.043716080486774445, 0.0304814875125885, -0.02443309873342514, -0.01615898124873638, -0.014252640306949615, 0.007236109580844641, -0.025231564417481422, -0.014981241896748543, 0.009606558829545975, -0.022516775876283646, 0.01139811985194683, 0.027507197111845016, 0.01665802299976349, -0.05002397298812866, 0.004773336928337812, -0.0066622113808989525, 0.005035334266722202, -0.03932451084256172, -0.0017753420397639275, -0.0022007753141224384, 0.008748207241296768, -0.010250323452055454, 0.03185884281992912, -0.0024315824266523123, -0.01907338574528694, -0.008678341284394264, -0.006143207661807537, -0.037168651819229126, -0.001704228576272726, -0.02003154717385769, 0.035891104489564896, 0.0003986098163295537, 0.030082253739237785, 0.029882637783885002, 0.005195027682930231, 0.049065813422203064, -0.006218063645064831, -0.03960397467017174, 0.0316791869699955, 0.004057211801409721, 0.00825415551662445, 0.022297197952866554, 0.024812370538711548, 0.020101413130760193, -0.036130644381046295, 0.0005863743717782199, 0.02852524258196354, -0.011188521981239319, 0.006831885315477848, -7.251704664668068e-05, 0.027547121047973633, -0.022257274016737938, 0.03173907473683357, 0.023934055119752884, 0.017057256773114204, -0.00032905585248954594, 0.015759747475385666, 0.007480639964342117, -0.027766698971390724, 0.013813483528792858, 0.003281201468780637, -0.01420273631811142, -0.02269643172621727, 0.023335205391049385, 0.031259991228580475, -0.0020410818979144096, -0.012246491387486458, -0.03958401456475258, -0.01292518898844719, 0.004139553755521774, -0.03257746249437332, -0.0004956111079081893, 0.01733672060072422, -0.017087198793888092, -0.0014023081166669726, 0.0007566724671050906, 0.011487947776913643, -0.022297197952866554, 0.00637775706127286, -0.0208399947732687, -0.03413447365164757, 0.0275870431214571, 0.019253041595220566, -0.0631188377737999, 0.0309605672955513, -0.0012413670774549246, 0.01956244744360447, 0.01675783097743988, -0.017077218741178513, 0.017067236825823784, 0.01123842690140009, -0.028924476355314255, -0.0267486535012722, 0.03331604599952698, 0.0016406007343903184, 0.0312001071870327, 0.014312525279819965, 0.010669518262147903, -0.005853762850165367, -0.006607316434383392, -0.010360112413764, -0.01677779294550419, -0.03307650610804558, 0.012565878219902515, 0.014063004404306412, -0.008368934504687786, 0.026848461478948593, 0.013573943637311459, 0.01863422989845276, -0.014282583259046078, -0.016248809173703194, -0.011418081820011139, -0.021319076418876648, -0.03429416939616203, -0.004723432939499617, 0.041839685291051865, 0.028185894712805748, -0.016378559172153473, 0.02676861546933651, 0.0028894534334540367, 0.02828570269048214, -0.011947066523134708, -0.024233480915427208, -0.011378158815205097, -0.006677182391285896, -0.006073341704905033, 0.02489221654832363, 0.017476452514529228, 0.05681094527244568, 0.01700735278427601, -0.00014955665392335504, 0.009367018938064575, 0.014342468231916428, -0.04387577623128891, -0.01000579260289669, -0.00566911743953824, -0.02628953382372856, 0.00873323529958725, -0.02141888439655304, 0.017755916342139244, 0.008089471608400345, 0.00741576449945569, 0.02513175643980503, -0.01593940332531929, -0.02992255985736847, -0.034972865134477615, -0.03221815451979637, -0.03389493376016617, 0.011737468652427197, 0.01907338574528694, -0.0020972241181880236, -0.009002718143165112, -0.007785055786371231, 0.04247845709323883, 0.007819988764822483, 0.06132228672504425, -0.0028096067253500223, -0.0068668182939291, -0.04403546825051308, -0.017526356503367424, -0.026209687814116478, -0.027866506949067116, 0.00884801521897316, 0.0017528851749375463, -0.00412957277148962, 0.003525732085108757, -0.05078251659870148, -0.019722141325473785, 0.015580092556774616, 0.007445706985890865, -0.007879873737692833, -0.04750880226492882, -0.012356280349195004, 0.03197861462831497, 0.024253442883491516, -0.018584325909614563, 0.019412735477089882, -0.0421590693295002, 0.009781223721802235, -0.034393977373838425, 0.001162144122645259, 0.01582961343228817, 0.013034977950155735, -0.026010069996118546, -0.011028829030692577, 0.006397719029337168, -0.0150610888376832, 0.03038167953491211, -0.020320991054177284, 0.003603083547204733, 0.009217306040227413, 0.002268146025016904, 0.03151949495077133, 0.009007709100842476, 0.015470302663743496, -0.03872566297650337, -0.010190438479185104, -0.020051509141921997, 0.003755291225388646, -0.013274517841637135, 0.006841866299510002, -0.042198993265628815, 0.0031190128065645695, 0.010040725581347942, -0.010919040068984032, -0.012565878219902515, -0.01850447803735733, 0.024592790752649307, 0.018704095855355263, 0.04036251828074455, 0.014182774350047112, -0.02235708385705948, 0.03425424546003342, 0.015101011842489243, 0.020091433078050613, -0.019023481756448746, 4.8695586883695796e-05, 0.004369113128632307, -0.022776277735829353, -0.038585931062698364, -0.01791560836136341, -0.014721740037202835, 0.02513175643980503, 0.013414249755442142, -0.0007030254928395152, -0.011637660674750805, -0.026369381695985794, -0.026249611750245094, 0.002234460785984993, 0.046630486845970154, 0.06363783776760101, -0.002460277173668146, 0.01483152899891138, 0.05233952775597572, 0.007735151331871748, -0.013364345766603947, 0.007810007780790329, 0.003914984874427319, 0.03575137257575989, -0.004236866720020771, -0.037907231599092484, 0.013064920902252197, -0.009601568803191185, -0.03319627791643143, 0.0303617175668478, 0.006712115369737148, -0.016608119010925293, -0.019602371379733086, 0.03946424275636673, 0.006537450477480888, 0.01215666439384222, -0.016079135239124298, -0.005107695236802101, -0.009731319732964039, 0.0005236822180449963, 0.027427351102232933, 0.007186205126345158, -0.002747226506471634, -0.03185884281992912, 0.01559007354080677, 0.0206004548817873, 0.03014213964343071, -0.011857238598167896, 0.00982613768428564, -0.015230762772262096, 0.030820835381746292, 0.027287619188427925, 0.005219979677349329, 0.024952102452516556, -0.006347814574837685, -0.004127077758312225, 0.015779709443449974, -0.0039499178528785706, -0.027507197111845016, -0.014971260912716389, 0.016787774860858917, 0.01697741076350212, -0.008698302321135998, 0.005659136455506086, -0.015160896815359592, -0.0031963642686605453, -0.011937085539102554, 0.008304059505462646, -0.001947511569596827, 0.017646126449108124, -0.006881789769977331, -0.012915208004415035, 0.024732522666454315, 0.02317551150918007, -0.00043323085992597044, -0.0209597647190094, -0.04088152199983597, 0.022516775876283646, -0.00637775706127286, 0.005449539050459862, 0.04950496926903725, 0.009242258034646511, 0.009776233695447445, 0.020680302754044533, 0.02654903568327427, 0.02317551150918007, 0.006347814574837685, -0.015649957582354546, -0.0025925233494490385, 0.014462238177657127, -0.02549106627702713, -0.010330170392990112, -0.05357715114951134, 0.00860847532749176, 0.03307650610804558, 0.03946424275636673, 0.014072985388338566, 0.011977008543908596, 0.015270686708390713, 0.029822751879692078, 0.018414651975035667, 0.008229203522205353, -0.028904514387249947, 0.02443309873342514, 0.006427661515772343, 0.01697741076350212, -0.019482601433992386, -0.03611068055033684, 0.012426146306097507, -0.00747564947232604, -0.012745533138513565, -0.005928619299083948, -0.03185884281992912, 0.015340551733970642, 0.007231119088828564, -0.016019249334931374, 0.030760951340198517, -0.021678386256098747, 0.020760148763656616, 0.006108274683356285, 0.010958963073790073, -0.0006206835387274623, 0.014681817032396793, -0.009746290743350983, -0.014302544295787811, 0.004314218182116747, -0.00637775706127286, -0.020680302754044533, 0.024033864960074425, 0.024532906711101532, 3.290558379376307e-05, 0.02153865434229374, -0.04223891720175743, -0.011837276630103588, -0.0308407973498106, 0.025690684095025063, -0.025311412289738655, 0.005988504271954298, 0.03331604599952698, -0.016967428848147392, 0.024832332506775856, 0.01653825305402279, 0.04082163795828819, 0.03106037713587284, -0.024413136765360832, -0.019043443724513054, -0.009277191013097763, 0.00010698213736759499, 0.004119591787457466, -0.05014374479651451, 0.0055343760177493095, 0.0021059573628008366, 0.007066435180604458, -0.02351486124098301, 0.0034483803901821375, -0.016079135239124298, 0.019292965531349182, -0.017735954374074936, -0.003468342125415802, 0.006776990834623575, -0.0203609149903059, 0.0005604865727946162, 0.011128637008368969, -0.0038526044227182865, 0.026010069996118546, 0.02946344204246998, 0.027287619188427925, -0.026389343664050102, 0.018085284158587456, -0.01408296637237072, 0.01100886706262827, -0.023115627467632294, 0.01627875119447708, 0.007864902727305889, -0.04251838102936745, -0.00907757505774498, 0.011218464933335781, -0.0004001693450845778, -0.0022481842897832394, -0.018464555963873863, -0.005813839845359325, -0.010030744597315788, 0.002964309649541974, -0.022277235984802246, 0.0008945328299887478, -0.04060205817222595, -0.014941318891942501, -0.0009556654840707779, -0.014112908393144608, 0.011547832749783993, 0.005110190249979496, -0.0056441654451191425, -0.007974691689014435, 0.04227884113788605, 0.03014213964343071, -0.024972062557935715, 0.0009400704293511808, 0.019003519788384438, -4.651227573049255e-05, 0.002869491698220372, -0.025431182235479355, 0.01953250542283058, 0.011078733019530773, -0.01838470809161663, 0.005200018174946308, -0.0033485719468444586, 0.0030316803604364395, -0.03581125661730766, 0.014362430199980736, 0.01174744963645935, 0.002263155533000827, 0.008932852186262608, 0.04076175391674042, -0.016268771141767502, -0.005085238255560398, -0.007780065294355154, 0.013174709863960743, -0.0017591231735423207, -0.016448425129055977, -0.016837678849697113, 0.02884463034570217, -0.01483152899891138, -0.02549106627702713, 0.018694113940000534, 0.003403466660529375, 0.009172393009066582, -0.0025800473522394896, -0.007171234115958214, 0.023534823209047318, -0.03429416939616203, -0.005359711591154337, -0.06379753351211548, 0.07282021641731262, -0.021798156201839447, 0.002904424676671624, 0.05078251659870148, 0.012296395376324654, 0.004476407077163458, -0.016797754913568497, -0.03623045235872269, 0.022496815770864487, -0.0020548056345432997, -0.005404625087976456, 0.007086396683007479, 0.005833801347762346, 0.015230762772262096, -0.013833445496857166, -0.018584325909614563, -0.025770530104637146, 0.0238542091101408, 0.052539143711328506, -0.013224613852798939, 0.023075703531503677, 0.010998886078596115, 0.02944348007440567, 0.03181891888380051, -0.02443309873342514, -0.020640378817915916, 0.03423428535461426, -0.018424632027745247, 0.023654593154788017, 0.030780913308262825, -0.02618972584605217, 0.02862505055963993, 0.034413937479257584, 0.0020922336261719465, -0.02105957455933094, -0.016328655183315277, -0.0014572027139365673, -0.00971135776489973, -0.007171234115958214, -0.0174664705991745, 0.03387497365474701, -0.024253442883491516, 0.013514058664441109, -0.011048790998756886, -0.03491298109292984, 0.020460722967982292, 0.014362430199980736, -0.0026274563279002905, 0.008294078521430492, 0.02062041684985161, -0.019971663132309914, -0.004633605480194092, 0.0034483803901821375, -0.010280265472829342, 0.03351566195487976, -0.03363543376326561, 0.00722113810479641, -0.052539143711328506, 0.010988906025886536, -0.021558616310358047, 0.02688838541507721, -0.006397719029337168, -0.037647731602191925, 0.010090629570186138, 0.021678386256098747, 0.00141727935988456, 0.0024764961563050747, 0.009381989948451519, 0.014881433919072151, -0.016019249334931374, 0.005763935390859842, -0.019931739196181297, -0.012655706144869328, 0.010489863343536854, 0.0173467006534338, -0.035092636942863464, 0.03447382524609566, -0.0007323441677726805, -0.02038087695837021, -0.01977204531431198, -0.03377516567707062, 0.021438846364617348, 0.017047276720404625, -0.009342066943645477, 0.002474000910297036, 0.013304460793733597, 0.032537542283535004, -0.007490620948374271, -0.028944438323378563, -0.016099095344543457, 0.01907338574528694, -0.00988602265715599, 0.021498730406165123, 0.03429416939616203, 0.021039612591266632, -0.007655304856598377, 0.024353250861167908, -0.013763579539954662, 0.005694069433957338, -0.0033735241740942, 0.02015131711959839, 0.017745934426784515, 0.008518647402524948, 0.02015131711959839, -0.008882948197424412, 0.004815755411982536, -0.008758187294006348, 0.012975092977285385, 0.0028969389386475086, -0.009516731835901737, -0.020879918709397316, 0.018644209951162338, -0.007705208845436573, -0.001755380304530263, 0.037188611924648285, 0.02387417107820511, -0.00024749364820308983, 0.015370494686067104, -0.023574745282530785, 0.024373212829232216, -0.006826894823461771, 0.034633517265319824, -0.015400437638163567, 0.0234948992729187, -0.001643095863983035, -0.013524038717150688, -0.046390946954488754, -0.0012837856775149703, 0.021358998492360115, 0.018943635746836662, 0.0397636704146862, -0.024492982774972916, 0.015629995614290237, -0.040921445935964584, 0.01215666439384222, -0.006602325942367315, -0.03223811462521553, -0.05353723093867302, 0.00884801521897316, -0.016687965020537376, -0.00459867250174284, 0.005165085196495056, -0.0018626743694767356, 0.0046610524877905846, -0.010280265472829342, -0.03505271300673485, -0.0028844629414379597, 0.010679499246180058, -0.00025622689281590283, -0.023814285174012184, -0.03678938001394272]
metadata : {"source": "pydantic_ai_docs", "crawled_at": "2025-03-14T10:14:52.300801", "url_path": "/api/pydantic_graph/graph/", "chunk_size": 3739}
updated_dt: 2025-03-14T10:14:52.302438
---
```
  _(This example is complete, it can be run "as is")_
  See [`run`][pydantic_graph.graph.Graph.run] For an example of running graph, and
  [`mermaid_code`][pydantic_graph.graph.Graph.mermaid_code] for an example of generating a mermaid diagram
  from the graph.
  """
  name: str | None
  node_defs: dict[str, NodeDef[StateT, DepsT, RunEndT]]
  snapshot_state: Callable[[StateT], StateT]
  _state_type: type[StateT] | _utils.Unset = field(repr=False)
  _run_end_type: type[RunEndT] | _utils.Unset = field(repr=False)
  _auto_instrument: bool = field(repr=False)
  def__init__(
    self,
    *,
    nodes: Sequence[type[BaseNode[StateT, DepsT, RunEndT]]],
    name: str | None = None,
    state_type: type[StateT] | _utils.Unset = _utils.UNSET,
    run_end_type: type[RunEndT] | _utils.Unset = _utils.UNSET,
    snapshot_state: Callable[[StateT], StateT] = deep_copy_state,
    auto_instrument: bool = True,
  ):
"""Create a graph from a sequence of nodes.
    Args:
      nodes: The nodes which make up the graph, nodes need to be unique and all be generic in the same
        state type.
      name: Optional name for the graph, if not provided the name will be inferred from the calling frame
        on the first call to a graph method.
      state_type: The type of the state for the graph, this can generally be inferred from `nodes`.
      run_end_type: The type of the result of running the graph, this can generally be inferred from `nodes`.
      snapshot_state: A function to snapshot the state of the graph, this is used in
        [`NodeStep`][pydantic_graph.state.NodeStep] and [`EndStep`][pydantic_graph.state.EndStep] to record
        the state before each step.
      auto_instrument: Whether to create a span for the graph run and the execution of each node's run method.
    """
    self.name = name
    self._state_type = state_type
    self._run_end_type = run_end_type
    self._auto_instrument = auto_instrument
    self.snapshot_state = snapshot_state
    parent_namespace = _utils.get_parent_namespace(inspect.currentframe())
    self.node_defs: dict[str, NodeDef[StateT, DepsT, RunEndT]] = {}
    for node in nodes:
      self._register_node(node, parent_namespace)
    self._validate_edges()
  async defrun(
    self: Graph[StateT, DepsT, T],
    start_node: BaseNode[StateT, DepsT, T],
    *,
    state: StateT = None,
    deps: DepsT = None,
    infer_name: bool = True,
    span: LogfireSpan | None = None,
  ) -> GraphRunResult[StateT, T]:
"""Run the graph from a starting node until it ends.
    Args:
      start_node: the first node to run, since the graph definition doesn't define the entry point in the graph,
        you need to provide the starting node.
      state: The initial state of the graph.
      deps: The dependencies of the graph.
      infer_name: Whether to infer the graph name from the calling frame.
      span: The span to use for the graph run. If not provided, a span will be created depending on the value of
        the `_auto_instrument` field.
    Returns:
      A `GraphRunResult` containing information about the run, including its final result.
    Here's an example of running the graph from [above][pydantic_graph.graph.Graph]:
```py {title="run_never_42.py" noqa="I001" py="3.10"}
    from never_42 import Increment, MyState, never_42_graph
    async def main():
      state = MyState(1)
      graph_run_result = await never_42_graph.run(Increment(), state=state)
      print(state)
      #> MyState(number=2)
      print(len(graph_run_result.history))
      #> 3
      state = MyState(41)
      graph_run_result = await never_42_graph.run(Increment(), state=state)
      print(state)
      #> MyState(number=43)
      print(len(graph_run_result.history))
      #> 5