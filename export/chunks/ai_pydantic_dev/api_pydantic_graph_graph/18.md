---
url: https://ai.pydantic.dev/api/pydantic_graph/graph/
session_id: pydantic_ai_docs
chunk_number: 18
title: Generating Diagrams with mermaid_image
summary: The `mermaid_image` method generates a diagram of the graph as an image using an external service, mermaid.ink. It allows customization through `kwargs`, and it can infer the graph name based on the calling frame. The method returns the image bytes.
embedding: [0.01869387924671173, 0.021650565788149834, -0.030210645869374275, -0.05331571027636528, 0.025012601166963577, 0.014783425256609917, 0.01303087454289198, 0.011254478245973587, -0.02606174908578396, 0.03617170453071594, -0.004590014927089214, -0.03216587379574776, 0.024213820695877075, -0.07568159699440002, 0.016869796440005302, 0.009668837301433086, -0.034597985446453094, 0.02373693510890007, 0.006944633089005947, 0.05040671303868294, 0.07592004537582397, 0.007606310769915581, 0.04299115389585495, 0.010533190332353115, 0.03874688223004341, 0.019075388088822365, -0.008130883798003197, 0.02176978625357151, 0.02428535372018814, 0.01839582622051239, -0.03946220874786377, -0.020327210426330566, -0.04590015113353729, -0.050978973507881165, -0.006092201918363571, 0.01970726065337658, -0.04723542928695679, -0.020172221586108208, -0.045280203223228455, 0.03366805985569954, 0.01678634062409401, -0.06280571222305298, 0.051122039556503296, 0.005767324008047581, -0.008506430312991142, 0.017263226211071014, 0.003123594680801034, 0.039891403168439865, 0.05570013076066971, 0.017775876447558403, -0.037816956639289856, 0.013185861520469189, -0.0009530242532491684, 0.0007928208215162158, -0.06137505918741226, -0.020529886707663536, -0.022508956491947174, 0.004280040040612221, -0.02147173322737217, -0.008333560079336166, 0.06213807687163353, 0.003099750494584441, 0.01360313594341278, 0.04811766371130943, -0.04303884506225586, 0.07334486395120621, -0.03717316314578056, 0.04311037436127663, -0.008911782875657082, -0.03254738077521324, 0.06013515964150429, 0.02202014997601509, -0.018121618777513504, -0.053697217255830765, -0.011266401037573814, -0.03185589611530304, 0.004277059342712164, 0.028207728639245033, -0.016237923875451088, -0.06113661825656891, 0.0006348527385853231, -0.009835747070610523, -0.007582466583698988, 0.011874428950250149, -0.010664333589375019, -0.03714931756258011, -0.05555706471204758, -0.02897074446082115, -0.010312631726264954, -0.0341687873005867, 0.004211487714201212, -0.00795801356434822, -0.023593870922923088, 0.039438363164663315, 0.04489869251847267, 0.06361641734838486, 0.0017957689706236124, 0.01378196757286787, -0.018515048548579216, -9.761233377503231e-05, 0.01739436946809292, -0.01592794805765152, -0.05164661258459091, -0.01396079920232296, 0.047545403242111206, -0.01423500757664442, -0.0019701297860592604, 0.07100813090801239, 0.016154468059539795, -0.01617831364274025, -0.07253415882587433, 0.01003246195614338, 0.022747399285435677, 0.0339541882276535, -0.03185589611530304, -0.06461787223815918, -0.03190358728170395, 0.02978144958615303, 0.0002237259759567678, -0.014056175947189331, -0.04833226278424263, 0.0028523665387183428, 0.004250234924256802, 0.024321118369698524, 0.027373181656003, -0.001676547690294683, -0.03846075013279915, 0.0236415583640337, 0.003195127472281456, -0.016893640160560608, -0.003958142828196287, 0.001676547690294683, -0.005311303306370974, -0.06571470946073532, 0.031617455184459686, -0.023415038362145424, -0.018717724829912186, -0.007040010299533606, -0.018205072730779648, 0.051741987466812134, 0.04520867019891739, -0.00844085868448019, 0.01608293689787388, -0.001337512512691319, 0.006545242387801409, 0.04852301627397537, -0.02665785513818264, 0.0371016301214695, -0.02918534353375435, -0.015188777819275856, 0.033787280321121216, 0.029948359355330467, 0.007898402400314808, -0.013948877342045307, 0.007373829372227192, -0.022246669977903366, -0.005162276793271303, -0.019766870886087418, -0.0239873006939888, -0.024654937908053398, -0.05679696798324585, 0.020792173221707344, -0.05856144055724144, 0.0014135160017758608, -0.04189432039856911, 0.007147309370338917, -0.04196585342288017, -0.001268960302695632, -0.024631094187498093, -0.024511873722076416, -8.72736272867769e-05, -0.016440600156784058, 0.012589755468070507, -0.007683804724365473, 0.01970726065337658, -0.02181747369468212, -0.06356872618198395, -0.036410145461559296, -0.0010603233240544796, 0.0028493860736489296, -0.026085592806339264, -0.010843165218830109, -0.0760631114244461, 0.03662474453449249, -0.03950989618897438, 0.007481128443032503, 0.04570939764380455, 0.011814817786216736, 0.03140285611152649, 0.05317264422774315, -0.03154592216014862, 0.021185602992773056, 0.033882658928632736, -0.0384845957159996, -0.006819451227784157, -0.018312372267246246, 0.09814286977052689, -0.00819049496203661, 0.017310913652181625, 0.034693360328674316, -0.011296206153929234, -0.006431982386857271, 0.029662227258086205, -0.024869536980986595, 0.024416496977210045, -0.008840249851346016, -0.013519681058824062, -0.070578932762146, -0.02187708579003811, -0.005743479821830988, 0.01824083924293518, -0.0018941264133900404, 0.027659311890602112, -0.0314505435526371, 0.01723938249051571, 0.004837398882955313, -0.0454709567129612, 0.011081608012318611, 0.03321501985192299, 0.016249846667051315, -0.03314348682761192, 0.040511354804039, 0.037983864545822144, -0.0212690569460392, 0.018407749012112617, -0.0017540415283292532, 0.011814817786216736, -0.043611105531454086, -0.015761038288474083, 0.06499938666820526, 0.001728706993162632, -0.0035498104989528656, 0.024249587208032608, -0.03660089895129204, 0.0014679107116535306, -0.03986756131052971, 0.006193540059030056, -0.01416347548365593, -0.007063854485750198, -0.03655321151018143, -0.02066102996468544, 0.018371982499957085, 0.0005387307028286159, -0.007916285656392574, -0.008560080081224442, 0.030472932383418083, -0.00944827776402235, -0.01850312575697899, 0.005609356332570314, 0.05164661258459091, -0.008303754962980747, -0.0013188841985538602, -0.012732821516692638, 0.008482586592435837, -0.02414228767156601, 0.00025129588902927935, -0.026729386299848557, -0.016392910853028297, -0.0359809510409832, 0.006396215874701738, 0.01834813877940178, 0.026490945369005203, -0.0459478385746479, 0.009060809388756752, -0.004244273528456688, 0.019063465297222137, -0.026681698858737946, -0.014389995485544205, -0.014926490373909473, -0.055509377270936966, 0.021447889506816864, 0.011057763360440731, -0.014783425256609917, -0.00861372984945774, -0.02318851836025715, 0.00861372984945774, 0.019170764833688736, 0.027683155611157417, 0.033286552876234055, -0.036720119416713715, 0.016464443877339363, 0.021686330437660217, 0.020422587171196938, 0.048761460930109024, -0.002721223281696439, 0.031879741698503494, 0.011635986156761646, -0.0227354783564806, 0.03307195380330086, -0.030544463545084, 0.031069038435816765, 0.0036153821274638176, 0.002937311539426446, 0.030401399359107018, 0.010819321498274803, -0.03149823471903801, 0.006035571917891502, 0.03788848966360092, -0.010300708934664726, 0.02806466445326805, -0.003761427942663431, -0.054507918655872345, -0.011868467554450035, 0.0380077101290226, -0.012816276401281357, 0.0188965555280447, -0.03679165244102478, -0.0014567336766049266, 0.031617455184459686, -0.0014567336766049266, -0.04535173252224922, -0.018276605755090714, -0.0008524314034730196, 0.0248933807015419, 0.052028119564056396, 0.043563418090343475, 0.06762225180864334, 0.004017753526568413, 0.012339391745626926, -0.046496257185935974, 0.006041532848030329, -0.00992516241967678, 0.05946752056479454, 0.020994847640395164, -0.040392134338617325, 0.0007089934078976512, -0.0543171651661396, -0.028231574222445488, -0.01378196757286787, 0.0025185472331941128, 0.01015764381736517, -0.01577296108007431, -0.008482586592435837, 0.01672673039138317, 0.05617701634764671, -0.012220170348882675, -0.004438008181750774, 0.01627369038760662, 0.017346680164337158, 0.02777853235602379, -0.024678783491253853, -0.03230893611907959, -0.009484044276177883, -0.026371723040938377, -0.0033173291012644768, 0.015355686657130718, 0.006747918203473091, 0.05436485633254051, 0.02479800395667553, -0.01096238661557436, 0.014246930368244648, 0.0314505435526371, 0.035814039409160614, 0.044636406004428864, -0.0009425923926755786, 0.04127436876296997, -0.017477823421359062, -0.006610814016312361, -0.010640489868819714, 0.0106881782412529, -0.08369326591491699, -0.006998282857239246, -0.01667904295027256, -0.013770045712590218, -0.044636406004428864, 0.0010275375097990036, -0.01743013598024845, 0.027993131428956985, 0.06485632061958313, -0.003826999571174383, 0.029161497950553894, 0.07215265184640884, 0.003195127472281456, 0.01894424483180046, -0.03125979006290436, -0.03481258079409599, 0.0018002396682277322, -0.01834813877940178, 0.03846075013279915, 0.06643003970384598, -0.015391453169286251, 0.010443774983286858, 0.008148767054080963, 0.013471992686390877, -0.023319661617279053, 0.0041399551555514336, 0.0436587929725647, -0.02277124486863613, -0.0167386531829834, 0.0341687873005867, 0.024774160236120224, -0.04449333995580673, -0.024166131392121315, -0.01939728483557701, -0.02959069423377514, 0.03321501985192299, -0.0049774837680161, -0.009406550787389278, 0.025513330474495888, 0.02887536771595478, 0.007594388909637928, -0.008345481939613819, 0.01970726065337658, -0.002864288631826639, -0.01925421878695488, 0.017620889469981194, 0.09156186133623123, -0.0067658014595508575, 0.006753879599273205, 0.018777335062623024, -0.011475037783384323, -0.024130364879965782, 0.003427608637139201, -0.06595315039157867, -0.02792159840464592, -0.04136974737048149, -0.005025172606110573, -0.038269996643066406, -0.005054977722465992, 0.03805539757013321, -0.051980432122945786, -0.05879988148808479, -0.019313830882310867, -0.03698240965604782, -0.017728189006447792, 0.053697217255830765, 0.04249042645096779, -0.03331039473414421, 0.04218045249581337, -0.06499938666820526, 0.017048627138137817, 0.01166579220443964, 0.00534408912062645, 0.02117368020117283, 0.03753082454204559, -0.04480331763625145, 0.013877344317734241, 0.020231833681464195, -0.01648828759789467, -0.0276116244494915, 0.014187319204211235, -0.04213276132941246, 0.010419930331408978, 0.04544711112976074, -0.03946220874786377, 0.00445887167006731, 0.008035507053136826, -0.006575047504156828, -0.008482586592435837, -0.06209038570523262, 0.0008874526247382164, 0.005826934706419706, -0.040296755731105804, -0.016202157363295555, 0.004190624225884676, -0.009728447534143925, 0.03104519285261631, -0.008029545657336712, 0.04191816598176956, -0.04132205992937088, 0.006956555414944887, 0.03269044682383537, 0.00099549675360322, 0.04380185902118683, -0.023653481155633926, -0.0076301549561321735, -0.014068098738789558, -0.014115787111222744, -0.0055288816802203655, -0.014568827114999294, 0.006592930760234594, -0.016190234571695328, 0.03013911284506321, 0.015641817823052406, -0.007063854485750198, -0.008375287055969238, -0.015522596426308155, 0.0008181552984751761, 0.028255417943000793, 0.021149836480617523, -0.023319661617279053, -0.018205072730779648, 0.026777075603604317, -0.006771762389689684, -0.038436904549598694, 0.030544463545084, 0.02918534353375435, -0.055509377270936966, 0.022508956491947174, -0.014986101537942886, -0.015796804800629616, 0.019921857863664627, 0.02777853235602379, -0.011802895925939083, 0.018276605755090714, 0.0018449476920068264, -0.05951520800590515, -0.012422846630215645, 0.020267600193619728, -0.04282424598932266, -0.018312372267246246, -0.026324035599827766, 0.03819846361875534, 0.017322836443781853, 0.017453979700803757, -0.06809913367033005, 0.03846075013279915, 0.019731104373931885, 0.009639032185077667, 0.025584863498806953, -0.04940525442361832, 0.016810186207294464, 0.06137505918741226, 0.017561279237270355, 0.0135792912915349, 0.01803816296160221, -0.00433368980884552, 0.0176447331905365, 0.009442317299544811, 0.02278316579759121, -0.0343833863735199, -0.03593325987458229, 0.02484569326043129, 0.00884621124714613, -0.0005577315459959209, -0.013948877342045307, -0.004232351668179035, -0.03719700500369072, -0.0015841512940824032, -0.01874156855046749, 0.025680240243673325, 0.0099549675360322, -0.022413579747080803, 0.03624323755502701, -0.054650984704494476, -0.022091683000326157, -0.013865422457456589, -0.005961058661341667, -0.03786464408040047, -0.0016363105969503522, 0.014628438279032707, 0.01744205690920353, -0.0167386531829834, -0.020136456936597824, -0.011355816386640072, -0.002543881768360734, 0.0070280879735946655, -0.032928887754678726, -0.0018509087385609746, 0.006348527502268553, 0.005612336564809084, 0.013674668967723846, 0.002290536882355809, -0.0570354089140892, -0.01722745969891548, 0.012792431749403477, -0.014628438279032707, 0.013269316405057907, 0.023367349058389664, -0.011928078718483448, -0.006861178670078516, 0.01027686521410942, 0.02973376028239727, 0.014354228973388672, -0.008834288455545902, 0.09246794134378433, 0.020422587171196938, -0.017871253192424774, -0.040511354804039, 0.02016030065715313, 0.008929666131734848, -0.017859332263469696, 0.019731104373931885, -0.009585382416844368, -0.008333560079336166, -0.03218971565365791, -0.010777593590319157, 0.0012451161164790392, -0.009639032185077667, 0.009567499160766602, -0.061565812677145004, -0.04086901620030403, 0.007379790768027306, -0.023045452311635017, -0.03135516867041588, 0.0325712226331234, -0.015856416895985603, -0.02832695096731186, 0.01481919176876545, 0.0021623740904033184, -0.032428160309791565, -0.00929329078644514, -0.0113677391782403, 0.012077105231583118, 0.023498492315411568, 0.0022041015326976776, 0.02256856858730316, -0.009096575900912285, -0.06213807687163353, 0.008548158220946789, 0.021960539743304253, 0.008935626596212387, -0.05694003030657768, 0.03397803381085396, 0.03109288215637207, 0.012458612211048603, 0.041751254349946976, 0.007105581928044558, -0.05698772147297859, -0.011475037783384323, -0.05603395029902458, -0.0017078432720154524, -0.015534519217908382, -0.018884634599089622, -0.02120944671332836, 0.018968088552355766, -0.033882658928632736, 0.05503249168395996, 0.03240431472659111, -0.027897754684090614, 0.009281367994844913, 0.01264936663210392, -0.012661288492381573, -0.020994847640395164, -0.00531428400427103, 0.021638642996549606, -0.02283085510134697, -0.010616645216941833, -0.055318623781204224, 0.00023173615045379847, -0.0296383835375309, 0.008840249851346016, 0.03209434077143669, 0.013531602919101715, -0.027730844914913177, -0.003424628172069788, -0.007189036812633276, -0.00332030956633389, 0.00432176748290658, -0.006545242387801409, 0.022997764870524406, 0.023748857900500298, -0.04108361527323723, 0.003555771429091692, -0.019766870886087418, 0.012494378723204136, 0.009090614505112171, 0.02918534353375435, 0.015057634562253952, -0.019731104373931885, -0.062471892684698105, 0.0004735316033475101, 0.013460070826113224, -0.010884893126785755, 0.014044254086911678, -0.011182946152985096, 0.008345481939613819, -0.015689507126808167, -0.056367769837379456, 0.006783684715628624, -0.04017753526568413, 0.03729238361120224, -0.024273430928587914, -0.015212621539831161, -0.018026242032647133, 0.0760154202580452, 0.029709916561841965, -0.0037375837564468384, 0.000609890790656209, -0.021006770431995392, 0.021531343460083008, 0.011153141036629677, 0.03018680028617382, 0.009519810788333416, -0.02620481327176094, 0.002831502817571163, -0.01920653134584427, -0.02620481327176094, -0.008077234029769897, 0.035003338009119034, -0.0016676061786711216, 0.00042323514935560524, -0.04592399671673775, 0.03559944033622742, 0.0651901364326477, -0.03128363564610481, -0.00398198701441288, 0.01748974621295929, 0.0017212557140737772, 0.013698512688279152, -0.007826870307326317, 0.01416347548365593, -0.004509540740400553, -0.033381927758455276, 0.002968607237562537, 0.025537176057696342, 0.006116046104580164, 0.029948359355330467, -0.007910325191915035, -0.04778384789824486, 0.005433504935353994, -0.005218906793743372, -0.012077105231583118, 0.04015368968248367, -0.00418466329574585, -0.01778779923915863, -0.020088767632842064, 0.009859590791165829, 0.017060549929738045, -0.032738134264945984, 0.00497450353577733, -0.009561537764966488, -0.04644856974482536, 0.028493860736489296, 0.003427608637139201, -0.03009142354130745, 0.02842232771217823, 0.010568956844508648, -0.011343894526362419, 0.0015677583869546652, -0.009531732648611069, -0.010992191731929779, -0.06466556340456009, -0.01809777319431305, 0.006342566572129726, 0.006038552615791559, 0.004849321208894253, -0.007379790768027306, -0.02565639652311802, -0.025561019778251648, -0.04778384789824486, 7.367495709331706e-05, -0.003785272128880024, -0.005698772147297859, -0.007463245186954737, -0.005150354467332363, 0.004864223767071962, 0.01502186805009842, -0.005099685862660408, 0.003356076078489423, -0.01065837312489748, 0.03683934360742569, -0.002533450024202466, -0.04511329159140587, -0.007791103795170784, -0.011600220575928688, -0.04461256414651871, -0.0017063530394807458, 0.002081899670884013, 0.01995762437582016, 0.005591473076492548, 0.0072903744876384735, 0.002420189790427685, -0.012458612211048603, 0.01920653134584427, 0.02942378632724285, 0.00613392936065793, -0.021185602992773056, -0.011451194062829018, 0.0323566272854805, -0.009656915441155434, 0.01567758433520794, -0.017775876447558403, 0.017525512725114822, -0.0043694558553397655, -0.02756393514573574, 0.04950062930583954, 0.033191174268722534, -0.029924513772130013, -0.013138173148036003, -0.007618233095854521, -0.01226785872131586, 0.006288916803896427, 0.027897754684090614, 0.021889006718993187, -0.012780509889125824, 0.04711620882153511, -0.02202014997601509, -0.002520037582144141, 0.008333560079336166, 0.0037465253844857216, 0.01722745969891548, 0.019886091351509094, 0.019790714606642723, 0.04580477625131607, 0.014246930368244648, -0.04218045249581337, -0.04520867019891739, -0.016154468059539795, -0.011755207553505898, -0.048046134412288666, -0.03745929151773453, 0.016154468059539795, 0.010354358702898026, -0.011546570807695389, -0.006306800059974194, 0.005418602377176285, -0.07644461840391159, -0.006127968430519104, 0.02589483931660652, -0.023415038362145424, 0.05050208792090416, -0.01502186805009842, -0.007808986585587263, -0.017620889469981194, 0.02298584207892418, -0.027683155611157417, -0.003636245848610997, 0.0010893834987655282, 0.02670554257929325, -0.003537888405844569, 0.03700625151395798, 0.0009925162885338068, -0.02403498813509941, -0.0038746881764382124, 0.020625263452529907, 0.002056565135717392, -0.038126930594444275, -0.017608966678380966, 0.003722681198269129, -0.0013740239664912224, 0.028803834691643715, -0.006598891690373421, 0.012542067095637321, 0.01229170337319374, 0.008351443335413933, -0.008864094503223896, -0.014544983394443989, -0.01481919176876545, -0.015343764796853065, 0.012184403836727142, -0.02297391928732395, 0.05379259213805199, 0.024559561163187027, 0.03311964124441147, 0.03397803381085396, 0.026490945369005203, -0.01018148846924305, -0.029447630047798157, 0.006336605176329613, -0.000973887974396348, 0.002458936767652631, 0.04182278737425804, -0.01658366434276104, 0.026896296069025993, 0.0008434897754341364, -0.02010069042444229, -0.03571866452693939, 0.00015759548114147037, 0.007063854485750198, 0.002530469326302409, 0.027397025376558304, 0.0014969708863645792, -0.02792159840464592, -0.0441356785595417, -0.032642755657434464, 0.026991672813892365, 0.012375157326459885, 0.011397544294595718, 0.027683155611157417, -0.01591602712869644, -0.025465643033385277, -0.03252353519201279, 0.006396215874701738, -0.009692681021988392, 0.014878802001476288, -0.021900929510593414, -0.009335017763078213, 0.013054718263447285, 0.005925292149186134, -0.025322576984763145, -0.0053649526089429855, -0.021805552765727043, 0.02066102996468544, 0.001764473388902843, -0.0035766351502388716, 0.010074188932776451, -0.009615187533199787, -0.008542196825146675, 0.03548021987080574, 0.0314505435526371, 0.0066346582025289536, -0.0017063530394807458, 0.00819049496203661, -0.016106780618429184, -0.02378462441265583, 0.01502186805009842, -0.020088767632842064, -0.027945442125201225, 0.018073929473757744, -0.03452645242214203, -0.023772701621055603, -0.01784740947186947, -0.008935626596212387, 0.03331039473414421, 0.055461689829826355, -0.01217248197644949, 0.010372241958975792, 0.01161214243620634, -0.006420060060918331, -0.021853240206837654, -0.02378462441265583, 0.05226656049489975, 0.010092072188854218, -0.012744743376970291, -0.02882768027484417, 0.013901188969612122, 0.0011996630346402526, 0.014199241995811462, 0.007910325191915035, -0.015403375960886478, -0.004882107023149729, 0.011999610811471939, 0.030711373314261436, -0.00015051673108246177, -0.051932744681835175, 0.0006519907619804144, -0.009364822879433632, 0.007743414957076311, -0.00612200703471899, 0.010849126614630222, 0.00651543727144599, 0.0013412381522357464, 0.015510674566030502, 0.001548385014757514, -0.02076832763850689, 0.025918683037161827, -0.020124534144997597, 0.010878931730985641, -0.02020798809826374, 0.04151281341910362, -0.002199630718678236, -0.03118825890123844, 0.028136197477579117, 0.014628438279032707, 0.001088638324290514, -0.01511724479496479, -0.006920788902789354, -0.006682346574962139, 0.0377931110560894, -0.011600220575928688, -0.03381112590432167, -0.004104188643395901, 0.013066640123724937, -0.003663070499897003, 0.004613859578967094, -0.012637444771826267, -2.4496224796166644e-05, 0.032785821706056595, 0.025727929547429085, 0.0011966825695708394, -0.02589483931660652, 0.04308653250336647, -0.013436226174235344, 0.004956620279699564, -0.033644214272499084, -0.013114329427480698, -0.015033789910376072, -0.0004929050337523222, -0.03838921710848808, -0.014759581536054611, -0.03879456967115402, -0.016512133181095123, -0.02072064019739628, 0.016261767596006393, -0.01920653134584427, -0.006378332618623972, -0.00024794277851469815, 0.04203738644719124, 0.019683415070176125, -0.002245828742161393, 0.04012984782457352, 0.02706320583820343, 0.04973907396197319, 0.0018121618777513504, -0.023069296032190323, 0.050120580941438675, -0.022842776030302048, 0.014509216882288456, -0.000765996053814888, 0.07253415882587433, 0.04268117994070053, -0.02192477323114872, 0.02665785513818264, 0.009662875905632973, -0.013638902455568314, 0.01763281226158142, -0.005859720520675182, 0.028541548177599907, -0.020243754610419273, -0.004709236323833466, 0.01989801414310932, -0.0018777335062623024, 0.0006877571577206254, 0.022294359281659126, -0.03252353519201279, 0.0006303819245658815, -0.004986425396054983, 0.029948359355330467, 0.0031176337506622076, -0.047402337193489075, 0.007206920068711042, 0.02428535372018814, -0.031212102621793747, 0.006902906112372875, -0.019969547167420387, 0.04671085625886917, 0.0029671168886125088, -0.030520619824528694, 0.03481258079409599, 0.020637184381484985, -0.01658366434276104, 0.02751624584197998, -0.016202157363295555, -0.005728577263653278, -0.010920659638941288, -0.0112604396417737, -0.011832701042294502, -0.03176052123308182, -0.009674797765910625, 0.003636245848610997, -0.04399261251091957, 0.023820390924811363, -0.005388796795159578, 0.019635727629065514, -0.002223474904894829, 0.009346939623355865, -0.0006385783781297505, 0.04406414553523064, -0.052791133522987366, -0.017775876447558403, 0.02337927184998989, 0.017811642959713936, 0.0271585825830698, -0.0236415583640337, 0.015665661543607712, -0.01875349134206772, 0.003862766083329916, 0.013400459662079811, -0.02075640670955181, -0.012601678259670734, -0.0009507888462394476, 0.006670424714684486, 0.007719570770859718, 0.04561401903629303, -0.001050636637955904, -0.0026034924667328596, -0.020243754610419273, 0.03342961519956589, -0.004965561907738447, -0.006288916803896427, -0.007057893555611372, 0.008560080081224442, 0.022246669977903366, 0.005475232377648354, -0.0065035149455070496, 0.026490945369005203, -0.0036332651507109404, 0.009185991249978542, -0.009758252650499344, -0.03970064967870712, -0.023617714643478394, 0.004423105623573065, 0.00717115355655551, -0.018991932272911072, 0.04268117994070053, 0.04420721158385277, 0.014902646653354168, 0.036410145461559296, -0.021602876484394073, -0.005218906793743372, -0.004133994225412607, -0.03171283379197121, -0.02796928770840168, 0.0008285871590487659, -0.007642077282071114, -0.02314082905650139, -0.0036779732909053564, 0.003537888405844569, 0.002016328042373061, 0.04418336600065231, 0.015904104337096214, -0.0014015939086675644, -0.020529886707663536, -0.025680240243673325, -0.001403084141202271, 0.035647131502628326, 0.02560870721936226, -0.005206984933465719, -0.007552661467343569, -0.03753082454204559, 0.014926490373909473, 0.011540609411895275, 0.006077299360185862, -0.01158829778432846, 0.0034484723582863808, -0.01784740947186947, -0.004104188643395901, 0.011308128014206886, -0.0199099350720644, -0.017716266214847565, -0.009841707535088062, 0.006330644246190786, 0.019063465297222137, -0.03879456967115402, -0.01547490805387497, 0.04902374744415283, -0.0025513330474495888, 0.03965296223759651, -0.007600349839776754, -0.014604593627154827, 0.01179097406566143, 0.025632552802562714, -0.015367609448730946, -0.00224284827709198, -0.03354883939027786, 0.03745929151773453, -0.0113677391782403, 0.023868078365921974, 0.02448802813887596, 0.0038389216642826796, -0.01793086528778076, 0.0019760909490287304, -0.015665661543607712, 0.014699970372021198, 0.02887536771595478, 0.00048098291154019535, -0.012458612211048603, 0.026681698858737946, 0.005925292149186134, 0.003041630145162344, 0.00029395471210591495, 0.018228916451334953, -0.04005831480026245, -0.027802377939224243, 0.017918942496180534, -0.050025202333927155, 0.004196585156023502, -0.0017659636214375496, -0.04897605627775192, 0.019433051347732544, -0.008655456826090813, -0.026324035599827766, -0.027635468170046806, 0.006467748433351517, 0.024023067206144333, 0.017322836443781853, 0.05608164146542549, 0.02651478908956051, -0.003862766083329916, 0.014902646653354168, -0.005347069818526506, 0.012518223375082016, -0.005898467730730772, 0.008977354504168034, 0.0014992062933743, -0.04384954646229744, -0.007421518210321665, -0.009507888928055763, 0.04394492506980896, -0.015236466191709042, 0.022187059745192528, -0.02565639652311802, 0.0031414779368788004, 0.001627368968911469, 0.010914698243141174, 0.02242550253868103, 0.05059746652841568, 0.013626979663968086, 0.0069625163450837135, 0.01980263739824295, 0.012255936861038208, 0.013185861520469189, 0.002120646648108959, -0.0033829007297754288, 0.024988757446408272, 0.011171024292707443, 0.014044254086911678, -0.017573200166225433, 0.023593870922923088, 0.012732821516692638, -0.00828587170690298, 0.010068228468298912, -0.004032656084746122, -0.02162672020494938, -0.008005701936781406, 0.04530404508113861, 0.02378462441265583, 0.0015103832120075822, -0.01398464385420084, -0.004086305852979422, 0.02111406996846199, -0.009579421021044254, 0.04122668132185936, 0.0004984935512766242, 0.011707519181072712, -0.006402176804840565, 0.016166390851140022, 0.02444034069776535, -0.015188777819275856, -0.0179904755204916, 0.001977581297978759, -0.035957105457782745, -0.013090484775602818, 0.058942947536706924, 0.004110150039196014, 0.027301648631691933, -0.01509340014308691, 0.023045452311635017, 0.03972449526190758, 0.0054633100517094135, -0.004849321208894253, -0.0334773063659668, 0.002388894325122237, -0.022413579747080803, 0.022461269050836563, 0.020231833681464195, -0.014080020599067211, -0.017000939697027206, 0.020231833681464195, 0.002478310139849782, 0.006557164713740349, 0.017549356445670128, 0.005242750979959965, -0.018884634599089622, -5.2904393669450656e-05, 0.020696796476840973, -0.022246669977903366, -0.04973907396197319, -0.03703009709715843, 0.03946220874786377, -0.025537176057696342, -0.01012783870100975, 0.04954832047224045, -0.027373181656003, 0.005531862378120422, 0.04458871856331825, 0.03927145525813103, -0.005394758190959692, -0.014056175947189331, 0.013615057803690434, -0.009835747070610523, 0.023271972313523293, -0.008089156821370125, -0.002065506763756275, -0.019087309017777443, 0.043778013437986374, 0.0082620270550251, 0.022544723004102707, -0.023403115570545197, 0.021853240206837654, 0.014902646653354168, 0.017465902492403984, 0.011910195462405682, -0.008756794966757298, -0.050978973507881165, 0.013495836406946182, -0.00796397402882576, 0.007475167512893677, -0.041298214346170425, -0.02258048951625824, 0.0064379433169960976, -0.002838954096660018, -0.015904104337096214, 0.02620481327176094, -0.019671494141221046, -0.04046366736292839, 0.013972721062600613, 0.013352771289646626, -0.00869718473404646, -0.015200699679553509, 0.013770045712590218, 0.028946900740265846, 0.00564512237906456, -0.022008229047060013, -0.0017108238535001874, -0.005505037494003773, -0.010354358702898026, 0.002363559789955616, 0.002985000144690275, -0.011880389414727688, -0.013245472684502602, 0.01262552198022604, -0.01065837312489748, -0.000183302559889853, -0.03724469617009163, 0.005323225166648626, -0.02122136950492859, 0.032475847750902176, 0.0033143486361950636, -0.011063724756240845, 0.03125979006290436, 0.008333560079336166, -0.005949136335402727, 0.00583289610221982, -0.02095908299088478, 0.015784883871674538, -0.00970460381358862, -0.0105808787047863, -0.02081601694226265, 0.002226455369964242, -0.02292623184621334, -0.05393565818667412, -0.006235267501324415, -0.0037793111987411976, -0.04041597619652748, -0.010855088010430336, -0.003296465380117297, 0.02339119464159012, -0.007975896820425987, -0.02918534353375435, 0.018670035526156425, 0.012613600119948387, -0.017561279237270355, 0.006247189361602068, 0.006509475875645876, -0.018073929473757744, -0.019337674602866173, 0.004542326554656029, 0.005654064007103443, 0.01611870341002941, 0.009931123815476894, -0.0025453721173107624, 0.0057047330774366856, -0.025513330474495888, -0.003129555843770504, 0.0034484723582863808, -0.03252353519201279, -0.01884886808693409, 0.03221356123685837, 0.0002376972115598619, 0.0013546505942940712, 0.005391777493059635, -0.004771827254444361, -0.020339131355285645, 0.019015777856111526, -0.046496257185935974, 0.021078303456306458, -0.03311964124441147, -0.010163605213165283, -0.005668966565281153, 0.012387080118060112, 0.04587630555033684, 0.0019701297860592604, 0.03393034636974335, -0.0012823727447539568, 0.026943985372781754, 0.00651543727144599, 0.0041071693412959576, 0.007111542858183384, -0.009960928931832314, -0.03137901425361633, 0.020696796476840973, -0.018670035526156425, 0.01713208295404911, -0.007379790768027306, 0.0054633100517094135, -0.007016166113317013, -0.0013360222801566124, -0.010896814987063408, 0.01303087454289198, 0.0009865552419796586, -0.008828327991068363, -0.009346939623355865, 0.009281367994844913, 0.02932840771973133, 0.0008621180895715952, -0.016714807599782944, -0.03004373610019684, 0.0089415879920125, -0.027945442125201225, -0.00501623097807169, -0.01738244667649269, 0.04489869251847267, 0.004357533995062113, -0.017561279237270355, 0.013162017799913883, 0.0216147992759943, -0.024166131392121315, -0.013698512688279152, -0.006563125643879175, 0.004897009581327438, -0.026324035599827766, 0.013829655945301056, -0.0073678684420883656, 0.02646709978580475, 0.004354553297162056, 0.008691223338246346, 0.025227200239896774, 0.024726470932364464, 0.018872711807489395, -0.012577833607792854, -0.01981455832719803, 0.028660770505666733, 0.0010729905916377902, 0.00778514239937067, 0.013698512688279152, -0.00997881218791008, 0.03633861243724823, 0.011814817786216736, -0.009126381017267704, -0.01830044947564602, 0.00416976073756814, 0.06204269826412201, 0.008470664732158184, -0.0035676935221999884, -0.005874623078852892, 0.01985032483935356, 0.01692940667271614, -0.00929329078644514, -0.04406414553523064, 0.02806466445326805, -0.016798263415694237, 0.007135387044399977, 0.012995108030736446, -0.03149823471903801, -0.0019507564138621092, 0.016714807599782944, 0.0190038550645113, -0.022103605791926384, -0.010503385215997696, 0.019886091351509094, 0.010849126614630222, -0.014747658744454384, -0.01443768385797739, 0.01149292103946209, -0.005472251679748297, 0.03018680028617382, -0.02932840771973133, -0.03886610269546509, -0.012589755468070507, 0.015057634562253952, 0.03357268124818802, 0.005975961219519377, -0.011963844299316406, -0.02525104396045208, -0.011129296384751797, 0.05150354653596878, -0.005975961219519377, -0.002900055143982172, -0.011242556385695934, 0.008053390309214592, -0.010521268472075462, 0.016440600156784058, -0.022294359281659126, -0.023498492315411568, 0.0028404444456100464, -0.004643664695322514, -0.013042796403169632, -0.002439563162624836, 0.016857873648405075, -0.017263226211071014, 0.025584863498806953, -0.013388537801802158, 0.0004291962250135839, -0.007349985186010599, -0.002137039555236697, 0.013913110829889774, 0.027707001194357872, -0.0003388489130884409, -0.0296383835375309, 0.04208507388830185, -0.001627368968911469, -0.014401917345821857, -0.024201897904276848, 0.016094857826828957, 0.03128363564610481, 0.04384954646229744, 0.012577833607792854, 0.01855081506073475, 0.038532283157110214, 0.010062267072498798, 0.0014857938513159752, -0.03168898820877075, -0.04213276132941246, 0.006402176804840565, 0.015546441078186035, 0.001304726698435843, 0.011027958244085312, 0.01214863732457161, -0.01708439365029335, 0.03872303664684296, -0.017716266214847565, 0.030329866334795952, 0.006187578663229942, 0.04644856974482536, -0.007910325191915035, -0.005373894236981869, 0.0323566272854805, 0.001698901760391891, -0.012422846630215645, -0.02515566721558571, 0.005049016792327166, -0.011701557785272598, -0.00965095404535532, -0.017346680164337158, -0.017346680164337158, 0.012339391745626926, 0.0027614603750407696, 0.053649526089429855, -0.030472932383418083, 0.028160041198134422, 0.021054459735751152, -0.0016124664107337594, 0.03698240965604782, -0.02751624584197998, 0.03385881334543228, -0.011188906617462635, 0.03774542361497879, 0.00793416891247034, 0.007946090772747993, -0.029352253302931786, 0.0012518223375082016, 0.0029864904936403036, 0.008232221938669682, 0.022139372304081917, -0.00038560599205084145, 0.0053977384231984615, -0.025322576984763145, -0.01262552198022604, -0.0004139210213907063, 0.0019254219951108098, -0.04368263855576515, 0.00414293585345149, -0.013793889433145523, 0.01081336010247469, -0.015379531309008598, -0.00091353221796453, -0.008357403799891472, -0.0023263031616806984, -0.008953509852290154, -0.0023158711846917868, 0.0006333625060506165, -0.006139890290796757, 0.002612433861941099, -0.042609646916389465]
metadata : {"source": "pydantic_ai_docs", "crawled_at": "2025-03-14T10:14:54.884233", "url_path": "/api/pydantic_graph/graph/", "chunk_size": 4866}
updated_dt: 2025-03-14T10:14:54.885764
---
```
defmermaid_image(
  self, infer_name: bool = True, **kwargs: typing_extensions.Unpack[mermaid.MermaidConfig]
) -> bytes:
"""Generate a diagram representing the graph as an image.
  The format and diagram can be customized using `kwargs`,
  see [`pydantic_graph.mermaid.MermaidConfig`][pydantic_graph.mermaid.MermaidConfig].
  !!! note "Uses external service"
    This method makes a request to [mermaid.ink](https://mermaid.ink) to render the image, `mermaid.ink`
    is a free service not affiliated with Pydantic.
  Args:
    infer_name: Whether to infer the graph name from the calling frame.
    **kwargs: Additional arguments to pass to `mermaid.request_image`.
  Returns:
    The image bytes.
  """
  if infer_name and self.name is None:
    self._infer_name(inspect.currentframe())
  if 'title' not in kwargs and self.name:
    kwargs['title'] = self.name
  return mermaid.request_image(self, **kwargs)

```
  
---|---  
####  mermaid_save
```
mermaid_save(
  path: Path[](https://docs.python.org/3/library/pathlib.html#pathlib.Path "pathlib.Path") | str[](https://docs.python.org/3/library/stdtypes.html#str),
  /,
  *,
  infer_name: bool[](https://docs.python.org/3/library/functions.html#bool) = True,
  **kwargs: Unpack[](https://typing-extensions.readthedocs.io/en/latest/index.html#typing_extensions.Unpack "typing_extensions.Unpack")[MermaidConfig[](https://ai.pydantic.dev/api/pydantic_graph/mermaid/#pydantic_graph.mermaid.MermaidConfig "pydantic_graph.mermaid.MermaidConfig")],
) -> None

```

Generate a diagram representing the graph and save it as an image.
The format and diagram can be customized using `kwargs`, see [`pydantic_graph.mermaid.MermaidConfig`](https://ai.pydantic.dev/api/pydantic_graph/mermaid/#pydantic_graph.mermaid.MermaidConfig).
Uses external service
This method makes a request to [mermaid.ink](https://mermaid.ink) to render the image, `mermaid.ink` is a free service not affiliated with Pydantic.
Parameters:
Name | Type | Description | Default  
---|---|---|---  
`path` |  `Path[](https://docs.python.org/3/library/pathlib.html#pathlib.Path "pathlib.Path") | str[](https://docs.python.org/3/library/stdtypes.html#str)` |  The path to save the image to. |  _required_  
`infer_name` |  `bool[](https://docs.python.org/3/library/functions.html#bool)` |  Whether to infer the graph name from the calling frame. |  `True`  
`**kwargs` |  `Unpack[](https://typing-extensions.readthedocs.io/en/latest/index.html#typing_extensions.Unpack "typing_extensions.Unpack")[MermaidConfig[](https://ai.pydantic.dev/api/pydantic_graph/mermaid/#pydantic_graph.mermaid.MermaidConfig "pydantic_graph.mermaid.MermaidConfig")]` |  Additional arguments to pass to `mermaid.save_image`. |  `{}`  
Source code in `pydantic_graph/pydantic_graph/graph.py`
```
463
464
465
466
467
468
469
470
471
472
473
474
475
476
477
478
479
480
481
482
483
484
```
| ```
defmermaid_save(
  self, path: Path | str, /, *, infer_name: bool = True, **kwargs: typing_extensions.Unpack[mermaid.MermaidConfig]
) -> None:
"""Generate a diagram representing the graph and save it as an image.
  The format and diagram can be customized using `kwargs`,
  see [`pydantic_graph.mermaid.MermaidConfig`][pydantic_graph.mermaid.MermaidConfig].
  !!! note "Uses external service"
    This method makes a request to [mermaid.ink](https://mermaid.ink) to render the image, `mermaid.ink`
    is a free service not affiliated with Pydantic.
  Args:
    path: The path to save the image to.
    infer_name: Whether to infer the graph name from the calling frame.
    **kwargs: Additional arguments to pass to `mermaid.save_image`.
  """
  if infer_name and self.name is None:
    self._infer_name(inspect.currentframe())
  if 'title' not in kwargs and self.name:
    kwargs['title'] = self.name
  mermaid.save_image(path, self, **kwargs)

```
  
---|---  
###  GraphRun
Bases: `Generic[](https://docs.python.org/3/library/typing.html#typing.Generic "typing.Generic")[StateT[](https://ai.pydantic.dev/api/pydantic_graph/state/#pydantic_graph.state.StateT "pydantic_graph.state.StateT"), DepsT[](https://ai.pydantic.dev/api/pydantic_graph/nodes/#pydantic_graph.nodes.DepsT "pydantic_graph.nodes.DepsT"), RunEndT[](https://ai.pydantic.dev/api/pydantic_graph/nodes/#pydantic_graph.nodes.RunEndT "pydantic_graph.nodes.RunEndT")]`
A stateful, async-iterable run of a [`Graph`](https://ai.pydantic.dev/api/pydantic_graph/graph/#pydantic_graph.graph.Graph).
You typically get a `GraphRun` instance from calling `async with [my_graph.iter(...)][pydantic_graph.graph.Graph.iter] as graph_run:`. That gives you the ability to iterate through nodes as they run, either by `async for` iteration or by repeatedly calling `.next(...)`.
Here's an example of iterating over the graph from [above](https://ai.pydantic.dev/api/pydantic_graph/graph/#pydantic_graph.graph.Graph): 
iter_never_42.py