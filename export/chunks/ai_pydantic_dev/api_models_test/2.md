---
url: https://ai.pydantic.dev/api/models/test/
session_id: pydantic_ai_docs
chunk_number: 2
title: TestModel Class for Testing Purposes
summary: The TestModel is designed for testing scenarios, offering functionality to call specified tools and return results, either from tools or custom text. It includes attributes for controlling tool invocation, custom result outputs, random data generation seed, and storing previous request parameters.
embedding: [-0.000670441600959748, 0.03376312181353569, 0.002030810108408332, -0.05477847158908844, -0.011327504180371761, -0.00853892881423235, -0.037758346647024155, -0.04882027208805084, -0.015588308684527874, 0.034640684723854065, 0.022354789078235626, -0.042099978774785995, 0.02359030768275261, -0.02019551955163479, -0.008111693896353245, -0.008689038455486298, 0.019491158425807953, 0.04570261016488075, -0.014410525560379028, 0.039929162710905075, 0.033970966935157776, 0.01609637215733528, 0.015530574135482311, -0.023220805451273918, 0.0069281370379030704, 0.025287700816988945, -0.02706592157483101, 0.05921247974038124, 0.002297832164913416, -0.006633691489696503, 0.04678801819682121, -0.013371304608881474, -0.049651648849248886, -0.010605823248624802, 0.0029329112730920315, -0.009329890832304955, 0.021546507254242897, 0.009156688116490841, 0.010698198340833187, 0.06798812001943588, -0.020980708301067352, -0.007101340685039759, 0.027804924175143242, 0.0469958633184433, -0.015576761215925217, 0.008140561170876026, 0.011627723462879658, 0.01260920986533165, 0.014953229576349258, 0.051776278764009476, -0.028774863108992577, 0.025680294260382652, -0.006454714573919773, -0.03399406000971794, 0.002042357111349702, -0.039605848491191864, -0.03401715308427811, 0.023648040369153023, 0.001218197401612997, 0.009889915585517883, 0.0019644154235720634, -0.00014704249042551965, -0.0425618551671505, 0.004260804504156113, -0.01662752963602543, -0.01757437363266945, -0.01667371578514576, 0.0160848256200552, -0.03196180611848831, 0.010617369785904884, -0.02558792009949684, -0.001947095151990652, -0.07182168960571289, 0.011731645092368126, -0.031938713043928146, -0.02404063567519188, 0.049651648849248886, 0.05274621769785881, -0.013047991320490837, -0.003282204968854785, -0.016327310353517532, 0.023613400757312775, 0.04009082168340683, 0.012101146392524242, -0.041106946766376495, -0.04905121028423309, -0.0732073187828064, -0.03221583738923073, -0.01075593288987875, -0.05233052745461464, -0.024617981165647507, 0.0058052013628184795, -0.012828600592911243, 0.04722680151462555, 0.06323079764842987, 0.00931257102638483, 0.00356510397978127, -0.026696421205997467, 0.018879173323512077, 0.015495933592319489, 0.046626362949609756, -0.00998806394636631, -0.051499150693416595, 0.010542315430939198, 0.04094529151916504, 0.006610597483813763, 0.0013322230661287904, -0.0036141781602054834, -0.026973547413945198, 0.018521219491958618, -0.033970966935157776, -0.013059538789093494, 0.03628034517168999, -0.020541926845908165, -0.08858777582645416, -0.012343631125986576, -0.02498748153448105, -0.03849734738469124, -0.004996919073164463, -0.01480311993509531, 0.018417296931147575, 0.029721708968281746, 0.03205418214201927, -0.019987676292657852, 0.011223581619560719, -0.001377688953652978, -0.006529769394546747, -0.03032214753329754, -0.06346173584461212, -0.0015631609130650759, 0.022297054529190063, -0.005464568268507719, -0.01256302185356617, -0.007101340685039759, -0.017551280558109283, -0.027643267065286636, -0.05219196528196335, -0.029975740239024162, -0.03919016197323799, 0.03140755370259285, 0.0005434257327578962, -0.014606822282075882, -0.031199710443615913, -0.00403564004227519, -0.00037202652310952544, 0.008989257737994194, -0.005594470538198948, -0.017147138714790344, 0.00013991589366924018, 0.02503366954624653, 0.021581146866083145, 0.03032214753329754, 0.01636194996535778, 0.016962388530373573, 0.009497321210801601, -0.03457140550017357, 0.00236133998259902, 0.03286246210336685, 0.021073084324598312, -0.026234546676278114, 0.013013350777328014, 0.004624531604349613, -0.023694228380918503, 0.013775445520877838, -0.040783632546663284, -0.003420767607167363, -0.02969861403107643, -0.021546507254242897, -0.06761861592531204, -0.05657978728413582, 0.05039064958691597, 0.01331357005983591, 0.010461486876010895, 0.0015602741623297334, -0.014641462825238705, -0.004708246327936649, -0.06318461149930954, -0.05745735019445419, -0.002505676355212927, -0.0009136480512097478, -0.0410376638174057, -0.03173086792230606, -0.06161423400044441, -0.023971354588866234, -0.05902772769331932, -0.010871401987969875, 0.019317954778671265, 0.022712742909789085, 0.008960390463471413, 0.018636688590049744, -0.01718178018927574, 0.02725067175924778, 0.023740416392683983, 0.006246870383620262, -0.007724872790277004, -0.0041857496835291386, 0.033970966935157776, -0.00708401994779706, 0.0011077802628278732, 0.00833685789257288, -0.0067318398505449295, 0.044455546885728836, 0.05237671732902527, -0.04392438754439354, 0.012967163696885109, -0.021269381046295166, -0.031038053333759308, 0.053392842411994934, -0.060320980846881866, -0.017955422401428223, 0.0007335887057706714, -0.0395827554166317, 0.02928292565047741, -0.016292668879032135, -0.013325116597115993, 0.020807504653930664, -0.06249179691076279, -0.025749575346708298, 0.014029477722942829, 0.06586349010467529, 0.014341243542730808, 0.04477886110544205, 0.04900502413511276, 0.011038831435143948, -0.014872401021420956, 0.03819712996482849, -0.01077902689576149, -0.03972131758928299, -0.005574263632297516, -0.015195714309811592, -0.03311649709939957, -0.0029285813216120005, 0.03664984554052353, 0.0003225913969799876, 0.023532573133707047, -0.09269847720861435, -0.0012376827653497458, 0.005037332884967327, -0.022250866517424583, -0.07685613632202148, 0.0030397202353924513, 0.01785149984061718, -0.01654670014977455, 0.023601854220032692, 0.009889915585517883, 0.0037527410313487053, 0.024641074240207672, -0.04574880003929138, 0.023648040369153023, 0.025564825162291527, 0.10299830138683319, -0.06761861592531204, 0.016615981236100197, -0.033786214888095856, 0.004295445047318935, -0.009936103597283363, -0.02083059959113598, -0.02861320599913597, -0.02847464382648468, -0.01817481219768524, -0.01581924594938755, 0.04775795713067055, -0.03891303762793541, -0.010813667438924313, -0.004607211332768202, 0.000686318555381149, 0.0031523024663329124, -0.0499749630689621, 0.019444972276687622, -0.03436356037855148, 0.03376312181353569, 0.024109916761517525, 0.032746993005275726, -0.0038306824862957, -0.019087018445134163, -0.01369461789727211, 0.021673522889614105, 0.005103727802634239, 0.04320847988128662, -0.0351487472653389, 0.024479417130351067, 0.02404063567519188, 0.035818468779325485, 0.04480195418000221, -0.01039220578968525, 0.004558136686682701, 0.024525605142116547, -0.0026399088092148304, -0.006102534011006355, 0.0178053118288517, 0.040113914757966995, -0.004514835774898529, -0.008868015371263027, -0.04487123340368271, 0.012632302939891815, -0.01943342387676239, -0.002690426539629698, 0.008671718649566174, -0.001021178555674851, -0.03207727521657944, -0.011754739098250866, 0.01107347197830677, 0.0033601464238017797, 0.0330934002995491, 0.019641268998384476, 0.002273295074701309, 0.03228512033820152, -0.02729685977101326, 0.02611907757818699, -0.028982706367969513, 0.02507985569536686, 0.027597079053521156, -0.06452404707670212, -0.004933410789817572, 0.017874592915177345, -0.026696421205997467, 0.009572376497089863, -0.006933910306543112, 0.047388456761837006, 0.0019254448125138879, -0.0008862242102622986, -0.01668526418507099, -0.011621950194239616, 0.011737419292330742, 0.01617719978094101, 0.007644044701009989, -0.030991867184638977, 0.019641268998384476, -0.027135202661156654, 0.014537541195750237, -0.019826019182801247, -0.04831220954656601, 0.0005080634145997465, 0.012759319506585598, 0.049420710653066635, -0.018221000209450722, -0.03757359832525253, 0.011004190891981125, 0.017655203118920326, 0.05214577913284302, -0.0160501841455698, 0.029721708968281746, -0.04789651930332184, -0.022608820348978043, 0.014445166103541851, 0.0015660476638004184, 0.01060004997998476, 0.03835878521203995, -0.0059986119158566, 0.031384460628032684, 0.049189772456884384, 0.0007671468192711473, 0.006639464758336544, 0.022135397419333458, -0.03434046730399132, -0.04718061536550522, -0.01452599372714758, 0.025426262989640236, 0.013255835510790348, 0.0034640685189515352, -0.01197412982583046, 0.028728675097227097, 0.02205456979572773, -0.03639581426978111, -0.0316384918987751, 0.053531404584646225, -0.053485218435525894, 0.009768673218786716, -0.05616409704089165, -0.0052971383556723595, 0.01704321801662445, 0.030529990792274475, -0.01735498383641243, 0.01021322887390852, -0.02630382776260376, -0.02969861403107643, -0.019722096621990204, 0.021304020658135414, 0.00879296101629734, 0.03895922377705574, 0.06743387132883072, -0.005940877366811037, 0.04089910164475441, -0.0262114517390728, 0.04258494824171066, 0.02188136614859104, 0.00728609086945653, 0.006166041828691959, -0.03531040623784065, 0.010357565246522427, 0.013971743173897266, -0.05810397490859032, -0.02318616583943367, -0.023717323318123817, 0.030622366815805435, 0.03701934590935707, 0.0175397340208292, 0.016061730682849884, 0.061798982322216034, -0.018648235127329826, -0.0007141032838262618, -0.018093984574079514, -0.029975740239024162, 0.032562244683504105, 0.004910317249596119, -0.0052942512556910515, 0.011154300533235073, 0.007303411141037941, 0.05842728912830353, 0.011425652541220188, 0.07094412297010422, 0.002211230341345072, 0.014583728276193142, 0.0012860354036092758, -0.044363170862197876, -0.04027557000517845, 0.04020628705620766, 0.004682266153395176, 0.06239942088723183, 0.023347821086645126, -0.026950452476739883, -0.044986702501773834, -0.017863046377897263, 0.005450134631246328, -0.032562244683504105, 0.05842728912830353, 0.046395424753427505, -0.030299052596092224, 0.007170621771365404, -0.015542120672762394, -0.017909234389662743, -0.022678101435303688, 0.03773525357246399, 0.002840536180883646, 0.0022530879359692335, -0.0019600854720920324, -0.026188358664512634, -0.03895922377705574, -0.004988258704543114, 0.01308263186365366, 0.031430646777153015, -0.0017623448511585593, -0.01197412982583046, 0.04434007778763771, -0.02838226780295372, 0.001600688323378563, -0.05034446343779564, 0.004800621885806322, 0.02914436347782612, -0.02042645774781704, 0.019410330802202225, 0.003798928577452898, -0.0360725000500679, -0.02956005185842514, 0.017204873263835907, -0.026881171390414238, 0.08152107894420624, 0.018093984574079514, 0.013475226238369942, -0.03226202353835106, 0.04905121028423309, 0.0266733281314373, -0.004318538587540388, 0.03475615382194519, -0.055702220648527145, -0.03249296173453331, 0.002357010031118989, -0.024109916761517525, -0.011904848739504814, 0.0021361755207180977, 0.027550891041755676, 0.007424653507769108, -0.0038018152117729187, 0.01222816202789545, 0.018140172585844994, -0.018636688590049744, 0.00890265591442585, 0.018371110782027245, 0.035056374967098236, 0.005409720353782177, 0.05445515736937523, -0.053854718804359436, -0.03371693566441536, 0.020449550822377205, -0.04131479188799858, 0.05274621769785881, -0.01454908773303032, -0.04371654614806175, -0.020992254838347435, 0.0028924972284585238, -0.018682876601815224, 0.009757126681506634, 0.02096916176378727, -0.010986871086061, 0.02762017399072647, -0.0032850916031748056, -0.0008075609803199768, 0.025726482272148132, -0.03290865197777748, -0.011916396208107471, -0.018602048978209496, 0.00208421447314322, 0.018313376232981682, 0.034871622920036316, 0.00890265591442585, 0.026950452476739883, 0.005167235620319843, 0.02833607979118824, -0.004393593408167362, 0.06184517219662666, -0.08396901935338974, -0.0004788353107869625, -0.006050573196262121, 0.01911011151969433, 0.03200799226760864, 0.00010563604882918298, -0.005242290440946817, 0.00639698002487421, -0.023266993463039398, 0.0035997445229440928, 0.024779636412858963, -0.01966436207294464, 0.013544508256018162, 0.002069781068712473, -0.03833569213747978, -0.020172426477074623, 0.0031465289648622274, 0.0074188802391290665, -0.02431776188313961, -0.0036459320690482855, -0.0053288922645151615, 0.01581924594938755, 0.010340244509279728, -0.030299052596092224, -0.0034929357934743166, -0.01204341184347868, 0.003016626462340355, -0.000739001261536032, -0.0062410966493189335, 0.004511949140578508, 0.006356565747410059, 0.023878978565335274, -0.015357370488345623, -0.00784034188836813, 0.011962583288550377, 0.04484814032912254, 0.025241512805223465, 0.001133760786615312, 0.01167968474328518, -0.03046070970594883, 0.02028789557516575, -0.0321696512401104, -0.001977405743673444, -0.0683114305138588, -0.0003222305385861546, 0.032746993005275726, -0.03669603168964386, 0.01114275399595499, -0.001936991699039936, -0.018382657319307327, 0.009907236322760582, 0.019329503178596497, 0.027666360139846802, 0.020403362810611725, -0.029998833313584328, 0.05463990941643715, 0.006801121402531862, 0.01645432598888874, -0.00038970771129243076, 0.022170038893818855, 0.03981369361281395, 0.001148916082456708, 0.002149165840819478, -0.0007555999327450991, 0.002824659226462245, -0.014918588101863861, 0.037134815007448196, -0.028543924912810326, -0.053808532655239105, 0.029259832575917244, -0.016731450334191322, -0.0163157619535923, -0.0017161573050543666, 0.018867626786231995, -0.03327815234661102, -0.003755627665668726, -0.0038797566667199135, 0.006801121402531862, 0.0008162211743183434, -0.018925361335277557, 0.01143142580986023, -0.0385897234082222, -0.009543509222567081, -0.001479445956647396, -0.030045021325349808, -0.020588114857673645, 0.01163927000015974, 0.014849307015538216, -0.03182324394583702, -0.006090987008064985, 0.06392361223697662, 0.007280317600816488, -0.030252864584326744, 0.04251566901803017, -0.01867133006453514, -0.0046216449700295925, 0.044224608689546585, 0.00638543302193284, -0.05704166367650032, 0.0010067449184134603, 0.016061730682849884, 0.003155189100652933, -0.021973742172122, -0.053854718804359436, 0.03570299968123436, 0.02422538585960865, -0.05274621769785881, -0.003706553252413869, 0.04572570323944092, -0.015553668141365051, -0.010328697971999645, -0.006050573196262121, 0.027504704892635345, 0.010513448156416416, 0.014502900652587414, -0.017331888899207115, 0.01803625002503395, 0.02554173208773136, -0.00218091974966228, 0.05325428023934364, 0.0069512310437858105, 0.019398784264922142, 0.03674222156405449, 0.02738923579454422, -0.042377106845378876, 0.015519026666879654, 0.0301835834980011, -0.021177005022764206, -0.014468259178102016, -0.041568823158741, 0.033509090542793274, 0.049513086676597595, 0.0024349514860659838, 0.0032591111958026886, -0.0031523024663329124, -0.019514253363013268, -0.013821633532643318, 0.02034563012421131, 0.00054522993741557, -0.011951036751270294, 0.0008862242102622986, -0.037134815007448196, -0.02441013604402542, 0.005963971372693777, 0.03914397582411766, -0.0011005634441971779, 0.007655591703951359, -0.0044022537767887115, -0.015796152874827385, 0.02720448561012745, -0.05085252597928047, 0.0025648539885878563, -0.010727065615355968, 0.012262802571058273, -0.017158687114715576, 0.020137785002589226, 0.004535043146461248, 0.017655203118920326, 0.00820406898856163, 0.0072976378723979, -0.03584156185388565, -0.0032215837854892015, -0.012897881679236889, 0.010605823248624802, 0.00566086545586586, 0.03078402206301689, 0.028590112924575806, -0.04877408593893051, -0.05048302561044693, 0.059997666627168655, -0.015980903059244156, -0.031661584973335266, -0.06687961518764496, 0.012274349108338356, 0.0291905514895916, -0.003143642097711563, 0.04803508520126343, 0.01865978166460991, -0.0026413523592054844, 0.024872012436389923, -0.005487661808729172, -0.04367035627365112, -0.02101534977555275, -0.005620451178401709, 0.020091596990823746, -0.0013228411553427577, -0.03424809128046036, 0.018509672954678535, -0.016327310353517532, -0.009329890832304955, 0.010115080513060093, -0.006368112750351429, -0.006293057929724455, 0.019306408241391182, -0.026950452476739883, 0.0023584533482789993, -0.023717323318123817, -0.0048266020603477955, 0.026904266327619553, -0.019537346437573433, -0.0284284558147192, 0.020010769367218018, -0.02061120793223381, 0.020449550822377205, -0.04697277024388313, -0.0020784412045031786, 0.02914436347782612, 0.01825564168393612, 0.011870208196341991, -0.006223776377737522, -0.007811474613845348, 0.009197101928293705, -0.02441013604402542, -0.00859089009463787, 0.01794387586414814, -0.04905121028423309, 0.007696005515754223, 0.04533310979604721, -0.0006801842828281224, -0.009174007922410965, 0.00017464678967371583, 0.0018807005835697055, 0.0069396840408444405, -0.02450251206755638, -0.0007693119114264846, -0.03392477706074715, -0.024387042969465256, -0.00980331376194954, -0.0012651067227125168, 0.018093984574079514, -0.0038913036696612835, 0.018371110782027245, -0.02192755416035652, 0.005086407531052828, -0.0020755543373525143, -0.007696005515754223, -0.027943486347794533, 0.05094490200281143, -0.044270794838666916, -0.0014181031147018075, 0.014098758809268475, 0.005675299093127251, -0.0064604878425598145, 0.01281705405563116, -0.01703166961669922, 0.0011135536478832364, 0.011494934558868408, -0.004286784678697586, -0.03302412107586861, 0.03092258609831333, -0.013475226238369942, 0.005175895523279905, -0.00029787380481138825, 0.038612816482782364, -0.038612816482782364, -0.023832792416214943, 0.0024869125336408615, 0.0266733281314373, 0.025287700816988945, 0.004748660605400801, -0.022758930921554565, -0.016939295455813408, -0.017793765291571617, 0.025657201185822487, 0.03928253799676895, -0.01170855201780796, 0.03348599746823311, 0.01662752963602543, 0.015449745580554008, -0.011373691260814667, 0.03778143972158432, 0.0011092235799878836, -0.01911011151969433, 0.0076902322471141815, 0.041014570742845535, 0.022527992725372314, -0.021627334877848625, -0.012805506587028503, -0.004419574048370123, -0.021731257438659668, -0.018278734758496284, 0.016338856890797615, -0.0003857384726870805, 0.004737113602459431, 0.021673522889614105, -0.0533466562628746, 0.011893302202224731, -0.07306875288486481, -0.006674105301499367, 0.01799006201326847, -0.004797734785825014, 0.018463484942913055, -0.012874787673354149, 0.004061620216816664, -0.00908740609884262, -0.03385549783706665, -0.02932911366224289, -0.008914203383028507, 0.011021511629223824, 0.0032417909242212772, -0.01036911178380251, 0.03438665345311165, -0.015749964863061905, -0.009941876865923405, -0.012574568390846252, 0.012805506587028503, -0.01480311993509531, 0.013994837179780006, 0.018948454409837723, -0.037134815007448196, 0.01735498383641243, -0.018221000209450722, -0.031014960259199142, -0.00528847798705101, 0.0006224497919902205, 0.04886646196246147, -0.04198450967669487, -0.030991867184638977, 0.00563777144998312, 0.0007505482062697411, 0.027920393273234367, -0.046533986926078796, 0.010738612152636051, 0.013914008624851704, -0.005975518375635147, -0.007176395505666733, -0.03863590955734253, 0.00946845393627882, -0.001824409468099475, 0.0026095982175320387, 0.022354789078235626, 0.020033862441778183, -0.013267382979393005, -0.03598012402653694, 0.005129707977175713, -0.013798539526760578, -0.008261803537607193, 0.007586310151964426, -0.014006383717060089, -0.03281627595424652, 0.03641890734434128, 0.014987870119512081, 0.029028894379734993, -0.051683902740478516, -0.023555666208267212, -0.009918782860040665, 0.031292084604501724, -0.016881560906767845, 0.0076902322471141815, -0.005883143283426762, 0.0023815471213310957, -0.014306602999567986, -0.022989869117736816, -0.020911427214741707, -0.0053260051645338535, -0.021673522889614105, 0.0004564631963148713, 0.030968772247433662, 0.012378271669149399, -0.03757359832525253, 0.005161462351679802, -0.01001115795224905, -0.012690037488937378, -0.005155688617378473, 0.02563410811126232, -0.006760707125067711, -0.007782607339322567, 0.0017479112138971686, -0.015542120672762394, -0.0021852499339729548, 0.02671951614320278, -0.021350208669900894, 0.02484891749918461, 0.012355177663266659, 0.024918200448155403, 0.04350870102643967, 0.030299052596092224, 0.014676103368401527, 0.0039346045814454556, 0.020946068689227104, -0.013452133163809776, -0.042377106845378876, 0.007170621771365404, -0.049374524503946304, -0.02635001391172409, 0.0012643850641325116, 0.0034813887905329466, 0.023082243278622627, 0.03872828558087349, -0.010807894170284271, 0.04242329299449921, 0.007626724429428577, 0.022123850882053375, 0.0051095010712742805, 0.010207455605268478, -0.007730646524578333, 0.032146554440259933, 0.0021693729795515537, 0.005132595077157021, 0.025957420468330383, 0.027689455077052116, -0.04159191623330116, -0.03230821341276169, 0.08073589205741882, -0.021569600328803062, -0.01609637215733528, 0.03895922377705574, 0.002846309682354331, 0.07925789058208466, -0.01718178018927574, -0.00944535993039608, -0.025195324793457985, -0.0016670830082148314, 0.013659977354109287, 0.004292558412998915, -0.013140366412699223, 0.02630382776260376, -0.017204873263835907, 0.05256146565079689, -0.019260220229625702, 0.011090792715549469, -0.04076053947210312, -0.008030865341424942, 0.00969361886382103, -0.0006650289869867265, -0.016916200518608093, -0.028890332207083702, 0.010138173587620258, -0.008677491918206215, 0.04785033315420151, 0.011148527264595032, -0.030714740976691246, -0.023648040369153023, -0.0028491963166743517, 0.014075664803385735, -0.007060926407575607, 0.013001804240047932, 0.010438392870128155, -0.014202681370079517, 0.009214422665536404, 0.021257834509015083, -0.03447902947664261, -0.028890332207083702, -0.0336245596408844, -0.04094529151916504, -0.013232741504907608, -0.0222393199801445, -0.039698224514722824, 0.051683902740478516, -0.02450251206755638, -0.019398784264922142, 0.03295483812689781, -0.03173086792230606, -0.004676492419093847, -0.0008169428328983486, -0.015611402690410614, 0.04627995565533638, -0.032839369028806686, 0.006829988677054644, 0.003943264484405518, -0.015172620303928852, 0.018232546746730804, 0.04036794602870941, -0.00023815470922272652, -0.032608430832624435, -0.008088599890470505, 0.03831259906291962, 0.009133594110608101, 0.040829822421073914, -0.039790600538253784, -0.0033024121075868607, 0.032469868659973145, -0.008885336108505726, -0.0011518028331920505, 0.04055269435048103, 0.017481999471783638, 0.03253915160894394, -0.0014563521835952997, 0.0012513947440311313, -0.018682876601815224, 0.015761511400341988, 0.013117273338139057, -0.005487661808729172, 0.05209958925843239, 0.004266577772796154, -0.0010955117177218199, 0.018047796562314034, 0.03394787013530731, 0.06045954301953316, 0.01260920986533165, 0.012054958380758762, -0.0059812916442751884, 0.0301835834980011, -0.010074665769934654, -0.02616526372730732, -0.0508987121284008, 0.02014933153986931, -0.0002948066685348749, -0.030160490423440933, 0.010715519078075886, 0.003712326753884554, -0.007055153138935566, -0.02290903963148594, -0.036719124764204025, 0.007366918958723545, -0.018405750393867493, -0.023717323318123817, -0.022216226905584335, -0.03041452169418335, -0.0301835834980011, 0.017597468569874763, -0.012401365675032139, 0.011847114190459251, -0.022135397419333458, 0.03942110016942024, 0.0239944476634264, 0.004153995309025049, 0.007037832401692867, -0.0032475641928613186, -0.03136136755347252, -0.007522802334278822, 0.0603671669960022, -0.02380969747900963, 0.02662714011967182, -0.011598856188356876, -0.018902268260717392, -0.013486773706972599, -0.0010341687593609095, 0.04341632500290871, -0.01034601777791977, 0.006425847299396992, 0.03410952910780907, 0.010473034344613552, 0.02810514345765114, 0.024825824424624443, 0.022539539262652397, 0.0006960612954571843, 0.007349598687142134, 0.018682876601815224, 0.005236517172306776, 0.007950037717819214, 0.012147333472967148, -0.041291698813438416, 0.014329697005450726, 0.018232546746730804, -0.008931523188948631, 0.018648235127329826, -0.010097759775817394, 0.021996835246682167, -0.002302162116393447, -0.0024392816703766584, 0.014179587364196777, -0.025518639013171196, -0.009687844663858414, 0.027135202661156654, 0.018267188221216202, 0.017054764553904533, -0.02138485014438629, 0.023786604404449463, 0.007488161325454712, 0.06748005747795105, 0.01777067221701145, -0.0006960612954571843, -0.00799622479826212, -0.027966579422354698, 0.006829988677054644, 0.007799927610903978, -0.027550891041755676, 0.002941571641713381, -0.017505092546343803, -0.01333666406571865, 0.04036794602870941, -0.018451938405632973, 0.008036638610064983, -0.02345174364745617, 0.02290903963148594, 0.0037642878014594316, 0.018602048978209496, 0.051222026348114014, -0.008486967533826828, -0.0038855301681905985, -0.0011850000591948628, 0.011483387090265751, 0.015172620303928852, 0.006154495291411877, 0.03949038311839104, 0.006812667939811945, -0.009895688854157925, -0.007020512130111456, -0.021754350513219833, -0.00273517076857388, 0.008198295719921589, 0.015126432292163372, -0.021350208669900894, -0.05191484093666077, -0.014676103368401527, 0.010767479427158833, -0.06064429506659508, 0.004064507316797972, 0.025934327393770218, -0.002292058663442731, -0.008163655176758766, 0.02734304778277874, -0.007257223594933748, 0.014618368819355965, -0.04018319398164749, 0.020807504653930664, -0.004125128500163555, 0.0008140560821630061, 0.0380585677921772, -0.0434856079518795, 0.003989452496170998, -0.020033862441778183, -0.00967052485793829, -0.00727454386651516, -0.03480234369635582, -0.013556054793298244, 0.044316984713077545, 0.00012647458061110228, 0.014352791011333466, 0.01202031783759594, -0.012355177663266659, -0.009225969202816486, -0.06045954301953316, -0.042146168649196625, -0.0036112915258854628, -0.014791572466492653, -0.026003608480095863, 0.0023497932124882936, -0.025772670283913612, 0.006945457309484482, 0.002749604405835271, 0.024872012436389923, 0.011916396208107471, 0.0023743303027004004, 0.014976322650909424, -0.024594886228442192, 0.049605462700128555, 0.023786604404449463, 0.009093180298805237, 0.014514447189867496, -0.016985483467578888, -0.010906042531132698, -0.0019167845603078604, 0.029860271140933037, 0.01220506802201271, -0.005738806910812855, -0.013463679701089859, 0.007759513333439827, 0.018971549347043037, 0.020091596990823746, 0.03697315976023674, 0.0029444582760334015, 0.012655396945774555, -0.03189252316951752, 0.00402409303933382, 0.01034601777791977, 0.03149992972612381, 0.014479806646704674, -0.005787881091237068, 0.0017378077609464526, 0.015900075435638428, -0.010455713607370853, 0.011079246178269386, -0.005484775174409151, 0.042908262461423874, 0.05607172101736069, -0.009976517409086227, 0.0006430177018046379, -0.010063119232654572, -0.01848657988011837, -0.019918393343687057, -0.012378271669149399, 0.009231742471456528, 0.004399367142468691, 0.0004669275658670813, -0.011310183443129063, 0.020403362810611725, -0.018024703487753868, 0.014999416656792164, 0.006714519578963518, 0.004783301148563623, 0.011489160358905792, -0.02341710403561592, -0.04117622971534729, 0.018024703487753868, 0.03574918583035469, -0.01617719978094101, -0.017331888899207115, -0.015553668141365051, -0.0252184197306633, 0.008671718649566174, -0.03443283960223198, -0.004517722874879837, 0.019918393343687057, 0.03249296173453331, -0.009762899950146675, -0.009555055759847164, -0.03401715308427811, -0.011131206527352333, 0.023347821086645126, 0.019872207194566727, -0.04420151561498642, -0.002351236529648304, -0.005631998181343079, -0.01721641980111599, 0.05108346417546272, -0.008966163732111454, 0.0266733281314373, 0.017458904534578323, -0.004292558412998915, -0.012366725131869316, 0.01785149984061718, -0.01636194996535778, -0.04505598545074463, 0.014422072097659111, 0.028451548889279366, 0.025726482272148132, 0.014930135570466518, -0.014583728276193142, 0.013729258440434933, -0.03831259906291962, -0.009607017040252686, -0.0037787214387208223, -0.01844039186835289, 0.016823826357722282, -0.02441013604402542, 0.03203108534216881, 0.012690037488937378, -0.0019658589735627174, 0.02014933153986931, 0.01766674965620041, 0.023763509467244148, -0.006980098318308592, 0.002937241457402706, 0.021500319242477417, 0.011506481096148491, 0.04780414700508118, 0.01181824691593647, -0.00835995189845562, 0.03249296173453331, -0.037619784474372864, 0.005196102894842625, -0.047111332416534424, -0.006402753293514252, -0.015530574135482311, 0.01329047605395317, 0.0028694034554064274, -0.010455713607370853, -0.011835567653179169, 0.005453021265566349, -0.0005607461207546294, 0.0029877591878175735, -0.03574918583035469, 0.02563410811126232, -0.03962894529104233, -0.043370138853788376, 0.009664751589298248, 0.008856468833982944, 0.010657784529030323, -0.007828795351088047, -0.018475031480193138, 0.007938490249216557, -0.014999416656792164, -0.021673522889614105, -0.00014388513227459043, -0.013902462087571621, -0.019906846806406975, 0.0028535265009850264, 0.015669137239456177, -0.03819712996482849, -0.01862514205276966, -0.01992994174361229, -0.026788797229528427, -0.024733450263738632, -0.023290088400244713, 0.01712404564023018, 0.0028751769568771124, 0.03036833368241787, -0.039698224514722824, -0.020137785002589226, -0.023382462561130524, 0.012239708565175533, 0.0032100367825478315, -0.028543924912810326, 0.007534348871558905, 0.0048814499750733376, -0.006853082217276096, -0.0046216449700295925, 0.01668526418507099, -0.03621106222271919, -0.00639698002487421, 0.0012405695160850883, -0.0022588614374399185, -0.033740028738975525, -0.011506481096148491, 0.007609403692185879, 0.03990606963634491, -0.0175397340208292, -0.012920975685119629, 0.0029819856863468885, 0.032885558903217316, 0.02313997782766819, 0.004789074882864952, 0.017874592915177345, -0.005871596280485392, -0.0030021928250789642, -0.015184166841208935, 0.0031523024663329124, -0.008400366641581059, 0.005213423166424036, 0.013186554424464703, 0.007545895874500275, 0.01452599372714758, 0.004410914145410061, -0.03055308386683464, -0.02034563012421131, 0.031061148270964622, 8.984927990240976e-05, -0.006298831198364496, 0.012135786935687065, 0.002697643358260393, 0.01452599372714758, -0.005002692341804504, -0.008492741733789444, -0.04062197729945183, -0.02069203555583954, 0.014687650837004185, -0.042330916970968246, 0.01362533587962389, -0.01037488505244255, 0.01197412982583046, 0.015288089402019978, -0.011090792715549469, 0.009162461385130882, 0.014722291380167007, -0.010738612152636051, 0.0038075887132436037, -0.00854470208287239, 0.01333666406571865, 0.003389013698324561, -0.013556054793298244, 0.002335359575226903, -0.015692230314016342, 0.02349793165922165, 0.004532156512141228, 0.002255974570289254, 0.01060004997998476, 0.012863241136074066, -0.004549476783722639, -0.024063728749752045, 0.034779246896505356, -0.00987259577959776, 0.013879368081688881, -0.0038018152117729187, -0.00490165688097477, -0.014976322650909424, 0.008556249551475048, -0.0073957862332463264, 0.028797956183552742, -0.006922363769263029, 0.039167068898677826, 0.011494934558868408, 0.027897298336029053, -0.02182363159954548, 0.0023844337556511164, 0.02824370563030243, 0.007534348871558905, 0.017516639083623886, -0.012863241136074066, 0.0032158102840185165, 0.011772059835493565, -0.028012767434120178, -0.01279396004974842, -0.003671912709251046, 0.02268964983522892, -0.016742998734116554, -0.005663752090185881, 0.03445593640208244, -0.030899491161108017, 0.00854470208287239, 0.0050546531565487385, 0.027804924175143242, 0.027666360139846802, 0.022077662870287895, 0.007626724429428577, 0.0008003441616892815, 0.00859089009463787, 0.02932911366224289, 0.0038913036696612835, -0.040829822421073914, 0.019133204594254494, 0.010744386352598667, 0.009607017040252686, -0.020530380308628082, 0.008954617194831371, 0.01906392350792885, -0.004335859324783087, 0.005323118530213833, 0.04355488717556, -0.016754545271396637, 0.026950452476739883, -0.0008306547533720732, -0.0033688065595924854, -0.02937530167400837, -0.029306020587682724, 0.00815788097679615, 0.015103339217603207, -0.032700806856155396, 0.016281122341752052, 0.010548088699579239, -0.006466261111199856, 0.04230782389640808, -0.014860854484140873, -0.04704204946756363, 0.03401715308427811, -0.037619784474372864, -0.007355372421443462, -0.012470646761357784, 0.001590584754012525, -0.017251061275601387, -0.02526460587978363, 0.0385897234082222, -0.028821051120758057, 0.018001610413193703, 0.011385238729417324, 0.017320342361927032, 0.0030454935040324926, -0.0175397340208292, 0.02838226780295372, -0.015669137239456177, 0.009000805206596851, 0.012112692929804325, -0.007037832401692867, -0.05879678949713707, -0.014860854484140873, -0.051776278764009476, -0.034409746527671814, -0.053300466388463974, 0.005629111547023058, 0.007251450326293707, -0.006321925204247236, 0.025010574609041214, 0.02909817546606064, 0.014041024260222912, -0.051452964544296265, 0.003602631390094757, 0.012424458749592304, -0.027181390672922134, 0.0009244732791557908, -0.031523022800683975, -0.013775445520877838, 0.009583923034369946, -0.02146567776799202, -0.01645432598888874, -0.023925166577100754, 0.013775445520877838, 0.001978849060833454, -0.028451548889279366, 0.0003234934702049941, 0.013417492620646954, 0.03431737422943115, 0.001133760786615312, -0.0331626832485199, -0.00020567906904034317, 0.021407943218946457, -0.01594626158475876, 0.0008948843460530043, 0.0020972047932446003, 0.032331306487321854, -0.015738418325781822, -0.002951675094664097, -0.013394398614764214, -0.023717323318123817, 0.012124239467084408, 0.004696699790656567, 0.007921170443296432, -0.017689842730760574, -0.012332083657383919, -0.0035737641155719757, 0.028312986716628075, -0.015357370488345623, 0.047157518565654755, -0.014687650837004185, -0.024756543338298798, -0.0010615927167236805, -0.027089016512036324, -0.016234934329986572, 0.029536956921219826, 0.0301835834980011, -0.02441013604402542, -0.010981096886098385, 0.01202031783759594, 0.0031898298766463995, 0.007505482062697411, -0.006079440470784903, -0.006651011761277914, 0.008394592441618443, 0.02905198745429516, 0.02752779796719551, 0.035864654928445816, -0.01039220578968525, 0.018948454409837723, -0.004979598335921764, -0.0004568240256048739, 0.019849112257361412, -0.00727454386651516, -0.03669603168964386, 0.008140561170876026, 0.032331306487321854, 0.004644738510251045, -0.003143642097711563, -0.011604629456996918, -0.011645044200122356, -0.02427157387137413, 0.027989674359560013, 0.00908740609884262, 0.04283897951245308, -0.017204873263835907, 0.014156493358314037, 0.014283508993685246, -0.015622949227690697, -0.01595780998468399, 0.023878978565335274, -0.03937491402029991, -0.00838304590433836]
metadata : {"source": "pydantic_ai_docs", "crawled_at": "2025-03-15T11:17:49.954898", "url_path": "/api/models/test/", "chunk_size": 5000}
updated_dt: 2025-03-15T11:17:49.956426
---
```
@dataclass
classTestModel(Model):
"""A model specifically for testing purposes.
  This will (by default) call all tools in the agent, then return a tool response if possible,
  otherwise a plain response.
  How useful this model is will vary significantly.
  Apart from `__init__` derived by the `dataclass` decorator, all methods are private or match those
  of the base class.
  """
  # NOTE: Avoid test discovery by pytest.
  __test__ = False
  call_tools: list[str] | Literal['all'] = 'all'
"""List of tools to call. If `'all'`, all tools will be called."""
  custom_result_text: str | None = None
"""If set, this text is returned as the final result."""
  custom_result_args: Any | None = None
"""If set, these args will be passed to the result tool."""
  seed: int = 0
"""Seed for generating random data."""
  last_model_request_parameters: ModelRequestParameters | None = field(default=None, init=False)
"""The last ModelRequestParameters passed to the model in a request.
  The ModelRequestParameters contains information about the function and result tools available during request handling.
  This is set when a request is made, so will reflect the function tools from the last step of the last run.
  """
  _model_name: str = field(default='test', repr=False)
  _system: str | None = field(default=None, repr=False)
  async defrequest(
    self,
    messages: list[ModelMessage],
    model_settings: ModelSettings | None,
    model_request_parameters: ModelRequestParameters,
  ) -> tuple[ModelResponse, Usage]:
    self.last_model_request_parameters = model_request_parameters
    model_response = self._request(messages, model_settings, model_request_parameters)
    usage = _estimate_usage([*messages, model_response])
    return model_response, usage
  @asynccontextmanager
  async defrequest_stream(
    self,
    messages: list[ModelMessage],
    model_settings: ModelSettings | None,
    model_request_parameters: ModelRequestParameters,
  ) -> AsyncIterator[StreamedResponse]:
    self.last_model_request_parameters = model_request_parameters
    model_response = self._request(messages, model_settings, model_request_parameters)
    yield TestStreamedResponse(
      _model_name=self._model_name, _structured_response=model_response, _messages=messages
    )
  @property
  defmodel_name(self) -> str:
"""The model name."""
    return self._model_name
  @property
  defsystem(self) -> str | None:
"""The system / model provider."""
    return self._system
  defgen_tool_args(self, tool_def: ToolDefinition) -> Any:
    return _JsonSchemaTestData(tool_def.parameters_json_schema, self.seed).generate()
  def_get_tool_calls(self, model_request_parameters: ModelRequestParameters) -> list[tuple[str, ToolDefinition]]:
    if self.call_tools == 'all':
      return [(r.name, r) for r in model_request_parameters.function_tools]
    else:
      function_tools_lookup = {t.name: t for t in model_request_parameters.function_tools}
      tools_to_call = (function_tools_lookup[name] for name in self.call_tools)
      return [(r.name, r) for r in tools_to_call]
  def_get_result(self, model_request_parameters: ModelRequestParameters) -> _TextResult | _FunctionToolResult:
    if self.custom_result_text is not None:
      assert model_request_parameters.allow_text_result, (
        'Plain response not allowed, but `custom_result_text` is set.'
      )
      assert self.custom_result_args is None, 'Cannot set both `custom_result_text` and `custom_result_args`.'
      return _TextResult(self.custom_result_text)
    elif self.custom_result_args is not None:
      assert model_request_parameters.result_tools is not None, (
        'No result tools provided, but `custom_result_args` is set.'
      )
      result_tool = model_request_parameters.result_tools[0]
      if k := result_tool.outer_typed_dict_key:
        return _FunctionToolResult({k: self.custom_result_args})
      else:
        return _FunctionToolResult(self.custom_result_args)
    elif model_request_parameters.allow_text_result:
      return _TextResult(None)
    elif model_request_parameters.result_tools:
      return _FunctionToolResult(None)
    else:
      return _TextResult(None)
  def_request(
    self,
    messages: list[ModelMessage],
    model_settings: ModelSettings | None,
    model_request_parameters: ModelRequestParameters,
  ) -> ModelResponse:
    tool_calls = self._get_tool_calls(model_request_parameters)
    result = self._get_result(model_request_parameters)
    result_tools = model_request_parameters.result_tools
    # if there are tools, the first thing we want to do is call all of them
    if tool_calls and not any(isinstance(m, ModelResponse) for m in messages):
      return ModelResponse(
        parts=[ToolCallPart(name, self.gen_tool_args(args)) for name, args in tool_calls],
        model_name=self._model_name,
      )
    if messages:
      last_message = messages[-1]
      assert isinstance(last_message, ModelRequest), 'Expected last message to be a `ModelRequest