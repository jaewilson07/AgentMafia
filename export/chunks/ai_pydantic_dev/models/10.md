---
url: https://ai.pydantic.dev/models/
session_id: pydantic_ai_docs
chunk_number: 10
title: Implementing Custom Models in PydanticAI
summary: To create support for new models, subclass the Model base class and implement the StreamedResponse class for streaming. It is recommended to review existing implementations like OpenAIModel and refer to the contributing guidelines for adding new models. Additionally, FallbackModel can be used to invoke multiple models sequentially until one succeeds.
embedding: [-0.017153674736618996, 0.02813412807881832, 0.058579932898283005, -0.04846635460853577, -0.003946921322494745, 0.021711351349949837, -0.03412346541881561, 0.009410878643393517, 0.034018389880657196, 0.005043653305619955, -0.012536893598735332, -0.10344742983579636, -0.03593602776527405, -0.005503361113369465, -0.036172449588775635, 0.00726995337754488, 0.002879742067307234, 0.01264196913689375, -0.006206057965755463, 0.02774009294807911, 0.03577841445803642, 0.028685778379440308, 0.02844935655593872, -0.0022903308272361755, 0.0026137682143598795, 0.0048137991689145565, -0.04576064646244049, 0.04893919825553894, -0.007847871631383896, -0.006521285977214575, 0.01708800159394741, -0.008583405055105686, -0.07791393250226974, -0.02281465008854866, -0.0023280924651771784, 0.007368462160229683, -0.006212625186890364, -0.00125845056027174, 0.021987175568938255, 0.032547324895858765, 0.04258209466934204, -0.03475392237305641, 0.04245074838399887, 0.05458704009652138, -0.027661286294460297, 0.04857143014669418, 0.029867883771657944, -0.009627598337829113, -0.025888126343488693, 0.02080507017672062, -0.02240747958421707, 0.019517887383699417, -0.014329754747450352, -0.060681454837322235, -0.017823535948991776, -0.02402302622795105, -0.011210307478904724, 0.014986480586230755, -0.01647068001329899, -0.0458131842315197, -0.014618713408708572, -0.010763733647763729, -0.023642124608159065, -0.005697095301002264, 0.010980453342199326, -0.023024803027510643, -0.04195163771510124, -0.0009424013551324606, -0.02653171867132187, 0.050620414316654205, -0.024495868012309074, 0.0010737464763224125, -0.00551321217790246, 0.011755390092730522, -0.035147957503795624, -0.03091864474117756, 0.030209381133317947, 0.09525149315595627, 0.038904428482055664, -0.028974737972021103, -0.017928611487150192, 0.025244535878300667, 0.015065287239849567, -0.005693811923265457, 0.01591903157532215, -0.02188210003077984, -0.06583018600940704, 0.020069537684321404, -0.053115975111722946, -0.09399057924747467, 0.0024939158465713263, 0.010875377804040909, -0.03932473435997963, 0.05020011216402054, 0.050935644656419754, 0.006646064110100269, 0.030629685148596764, -0.013180484995245934, 0.04218805953860283, 0.028712047263979912, 0.02500811405479908, -0.018309511244297028, -0.0362512581050396, 0.027057098224759102, 0.021094029769301414, -0.025165729224681854, 0.023720931261777878, 0.02952638640999794, -0.020253419876098633, 0.0016237542731687427, -0.057686783373355865, -0.023287493735551834, -0.029552655294537544, -0.0012174051953479648, -0.0731329694390297, -0.027214711531996727, -0.05167117714881897, 0.01820443570613861, 0.006048443727195263, -0.00071418919833377, -0.007939813658595085, 0.032626133412122726, 0.008570270612835884, 0.0005184028414078057, 0.017258750274777412, 0.006432628259062767, 0.0280027836561203, -0.02214479073882103, -0.06083906814455986, -0.060418762266635895, 0.02017461322247982, 0.01584022305905819, 0.016168586909770966, -0.012674805708229542, 0.0013265858869999647, -0.01080313790589571, -0.025297073647379875, -0.020555514842271805, -0.05069922283291817, 0.05104072019457817, 0.0011156128020957112, -0.0410584881901741, -0.027135904878377914, 0.029158620163798332, -0.023523913696408272, 0.025467822328209877, -0.005109325982630253, -0.021553736180067062, -0.026689331978559494, 0.025927530601620674, 0.0077887666411697865, 0.02670246735215187, -0.020962683483958244, 0.013883180916309357, -0.059210386127233505, -0.0009563567582517862, 0.00022123446979094297, 0.037013061344623566, 0.02621649019420147, -0.02670246735215187, -0.020319093018770218, 0.04996369034051895, -0.04200417548418045, -0.015025883913040161, -0.016588890925049782, 0.006797110661864281, -0.05025264993309975, -0.006275014020502567, -0.029736539348959923, -0.049228157848119736, 0.011118365451693535, 0.021777024492621422, -0.02357645146548748, 0.005578884854912758, 0.029500117525458336, -0.05332612618803978, -0.06793170422315598, -0.0451827272772789, -0.002364212414249778, -0.048781584948301315, -0.0010515820467844605, 0.01610291376709938, -0.02643977664411068, 0.00921386107802391, -0.038326509296894073, -0.012786448933184147, 0.0034281080588698387, 0.03118133544921875, 0.009325504302978516, 0.05931546539068222, -0.0014078556559979916, 0.02460094355046749, 0.03593602776527405, -0.0007031069253571332, -0.02138298749923706, 0.003303330158814788, 0.03614618256688118, -0.01950475201010704, 0.07092637568712234, 0.03614618256688118, -0.01549872662872076, 0.033125244081020355, 0.030314458534121513, -0.02370779775083065, 0.0375647097826004, -0.026321565732359886, -0.04342270269989967, 0.03175925463438034, -0.04000772908329964, 0.020332226529717445, 0.010973886586725712, -0.03753843903541565, 0.027214711531996727, -0.0327574759721756, -0.026452910155057907, -0.026952022686600685, -0.058579932898283005, -0.0033624356146901846, -0.026111412793397903, 0.02554662898182869, 0.013778104446828365, 0.043554048985242844, 0.009233563207089901, -0.017482038587331772, -0.007755930535495281, 0.01469752099364996, 0.01985938474535942, -0.04938577115535736, -0.0027615316212177277, 0.024403925985097885, 0.01905817911028862, -0.0018782354891300201, 0.00016633630730211735, -0.01447423454374075, 0.012451519258320332, -0.06514719128608704, 0.03304643556475639, -0.00139800482429564, -0.013856912031769753, -0.027267251163721085, 0.017140541225671768, -0.0021195821464061737, 0.013554817996919155, 0.0046102143824100494, 0.023366300389170647, 0.01915012113749981, 0.014132737182080746, -0.043238818645477295, 0.006196206901222467, 0.03877308592200279, 0.055585261434316635, -0.02210538648068905, -0.006403075531125069, -0.01429035048931837, -0.02125164307653904, 0.0171799436211586, 0.010586418211460114, -0.017731593921780586, -0.08621494472026825, 0.008044890128076077, -0.04925442487001419, 0.026689331978559494, -0.0004945965483784676, 0.034018389880657196, -0.020634321495890617, -0.04300239682197571, -0.030577147379517555, -0.02549409121274948, 0.01358108688145876, -0.057686783373355865, 0.027661286294460297, 0.03467511758208275, 0.01820443570613861, -0.04132118076086044, -0.027030829340219498, 0.006166654173284769, 0.023195551708340645, 0.035541992634534836, -0.0028321295976638794, -0.05269566923379898, 0.023379433900117874, 0.004698872100561857, 0.03462257981300354, -4.050663483212702e-05, -0.002636753721162677, -0.002710635308176279, -0.004127521067857742, -0.04142625629901886, -0.00495499512180686, 0.004590512719005346, -0.013272426091134548, -0.01981998048722744, -0.01118403859436512, -0.05238044261932373, 0.002815711311995983, 0.010336861945688725, 0.027188442647457123, 0.025559764355421066, 0.012937496416270733, 0.004262149799615145, -0.004226029850542545, -0.011781658977270126, -0.054429423063993454, 0.012878390960395336, 0.018900565803050995, -0.01976744271814823, -0.007913544774055481, 0.014960210770368576, 0.006219192408025265, -0.03086610697209835, -0.016654564067721367, 0.0321270190179348, -0.035410650074481964, 0.0032885537948459387, -0.0011106872698292136, -0.05884262174367905, 0.044447194784879684, -0.03302016854286194, 0.055007342249155045, -0.007296222262084484, -0.053615085780620575, -0.011039558798074722, -0.016707101836800575, 0.009607897140085697, -0.035147957503795624, 0.0009038186981342733, 0.0024807811714708805, -0.02290659211575985, -0.025389015674591064, 0.016588890925049782, -0.030813569203019142, -0.033571816980838776, -0.000744973192922771, 0.025914395228028297, 0.024889903143048286, 0.006166654173284769, -0.07024338096380234, 0.044447194784879684, 0.0604713000357151, 0.03118133544921875, -0.06546241790056229, -0.0055558993481099606, -0.040060266852378845, -0.005296492483466864, -0.020831339061260223, 0.008872363716363907, -0.004757977556437254, 0.03488526865839958, -0.0030751179438084364, -0.0009407595498487353, 0.0166939664632082, -0.0026597389951348305, 0.027319788932800293, 0.03646140918135643, -0.02889592945575714, 0.0035331842955201864, -0.00881325826048851, 0.017679056152701378, 0.0002881383989006281, -0.013554817996919155, -0.06803677976131439, 0.028239203616976738, -0.01570887863636017, -0.013633625581860542, -0.013975122943520546, 0.0018519664881750941, 0.010842541232705116, -0.05689871311187744, 0.007421000394970179, 0.028291743248701096, -0.013751835562288761, 0.008268176577985287, -0.025743646547198296, -0.0032343741040676832, -0.030340727418661118, -0.007979216985404491, -0.03640887141227722, 0.003549602348357439, 0.015196632593870163, 0.029552655294537544, 0.06294059008359909, 0.007256818935275078, -0.004541258327662945, -0.03835278004407883, 0.0033361664973199368, 0.043054934591054916, -0.007178011815994978, -0.025113189592957497, -0.030944913625717163, 0.02326122298836708, 0.021225374191999435, -0.03714440390467644, -0.005674109794199467, 0.02210538648068905, -0.000967849453445524, 0.012510624714195728, 0.0070598009042441845, 0.015183498151600361, 0.046102143824100494, 0.04174148291349411, 0.02240747958421707, 0.0023888396099209785, -0.010980453342199326, 0.05668856203556061, -0.001044193864800036, 0.012320173904299736, 0.05484972894191742, 0.031522832810878754, -0.0049943989142775536, 0.014881404116749763, 0.06015607342123985, -0.03656648471951485, 0.03207448124885559, -0.05700378865003586, -0.008156533353030682, -0.00299631105735898, 0.018362050876021385, 0.0067774089984595776, 0.04570810869336128, 0.0321270190179348, -0.0035266168415546417, -0.12052229791879654, 0.00411438662558794, 0.01100672222673893, -0.08311520516872406, 0.03194313868880272, 0.021185969933867455, -0.04492003843188286, 0.02621649019420147, -0.04786216840147972, -0.027661286294460297, 0.0037696054205298424, 0.030445802956819534, -0.004603647161275148, 0.013088542968034744, -0.017416365444660187, 0.04111102968454361, -0.0007433313876390457, 0.012477788142859936, -0.015827089548110962, 0.03288882225751877, -0.015892760828137398, 0.0028075024019926786, 0.010015066713094711, 0.001306063262745738, 0.012937496416270733, -0.035279303789138794, 0.02697829157114029, 0.010080738924443722, 0.014907673001289368, -0.00355616956949234, 0.0015170363476499915, -0.028869660571217537, -0.023497644811868668, -0.025874992832541466, -0.03530557453632355, 0.062152519822120667, 0.0093911774456501, 0.12146798521280289, -0.008156533353030682, 0.048335012048482895, 0.012326741591095924, -0.0273723267018795, -0.011105231009423733, -0.02653171867132187, -0.006327551789581776, 0.058002013713121414, 0.024994980543851852, -0.0007293759845197201, -0.003740052692592144, 0.015039018355309963, 0.006363671738654375, 0.00142837839666754, -0.007355327717959881, 0.02106776088476181, -0.033703163266181946, 0.020332226529717445, 0.02554662898182869, -0.022959129884839058, 0.004863053560256958, 0.015761416405439377, 0.0025891410186886787, 0.007256818935275078, -0.007972650229930878, -0.0400865375995636, 0.06057637557387352, -0.014356023631989956, -0.020187746733427048, -0.006557405926287174, 0.008136831223964691, 0.01022521872073412, 0.008668779395520687, 0.05256432294845581, -0.01570887863636017, 0.030708493664860725, -0.033177781850099564, -0.028843391686677933, 0.021264778450131416, -0.03577841445803642, -0.021448660641908646, -0.03530557453632355, -0.01848025992512703, -0.023773469030857086, 0.060418762266635895, 0.016221124678850174, -0.0202140174806118, -0.0012707641581073403, 0.03060341626405716, 0.003224523039534688, 0.03814262896776199, -0.010258055292069912, 0.006701885722577572, 0.001609798870049417, 0.009647300466895103, 0.012536893598735332, 0.008320714347064495, -0.013009736314415932, 0.01453990675508976, -0.02067372389137745, 0.005194700323045254, 0.017258750274777412, -0.014211543835699558, 0.00015812723722774535, 0.01507842168211937, -0.00563470646739006, 0.007913544774055481, -0.0013315113028511405, -0.05353627726435661, -0.013712432235479355, -0.001929131685756147, 0.03703932836651802, 0.014132737182080746, 0.01651008427143097, -0.009016843512654305, -0.022565094754099846, 0.012392413802444935, 0.01968863606452942, -0.01699606142938137, -0.03814262896776199, -0.047757092863321304, -0.012543460354208946, 0.029316235333681107, -0.025914395228028297, 0.015958433970808983, -0.011328518390655518, 0.011361354030668736, 0.0019603262189775705, 0.00901027675718069, -0.014198409393429756, 0.0007191146141849458, 0.017928611487150192, 0.010041335597634315, 0.004577377811074257, -0.054639577865600586, 0.005148729309439659, 0.0037466201465576887, -0.025822453200817108, -0.008136831223964691, -0.0065803914330899715, 0.0010712838266044855, 0.005900680087506771, 0.003239299403503537, 0.03307270631194115, 0.02643977664411068, -0.01937340758740902, 0.030761031433939934, 0.02058178372681141, 0.00977207813411951, -0.022525690495967865, -0.013515414670109749, 0.010133277624845505, 0.007480105385184288, -0.016247393563389778, 0.0032294485718011856, 0.012714209035038948, -0.0068627833388745785, 0.03157537057995796, -0.01825697347521782, -0.00605172710493207, 0.036802906543016434, -0.005900680087506771, -0.0056478409096598625, 0.007086070254445076, 0.03244224935770035, -0.04778335988521576, -0.03315151110291481, -0.02638723887503147, 0.0018470409559085965, -0.011019856669008732, 0.014947076328098774, 0.014513637870550156, -0.04155760258436203, -8.152633381541818e-05, 0.009266399778425694, -0.015538129955530167, 0.017928611487150192, 0.014684386551380157, 0.002544811926782131, -0.03202194347977638, 0.016089780256152153, 0.036487679928541183, -0.037328287959098816, 0.014369158074259758, 0.03475392237305641, -0.006002472713589668, 0.015761416405439377, 0.022065982222557068, 0.003700649132952094, -0.029447579756379128, -0.013259291648864746, 0.03173298388719559, -0.01744263432919979, 9.59435201366432e-05, -0.04061191529035568, -0.010704629123210907, -0.024994980543851852, -0.07029591500759125, 0.011926138773560524, 0.04494630545377731, -0.012024647556245327, -0.011873600073158741, 0.014947076328098774, 0.029736539348959923, 0.0013356158742681146, -0.00026474252808839083, -0.007512941956520081, 0.005690528079867363, 0.010409101843833923, -0.007480105385184288, 0.01438229251652956, 0.0078019010834395885, 0.033309128135442734, 0.02272270806133747, 0.008629375137388706, -0.02742486447095871, 0.004580661654472351, -0.007322491612285376, -0.03380823880434036, -0.0045182728208601475, -0.033887043595314026, -0.003204821376129985, 0.00609441427513957, -0.0002425780548946932, -0.02692575380206108, 0.011972108855843544, -0.002754964167252183, -0.006606660317629576, 0.028029052540659904, 0.0037466201465576887, -0.02263076789677143, 0.009437148459255695, -0.02647917903959751, -0.0014784537488594651, 0.04021788015961647, 0.02316928282380104, -0.02710963599383831, 0.02232867293059826, 0.004288418684154749, -0.019491618499159813, 0.031969405710697174, -0.049674730747938156, 0.026715600863099098, -0.008918334729969501, 0.015577533282339573, 0.009456849656999111, 0.008202503435313702, 0.014053929597139359, 0.034202273935079575, 0.030340727418661118, -0.03412346541881561, -0.03512169048190117, -0.012720776721835136, 0.013430040329694748, 0.016037240624427795, -0.006616511382162571, -0.0037105001974850893, 0.013436608016490936, -0.04027041792869568, -0.029894152656197548, 0.05490226671099663, -0.04255582392215729, 0.02246001921594143, -0.07733601331710815, 0.008800123818218708, 0.036487679928541183, -0.019531022757291794, -0.017416365444660187, -0.009732674807310104, -0.0031292978674173355, 0.03940354287624359, 0.0035200496204197407, -0.04536661133170128, -0.012431817129254341, 0.0064063589088618755, 0.026334699243307114, 0.0018453991506248713, -0.02482423186302185, 0.019609829410910606, -0.03635633364319801, -0.04662752524018288, -0.003887816099449992, -0.0017304721986874938, -0.0018519664881750941, 0.007762497756630182, -0.0179811492562294, -0.012155992910265923, -0.003589005907997489, 0.046496178954839706, 0.011709419079124928, -0.028974737972021103, -0.05684617534279823, 0.01901877671480179, 0.00021117835422046483, 0.03304643556475639, -0.04418450593948364, 0.0019455498550087214, 0.009292668662965298, 0.030892375856637955, 0.0042588659562170506, -0.02264390140771866, -0.01022521872073412, 0.01647068001329899, -0.024272581562399864, 0.009515955112874508, 0.0006526211509481072, -0.02227613516151905, -0.024929307401180267, 0.06346596777439117, -0.01918952539563179, 0.016313066706061363, -0.0019045044900849462, -0.019714904949069023, -0.0004810515674762428, -0.01228077057749033, -0.008360117673873901, -0.0327574759721756, -0.013528549112379551, 0.018808623775839806, -0.012694507837295532, 0.023458242416381836, 0.017285019159317017, -0.014526772312819958, -0.021632544696331024, 0.0038287106435745955, 0.033256590366363525, -0.013870046474039555, -0.0006612406577914953, 0.06393881142139435, -0.009345206432044506, -0.002704068087041378, -0.020187746733427048, 0.009988797828555107, 0.007972650229930878, -0.011078962124884129, 0.00901027675718069, -0.008340416476130486, 0.027713824063539505, 0.028738316148519516, -0.061049219220876694, -0.004492003470659256, 0.03168044611811638, 0.011591208167374134, 0.0010261338902637362, 0.040060266852378845, -0.010304026305675507, -0.006751140113919973, 0.004084833897650242, 0.0021310748998075724, -0.005946651101112366, -0.009765511378645897, 0.006590242497622967, -0.027135904878377914, -0.022446883842349052, 0.026321565732359886, 0.05014757439494133, -0.03619872033596039, 0.02742486447095871, 0.014566175639629364, 0.04473615437746048, -0.024220043793320656, 0.011972108855843544, -0.0007634435896761715, 0.019846249371767044, 0.010409101843833923, 0.016037240624427795, 0.007184579037129879, -0.003786023473367095, -0.020095806568861008, -0.0585273914039135, -0.04074326157569885, -0.010678359307348728, -0.01156493928283453, 0.0010934482561424375, 0.0037499037571251392, 0.01565634086728096, -0.007342193275690079, 0.01460557896643877, -0.09194159507751465, -0.019780578091740608, 0.020647455006837845, 0.001146807218901813, 0.005667542573064566, -0.005030518863350153, -0.010336861945688725, 0.01744263432919979, -0.011735687963664532, -0.026676196604967117, 0.0029240711592137814, 0.006504868157207966, -0.015577533282339573, -0.009522522799670696, 0.054376885294914246, -0.008695048280060291, 0.007289655040949583, -0.021107163280248642, 0.024640347808599472, -0.023628991097211838, -0.006238894071429968, 0.009502820670604706, -0.049806077033281326, -0.009384609758853912, -0.04405315965414047, -0.0027861588168889284, -0.02563857100903988, -0.008780422620475292, 0.030629685148596764, 0.0009530731476843357, -0.009489686228334904, -0.006248745135962963, 0.027923977002501488, 4.748434730572626e-05, -0.01870354823768139, 0.0429498590528965, 0.0030242218635976315, 0.0031457161530852318, 0.01460557896643877, -0.052590593695640564, 0.006258595734834671, 0.004180058836936951, 0.0280027836561203, 0.005204550921916962, 0.017954880371689796, -0.005096191540360451, -0.012865256518125534, -0.0004032706201542169, -0.01140732504427433, -0.01415900606662035, 0.0005184028414078057, 0.02067372389137745, -0.038825623691082, 0.03995519131422043, 0.030655955895781517, 0.037013061344623566, -0.055637799203395844, 0.01429035048931837, -0.020069537684321404, -0.00782817043364048, -0.004291702527552843, 0.024075563997030258, -0.017876073718070984, -0.011715985834598541, -0.014106467366218567, 0.008898632600903511, -0.009259832091629505, 0.014027660712599754, -0.01641814224421978, -0.0033148229122161865, 0.011420459486544132, 0.017994284629821777, -0.014736924320459366, 0.004718574229627848, -0.002549737459048629, -0.005280074663460255, 0.0187823548913002, 0.02013520896434784, -0.029736539348959923, -0.007368462160229683, 0.035541992634534836, -0.01476319320499897, -0.0027680988423526287, 0.007309356704354286, -0.03015684336423874, -0.0023428688291460276, 0.014277216047048569, -0.013935718685388565, 0.031601641327142715, 0.018848028033971786, 0.032810013741254807, -0.011518968269228935, -0.014185274951159954, -0.0022574944887310266, -0.03822143375873566, -0.001024492084980011, -0.02584872394800186, 0.003490497125312686, 0.0198987890034914, -0.01078343577682972, 0.03932473435997963, 0.018453991040587425, -0.03425481170415878, 0.014014526270329952, 0.015262304805219173, 0.002789442427456379, -0.021685082465410233, -0.005690528079867363, 0.008826393634080887, -0.012070618569850922, 0.031654179096221924, 0.010987021028995514, 0.011302249506115913, -0.002861682092770934, -0.032415978610515594, -0.011177470907568932, 0.06709109246730804, 0.0035857222974300385, -0.027319788932800293, 0.012694507837295532, 0.003318106522783637, 0.0197280403226614, 0.0012641969369724393, 0.04893919825553894, -0.00259570823982358, 0.02066059038043022, -0.011446728371083736, -0.004675887059420347, -0.0032310904935002327, 0.0069547249004244804, -0.000142529999720864, 0.016168586909770966, -0.02119910530745983, 0.029946690425276756, -0.006606660317629576, -0.029684001579880714, 0.007086070254445076, -0.028396818786859512, -0.01842772215604782, -0.019176390022039413, -0.00020143008441664279, -0.024666616693139076, 0.0034740788396447897, -0.029316235333681107, -0.01358108688145876, 0.018848028033971786, -0.008826393634080887, -0.0162342581897974, 0.004643050488084555, 0.008064591325819492, 0.015157229267060757, -0.007631152402609587, 0.005401568952947855, 0.019557291641831398, -0.011617477051913738, 0.024679752066731453, 0.0016245751176029444, -0.04696902260184288, -0.021724484860897064, 0.02043730393052101, -0.006455613300204277, 0.05301089584827423, -0.03060341626405716, -0.01170285139232874, 0.051250871270895004, -0.01236614491790533, 0.0082747433334589, 0.0006953083211556077, 0.02138298749923706, 0.015800820663571358, -0.027950245887041092, -0.0276875551789999, 0.016930388286709785, -0.009207294322550297, 0.061049219220876694, 0.06835200637578964, 0.03154910355806351, -0.007335626054555178, -0.008938036859035492, 0.06057637557387352, 0.010724330320954323, 0.01959669403731823, 0.020200882107019424, 0.0251394584774971, 0.0023839143104851246, -0.011243144050240517, 0.005959785543382168, 0.05505988001823425, -0.02142239175736904, 0.004649617709219456, 0.06089160591363907, 0.023826008662581444, -0.008865796960890293, 0.03091864474117756, -0.008149965666234493, 0.007736228406429291, 0.04599706828594208, 0.009397744201123714, -0.020647455006837845, -0.0027286952827125788, -0.03824770450592041, -0.0008734451839700341, -0.03170671686530113, -0.03906204551458359, 0.0002922429412137717, 0.01704859919846058, -0.02716217376291752, 0.00868191383779049, -0.03393958508968353, 0.03551572561264038, 0.005388434045016766, 0.022972265258431435, -0.018677279353141785, -0.0015121109317988157, -0.008655644953250885, -0.006921888794749975, -0.04541914910078049, -0.010422236286103725, -0.03391331434249878, 0.009594762697815895, -0.009870586916804314, -0.008149965666234493, -0.0280027836561203, -0.005963069386780262, 0.02419377490878105, -0.018322646617889404, -0.01086881011724472, 0.015722012147307396, 0.025480955839157104, -0.0086753461509943, 0.015577533282339573, 0.005332612432539463, -0.03843158856034279, -0.00026207457995042205, 0.011118365451693535, -0.04428958147764206, 0.013154215179383755, -0.01803368702530861, 0.0005848963046446443, 0.022079117596149445, 0.008268176577985287, 0.03320404887199402, -0.01523603592067957, -0.02638723887503147, 0.02433825470507145, 0.012714209035038948, 0.004537974484264851, 0.03485899791121483, 0.008695048280060291, -0.0024216759484261274, -0.01178822573274374, 0.0276875551789999, 0.021908368915319443, 0.010855675674974918, 0.023628991097211838, -0.014461099170148373, 0.028423087671399117, 0.020608052611351013, -0.016037240624427795, 0.022302404046058655, -0.002610484603792429, 0.013554817996919155, 0.023826008662581444, 0.018440857529640198, -0.012136290781199932, -0.03730201721191406, -0.0023904815316200256, 0.017468903213739395, 0.016181720420718193, 0.024548405781388283, -0.030813569203019142, 0.029631463810801506, -0.00062922528013587, 0.045786913484334946, -0.015813954174518585, -0.017193078994750977, -0.026781274005770683, -0.0035266168415546417, 0.006915321573615074, -0.036172449588775635, -0.003979757893830538, 0.01660202443599701, -0.017416365444660187, -0.04625975713133812, 0.035988569259643555, 0.002009580610319972, -0.010757166892290115, -0.04032295569777489, -0.0024495867546647787, 0.01000193227082491, 0.03995519131422043, 0.030629685148596764, -0.00407169945538044, -0.04200417548418045, 0.025467822328209877, 0.013856912031769753, 0.03128641098737717, -0.014736924320459366, 0.006156803108751774, -0.04195163771510124, 0.010100441053509712, -0.011840764433145523, -0.016116049140691757, -0.02541528455913067, -0.007401298265904188, -0.00441648019477725, -0.00011533744691405445, -0.06252028793096542, 0.01900564134120941, -0.00990999024361372, -0.05012130364775658, 0.005516495555639267, 0.029867883771657944, 0.004183342680335045, 0.0028386968187987804, 0.02353704907000065, -0.005618288181722164, -0.01038283295929432, -0.01937340758740902, -0.006915321573615074, -0.012136290781199932, 0.01514409389346838, 0.004140655510127544, 0.007946380414068699, 0.030708493664860725, -0.03609364479780197, -0.025152593851089478, -0.0009448640630580485, -0.008721317164599895, -0.01545932237058878, 0.03622498735785484, -0.00711233913898468, 0.025980068370699883, 0.011230009607970715, -0.05779185891151428, -0.014815731905400753, -0.04723171144723892, 0.007762497756630182, 0.0032064630649983883, -0.020542379468679428, 0.0024758558720350266, -0.006698601879179478, 0.005946651101112366, 0.003602140350267291, -0.012825852259993553, -0.006455613300204277, 0.003078401554375887, 0.019872520118951797, 0.013449742458760738, 0.00581530574709177, 0.06730125099420547, -0.014145871624350548, -0.012037781998515129, 0.0012338233646005392, 0.01816503331065178, -0.0008422507089562714, 0.0011640462325885892, 0.029500117525458336, 0.007223982363939285, -0.02312987856566906, -0.004498571157455444, 0.05532257258892059, 0.017061732709407806, 0.006875917781144381, 0.020791934803128242, 0.030209381133317947, 0.011886734515428543, -0.009581627324223518, 0.026899484917521477, 0.01358108688145876, 0.0189268346875906, 0.02805532142519951, -0.008097427897155285, -0.019031910225749016, 0.03412346541881561, -0.007026964798569679, 0.02299853414297104, -0.005398285109549761, 0.03128641098737717, 0.061574600636959076, -0.005664259195327759, -0.02683381177484989, -0.0330989733338356, 0.013121379539370537, -0.015130959451198578, 0.004209611564874649, 0.004938577301800251, -0.006540987640619278, -0.007854439318180084, 0.015052152797579765, -0.014014526270329952, -0.002863324014469981, 0.004659468773752451, -0.02402302622795105, -0.0024085415061563253, 0.011834196746349335, -0.01565634086728096, -0.020831339061260223, 0.01744263432919979, 0.007834737189114094, 0.010573283769190311, -0.015984702855348587, -0.010632389225065708, -0.006823380012065172, -0.014933941885828972, -0.008077725768089294, -0.03091864474117756, 0.04607587307691574, 0.014776327647268772, 0.003983041271567345, 0.00011708187957992777, -0.004084833897650242, -0.016431275755167007, 0.010093873366713524, 0.00912848673760891, -0.03315151110291481, 0.0064983004704117775, -0.004705439321696758, -0.021369853988289833, 0.053431201726198196, -0.02357645146548748, -0.00421617878600955, 0.0040618483908474445, -0.00872788392007351, 0.023628991097211838, 0.02026655524969101, -0.027135904878377914, -0.0013224813155829906, 0.018191302195191383, 0.026768138632178307, 0.02080507017672062, -0.013712432235479355, 0.00807115901261568, -0.014566175639629364, -0.024706020951271057, -0.014277216047048569, 0.012766747735440731, 0.0087475860491395, -0.014881404116749763, 0.014894538559019566, 0.019964460283517838, 0.019045045599341393, 0.014947076328098774, 0.009016843512654305, -0.003365719225257635, 0.022709574550390244, 0.014106467366218567, 0.017915476113557816, -0.007578614633530378, 0.04379046708345413, 0.017731593921780586, -0.007164877373725176, -0.04710036516189575, 0.018637875095009804, -0.007250251714140177, 0.03207448124885559, -0.03759097680449486, -0.011328518390655518, -0.015052152797579765, 0.026492314413189888, -0.0012050915975123644, -0.022079117596149445, 0.00881325826048851, 0.009089083410799503, -0.013975122943520546, 0.0061042653396725655, -0.022512556985020638, 0.02424631267786026, -0.0037630381993949413, -0.03015684336423874, 0.007775632198899984, 0.0034937807358801365, 0.006836514454334974, -0.0049812644720077515, -0.010908213444054127, 0.03814262896776199, 0.006248745135962963, -0.02584872394800186, -0.025349611416459084, -0.004324538633227348, -0.009036545641720295, 0.016982926055788994, -0.004163641016930342, -0.04946457967162132, -0.013594221323728561, -0.0063833738677203655, -0.008760720491409302, -0.016405006870627403, -0.021908368915319443, 0.0007031069253571332, -0.014684386551380157, 0.01664142869412899, -0.008878931403160095, -0.018808623775839806, -0.02134358510375023, 0.007263386156409979, 0.020253419876098633, -0.010599552653729916, -0.0005381046212278306, 0.038536664098501205, -0.011486132629215717, -0.010054470039904118, 0.021711351349949837, 0.005720080807805061, -0.009969095699489117, -0.03412346541881561, 0.0076048835180699825, -0.025428418070077896, -0.0623626708984375, -0.023340031504631042, 0.00617322139441967, 0.0010926274117082357, -0.010770301334559917, -0.002347794361412525, -0.007466970942914486, 0.02048984169960022, 0.027897706255316734, 0.0283180121332407, 0.012307039462029934, 0.010652090422809124, 0.01857220195233822, -0.019872520118951797, -0.011144635267555714, 0.012090319767594337, 0.016746504232287407, -0.027398595586419106, 0.02209225296974182, -0.00367438024841249, 0.006655914708971977, -0.009456849656999111, -0.006347253918647766, -0.033256590366363525, 0.03987638279795647, -0.0014070348115637898, -0.014750058762729168, 0.03383450582623482, 0.026242759078741074, -0.0016270378837361932, -0.01266167126595974, -0.010041335597634315, -0.026006337255239487, -0.00780846830457449, -0.00937147531658411, 0.007493240293115377, 0.003372286446392536, 0.027792630717158318, -0.014644983224570751, -0.0166939664632082, 0.012425250373780727, -0.001182106207124889, -0.020122075453400612, -0.0016656204825267196, -0.02285405434668064, -0.011525535956025124, -0.01476319320499897, -0.0011500908294692636, 0.006156803108751774, 0.01080313790589571, 0.0023494360502809286, -0.006715020164847374, 0.00822877325117588, 0.0038976669311523438, -0.017770996317267418, 0.018506530672311783, 0.02322182059288025, -0.010573283769190311, 0.0461546815931797, 0.01736382767558098, 0.011466430500149727, -0.017968013882637024, -0.03564707189798355, 0.013725566677749157, 0.038090091198682785, 0.023248089477419853, 0.03774859383702278, -0.008635942824184895, 0.019649231806397438, 0.014132737182080746, 0.006590242497622967, 0.01803368702530861, 0.02205284871160984, 0.009469984099268913, -0.004370509646832943, -0.006258595734834671, 0.002544811926782131, -0.025349611416459084, -0.02290659211575985, 0.011853898875415325, 0.055007342249155045, -0.0028469059616327286, -0.022959129884839058, 0.03654021769762039, -0.02612454816699028, 0.0058218734338879585, -0.007880708202719688, 0.008268176577985287, 0.023852277547121048, 0.004567527212202549, -0.05695125088095665, 0.034070927649736404, 0.03803755342960358, 0.010290891863405704, -0.03730201721191406, -0.03010430559515953, -0.00726995337754488, -0.03449123352766037, -0.02240747958421707, -0.003930503036826849, -0.029132351279258728, 0.02774009294807911, -0.008484896272420883, 0.01312794629484415, 0.009279534220695496, -0.002840338507667184, 0.028081590309739113, 0.029053544625639915, -0.02889592945575714, -0.03766978532075882, -0.019228927791118622, -0.03730201721191406, 0.01060611940920353, 0.023011667653918266, 0.018243839964270592, -0.010126709938049316, -0.006994128692895174, 0.007007263135164976, -0.0011566581670194864, -0.01753457635641098, 0.0047087231650948524, -0.014960210770368576, -0.02500811405479908, -0.00868191383779049, -0.01976744271814823, -0.0020276405848562717, -0.0181256290525198, 0.0280027836561203, 0.004554392769932747, 0.008688480593264103, -0.004682454280555248, 0.01062582153826952, 0.02907981351017952, 0.004120953846722841, 0.034281082451343536, -0.039561156183481216, 0.02098895236849785, 0.02510005608201027, 0.027346057817339897, -0.031102528795599937, 0.013095110654830933, 0.0009309086599387228, -0.023523913696408272, -0.020108940079808235, 0.03780113160610199, -0.012497490271925926, 0.0006337402737699449, 0.03351927921175957, -0.0013988256687298417, 0.017495172098279, -0.06120683252811432, 0.02182956226170063, 0.01816503331065178, -0.029867883771657944, 0.024167506024241447, 0.006882485002279282, 0.0022230164613574743, 0.05180252343416214, -9.979151946026832e-05, -0.005700379144400358, -0.032993897795677185, -0.0009711331222206354, 0.007723093964159489, -0.0032081049866974354, -0.00992969237267971, -0.014658117666840553, 0.013607355765998363, 0.02035849541425705, -0.026426641270518303, -0.011958974413573742, 0.023996757343411446, -0.022565094754099846, 0.0010983736719936132, 0.006803677882999182, 0.00031789627973921597, 0.01816503331065178, 0.01704859919846058, 0.0018765936838462949, 0.00043549120891839266, -0.00928610097616911, 0.013975122943520546, 0.004741559270769358, -0.019557291641831398, -0.04097968339920044, -0.02406242862343788, 0.0018059955909848213, -0.013791239820420742, 0.0324685163795948, 0.0010458356700837612, 0.0008090039482340217, -0.03220582753419876, -0.018848028033971786, 0.005509928334504366, 0.029158620163798332, 0.028659509494900703, -0.013364368118345737, -0.02026655524969101, 0.0015687535051256418, -0.032232098281383514, 0.02227613516151905, -0.011190605349838734, 0.015643205493688583, -0.013646760024130344, -0.019084447994828224, 0.01116433646529913, 0.0017206212505698204, -0.012944063171744347, 0.01900564134120941, -0.014132737182080746, -0.028107859194278717, 0.010185815393924713, -0.009673569351434708, -0.0198987890034914, 0.010724330320954323, 0.02818666584789753, -0.02043730393052101, -0.014671252109110355, -0.004679170437157154, -0.012793016619980335, -0.0016106197144836187, 0.03207448124885559, -0.03569960966706276, -0.02322182059288025, -0.04339643195271492, 0.01188016775995493, -0.021501198410987854, -0.038326509296894073, 0.02121223881840706, 0.0008262430201284587, -0.027346057817339897, -0.004541258327662945]
metadata : {"source": "pydantic_ai_docs", "crawled_at": "2025-03-16T00:35:00.907773", "url_path": "/models/", "chunk_size": 4683}
updated_dt: 2025-03-16T00:35:00.909323
---
```

## Implementing Custom Models
To implement support for models not already supported, you will need to subclass the [`Model`](https://ai.pydantic.dev/api/models/base/#pydantic_ai.models.Model) abstract base class.
For streaming, you'll also need to implement the following abstract base class:
  * [`StreamedResponse`](https://ai.pydantic.dev/api/models/base/#pydantic_ai.models.StreamedResponse)


The best place to start is to review the source code for existing implementations, e.g. [`OpenAIModel`](https://github.com/pydantic/pydantic-ai/blob/main/pydantic_ai_slim/pydantic_ai/models/openai.py).
For details on when we'll accept contributions adding new models to PydanticAI, see the [contributing guidelines](https://ai.pydantic.dev/contributing/#new-model-rules).
## Fallback
You can use [`FallbackModel`](https://ai.pydantic.dev/api/models/fallback/#pydantic_ai.models.fallback.FallbackModel) to attempt multiple models in sequence until one returns a successful result. Under the hood, PydanticAI automatically switches from one model to the next if the current model returns a 4xx or 5xx status code.
In the following example, the agent first makes a request to the OpenAI model (which fails due to an invalid API key), and then falls back to the Anthropic model.
fallback_model.py```
frompydantic_aiimport Agent
frompydantic_ai.models.anthropicimport AnthropicModel
frompydantic_ai.models.fallbackimport FallbackModel
frompydantic_ai.models.openaiimport OpenAIModel
openai_model = OpenAIModel('gpt-4o', api_key='not-valid')
anthropic_model = AnthropicModel('claude-3-5-sonnet-latest')
fallback_model = FallbackModel(openai_model, anthropic_model)
agent = Agent(fallback_model)
response = agent.run_sync('What is the capital of France?')
print(response.data)
#> Paris
print(response.all_messages())
"""
[
  ModelRequest(
    parts=[
      UserPromptPart(
        content='What is the capital of France?',
        timestamp=datetime.datetime(...),
        part_kind='user-prompt',
      )
    ],
    kind='request',
  ),
  ModelResponse(
    parts=[TextPart(content='Paris', part_kind='text')],
    model_name='claude-3-5-sonnet-latest',
    timestamp=datetime.datetime(...),
    kind='response',
  ),
]
"""

```

The `ModelResponse` message above indicates in the `model_name` field that the result was returned by the Anthropic model, which is the second model specified in the `FallbackModel`.
Note
Each model's options should be configured individually. For example, `base_url`, `api_key`, and custom clients should be set on each model itself, not on the `FallbackModel`.
In this next example, we demonstrate the exception-handling capabilities of `FallbackModel`. If all models fail, a [`FallbackExceptionGroup`](https://ai.pydantic.dev/api/exceptions/#pydantic_ai.exceptions.FallbackExceptionGroup) is raised, which contains all the exceptions encountered during the `run` execution.
[Python >=3.11](https://ai.pydantic.dev/models/#__tabbed_8_1)[Python <3.11](https://ai.pydantic.dev/models/#__tabbed_8_2)
fallback_model_failure.py```
frompydantic_aiimport Agent
frompydantic_ai.exceptionsimport ModelHTTPError
frompydantic_ai.models.anthropicimport AnthropicModel
frompydantic_ai.models.fallbackimport FallbackModel
frompydantic_ai.models.openaiimport OpenAIModel
openai_model = OpenAIModel('gpt-4o', api_key='not-valid')
anthropic_model = AnthropicModel('claude-3-5-sonnet-latest', api_key='not-valid')
fallback_model = FallbackModel(openai_model, anthropic_model)
agent = Agent(fallback_model)
try:
  response = agent.run_sync('What is the capital of France?')
except* ModelHTTPError as exc_group:
  for exc in exc_group.exceptions:
    print(exc)

```

Since [`except*`](https://docs.python.org/3/reference/compound_stmts.html#except-star) is only supported in Python 3.11+, we use the [`exceptiongroup`](https://github.com/agronholm/exceptiongroup) backport package for earlier Python versions:
fallback_model_failure.py```
fromexceptiongroupimport catch
frompydantic_aiimport Agent
frompydantic_ai.exceptionsimport ModelHTTPError
frompydantic_ai.models.anthropicimport AnthropicModel
frompydantic_ai.models.fallbackimport FallbackModel
frompydantic_ai.models.openaiimport OpenAIModel

defmodel_status_error_handler(exc_group: BaseExceptionGroup) -> None:
  for exc in exc_group.exceptions:
    print(exc)

openai_model = OpenAIModel('gpt-4o', api_key='not-valid')
anthropic_model = AnthropicModel('claude-3-5-sonnet-latest', api_key='not-valid')
fallback_model = FallbackModel(openai_model, anthropic_model)
agent = Agent(fallback_model)
with catch({ModelHTTPError: model_status_error_handler}):
  response = agent.run_sync('What is the capital of France?')