---
url: https://ai.pydantic.dev/agents/
session_id: test
chunk_number: 3
title: Overview of Agents in Pydantic
summary: Agents in Pydantic are reusable components similar to FastAPI apps, designed to be instantiated once and reused across applications. There are four primary methods to run an agent: asynchronously with `agent.run()`, synchronously with `agent.run_sync()`, and additional methods for streaming and scheduling.
embedding: [-0.032502759248018265, 0.025003908202052116, 0.024934260174632072, -0.0510757640004158, 0.012641252018511295, 0.0284863468259573, 0.0010294958483427763, 0.004149905871599913, 0.03257240727543831, 0.014312822371721268, -0.0029571708291769028, -0.04076774790883064, -0.02094106376171112, -0.054511770606040955, -0.0055022528395056725, -0.01181707438081503, -0.01779526099562645, -0.0011339690536260605, 0.024330636486411095, 0.02962394431233406, 0.047825489193201065, -0.0108942287042737, 0.012269792146980762, 0.03946763649582863, -0.01685500331223011, 0.004654859658330679, -0.02746483124792576, 0.06226599961519241, -0.0268147774040699, -0.00037254838389344513, 0.022531377151608467, -0.0005114831728860736, -0.04557351395487785, 0.010487943887710571, 0.01200280524790287, -0.016669273376464844, 0.00432112580165267, 0.0026814776938408613, 0.0008343342342413962, 0.03640308976173401, 0.04921846464276314, -0.037146009504795074, 0.019223060458898544, 0.02128930762410164, -0.009019515477120876, -0.001206519897095859, -0.013221658766269684, 0.007574304006993771, 0.016065649688243866, 0.016483541578054428, -0.0367049016058445, 0.03691384941339493, -0.011317925527691841, -0.021091969683766365, -0.0430893711745739, -0.017354151234030724, 0.00028004610794596374, 0.018201544880867004, -0.0026147309690713882, -0.03742460533976555, 0.008973083458840847, 0.006744322832673788, 0.023866312578320503, 0.03027399815618992, -0.042044639587402344, 0.0013646805891767144, -0.04759332537651062, 0.032804571092128754, -0.03289743512868881, 0.00947223324328661, 0.005641550291329622, 0.01706394925713539, -0.044505562633275986, -0.023169824853539467, -0.049914952367544174, -0.01872391067445278, 0.049961384385824203, 0.036333441734313965, 0.0020647959318012, -0.02472531422972679, 0.008851197548210621, -0.00052018923452124, -4.0016300772549585e-05, 0.004817373119294643, 0.004472031258046627, -0.037401389330625534, -0.04847554489970207, -0.04171961545944214, -0.013709199614822865, -0.07461705058813095, -0.011381769552826881, 0.02783629111945629, -0.020360657945275307, 0.031992003321647644, 0.05929432064294815, 0.06551627814769745, 0.005696689244359732, -0.016019217669963837, 0.006703694351017475, 0.03440649434924126, 0.04264826327562332, -0.031086567789316177, -0.04434305056929588, 0.03440649434924126, -0.0025291210040450096, 0.012397481128573418, -0.0007298610871657729, 0.02839348278939724, -0.03589233383536339, -0.0273719672113657, -0.0796317607164383, -0.01070269476622343, -0.006065247114747763, 0.006314822006970644, -0.037053145468235016, -0.020407089963555336, 0.004347244277596474, -0.0018137700390070677, 0.046850405633449554, -0.027441615238785744, -0.032502759248018265, 0.03394216671586037, -0.028068454936146736, 0.027998805046081543, 0.022612635046243668, -0.0009816123638302088, 0.010064247064292431, -0.022926053032279015, 0.022426903247833252, -0.014649458229541779, 0.031086567789316177, -0.02486461028456688, -0.005476134363561869, -0.0268147774040699, -0.019095370545983315, -0.003993196412920952, -0.016866611316800117, -0.01838727481663227, -0.023935960605740547, 0.044041238725185394, -0.009774044156074524, -0.043739426881074905, -0.03642630577087402, 0.026164721697568893, 0.0024333540350198746, 0.05994437634944916, -0.05590474605560303, 0.03605484589934349, -0.02435385435819626, 0.016448717564344406, 0.057019125670194626, 0.02000080607831478, -0.03252597525715828, 0.004448815248906612, -0.0047593326307833195, 0.016355853527784348, -0.0055022528395056725, 0.01800420694053173, 0.0038074662443250418, -0.03733174130320549, -0.034592222422361374, 0.038330040872097015, -0.02818453498184681, -0.020407089963555336, -0.048893436789512634, -0.0028135201428085566, -0.019896332174539566, -0.0114514185115695, -0.026977291330695152, -0.038585420697927475, -0.0026800266932696104, -0.06361254304647446, -0.0005270816036500037, 0.015624540857970715, 0.03963015228509903, -0.03572981804609299, -0.09416513890028, -0.020999103784561157, -0.026489749550819397, -0.02716302126646042, -0.006825579330325127, -0.028625644743442535, -0.04090704396367073, -0.019095370545983315, -0.02218313328921795, 0.02038387395441532, 0.022670675069093704, -0.013442212715744972, -0.05423317477107048, 0.024469934403896332, 0.04274112731218338, 0.0359155498445034, 0.022194741293787956, 0.013395779766142368, -0.013674375601112843, 0.009460624307394028, 0.04726829752326012, -0.023982392624020576, 0.001451741554774344, 0.021231267601251602, 0.02145182155072689, 0.031736623495817184, 0.0268147774040699, 0.003256079973652959, 0.0021678179036825895, -0.04545743018388748, 0.010226760990917683, -0.001289227744564414, 0.005490644834935665, -0.006512159947305918, 0.030366864055395126, -0.03364035487174988, 0.00911238044500351, -0.0397462323307991, -0.03466187044978142, -0.03839968889951706, -0.047059353440999985, 0.04295007511973381, 0.0054616243578493595, 0.015392377972602844, 0.01023836899548769, 0.022450121119618416, -0.002024167450144887, -0.007336337119340897, 0.010429903864860535, 0.00653537642210722, 0.011567500419914722, -0.04234645143151283, -0.00639607897028327, 0.048382680863142014, 0.000398303905967623, -0.0008989044581539929, -0.013894929550588131, -0.04520205035805702, 0.03737817332148552, -0.06755930930376053, 0.036240577697753906, 0.004216652829200029, 0.008781549520790577, -0.007597520016133785, -0.019478440284729004, -0.003546283347532153, 0.028022022917866707, -0.02068568579852581, -0.003090664278715849, 0.018294410780072212, 0.003549185348674655, -0.04295007511973381, 0.06231243535876274, 0.05177225172519684, 0.03563695400953293, -0.021567903459072113, -0.017505057156085968, -0.020952671766281128, 0.0021794261410832405, -0.00396997993811965, -0.012397481128573418, -0.025955775752663612, -0.03916582465171814, 0.003296708455309272, 0.04842911288142204, 0.02328590489923954, -0.015148608013987541, 0.00209091417491436, 0.00532232690602541, -1.3727972145716194e-05, 0.005548685323446989, -0.027046939358115196, -0.0061639160849153996, -0.07122747600078583, 0.012931454926729202, 0.012095670215785503, 0.022461729124188423, -0.03229381516575813, -0.030970485880970955, 0.021126793697476387, 0.014370863325893879, 0.030575810000300407, 0.00902531947940588, -0.031109783798456192, 0.0034360059071332216, 0.036124493926763535, 0.041394587606191635, 0.036379873752593994, 0.004968279041349888, -0.021312523633241653, -0.004144101869314909, 0.007899331860244274, 0.02358771674335003, 0.02702372334897518, 0.023645756766200066, 0.02532893605530262, 0.03210808336734772, -0.005336836911737919, 0.04034985601902008, -0.01834084279835224, 0.04371621087193489, 0.019339142367243767, 0.007864506915211678, -0.026582613587379456, -0.007986392825841904, -0.04529491811990738, 0.016112081706523895, -0.008444913662970066, -0.00663984939455986, 0.044087670743465424, -0.02651296555995941, -0.019733818247914314, 0.037610337138175964, -0.023042134940624237, -0.012583211064338684, 0.07275974750518799, -0.018538180738687515, -0.011271492578089237, 0.0024638252798467875, -0.027255885303020477, 0.06621276587247849, -0.041696395725011826, 0.04014090821146965, -0.023448418825864792, -0.03524227812886238, -0.03426719456911087, 0.030366864055395126, 0.0025842594914138317, -0.05739058554172516, -0.031945571303367615, 0.03682098165154457, -0.0062045445665717125, -0.03698349744081497, 0.022902837023139, 0.0030848600436002016, -0.02962394431233406, -0.0017876517958939075, 0.02579326182603836, -0.0028294813819229603, 0.009187833406031132, -0.0547439344227314, 0.00817212276160717, 0.026675479486584663, 0.05664766579866409, -0.04406445473432541, 0.01261803600937128, -0.04448234662413597, -0.0062045445665717125, -0.024284204468131065, 0.05126149579882622, 0.00934454333037138, 0.010273193940520287, -0.05325809493660927, -0.012130494229495525, 0.04968278855085373, -0.0025958677288144827, 0.017481841146945953, 0.05725128948688507, -0.00742920208722353, -0.018271194770932198, -0.028370266780257225, 0.018654262647032738, -0.026745127514004707, -0.006372862495481968, -0.07512781023979187, -0.002270840108394623, 0.00038778403541073203, 0.006326430011540651, -0.06040870025753975, 0.00104037846904248, -0.012850197963416576, 0.0016846295911818743, -0.011201843619346619, 0.05780848115682602, 0.07076314836740494, 0.006941660773009062, -0.009327131323516369, -0.014556593261659145, -0.023935960605740547, -0.010377666912972927, -0.04162674769759178, -0.017168421298265457, -0.0017963579157367349, 0.05929432064294815, 0.006361254490911961, 0.06788433343172073, 0.014440511353313923, -0.017423801124095917, 0.019466832280158997, 0.04174283146858215, -0.03617092967033386, 0.0034911446273326874, -0.019513264298439026, 0.05335095897316933, 0.04571281000971794, -0.04856840893626213, -0.0056589627638459206, 0.006552788428962231, -0.01355829369276762, -0.0105750048533082, 0.016332637518644333, 0.0006663791136816144, 0.028022022917866707, 0.019698994234204292, -0.012095670215785503, 0.01276894100010395, -0.018932856619358063, 0.025514665991067886, 0.01417352445423603, 0.006790755316615105, 0.05112219601869583, 0.010685281828045845, 0.028788158670067787, 0.04483059048652649, 0.04847554489970207, -0.003929351456463337, 0.014904837124049664, -0.03426719456911087, -0.03510298207402229, -0.0005898380186408758, -0.04332153499126434, -0.028881022706627846, 0.04441269859671593, 0.04517883434891701, -0.00532232690602541, -0.10410169512033463, 0.018700694665312767, 0.02864886075258255, -0.03593876585364342, 0.04763975739479065, 0.02864886075258255, -0.03315281495451927, -0.02746483124792576, 0.0069474647752940655, 0.015520067885518074, 0.03568338602781296, 0.02264745905995369, -0.019176628440618515, -0.021742025390267372, -0.023425202816724777, 0.03777284920215607, 0.006192936562001705, -0.01682017743587494, -0.022206349298357964, 0.031179433688521385, -0.05061144009232521, 0.03494046628475189, 0.05307236313819885, -0.049961384385824203, 0.00010737518459791318, -0.04125528782606125, -0.026420099660754204, 0.04494667425751686, -0.022194741293787956, -0.01894446648657322, -0.010012011043727398, -0.04127850383520126, 0.006767538841813803, -0.03631022572517395, -0.02906675450503826, 0.0868287980556488, 0.01873551867902279, 0.04866127297282219, 0.006100071594119072, 0.02528250403702259, 0.001350895967334509, -0.02038387395441532, 0.013883321546018124, -0.000655133742839098, 0.030575810000300407, 0.02707015536725521, -0.01447533629834652, -0.007771641947329044, 0.04954349249601364, 0.019269492477178574, -0.025653963908553123, -0.012223359197378159, -0.00639607897028327, -0.010841991752386093, -0.006663065869361162, 0.017470233142375946, 0.03150445967912674, -0.029832890257239342, -0.01513699907809496, -0.0005103949224576354, -0.011776446364820004, 0.020291008055210114, 0.017899734899401665, -0.030041836202144623, 0.01327969878911972, -0.022380471229553223, -0.042671479284763336, 0.010075855068862438, 0.009129793383181095, 0.015903135761618614, 0.016355853527784348, 0.038306824862957, -0.010499551892280579, 0.05019354820251465, -0.023471634835004807, -0.03566017001867294, -0.018712302669882774, -0.034383274614810944, -0.013302914798259735, -0.0202677920460701, -0.015125391073524952, -0.00650055194273591, 0.04462164640426636, 0.007626540493220091, -0.04698970541357994, 0.0074582225643098354, 0.023727014660835266, 0.017296111211180687, 0.06407687067985535, -0.007696188986301422, -0.0018718107603490353, 0.023599324747920036, 0.012757332995533943, -0.017632747069001198, 0.004062844906002283, -0.01822476089000702, 0.01096387766301632, -0.01685500331223011, -0.014742323197424412, 0.009779848158359528, -0.014277998358011246, -0.004791255109012127, -0.006645653396844864, 0.022786756977438927, 0.0012652860023081303, 0.01753988116979599, -0.04360013082623482, -0.00780066242441535, 0.000307252659695223, 0.02915961854159832, 0.026257585734128952, 0.004588112700730562, 0.03993196040391922, -0.015067351050674915, 0.017980990931391716, -0.010482139885425568, 0.013767240568995476, -0.06537698209285736, -0.02366897463798523, -0.026373667642474174, 0.031992003321647644, -0.039955176413059235, 0.002835285384207964, -0.027232669293880463, -0.019907940179109573, 0.020616035908460617, -0.007899331860244274, 0.006274193525314331, -0.004791255109012127, 0.027279101312160492, 0.01822476089000702, 0.028811374679207802, -0.023912744596600533, 0.006297409534454346, 0.016785353422164917, -0.02001241408288479, -0.008056040853261948, 0.018039030954241753, -0.016495151445269585, 0.0021126794163137674, -0.002473982283845544, 0.02600220777094364, -0.023518068715929985, 0.010429903864860535, 0.02695407345890999, 0.02167237550020218, -0.030459729954600334, -0.032758139073848724, 0.007040329743176699, 0.017180029302835464, 0.0029774848371744156, 0.01228140015155077, -0.008212750777602196, 0.015403986908495426, -0.004846393596380949, 0.01228140015155077, 0.00994236208498478, -0.06584130227565765, 0.04385551065206528, -1.1511771845107432e-05, -0.021997403353452682, 0.03405825048685074, 0.00672691036015749, 0.016762137413024902, -0.0030036033131182194, -0.020929455757141113, 0.008584210649132729, 0.00780066242441535, -0.0024101375602185726, -0.001996598206460476, -0.02426098845899105, -0.011381769552826881, -0.02472531422972679, -0.044296618551015854, 0.0029745828360319138, 0.0007294983370229602, 0.009588314220309258, -0.05409387871623039, 0.019861508160829544, 0.06078016012907028, -0.006773342844098806, -0.03700671344995499, 0.04153388366103172, 0.0003968529053963721, 0.002888972871005535, 0.00537456339225173, 0.0009961224859580398, -0.03972301632165909, -0.022461729124188423, -0.0025175127666443586, -0.022496553137898445, -0.01634424552321434, -0.022496553137898445, -0.029856106266379356, 0.02563074789941311, -0.044969890266656876, 0.03384930267930031, 0.06616633385419846, 0.0051888334564864635, 0.007301512639969587, 0.04004804417490959, 0.009332935325801373, 0.008531974628567696, -0.007243472151458263, 0.0001871810673037544, -0.030970485880970955, -0.005403583869338036, -0.024841394275426865, 0.023274296894669533, -0.03997839614748955, 0.03754068911075592, 0.014521768316626549, 0.022705499082803726, -0.03563695400953293, -0.02025618404150009, -0.03229381516575813, -0.03350105881690979, -0.013941362500190735, -0.01677374541759491, 0.04044272005558014, -0.005809868220239878, -0.024377070367336273, 0.011178627610206604, -0.014185133390128613, -0.00426888931542635, 0.0006021716399118304, -0.008224358782172203, 0.022403687238693237, -0.03763355314731598, -0.027859508991241455, -0.030413296073675156, 0.015357553958892822, 0.009849497117102146, -0.0005706120864488184, 0.0012870512437075377, -0.0012072453973814845, -0.0015961176250129938, -0.03022756613790989, 0.014150308445096016, -0.027743427082896233, 0.0005191009840928018, 0.006941660773009062, 0.01015130802989006, -0.035753034055233, 0.009530273266136646, 0.039189040660858154, 0.03496368229389191, 0.02690764144062996, -0.005458722356706858, -0.03299030289053917, -0.008067648857831955, 0.033176030963659286, 0.019977588206529617, -0.00607685511931777, -0.0010084561072289944, 0.007574304006993771, -0.025514665991067886, -0.024284204468131065, 0.028718510642647743, -0.010679477825760841, -0.011178627610206604, -0.04673432558774948, 0.07062385231256485, 0.041092775762081146, -0.018584612756967545, -0.020465129986405373, 0.0003747248847503215, 0.01889803260564804, 0.022798364982008934, -0.019223060458898544, -0.002621985971927643, -0.042416103184223175, 0.051400791853666306, 0.02043030597269535, -3.845192622975446e-05, -0.007005505729466677, 0.027859508991241455, -0.027998805046081543, -0.053443823009729385, -0.015996001660823822, -0.009245874360203743, 0.013035927899181843, 0.006581808906048536, -0.02038387395441532, -0.03366357088088989, -0.00423406483605504, 0.007539479527622461, 0.007864506915211678, -0.023761838674545288, -0.022043835371732712, 0.014719107188284397, -0.020627643913030624, 0.023935960605740547, -0.02639688365161419, -0.009733416140079498, -0.01642550155520439, 0.0029919950757175684, -0.02507355809211731, -0.03217773139476776, -0.010859403759241104, 0.020534779876470566, -0.009919146075844765, 0.009710199199616909, 0.01629781164228916, -0.05766918137669563, -0.01630941964685917, 0.03774963319301605, -0.004448815248906612, 0.01940879039466381, -0.01570579782128334, -0.011846095323562622, 0.011753230355679989, -0.043437615036964417, -0.0071854316629469395, -0.031016919761896133, -0.055440422147512436, 0.013952970504760742, -0.03640308976173401, 0.0007400182075798512, -0.007115782704204321, -0.010157112032175064, -0.029020320624113083, -0.009832085110247135, -0.008909238502383232, -0.010162916034460068, 0.019014114513993263, 0.03886401280760765, -0.014219957403838634, 0.009269090369343758, -0.030807973816990852, 0.006773342844098806, 0.010522768832743168, 0.015810271725058556, 0.038887228816747665, 0.02349485270678997, 0.02890424057841301, -0.019048938527703285, -0.01685500331223011, -0.01579866372048855, -0.018201544880867004, 0.0040570409037172794, -0.010058443062007427, 0.037262093275785446, 0.005333934910595417, 0.016100473701953888, 0.026977291330695152, 0.00658761290833354, -0.01736575923860073, 0.01457980927079916, -0.03693706542253494, 0.023146608844399452, 0.0004614231002051383, 0.013848497532308102, 0.04750046133995056, -0.02818453498184681, 0.033268895000219345, -0.006605024915188551, 0.034290410578250885, -0.014011011458933353, -0.0020444816909730434, -0.009530273266136646, -0.018027422949671745, 0.02804523892700672, 0.011190235614776611, -0.021649159491062164, 0.029252484440803528, 0.002051736693829298, -0.031040135771036148, -0.022786756977438927, -0.05562615022063255, -0.017992598935961723, 0.012362657114863396, 0.0058127702213823795, 0.01019193697720766, 0.007765837945044041, 0.0017847497947514057, -0.05785491317510605, 0.0012834237422794104, 0.015206648036837578, -0.023912744596600533, 0.0033025124575942755, -0.019304318353533745, 0.010128092020750046, 0.018039030954241753, -0.01470749918371439, -0.014080659486353397, 0.009785652160644531, -0.0025842594914138317, -0.035404790192842484, -0.04060523211956024, 0.025003908202052116, 0.004405284766107798, 0.003386671422049403, -0.0022055443841964006, 0.03777284920215607, -0.01698269136250019, -0.029786458238959312, -0.0012768941232934594, -0.05051857605576515, 0.0062451730482280254, -0.01872391067445278, -0.007597520016133785, -0.009994599036872387, 0.029856106266379356, 0.048893436789512634, -0.0012377166422083974, -0.03809787705540657, -0.03027399815618992, 0.0026814776938408613, -0.011399182491004467, -0.038376472890377045, 0.04568959400057793, 0.01991954818367958, 0.053536687046289444, 0.032804571092128754, -0.019269492477178574, -0.017017515376210213, -0.010667869821190834, 0.018549788743257523, 0.011056742630898952, 0.0423000194132328, 0.012211751192808151, -0.03819074109196663, 0.007208647672086954, 0.011288904584944248, 0.010737518779933453, 0.009199441410601139, 0.010871012695133686, -0.0021707199048250914, 0.013349347747862339, 0.05065787211060524, 0.033686790615320206, -0.0521901473402977, -0.003131292760372162, 0.008578406646847725, 0.019350750371813774, 0.014208349399268627, 0.03085440583527088, -0.005943361669778824, -0.022334039211273193, 0.0032183537259697914, 0.0056589627638459206, -0.014893229119479656, 0.002752577420324087, 0.009924950078129768, -0.03507976233959198, -0.01672731339931488, 0.018793560564517975, -0.0018877718830481172, -0.00607685511931777, 0.0485219769179821, 0.018874816596508026, 0.00795737188309431, 0.019211452454328537, 0.003833584487438202, -0.02588612586259842, -0.002871560864150524, -0.03879436478018761, 0.017272895202040672, 0.027696995064616203, -0.026466533541679382, -0.0029586218297481537, -0.02247333712875843, -0.014277998358011246, -0.002473982283845544, 0.020279400050640106, 0.00981467217206955, -0.007411790080368519, 0.005563195329159498, 0.013186833821237087, -0.049775656312704086, -0.02022136002779007, -0.004306615795940161, 0.04360013082623482, 0.01498609408736229, 0.008816373534500599, 0.04494667425751686, 0.024330636486411095, -0.01419674139469862, 0.018410490825772285, -0.029832890257239342, 0.035219062119722366, -0.02997218817472458, -0.010551788844168186, -0.007916743867099285, -0.0064018829725682735, 0.00994236208498478, 0.012757332995533943, -0.03422076255083084, -0.0017296111909672618, -0.030204350128769875, 0.013488645665347576, 0.08306776732206345, -0.06774503737688065, -0.06556271016597748, -0.008294007740914822, -0.003604323836043477, -0.007086762227118015, 0.004765136633068323, -0.011312121525406837, -0.006343842018395662, 0.0050147115252912045, -0.03800501301884651, -0.021765241399407387, -0.014695890247821808, 0.0009794358629733324, -0.0004976984928362072, 0.03115621767938137, -0.03860863670706749, 0.03468508645892143, -0.04030342027544975, -0.011805466376245022, 0.03696028143167496, -0.04534135013818741, -0.011956372298300266, -0.007893526926636696, 0.006007206626236439, -0.031643759459257126, 0.007864506915211678, -0.001741219311952591, -0.055533286184072495, -0.010128092020750046, 0.0003010858199559152, -0.005284600425511599, -0.022554593160748482, 0.020917847752571106, 0.014591417275369167, 0.008781549520790577, 0.04192855954170227, 0.033477842807769775, -0.019443614408373833, 0.01885160058736801, -0.004634545184671879, -0.020151710137724876, -0.02788272500038147, 0.016541583463549614, -0.009129793383181095, 0.06379827111959457, 0.00893825851380825, -0.007887722924351692, -0.004904434084892273, -0.015821879729628563, -0.01215371023863554, -0.025143206119537354, -0.0028396383859217167, -0.011143803596496582, -0.011648756451904774, 0.0032386677339673042, 0.004547484219074249, 0.008056040853261948, 0.0627303272485733, 0.03691384941339493, 0.04422697052359581, 0.0039061352144926786, -0.020836589857935905, 0.05051857605576515, 0.00607685511931777, 0.03533514216542244, -0.012699292972683907, -0.002336135832592845, -0.008166318759322166, -0.007638148497790098, -0.001971930731087923, 0.0371924452483654, -0.003967077936977148, 0.008781549520790577, 0.03733174130320549, 0.017400585114955902, -0.007603324018418789, 0.018271194770932198, -0.013662767596542835, 0.013976186513900757, 0.03206165134906769, -0.008932454511523247, -0.014603025279939175, -0.007847094908356667, -0.009478037245571613, 0.035613738000392914, 0.0019487146055325866, -0.03895688056945801, 0.019466832280158997, 0.04643251374363899, -0.008868610486388206, -0.017121989279985428, -0.018758734688162804, 0.0156013248488307, 0.021254483610391617, 0.0051336949691176414, -0.01698269136250019, 0.016332637518644333, -0.0008314321748912334, -1.3886677152186166e-05, -0.04030342027544975, -0.007382769603282213, -0.023251080885529518, 0.008038628846406937, -0.04253218322992325, -0.010476335883140564, -0.01481197215616703, 0.0007987843127921224, 0.014405687339603901, 0.00723766814917326, 0.016112081706523895, -0.011079958640038967, -0.005331032909452915, -0.0006076129502616823, 0.003897429211065173, 0.0027830488979816437, -0.03712279349565506, -0.004303713794797659, 0.047779057174921036, -0.043228670954704285, 0.015125391073524952, 0.0004051962459925562, 0.03099370375275612, 0.011782250367105007, -0.026443317532539368, 0.028300616890192032, -0.040326640009880066, -0.01355829369276762, 0.03563695400953293, 0.02221795730292797, 0.013268090784549713, 0.03566017001867294, -0.024632448330521584, -0.012629644013941288, -0.018317626789212227, 0.022508161142468452, 0.01430121436715126, -0.004205044358968735, 0.007736817467957735, -0.010696890763938427, 0.015438810922205448, 0.008311419747769833, -0.008781549520790577, 0.014870012179017067, 0.006047835107892752, 0.019397182390093803, -0.0025276700034737587, -0.007934155873954296, -0.008700292557477951, -0.026211153715848923, -0.03134194761514664, 0.005600921809673309, 0.04515561833977699, 0.040210556238889694, -0.010168720968067646, -0.004190534353256226, 0.022287607192993164, 0.032758139073848724, -0.022879621013998985, -0.002871560864150524, -0.027093371376395226, -0.003398279659450054, -0.00957670621573925, -0.018538180738687515, -0.015311121009290218, 0.01108576264232397, -0.03294386714696884, -0.03022756613790989, 0.01830601878464222, -0.0015859605045989156, -0.0149628771468997, -0.05181868374347687, -0.013082360848784447, 0.01453337725251913, 0.029507862403988838, 0.003795858006924391, -0.03359392285346985, -0.00017022232350427657, 0.039397988468408585, -0.007643952500075102, 0.027650561183691025, 0.014777147211134434, -0.0010657713282853365, -0.03359392285346985, -0.004361754283308983, -0.009211050346493721, -0.027395183220505714, -0.010772342793643475, 5.560338649956975e-06, -0.0004298635176382959, 0.0030558397993445396, -0.04661824554204941, 0.01885160058736801, 0.010754930786788464, -0.05664766579866409, -0.01396457850933075, 0.00783548690378666, -0.013523469679057598, 0.019640954211354256, 0.0197106022387743, -0.05260803923010826, -0.02315821684896946, -0.02758091315627098, 0.006999701261520386, -0.026791559532284737, 0.002214250387623906, 0.008531974628567696, 0.017505057156085968, -0.016077257692813873, -0.040930259972810745, -0.0158799197524786, 0.00814890582114458, 0.006134896073490381, -0.022159917280077934, 0.042462535202503204, 0.006645653396844864, 0.002931052353233099, 0.00878735352307558, -0.055440422147512436, -0.0001620603579794988, -0.015113783068954945, -0.0005720630870200694, -0.016204947605729103, -0.03572981804609299, 0.0024391580373048782, -0.005241069942712784, 0.003874212969094515, -0.0028788158670067787, 0.03294386714696884, -0.01430121436715126, 0.01860783062875271, 0.0032473739702254534, 0.011712601408362389, 0.03758712112903595, 0.05664766579866409, 0.0020560896955430508, -0.018039030954241753, 0.023819878697395325, 0.0003776269149966538, 0.009704395197331905, 0.01899089850485325, -0.011050938628613949, -0.008491345681250095, -0.0331992469727993, -0.015531675890088081, 0.023889528587460518, 0.019977588206529617, -0.011909939348697662, 0.01680856943130493, 0.0049740830436348915, 0.011016113683581352, -0.0023303318303078413, 0.006425098981708288, -0.0031109785195440054, 0.050797171890735626, 0.07178466767072678, -0.03788893297314644, -0.01988472416996956, 0.014637850224971771, -0.0011223609326407313, 0.02119644172489643, -0.025166422128677368, 0.02379666268825531, 0.043066155165433884, 0.010859403759241104, -0.04622356593608856, -0.019571304321289062, 0.0028164221439510584, -0.03928190842270851, 0.025398585945367813, 0.039955176413059235, -0.01591474376618862, -0.004573602695018053, 0.031063351780176163, 0.010673673823475838, 0.012757332995533943, -0.01153847947716713, -0.019385574385523796, 0.008648055605590343, 0.022763539105653763, 0.014777147211134434, -0.024957476183772087, 0.004933454561978579, -0.010992897674441338, -0.0153227299451828, -0.007498851045966148, 0.008201142773032188, -0.009669571183621883, -0.017087165266275406, -0.04260183125734329, 0.011079958640038967, 0.054001014679670334, 0.019594520330429077, 0.01164295244961977, 0.0015743523836135864, -0.00030271822470240295, -0.0035811075940728188, 0.028532778844237328, -0.0032444719690829515, -0.06867368519306183, 0.005345543380826712, -0.004892826080322266, -0.003160313004627824, 0.027650561183691025, -0.0005154734826646745, -0.014092267490923405, 0.02004723809659481, -0.005786652211099863, 0.0061639160849153996, 0.0196293443441391, 0.0056995912455022335, -0.023506460711359978, 0.01889803260564804, 0.047361165285110474, 0.0032851004507392645, -0.02962394431233406, -0.014742323197424412, -0.005983990151435137, -0.020151710137724876, -0.023982392624020576, 0.033988598734140396, 0.005830182693898678, -0.019211452454328537, 0.031225865706801414, 0.018155112862586975, 0.016831785440444946, 0.01266446802765131, 0.018317626789212227, 0.004518464207649231, -0.0026408492121845484, 0.009373563341796398, -0.004553288221359253, -0.05539399012923241, 0.008717704564332962, -0.0019893429707735777, 0.02140538953244686, -0.02528250403702259, -0.009524469263851643, 0.015438810922205448, 0.026211153715848923, -0.01279215794056654, 0.013929754495620728, 0.012501954101026058, 0.012931454926729202, -0.017435409128665924, -0.0028541486244648695, -0.013384171761572361, -0.018108680844306946, -0.00016532513836864382, -0.020801765844225883, -0.02132413163781166, -0.00034461630275473, -0.02209026925265789, -0.01243230514228344, -0.0057953582145273685, -0.0034853406250476837, -0.0006246624398045242, -0.004709998145699501, 0.014115484431385994, 0.024144906550645828, 0.03953728452324867, -0.0381443090736866, -0.016622839495539665, -0.02600220777094364, 0.003331532934680581, 0.0030935662798583508, 0.014521768316626549, -0.01166616939008236, -0.008317223750054836, -0.0024101375602185726, -0.013569901697337627, -0.0006126915104687214, 0.04034985601902008, -0.012072453275322914, -0.016785353422164917, 0.035010114312171936, 0.015485242940485477, -0.04712900146842003, 0.0066920858807861805, 0.007266688626259565, 0.03967658430337906, -0.012026021257042885, 0.010934856720268726, 0.02180006541311741, 0.00814890582114458, -0.01396457850933075, 0.011137999594211578, 0.028114886954426765, 0.01715681329369545, -0.038631852716207504, 0.018247978761792183, -0.019223060458898544, -0.00962313823401928, -0.011149607598781586, 0.018271194770932198, -0.020674075931310654, -0.015299513004720211, -0.0036913848016411066, 0.004901532083749771, 0.020035630092024803, 0.0037029930390417576, 0.02081337384879589, 0.01217692717909813, 0.02243851311504841, 0.02783629111945629, 0.00929811131209135, -0.003888722974807024, -0.0004480011994019151, 0.045991405844688416, -0.014405687339603901, 0.0006464276812039316, -0.01825958676636219, -0.006842991802841425, -0.00446042325347662, -0.01340738870203495, 0.013047536835074425, 0.0028976791072636843, 0.010888424701988697, -0.004913140553981066, 0.009507057256996632, -0.019594520330429077, -0.013906537555158138, -0.00953607726842165, -0.019397182390093803, -0.006378666497766972, -0.02588612586259842, 0.013871713541448116, 0.011254080571234226, -0.006959072779864073, 0.030157918110489845, -0.013326131738722324, -0.009292306378483772, 0.03682098165154457, 0.04796478524804115, 0.002430451801046729, 0.010528572835028172, -0.05149365961551666, 0.0064192949794232845, -0.0158799197524786, 0.02864886075258255, 0.01744701713323593, 0.017005907371640205, 0.0036333443131297827, -0.02025618404150009, 0.003647854318842292, -0.0005582784069702029, -0.005313620902597904, -0.016785353422164917, 0.02430742047727108, -0.0074001820757985115, 0.019698994234204292, 0.010783951729536057, 0.028741726651787758, -0.005351347383111715, 0.008926650509238243, 0.005272992420941591, 0.0035317731089890003, -0.05260803923010826, -0.0008350597345270216, -0.016657663509249687, 0.002051736693829298, 0.013465428724884987, -0.010905836708843708, -0.012490346096456051, 0.032502759248018265, -0.0039061352144926786, 0.020163320004940033, -0.01669248938560486, 0.013302914798259735, -0.02906675450503826, -0.034197546541690826, -0.0268147774040699, 0.032758139073848724, 0.0028701098635792732, -0.013825280591845512, 0.04645572975277901, -0.02400561049580574, 0.013395779766142368, 0.016994299367070198, -0.026327235624194145, 0.015578108839690685, -0.005670570768415928, -0.0319223515689373, -0.0034534181468188763, 0.060176536440849304, 0.033013518899679184, -0.03856220096349716, -0.007533675525337458, 0.019954372197389603, 0.0031370967626571655, 0.006512159947305918, -0.03651917353272438, -0.026280803605914116, 0.013709199614822865, -0.022624243050813675, 0.013210049830377102, -0.011776446364820004, 0.0021837791427969933, 0.0255378820002079, 0.0029600728303194046, -0.041232071816921234, -0.021231267601251602, -0.05228301137685776, 0.006088463589549065, 0.021591119468212128, -0.009553489275276661, -0.011463026516139507, 0.0024260987993329763, 0.00906594842672348, 0.00486380560323596, -0.007701993454247713, -0.029322132468223572, 0.011741622351109982, -0.02213670127093792, -0.019989198073744774, 0.016878219321370125, -0.0038132702466100454, -0.03819074109196663, -0.00418182834982872, 0.004353048279881477, 0.00294266059063375, -0.0010563397081568837, 0.019815076142549515, -0.01736575923860073, 0.008102473802864552, 0.007574304006993771, 0.017737220972776413, -0.03145802766084671, 0.0036652665585279465, -0.019176628440618515, 0.01542720291763544, -0.01629781164228916, -0.0066920858807861805, -0.014719107188284397, -0.00486380560323596, -0.005966578144580126, 0.04364656284451485, -0.015554891899228096, 0.018271194770932198, 0.03517263010144234, -0.020453521981835365, 0.014359255321323872, -0.049914952367544174, 0.005844692699611187, 0.011724209412932396, -0.0022171526215970516, 0.023042134940624237, -0.01949004828929901, 0.024632448330521584, 0.032247379422187805, -0.004469129256904125, -0.010441511869430542, -0.038213957101106644, 0.0009598471224308014, 0.010081660002470016, 0.0074001820757985115, 0.0026655164547264576, -0.02563074789941311, 0.004646153189241886, 0.018364058807492256, -0.02732553519308567, 0.016321029514074326, 0.013360955752432346, -0.0165183674544096, -0.006192936562001705, 0.029275700449943542, 0.027488047257065773, 0.005850496701896191, 0.014881621114909649, 0.013987794518470764, 0.0038045640103518963, -0.0006739969830960035, 0.008769940584897995, -0.001702041830867529, -0.0211500097066164, -0.0421375073492527, -0.012397481128573418, -0.007104174699634314, -0.02864886075258255, 0.013012711890041828, 0.001728160073980689, -0.018329234793782234, -0.03844612091779709, 0.010708498768508434, -0.008793157525360584, 0.047523677349090576, 0.0203490499407053, 0.025607531890273094, 0.0031022722832858562, -0.002497198525816202, 0.002214250387623906, 0.042044639587402344, -0.008311419747769833, 0.026791559532284737, -0.019420398399233818, -0.0019269493641331792, 0.03094726987183094, -0.005412289872765541, -0.04048915207386017, -0.0035317731089890003, 0.00972761120647192, 0.0038364864885807037, -0.011550087481737137, 0.004892826080322266, -0.01243230514228344, -0.003909037448465824, 0.030041836202144623, -0.023935960605740547, -0.027348751202225685, -0.015345945954322815, -0.028230968862771988, 0.011909939348697662, -0.0027888529002666473, -0.032758139073848724, 0.01294306293129921, -0.028973888605833054, 0.014185133390128613, -0.01886320859193802, 0.003819074248895049, 0.0016135298646986485, -0.0073595535941421986, -0.014788755215704441, 0.015949567779898643]
metadata : {"source": "test", "crawled_at": "2025-03-14T09:03:36.564078", "url_path": "/agents/", "chunk_size": 4914}
updated_dt: 2025-03-14T09:03:39.058926
---
```

Agents are designed for reuse, like FastAPI Apps
Agents are intended to be instantiated once (frequently as module globals) and reused throughout your application, similar to a small [FastAPI](https://fastapi.tiangolo.com/reference/fastapi/#fastapi.FastAPI) app or an [APIRouter](https://fastapi.tiangolo.com/reference/apirouter/#fastapi.APIRouter).
## Running Agents
There are four ways to run an agent:
  1. [`agent.run()`](https://ai.pydantic.dev/api/agent/#pydantic_ai.agent.Agent.run) — a coroutine which returns a [`RunResult`](https://ai.pydantic.dev/api/agent/#pydantic_ai.agent.AgentRunResult) containing a completed response.
  2. [`agent.run_sync()`](https://ai.pydantic.dev/api/agent/#pydantic_ai.agent.Agent.run_sync) — a plain, synchronous function which returns a [`RunResult`](https://ai.pydantic.dev/api/agent/#pydantic_ai.agent.AgentRunResult) containing a completed response (internally, this just calls `loop.run_until_complete(self.run())`).
  3. [`agent.run_stream()`](https://ai.pydantic.dev/api/agent/#pydantic_ai.agent.Agent.run_stream) — a coroutine which returns a [`StreamedRunResult`](https://ai.pydantic.dev/api/result/#pydantic_ai.result.StreamedRunResult), which contains methods to stream a response as an async iterable.
  4. [`agent.iter()`](https://ai.pydantic.dev/api/agent/#pydantic_ai.agent.Agent.iter) — a context manager which returns an [`AgentRun`](https://ai.pydantic.dev/api/agent/#pydantic_ai.agent.AgentRun), an async-iterable over the nodes of the agent's underlying [`Graph`](https://ai.pydantic.dev/api/pydantic_graph/graph/#pydantic_graph.graph.Graph).


Here's a simple example demonstrating the first three:
run_agent.py```
frompydantic_aiimport Agent
agent = Agent('openai:gpt-4o')
result_sync = agent.run_sync('What is the capital of Italy?')
print(result_sync.data)
#> Rome

async defmain():
  result = await agent.run('What is the capital of France?')
  print(result.data)
  #> Paris
  async with agent.run_stream('What is the capital of the UK?') as response:
    print(await response.get_data())
    #> London

```

_(This example is complete, it can be run "as is" — you'll need to add`asyncio.run(main())` to run `main`)_
You can also pass messages from previous runs to continue a conversation or provide context, as described in [Messages and Chat History](https://ai.pydantic.dev/message-history/).
### Iterating Over an Agent's Graph
Under the hood, each `Agent` in PydanticAI uses **pydantic-graph** to manage its execution flow. **pydantic-graph** is a generic, type-centric library for building and running finite state machines in Python. It doesn't actually depend on PydanticAI — you can use it standalone for workflows that have nothing to do with GenAI — but PydanticAI makes use of it to orchestrate the handling of model requests and model responses in an agent's run.
In many scenarios, you don't need to worry about pydantic-graph at all; calling `agent.run(...)` simply traverses the underlying graph from start to finish. However, if you need deeper insight or control — for example to capture each tool invocation, or to inject your own logic at specific stages — PydanticAI exposes the lower-level iteration process via [`Agent.iter`](https://ai.pydantic.dev/api/agent/#pydantic_ai.agent.Agent.iter). This method returns an [`AgentRun`](https://ai.pydantic.dev/api/agent/#pydantic_ai.agent.AgentRun), which you can async-iterate over, or manually drive node-by-node via the [`next`](https://ai.pydantic.dev/api/agent/#pydantic_ai.agent.AgentRun.next) method. Once the agent's graph returns an [`End`](https://ai.pydantic.dev/api/pydantic_graph/nodes/#pydantic_graph.nodes.End), you have the final result along with a detailed history of all steps.
#### `async for` iteration
Here's an example of using `async for` with `iter` to record each node the agent executes:
agent_iter_async_for.py```
frompydantic_aiimport Agent
agent = Agent('openai:gpt-4o')

async defmain():
  nodes = []
  # Begin an AgentRun, which is an async-iterable over the nodes of the agent's graph
  async with agent.iter('What is the capital of France?') as agent_run:
    async for node in agent_run:
      # Each node represents a step in the agent's execution
      nodes.append(node)
  print(nodes)
"""
  [
    ModelRequestNode(
      request=ModelRequest(
        parts=[
          UserPromptPart(
            content='What is the capital of France?',
            timestamp=datetime.datetime(...),
            part_kind='user-prompt',
          )
        ],
        kind='request',
      )
    ),
    CallToolsNode(
      model_response=ModelResponse(
        parts=[TextPart(content='Paris', part_kind='text')],
        model_name='gpt-4o',
        timestamp=datetime.datetime(...),
        kind='response',
      )
    ),
    End(data=FinalResult(data='Paris', tool_name=None, tool_call_id=None)),
  ]
  """
  print(agent_run.result.data)
  #> Paris