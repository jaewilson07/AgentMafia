---
url: https://ai.pydantic.dev/agents/
session_id: pydantic_ai_docs
chunk_number: 8
title: Understanding System Prompts in Pydantic Agents
summary: This section discusses the importance of crafting effective system prompts for Pydantic agents. It distinguishes between static system prompts, which are predefined in code, and dynamic system prompts, which are context-dependent and defined using a specific decorator. Both types can be combined in a single agent.
embedding: [-0.022299937903881073, 0.0700518861413002, 0.034031931310892105, -0.006065452471375465, -0.004165707156062126, 0.022195305675268173, 0.00143298355396837, 0.02649834379553795, 0.008063291199505329, 0.01219630055129528, 0.003488861257210374, -0.047974295914173126, 0.018193088471889496, -0.01406007818877697, -0.018886283040046692, -0.016518957912921906, -0.03392729535698891, 0.014609402976930141, -0.012863337062299252, 0.0527874194085598, 0.04603858292102814, 0.007494349032640457, 0.01234017126262188, 0.04070229455828667, 0.01315107848495245, 0.013576149940490723, -0.028591006994247437, 0.020625809207558632, 0.007173909805715084, 0.016859015449881554, 0.0018196357414126396, -0.013334185816347599, -0.05801907926797867, -0.01320993434637785, 0.0006065452471375465, -0.008717249147593975, 0.008848040364682674, -0.013733100146055222, -0.007683996576815844, 0.025988256558775902, 0.014779431745409966, -0.010862228460609913, 0.031154518947005272, 0.046352483332157135, -0.04734649881720543, 0.04185325652360916, -0.004253991413861513, 0.007716694381088018, 0.02465418353676796, -0.01400776207447052, -0.037667930126190186, 0.04509688541293144, -0.0051662614569067955, -0.0177353173494339, 0.0015923856990411878, -0.02992507815361023, -0.023947911337018013, 0.023477060720324516, -0.011045335792005062, -0.016623590141534805, 0.008024054579436779, -0.00874994695186615, -0.010044781491160393, 0.027126142755150795, -0.035993799567222595, -0.015381071716547012, -0.026995351538062096, 0.018441591411828995, -0.022221464663743973, 0.015237201936542988, 0.015145647339522839, -0.0036915880627930164, -0.0029509817250072956, -0.018363116309046745, -0.027204617857933044, -0.036176908761262894, 0.05718201398849487, 0.09385593235492706, 0.03622922673821449, -0.034110404551029205, 0.005025660619139671, -0.05090402439236641, -0.008710709400475025, 0.02481113374233246, -0.01594347506761551, -0.024850372225046158, -0.07596366107463837, -0.017996899783611298, -0.02086123265326023, -0.0686393454670906, -0.009390824474394321, 0.034188877791166306, 0.0345289371907711, 0.049883849918842316, 0.09783198684453964, 0.016257375478744507, -0.011830084957182407, -0.05051165074110031, 0.026838401332497597, 0.005581524223089218, 0.028591006994247437, -0.02466726303100586, -0.06445401906967163, 0.027570832520723343, 0.0177745558321476, -0.018350036814808846, 0.01591731607913971, -0.0010038241744041443, -0.05399070307612419, -0.022299937903881073, -0.09777966886758804, -0.011012637987732887, -0.029323438182473183, -0.027440041303634644, -0.07413258403539658, -0.016793619841337204, -0.046404797583818436, -0.002030536998063326, 0.004600588697940111, -0.019998010247945786, -0.041042350232601166, 0.021358240395784378, 0.012045891024172306, -0.003989138640463352, 0.012000113725662231, 0.022208385169506073, -0.013484596274793148, -0.02109665796160698, -0.05048549175262451, -0.014831747859716415, 0.022116830572485924, 0.002578226150944829, 0.010731436312198639, -0.004103580955415964, -0.02096586674451828, -0.0529705286026001, -0.02793704904615879, -0.017879188060760498, -0.03612459450960159, 0.006088341120630503, -0.02125360816717148, -0.010737976059317589, -0.070888951420784, 0.024170255288481712, -0.003760253544896841, 0.028747955337166786, -0.027126142755150795, 0.007376636378467083, -0.03879273682832718, 0.03196542710065842, 0.010339062660932541, 0.0262629184871912, -0.025072716176509857, -0.005022390745580196, -0.030735986307263374, 0.01394236646592617, 0.01394236646592617, 0.03826957195997238, 0.025020400062203407, -0.05103481560945511, -0.010077479295432568, 0.03701397404074669, -0.04248105734586716, -0.021829089149832726, -0.050066959112882614, -0.028931064531207085, -0.02420949377119541, -0.018559303134679794, -0.037772566080093384, -0.057129696011543274, 0.0007385628414340317, -0.014177790842950344, -0.0352090522646904, -0.018153849989175797, 0.01606118679046631, -0.030448244884610176, -0.044756826013326645, -0.02984660491347313, -0.028774114325642586, -0.01943560689687729, -0.023647090420126915, -0.014753272756934166, -0.025870544835925102, 0.005581524223089218, 0.0017983821453526616, -0.03876657783985138, 0.00023603765293955803, -0.005833297967910767, -0.02814631536602974, 0.024968083947896957, 0.04690180718898773, 0.03991754353046417, 0.03612459450960159, -0.0062943375669419765, -0.003462703200057149, -0.02778009884059429, 0.04925605282187462, -0.009057306684553623, 0.0022904849611222744, -0.0025913051795214415, -0.015381071716547012, 0.021685218438506126, 0.030657511204481125, -0.016597433015704155, 0.019684109836816788, -0.04745113104581833, -0.006232211831957102, 0.01399468258023262, -0.058489926159381866, -0.003505210392177105, 0.0173691026866436, -0.03290712460875511, 0.031049884855747223, -0.01394236646592617, -0.020364224910736084, 0.022195305675268173, -0.060477957129478455, 0.023947911337018013, -0.02254844270646572, 0.007056197617202997, -0.004087232053279877, 0.016152741387486458, 0.044756826013326645, -0.04941300302743912, -0.0035640664864331484, 0.029088014736771584, 0.051819562911987305, -0.035993799567222595, -0.007566284388303757, 0.037641774863004684, 0.007036578841507435, -0.01756528951227665, 0.009031148627400398, -0.02461494691669941, 0.07292930036783218, -0.07151675224304199, 0.024039464071393013, 0.008462205529212952, 0.009979385882616043, -0.012739085592329502, 0.006886168848723173, 0.0005546374013647437, 0.018088454380631447, 0.016662828624248505, 0.02987276203930378, 0.05435691773891449, -0.006595158018171787, -0.04611705616116524, 0.05404301732778549, 0.031154518947005272, 0.07287698239088058, -0.012601754628121853, 0.010247508063912392, -0.004080692771822214, -0.0069057876244187355, -0.0016921141650527716, -0.007108514197170734, -0.03146841749548912, -0.044390611350536346, -0.037824880331754684, 0.02465418353676796, 0.03612459450960159, -0.0529705286026001, 0.022286860272288322, 0.011830084957182407, -0.0356275849044323, -0.010973401367664337, -0.03819109871983528, 0.0012294393964111805, -0.08229396492242813, 0.018428511917591095, 0.027099983766674995, 0.008782644756138325, -0.0349997878074646, -0.030919093638658524, 0.007062737364321947, 0.01402084156870842, 0.05446154996752739, -0.005905232857912779, 0.010522170923650265, -0.015564179979264736, 0.0530228465795517, 0.04499225318431854, 0.012647530995309353, 0.0011452424805611372, 0.01141809206455946, -0.007468190509825945, -0.012379408814013004, -0.0028430786915123463, 0.010953782126307487, -0.0025864006020128727, -0.000994014902971685, 0.013890049420297146, -0.010979940183460712, 0.010731436312198639, -0.0347643606364727, 0.04316117241978645, 0.02274462953209877, -0.008985371328890324, -0.011091113090515137, 0.01781379245221615, 0.006160276476293802, -0.02806784026324749, -0.03311638906598091, -0.005496509838849306, 0.027596991509199142, 0.010561407543718815, -0.015603417530655861, 0.05414765328168869, -0.02968965470790863, -0.011817005462944508, 0.03996986150741577, -0.043108854442834854, -0.02422257326543331, 0.008848040364682674, -0.027283092960715294, 0.033953454345464706, -0.0348689965903759, 0.0526827871799469, -0.003547717584297061, -0.05937930941581726, -0.005303592421114445, 0.0132164740934968, -0.007899802178144455, -0.06340768188238144, 0.01931789331138134, 0.012994128279387951, -0.004764077719300985, -0.0009000085410661995, 0.025896703824400902, 0.006722679361701012, -0.07345246523618698, -0.028747955337166786, 0.03999602049589157, 0.04381512850522995, 0.0021090118680149317, -0.044887617230415344, 0.007455111481249332, 0.0177614763379097, 0.030892934650182724, -0.037537138909101486, -0.008710709400475025, -0.0522380955517292, -0.018585462123155594, -0.012935272417962551, 0.006827312521636486, 0.008834960870444775, 0.025478171184659004, -0.014570165425539017, 0.00874994695186615, 0.020154958590865135, -0.011038796976208687, 0.012784861959517002, 0.037824880331754684, -0.04208868369460106, 0.023463983088731766, -0.03636001795530319, 0.004757538437843323, -0.012457883916795254, -0.01413855329155922, -0.05807139351963997, 0.025687437504529953, 0.025491248816251755, -0.015433388762176037, -0.009449680335819721, 0.046587906777858734, -0.010921084322035313, -0.027649307623505592, -0.03884505480527878, 0.027570832520723343, 0.015354913659393787, 0.032305482774972916, -0.03214853256940842, 0.004253991413861513, -0.037458665668964386, -0.013916208408772945, -0.017892267554998398, -0.01062026433646679, 0.0038550773169845343, 0.03840036317706108, 0.04533230885863304, -0.004564621020108461, -0.0077101546339690685, -0.029114171862602234, 0.04059765860438347, 0.0264198686927557, 0.0086714718490839, -8.343062654603273e-05, -0.05550788342952728, 0.02075660042464733, 0.032200850546360016, -0.053310588002204895, -0.0348951518535614, -0.011149968951940536, 0.02086123265326023, 0.03165152668952942, -0.0130137475207448, 0.028407897800207138, 0.04564620926976204, 0.013903128914535046, -0.00874994695186615, -0.005879074800759554, -0.02271847054362297, 0.04525383561849594, 0.005810409318655729, 0.03008202835917473, 0.025386616587638855, 0.01921326108276844, 0.039420537650585175, 0.011313458904623985, 0.06377390027046204, -0.027570832520723343, 0.010711818002164364, -0.01587807945907116, -0.01940944790840149, -0.06267525255680084, 0.012314013205468655, 0.009652407839894295, 0.046221692115068436, 0.03672623261809349, -0.02989892102777958, -0.09437909722328186, 0.015354913659393787, -0.006444747559726238, -0.039499010890722275, 0.040911559015512466, 0.023607853800058365, -0.044782985001802444, -0.0037406347692012787, -0.035261370241642, -0.000730388390365988, 0.01306606363505125, 0.024104859679937363, -0.018938599154353142, -0.012242077849805355, -0.025726674124598503, 0.04360586404800415, 0.012922192923724651, -0.009985925629734993, -0.0174606554210186, 0.03353492170572281, -0.04059765860438347, -0.0048163942992687225, 0.06121039018034935, -0.046352483332157135, -0.0034365449100732803, -0.044835302978754044, -0.01406007818877697, 0.03824341297149658, -0.031023727729916573, 4.3011732486775145e-06, -0.016976727172732353, -0.04219331592321396, -0.015538021922111511, -0.022378413006663322, -0.05032854154706001, 0.07177833467721939, 0.012575595639646053, 0.06785459071397781, -0.003505210392177105, 0.0024180065374821424, 0.016832856461405754, -0.007579363416880369, 0.02638063207268715, 0.0029313629493117332, 0.016950570046901703, -0.027466200292110443, 0.016152741387486458, -0.020089562982320786, 0.0036883181892335415, 0.0015572354895994067, 0.02647218480706215, 0.009070385247468948, -0.029401913285255432, 0.002130265347659588, -0.00948237907141447, 0.009090004488825798, 0.020050326362252235, 0.00480331527069211, -0.005545556545257568, 0.019631793722510338, -0.021645981818437576, 0.03141609951853752, 0.048105087131261826, -0.0011689483653753996, 0.04703259840607643, 0.0006588618271052837, -0.057129696011543274, -0.02445799671113491, 0.03638617694377899, 0.017905347049236298, 0.00520549900829792, 0.05896077677607536, -0.015041014179587364, 0.025216586887836456, 0.04161783307790756, 0.03282864764332771, 0.016702065244317055, -0.014164711348712444, -0.01929173618555069, -0.032174691557884216, -0.00787364412099123, 0.008776105009019375, 0.04517535865306854, -0.005957549437880516, -0.011679674498736858, 0.004836013074964285, 0.014779431745409966, 0.018938599154353142, 0.07517891377210617, -0.04075460880994797, 0.0028528880793601274, 0.008540680631995201, 0.030500560998916626, 0.013890049420297146, 0.007566284388303757, -0.017199072986841202, -0.0005554548697546124, -0.011627358384430408, 0.0262629184871912, 0.037877198308706284, -0.011941257864236832, 0.001025895238853991, -0.0011599564459174871, -0.0016430673422291875, -0.048052772879600525, -0.005146642681211233, 0.022509204223752022, -0.0355752669274807, 0.011869322508573532, 0.03662160038948059, 0.00952161569148302, 0.026668371632695198, 0.016257375478744507, -0.03651696816086769, 0.00019925256492570043, -0.02282310463488102, 0.0177614763379097, -0.04412902891635895, -0.01940944790840149, -0.0015041014412418008, 0.020455779507756233, -0.032593224197626114, -0.016479719430208206, -0.013314567506313324, 0.013177236542105675, 0.009698184207081795, 0.009011529386043549, 0.008468745276331902, -0.010306364856660366, 0.031023727729916573, 0.0006903334870003164, 0.020403463393449783, -0.04742497205734253, 0.04033607617020607, -0.0033580700401216745, -0.040833085775375366, -0.011149968951940536, 0.025805149227380753, -0.021829089149832726, -0.0042703403159976006, 0.005669808480888605, 0.03277633339166641, -0.004721570760011673, -0.024902688339352608, 0.041016191244125366, 0.04342275485396385, -0.0013798496220260859, -0.016859015449881554, 0.0010782118188217282, 0.004198404960334301, 0.007657838054001331, -0.01918710209429264, -0.0010561407543718815, 0.027099983766674995, -0.012235538102686405, 0.020259592682123184, -0.009456220082938671, -0.01954023912549019, 0.01392928697168827, -0.0049896929413080215, -0.004672523587942123, 0.025517407804727554, 0.023267794400453568, -0.030108187347650528, -0.0021842168644070625, -0.013733100146055222, 0.00022745446767657995, -0.00866493210196495, -0.01947484351694584, 0.01594347506761551, -0.0347120463848114, 0.0003946222714148462, 0.009835515171289444, -0.025739753618836403, 0.012967970222234726, 0.01934405229985714, 0.006127578672021627, -0.04601242393255234, 0.010051321238279343, 0.04611705616116524, -0.027309250086545944, -0.00375044415704906, 0.02966349571943283, 0.009155400097370148, 0.004780426621437073, 0.016728224232792854, 0.02621060237288475, -0.0526566281914711, -0.015093331225216389, -0.011614278890192509, -0.010358680970966816, -0.02283618412911892, -0.02793704904615879, -0.027440041303634644, 0.018075374886393547, -0.02249612659215927, 0.024183334782719612, 0.0707320049405098, -0.0051662614569067955, -0.0349213108420372, 0.021645981818437576, 0.02482421323657036, -0.007677456829696894, 0.014190870337188244, 0.005565175320953131, -0.00788672361522913, -0.03996986150741577, -0.018009979277849197, 0.035993799567222595, -0.01946176402270794, 0.025622041895985603, 0.03377034515142441, 0.025818228721618652, -0.02252228371798992, 0.012078588828444481, 0.014897143468260765, -0.023804040625691414, -0.02634139358997345, -0.04331812262535095, 0.0038975845091044903, 0.025321220979094505, -0.009155400097370148, 0.0003124689101241529, -0.007612061221152544, -0.025085795670747757, -0.01570804975926876, 0.028381740674376488, 0.010953782126307487, -0.004257260821759701, -0.02791089005768299, -0.051976513117551804, 0.010084019042551517, -0.0018833965295925736, 0.00866493210196495, 0.00613411795347929, -0.0009604995721019804, 0.014570165425539017, -0.017918426543474197, 0.008946133777499199, -0.044782985001802444, 0.013039905577898026, -0.010012083686888218, 0.004538462497293949, -0.00693848542869091, 0.03850499540567398, -0.002094297669827938, 0.018572382628917694, 0.023450903594493866, -0.0037569839041680098, -0.05822834372520447, -0.001800017082132399, 0.011954336427152157, 0.010123256593942642, 0.007350478321313858, 0.008076370693743229, 0.030631352216005325, -0.032227009534835815, -0.024994242936372757, 0.039655961096286774, -0.020547334104776382, -0.03264554217457771, -0.08056752383708954, 0.04920373484492302, 0.04329196363687515, -0.013602308928966522, 0.003042535623535514, -0.002762968884781003, 0.0006376082310453057, 0.023241637274622917, -0.0006339296814985573, -0.03625538572669029, -0.027335409075021744, 0.02069120481610298, 0.019971851259469986, -0.002406562212854624, -0.014714036136865616, 0.020769678056240082, 0.021711377426981926, -0.03131146728992462, 0.003250167006626725, -0.015054093673825264, -0.0013659530086442828, -0.004590779077261686, -0.014766352251172066, -0.025896703824400902, 0.005790790542960167, 0.0036490808706730604, 0.0348689965903759, -0.014674798585474491, -0.015472626313567162, 0.030579036101698875, -0.013190316036343575, 0.04857593774795532, -0.025216586887836456, -0.02819863148033619, -0.006264909636229277, 0.043030381202697754, 0.022260701283812523, -0.007592442445456982, -0.017944583669304848, 0.013510754331946373, -0.00867801159620285, -0.018506987020373344, -0.000551776320207864, -0.016793619841337204, -0.01052870973944664, 0.0345812551677227, -0.010090558789670467, -0.0016757651465013623, 0.0021090118680149317, -0.02778009884059429, 0.013105301186442375, -0.039551328867673874, 0.014570165425539017, -0.021946802735328674, -0.02440568059682846, 0.031102200970053673, -0.012019732035696507, 0.01149002742022276, 0.01139847282320261, 0.01480558980256319, -0.03340413048863411, -0.012928732670843601, 0.01900399476289749, 0.005879074800759554, 0.0018932059174403548, 0.06492486596107483, 0.007755931932479143, -0.004149358253926039, -0.012673689052462578, 0.010129796341061592, -0.00966548640280962, 0.0020256321877241135, 0.031102200970053673, 0.002924823435023427, -0.00786056462675333, 0.004054534249007702, -0.068900927901268, 0.0028201902750879526, -0.011241523548960686, 0.021724456921219826, -0.013811575248837471, 0.025373537093400955, -0.0038223795127123594, 0.009508537128567696, 0.027021508663892746, 0.009443141520023346, -0.019710268825292587, 0.007527046836912632, -0.02298005484044552, -0.015524942427873611, -0.012438264675438404, 0.013052985072135925, 0.027152299880981445, -0.031076043844223022, 0.02126668579876423, -0.0051662614569067955, -0.0021057419944554567, -0.00699734129011631, -0.0028136505279690027, 0.016479719430208206, -0.0013463342329487205, -0.008828421123325825, 0.013105301186442375, -0.011640436947345734, -0.03803414851427078, -0.018415432423353195, -0.04198404774069786, -0.023385507985949516, -0.026890717446804047, -0.023581694811582565, 0.013890049420297146, -0.0014779431512579322, 0.010999559424817562, -0.011450789868831635, -9.59477765718475e-05, -0.07669609040021896, -0.0031994853634387255, 0.030552877113223076, -0.007272003684192896, 0.02942807227373123, -0.023333191871643066, 0.00527089461684227, 0.025504328310489655, -0.04687564820051193, -0.020377304404973984, -0.003511749906465411, 0.024235650897026062, -0.02420949377119541, -0.01895167864859104, 0.043213486671447754, -0.03868810459971428, 0.0038681565783917904, 0.0036490808706730604, 0.05838529393076897, -0.002182581927627325, -0.004309577401727438, 0.002753159496933222, -0.05979784205555916, 0.010051321238279343, -0.013772337697446346, -0.004983153659850359, -0.03144225850701332, 0.011019177734851837, 0.03371803089976311, -0.01778763346374035, -0.033953454345464706, -0.025792069733142853, 0.008586456999182701, -0.011607739143073559, -0.033874981105327606, 0.04614321514964104, 0.006153736729174852, 0.016715144738554955, -0.0010177207877859473, -0.02636755257844925, 0.025321220979094505, -0.006827312521636486, 0.041173141449689865, 0.01474019419401884, 0.01606118679046631, -0.004584239795804024, -0.018363116309046745, 0.009305810555815697, 0.01134615670889616, 0.016819776967167854, -0.0063008773140609264, 0.03999602049589157, -0.0020289020612835884, 0.017107518389821053, 0.03193926811218262, 0.0265506599098444, -0.02073044143617153, 0.002195661189034581, 0.0008387000416405499, 0.019814901053905487, 0.007788629736751318, -0.02105741947889328, -0.014910222962498665, -0.0014648640062659979, 0.004764077719300985, -0.008468745276331902, -0.01573420874774456, 0.015459546819329262, 0.003841998288407922, 0.00097603106405586, -0.04227178916335106, 0.04601242393255234, -0.0132164740934968, 0.01213744468986988, 0.0130137475207448, 0.0175914466381073, 0.022129910066723824, 0.012425186112523079, 0.01046985387802124, 0.011954336427152157, 0.028721798211336136, -0.0063826218247413635, 0.023045450448989868, 0.01900399476289749, -0.05582178011536598, 0.021645981818437576, 0.008272557519376278, -0.006353193894028664, 0.028983380645513535, 0.024170255288481712, 0.030186662450432777, -0.012817559763789177, 0.0001681896101217717, 0.0023722294718027115, -0.03337797150015831, 0.004218023736029863, -0.023463983088731766, 0.010737976059317589, 0.018206166103482246, 0.005434384103864431, 0.025988256558775902, 0.018624698743224144, -0.043213486671447754, 0.017055202275514603, -0.0033351813908666372, 0.0008227598154917359, -0.009724343195557594, -0.018415432423353195, -0.008514521643519402, 0.03186079114675522, -0.0086126159876585, 0.01770916022360325, 0.003577145515009761, 0.022417651489377022, -0.006101420149207115, 0.009090004488825798, 0.08548527956008911, -0.04841898754239082, -0.034241195768117905, 0.021475952118635178, -0.00958701130002737, 0.016401244327425957, 0.00801097508519888, 0.001701923436485231, 0.004175516311079264, 0.02830326557159424, -0.019880296662449837, -0.004322656895965338, -0.014190870337188244, -0.0004937376361340284, 0.016126582399010658, 0.029114171862602234, -0.021776773035526276, 0.023254716768860817, -0.04514919966459274, 0.007782089989632368, 0.04201020672917366, -0.041120823472738266, -0.005473621189594269, -0.009181558154523373, -0.0016569639556109905, -0.011712372303009033, -0.0020076483488082886, -0.0347120463848114, -0.03826957195997238, -0.03144225850701332, -0.0023575155064463615, -0.0174998939037323, 0.01600887067615986, -0.0019324433524161577, 0.0025340840220451355, -0.0025520678609609604, 0.008710709400475025, 0.021999118849635124, -0.013393042609095573, 0.029401913285255432, -0.004541732370853424, -0.0353136844933033, -0.03808646276593208, -0.003920473158359528, -0.009927069768309593, 0.08349724858999252, -0.007219687104225159, -4.582809197017923e-05, 0.0032370879780501127, -0.03921126946806908, -0.0029313629493117332, 0.006899247877299786, -0.017630685120821, 0.0173691026866436, -0.01602195017039776, -0.014504769816994667, 0.02984660491347313, -0.013615387491881847, 0.046509433537721634, 0.04580315947532654, 0.0033041185233742, 0.007683996576815844, 0.000783522380515933, 0.0352875292301178, 0.0065820785239338875, 0.026616055518388748, -0.001979855354875326, -0.021999118849635124, -0.0009278017096221447, 0.02083507552742958, -0.004786966368556023, 0.021436715498566628, -0.04423366114497185, 0.006788074970245361, 0.043108854442834854, 0.0014419754734262824, 0.003091582329943776, 0.016414323821663857, -0.006604967173188925, 0.013850812800228596, 0.046326324343681335, 0.002283945446833968, -0.02104434184730053, -0.00974396150559187, -0.0353660024702549, 0.0049929628148674965, 0.003384228330105543, -0.012588675133883953, 0.007893262431025505, 0.0349736288189888, -0.0006547746015712619, -0.025896703824400902, -0.0263152364641428, 0.012673689052462578, -0.00968510564416647, 0.009992465376853943, -0.009462759830057621, -0.0012049160432070494, 0.0028806813061237335, 0.022182226181030273, -0.03876657783985138, -0.011614278890192509, -0.02464110590517521, -0.006912326905876398, -0.014373977668583393, -0.011051875539124012, -0.004852361977100372, 0.032436273992061615, 0.024928847327828407, 0.005382067523896694, -0.013589229434728622, -0.008252939209342003, 0.030448244884610176, 0.0032289132941514254, 0.007579363416880369, -0.011836624704301357, -0.031180676072835922, 0.00569596653804183, 0.029114171862602234, -0.018153849989175797, 0.019880296662449837, -0.016780540347099304, -0.001106822513975203, 0.013536913320422173, 0.0030719637870788574, 0.012961430475115776, -0.0059510101564228535, -0.017042122781276703, 0.03667391836643219, 0.015276438556611538, 0.03196542710065842, 0.051348716020584106, 0.0005027295555919409, -0.006291067693382502, -0.005699236411601305, 0.00353790819644928, 0.016715144738554955, -0.018127692863345146, 0.01591731607913971, -0.028538689017295837, 0.016362007707357407, 0.02092662826180458, 0.0011975590605288744, 0.010908004827797413, -0.005964089184999466, 0.01566881313920021, 0.028617164120078087, 0.007121593225747347, -0.03201774135231972, -0.016845935955643654, -0.015302597545087337, 0.021946802735328674, 0.03918511047959328, 0.012510200031101704, -0.017094438895583153, 0.014230107888579369, -0.008200622163712978, 0.026890717446804047, -0.01954023912549019, -0.02780625782907009, -0.030709827318787575, -0.008782644756138325, -0.013706942088901997, -0.021645981818437576, -0.04577700048685074, -0.0023754993453621864, -0.031180676072835922, -0.011287299916148186, 0.03620306774973869, -0.014217028394341469, -0.013733100146055222, -0.03853115439414978, 0.01740833930671215, 0.0173037052154541, 0.04527999460697174, 0.024235650897026062, -0.010129796341061592, -0.01904323138296604, 0.021632902324199677, -0.0005235744174569845, 0.02284926176071167, 0.0177353173494339, -0.0035313686821609735, -0.02482421323657036, 0.012588675133883953, -0.00975050125271082, -0.007272003684192896, -0.018650857731699944, -0.004067613277584314, 0.0013030095724388957, -0.0038616168312728405, -0.024941924959421158, 0.03138994425535202, -0.01127422135323286, -0.068900927901268, -0.01415163278579712, 0.0346858873963356, -0.015564179979264736, 0.00015030796930659562, 0.016322771087288857, -0.039158955216407776, -0.01768300123512745, -0.02110973745584488, -0.007422413676977158, -0.02788473293185234, 0.03272401541471481, 0.014661719091236591, -0.0034855916164815426, 0.010378300212323666, -0.030238978564739227, -0.019945692270994186, 0.013334185816347599, -0.012621372938156128, -0.013733100146055222, 0.035784535109996796, 0.012765243649482727, 0.0027155571151524782, 0.024915767833590508, -0.051584139466285706, -0.008154845796525478, -0.022313017398118973, -0.005333020351827145, 0.006853471044450998, -0.029454229399561882, -0.0017967472085729241, -0.0012899304274469614, 0.012444804422557354, 0.015171805396676064, 0.021842168644070625, 0.005133563652634621, 0.012026271782815456, 0.02793704904615879, 0.007160830777138472, 0.004842552822083235, 0.062204401940107346, -0.01948792301118374, -0.023411665111780167, 0.016414323821663857, -0.013890049420297146, 0.002274136058986187, 0.013785416260361671, 0.00799789559096098, -0.023516299203038216, -0.03123299404978752, -0.01041099801659584, 0.0524473637342453, -0.0077101546339690685, 0.011973955668509007, 0.011895480565726757, 0.005493239965289831, -0.005333020351827145, -0.0022512474097311497, 0.04266416281461716, -0.003711206838488579, 0.02963733859360218, 0.04151320084929466, 0.0037340952549129725, -0.02260075882077217, 0.008403349667787552, 0.001956966705620289, 0.004505764693021774, -0.04360586404800415, 0.042925745248794556, 0.040911559015512466, 0.00024809499154798687, -0.0173298642039299, -0.00394009193405509, 0.009057306684553623, -0.05660653114318848, 0.0034103866200894117, 0.01322301384061575, 0.014347819611430168, -0.006392430979758501, -0.004744458943605423, 0.011875861324369907, -0.0012139079626649618, 0.008252939209342003, 0.009397364221513271, -0.004894869402050972, 0.02976812981069088, -0.014504769816994667, -0.044521402567625046, 0.007023499812930822, 0.01319685485213995, -0.007088895421475172, -0.020468859001994133, -0.0015940205194056034, -0.02099202387034893, -0.0039008543826639652, -0.03983907029032707, -0.015446467325091362, 0.03288096562027931, -0.0009188097901642323, 0.029166487976908684, -0.020311908796429634, 0.016035029664635658, -0.018611621111631393, 0.018323879688978195, 0.0027188267558813095, -0.03727555647492409, -0.00952815543860197, -0.019971851259469986, -0.01930481567978859, 0.03329949826002121, -0.039603643119335175, -0.016767460852861404, 0.025975177064538002, -0.020638886839151382, 0.004649635404348373, 0.014635561034083366, -0.009011529386043549, -0.025478171184659004, 0.0012106382055208087, 0.030552877113223076, 0.012248617596924305, -0.0010177207877859473, -0.004630016628652811, -0.024850372225046158, -0.02475881762802601, -0.025164270773530006, 0.017722237855196, -0.002401657635346055, -0.015250280499458313, 0.028643323108553886, 0.04381512850522995, 0.022195305675268173, 0.010430616326630116, 0.023450903594493866, 0.014164711348712444, 0.02974197082221508, 0.01934405229985714, 0.0071935285814106464, -0.028460215777158737, 0.016584353521466255, -0.011097652837634087, -0.015459546819329262, -0.01234017126262188, 0.02271847054362297, -0.016270453110337257, -0.0013790321536362171, -0.01572112925350666, -0.007631679996848106, -0.002391848247498274, 0.03356108069419861, -0.018938599154353142, -0.009645868092775345, -0.0068207732401788235, 0.0017575097735971212, -0.02458878792822361, -0.022391492500901222, -0.04391976073384285, 0.018624698743224144, -0.01948792301118374, -0.04431213438510895, 0.007487809285521507, 0.01154234353452921, -0.008540680631995201, 0.008769565261900425, -0.002143344609066844, 0.02432720549404621, 0.03654312714934349, -0.018847044557332993, 0.014962539076805115, -0.002911744173616171, 0.009999005123972893, 0.002153153996914625, 0.02256152220070362, -0.037877198308706284, -0.02133208140730858, -0.013458438217639923, -0.012961430475115776, -0.026890717446804047, -0.005633840803056955, -0.01402084156870842, 0.009070385247468948, 0.027570832520723343, 0.00480331527069211, -0.0351567380130291, -0.0006788892787881196, -0.014570165425539017, 0.0019308084156364202, -0.001156686688773334, 0.0043717036023736, 0.02770162560045719, -0.003000028431415558, -0.021632902324199677, 0.03366571292281151, -0.002522639697417617, -0.0008885642746463418, -0.02974197082221508, 0.025386616587638855, -0.032227009534835815, -0.03894968703389168, -0.00573193421587348, 0.023437824100255966, -0.01948792301118374, -0.015564179979264736, 0.009966307319700718, 0.004659444559365511, 0.02258767932653427, 0.031102200970053673, 0.008122147992253304, 0.0009604995721019804, 0.012712926603853703, 0.0029019347857683897, -0.015524942427873611, -0.009273112751543522, 0.015106409788131714, 0.058489926159381866, -0.013536913320422173, 0.016231216490268707, -0.007023499812930822, 0.013798495754599571, -0.01927865669131279, -0.013759258203208447, -0.001634075422771275, 0.008985371328890324, -0.004649635404348373, 0.002125360770151019, 0.018611621111631393, -0.010855688713490963, -0.008514521643519402, -0.029088014736771584, -0.024117939174175262, -0.008102528750896454, -0.0039237430319190025, 0.00010565495176706463, -0.004070883151143789, -0.0006331122713163495, 0.037955671548843384, -0.010097098536789417, -0.0073635573498904705, 0.0046463655307888985, 0.01922634057700634, -0.016440482810139656, -0.004352084826678038, -0.04070229455828667, -0.03711860626935959, -0.035941485315561295, 0.01500177662819624, -0.008919975720345974, -0.002143344609066844, 0.029009539633989334, -0.0007786177447997034, -0.01755221001803875, 0.008161385543644428, 0.003554257098585367, -0.013255711644887924, 0.030212819576263428, -0.008468745276331902, 0.04616937413811684, -0.013242632150650024, 0.01770916022360325, -0.052264254540205, -0.02458878792822361, 0.009848594665527344, 0.009966307319700718, -0.02971581183373928, -0.009031148627400398, -0.015171805396676064, 0.013510754331946373, 0.035863008350133896, -0.0177614763379097, 0.03157304972410202, 0.02992507815361023, -0.019880296662449837, 0.02621060237288475, 0.0017624144675210118, 0.001411729957908392, -0.034476619213819504, -0.05032854154706001, -0.013863891363143921, 0.02243073098361492, -0.018467750400304794, -0.033953454345464706, 0.053362902253866196, -0.012614833191037178, 0.023045450448989868, -0.0044011315330863, 0.0013430644758045673, 0.042978063225746155, -0.0009629519190639257, -0.011516185477375984, 0.007409334648400545, 0.04436445236206055, 0.012634452432394028, -0.00966548640280962, -0.04080692678689957, 0.016963647678494453, -0.049936167895793915, -0.006461096461862326, -0.015315676108002663, -0.03180847689509392, 0.011588120833039284, -0.030605195090174675, -0.023045450448989868, 0.009011529386043549, 0.01595655456185341, 0.006232211831957102, 0.03871426358819008, -0.024837292730808258, -0.03874042257666588, -0.021737536415457726, -0.01926557719707489, 0.01931789331138134, 0.016296612098813057, -0.00017789678531698883, 0.0024964814074337482, 0.009292731061577797, 0.010796832852065563, 0.0028398088179528713, -0.030474403873085976, -0.0026893988251686096, -0.0348951518535614, -0.03306407481431961, -0.003590224776417017, -0.03672623261809349, -0.02788473293185234, -0.016048109158873558, 0.007912881672382355, -0.004963534884154797, 0.020429620519280434, 0.009201177395880222, 0.015367993153631687, 0.016427403315901756, -0.021750614047050476, 0.015315676108002663, -0.021868327632546425, 0.018350036814808846, 0.015551100485026836, 0.011064955033361912, -0.01739525981247425, -0.023254716768860817, 0.009822436608374119, -0.00975050125271082, -0.03813878074288368, 0.04025760293006897, -0.011051875539124012, 0.0027319060172885656, 0.016205057501792908, -0.0130856828764081, 0.01062026433646679, -0.05592641606926918, 0.03172999992966652, 0.018480828031897545, -0.009070385247468948, 0.01234017126262188, 0.0016684081638231874, 0.02252228371798992, 0.004430559463799, 0.0017460655653849244, -0.01768300123512745, -0.030866777524352074, 0.012961430475115776, 0.0036163830664008856, -0.005620761774480343, 0.002328087342903018, 0.004849092103540897, 0.013484596274793148, 0.007533586118370295, -0.04174862429499626, 0.011561962775886059, 0.028878748416900635, -0.02997739613056183, 0.025792069733142853, 0.008351032622158527, 0.01141155231744051, -0.0016455196309834719, 0.004348814953118563, 0.014465532265603542, -0.0034855916164815426, 0.0021351701579988003, 0.014125474728643894, 0.0005403321119956672, -0.03976059332489967, -0.025347378104925156, -0.022352255880832672, 0.009469299577176571, -0.009959767572581768, 0.027230774983763695, 0.02126668579876423, -0.01407315768301487, -0.03123299404978752, -0.011980494484305382, -0.005794060416519642, 0.03144225850701332, 0.014844827353954315, 0.016558194532990456, -0.007206607609987259, 0.018611621111631393, -0.013628466986119747, 0.04030991718173027, -0.013759258203208447, 0.02607981115579605, -0.008579918183386326, -0.014844827353954315, 0.006958104204386473, 0.009397364221513271, -0.037798721343278885, 0.0352090522646904, 0.0066703627817332745, -0.023594774305820465, -0.006722679361701012, 0.013321107253432274, 0.002977140014991164, -0.0043717036023736, 0.019998010247945786, -0.04182709753513336, -0.015263359993696213, -0.03000355325639248, -0.016741303727030754, -0.011882401071488857, 0.025007320567965508, -0.062361352145671844, 0.03175615891814232, -0.044416770339012146, 0.04598626494407654, -0.01066604070365429, 0.004620207007974386, -0.01740833930671215, -0.01152926404029131, -0.021449794992804527, 0.0015833937795832753]
metadata : {"source": "pydantic_ai_docs", "crawled_at": "2025-03-16T00:34:52.368237", "url_path": "/agents/", "chunk_size": 4249}
updated_dt: 2025-03-16T00:34:52.371301
---
```

Running `pyright` would identify the same issues.
## System Prompts
System prompts might seem simple at first glance since they're just strings (or sequences of strings that are concatenated), but crafting the right system prompt is key to getting the model to behave as you want.
Generally, system prompts fall into two categories:
  1. **Static system prompts** : These are known when writing the code and can be defined via the `system_prompt` parameter of the [`Agent` constructor](https://ai.pydantic.dev/api/agent/#pydantic_ai.agent.Agent.__init__).
  2. **Dynamic system prompts** : These depend in some way on context that isn't known until runtime, and should be defined via functions decorated with [`@agent.system_prompt`](https://ai.pydantic.dev/api/agent/#pydantic_ai.agent.Agent.system_prompt).


You can add both to a single agent; they're appended in the order they're defined at runtime.
Here's an example using both types of system prompts:
system_prompts.py```
fromdatetimeimport date
frompydantic_aiimport Agent, RunContext
agent = Agent(
  'openai:gpt-4o',
  deps_type=str, [](https://ai.pydantic.dev/agents/#__code_12_annotation_1)
  system_prompt="Use the customer's name while replying to them.", [](https://ai.pydantic.dev/agents/#__code_12_annotation_2)
)

@agent.system_prompt [](https://ai.pydantic.dev/agents/#__code_12_annotation_3)
defadd_the_users_name(ctx: RunContext[str]) -> str:
  return f"The user's name is {ctx.deps}."

@agent.system_prompt
defadd_the_date() -> str: [](https://ai.pydantic.dev/agents/#__code_12_annotation_4)
  return f'The date is {date.today()}.'

result = agent.run_sync('What is the date?', deps='Frank')
print(result.data)
#> Hello Frank, the date today is 2032-01-02.

```

_(This example is complete, it can be run "as is")_
## Reflection and self-correction
Validation errors from both function tool parameter validation and [structured result validation](https://ai.pydantic.dev/results/#structured-result-validation) can be passed back to the model with a request to retry.
You can also raise [`ModelRetry`](https://ai.pydantic.dev/api/exceptions/#pydantic_ai.exceptions.ModelRetry) from within a [tool](https://ai.pydantic.dev/tools/) or [result validator function](https://ai.pydantic.dev/results/#result-validators-functions) to tell the model it should retry generating a response.
  * The default retry count is **1** but can be altered for the [entire agent](https://ai.pydantic.dev/api/agent/#pydantic_ai.agent.Agent.__init__), a [specific tool](https://ai.pydantic.dev/api/agent/#pydantic_ai.agent.Agent.tool), or a [result validator](https://ai.pydantic.dev/api/agent/#pydantic_ai.agent.Agent.__init__).
  * You can access the current retry count from within a tool or result validator via [`ctx.retry`](https://ai.pydantic.dev/api/tools/#pydantic_ai.tools.RunContext).


Here's an example:
tool_retry.py```
frompydanticimport BaseModel
frompydantic_aiimport Agent, RunContext, ModelRetry
fromfake_databaseimport DatabaseConn

classChatResult(BaseModel):
  user_id: int
  message: str

agent = Agent(
  'openai:gpt-4o',
  deps_type=DatabaseConn,
  result_type=ChatResult,
)

@agent.tool(retries=2)
defget_user_by_name(ctx: RunContext[DatabaseConn], name: str) -> int:
"""Get a user's ID from their full name."""
  print(name)
  #> John
  #> John Doe
  user_id = ctx.deps.users.get(name=name)
  if user_id is None:
    raise ModelRetry(
      f'No user found with name {name!r}, remember to provide their full name'
    )
  return user_id

result = agent.run_sync(
  'Send a message to John Doe asking for coffee next week', deps=DatabaseConn()
)
print(result.data)
"""
user_id=123 message='Hello John, would you be free for coffee sometime next week? Let me know what works for you!'
"""

```

## Model errors
If models behave unexpectedly (e.g., the retry limit is exceeded, or their API returns `503`), agent runs will raise [`UnexpectedModelBehavior`](https://ai.pydantic.dev/api/exceptions/#pydantic_ai.exceptions.UnexpectedModelBehavior).
In these cases, [`capture_run_messages`](https://ai.pydantic.dev/api/agent/#pydantic_ai.agent.capture_run_messages) can be used to access the messages exchanged during the run to help diagnose the issue.
agent_model_errors.py