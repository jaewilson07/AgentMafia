---
url: https://ai.pydantic.dev/message-history/
session_id: pydantic_ai_docs
chunk_number: 1
title: Messages and Chat History in PydanticAI
summary: This section discusses how PydanticAI grants access to messages exchanged during agent runs, allowing for coherent conversations and further interactions. It includes various aspects such as accessing messages from results, using messages for subsequent agent runs, storing and loading messages in JSON format, and additional utilization methods.
embedding: [0.02406356856226921, 0.02702299878001213, -0.009320993907749653, -0.0034900663886219263, 0.026877453550696373, 0.018338767811655998, -0.008296108804643154, -0.004151086788624525, -0.0062887901440262794, -0.0014637962449342012, -0.02061898447573185, -0.023432869464159012, -0.016774149611592293, -0.024597235023975372, 0.00368715962395072, -0.00032975213252939284, -0.03114679642021656, 0.0022771849762648344, 0.020437052473425865, 0.03514930605888367, 0.040316179394721985, -0.00843559019267559, 0.0037356747779995203, 0.010327685624361038, -0.02818736433982849, -0.0011446569114923477, -0.01340234000235796, 0.04754495248198509, -0.0383998267352581, -0.022219987586140633, -0.010145753622055054, -0.005964344367384911, -0.05186280980706215, -0.02585863322019577, 0.010721871629357338, 0.002810852834954858, -0.02564031444489956, -0.0042299241758883, -0.010327685624361038, -0.015185276046395302, 0.005464030895382166, -0.012783770449459553, 0.011861980892717838, 0.020958591252565384, -0.019212042912840843, 0.00740464124828577, 0.011959010735154152, 0.017538266256451607, 0.02294771745800972, 0.05108656734228134, -0.05176578089594841, 0.03248096629977226, 0.004724173340946436, -0.024196984246373177, 0.001336443703621626, -0.007295481860637665, -0.011595146730542183, -0.011006899178028107, -0.014979085884988308, -0.06535005569458008, 0.006513173226267099, 0.0066829766146838665, -0.013341696001589298, -0.002913947682827711, -0.028793806210160255, 0.0172350462526083, -0.0357314869761467, 0.03643495962023735, -0.020327892154455185, 0.015209533274173737, 0.027217060327529907, 0.010163946077227592, -0.04844248667359352, -0.01909075304865837, -0.04841822758316994, -0.0437607616186142, 0.050310321152210236, 0.06486489623785019, -0.0018814823124557734, -0.03818150609731674, 0.02680468000471592, -0.017416978254914284, 0.002688048407435417, 0.025252191349864006, -0.01681053638458252, -0.013838977552950382, -0.031437888741493225, -0.020897947251796722, -0.0075501869432628155, -0.04477958381175995, -0.042159758508205414, -0.002014899393543601, -0.01176495011895895, 0.03165620565414429, 0.06568966060876846, 0.00888435635715723, -0.012541194446384907, -0.03970973938703537, -0.018654117360711098, 0.006961939390748739, 0.045555826276540756, -0.05705394223332405, -0.07175406813621521, 0.004008573014289141, 0.030225005000829697, 0.013438726775348186, 0.008860099129378796, 0.0022574756294488907, -0.03330572322010994, -0.029958171769976616, -0.04987368360161781, -0.0001345540367765352, -0.007459220942109823, 0.012856543064117432, -0.04672019183635712, 0.028526971116662025, 0.002418182324618101, -0.03890923783183098, 0.02098284848034382, 0.022486822679638863, -0.055695515125989914, -0.009533247910439968, -0.02728983201086521, 0.009187577292323112, 0.02346925623714924, 0.018569214269518852, -0.04114094004034996, -0.05894603952765465, -0.015937261283397675, 0.009466540068387985, 0.03694436699151993, 0.008453783579170704, 0.009339187294244766, -0.029303215444087982, -0.02247469313442707, 0.005530739203095436, -0.02157716080546379, -0.019794225692749023, -0.04773901402950287, 0.01913926936686039, 0.0020861560478806496, -0.03003094531595707, -0.052008356899023056, 0.01480928249657154, -0.0016950018471106887, 0.0316319465637207, -0.06864909082651138, 0.015015472657978535, -0.0451677031815052, -0.02918192744255066, 0.04482809826731682, 0.04509493336081505, -0.03784190118312836, 0.002765369601547718, -0.019806353375315666, 0.030176490545272827, 0.03029777854681015, 0.03655624762177467, 0.003975219093263149, -0.02702299878001213, -0.012783770449459553, 0.056714337319135666, -0.0224261786788702, -0.00957569945603609, -0.04228104650974274, -0.03701714053750038, -0.0005492079071700573, -0.015828102827072144, -0.022911330685019493, -0.051523204892873764, 0.002765369601547718, -0.01950313337147236, -0.008829777128994465, -0.009223963133990765, 0.01682266592979431, -0.043542444705963135, -0.10770387202501297, -0.047690499573946, -0.04082559049129486, -0.03784190118312836, -0.007556251250207424, -0.02274152636528015, -0.06001337245106697, -0.053221236914396286, -0.022486822679638863, 0.007998953573405743, 0.010085109621286392, 0.004017669707536697, -0.007168129552155733, 0.014542448334395885, 0.010952319018542767, 0.022122956812381744, 0.03665327653288841, 0.01850857026875019, -0.025761602446436882, -0.012086363509297371, 0.052056871354579926, 0.02061898447573185, -0.0020876722410321236, 0.002992785070091486, 0.013936007395386696, 0.019017981365323067, 0.04075281694531441, -0.01202571950852871, -0.024500206112861633, -0.05831534042954445, 0.012516936287283897, 0.02214721590280533, -0.022802170366048813, -0.0173927191644907, 0.044439975172281265, -0.01115850917994976, 0.005363968200981617, -0.021322455257177353, -0.0059188613668084145, -0.0022574756294488907, -0.08839479833841324, 0.029836883768439293, -0.027095772325992584, 0.01786574348807335, 0.02612546645104885, 0.015731072053313255, 0.03553742542862892, -0.014530319720506668, 0.0002374594478169456, 0.03648347407579422, 0.027144286781549454, -0.01989125646650791, 0.004251149483025074, 0.04043746739625931, 0.03660476207733154, -0.004157151095569134, -0.031001249328255653, -0.04531325027346611, 0.06729066371917725, -0.07558677345514297, 0.016737764701247215, 0.016725635156035423, 0.04194144159555435, -0.04024340584874153, -0.03366958722472191, -0.007938308641314507, 0.045070674270391464, 0.04099539294838905, -0.0003579895419534296, 0.025737343356013298, -0.0048090750351548195, -0.0626332014799118, 0.03485821187496185, 0.025979921221733093, 0.021225424483418465, -0.005430676508694887, -0.00641007861122489, -0.03432454541325569, 0.0012075750855728984, -0.04536176472902298, -0.03165620565414429, -0.015270177274942398, -0.014190712943673134, 0.002574340905994177, 0.06442826241254807, 0.0002463665441609919, -0.06496193259954453, 0.02036427892744541, -0.011916560120880604, 0.010727936401963234, -0.004727205261588097, -0.01861773058772087, -0.02828439511358738, -0.055598486214876175, 0.015609784051775932, -0.004205666482448578, 0.0470598004758358, 0.011813465505838394, -0.041165195405483246, 0.0347854383289814, 0.005172939505428076, 0.04002508893609047, 0.06408865749835968, -0.011892302893102169, 0.01186804473400116, 0.05928564444184303, 0.030176490545272827, 0.015670428052544594, -0.013766204006969929, -0.004417920485138893, 0.018751146271824837, -0.003499163081869483, 0.03459138050675392, 0.027993304654955864, 0.01633751392364502, 0.01861773058772087, 0.030540354549884796, -0.03922458738088608, 0.03313592076301575, 0.006846715696156025, 0.06175992265343666, 0.02670764923095703, -0.018811792135238647, 0.0034900663886219263, -0.02891509421169758, -0.029060639441013336, 0.0012197039322927594, -0.009478668682277203, 0.0055701578967273235, 0.04900041222572327, -0.00561564089730382, -0.0390305258333683, 0.03248096629977226, -0.05191132426261902, -0.010758258402347565, 0.05627769976854324, -0.03218987211585045, -0.016689248383045197, -0.027799243107438087, -0.01445754710584879, 0.06796987354755402, -0.019478876143693924, 0.02527644857764244, 0.003608322236686945, -0.008047468028962612, -0.025494767352938652, 0.05637472867965698, 0.0066647836938500404, -0.05516184866428375, -0.013741946779191494, -0.018326638266444206, -0.005624737590551376, -0.010176075622439384, 0.02433040179312229, 0.0224261786788702, -0.045919690281152725, -0.012989960610866547, 0.02595566213130951, 0.002866948489099741, -0.005212358199059963, -0.06365201622247696, 0.00856294296681881, 0.013584272004663944, 0.04764198139309883, -0.012917187064886093, 0.0026395332533866167, -0.03177749365568161, -0.024075696244835854, 0.002305990783497691, -0.016931824386119843, 0.018120449036359787, 0.020655371248722076, -0.04320283606648445, -0.009436218068003654, 0.027993304654955864, 0.007744248025119305, 0.034809697419404984, -0.011043285951018333, 0.01131618395447731, -0.008932871744036674, -0.012280425056815147, 0.038472600281238556, 0.013099119998514652, 0.015464238822460175, -0.05123211070895195, 0.007483478635549545, 0.00938770268112421, 0.005861249752342701, -0.0032111036125570536, 0.016373898833990097, -0.06743621081113815, -0.025421995669603348, 0.03898201137781143, 0.0053275818936526775, 0.0645252913236618, -0.008411332964897156, 0.017477622255682945, -0.005106230732053518, -0.026828937232494354, -0.013159763999283314, -0.04764198139309883, 0.02559179812669754, -0.00512745650485158, 0.07966205477714539, 0.018532829359173775, 0.04101965203881264, -0.0009263381944037974, -0.024912584573030472, 0.04679296538233757, 0.053851936012506485, -0.0013447823002934456, -0.00513048842549324, 0.023966537788510323, 0.057975731790065765, 0.050843991339206696, -0.031801752746105194, -0.021443743258714676, 0.014651607722043991, -0.019284814596176147, 0.04208698496222496, -0.009351315908133984, 0.0026819841004908085, 0.03083144687116146, 0.0015433916123583913, 0.010903804562985897, 0.01718652993440628, -0.009975950233638287, 0.014918441884219646, 0.00397825101390481, 0.014445417560636997, 0.013062733225524426, -0.009909241460263729, 0.03061312809586525, 0.004317857790738344, 0.03611961007118225, 0.037453778088092804, 0.009957756847143173, -0.04543453827500343, -0.032020069658756256, -0.0363621860742569, 0.020061058923602104, 0.030200747773051262, 0.01956377737224102, 0.04429443180561066, 0.010655163787305355, -0.05404599756002426, -0.023784605786204338, 0.03138937056064606, -0.032577995210886, 0.05181429535150528, 0.04397908225655556, -0.07587786018848419, -0.007920116186141968, -0.026513587683439255, -0.04072855785489082, 0.011534502729773521, 0.03616812452673912, -0.004942492116242647, 0.00872668158262968, -0.01602216437458992, 0.03985528275370598, 0.0068345870822668076, -0.037138428539037704, -0.030103716999292374, 0.0572965182363987, -0.016252610832452774, 0.016373898833990097, 0.04574988782405853, -0.07257882505655289, 0.0034142611548304558, -0.016313254833221436, -0.009860726073384285, 0.05079547315835953, -0.03531910851597786, 0.0159736480563879, -0.016907567158341408, -0.05758761242032051, -0.0056975106708705425, -0.059673767536878586, -0.038884978741407394, 0.0767996534705162, 0.02627101168036461, 0.03425177186727524, -0.03750229254364967, -0.01887243613600731, 0.0041874730959534645, -0.01882391981780529, 0.03182600811123848, -0.03791467472910881, -0.01781722903251648, 0.040267664939165115, -0.038424085825681686, -0.007792763411998749, 0.06365201622247696, 0.02189251035451889, -0.026101209223270416, -0.02447594702243805, -0.0007197693339549005, 0.00801108218729496, -0.02961856499314308, 0.018423669040203094, -0.002719886600971222, 0.027629438787698746, 0.012735255062580109, 0.011516309343278408, 0.013329567387700081, 0.009223963133990765, -0.00481210695579648, -0.027071513235569, 0.05176578089594841, 0.006137180142104626, -0.08242741972208023, -0.004375469870865345, 0.022074442356824875, -0.004748431034386158, 0.0064161429181694984, -0.00519416481256485, -0.012383519671857357, 0.016094936057925224, 0.009339187294244766, -0.03396068140864372, -0.009696987457573414, 0.022862814366817474, -0.032286904752254486, -0.02813884988427162, -0.01611919514834881, 0.009733373299241066, 0.029278958216309547, 0.040583014488220215, -0.036459214985370636, -0.015670428052544594, 0.009533247910439968, 0.02320242114365101, 0.048636544495821, -0.00216196128167212, 0.0013788945507258177, 0.02554328367114067, 0.006695105694234371, 0.00798682402819395, -0.0018299348885193467, 0.01427561417222023, 0.004590756259858608, -0.014578835107386112, 0.01503972988575697, 0.032966118305921555, 0.004126829095184803, 0.04742366448044777, -0.015670428052544594, -0.010612712241709232, -0.0009073869441635907, 0.005188100505620241, -0.014833539724349976, 0.02426975779235363, 0.006228146143257618, 0.0344700925052166, -0.008550814352929592, 0.013184021227061749, 0.021492259576916695, -0.007653282023966312, -0.013281052000820637, 0.008265786804258823, 0.018811792135238647, -0.04574988782405853, -0.024609364569187164, -0.012274360284209251, 0.017259303480386734, -0.04048598185181618, 0.006895231083035469, -0.012468420900404453, 0.022656625136733055, 0.01839941181242466, -0.009848597459495068, 0.018836049363017082, -0.014287743717432022, 0.0027759824879467487, 0.015439980663359165, 0.044391460716724396, -0.01654370315372944, 0.012480550445616245, -0.008841905742883682, -0.03953993692994118, -0.014020909555256367, 0.016992468386888504, 0.014421160332858562, -0.002845723181962967, -0.0060704718343913555, 0.03374236077070236, 0.02400292456150055, -0.010715807788074017, 0.026974482461810112, 0.04873357713222504, 0.000495007261633873, -0.030443323776125908, 0.006085632834583521, 0.0535123310983181, 0.02009744569659233, 0.012905058450996876, -0.006998326163738966, 0.007228773552924395, -0.021213296800851822, 0.004129861481487751, 0.023335838690400124, -0.06302131712436676, 0.022074442356824875, -0.008241529576480389, -0.040898364037275314, 0.037720613181591034, 0.015476367436349392, -0.0004351212119217962, 0.009260349906980991, -0.014178584329783916, 0.005588351283222437, 0.019212042912840843, 0.0012098492588847876, 0.03114679642021656, -0.027411120012402534, 0.012941445223987103, -0.017101628705859184, -0.04635632783174515, 0.01215913612395525, 0.013159763999283314, -0.017780842259526253, -0.05928564444184303, 0.005979505367577076, 0.04118945449590683, 0.005497385282069445, -0.027774985879659653, 0.03155917674303055, 0.04514344781637192, 0.0034900663886219263, -0.0032444577664136887, -0.014324129559099674, -0.026731906458735466, 0.003420325694605708, -0.018544957041740417, -0.00740464124828577, -0.02918192744255066, -0.015925133600831032, -0.019551649689674377, 0.017247173935174942, -0.06384608149528503, 0.02675616554915905, 0.07243327796459198, -0.0066587189212441444, -0.0196729376912117, 0.044124625623226166, 0.0019284815061837435, 0.005973441060632467, 0.023978665471076965, 0.0004995555500499904, -0.011916560120880604, -0.00025811634259298444, -0.01671350561082363, 0.0056944782845675945, -0.027047256007790565, 0.025664571672677994, 0.024184856563806534, 0.020158089697360992, -0.031074022874236107, 0.002184702781960368, -0.015949390828609467, -0.0006325934664346278, -0.011310119181871414, -0.010461102239787579, 0.05943119153380394, 0.019212042912840843, -0.01978209614753723, -0.009866790845990181, -0.00018486967019271106, -0.011528437957167625, 0.0019072560826316476, 0.010394394397735596, -0.013220408000051975, -0.014639479108154774, -0.04684147983789444, -0.01861773058772087, 0.02025512047111988, -0.023032618686556816, -0.007889794185757637, -0.022377662360668182, -0.017999161034822464, 0.0035355493891984224, -0.006073503755033016, -0.022559594362974167, -0.035197820514440536, 0.035610198974609375, -0.022862814366817474, 0.012589709833264351, -0.062051013112068176, 0.02115265280008316, 0.018908821046352386, -0.003474905388429761, 0.012698868289589882, 0.020121702924370766, -0.03706565871834755, -0.0053275818936526775, 0.01326892338693142, -0.0015828103059902787, 0.02320242114365101, -0.004554369952529669, -0.016276869922876358, -0.03330572322010994, -0.005142617505043745, 0.05530739575624466, -0.02864825911819935, 0.012880801223218441, -0.04456126317381859, 0.0387151762843132, 0.04405185580253601, -0.011649725958704948, -0.011989332735538483, -0.00978188868612051, 0.030782930552959442, 0.041213709861040115, -0.02348138391971588, -0.01052174624055624, -0.016992468386888504, 0.025931404903531075, 0.027580924332141876, 0.03468840941786766, -0.0008065661531873047, 0.0037538681644946337, 0.02627101168036461, -0.06496193259954453, -0.016992468386888504, -0.02617398090660572, -0.021286068484187126, 0.0010112399468198419, -0.028745289891958237, 0.0027941756416112185, -0.0025106645189225674, 0.026901710778474808, 0.02998242899775505, -0.009721244685351849, -0.007768505718559027, 0.006349434144794941, -0.028405683115124702, 0.03330572322010994, -0.019115012139081955, 0.008532620966434479, -0.017962774261832237, -0.01311124861240387, 0.008083854801952839, -2.9161270504118875e-05, 0.010321620851755142, -0.00039646061486564577, -0.0338393934071064, -0.000230636986088939, 0.017113756388425827, -0.02644081600010395, -0.011946882121264935, 0.02886657789349556, -0.035658713430166245, 0.028308652341365814, -2.3013952159089968e-05, 0.0009991111000999808, -0.0028396586421877146, -0.04213550314307213, -0.015670428052544594, -0.007877664640545845, -0.05336678400635719, 0.03806021809577942, 0.004090442787855864, 0.0047090123407542706, -0.032286904752254486, -0.020946461707353592, 0.017841486260294914, -0.03944290429353714, 0.012492679059505463, -0.028163107112050056, -0.023881636559963226, 0.0029291086830198765, -0.02183186635375023, 0.012444163672626019, -0.014554576948285103, 0.007829150184988976, 0.00538216158747673, 0.0020270280074328184, 0.03689585253596306, 0.00714993616566062, 0.01855708658695221, -0.004736301954835653, -0.015500624664127827, 0.002530373865738511, -0.0055489325895905495, 0.04177163541316986, -0.01081283763051033, 0.0363621860742569, -0.0010203365236520767, 0.022498950362205505, 0.04097113385796547, 0.008065661415457726, -0.014117940329015255, -0.0030049136839807034, -0.051571719348430634, 0.005245712120085955, 0.013147634454071522, 0.019054368138313293, 0.054143026471138, -0.034397318959236145, 0.06287577748298645, -0.027362605556845665, 0.03594980761408806, -0.005276034120470285, -0.0003225506516173482, -0.00014914650819264352, 0.0074531566351652145, 0.020048929378390312, -0.006240275222808123, 0.0010984158143401146, -0.0084598483517766, -0.02716854400932789, -0.012122750282287598, -0.016216224059462547, -0.026925968006253242, -0.02285068668425083, 0.02479129657149315, -0.0031534917652606964, -0.016580089926719666, 0.016798408702015877, 0.026998741552233696, -0.06923127174377441, 0.012710997834801674, 0.034809697419404984, -0.04198995605111122, 0.04223253205418587, -0.024936841800808907, -0.014615221880376339, 0.023930151015520096, -0.008186949416995049, -0.023335838690400124, 0.004151086788624525, -0.028405683115124702, -0.01028523501008749, -0.031171053647994995, 0.037672098726034164, 0.013632787391543388, 0.010218526236712933, -0.025664571672677994, 0.03578000143170357, -0.033232953399419785, -0.004111668094992638, -0.013438726775348186, -0.05064992979168892, 0.030055202543735504, 0.008156627416610718, 0.0006045455811545253, -0.011219153180718422, 0.029060639441013336, 0.044609781354665756, -0.010503552854061127, -0.017853615805506706, -0.004245085176080465, 0.030855704098939896, -0.027192801237106323, -0.03277205675840378, 0.024888327345252037, -0.013802590779960155, 0.057878702878952026, -0.017162272706627846, -0.03670179098844528, 0.014906313270330429, -0.022377662360668182, 0.0036052900832146406, -0.0015812942292541265, 0.012298617511987686, -0.00952111929655075, -0.011595146730542183, 0.0026819841004908085, 0.03764783963561058, 0.01406942494213581, 0.0018390314653515816, 0.010442908853292465, -0.022511079907417297, 0.040898364037275314, 0.04718108847737312, 0.028842320665717125, -0.04402759671211243, -0.012140943668782711, 0.01147385872900486, -0.004405791871249676, -0.0007599460077472031, -0.002944269683212042, -0.006488915532827377, -0.021977411583065987, 0.01282015722244978, -0.008672102354466915, -0.01488205511122942, -0.012341069057583809, 0.014530319720506668, -0.003114073071628809, -0.03250522166490555, 0.0225838515907526, -0.007350061554461718, -0.026610618457198143, 0.004257213789969683, -0.009502925910055637, 0.01176495011895895, 0.010539939627051353, -0.012019654735922813, 0.005958280060440302, -0.0112130893394351, -0.014772895723581314, 0.030952734872698784, 0.03199581429362297, -0.01830238103866577, 0.006209953222423792, 0.01750187948346138, -0.02231701835989952, -0.0103883296251297, -0.006907359696924686, 0.04543453827500343, -0.0103883296251297, 0.003908510319888592, 0.0038508984725922346, -0.021552903577685356, -0.012892929837107658, -0.007513800635933876, -0.0011082703713327646, 0.032747797667980194, -0.02527644857764244, 0.050843991339206696, 0.012747383676469326, 0.02104349248111248, 0.00120302673894912, -0.015439980663359165, 0.0406072698533535, -0.03366958722472191, -0.011807400733232498, -0.0031171052251011133, 0.012037848122417927, 0.004032830707728863, 0.02137097157537937, 0.01557339821010828, 0.006206920836120844, -0.015439980663359165, -0.012104556895792484, 0.04553157091140747, -0.04492512717843056, -0.05433708801865578, -0.0007011970737949014, -0.0012795899529010057, 0.01250480767339468, 0.005861249752342701, 0.018848177045583725, 0.007841278798878193, 0.031001249328255653, -0.02072814479470253, 0.009126933291554451, 0.00551254628226161, 0.010527811013162136, -0.03374236077070236, 0.0026107272133231163, -0.03318443521857262, 0.04664742201566696, -0.06108070909976959, 0.01898159459233284, 0.006270597223192453, -0.02823588065803051, 0.0005059989634901285, -0.005636866670101881, 0.003823608858510852, -0.013074861839413643, 0.01978209614753723, 0.0012553322594612837, -0.050261806696653366, -0.028696775436401367, 0.001552488305605948, -0.0037538681644946337, -0.025519026443362236, 0.0021513483952730894, 0.0273868627846241, -0.015767458826303482, 0.025931404903531075, 0.0123168108984828, -0.007416769862174988, 0.03917606920003891, -0.00861752312630415, -0.01324466522783041, -0.01892095059156418, 0.007228773552924395, -0.023129649460315704, 0.06792136281728745, -0.0018769340822473168, -0.012723126448690891, 0.012062106281518936, -0.006822458002716303, -0.01429987233132124, -0.012262231670320034, -0.009187577292323112, 0.04048598185181618, -0.013681302778422832, 0.02728983201086521, 0.010309492237865925, 0.005439773201942444, 0.042159758508205414, 0.02976411022245884, 0.041480544954538345, 0.01496695727109909, 0.0023999891709536314, 0.049558334052562714, -0.005594415590167046, 0.023930151015520096, 0.020424922928214073, -0.013487241230905056, -0.0006174324662424624, 0.01427561417222023, -0.003044332377612591, 0.032020069658756256, -0.05428857356309891, 0.009830404072999954, 0.02554328367114067, 0.027532408013939857, 0.0009756115032359958, 0.026295268908143044, 0.006695105694234371, -0.006761814001947641, 0.013378082774579525, -0.0035021952353417873, -0.04378502070903778, -0.004702948033809662, 0.014942699111998081, 0.05302717536687851, 0.01012756023555994, -0.046598903834819794, 0.022777913138270378, 0.031753234565258026, 0.0011348022380843759, -0.0003379011759534478, 0.0035173562355339527, -0.021116266027092934, 0.02263236790895462, -0.020740272477269173, -0.014117940329015255, 0.009866790845990181, 0.0011514793150126934, -0.006598074920475483, -0.020388538017868996, -0.00490610534325242, 0.01607067883014679, 0.0041905054822564125, -0.017623167484998703, -0.004157151095569134, -0.008344624191522598, 0.016931824386119843, 0.005309388507157564, 0.015452109277248383, 0.002330248476937413, -0.002057350240647793, -0.0025273417122662067, -0.006258468143641949, 0.04077707603573799, -0.002654694253578782, -0.034809697419404984, -0.005800605285912752, 0.043130062520504, -0.04325135052204132, 0.007143871858716011, 0.0025682763662189245, 0.04252362251281738, 0.00245305267162621, -0.0037508357781916857, 0.020206604152917862, -0.027483893558382988, -0.033281467854976654, 0.03160769119858742, 0.011746756732463837, 0.013014217838644981, 0.023760346695780754, 0.020473439246416092, -0.008023210801184177, -0.006325176917016506, 0.029206184670329094, 0.005861249752342701, 0.0021225425880402327, 0.0077988277189433575, -0.00042337144259363413, 0.008866162970662117, 0.025300707668066025, 0.001654067076742649, 0.03759932518005371, 0.01707737147808075, 0.006895231083035469, -0.005888539366424084, -0.008156627416610718, 0.0014653124380856752, -0.03830279782414436, -0.035197820514440536, 0.009430153295397758, 0.03034629300236702, 0.025082388892769814, -0.011310119181871414, 0.024670008569955826, 0.009884984232485294, 0.01548849605023861, -0.018265994265675545, -0.028163107112050056, -0.023396482691168785, -0.01765955425798893, -0.013741946779191494, 0.003001881530508399, -0.033548299223184586, -0.010673357173800468, -0.04567711427807808, -0.02627101168036461, 0.0014850216684862971, -0.019393974915146828, -0.014239228330552578, -0.05462817847728729, 0.018836049363017082, 0.007125678472220898, 0.008508363738656044, 0.0243182722479105, -0.016846923157572746, -0.01744123548269272, 0.014251356944441795, -0.016749892383813858, 0.013293180614709854, 0.005900668445974588, 0.02653784677386284, -0.018799662590026855, -0.02405143901705742, -0.00023480626987293363, -0.011352570727467537, -0.005879442673176527, -0.013353824615478516, 0.01451819110661745, -0.0012864123564213514, -0.029206184670329094, 0.006034085061401129, 0.010218526236712933, -0.024196984246373177, -0.005391257815063, 0.01055206824094057, 0.004997071344405413, -0.002521277405321598, 0.007877664640545845, -0.036192383617162704, -0.03791467472910881, -0.0018754178890958428, -0.005336678586900234, -0.011771014891564846, 0.02680468000471592, 0.008453783579170704, -0.01893308013677597, -0.01733207516372204, -0.02442743256688118, 0.015245920047163963, 0.006616268306970596, 0.023432869464159012, 0.002037640893831849, 0.023250937461853027, -0.002148316241800785, 0.0032990374602377415, -0.012444163672626019, -0.05710245668888092, 0.01141927856951952, -0.02612546645104885, -0.014530319720506668, -0.015379336662590504, -0.02792053110897541, 0.0017738391179591417, -0.0006651896401308477, -0.00699226139113307, -0.003756900317966938, 0.030540354549884796, -0.0036143867764621973, 0.023020489141345024, 0.004572562873363495, 0.01049142424017191, 0.04203847050666809, 0.06850354373455048, 0.012577580288052559, -0.016276869922876358, 0.012492679059505463, -0.006986197084188461, -0.005154746118932962, -0.006488915532827377, -0.02433040179312229, 0.001483505591750145, -0.012650353834033012, -0.0012378970859572291, 0.020024672150611877, 0.002609211253002286, -0.00512745650485158, 0.0004999345983378589, -0.0007345513440668583, 0.01846005581319332, 0.048078618943691254, 0.02368757501244545, 0.001722291694022715, 0.008787326514720917, 0.050843991339206696, 0.000990014523267746, 0.0066829766146838665, -0.012565451674163342, 0.004354244563728571, 0.02527644857764244, -0.013887492939829826, 0.044124625623226166, 0.04373650625348091, 0.005248744506388903, -0.048296939581632614, -0.0009619665797799826, 0.007914051413536072, -0.03835131227970123, 0.018860306590795517, 0.0022438305895775557, -0.005706607364118099, -0.006109890062361956, 0.0017010662704706192, 0.03662902116775513, 0.01860560104250908, -0.008120241574943066, -0.0026243722531944513, 0.020534083247184753, 0.011310119181871414, 0.045919690281152725, -0.04065578430891037, -0.0039448970928788185, -0.018265994265675545, -0.002531890058889985, -0.014554576948285103, 1.026922109303996e-05, -0.024342531338334084, -0.005594415590167046, -0.03917606920003891, 0.011328312568366528, 0.05074695870280266, -0.018435798585414886, 0.010624841786921024, -0.007350061554461718, 0.01570681482553482, 0.0074288989417254925, 0.031801752746105194, -0.004308761563152075, -0.04907318204641342, 0.01427561417222023, 0.001450909418053925, 0.00045483052963390946, 0.042184017598629, -0.020716015249490738, -0.012298617511987686, 0.013669174164533615, 0.019321201369166374, -0.006980132777243853, 0.023723961785435677, 0.0015570365358144045, -0.0010097237536683679, 0.03451860696077347, 0.03684733808040619, 0.022086571902036667, -0.016204096376895905, -0.015524882823228836, 0.013475112617015839, -0.003769029164686799, 0.01813257671892643, 0.024281887337565422, -0.015876617282629013, 0.008362817578017712, -0.009381637908518314, 0.04451274871826172, -0.001799612888135016, 0.01474863849580288, 0.008641780354082584, 0.013171892613172531, 0.023335838690400124, 0.02675616554915905, -0.023930151015520096, -0.00512745650485158, -0.016470929607748985, -0.013766204006969929, -0.0020816077012568712, -0.002992785070091486, 0.01340234000235796, -0.003026139223948121, 0.011085736565291882, -0.029739852994680405, 0.007865536026656628, 0.00914512574672699, 0.03983102738857269, -0.03245670720934868, 0.01451819110661745, 0.00038167863385751843, -0.00586731405928731, -0.023760346695780754, -0.0280175618827343, -0.033863648772239685, -0.005336678586900234, -0.01940610259771347, -0.04303303360939026, 0.005903700366616249, 0.019078625366091728, 0.014130068942904472, 0.00798076018691063, -0.020024672150611877, -0.008374946191906929, 0.005291195120662451, -0.02607695199549198, 0.0033566493075340986, 0.010079044848680496, 0.005357903894037008, 0.00688916677609086, 0.03197155520319939, -0.010746129788458347, -0.03442157432436943, 0.010758258402347565, -0.022195730358362198, 0.0011234314879402518, 0.008447718806564808, -0.008441654965281487, 0.028041819110512733, 0.03929735720157623, -0.01888456381857395, -0.03844834119081497, 0.02716854400932789, -0.0035112916957587004, 0.00022059281764086336, -0.02966707944869995, 0.01218339428305626, 0.010849224403500557, -0.033499784767627716, -0.01055206824094057, 0.018265994265675545, 0.021189039573073387, 0.034130483865737915, -0.02733834832906723, -0.0002662653860170394, -0.03138937056064606, -0.0218803808093071, 0.008283980190753937, 0.01400878094136715, -0.004505854565650225, -0.02918192744255066, -0.005006168037652969, -0.012310747057199478, 0.01112818717956543, 6.79403092362918e-05, 0.026319527998566628, -0.013450855389237404, 0.015452109277248383, -0.0029184960294514894, -0.007356125861406326, 0.02124968357384205, 0.010776451788842678, 0.06525301933288574, 0.004020702093839645, -0.0017116789240390062, -0.006713298615068197, -0.025737343356013298, -0.020388538017868996, 0.011012963950634003, -0.007713926024734974, 0.023457126691937447, -0.0008005017298273742, -0.01004265807569027, -0.0051790038123726845, -0.005533771589398384, -0.013050604611635208, -0.012808027677237988, -0.02648933045566082, 0.014263485558331013, -0.023978665471076965, 0.00014137649850454181, 0.005879442673176527, 0.013305309228599072, 0.03590128943324089, 0.00021377035591285676, 0.02389376424252987, 0.006258468143641949, -0.007410705555230379, -0.026901710778474808, -0.0035598070826381445, -0.0605955570936203, -0.01031555701047182, -0.010060851462185383, 0.030758673325181007, -0.0023757314775139093, 0.005333646200597286, -0.004881847649812698, 0.0027865951415151358, -0.026731906458735466, 0.006037117447704077, 0.020315764471888542, -0.015342949889600277, 0.021189039573073387, 0.013923878781497478, 0.014639479108154774, -0.01427561417222023, 0.04097113385796547, -0.0041905054822564125, -0.03267502784729004, -0.0009831920033320785, -0.011382892727851868, -0.03134085610508919, -0.027362605556845665, -0.0015153437852859497, -0.014214970171451569, -0.006079568061977625, -0.012480550445616245, -0.023384355008602142, 0.04397908225655556, -0.010012336075305939, 0.033766619861125946, 0.01728356070816517, 0.014033038169145584, -0.01839941181242466, -0.03539188206195831, -0.035197820514440536, 0.040583014488220215, -0.008095983415842056, 0.0011188831413164735, 0.03864240273833275, -0.021698448807001114, 0.031122537329792976, 0.006507108919322491, 0.003802383318543434, 0.02146800234913826, -0.017695941030979156, 0.004517983179539442, -0.0031868459191173315, 0.040049344301223755, 0.006018924061208963, -0.02036427892744541, -0.03522207587957382, -0.013899621553719044, -0.017780842259526253, 0.02755666710436344, -0.029060639441013336, -0.008362817578017712, -0.0204613097012043, -0.04053449630737305, -0.004590756259858608, -0.006458593532443047, -0.006919488776475191, 0.013838977552950382, 0.004627142567187548, 0.0019087721593677998, -0.03267502784729004, -0.03781764209270477, 0.025421995669603348, 0.006234210450202227, -0.0026167917530983686, 0.001460764091461897, -0.00866603758186102, -3.110377656412311e-05, 0.020315764471888542, 0.01803554780781269, -0.035197820514440536, 0.01581597328186035, -0.02040066570043564, -0.024888327345252037, 0.002058866200968623, -0.0014440870145335793, 0.011225217953324318, 0.0006318354280665517, 0.007271224167197943, 0.02214721590280533, 0.00025299948174506426, 0.02881806343793869, -0.0027395959477871656, 0.02595566213130951, 0.0003699288354255259, 0.014554576948285103, -0.04315432161092758, 0.03029777854681015, -0.004175344482064247, 0.009721244685351849, -0.014372644945979118, -0.026513587683439255, -0.013305309228599072, -0.023554157465696335, -0.03769635409116745, 0.028090333566069603, -0.012892929837107658, 0.0043390835635364056, 0.006773943081498146, 0.0030867832247167826, 0.005030425731092691, -0.03420325741171837, 0.024815553799271584, 0.001742000924423337, -0.0024045375175774097, 0.0018981595057994127, -0.018787533044815063, 0.015100373886525631, 0.024888327345252037, 0.0228992011398077, -0.015294435434043407, -0.0061917598359286785, -0.025761602446436882, 0.014469675719738007, -0.009139061905443668, 0.00890861451625824, -0.028405683115124702, 0.013184021227061749, 0.002631952753290534, -0.05652027577161789, 0.0037720613181591034, 0.006003763061016798, -0.019588034600019455, 0.008508363738656044, 0.007544122636318207, 0.0011150928912684321, 0.011801336891949177, -0.002249895129352808, -0.007889794185757637, 0.012128814123570919, -0.0035385815426707268, 0.0050789411179721355, -0.0032656833063811064, -0.04012211784720421, -0.02891509421169758, 0.0043117934837937355, -0.026950225234031677, -0.022705141454935074, 0.0051790038123726845, -0.009921370074152946, -0.01525804866105318, -0.020376408472657204, -0.02241404913365841, -0.008605393581092358, 0.0437607616186142, 0.004302696790546179, -0.0018936111591756344, 0.002507632365450263, 0.020109575241804123, 0.0204613097012043, 0.02670764923095703, -0.004524047952145338, 0.024415303021669388, -0.028090333566069603, 0.013669174164533615, 0.0043360511772334576, 0.03007945977151394, -0.0399765707552433, -0.0028730130288749933, 0.016094936057925224, -0.0026713714469224215, 0.038157250732183456, 0.01638602837920189, -0.02120116725564003, -0.0009316445793956518, 0.04562859982252121, -0.009515054523944855, -0.004545273259282112, -0.015888746827840805, 0.0036356120835989714, 0.009660600684583187, 0.020655371248722076, -0.04361521825194359, 0.021273940801620483, -0.044803839176893234, -0.000612126081250608, -0.01728356070816517, 0.013378082774579525, -0.010533875785768032, -0.014469675719738007, 0.03951567783951759, 0.01282015722244978]
metadata : {"source": "pydantic_ai_docs", "crawled_at": "2025-03-14T10:14:08.717420", "url_path": "/message-history/", "chunk_size": 4668}
updated_dt: 2025-03-14T10:14:08.719823
---
_graph.state  ](https://ai.pydantic.dev/api/pydantic_graph/state/)
    * [ pydantic_graph.mermaid  ](https://ai.pydantic.dev/api/pydantic_graph/mermaid/)
    * [ pydantic_graph.exceptions  ](https://ai.pydantic.dev/api/pydantic_graph/exceptions/)


Table of contents 
  * [ Accessing Messages from Results  ](https://ai.pydantic.dev/message-history/#accessing-messages-from-results)
  * [ Using Messages as Input for Further Agent Runs  ](https://ai.pydantic.dev/message-history/#using-messages-as-input-for-further-agent-runs)
  * [ Storing and loading messages (to JSON)  ](https://ai.pydantic.dev/message-history/#storing-and-loading-messages-to-json)
  * [ Other ways of using messages  ](https://ai.pydantic.dev/message-history/#other-ways-of-using-messages)
  * [ Examples  ](https://ai.pydantic.dev/message-history/#examples)


# Messages and chat history
PydanticAI provides access to messages exchanged during an agent run. These messages can be used both to continue a coherent conversation, and to understand how an agent performed.
### Accessing Messages from Results
After running an agent, you can access the messages exchanged during that run from the `result` object.
Both [`RunResult`](https://ai.pydantic.dev/api/agent/#pydantic_ai.agent.AgentRunResult) (returned by [`Agent.run`](https://ai.pydantic.dev/api/agent/#pydantic_ai.agent.Agent.run), [`Agent.run_sync`](https://ai.pydantic.dev/api/agent/#pydantic_ai.agent.Agent.run_sync)) and [`StreamedRunResult`](https://ai.pydantic.dev/api/result/#pydantic_ai.result.StreamedRunResult) (returned by [`Agent.run_stream`](https://ai.pydantic.dev/api/agent/#pydantic_ai.agent.Agent.run_stream)) have the following methods:
  * [`all_messages()`](https://ai.pydantic.dev/api/agent/#pydantic_ai.agent.AgentRunResult.all_messages): returns all messages, including messages from prior runs. There's also a variant that returns JSON bytes, [`all_messages_json()`](https://ai.pydantic.dev/api/agent/#pydantic_ai.agent.AgentRunResult.all_messages_json).
  * [`new_messages()`](https://ai.pydantic.dev/api/agent/#pydantic_ai.agent.AgentRunResult.new_messages): returns only the messages from the current run. There's also a variant that returns JSON bytes, [`new_messages_json()`](https://ai.pydantic.dev/api/agent/#pydantic_ai.agent.AgentRunResult.new_messages_json).


StreamedRunResult and complete messages
On [`StreamedRunResult`](https://ai.pydantic.dev/api/result/#pydantic_ai.result.StreamedRunResult), the messages returned from these methods will only include the final result message once the stream has finished.
E.g. you've awaited one of the following coroutines:
  * [`StreamedRunResult.stream()`](https://ai.pydantic.dev/api/result/#pydantic_ai.result.StreamedRunResult.stream)
  * [`StreamedRunResult.stream_text()`](https://ai.pydantic.dev/api/result/#pydantic_ai.result.StreamedRunResult.stream_text)
  * [`StreamedRunResult.stream_structured()`](https://ai.pydantic.dev/api/result/#pydantic_ai.result.StreamedRunResult.stream_structured)
  * [`StreamedRunResult.get_data()`](https://ai.pydantic.dev/api/result/#pydantic_ai.result.StreamedRunResult.get_data)


**Note:** The final result message will NOT be added to result messages if you use [`.stream_text(delta=True)`](https://ai.pydantic.dev/api/result/#pydantic_ai.result.StreamedRunResult.stream_text) since in this case the result content is never built as one string.
Example of accessing methods on a [`RunResult`](https://ai.pydantic.dev/api/agent/#pydantic_ai.agent.AgentRunResult) :
run_result_messages.py```
frompydantic_aiimport Agent
agent = Agent('openai:gpt-4o', system_prompt='Be a helpful assistant.')
result = agent.run_sync('Tell me a joke.')
print(result.data)
#> Did you hear about the toothpaste scandal? They called it Colgate.
# all messages from the run
print(result.all_messages())
"""
[
  ModelRequest(
    parts=[
      SystemPromptPart(
        content='Be a helpful assistant.',
        dynamic_ref=None,
        part_kind='system-prompt',
      ),
      UserPromptPart(
        content='Tell me a joke.',
        timestamp=datetime.datetime(...),
        part_kind='user-prompt',
      ),
    ],
    kind='request',
  ),
  ModelResponse(
    parts=[
      TextPart(
        content='Did you hear about the toothpaste scandal? They called it Colgate.',
        part_kind='text',
      )
    ],
    model_name='gpt-4o',
    timestamp=datetime.datetime(...),
    kind='response',
  ),
]
"""

```

_(This example is complete, it can be run "as is")_
Example of accessing methods on a [`StreamedRunResult`](https://ai.pydantic.dev/api/result/#pydantic_ai.result.StreamedRunResult) :
streamed_run_result_messages.py