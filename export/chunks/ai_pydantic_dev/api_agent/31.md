---
url: https://ai.pydantic.dev/api/agent/
session_id: pydantic_ai_docs
chunk_number: 31
title: Agent Parameters Configuration
summary: This section outlines the parameters for configuring the agent API, including `user_prompt` (required input for conversation), `result_type` (optional custom result type), and `message_history` (optional history of messages).
embedding: [0.011425969190895557, 0.04324870929121971, -0.01783537119626999, -0.0377717986702919, -0.003942431416362524, 0.03517498821020126, 0.03182274103164673, 0.06751709431409836, 0.014790019951760769, -0.00019439197785686702, -0.0026617315597832203, -0.01646614447236061, -0.0025953357107937336, -0.021223029121756554, -0.035788778215646744, -0.03583599627017975, -0.032955896109342575, -0.002685338957235217, 0.0012187307002022862, 0.011408263817429543, 0.016383517533540726, -0.007932078093290329, -0.011195797473192215, 0.017245186492800713, -0.03099648281931877, 0.016489751636981964, -0.05897122249007225, 0.058074142783880234, -0.02140008471906185, -0.005907745566219091, -0.019003937020897865, -0.01507330872118473, -0.03467923402786255, -0.019310832023620605, 0.02426838129758835, -0.029320359230041504, 0.013515221886336803, 0.017516672611236572, -0.004854266531765461, 0.0004503844538703561, 0.025377927348017693, -0.0724274292588234, 0.02644025906920433, 0.014353283680975437, 0.005172966048121452, 0.04915055260062218, 0.02252143621444702, 0.026534689590334892, 0.034490372985601425, 0.008551771752536297, -0.034962523728609085, 0.04152537137269974, 0.009602299891412258, -0.0026484522968530655, -0.004458842799067497, -0.03562352806329727, 0.008445538580417633, 0.0008616691920906305, -0.02239159494638443, -0.04985877498984337, -5.588308340520598e-05, -0.02929675206542015, -0.03616649657487869, 0.002627795794978738, -0.019712157547473907, 0.006409402005374432, 0.006084800697863102, 0.04669538885354996, -0.03437233716249466, -0.0007513784803450108, 0.015628082677721977, 0.017575690522789955, -0.03855084255337715, -0.018130464479327202, -0.04246966540813446, 0.004228671081364155, 0.045585840940475464, 0.023996897041797638, -0.015061505138874054, -0.020774489268660545, 0.011603024788200855, -0.010753159411251545, -0.025259891524910927, 0.02076268568634987, -0.01027510967105627, -0.01667861081659794, -0.05873514711856842, 0.0011759423650801182, 0.005172966048121452, -0.05335266515612602, -0.0021172864362597466, 0.03382936865091324, -0.011638435535132885, 0.022568650543689728, 0.0724274292588234, 0.06270118802785873, -0.002906657988205552, -0.006716297939419746, 0.030642371624708176, 0.034962523728609085, 0.05278608947992325, -0.02603893354535103, -0.06265397369861603, 0.010475772432982922, 0.004990008659660816, 0.030099403113126755, 0.0003854641690850258, 0.03328640013933182, -0.017575690522789955, -0.017245186492800713, -0.021482711657881737, 0.05349431186914444, -0.009944606572389603, 0.0017115346854552627, -0.05155850574374199, -0.01417622808367014, -0.019405262544751167, -0.06284283101558685, 0.006173328496515751, -0.030429905280470848, -0.023914270102977753, 0.030264655128121376, -0.02252143621444702, 0.019924623891711235, 0.010587907396256924, 0.0009442949667572975, -0.03392379730939865, -0.043201494961977005, -0.029249537736177444, -0.018732450902462006, 0.030925661325454712, -0.008120937272906303, 0.01255912333726883, -0.008717022836208344, -0.00672810198739171, 0.02099875919520855, -0.04494844004511833, -0.009614103473722935, -0.04131290689110756, 0.016489751636981964, -0.01735142059624195, -0.01507330872118473, -0.02913150005042553, 0.0011552858632057905, -0.023052601143717766, 0.035883210599422455, -0.09641251713037491, 0.03630814328789711, -0.047285571694374084, -0.004087026696652174, 0.01929902844130993, 0.019960034638643265, -0.03293228894472122, 0.019901016727089882, -0.0067871203646063805, -0.0011331540299579501, -0.019617728888988495, 0.011390558443963528, -0.013562437146902084, -0.041737839579582214, -0.047450821846723557, 0.010540693067014217, -0.022332577034831047, -0.02528349868953228, -0.021081386134028435, -0.04074632748961449, 0.008652103133499622, 0.006167426705360413, -0.012323049828410149, -0.03052433580160141, -0.010145269334316254, 0.010115760378539562, -0.027030443772673607, 0.01885048858821392, 0.042422451078891754, -0.04277656227350235, -0.05826300010085106, -0.05042535066604614, -0.008687513880431652, -0.06789480894804001, -0.03508055955171585, -0.013963761739432812, -0.003384707262739539, -0.034868091344833374, -0.03883413225412369, 0.0026218940038233995, -0.002705995226278901, 0.0011132352519780397, 0.007949783466756344, 0.027620628476142883, 0.02752619795501232, 0.04284738376736641, 0.03732325881719589, -0.019511494785547256, -0.04426382854580879, -0.024716921150684357, 0.057932496070861816, -0.03519859537482262, 0.03139780834317207, 0.021825017407536507, 0.030311869457364082, 0.026534689590334892, 0.03536384552717209, -0.032412923872470856, 0.018519984558224678, -0.03937710076570511, -0.021588943898677826, 0.022249950096011162, -0.035340238362550735, 0.018224893137812614, 0.03590681776404381, -0.010357735678553581, 0.03323918208479881, -0.0009391308994963765, -0.02627500891685486, 0.007276973221451044, -0.03014661744236946, -0.015262167900800705, -0.011313834227621555, 0.011508595198392868, -0.016820253804326057, 0.04900890961289406, 0.008587182499468327, -0.029343966394662857, 0.012334853410720825, 0.01844916306436062, -0.017811764031648636, -0.019452476873993874, -0.0014459517551586032, 0.0339001901447773, 0.02242700569331646, -0.019511494785547256, -0.02691240794956684, -0.021482711657881737, 0.053541526198387146, -0.013515221886336803, 0.04308345913887024, 0.011532202363014221, 0.015982192009687424, -0.053069379180669785, -0.004497204907238483, -0.0018369487952440977, 0.04877283424139023, 0.0001408142998116091, 0.01991282030940056, 0.021966662257909775, -0.008687513880431652, -0.047993794083595276, 0.02392607368528843, 0.027266517281532288, 0.01864982582628727, -0.0593489408493042, -0.028800997883081436, -0.03460841253399849, -0.013149308040738106, -0.00901801697909832, -0.012901430018246174, 0.007288776803761721, -0.03269621357321739, -0.02058563008904457, 0.05297495052218437, 0.010576103813946247, -0.02123483270406723, 0.0508502833545208, 0.025071032345294952, -0.01027510967105627, 0.006568752229213715, -0.04509008675813675, 0.021836820989847183, -0.033876582980155945, -0.004281787667423487, -0.0028461641632020473, 0.023052601143717766, -0.03439594432711601, -0.05972665920853615, 0.006562849972397089, 0.04957548528909683, 0.007371402811259031, -0.001455542165786028, -0.01698550581932068, -0.031799133867025375, 0.04452350735664368, 0.024032307788729668, 0.04218637943267822, -0.01861441507935524, 0.016560573130846024, 0.011508595198392868, -0.0014304593205451965, 0.0053087081760168076, 0.02766784280538559, 0.0070645068772137165, -0.0031161734368652105, 0.02575564570724964, 0.0015669395215809345, 0.007701905909925699, -0.029863329604268074, 0.018826881423592567, 0.002099580829963088, -0.014636572450399399, 0.001980068627744913, 0.014199836179614067, 0.023253263905644417, 0.015946781262755394, -0.01962953247129917, 0.02311161905527115, 0.07238020747900009, -0.04284738376736641, -0.009720336645841599, 0.028541315346956253, -0.023902466520667076, -0.002112860092893243, 0.08456161618232727, -0.025991719216108322, -0.0005009190062992275, 0.03609567508101463, -0.03791344538331032, 0.05930172652006149, -0.0009730664896778762, 0.04634127765893936, -0.007253366056829691, -0.03439594432711601, 0.018248500302433968, 0.010965625755488873, -0.013349970802664757, -0.014270657673478127, -0.02481135167181492, 0.03491530567407608, -0.0033197870943695307, -0.027573414146900177, 0.038432806730270386, -0.0477813258767128, -0.032578177750110626, -0.040510255843400955, -0.009537379257380962, 0.03633175045251846, -0.002636648714542389, -0.032578177750110626, -0.01991282030940056, 0.043437570333480835, 0.06128474324941635, -0.022002073004841805, 0.009407538920640945, -0.05642162635922432, -0.00778453191742301, 0.0001603641576366499, 0.033876582980155945, 0.03446676582098007, -0.0020184305030852556, -0.002016955055296421, 0.013196522369980812, 0.019794784486293793, 0.03229488804936409, 0.0258264672011137, 0.026015326380729675, 0.003989646211266518, -0.018437359482049942, -0.018437359482049942, 0.019558709114789963, -0.030972875654697418, 0.011207601055502892, -0.05302216485142708, 0.002561400178819895, -0.023831645026803017, 0.0002482463023625314, -0.011136778630316257, 0.008433734998106956, -0.022840134799480438, -0.026015326380729675, -0.031161734834313393, 0.019039347767829895, 0.06331498175859451, 0.03654421493411064, 0.00012624412192963064, 0.004148995969444513, -0.015191345475614071, -0.011638435535132885, -0.04924498498439789, 0.022887349128723145, 0.0017735040746629238, 0.06454256176948547, 0.03522220253944397, 0.011266619898378849, 0.007247463800013065, -0.007442224770784378, 0.0010682337451726198, 0.03791344538331032, -0.008994409814476967, -0.0017410438740625978, -0.0186852365732193, -0.002134992042556405, 0.04617602378129959, -0.07407993823289871, -0.011219404637813568, 0.001015117159113288, -0.018401948735117912, 0.048442333936691284, -0.008840961381793022, 0.004396873526275158, 0.03786622732877731, 0.013349970802664757, 0.03189356252551079, 0.02426838129758835, -0.007324188016355038, 0.040345001965761185, -0.007660592906177044, -0.01092431228607893, 0.02721930295228958, -0.01684386096894741, 0.03208242356777191, 0.037889838218688965, 0.055996693670749664, -0.020255127921700478, 0.021494515240192413, -0.03267260640859604, -0.011561711318790913, -0.022604061290621758, 0.002402050420641899, -0.019074758514761925, 0.058546289801597595, 0.11775358766317368, -0.00500181270763278, -0.07356058061122894, 0.005898892879486084, 0.006674985401332378, -0.02340671233832836, 0.06421206146478653, 0.026156971231102943, -0.03640257194638252, 0.020396770909428596, 0.0077432189136743546, 0.011715159751474857, -0.02069186419248581, 0.0300757959485054, 0.017197972163558006, -0.02813998982310295, 0.0004998123622499406, -0.005370677914470434, 7.70582482800819e-06, 0.011142680421471596, -0.017540279775857925, 0.03925906494259834, -0.020479397848248482, -0.0001680181158008054, 0.04981156066060066, -0.035505492240190506, 0.018401948735117912, -0.018012426793575287, 0.008545869961380959, 0.024929387494921684, -0.018661629408597946, -0.029485611245036125, -0.01758749410510063, -0.019723961129784584, -0.014860842376947403, -0.030170224606990814, -0.035717956721782684, 0.0701611191034317, 0.027573414146900177, 0.024882173165678978, 0.03616649657487869, 0.015734314918518066, -0.027101265266537666, -0.019180992618203163, -0.0009339667740277946, -0.029768899083137512, 0.024244774132966995, 0.009950508363544941, 0.039589568972587585, -0.028494101017713547, 0.06359826773405075, 0.023300478234887123, -0.0012113534612581134, -0.02416214719414711, 0.026487475261092186, -0.01977117545902729, -0.0285177081823349, -0.0033079832792282104, 0.042965423315763474, 0.010912508703768253, -0.0036797996144741774, 0.0207980964332819, -0.011343343183398247, 0.020597433671355247, 0.025543179363012314, -0.032412923872470856, -0.023394908756017685, -0.010310521349310875, -0.02776227332651615, -0.04957548528909683, 0.015427418984472752, 0.05420253053307533, 0.007837648503482342, 0.003275523195043206, -0.010587907396256924, 0.060765381902456284, -0.01902754418551922, 0.0008166676270775497, 0.014695590361952782, -0.020845312625169754, -0.013007663190364838, -0.03243653103709221, 0.010835785418748856, 0.0013802937464788556, 0.0254487507045269, 0.009354421868920326, -0.020125286653637886, 0.025850074365735054, -0.006922862492501736, 0.009395735338330269, 0.02194305509328842, -0.04098240286111832, 0.007253366056829691, -0.00518181873485446, 0.00951377209275961, -0.024173950776457787, 0.013597847893834114, -0.003977842628955841, 0.002580581232905388, 0.00582807045429945, 0.018248500302433968, 0.002914035227149725, -0.0047893463633954525, -0.010109858587384224, -0.00942524429410696, -0.021258441731333733, 0.00772551354020834, 0.016053015366196632, -0.06534521281719208, 0.00801470410078764, -0.01124891359359026, 0.018909506499767303, 0.021329263225197792, -0.010534791275858879, 0.042658526450395584, 0.005615604110062122, 0.017504869028925896, 0.005990371108055115, 0.028494101017713547, -0.023571964353322983, -0.019145580008625984, -0.03366411477327347, -0.009301305748522282, -0.0554773323237896, -0.005946107674390078, -0.01414081733673811, 0.004963450599461794, 0.05132243409752846, -0.015403811819851398, 0.011243011802434921, -0.01722157932817936, 0.03800787404179573, 0.017410438507795334, 0.02058563008904457, -0.03413626551628113, 0.041903089731931686, 0.024173950776457787, -0.0047539351508021355, -0.008480949327349663, -0.003842100268229842, -0.03331000730395317, -0.004907383117824793, -0.016005799174308777, 0.029698077589273453, -0.02055021934211254, -0.008846864104270935, 0.010859392583370209, 0.04211555793881416, 0.013314559124410152, -0.021022366359829903, 0.027809487655758858, 0.012346656993031502, 0.015321185812354088, 0.004128339700400829, -0.011968938633799553, 0.034797269850969315, -0.04100601002573967, 0.01946428045630455, 0.004337855149060488, -0.07195527851581573, 0.029721684753894806, -0.01019248366355896, -0.03189356252551079, 0.020833509042859077, 0.03427790850400925, 0.018508180975914, -0.013786707073450089, -0.03699275478720665, 0.03066597878932953, -0.009991820901632309, -0.003136829938739538, 0.01425885409116745, -0.015698904171586037, 0.02474052831530571, 0.008970802649855614, -0.03637896478176117, 0.013822117820382118, 0.005190671421587467, -0.012747982516884804, -0.034962523728609085, 0.011366951279342175, 0.06213460862636566, -0.01810685731470585, -0.01841375231742859, 0.04530255123972893, 0.012033859267830849, 0.004010302945971489, 0.029249537736177444, 0.005568389315158129, -0.0196649432182312, -0.02296997606754303, 0.0032489649020135403, -0.02837606519460678, 0.0020715470891445875, -0.021529925987124443, -0.02483495883643627, 0.025920897722244263, -0.02721930295228958, 0.016206461936235428, 0.056846559047698975, 0.002514185383915901, -0.0006720724632032216, 0.036567822098731995, 0.009407538920640945, 0.042965423315763474, -0.0020877772476524115, -0.03316836059093475, -0.03862166404724121, 0.02226175367832184, -0.007164838258177042, 0.048914480954408646, -0.04025057330727577, 0.02276931330561638, 0.0404866486787796, 0.028848212212324142, -0.040581077337265015, 0.006669083144515753, -0.0055418312549591064, -0.01949969120323658, -0.03678029030561447, -0.00898260623216629, 0.02705405093729496, 0.030642371624708176, 0.0028520659543573856, -0.0018295715562999249, -0.006946470122784376, -0.002284013433381915, -0.035269416868686676, -0.0005448139272630215, 0.019759371876716614, -0.03347525745630264, -0.0477813258767128, -0.04211555793881416, 0.010198385454714298, -0.008427833206951618, 0.015557260252535343, 0.001535954768769443, -0.009065232239663601, 0.014671983197331429, -0.00717074004933238, 0.005479861982166767, 0.004213916603475809, 0.020479397848248482, -0.0018162924097850919, 0.008687513880431652, -0.024103129282593727, 0.02282833121716976, 0.009938704781234264, 0.03371133282780647, 0.0269832294434309, -0.003122075228020549, -0.03500973805785179, 0.0032902779057621956, 0.02317063882946968, 0.011036447249352932, 0.004379168152809143, -0.010458067059516907, -0.008020605891942978, -0.016477948054671288, -0.008622593246400356, 0.025141853839159012, -0.017681922763586044, 0.0017646512715145946, -0.028470493853092194, 0.04117126017808914, 0.03576517105102539, -0.029320359230041504, 0.012818804010748863, 0.003948333207517862, -0.002748783677816391, 0.046128809452056885, -0.020503005012869835, -0.028800997883081436, 0.0015875959070399404, 0.03633175045251846, 0.004001449793577194, 0.01240567583590746, -0.01177417766302824, -0.008109132759273052, 0.0013397184666246176, -0.03137420117855072, -0.020986955612897873, -0.010794471949338913, 0.006273659877479076, 0.033947404474020004, -0.0004385807551443577, -0.04556223377585411, -0.03250735625624657, -0.003302081488072872, 0.022651275619864464, -0.0003476554702501744, -0.009732140228152275, 0.004323100671172142, -0.025259891524910927, 0.03262539207935333, -0.015946781262755394, -0.012275834567844868, 0.008126839064061642, 0.014601161703467369, -0.005524125881493092, 0.012771589681506157, 0.0021600748877972364, 0.010263306088745594, -0.0008299467735923827, 0.033333614468574524, 0.00881145242601633, -0.042044732719659805, 0.014731002040207386, 0.0485839769244194, 0.02286374196410179, 0.04041582718491554, -0.007471734192222357, -0.026534689590334892, 0.01646614447236061, -0.019712157547473907, -0.0415961928665638, -0.016123836860060692, -0.03347525745630264, 0.005093290936201811, -0.0223561841994524, -0.015321185812354088, 0.016867469996213913, -0.049528270959854126, 0.00022316345712170005, 0.003883413039147854, 0.0010608563898131251, -0.013338166289031506, -0.018295714631676674, 0.039896462112665176, -0.02123483270406723, 0.0074658324010670185, -0.04962270334362984, 0.0073418933898210526, 0.0009265894768759608, 0.008870471268892288, 0.0373704731464386, 0.01588776335120201, 0.009259992279112339, -0.0035381552297621965, -0.049905989319086075, 0.017410438507795334, -0.013574240729212761, -0.013054878450930119, -0.0038775112479925156, 0.021931251510977745, 0.0034319220576435328, 0.012866019271314144, 0.01854359358549118, 0.010576103813946247, -0.008829157799482346, -0.018909506499767303, -0.04995320364832878, 0.0024669705890119076, -0.002059743506833911, 0.017611101269721985, 0.032176852226257324, -0.05788528174161911, 0.01796521246433258, 0.012122387066483498, 0.011490889824926853, -0.007335991598665714, 0.006916960701346397, 0.02252143621444702, -0.04121847450733185, -0.004889677278697491, 0.012488300912082195, -0.013857528567314148, -0.0005673147388733923, -0.0014725100481882691, -0.008953097276389599, 0.003939480520784855, -0.05689377337694168, -0.0242919884622097, 0.02045579068362713, 0.004358511418104172, 0.016796646639704704, -0.016041211783885956, 0.006734003778547049, -0.07384386658668518, -0.002601237501949072, 0.012547319754958153, -0.03963678330183029, -0.0028417378198355436, -0.017445849254727364, -0.0019815440755337477, 0.015805138275027275, -0.022202735766768456, 0.021423691883683205, 0.02929675206542015, 0.022651275619864464, -0.02085711620748043, -0.06137917563319206, 0.009354421868920326, -0.017339617013931274, 0.008646201342344284, -0.02613336406648159, 0.06048209220170975, -0.0196649432182312, -0.03914102539420128, -0.018354734405875206, -0.08489211648702621, 0.04919777065515518, 0.007802237290889025, -0.01490805670619011, 0.0015108719235286117, 0.02140008471906185, 0.0037388179916888475, -0.048914480954408646, -0.04525533691048622, 0.0009177366737276316, -0.0023769675754010677, -0.026416651904582977, -0.024410026147961617, 0.020986955612897873, -0.0009118348243646324, 0.0339001901447773, 0.00235631107352674, -0.018331127241253853, -0.0016112033044919372, 0.0025156608317047358, 0.0026189431082457304, -0.0019490838749334216, 0.03767737001180649, 0.0033404435962438583, -0.022214539349079132, 0.00751894898712635, 0.004541468806564808, 0.004910334013402462, -0.00787896104156971, 0.009242286905646324, -0.03260178491473198, 0.0007687151664867997, -0.0017071082256734371, 0.054155316203832626, -0.032035209238529205, 0.012193208560347557, -0.004963450599461794, 0.015049701556563377, -0.002086301799863577, 0.0040781740099191666, -0.004033910110592842, -0.029698077589273453, -0.005928401835262775, 0.0053205122239887714, -0.03340443596243858, -0.015203149057924747, 0.001448164926841855, -0.019889213144779205, -0.018673432990908623, 0.01077086478471756, -0.00643891142681241, -0.003104369854554534, 0.020632846280932426, -0.004765738733112812, 0.002073022536933422, 0.03052433580160141, -0.0138693330809474, 0.02483495883643627, 0.05420253053307533, -0.029768899083137512, 0.0250474251806736, -0.00886456947773695, -0.0481826514005661, 0.022568650543689728, -0.021872231736779213, -0.01167384721338749, -0.015934977680444717, 0.02055021934211254, 0.01929902844130993, -0.009850176982581615, 0.0010453640716150403, -0.027148481458425522, -0.03066597878932953, -0.010239698924124241, -0.016690414398908615, 0.044830404222011566, 0.005645113531500101, -0.019889213144779205, 0.04138372838497162, -0.009525575675070286, -0.024551669135689735, 0.012193208560347557, -0.01922820694744587, 0.027478983625769615, -0.027266517281532288, 0.02660551108419895, 0.035104166716337204, 0.03090205416083336, -0.005429696291685104, 0.012700767256319523, -0.03099648281931877, 0.009248188696801662, -0.02096334844827652, 0.014636572450399399, 0.05377759784460068, -0.0701611191034317, -0.03321557492017746, 0.014695590361952782, -0.010534791275858879, 0.042280808091163635, 0.004081124905496836, -0.025259891524910927, 0.0018044887110590935, 0.009755747392773628, -0.009248188696801662, -0.0508975014090538, -0.02551957219839096, -0.0019461329793557525, -0.003721112385392189, 0.061001457273960114, -0.011490889824926853, -0.0036591431125998497, -0.035340238362550735, 0.006191033869981766, -0.015368401072919369, -0.02835245616734028, -0.03538745641708374, -0.0493394136428833, 0.012086975388228893, -0.017292402684688568, 0.018354734405875206, -0.017681922763586044, -0.045278944075107574, -0.0030173175036907196, 0.028659353032708168, -0.0004765738849528134, -0.017304206266999245, 0.01722157932817936, -0.0014341480564326048, -0.03323918208479881, 0.005046076141297817, 0.008770139887928963, -0.004349658731371164, -0.005167064256966114, -0.030170224606990814, -0.01449492760002613, -0.020160697400569916, -0.015628082677721977, 0.006368089467287064, 0.048914480954408646, 0.013361774384975433, 0.0296744704246521, 0.019369851797819138, -0.030571550130844116, 0.0065864576026797295, 0.008156348019838333, -0.04331953078508377, -0.003747670678421855, -0.04348478466272354, 0.012818804010748863, -0.008115035481750965, -0.023147031664848328, 0.03982564061880112, 0.032011598348617554, 0.018838685005903244, -0.01962953247129917, 0.015415615402162075, 0.05018927901983261, 0.014506732113659382, 0.06926403939723969, 0.010334128513932228, -0.01687927357852459, 0.00386275677010417, 0.00836881436407566, -0.0073418933898210526, 0.017481261864304543, -0.028399672359228134, -0.029414789751172066, 0.035033345222473145, 0.01133153960108757, -0.0031663391273468733, 0.016973702237010002, -0.03231849521398544, 0.017882585525512695, 0.03833837807178497, -0.010877097956836224, -0.027620628476142883, -0.014459516853094101, 0.03208242356777191, 0.013621455058455467, 0.00603168411180377, -0.00016322286683134735, -0.01613564044237137, 0.042209986597299576, -0.001928427373059094, -0.005134603939950466, -0.03722883015871048, 0.007288776803761721, -0.0524083711206913, -0.007005488499999046, -0.018602611497044563, 0.0014562798896804452, 0.008976704441010952, 0.011957135051488876, -0.016442537307739258, 0.0019992494489997625, -0.04726196452975273, -0.008185856975615025, -0.028942640870809555, -0.0045326161198318005, -0.004538517910987139, 0.0073418933898210526, -0.0035352043341845274, -0.0062618562951684, 0.015167738310992718, 0.013338166289031506, 0.016749432310461998, 0.018083248287439346, 0.0037889836821705103, -0.0008343731751665473, -0.00901801697909832, -0.015273971483111382, 0.03918824344873428, -0.01626548171043396, -0.005527076777070761, -0.012452890165150166, 0.03859805688261986, 0.0031191243324428797, -0.006486126221716404, 0.040439434349536896, -0.04046304151415825, -0.028942640870809555, 0.036024853587150574, 0.02861213870346546, 0.0002458486706018448, 0.023465730249881744, 0.007442224770784378, -0.027880309149622917, -0.00637989304959774, 0.018319323658943176, 0.020019054412841797, -0.004730327520519495, 0.004523762967437506, -0.003915873356163502, 0.023028993979096413, 0.024386417120695114, -0.030264655128121376, 0.016041211783885956, 0.006102506536990404, 0.02535432018339634, -0.025023818016052246, 0.002925839042291045, -0.00711172167211771, -0.011555809527635574, -0.012086975388228893, 0.030170224606990814, 0.012736178934574127, 0.03498613089323044, 0.0008771615102887154, -0.026959622278809547, 0.03744129464030266, 0.0331447534263134, -0.008174053393304348, 0.006149721331894398, -0.0021733539178967476, -0.012098779901862144, -0.0014688213123008609, 0.005403137765824795, -0.01633630320429802, 0.017717335373163223, -0.036945540457963943, -0.036662254482507706, 0.03623732179403305, -0.009572790004312992, -0.004650652874261141, -0.03415987268090248, -0.00813274085521698, -0.004647701978683472, 0.030925661325454712, 0.011561711318790913, -0.045916344970464706, 0.018756059929728508, 0.02750259079039097, -0.013385381549596786, 0.043437570333480835, 0.011195797473192215, -0.007158936467021704, -0.004098830278962851, -0.02743176929652691, 0.013208325952291489, -0.01240567583590746, -0.0030837133526802063, 0.020373163744807243, 0.03375854715704918, 0.020290538668632507, -0.023394908756017685, 0.010351833887398243, 0.0012143043568357825, -0.07455208897590637, -0.0008373240707442164, 0.038432806730270386, -0.00670449435710907, 0.013172915205359459, 0.008044213056564331, -0.009743943810462952, -0.003842100268229842, -0.017740942537784576, 0.022875545546412468, -0.02922593057155609, 0.002860918641090393, -0.0023813939187675714, -0.004122437909245491, -0.00039284146623685956, -0.013503418304026127, -0.013621455058455467, 0.01933443918824196, 0.01633630320429802, -0.016454340890049934, 0.04032139480113983, -0.006049389950931072, -0.022604061290621758, 0.017009112983942032, -0.029084285721182823, -0.015026094391942024, -0.043815288692712784, -0.006173328496515751, -0.016820253804326057, -0.020396770909428596, -0.018354734405875206, 0.0019726911559700966, 0.007814041338860989, 0.014412302523851395, -0.006946470122784376, 0.015510044991970062, -0.011998448520898819, 0.013786707073450089, 0.02174239233136177, 0.02629861608147621, 0.07880141586065292, -0.0031751918140798807, 0.02051480859518051, 0.014530339278280735, 0.006533341016620398, -0.006958273705095053, 0.02219093218445778, -0.0022987681441009045, 0.008628495037555695, -0.013951958157122135, -0.010493477806448936, 0.012039761058986187, -0.0059313527308404446, 0.025920897722244263, 0.04055747017264366, 0.0150378979742527, 0.01899213343858719, 0.0258264672011137, 0.02289915271103382, 0.003213553922250867, 0.030264655128121376, 0.0500948503613472, 0.008652103133499622, -0.02497660182416439, -0.0059638130478560925, 0.02844688668847084, 0.004089977592229843, -0.022686686366796494, 0.032483749091625214, 0.04601077362895012, 0.02082170359790325, -0.021636158227920532, -0.009313109330832958, -0.008162249810993671, -0.0724274292588234, 0.001167089561931789, 0.013881136663258076, -0.017233382910490036, -0.0025068081449717283, 0.014636572450399399, -0.0031692900229245424, 0.0014179178979247808, 0.004036861006170511, -0.01056430023163557, -0.007837648503482342, 0.012665356509387493, 0.017009112983942032, -0.015392008237540722, 0.024646099656820297, -0.004376217257231474, 0.004355560522526503, -0.01902754418551922, 0.03446676582098007, -0.019582318142056465, -0.006049389950931072, -0.04966991767287254, 0.003015842055901885, 0.046128809452056885, -0.013774903491139412, 0.023571964353322983, 0.012842412106692791, -0.0012644700473174453, 0.007760924287140369, 0.02378443069756031, 0.0074658324010670185, -0.03477366268634796, 0.015899566933512688, 0.021211225539445877, -0.026416651904582977, 0.06501471251249313, -0.013916547410190105, -0.010021330788731575, 0.00825077760964632, -0.028942640870809555, 0.0036443884018808603, 0.007937979884445667, 0.01664320006966591, -0.00787896104156971, 0.03574156388640404, 0.035104166716337204, 0.011868607252836227, -0.013208325952291489, -0.026109756901860237, -0.01912197284400463, -0.011484988033771515, 0.007318286225199699, 0.031326986849308014, 0.00813274085521698, -0.005051978398114443, 0.009200974367558956, 0.024044111371040344, 0.016619591042399406, 0.034419551491737366, 0.011219404637813568, 0.014884449541568756, 0.028021953999996185, 0.019995447248220444, 0.00599627336487174, -0.02821081317961216, 0.00372996530495584, -0.00544445076957345, 0.0015433321241289377, 0.011579417623579502, 0.00377717986702919, -0.01673762872815132, 0.014152620919048786, -0.028541315346956253, 0.006120211910456419, 0.007524850778281689, 0.020125286653637886, -0.010162974707782269, -0.008345207199454308, -0.01106005534529686, -0.002936167176812887, -0.010829882696270943, -0.024079522117972374, 0.014518535695970058, 0.026180578395724297, -0.006970077287405729, -0.006852040532976389, -0.010487576015293598, 0.010434459894895554, 0.02212011069059372, 0.02085711620748043, -0.007607476320117712, 0.0012150420807301998, 0.016241874545812607, -0.01556906383484602, -0.013810314238071442, -0.020479397848248482, 0.031185341998934746, 0.0027133726980537176, 0.021636158227920532, -0.017788156867027283, -0.017634708434343338, 0.010965625755488873, -0.00317814270965755, -0.0323893167078495, 0.01905115135014057, -0.030642371624708176, -0.011709257960319519, 0.050614211708307266, 0.002155648311600089, -0.011290227063000202, -0.02099875919520855, -0.008829157799482346, -0.01630089245736599, 0.004500155802816153, 0.03312114626169205, 0.0269832294434309, -0.01364506222307682, -0.003774228971451521, 0.014424106106162071, -0.00410178117454052, 0.02936757355928421, -0.008988508023321629, 0.0073418933898210526, -0.012747982516884804, -0.026416651904582977, 0.000537067768163979, 0.009791159071028233, -0.012807000428438187, -0.012193208560347557, -0.012228620238602161, -0.0010033134603872895, 0.01783537119626999, 0.02844688668847084, 0.022450612857937813, 0.012665356509387493, 0.02521267533302307, 0.0031692900229245424, -0.002251553349196911, -0.011963036842644215, 0.003918824251741171, 0.04542058706283569, 0.010375441052019596, -0.004376217257231474, 0.014742805622518063, -0.021789606660604477, -0.013054878450930119, -0.012370264157652855, -0.0323893167078495, 0.008410126902163029, 0.009047525934875011, -0.006798923946917057, -0.005600849632173777, -0.005919549148529768, 0.0010210189502686262, -0.0011132352519780397, -0.01919279620051384, -0.010882999747991562, -0.03168109804391861, -0.011302030645310879, 0.016891077160835266, 0.016289088875055313, 0.0125237125903368, -0.029650863260030746, -0.004804100841283798, 0.02813998982310295, 0.03652060776948929, -0.02011348307132721, 0.011561711318790913, -0.00556543841958046, 0.015214952640235424, 0.010115760378539562, 0.01848457381129265, -0.009372128173708916, 0.03423069417476654, -0.0033404435962438583, -0.0069877831265330315, -0.010452165268361568, 0.021931251510977745, 0.00030468267505057156, -0.018897702917456627, 0.041289299726486206, 0.0032578178215771914, 0.02457527630031109, 0.014199836179614067, -0.001359637244604528, 0.008144544437527657, 0.010753159411251545, 0.0036148792132735252, -0.015096915885806084, -0.03106730431318283, 0.006373991258442402, -0.009602299891412258, 0.0027930475771427155, 0.0198419988155365, -0.008227170445024967, -0.009702631272375584, 0.03541106358170509, 0.002161550335586071, 0.04284738376736641, -0.020668257027864456, -0.0006894090911373496, -0.018083248287439346, -0.02861213870346546, -0.031326986849308014, 0.05382481589913368, -0.03106730431318283, -0.01024560071527958, 0.05023649334907532, -0.019759371876716614, 0.008687513880431652, -0.01841375231742859, 0.009106544777750969, 0.01877966709434986, -0.01684386096894741, -0.005051978398114443, 0.008911783806979656, 0.04601077362895012, 0.033333614468574524, -0.03925906494259834, -0.04254049062728882, 0.024858566001057625, -0.01895672269165516, -0.010499379597604275, -0.03323918208479881, 0.0006444075843319297, 0.039046596735715866, -0.03106730431318283, -0.014117210172116756, 0.008970802649855614, 0.013149308040738106, -0.004281787667423487, -0.0017956359079107642, -0.012299442663788795, -0.04712032154202461, -0.004936892073601484, 0.000753222790081054, 0.03890495374798775, -0.0006174803711473942, -0.00792617630213499, -0.015002486295998096, -0.009159661829471588, 0.020939741283655167, 0.008327501825988293, -0.03574156388640404, 0.012393871322274208, -0.039589568972587585, -0.02405591495335102, 0.03623732179403305, -0.017469456419348717, -0.00016460611368529499, -0.011785982176661491, 0.013550632633268833, -0.012228620238602161, -0.005007714498788118, 0.01949969120323658, -0.025566786527633667, 0.01857900433242321, -0.01027510967105627, 0.017977016046643257, -0.04593995213508606, 0.0008978179539553821, -0.0152267562225461, 0.016595983877778053, -0.04263491928577423, -0.03692193329334259, -0.034938912838697433, -0.03951874375343323, 0.018756059929728508, 0.02000725083053112, -0.011638435535132885, -0.0031722409185022116, -0.003800787264481187, -0.02402050420641899, 0.023607375100255013, -0.047214750200510025, 0.011768275871872902, 0.00881145242601633, -0.03168109804391861, 0.010098054073750973, -0.02246241644024849, 0.026558296754956245, 0.03477366268634796, 0.014884449541568756, -0.013102092780172825, -0.01667861081659794, -0.004299493040889502, 0.01787078194320202, 0.01803603395819664, 0.023524748161435127, -0.011921724304556847, 0.03305032476782799, 0.005367727018892765, -0.02875378169119358, 0.018555397167801857, 0.026109756901860237, -0.01585235260426998, 0.017705531790852547, 0.02426838129758835, 0.02790391631424427, 0.017197972163558006, 0.019180992618203163, -0.0025702528655529022, 0.006155623123049736, 0.0033197870943695307, -0.0019667893648147583, -0.0021010562777519226, -0.018496377393603325, -0.017906194552779198, 0.007318286225199699, -0.004677210934460163, -0.023536551743745804, 0.02766784280538559, -0.04114765301346779, -0.039802033454179764, -0.034655626863241196, -0.038361985236406326, -0.019417066127061844, 0.05382481589913368, 0.041903089731931686, 0.012081073597073555, -0.005149358417838812, 0.0005418630316853523, -0.010965625755488873, 0.0462232381105423, -0.01490805670619011, 0.045066479593515396, -0.029886936768889427, 0.011431870982050896, -0.013432595878839493, 0.009991820901632309, -0.050378136336803436, 0.02629861608147621, 0.0011014315532520413, 0.022131914272904396, 0.017032720148563385, -0.01942886970937252, -0.03767737001180649, 0.0012939792359247804, 0.02266307920217514, -0.025141853839159012, -0.0223561841994524, -0.01919279620051384, -0.036733075976371765, -0.006905157119035721, -0.014483124017715454, -0.04209195077419281, 0.0027989493682980537, -0.030949268490076065, 0.013656865805387497, 0.0031486335210502148, 0.009991820901632309, -0.0127125708386302, -0.0242919884622097, -0.0071412306278944016, -0.02844688668847084]
metadata : {"source": "pydantic_ai_docs", "crawled_at": "2025-03-15T11:17:07.959642", "url_path": "/api/agent/", "chunk_size": 4425}
updated_dt: 2025-03-15T11:17:07.959642
---
```

Parameters:
Name | Type | Description | Default  
---|---|---|---  
`user_prompt` |  `str[](https://docs.python.org/3/library/stdtypes.html#str) | Sequence[](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "collections.abc.Sequence")[UserContent]` |  User input to start/continue the conversation. |  _required_  
`result_type` |  `type[](https://docs.python.org/3/library/functions.html#type)[RunResultDataT[](https://ai.pydantic.dev/api/agent/#pydantic_ai.agent.RunResultDataT "pydantic_ai.agent.RunResultDataT")] | None` |  Custom result type to use for this run, `result_type` may only be used if the agent has no result validators since result validators would expect an argument that matches the agent's result type. |  `None`  
`message_history` |  `list[](https://docs.python.org/3/library/stdtypes.html#list)[ModelMessage[](https://ai.pydantic.dev/api/messages/#pydantic_ai.messages.ModelMessage "pydantic_ai.messages.ModelMessage")] | None` |  History of the conversation so far. |  `None`  
`model` |  `Model[](https://ai.pydantic.dev/api/models/base/#pydantic_ai.models.Model "pydantic_ai.models.Model") | KnownModelName[](https://ai.pydantic.dev/api/models/base/#pydantic_ai.models.KnownModelName "pydantic_ai.models.KnownModelName") | None` |  Optional model to use for this run, required if `model` was not set when creating the agent. |  `None`  
`deps` |  `AgentDepsT[](https://ai.pydantic.dev/api/tools/#pydantic_ai.tools.AgentDepsT "pydantic_ai.tools.AgentDepsT")` |  Optional dependencies to use for this run. |  `None`  
`model_settings` |  `ModelSettings[](https://ai.pydantic.dev/api/settings/#pydantic_ai.settings.ModelSettings "pydantic_ai.settings.ModelSettings") | None` |  Optional settings to use for this model's request. |  `None`  
`usage_limits` |  `UsageLimits[](https://ai.pydantic.dev/api/usage/#pydantic_ai.usage.UsageLimits "pydantic_ai.usage.UsageLimits") | None` |  Optional limits on model request count or token usage. |  `None`  
`usage` |  `Usage[](https://ai.pydantic.dev/api/usage/#pydantic_ai.usage.Usage "pydantic_ai.usage.Usage") | None` |  Optional usage to start with, useful for resuming a conversation or agents used in tools. |  `None`  
`infer_name` |  `bool[](https://docs.python.org/3/library/functions.html#bool)` |  Whether to try to infer the agent name from the call frame if it's not set. |  `True`  
Returns:
Type | Description  
---|---  
`AsyncIterator[](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "collections.abc.AsyncIterator")[StreamedRunResult[](https://ai.pydantic.dev/api/result/#pydantic_ai.result.StreamedRunResult "pydantic_ai.result.StreamedRunResult")[AgentDepsT[](https://ai.pydantic.dev/api/tools/#pydantic_ai.tools.AgentDepsT "pydantic_ai.tools.AgentDepsT"), Any[](https://docs.python.org/3/library/typing.html#typing.Any "typing.Any")]]` |  The result of the run.  
Source code in `pydantic_ai_slim/pydantic_ai/agent.py`
```
602
603
604
605
606
607
608
609
610
611
612
613
614
615
616
617
618
619
620
621
622
623
624
625
626
627
628
629
630
631
632
633
634
635
636
637
638
639
640
641
642
643
644
645
646
647
648
649
650
651
652
653
654
655
656
657
658
659
660
661
662
663
664
665
666
667
668
669
670
671
672
673
674
675
676
677
678
679
680
681
682
683
684
685
686
687
688
689
690
691
692
693
694
695
696
697
698
699
700
701
702
703
704
705
706
707
708
709
710
711
712
713
714
715
716
717
718
719
720
721
722
723
724
725
726
727
728
729
730
731
732
733
734
735
736
737
738
739
740
741
```
| ```
@asynccontextmanager
async defrun_stream( # noqa C901
  self,
  user_prompt: str | Sequence[_messages.UserContent],
  *,
  result_type: type[RunResultDataT] | None = None,
  message_history: list[_messages.ModelMessage] | None = None,
  model: models.Model | models.KnownModelName | None = None,
  deps: AgentDepsT = None,
  model_settings: ModelSettings | None = None,
  usage_limits: _usage.UsageLimits | None = None,
  usage: _usage.Usage | None = None,
  infer_name: bool = True,
) -> AsyncIterator[result.StreamedRunResult[AgentDepsT, Any]]:
"""Run the agent with a user prompt in async mode, returning a streamed response.
  Example:
  ```python
  from pydantic_ai import Agent
  agent = Agent('openai:gpt-4o')
  async def main():
    async with agent.run_stream('What is the capital of the UK?') as response:
      print(await response.get_data())
      #> London