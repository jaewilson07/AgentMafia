---
url: https://ai.pydantic.dev/api/agent/
session_id: pydantic_ai_docs
chunk_number: 42
title: is_end_node Method Overview
summary: The `is_end_node` method checks if a given node is of type `End`, and narrows the type accordingly while preserving generic parameters. This functionality offers a type-checking advantage over a direct `isinstance` call.
embedding: [0.016493644565343857, 0.0504203736782074, 0.02130974270403385, -0.028159301728010178, 0.004159086383879185, 0.019371412694454193, 0.0011973351938650012, 0.013033190742135048, -0.005704993847757578, -0.006736590061336756, 0.020917318761348724, -0.05912502110004425, -0.008258714340627193, -0.017873071134090424, -0.02279619127511978, -0.02121460996568203, -0.06445245444774628, -0.006338221486657858, 0.020596247166395187, 0.05246572569012642, 0.051704663783311844, 0.001065041171386838, 0.038742825388908386, 0.022546468302607536, -0.041691940277814865, 0.020608138293027878, 0.0005563037702813745, 0.046757761389017105, -0.0020394090097397566, 0.007670080289244652, 0.06602215021848679, 0.0007413667626678944, -0.021856755018234253, -0.011297017335891724, 0.014091542921960354, 0.000567452167160809, 0.011671602725982666, 0.018467649817466736, -0.010500280186533928, 0.04946904629468918, 0.0157088004052639, -0.017314165830612183, -0.0007480558124370873, 0.032582975924015045, -0.017551997676491737, -0.009733272716403008, 0.01759956404566765, 0.028397133573889732, 0.029015498235821724, -0.011308909393846989, -0.03491372987627983, 0.004405836574733257, 0.009192205034196377, 0.02625664696097374, -0.046781543642282486, -0.004613939672708511, 0.00071163778193295, 0.012052133679389954, 0.0261852964758873, -0.04026494920253754, 2.2529002308147028e-05, -0.00555337592959404, 0.02067948691546917, 0.07496462762355804, -0.027422023937106133, 0.023057807236909866, -0.053750019520521164, 0.03491372987627983, -0.01970437727868557, 0.003829094348475337, 0.013960734941065311, 0.04150167480111122, -0.058411527425050735, -0.007783050648868084, -0.04697180911898613, -0.030418705195188522, 0.03448563069105148, 0.022974565625190735, -0.0037369343917816877, -0.00884140282869339, 0.0012278073700144887, 0.04483132064342499, 0.02073894627392292, 0.02430642582476139, 0.03541317582130432, -0.029728993773460388, -0.02322429046034813, -0.03624558821320534, -0.03938496857881546, -0.04506915435194969, -0.008419251069426537, -0.003490183735266328, 0.001278346753679216, 0.04411782696843147, 0.06216927245259285, 0.043166499584913254, -0.007545218337327242, -0.005883367732167244, 0.02737445756793022, 0.030727887526154518, 0.005372029263526201, -0.017551997676491737, -0.039075788110494614, 0.025852331891655922, 0.010327852331101894, -0.013401830568909645, 0.005467162001878023, 0.044759973883628845, -0.006403625011444092, -0.046757761389017105, -0.03948010131716728, -0.02675609476864338, -0.01215915847569704, 0.030585188418626785, -0.08143366128206253, -0.04276218265295029, 0.0034218071959912777, 0.014008301310241222, 0.051704663783311844, 0.004851771518588066, -0.011957000941038132, 0.027445806190371513, -0.04050277918577194, -0.0072776577435433865, 0.0157088004052639, 0.02570963278412819, -0.0037369343917816877, -0.008270605467259884, 0.019894642755389214, -0.013235347345471382, -0.012545634992420673, -0.0030130334198474884, -0.016077440232038498, -0.004129357170313597, -0.0020929211750626564, -0.009947321377694607, -0.02925333008170128, -0.013152106665074825, -0.056841835379600525, 0.06630754470825195, -0.022629709914326668, -0.008460871875286102, -0.027683638036251068, 0.015126111917197704, 0.022415660321712494, 0.07453653216362, -0.06611727923154831, 0.055890507996082306, -0.022451335564255714, 0.018491433933377266, 0.07201551645994186, 0.03172678127884865, -0.039075788110494614, 0.007664134260267019, 0.004661506041884422, -0.006260925903916359, -0.004875554703176022, 0.03234514594078064, 0.01824171096086502, -0.028920365497469902, -0.016779044643044472, 0.024032918736338615, 0.011493228375911713, 0.007069554645568132, -0.007985207252204418, -0.01039920188486576, -0.007241982966661453, -0.030466271564364433, -0.0342240184545517, -0.007860345765948296, 0.02164270728826523, -0.0072776577435433865, -0.021500008180737495, 0.03244027867913246, 0.017337948083877563, -0.008657082915306091, -0.07943587005138397, -0.003296945244073868, -0.02217782847583294, -0.013794252648949623, -0.0009684219839982688, -0.021963780745863914, -0.05113386735320091, 0.011166210286319256, -0.03905200585722923, 0.018324950709939003, 0.024496691301465034, -0.010732166469097137, -0.018348734825849533, -0.01544718537479639, 0.043689727783203125, 0.05246572569012642, 0.00020438682986423373, 0.005470134783536196, -0.01774226315319538, 0.013544529676437378, 0.029086846858263016, -0.003641801653429866, 0.04561616852879524, 0.023569146171212196, 0.005143115762621164, 0.004001522436738014, 0.035032644867897034, 0.01514989510178566, 0.040122248232364655, -0.03898065537214279, 0.004610966891050339, 0.007105229422450066, -0.0009818000253289938, -0.011957000941038132, 0.048208534717559814, -0.019597351551055908, 0.0041412487626075745, -0.03172678127884865, -0.0030472218059003353, 0.006225251127034426, -0.023925893008708954, 0.013116431422531605, 0.03329647332429886, 0.051371701061725616, 0.0016945526003837585, 0.0485890656709671, 0.01360398717224598, -0.0050569018349051476, -0.026161514222621918, -0.007432248443365097, 0.011255396530032158, -0.027873903512954712, 0.014698014594614506, 0.06702104210853577, -0.03089437074959278, -0.007509543560445309, 0.009447874501347542, -0.029086846858263016, 0.006980367470532656, -0.037696365267038345, 0.01767091453075409, 0.02173784002661705, 0.03743474930524826, -0.04192977398633957, -0.04295244812965393, 0.020049232989549637, 0.02372373640537262, -0.024924788624048233, 0.003775582183152437, 0.01608933135867119, 0.03334403783082962, -0.024520473554730415, 0.05926772207021713, 0.047304775565862656, 0.038195811212062836, 0.018539000302553177, 0.0046971808187663555, -0.01763523928821087, -0.019811401143670082, -0.001072473474778235, -0.009548952803015709, -0.010470551438629627, -0.023034023120999336, 0.008240876719355583, 0.019906533882021904, 0.011005673557519913, -0.030632754787802696, -0.012640767730772495, -0.02015625685453415, -0.019977884367108345, 0.06078984588384628, -0.011499174870550632, 0.01616067998111248, -0.04333297908306122, -0.016446078196167946, 0.013972626999020576, 0.03693529963493347, -0.049754444509744644, -0.009495440870523453, 0.03279702365398407, 0.04499780386686325, 0.03948010131716728, -0.020370306447148323, -0.06840046495199203, -0.024948570877313614, 0.030704103410243988, 0.04606804624199867, 0.057935863733291626, -0.015256918966770172, -0.013413721695542336, -0.03291594237089157, -0.017409298568964005, -0.019870858639478683, 0.004765557590872049, 0.019026555120944977, 0.014698014594614506, 0.031132202595472336, -0.020322740077972412, -0.0043671890161931515, -0.06421462446451187, 0.03952766954898834, 0.009947321377694607, -0.0008747756364755332, -0.04395134374499321, -0.007705755066126585, 0.0111424271017313, -0.009323012083768845, -0.009881917387247086, 0.008276551961898804, 0.011297017335891724, -0.0027395267970860004, 0.005835801362991333, -0.001629148842766881, -0.010244610719382763, -0.010904594324529171, 0.09551330655813217, -0.018527109175920486, -0.017575779929757118, -0.007955478504300117, -0.029943041503429413, 0.048803117126226425, -0.00984029658138752, 0.021476224064826965, -0.03125111758708954, -0.03600775822997093, -0.0030472218059003353, 0.03381970152258873, 0.03077545389533043, -0.024615606293082237, 0.010387309826910496, -0.0003861052973661572, 0.05160953104496002, -0.007170633412897587, 0.02322429046034813, -0.0072300913743674755, -0.018324950709939003, 0.015138003043830395, 0.01365155354142189, 0.018562782555818558, -0.03624558821320534, -0.053417056798934937, 0.025543151423335075, 0.02023949846625328, 0.05289382487535477, -0.029110630974173546, -0.01773037202656269, -0.004283947870135307, -0.010214881971478462, 0.024401558563113213, 0.0483512356877327, 0.01286670845001936, 0.012795358896255493, -0.03134625032544136, -0.015304485335946083, 0.0037369343917816877, -0.011689440347254276, 0.01110675185918808, 0.0019219793612137437, -0.015958523377776146, -0.021060019731521606, -0.01726659946143627, -0.024924788624048233, -0.022130262106657028, 0.013556420803070068, -0.05698453262448311, -0.016802826896309853, 0.0027603369671851397, 0.014246133156120777, -0.06326329708099365, -0.026708528399467468, -0.02273673377931118, 0.009780839085578918, 0.010904594324529171, 0.03657855466008186, 0.05826882645487785, 0.03833850845694542, 0.005895259324461222, -0.0022727814503014088, 0.022011347115039825, 0.015470968559384346, -0.048208534717559814, -0.01966870203614235, 0.049849577248096466, 0.04908851534128189, 0.017956312745809555, 0.0728241428732872, -0.00785440020263195, -0.0012188886757940054, 0.046163178980350494, 0.02222539484500885, -0.034128885716199875, -0.0017064441926777363, -0.011939163319766521, 0.03496129438281059, 0.03536561131477356, -0.05517701059579849, 0.005910123698413372, 0.0021122449543327093, -0.0032315414864569902, -0.0021702165249735117, 0.012688334099948406, 3.6394791095517576e-05, 0.021333524957299232, 0.018539000302553177, -0.01768280565738678, -0.0015102328034117818, -0.014947737567126751, 0.019383303821086884, 0.03334403783082962, 0.009435982443392277, 0.0941338837146759, 0.01368722878396511, 0.0031037069857120514, 0.006147956009954214, 0.05313165858387947, 0.022962674498558044, 0.009091125801205635, -0.02875388227403164, -0.0051787905395030975, 0.0008123447187244892, -0.007432248443365097, -0.012747792527079582, 0.003403969807550311, 0.032154880464076996, -0.004034224431961775, -0.08490600436925888, -0.025638284161686897, 0.038695257157087326, -0.01666012778878212, 0.0344618484377861, 0.05218032747507095, -0.012171049602329731, -0.002674123039469123, -0.034556981176137924, 0.030941937118768692, 0.028444699943065643, 0.00982245896011591, -0.052227895706892014, -0.0029743858613073826, -0.01184997707605362, 0.016957417130470276, -0.0034485631622374058, -0.022641601040959358, -0.004313677083700895, 0.012319695204496384, -0.057365067303180695, 0.04687667638063431, 0.04385621100664139, -0.0545586496591568, -0.0016202301485463977, -0.003766663372516632, -0.044783756136894226, 0.01821792684495449, -0.004872581921517849, -0.023866435512900352, -0.014043976552784443, -0.04157302528619766, 0.0050004166550934315, -0.0678296685218811, -0.03550830855965614, 0.06578431278467178, 0.01657688617706299, 0.06078984588384628, -0.006659294478595257, 0.04552103579044342, -0.015245027840137482, 0.012700226157903671, 0.03760123252868652, -0.020881645381450653, 0.05822126194834709, 0.025448018684983253, -0.018099011853337288, -0.008817619644105434, 0.02069137990474701, 0.022344311699271202, -0.03648342192173004, 0.019050339236855507, 0.010054345242679119, -0.0058893137611448765, 0.020346522331237793, 0.014293699525296688, 0.04487888887524605, 0.00859167892485857, -0.010310014709830284, 0.0035288315266370773, -0.03082302026450634, 0.030014391988515854, -0.0033772136084735394, 0.005348246078938246, -0.024948570877313614, 0.004495023749768734, -0.024877222254872322, -0.0314176008105278, 0.028967931866645813, 0.023878326639533043, 0.001965086441487074, 0.024639390408992767, -0.011219722218811512, 0.04585399851202965, 0.00148496322799474, 0.028991714119911194, -0.009186258539557457, -0.014519640244543552, -0.012831033207476139, -0.007890074513852596, -0.015518534928560257, 0.011951055377721786, 0.010048399679362774, -0.007949532940983772, -0.06792480498552322, 0.012973732315003872, 0.04592534899711609, 0.008336009457707405, 0.036649901419878006, -0.04228651896119118, 0.05199006199836731, 0.024449124932289124, -0.001497598015703261, -0.02580476552248001, 0.01368722878396511, -0.001497598015703261, 0.02880144864320755, -0.02075083740055561, 0.020061124116182327, 0.014008301310241222, 0.0022712950594723225, -0.020417872816324234, -0.03165543079376221, -0.010304069146513939, 0.0026012868620455265, 0.05189492926001549, -0.03132246807217598, -0.018848182633519173, 0.004278002306818962, 0.03453319892287254, -0.010589467361569405, 0.023640494793653488, 0.06730644404888153, -0.02468695677816868, 0.04604426398873329, 0.05441594868898392, 0.03722069784998894, -0.05907745659351349, -0.02475830540060997, -0.00011148372141178697, 0.01762334629893303, -0.018848182633519173, 0.016065547242760658, -0.007539272774010897, -0.0002813106111716479, 0.016291487962007523, -0.008877077139914036, -0.013782361522316933, 0.014151000417768955, 0.005547430366277695, 0.00643335422500968, 0.03679260239005089, -0.053369488567113876, 0.010006778873503208, -0.010714328847825527, -0.023628603667020798, -0.0007841021870262921, 0.02333131432533264, 0.011065131053328514, -0.005871476139873266, -0.009013830684125423, 0.024449124932289124, -0.009929483756422997, -0.013045081868767738, 0.04792313650250435, 0.029086846858263016, -0.029181979596614838, -0.018860073760151863, 0.004646641667932272, 0.0030828965827822685, 0.029728993773460388, -0.007045771460980177, -0.010452713817358017, 0.021369200199842453, -0.01874115690588951, 0.023105373606085777, -0.0041680047288537025, -0.03695908561348915, 0.00932895764708519, -0.020084908232092857, -0.04661506041884422, 0.0415254570543766, 0.011189993470907211, -0.011570524424314499, 0.0037547717802226543, -0.037625014781951904, 0.02737445756793022, 0.00044296198757365346, -0.024591824039816856, 0.005220411345362663, 0.002550747711211443, 0.013782361522316933, -0.03467589616775513, -0.04202490672469139, -0.019549785181879997, 0.032059747725725174, 0.019918425008654594, -0.05046793818473816, 0.01061325054615736, 0.0332489050924778, -0.008127906359732151, -0.011082968674600124, 0.02424696646630764, 0.004260164685547352, -0.009632193483412266, 0.014210458844900131, 0.017373623326420784, -0.028991714119911194, -0.0007707241456955671, 0.00912085548043251, 0.002571557881310582, -0.009453820064663887, -0.021036235615611076, 0.006243088748306036, 0.007634405512362719, -0.055367276072502136, 0.04202490672469139, 0.056841835379600525, -0.02939602918922901, 0.018955206498503685, 0.03217866271734238, 0.004153140354901552, 0.0009624761296436191, -0.020334631204605103, -0.03315377235412598, -0.025495585054159164, 0.018586566671729088, -0.017385514453053474, 0.012295912019908428, -0.03429536521434784, 0.026423128321766853, 0.029966825619339943, -0.011933217756450176, -0.055795375257730484, -0.039099570363759995, -0.026684744283556938, -0.04007468372583389, -0.013056973926723003, -0.033106207847595215, 0.020524896681308746, 0.006742535624653101, -0.015209352597594261, 0.003252351889386773, -0.02525775320827961, -0.0015622585779055953, -0.009471657685935497, -0.0010055832099169493, 0.02628042921423912, -0.016505537554621696, -0.03626937046647072, -0.018550891429185867, 0.0074560316279530525, -0.009245716966688633, 0.005743641406297684, -0.006932801101356745, -0.027636071667075157, -0.0024288587737828493, 0.021381091326475143, 0.0029268194921314716, -0.019965991377830505, 0.029966825619339943, -0.008793836459517479, -0.011261343024671078, -0.046305879950523376, 0.0029996554367244244, 0.03603154048323631, 0.027089059352874756, 0.018063336610794067, -0.015875281766057014, -0.0027320943772792816, 0.012949949130415916, 0.01874115690588951, -0.004819069989025593, 0.0307516697794199, -0.0017436054768040776, 0.0006863681483082473, -0.013508854433894157, -0.03191704675555229, 0.03351052105426788, -0.012450502254068851, 0.0036477474495768547, -0.02573341690003872, 0.06093254312872887, 0.026042597368359566, -0.01064892578870058, -0.017314165830612183, 0.014293699525296688, 0.009025722742080688, 0.027873903512954712, -0.01768280565738678, 0.02475830540060997, -0.00880572758615017, 0.022617818787693977, 0.02266538515686989, 0.03244027867913246, -0.001574150170199573, 0.004037197213619947, -0.018515216186642647, -0.06721130758523941, -0.023854544386267662, 0.0037963923532515764, -0.025995030999183655, 0.009299228899180889, -0.010393256321549416, -0.026684744283556938, 0.010197044350206852, 0.02072705328464508, 0.016255812719464302, -0.059315286576747894, -0.017908746376633644, 0.019561678171157837, -0.03481859713792801, 0.004340433049947023, -0.010654871352016926, 0.007283603306859732, 0.017349841073155403, 0.010518117807805538, 0.0033772136084735394, -0.009959212504327297, -0.03474724665284157, 0.006635511294007301, -0.01291427481919527, -0.004004495218396187, 0.01511421985924244, -0.00417989632114768, 0.01614878885447979, 0.023497795686125755, -0.021345417946577072, -0.016315272077918053, -0.009525169618427753, -0.01813468523323536, -0.00771170062944293, -0.016838502138853073, -0.008413305506110191, 0.005996338091790676, -0.07329980283975601, 0.03752988204360008, -0.03087058663368225, 0.01759956404566765, -0.015506642870604992, 0.009709489531815052, -0.00016415979189332575, -0.013009407557547092, -0.019526002928614616, 0.00581796420738101, 0.0029818180482834578, 0.049326345324516296, -0.026518262922763824, 0.02273673377931118, -0.02014436572790146, 0.007259820122271776, -0.016017980873584747, 0.012165104039013386, 0.03936118632555008, 0.019977884367108345, 0.042167603969573975, 0.004438538569957018, -0.020941102877259254, 0.015078545548021793, -0.03236892819404602, 0.00126496865414083, -0.0139131685718894, 0.006772264838218689, 0.006486866157501936, -0.01234347838908434, -0.007794942241162062, 0.0243539921939373, -0.033629436045885086, 0.021571356803178787, -0.017528213560581207, 0.014757472090423107, -0.013556420803070068, 0.044284310191869736, 0.006790101993829012, -0.01666012778878212, 0.020976778119802475, -0.028991714119911194, 0.041192494332790375, -0.005372029263526201, 0.013461288064718246, 0.004010441247373819, -0.00553851155564189, 0.04338054731488228, 0.03246406093239784, -0.006778210401535034, 0.018574675545096397, -0.004227462690323591, -0.059886083006858826, -0.01463855616748333, -0.07206308096647263, -0.009257608093321323, 0.021928105503320694, 0.012509960681200027, -0.0016856339061632752, 0.02279619127511978, -0.006350113078951836, -0.06464271992444992, 0.011915380135178566, 0.022391878068447113, -0.025519367307424545, 0.049706876277923584, -0.011522958055138588, 0.0012619957560673356, 0.023450229316949844, 0.011713223531842232, -0.0031453275587409735, 0.01913358084857464, 0.008127906359732151, -0.03424780070781708, -0.030490055680274963, 0.02280808426439762, -0.005232302937656641, 0.0047269100323319435, 0.012724009342491627, 0.054368384182453156, -0.005600942298769951, -0.023474013432860374, -0.004126384388655424, -0.04587778076529503, 0.013746686279773712, 0.00885329395532608, 0.026446912437677383, -0.007194416597485542, -0.00882356520742178, 0.03990820050239563, 0.018396301195025444, -0.023985352367162704, -0.06231196969747543, 0.015530426055192947, 0.02316483110189438, -0.0323927104473114, 0.01771848089993, 0.0157088004052639, 0.03926605358719826, 0.022487010806798935, -0.006469029001891613, -0.0036328830756247044, 0.0004128613800276071, 0.007301440928131342, -0.005583105143159628, 0.024591824039816856, -0.014365050010383129, -0.015994198620319366, -0.0261852964758873, 0.006260925903916359, -0.013045081868767738, 0.01815846934914589, -0.010916486382484436, 0.005217438098043203, -0.0029728992376476526, 0.04647236317396164, 0.019847076386213303, -0.013045081868767738, 0.0010992295574396849, -0.013449396938085556, 0.0023218344431370497, 0.004869609139859676, 0.02026328258216381, -0.02127406746149063, -0.02777877077460289, 0.011023510247468948, 0.006665240507572889, 0.031584084033966064, 0.008924643509089947, 0.003921254072338343, -0.03855255991220474, -0.0076522426679730415, -0.007919804193079472, -0.003974766470491886, 0.00490528391674161, 0.04033629968762398, 0.0001711275108391419, 0.00405800761654973, -0.013401830568909645, -0.006278763525187969, -0.017456864938139915, 0.038124460726976395, -0.019407086074352264, 0.03529426082968712, -0.007563055958598852, -0.022831866517663002, 0.011713223531842232, 0.017409298568964005, -0.012557527050375938, -0.03225001320242882, 0.009893808513879776, 0.011439716443419456, -0.012831033207476139, -0.011612145230174065, 0.025162620469927788, -0.032154880464076996, -0.024496691301465034, 0.03643585368990898, 0.02422318421304226, 0.010839191265404224, 0.011784573085606098, 0.036649901419878006, 0.013711011968553066, -0.02880144864320755, 0.018848182633519173, -0.045687515288591385, 0.03175056353211403, -0.029063064604997635, -0.00567823788151145, -0.034057535231113434, 0.024104267358779907, 0.03534182906150818, 0.020620029419660568, -0.030085740610957146, -0.0006506933132186532, -0.007301440928131342, -0.014602881856262684, 0.062454670667648315, -0.060361746698617935, -0.043237846344709396, 0.005562294740229845, -0.03244027867913246, 0.02128595858812332, 0.007919804193079472, 0.023949677124619484, -0.006195522379130125, 0.01711200922727585, -0.0031037069857120514, -0.014876388013362885, -0.03726826608181, -0.020596247166395187, 0.02632799558341503, 0.009846242144703865, -0.03381970152258873, -0.009150584228336811, -0.011962946504354477, -0.012414827942848206, 0.025899898260831833, -0.043166499584913254, 0.0039153085090219975, -0.02635177969932556, 0.013045081868767738, -0.04178707301616669, 0.008074394427239895, -0.02122650109231472, -0.03807689622044563, -0.0032315414864569902, -0.03182191401720047, -0.038195811212062836, 0.011534849181771278, 0.00303978961892426, -0.010512172244489193, 0.025566933676600456, 0.007658188696950674, -0.003974766470491886, -0.022118370980024338, 0.04399890825152397, -0.0024868303444236517, -0.0076819718815386295, -0.027707422152161598, 0.0187530480325222, -0.003296945244073868, 0.07115931808948517, -0.0014344239607453346, 0.016386620700359344, 0.008924643509089947, 0.0017956312512978911, -0.027588505297899246, 0.018467649817466736, -0.03284459188580513, -0.00010618825035635382, -0.035722360014915466, -0.029633861035108566, 0.022035129368305206, -0.009780839085578918, 0.07054095715284348, 0.026066381484270096, 0.05864935740828514, -0.008252768777310848, -0.027469590306282043, 0.05560510978102684, 0.015054762363433838, 0.008496546186506748, 0.0069565842859447, 0.006576053332537413, 0.01467423141002655, -0.0013511826982721686, 0.031060852110385895, 0.025566933676600456, -7.111732702469453e-05, 0.05417811870574951, 0.03581749275326729, 0.03900443762540817, 0.008722486905753613, 0.029610076919198036, -0.0022489982657134533, 0.01666012778878212, -0.010815408080816269, 0.001312535023316741, 0.002240079687908292, -0.04345189779996872, 0.030204657465219498, 0.05294138938188553, -0.0013935465831309557, -0.0261852964758873, 0.028087953105568886, 0.046781543642282486, 0.0373871810734272, -0.003010060638189316, -0.018003879114985466, -0.0322737954556942, 0.03198839724063873, -0.015245027840137482, -0.003974766470491886, -0.029491161927580833, 0.02735067345201969, 0.017837395891547203, -0.01919303834438324, 0.004001522436738014, -0.017349841073155403, 0.00490528391674161, -0.022926999256014824, -0.005823909770697355, 0.01674336940050125, 0.0033712678123265505, 0.02975277602672577, 0.026470694690942764, 0.03436671569943428, -0.007271711714565754, -0.0004827245429623872, -0.011885651387274265, -0.017064442858099937, -0.021012453362345695, -0.016029873862862587, -0.002412507776170969, 0.04354703053832054, -0.029562510550022125, 0.020108690485358238, 0.003689368022605777, 0.005990392062813044, 0.019347628578543663, -0.010833244770765305, 0.01876494102180004, -0.01913358084857464, -0.020025450736284256, 0.03322512283921242, 0.023010240867733955, 0.022368093952536583, 0.06098011136054993, -0.009281391277909279, -0.009780839085578918, -0.015542318113148212, -0.0008435602067038417, 0.031179768964648247, 0.0015964469639584422, 0.013734795153141022, -0.023604821413755417, 0.0202751737087965, 0.027065275236964226, 0.0002670035173650831, 0.0006414030212908983, 0.010452713817358017, 0.02834956720471382, -0.02075083740055561, 0.019870858639478683, -0.029419811442494392, 0.00021274811297189444, -0.022011347115039825, 0.027636071667075157, 0.018360625952482224, 0.022082695737481117, -0.0202751737087965, -0.014103434048593044, 0.006498757749795914, 0.02372373640537262, -0.022558359429240227, 2.178577778977342e-05, 0.004628804046660662, 0.008258714340627193, 0.017397407442331314, -0.03037113882601261, 0.007360898889601231, 0.0013430073158815503, 0.0031720835249871016, 0.013199673034250736, 0.02327185682952404, 0.0047744764015078545, -0.03339160606265068, -0.041192494332790375, -0.013235347345471382, -0.004628804046660662, 0.037577446550130844, -0.002180621726438403, -0.01815846934914589, 0.011011619120836258, 0.03137003257870674, 0.006017148029059172, 0.03550830855965614, 0.0008353847078979015, -0.010660816915333271, -0.023997243493795395, 0.010066237300634384, 0.007931695319712162, -0.014864496886730194, 0.018313059583306313, -0.0071230665780603886, 0.012087808921933174, 0.007901966571807861, -0.0297765601426363, -0.014127217233181, 0.012724009342491627, -0.03745853155851364, -0.046781543642282486, 0.004489078186452389, 6.45676554995589e-05, 0.031203551217913628, 0.047185856848955154, -0.044141609221696854, -0.02165459841489792, -0.02834956720471382, -0.008758161216974258, 0.02327185682952404, 0.009709489531815052, -0.0015250974101945758, -0.009221933782100677, -0.03191704675555229, 0.0011705791112035513, -0.019418979063630104, 0.0024585877545177937, 0.025376668199896812, -0.004480159375816584, 0.012545634992420673, -0.004402863793075085, -0.004132329951971769, 0.03550830855965614, -0.015839608386158943, -0.01087486557662487, -0.0017956312512978911, -0.016933634877204895, -0.04597291350364685, -0.013841819018125534, 0.0018952232785522938, -0.010934324003756046, -0.0278263371437788, 0.01675526052713394, 0.033082421869039536, -0.024972354993224144, 0.00987002532929182, 0.031584084033966064, 0.01537583488970995, 0.00981056783348322, 0.07834184169769287, 0.0039153085090219975, -0.014828821644186974, 0.022094588726758957, -0.016588779166340828, -0.014400724321603775, 0.009388416074216366, -0.007390627637505531, -0.0006454907706938684, 0.00010711728100432083, -0.026375561952590942, 0.0362931564450264, 0.0005183993489481509, 0.01166565716266632, -0.003995576873421669, -0.005592023488134146, -0.00321667711250484, -0.005666346289217472, -0.018598457798361778, 0.005636617075651884, 0.023533470928668976, 0.07991153746843338, -0.006344167049974203, -0.00932895764708519, 0.03603154048323631, -0.027089059352874756, -0.006100389640778303, -0.0009022749727591872, 0.03752988204360008, 0.02427075058221817, 0.023378880694508553, -0.015352051705121994, -0.013366155326366425, 0.031584084033966064, -0.031560298055410385, 0.028064168989658356, 0.03229757770895958, -0.04894581437110901, 0.0005737695610150695, 0.028730100020766258, 0.02123839221894741, 0.005823909770697355, -0.03175056353211403, -0.014032084494829178, 0.03843364119529724, 0.010280285961925983, 0.04685289412736893, -0.006451191380620003, 0.01963302679359913, -0.0009743677801452577, -0.032083529978990555, -0.022475119680166245, 0.022558359429240227, 0.00836573913693428, -0.0007001177873462439, -0.04602048173546791, -0.0024615605361759663, 0.032511625438928604, 0.026637177914381027, 0.03724448382854462, 0.01872926577925682, -0.006920909509062767, 0.016029873862862587, 0.0236880611628294, -0.0013028731336817145, -0.025638284161686897, 0.04544968530535698, -0.0004451916611287743, 0.0034128883853554726, 0.047732871025800705, 0.009638139978051186, -0.012949949130415916, 0.025590717792510986, -0.015078545548021793, -0.006409571040421724, 0.034009966999292374, 0.025971248745918274, -0.025400452315807343, 0.006564161740243435, 0.05398785322904587, -0.002480884548276663, -0.023402662947773933, -0.02427075058221817, 0.02215404622256756, -0.024901004508137703, -0.00504501024261117, 0.027112841606140137, -0.0015503669856116176, -0.0382433757185936, 0.025614500045776367, 0.015994198620319366, 0.011207830160856247, -0.002596827456727624, -0.005767424590885639, 0.032107312232255936, -0.007747375871986151, 0.002992223249748349, 0.0048487987369298935, -0.03546074405312538, 0.02367617003619671, 0.025638284161686897, 0.018027661368250847, -0.04040764644742012, 0.005927961319684982, 0.03241649270057678, 0.014816930517554283, 0.0004619142273440957, -0.0034396445844322443, 0.002687501022592187, 0.01815846934914589, -0.03427158296108246, -0.0017644157633185387, 0.010191098786890507, -0.0007982234819792211, -0.0032077583018690348, -0.014745580963790417, -0.016945526003837585, -0.025115054100751877, -0.024139942601323128, 0.004414755385369062, -0.017789829522371292, -0.003948010504245758, -0.0004455632879398763, 0.004578264895826578, 0.0072300913743674755, 0.013996410183608532, 0.014531532302498817, -0.03779149800539017, 0.006825776770710945, -0.016802826896309853, 0.01871737465262413, -0.02877766638994217, 0.02330753020942211, -0.003891525324434042, 0.017528213560581207, 0.006730644032359123, 0.0020185986068099737, -0.02473452314734459, -0.009007885120809078, -0.019086014479398727, -0.00905545148998499, 0.007533326745033264, 0.033106207847595215, -0.012509960681200027, 0.014067759737372398, 0.00592498853802681, 0.029538728296756744, 0.026018815115094185, 0.0303235724568367, 0.0033088368363678455, -0.019323846325278282, 0.00478339521214366, -0.0010553792817518115, 0.007408465258777142, 0.01563744992017746, -0.046829111874103546, 0.020952994003891945, -0.007420356851071119, -0.013318588957190514, -0.028658749535679817, 0.01468612253665924, -0.019585460424423218, -0.009965158998966217, -0.015387726947665215, 0.01542340125888586, 0.011017564684152603, 0.004138275980949402, -0.013746686279773712, -0.010476497001945972, 0.02215404622256756, 0.018087118864059448, 0.01925249584019184, 0.010256502777338028, -0.0013207105221226811, 0.02381886914372444, -0.03450941666960716, 0.02922954596579075, -0.03420023247599602, -0.009043559432029724, 0.009899755008518696, -0.02015625685453415, -0.009489494375884533, 0.008883023634552956, -0.003525858512148261, -0.013829927891492844, 0.0006923139444552362, -4.501155490288511e-05, -0.015078545548021793, -0.014269916340708733, -0.018883856013417244, 0.025162620469927788, -0.021048126742243767, 0.006231197156012058, -0.0025685850996524096, -0.022391878068447113, 0.04033629968762398, -0.015815824270248413, -0.016422295942902565, 0.02127406746149063, 0.055367276072502136, 0.0032077583018690348, -0.007783050648868084, -0.047661520540714264, 0.0005759992636740208, 0.01574447564780712, 0.013972626999020576, 0.0002757364127319306, 0.035579659044742584, -0.00557121355086565, -0.03346295654773712, 0.011641873978078365, 0.02425885759294033, 0.010292177088558674, -0.011968892998993397, 0.034628331661224365, -3.221414954168722e-05, 0.026399346068501472, -0.021345417946577072, 0.024615606293082237, -0.012379152700304985, -0.0017718479502946138, 0.024663172662258148, 0.02273673377931118, -0.025947464630007744, -0.012771575711667538, -0.017385514453053474, 0.00781872496008873, 0.0040163868106901646, -0.010993781499564648, -0.013116431422531605, 0.04483132064342499, -0.013056973926723003, -0.0001374965941067785, -0.0211908258497715, 0.010208936408162117, -0.027683638036251068, 0.0033385660499334335, -0.003820175537839532, 0.019371412694454193, -0.03084680251777172, -0.01437694113701582, 0.05037280544638634, -0.01360398717224598, 0.01493584644049406, -0.0022177828941494226, -0.013580203987658024, 0.010084074921905994, -0.0030442490242421627, -0.02925333008170128, 0.014543423429131508, 0.03220244497060776, 0.01928817108273506, -0.006576053332537413, -0.02126217633485794, 0.009673814289271832, -0.003870714921504259, 0.006213359534740448, -0.046234529465436935, -0.010060291737318039, 0.012438611127436161, -0.0008279524627141654, -0.013960734941065311, -0.03217866271734238, 0.012783466838300228, 0.00932895764708519, 0.0007227861206047237, -0.03588883951306343, -0.004729882813990116, -0.02121460996568203, -0.020584354177117348, 0.009525169618427753, 0.009049505926668644, -0.004706099629402161, -0.0032404602970927954, -0.0003461569722276181, 0.021416766569018364, -0.017444973811507225, -0.0004199220275040716, 0.018824398517608643, -0.04490267112851143, -0.015803933143615723, -0.0067128068767488, 0.011725114658474922, -0.006439299788326025, -0.001849143416620791, -0.024520473554730415, -0.005719858221709728, 0.026542045176029205, 0.035127777606248856, 0.003924227319657803, 0.005101495422422886, -0.018087118864059448, 0.022617818787693977, -0.03486616164445877, 0.00532446289435029, -0.016790935769677162, -0.010060291737318039, -0.003395050996914506, -0.024104267358779907, 0.015601775608956814, -0.03025222383439541, -0.0001544049591757357, 0.02773120440542698, 0.015934741124510765, 0.011951055377721786, 0.015363943763077259, -0.02114325948059559, 0.009953266941010952, -0.014341266825795174, 0.012081862427294254, 0.047233425080776215, 0.00630849227309227, 0.013413721695542336, -0.0261852964758873, 0.033129990100860596, 0.022023238241672516, -0.01769469678401947, 0.007747375871986151, -0.03776771202683449, 0.010637033730745316, 0.007771159056574106, 0.01815846934914589, 0.01493584644049406, -0.005746614187955856, -0.0035109941381961107, 0.012783466838300228, -0.033653222024440765, 0.016897959634661674, 0.03898065537214279, 0.005279869306832552, -0.006159847602248192, 0.013187780976295471, 0.019811401143670082, -0.002605746267363429, 0.015768257901072502, 0.005345272831618786, 0.007259820122271776, -0.0006819088011980057, 0.02023949846625328, 0.008532221429049969, -0.048684198409318924, -0.003588289488106966, 0.030157091096043587, -0.020845970138907433, 0.004908256698399782, 0.017944419756531715, 0.021416766569018364, -0.02580476552248001, -0.004738801624625921, -0.017314165830612183, -0.003540723118931055, 0.03198839724063873, 0.023961568251252174, -0.0034188341815024614, 0.028444699943065643, 0.009935429319739342, -0.0025269645266234875, 0.0022460254840552807, 0.00321667711250484, 0.02570963278412819, -0.018562782555818558, 0.014472073875367641, 0.03498508036136627, -0.019894642755389214, -0.028159301728010178, 0.009245716966688633, 0.01968059316277504, 0.014341266825795174, 0.033605653792619705, 0.028634965419769287, -0.036198023706674576, -0.006641457322984934, 0.04687667638063431, -0.030704103410243988, -0.0026993926148861647, -0.005547430366277695, -0.0009669355349615216, -0.002262376481667161, 0.002241566078737378, -0.051324132829904556, 0.02120271883904934, -0.042215172201395035, -0.004616912454366684, -0.016339054331183434, -0.02171405591070652, -0.001236726064234972, 0.0039034169167280197, -0.007360898889601231, 0.01235536951571703]
metadata : {"source": "pydantic_ai_docs", "crawled_at": "2025-03-15T11:17:10.324942", "url_path": "/api/agent/", "chunk_size": 4670}
updated_dt: 2025-03-15T11:17:10.324942
---
```
is_end_node(
  node: AgentNode[T, S] | End[](https://ai.pydantic.dev/api/pydantic_graph/nodes/#pydantic_graph.nodes.End "pydantic_graph.End")[FinalResult[S]],
) -> TypeGuard[](https://typing-extensions.readthedocs.io/en/latest/index.html#typing_extensions.TypeGuard "typing_extensions.TypeGuard")[End[](https://ai.pydantic.dev/api/pydantic_graph/nodes/#pydantic_graph.nodes.End "pydantic_graph.End")[FinalResult[S]]]

```

Check if the node is a `End`, narrowing the type if it is.
This method preserves the generic parameters while narrowing the type, unlike a direct call to `isinstance`.
Source code in `pydantic_ai_slim/pydantic_ai/agent.py`
```
1246
1247
1248
1249
1250
1251
1252
1253
1254
```
| ```
@staticmethod
defis_end_node(
  node: _agent_graph.AgentNode[T, S] | End[result.FinalResult[S]],
) -> TypeGuard[End[result.FinalResult[S]]]:
"""Check if the node is a `End`, narrowing the type if it is.
  This method preserves the generic parameters while narrowing the type, unlike a direct call to `isinstance`.
  """
  return isinstance(node, End)

```
  
---|---  
###  AgentRun `dataclass`
Bases: `Generic[](https://docs.python.org/3/library/typing.html#typing.Generic "typing.Generic")[AgentDepsT[](https://ai.pydantic.dev/api/tools/#pydantic_ai.tools.AgentDepsT "pydantic_ai.tools.AgentDepsT"), ResultDataT[](https://ai.pydantic.dev/api/result/#pydantic_ai.result.ResultDataT "pydantic_ai.result.ResultDataT")]`
A stateful, async-iterable run of an [`Agent`](https://ai.pydantic.dev/api/agent/#pydantic_ai.agent.Agent).
You generally obtain an `AgentRun` instance by calling `async with my_agent.iter(...) as agent_run:`.
Once you have an instance, you can use it to iterate through the run's nodes as they execute. When an [`End`](https://ai.pydantic.dev/api/pydantic_graph/nodes/#pydantic_graph.nodes.End) is reached, the run finishes and [`result`](https://ai.pydantic.dev/api/agent/#pydantic_ai.agent.AgentRun.result) becomes available.
Example: 
```
frompydantic_aiimport Agent
agent = Agent('openai:gpt-4o')
async defmain():
  nodes = []
  # Iterate through the run, recording each node along the way:
  async with agent.iter('What is the capital of France?') as agent_run:
    async for node in agent_run:
      nodes.append(node)
  print(nodes)
'''
  [
    ModelRequestNode(
      request=ModelRequest(
        parts=[
          UserPromptPart(
            content='What is the capital of France?',
            timestamp=datetime.datetime(...),
            part_kind='user-prompt',
          )
        ],
        kind='request',
      )
    ),
    CallToolsNode(
      model_response=ModelResponse(
        parts=[TextPart(content='Paris', part_kind='text')],
        model_name='gpt-4o',
        timestamp=datetime.datetime(...),
        kind='response',
      )
    ),
    End(data=FinalResult(data='Paris', tool_name=None, tool_call_id=None)),
  ]
  '''
  print(agent_run.result.data)
  #> Paris

```

You can also manually drive the iteration using the [`next`](https://ai.pydantic.dev/api/agent/#pydantic_ai.agent.AgentRun.next) method for more granular control.
Source code in `pydantic_ai_slim/pydantic_ai/agent.py`
```
1257
1258
1259
1260
1261
1262
1263
1264
1265
1266
1267
1268
1269
1270
1271
1272
1273
1274
1275
1276
1277
1278
1279
1280
1281
1282
1283
1284
1285
1286
1287
1288
1289
1290
1291
1292
1293
1294
1295
1296
1297
1298
1299
1300
1301
1302
1303
1304
1305
1306
1307
1308
1309
1310
1311
1312
1313
1314
1315
1316
1317
1318
1319
1320
1321
1322
1323
1324
1325
1326
1327
1328
1329
1330
1331
1332
1333
1334
1335
1336
1337
1338
1339
1340
1341
1342
1343
1344
1345
1346
1347
1348
1349
1350
1351
1352
1353
1354
1355
1356
1357
1358
1359
1360
1361
1362
1363
1364
1365
1366
1367
1368
1369
1370
1371
1372
1373
1374
1375
1376
1377
1378
1379
1380
1381
1382
1383
1384
1385
1386
1387
1388
1389
1390
1391
1392
1393
1394
1395
1396
1397
1398
1399
1400
1401
1402
1403
1404
1405
1406
1407
1408
1409
1410
1411
1412
1413
1414
1415
1416
1417
1418
1419
1420
1421
1422
1423
1424
1425
1426
1427
1428
1429
1430
1431
1432
1433
1434
1435
1436
1437
1438
1439
1440
1441
1442
1443
1444
1445
1446
1447
1448
1449
1450
1451
1452
1453
1454
1455
```
| ```
@dataclasses.dataclass(repr=False)
classAgentRun(Generic[AgentDepsT, ResultDataT]):
"""A stateful, async-iterable run of an [`Agent`][pydantic_ai.agent.Agent].
  You generally obtain an `AgentRun` instance by calling `async with my_agent.iter(...) as agent_run:`.
  Once you have an instance, you can use it to iterate through the run's nodes as they execute. When an
  [`End`][pydantic_graph.nodes.End] is reached, the run finishes and [`result`][pydantic_ai.agent.AgentRun.result]
  becomes available.
  Example: