---
url: https://ai.pydantic.dev/api/agent/
session_id: pydantic_ai_docs
chunk_number: 20
title: Agent Configuration Parameters
summary: This section outlines key parameters for the Agent configuration, including model overriding for testing, end strategies for tool calls, and instrumentation settings for OpenTelemetry integration. The model can be set or inferred, and default values are clarified for instrument settings.
embedding: [0.036284178495407104, 0.05181330814957619, 0.02570851519703865, -0.04056892916560173, 0.004953471012413502, 0.03611080348491669, -0.011535395868122578, -0.02900257334113121, -0.05201144888997078, -0.009894559159874916, 0.006600500550121069, -0.05265539884567261, 0.022352539002895355, -0.030117105692625046, 0.013349604792892933, -0.01608639769256115, -0.027466997504234314, 0.049460411071777344, 0.015591050498187542, 0.06642604619264603, 0.029076876118779182, 0.009318717755377293, -0.006848174147307873, 0.02316986210644245, -0.012191731482744217, 0.001151682110503316, -0.008439476601779461, 0.06266140937805176, -0.01019176747649908, -0.024160556495189667, 0.013906870037317276, -0.01743621937930584, -0.03727487102150917, -0.029349317774176598, -0.0006830372731201351, -0.004612919874489307, 0.021411379799246788, 0.0042135464027523994, -0.024036718532443047, 0.03128116950392723, 0.006328059360384941, -0.03749777749180794, 0.028086181730031967, 0.037126265466213226, -0.009374444372951984, 0.02367759309709072, 0.024841658771038055, -0.0056376694701612, 0.029646525159478188, -0.02208009734749794, -0.028730133548378944, -0.008371366187930107, 0.03234616667032242, 0.01904609613120556, -0.019950104877352715, -0.010179383680224419, 0.009950285777449608, 0.012296992354094982, -0.00801843125373125, -0.01992533728480339, -0.00047019278281368315, -0.0328415147960186, 0.017163777723908424, 0.04331810772418976, -0.007380672264844179, -0.016135932877659798, -0.0385875403881073, 0.022984106093645096, -0.03415418416261673, -0.017968716099858284, -0.0070772720500826836, 0.03883521631360054, -0.05607329308986664, 0.021349461749196053, -0.032395701855421066, -0.027367928996682167, 0.01025987695902586, 0.06261187791824341, 0.027244091033935547, -0.007448782213032246, -0.04024695232510567, 0.020668359473347664, 0.0160368625074625, 0.025980956852436066, -0.022785967215895653, -0.029993267729878426, -0.041609156876802444, -0.023776661604642868, 0.008489011786878109, -0.06796162575483322, -0.03266814351081848, -0.018947027623653412, -0.0010030779521912336, 0.03385697677731514, 0.06791209429502487, 0.018439296633005142, -0.014600356109440327, -0.03720057010650635, 0.002900876570492983, 0.033113956451416016, 0.03507057577371597, -0.025857120752334595, -0.03841416910290718, 0.05453771725296974, 0.02588188648223877, 0.004934895783662796, 0.012990478426218033, 0.011300106532871723, -0.027912810444831848, -0.0008219666196964681, -0.08534830808639526, 0.010458015836775303, -0.012513706460595131, 0.015231924131512642, -0.08832038938999176, -0.03321302309632301, -0.03861230984330177, 0.05894630774855614, 0.0032538115046918392, -0.012668502517044544, -0.0065076230093836784, 0.01756005547940731, 0.029374083504080772, -0.008996741846203804, 0.011163885705173016, 0.015888258814811707, -0.029101643711328506, -0.0292502474039793, -0.0499805249273777, -0.04661216586828232, 0.01261896826326847, 0.01967766508460045, -0.04153485596179962, -0.018166854977607727, -0.015628201887011528, -0.02967129275202751, -0.044333565980196, 0.022959338501095772, -0.05924351513385773, 0.01555390004068613, -0.005098979454487562, -0.022451607510447502, -0.015046169050037861, -0.0019705528393387794, -0.028730133548378944, 0.05904537811875343, -0.014179311692714691, -0.0038358443416655064, 0.009758338332176208, 0.02271166630089283, -0.022451607510447502, -0.0052290079183876514, -0.02739269658923149, 0.0024658998008817434, 0.025609446689486504, 0.021708587184548378, -0.0012151483679190278, 0.027466997504234314, 0.053596559911966324, -0.009931709617376328, -0.010860485956072807, 0.046958908438682556, -0.005882246885448694, -0.004374534357339144, -0.016408372670412064, -0.020829346030950546, -0.03398081287741661, -0.005922493990510702, -0.05404237285256386, -0.04255031794309616, 0.011114351451396942, -0.003083535935729742, -0.02731839381158352, -0.007083463948220015, -0.002673326525837183, -0.02689734846353531, -0.08757737278938293, -0.02486642636358738, 0.0010773800313472748, -0.027343161404132843, -0.02225346863269806, 0.011009089648723602, -0.08197994530200958, 0.0011702575720846653, -0.07098324596881866, 0.004659358877688646, 4.202468971925555e-06, 0.006848174147307873, 0.020717892795801163, 0.06652511656284332, 0.0292502474039793, 0.00990075059235096, 0.02967129275202751, 0.015727270394563675, -0.040965206921100616, 0.00021381194528657943, 0.019789118319749832, -0.024717820808291435, 0.0196281298995018, -0.0021361843682825565, 0.01173353474587202, 0.03625940904021263, 0.07098324596881866, -0.015157622285187244, 0.019355688244104385, -0.047429487109184265, -0.016693197190761566, 0.013560127466917038, 0.0019380456069484353, -0.011931673623621464, 0.0010208794847130775, -0.041311949491500854, 0.01739906705915928, -0.03385697677731514, -0.001425670925527811, -0.000791781407315284, -0.036878593266010284, -0.017027556896209717, 0.02427200973033905, 0.03432755544781685, 0.013956405222415924, 0.016111165285110474, 0.040593694895505905, -0.015355761162936687, 0.01878603920340538, 0.041782528162002563, -0.012928560376167297, -0.017151394858956337, 0.014823262579739094, 0.061026766896247864, -0.022996490821242332, -0.020755045115947723, 0.00738686416298151, -0.020655974745750427, 0.009603542275726795, -0.05250679329037666, 0.0001392196281813085, 0.013027628883719444, 0.0513179637491703, -0.06117536872625351, 0.02300887368619442, 0.016074014827609062, -0.00016901786148082465, 0.006594308651983738, -0.01782011240720749, 0.03192512318491936, 0.02803664654493332, -0.03767114877700806, 0.004157819785177708, 0.010427056811749935, 0.028730133548378944, 0.0028018071316182613, 0.007213492412120104, -0.012204114347696304, 0.003516964614391327, -0.004037078935652971, -0.018563132733106613, -0.021002717316150665, -0.06033327803015709, 0.011473477818071842, -0.0016005904180929065, 0.015863491222262383, -0.02744222991168499, -0.01573965512216091, -0.025126483291387558, 0.0003862159501295537, -0.0039937361143529415, -0.014365066774189472, 0.021138938143849373, -0.0600360706448555, 0.009640693664550781, 0.0010448727989569306, 0.01777057722210884, -0.04242648184299469, 0.0006509170634672046, -0.03254430741071701, 0.021597133949398994, 0.032271865755319595, -0.017919182777404785, -0.006544773932546377, 0.013671580702066422, 0.003724391106516123, 0.03677952289581299, 0.024581601843237877, -0.014501286670565605, -0.014228845946490765, -0.014476520009338856, -0.006216606590896845, 0.0046438793651759624, 0.022736432030797005, 0.011182460933923721, 0.011157694272696972, 0.0043931095860898495, -0.04537379741668701, 0.006928667891770601, -0.039281025528907776, 0.01426599733531475, -0.02009871043264866, 0.016408372670412064, -0.04418496415019035, 0.06751581281423569, 0.029374083504080772, -0.03415418416261673, 0.014365066774189472, -0.01420407835394144, -0.016433140262961388, 0.00791936181485653, -0.0009636049508117139, 0.025361772626638412, -0.02300887368619442, 0.0028823011089116335, 0.051862843334674835, -0.0463397242128849, -0.030959194526076317, -0.00047638462274335325, -0.02612956054508686, 0.03524394705891609, -0.003408607328310609, 0.008433285169303417, 0.0018761272076517344, -0.04163392633199692, -0.020061558112502098, 0.005560271441936493, 0.01874888874590397, 0.012408445589244366, 0.039702072739601135, -0.016408372670412064, 0.0032259481959044933, -0.03133070468902588, 0.019343305379152298, -0.01452605426311493, -0.03757207840681076, -0.030092338100075722, 0.013399139977991581, 0.03551638871431351, -0.029027340933680534, 0.004142340272665024, -0.004628399852663279, 0.018934642896056175, 0.07103277742862701, -0.0349467396736145, -0.014067858457565308, -0.0529526062309742, -0.0160368625074625, -0.008067966438829899, 0.018686970695853233, -0.0008947207243181765, 0.024011950939893723, -0.01967766508460045, 0.03482290357351303, 0.015529132448136806, -0.0428970605134964, 0.003978256601840258, 0.014191695488989353, -0.03175175189971924, -0.04794960096478462, -0.016098782420158386, -0.00633115554228425, -0.06226513162255287, -0.00034887142828665674, -0.06033327803015709, 0.019578594714403152, 0.000849829928483814, -0.015714887529611588, -0.037720683962106705, 0.02068074233829975, -0.010290836915373802, -0.006749104708433151, -0.03660615161061287, 0.0203463826328516, 0.04661216586828232, 0.024346310645341873, -0.018414529040455818, 0.005250679329037666, -0.002064978238195181, 0.027343161404132843, -0.025609446689486504, 0.027343161404132843, 0.04723134636878967, 0.013101931661367416, 0.07321230322122574, 0.025299854576587677, 0.013337220996618271, -0.020321615040302277, 0.018018251284956932, 0.051565635949373245, -0.019826268777251244, 0.019813884049654007, -0.009083427488803864, 0.015479597263038158, 0.006990586407482624, -0.07073556631803513, 0.02148568071424961, -0.030538151040673256, 0.014315531589090824, 0.06063048914074898, 0.01638360694050789, 0.043763916939496994, 0.03967730328440666, -0.027120254933834076, -0.0017228792421519756, 0.00013438225141726434, -0.0056531489826738834, 0.01513285469263792, -0.005523120518773794, 0.03492197394371033, 0.043763916939496994, 0.026922116056084633, 0.014067858457565308, 0.01264373492449522, 0.0712309181690216, -0.032742444425821304, 0.020829346030950546, -0.028680598363280296, -0.013857335783541203, -0.03985067456960678, 0.010148423723876476, 0.0025402018800377846, 0.027516532689332962, 0.053596559911966324, -0.013126698322594166, -0.06196792423725128, 0.021299926564097404, -0.003086631651967764, -0.010253685526549816, 0.05116935819387436, 0.03266814351081848, -0.054735857993364334, 0.05537980794906616, -0.0472065806388855, 0.000623827800154686, 0.003235235810279846, 0.048147741705179214, -0.015937793999910355, -0.017659125849604607, -0.017993483692407608, -0.005300214048475027, 0.0022987201809883118, -0.006359018851071596, -0.024210089817643166, 0.010798566974699497, -0.03086012601852417, 0.018724121153354645, 0.06256233900785446, -0.06107630208134651, 0.021832425147294998, -0.024123404175043106, -0.005746026523411274, 0.027838507667183876, 0.0008916248334571719, 0.014761344529688358, 0.016346454620361328, -0.062116529792547226, 0.012166963890194893, 0.014662275090813637, -0.02237730659544468, 0.08985596895217896, 0.01996248960494995, 0.06919999420642853, -0.0014829454012215137, 0.053893767297267914, -0.02444538101553917, -0.008829562924802303, 0.02726885862648487, -0.026996418833732605, 0.028383390977978706, -0.0027058336418122053, -0.014340299181640148, -0.04151009023189545, 0.012352718971669674, 0.03251953795552254, -0.01710185967385769, 0.0030587685760110617, -0.006798639427870512, 0.02060643956065178, -0.013201001100242138, 0.03199942409992218, 0.019529059529304504, 0.014191695488989353, -0.023194629698991776, 0.012854257598519325, -0.05344795435667038, -0.030067570507526398, 0.04133671894669533, -0.04458124190568924, 0.05978839844465256, -0.010123657062649727, -0.013597278855741024, -0.01023511029779911, 0.031305938959121704, 0.03551638871431351, 0.02118847332894802, 0.035986967384815216, -0.013287686742842197, 0.033956047147512436, 0.0005959644913673401, 0.011950249783694744, 0.04064323008060455, -0.036705221980810165, -0.014340299181640148, 0.028928272426128387, -0.005108267068862915, -0.0010866677621379495, 0.031553611159324646, -0.010749032720923424, 0.0023838579654693604, -0.015727270394563675, 0.003120686858892441, -0.020024407655000687, 0.06637651473283768, -0.09332339465618134, 0.03068675473332405, 0.045398563146591187, 0.043664850294589996, -0.013795417733490467, -0.008619040250778198, -0.0103651387616992, -0.007585003040730953, 0.0020107997115701437, -0.006068002432584763, -0.013089547865092754, -0.016024479642510414, -0.029225479811429977, 0.007232068106532097, 0.034723833203315735, -0.007337329443544149, -0.013498209416866302, 0.0012399157276377082, -0.03224709630012512, -0.0034333746880292892, 0.01399355661123991, -0.019219469279050827, 0.011454902589321136, 0.0067057618871331215, -0.021176088601350784, 0.03336162865161896, 0.04881645739078522, 0.022389689460396767, -0.03318825736641884, -0.027714671567082405, 0.01365919690579176, 0.02342991903424263, -0.031305938959121704, -0.014488903805613518, -0.004458124283701181, 0.021919110789895058, 0.003145454218611121, 0.006811022758483887, -0.00027766526909545064, -0.015231924131512642, 0.022476375102996826, 0.009275374934077263, 0.026699209585785866, -0.04393728822469711, 0.018142089247703552, -0.007888402789831161, -0.017077092081308365, 0.00064666016260162, 0.0178572628647089, 0.010080314241349697, -0.015293842181563377, -0.014067858457565308, 0.01996248960494995, 0.003427183022722602, -0.02064359188079834, 0.03296535089612007, 0.049881454557180405, -0.008074157871305943, 0.007145382463932037, 0.012606584466993809, 0.0029442193917930126, 0.015677737072110176, -0.021250391378998756, -0.02318224497139454, 0.017250463366508484, -0.015591050498187542, 0.020284464582800865, -0.010439440608024597, -0.02895304001867771, -0.007188725285232067, -0.009064852260053158, -0.02367759309709072, 0.01722569577395916, 0.01701517403125763, -0.02900257334113121, -0.002099033445119858, -0.039825908839702606, 0.01920708455145359, -0.00665003526955843, -0.029151178896427155, 0.014575589448213577, 0.006365210749208927, 0.015603434294462204, -0.01747336983680725, -0.054488182067871094, 0.009801681153476238, 0.020779812708497047, 0.014067858457565308, -0.025299854576587677, 0.01019176747649908, 0.023479454219341278, -0.03103349730372429, -0.014303147792816162, 0.0336093008518219, -0.005798657424747944, -0.019950104877352715, 0.027714671567082405, 0.00412686076015234, -0.037002429366111755, -0.013968789018690586, -0.0018885108875110745, 0.0007708839839324355, -0.01279233954846859, -0.0070710801519453526, -0.02947315387427807, 0.007337329443544149, -0.0542900450527668, 0.04210450500249863, 0.05790608003735542, -0.032445237040519714, -0.0004485213430598378, 0.005501449108123779, 0.015083319507539272, 0.025857120752334595, 0.020705509930849075, -0.02905210852622986, -0.010272260755300522, 3.745941739907721e-06, -0.004204258788377047, 0.05176377296447754, -0.009684036485850811, 0.013560127466917038, 0.01959097944200039, -0.0048110587522387505, -0.0599370002746582, -0.013869719579815865, 0.013832568190991879, -0.01768389157950878, -0.009708804078400135, -0.022946955636143684, 0.022216318175196648, 0.004108285065740347, 0.006724337115883827, 0.008513778448104858, -0.014674658887088299, 0.01782011240720749, -0.018885109573602676, 0.034129418432712555, -0.008786219172179699, -0.005981316324323416, -0.005504544824361801, -0.03727487102150917, -0.012606584466993809, 0.001199668855406344, 0.033881742507219315, 0.00011377504415577278, -0.003916338086128235, -0.009244415909051895, -0.002187267178669572, 0.002270856872200966, -0.016854185611009598, 0.009913134388625622, -0.007733606733381748, -0.006804831326007843, 0.008303255774080753, 0.039281025528907776, 0.036878593266010284, 0.02385096438229084, 0.027838507667183876, -0.009027700871229172, 0.00015498946595471352, 0.018649818375706673, 0.04762762412428856, 0.013968789018690586, 0.03232140094041824, 0.002657847013324499, 0.02942361868917942, -0.02342991903424263, -0.037126265466213226, 0.0514170303940773, -0.010557085275650024, -0.0027042857836931944, -0.054735857993364334, -0.002549489727243781, 0.044135428965091705, -0.04487844929099083, 0.00531878974288702, -0.0006872941157780588, 0.021225623786449432, 0.0035138686653226614, -0.0004694187955465168, -0.027838507667183876, 0.0003271999885328114, 0.03098396211862564, 0.028210017830133438, 0.03767114877700806, -0.013646813109517097, -0.0014070954639464617, -0.027466997504234314, -0.04762762412428856, -0.009219648316502571, 0.004489083308726549, -0.0043931095860898495, 0.025931421667337418, -0.054735857993364334, 0.004371438175439835, 0.003968968987464905, -0.011535395868122578, 0.039330560714006424, -0.05176377296447754, -0.03777021914720535, 0.02115132287144661, -0.005563367158174515, 0.007139190565794706, -0.04086613655090332, -0.015244307927787304, 0.011250571347773075, 0.03977637365460396, 0.015603434294462204, -0.03997451439499855, -0.04378868639469147, -0.008290872909128666, -0.016817035153508186, 0.022823119536042213, 0.02511409856379032, -0.01279233954846859, -0.023070791736245155, 0.04681030288338661, -0.011256763711571693, -0.004346671048551798, -0.007975088432431221, -7.0867536123842e-05, -0.011714959517121315, -0.007225876208394766, -0.007758374325931072, -0.016321687027812004, -0.046711232513189316, 0.002337419195100665, -0.004801771137863398, 0.009386828169226646, 0.026080025359988213, 0.018018251284956932, -0.0058327121660113335, -0.007120614871382713, 0.0054642981849610806, 0.027293626219034195, -0.02225346863269806, 0.05775747448205948, -0.044259265065193176, 0.011077200062572956, -0.03452569618821144, 0.008129884488880634, -0.016618896275758743, 0.02051975391805172, 0.020792195573449135, 0.013250535354018211, 0.008235146291553974, -0.05022819712758064, -0.03950393199920654, -0.006402361672371626, 0.01443936862051487, -0.009132962673902512, 0.004037078935652971, 0.014897564426064491, -0.03249477222561836, 0.00665003526955843, -0.023281315341591835, 0.04210450500249863, -0.03279197961091995, 0.009993628598749638, -0.028779668733477592, -0.0285319946706295, -0.022649746388196945, 0.038488470017910004, 0.01573965512216091, -0.006755296606570482, 0.03264337405562401, -0.011467285454273224, -0.018464064225554466, -0.003510772716253996, 0.01955382712185383, 0.0005924815777689219, -0.004882264882326126, 0.01756005547940731, 0.04180729761719704, -0.006389977876096964, 0.0009009125642478466, -0.014315531589090824, -0.025510376319289207, -0.021138938143849373, -0.03707673400640488, -0.002804903080686927, -0.006241373717784882, -0.010160807520151138, 0.020321615040302277, -0.0033281135838478804, 0.0021191569976508617, -0.08153413981199265, 0.006557157728821039, 0.020618824288249016, -0.03291581571102142, 0.036705221980810165, -0.010228917934000492, -0.008272296749055386, 0.045819610357284546, -0.02917594462633133, -0.02039591781795025, 0.0024225569795817137, 0.015454830601811409, 0.015727270394563675, -0.030092338100075722, 0.031504075974226, -0.005126842763274908, -0.0010773800313472748, -0.009603542275726795, 0.041188113391399384, -0.017621973529458046, -0.012036935426294804, 0.019826268777251244, -0.05676678195595741, -0.011987400241196156, -0.023714743554592133, -0.0007875245064496994, -0.009696420282125473, -0.006464280188083649, 0.04604251682758331, -0.02768990397453308, -0.019912954419851303, -0.007671688683331013, -0.01105862483382225, 0.009968861006200314, -0.04074230045080185, 0.03289104998111725, 0.02605525776743889, 0.028086181730031967, 0.03950393199920654, -0.012940943241119385, 0.03165268152952194, -0.009851216338574886, 0.053348883986473083, 0.014786111190915108, 0.018513599410653114, -0.020197778940200806, -0.01486041396856308, 0.01773342676460743, -0.005492161028087139, 0.012092662043869495, 0.006182551383972168, 0.010891444981098175, -0.017064709216356277, -0.0007886855164542794, 0.0264267697930336, 0.03242046758532524, -0.006294004153460264, 0.0015332541661337018, -0.00888528861105442, 0.028779668733477592, 0.02165905386209488, 0.0016284536104649305, -0.01555390004068613, -0.006637651473283768, -0.0058574797585606575, -0.011603506281971931, -0.0068791331723332405, -0.017213312909007072, 0.0016346455086022615, -0.022092482075095177, -0.00043613766320049763, 0.03165268152952194, -0.010488975793123245, 0.011993592604994774, 0.013696348294615746, 0.01105862483382225, -0.0012793887872248888, 0.011300106532871723, -0.03224709630012512, -0.00806177407503128, 0.044234499335289, 0.030414313077926636, 0.04064323008060455, 0.02435869537293911, -0.03816649690270424, 0.029200712218880653, -0.004210450686514378, 0.0002842441026587039, 0.022055329754948616, 0.014724193140864372, 0.043293338268995285, 0.007275410927832127, 0.008581888861954212, 0.009256799705326557, -0.029374083504080772, -0.011913098394870758, -0.019244235008955002, 0.015244307927787304, 0.03251953795552254, 0.007814100943505764, 0.021287541836500168, 0.04876692593097687, -0.04250078275799751, 0.03821603208780289, -0.008247529156506062, 0.025683747604489326, -0.04277322441339493, -0.004551001824438572, -0.03368360549211502, 0.03663092106580734, 0.0027120255399495363, 0.016854185611009598, -0.005485969595611095, 0.011071008630096912, -0.032395701855421066, -0.0400240458548069, 0.0716271921992302, -0.03794359043240547, -0.011157694272696972, 0.026823047548532486, -0.01941760815680027, 0.0046036322601139545, -0.007380672264844179, 0.02533700503408909, -0.006990586407482624, 0.030240941792726517, -0.0012190183624625206, 0.008780027739703655, -0.03204895928502083, -0.02153521589934826, 0.02064359188079834, 0.03061245195567608, -0.005417859181761742, 0.006550965830683708, -0.04572053998708725, -0.002606764202937484, 0.03135547414422035, -0.05676678195595741, 8.518616232322529e-05, -0.028903504833579063, -0.015937793999910355, -0.02453206665813923, 0.009176305495202541, -0.00834040716290474, -0.03583836555480957, 7.739798456896096e-05, -0.006052522454410791, -0.04985668882727623, -0.0021965547930449247, -0.0058636716566979885, 0.01549198105931282, 0.027912810444831848, -0.023900499567389488, 0.03613557294011116, -0.02882920205593109, 0.01245797984302044, -0.018129704520106316, -0.054686322808265686, -0.019566211849451065, -0.0160368625074625, -0.023826196789741516, 0.04292182996869087, -0.026872580870985985, 0.005114458967000246, 0.022872652858495712, 0.008687149733304977, -0.01815447211265564, -0.025324622169137, -0.014030707068741322, 0.022104864940047264, -0.004944183398038149, -0.03145454078912735, -0.019343305379152298, -0.029819896444678307, 0.04153485596179962, 0.06484093517065048, 0.04237694665789604, -0.011170078068971634, -0.004931799601763487, 0.0785125195980072, 0.0021284446120262146, 0.030934426933526993, -0.03170221671462059, 0.004343574866652489, 0.02318224497139454, 0.004916320089250803, -0.010711881332099438, 0.046835072338581085, -0.018092554062604904, 0.03170221671462059, 0.06756534427404404, 0.0422283411026001, -0.03559068962931633, -0.0006791673367843032, -0.029200712218880653, 0.0033497849944978952, 0.0670204684138298, -0.01173353474587202, 0.007560235448181629, 0.01348582562059164, 0.0011253667762503028, 0.04685983806848526, 0.0006687185959890485, -0.013683964498341084, 0.0068667493760585785, 0.019937722012400627, -0.022637363523244858, -0.01946714147925377, -0.03291581571102142, -0.01082952693104744, 0.011659232899546623, -0.020705509930849075, 0.008749068714678288, 0.0014643699396401644, 0.0033219216857105494, 0.0006358244572766125, -0.022612595930695534, -0.009145346470177174, -0.03187558799982071, 0.008971975184977055, -0.0013529168209061027, -0.00254794186912477, -0.004764620214700699, -6.762648990843445e-05, 0.003724391106516123, 0.026649674400687218, -0.0019922242499887943, 0.014587972313165665, 0.023442301899194717, -0.009188689291477203, 0.007838868536055088, 0.007244451902806759, -0.004464315716177225, -0.026203863322734833, 0.03353499993681908, -0.030067570507526398, 0.02684781327843666, 0.012563241645693779, -0.0246559027582407, 0.01726284809410572, 0.009058660827577114, 0.040667999535799026, -0.021894343197345734, -0.03343592956662178, 0.034253254532814026, 0.007659304887056351, 0.023566139861941338, 0.053051676601171494, -0.0010046259267255664, -0.026228630915284157, 0.0054209548979997635, 0.00812369305640459, 0.015033785253763199, -0.02085411362349987, -0.0006536259897984564, -0.031726982444524765, 0.036284178495407104, 0.017374299466609955, 0.005668628495186567, 0.005990604404360056, 0.011281530372798443, 0.02798711322247982, 0.005117555148899555, 0.032098494470119476, -0.03432755544781685, 0.011349640786647797, 0.01237129420042038, 0.0189594104886055, 0.02803664654493332, -0.0033404971472918987, -0.023368000984191895, 0.002225966192781925, 0.02174573950469494, 0.023194629698991776, -0.005724355112761259, -0.012854257598519325, -0.015009017661213875, -0.03965253755450249, 0.030909661203622818, -0.010600428096950054, -0.017535287886857986, 0.009591158479452133, 0.01912039890885353, -0.0006485951598733664, 0.010990514419972897, -0.035986967384815216, -0.02043306827545166, -0.04004881531000137, -0.01205551065504551, -0.007993664592504501, 0.03403034806251526, 0.01082952693104744, -0.02967129275202751, -0.017114242538809776, -0.0033157297875732183, 0.01021653413772583, 0.0250397976487875, 0.0019272099016234279, -0.007547851651906967, 0.006482855416834354, 0.0029860143549740314, 0.004368342459201813, -0.04757809266448021, 0.0006633007433265448, -0.006420936901122332, 0.005984412506222725, 0.031206868588924408, -0.0014194791438058019, -0.005770794115960598, -0.0017352629220113158, -0.05483492836356163, 0.00504325283691287, 0.017411451786756516, -0.0029504112899303436, 0.01654459349811077, 0.027169790118932724, -0.039825908839702606, -0.004476699512451887, -0.04547286406159401, -0.010699497535824776, -0.0005599744617938995, 0.007931745611131191, 0.013560127466917038, -0.025138866156339645, -0.018922260031104088, -0.017832497134804726, -0.02655060589313507, -0.0009225840331055224, -0.019318537786602974, -0.02684781327843666, 0.00040711340261623263, 0.00692247599363327, 4.6027616917854175e-05, 0.010036971420049667, -0.03152884542942047, -0.006792447529733181, -0.04086613655090332, -0.019491909071803093, -0.0232193972915411, -0.03769591450691223, -0.0035386360250413418, -0.0011292366543784738, -0.022092482075095177, 0.006232086103409529, 0.007622153963893652, 0.004504562821239233, 0.001411739271134138, 0.02947315387427807, 0.012854257598519325, 0.014724193140864372, 0.07222160696983337, 0.015727270394563675, -0.013126698322594166, -0.004111381247639656, 0.00026218569837510586, 0.00300304195843637, 0.011194844730198383, 0.004058750346302986, -0.03199942409992218, -0.008544737473130226, -0.023751894012093544, 0.02507694810628891, 0.008941015228629112, 0.013386756181716919, -0.0025138866622000933, -0.004972046706825495, 0.021510448306798935, -0.005749122705310583, 0.020841730758547783, 0.01756005547940731, 0.011108159087598324, 0.06201745942234993, -0.01183879654854536, -0.037720683962106705, 0.01983865164220333, 0.00962830986827612, 0.024172939360141754, -0.01279233954846859, 0.02017301134765148, 0.04321903735399246, 0.00477081211283803, -0.015690119937062263, 0.026451535522937775, 0.012086469680070877, -0.041609156876802444, 0.0022724049631506205, 0.022959338501095772, -0.006151591893285513, -0.011597314849495888, 0.008439476601779461, -0.0038822831120342016, -0.0019272099016234279, 0.005340461153537035, -0.0400240458548069, 0.008185611106455326, 0.003035549074411392, 0.026451535522937775, -0.004102093167603016, 0.02744222991168499, 0.008711917325854301, -0.0139316376298666, -0.021881958469748497, -0.010377522557973862, -0.013114315457642078, 0.0008374462486244738, -0.03806742653250694, 0.0013389851665124297, 0.01782011240720749, -0.0107242651283741, 0.02523793652653694, -0.03635847941040993, -0.0005491386982612312, -0.009009125642478466, 0.021002717316150665, 0.028507227078080177, -0.04740472137928009, 0.03930579498410225, -0.011312490329146385, 0.01701517403125763, 0.060680024325847626, 0.013683964498341084, -0.000853699806611985, -0.003504580818116665, 0.004529330413788557, -0.016148315742611885, 0.003996832296252251, -0.013163849711418152, -0.0364823155105114, -0.005643861368298531, 0.014538438059389591, 0.032148029655218124, -0.02761560119688511, -0.021213240921497345, 0.016940871253609657, -0.04453170672059059, -0.009405403397977352, 0.018798423931002617, -0.005337365437299013, -0.018587900325655937, 0.0026547510642558336, 0.026154328137636185, -0.0018157567828893661, 0.00240707746706903, 0.008092734031379223, 0.035739295184612274, 0.0022166783455759287, 0.02120085619390011, 0.012829490937292576, -0.023207012563943863, 0.01938045583665371, 0.029076876118779182, 0.005928685888648033, -0.021213240921497345, 0.032395701855421066, 0.012142196297645569, 0.022402074187994003, -0.018798423931002617, -0.009225839748978615, -0.002803355222567916, 0.023801429197192192, 0.011083391495049, 0.008798602968454361, -0.012179347686469555, -0.014575589448213577, -0.004566481336951256, 0.0030324531253427267, -0.015974944457411766, 0.03232140094041824, -0.025609446689486504, -0.013820184394717216, 0.010067930445075035, -0.028507227078080177, 0.0058512878604233265, -0.011807836592197418, -0.005386900156736374, 0.005538600031286478, 0.007783141452819109, -0.043169502168893814, -0.007968896999955177, -0.01019176747649908, 0.029151178896427155, 0.006854366045445204, 0.010315603576600552, -0.016024479642510414, -0.012680886313319206, -0.007733606733381748, 0.021374227479100227, -0.01913278177380562, -0.023950032889842987, -0.005724355112761259, -0.019145166501402855, 0.02625339664518833, -0.007857443764805794, -0.02595618925988674, 0.009609734639525414, 0.006408553570508957, 0.011430134996771812, 0.005829616449773312, 0.010736648924648762, 0.004476699512451887, -0.004269273020327091, -0.017882030457258224, 0.031405009329319, -0.042327411472797394, 0.013671580702066422, -0.03219756484031677, 0.013201001100242138, -0.014637507498264313, -0.00513922655954957, -0.0009628309635445476, 0.005835808347910643, -0.01019176747649908, -0.008668574504554272, -0.0007441816269420087, 0.018117321655154228, 0.02397480048239231, 0.002461255993694067, 0.003907050471752882, 0.02929978258907795, 0.0070586963556706905, 0.0132133848965168, -0.0021826233714818954, 0.012594200670719147, 0.023739511147141457, 0.009807872585952282, 0.008866713382303715, 0.01624738611280918, -0.03482290357351303, -0.00417020358145237, -0.043119966983795166, -0.018761271610856056, 0.009758338332176208, 0.022067714482545853, 0.014216462150216103, -0.004374534357339144, -0.004959662910550833, -0.03135547414422035, -0.017213312909007072, 0.014092626050114632, -0.010705689899623394, -0.003009233856573701, -0.021349461749196053, -0.01684180274605751, -0.03355976939201355, 0.007126806769520044, 0.021770505234599113, -0.013956405222415924, 0.01435268297791481, 0.019095631316304207, 0.03157838061451912, 0.0032600031699985266, -0.007492125034332275, 0.008396133780479431, -0.02499026246368885, -0.004947279579937458, 0.02726885862648487, 0.008352790959179401, 0.00270738173276186, 0.007176341488957405, -0.00943636242300272, 0.0048296344466507435, 0.023950032889842987, 0.016792267560958862, -0.029943734407424927, 0.02803664654493332, -0.017287613824009895, 0.02297172322869301, 0.01596256159245968, 0.003978256601840258, -0.03301488608121872, -0.029943734407424927, 0.00426308112218976, 0.02798711322247982, -0.02267451398074627, 0.00277549191378057, -0.01040848158299923, 0.020333999767899513, 0.032098494470119476, -0.006761488039046526, 0.0002501889830455184, 0.031429775059223175, 0.0013358892174437642, 0.00880479533225298, -0.019566211849451065, 0.01954144425690174, -0.03398081287741661, -0.029943734407424927, 0.004789387341588736, 0.02402433566749096, -0.015157622285187244, -0.04108904302120209, 0.0343770906329155, -0.0342780202627182, 0.030290476977825165, 0.007132998667657375, 0.0007886855164542794, 0.0371510349214077, 0.014067858457565308, -0.014030707068741322, 0.025980956852436066, 0.012779955752193928, 0.04027172178030014, -0.005913206376135349, -0.030785823240876198, 0.008792411535978317, -0.02558467909693718, -0.01169638428837061, -0.04614158347249031, 0.0019039905164390802, 0.039825908839702606, -0.02279835194349289, -0.00512993847951293, 0.016098782420158386, 0.012334143742918968, -0.002865273505449295, 0.028061414137482643, -0.008495203219354153, -0.015652969479560852, -0.023838579654693604, -0.0107242651283741, 0.021881958469748497, 0.013783033937215805, -0.01710185967385769, -0.0037181994412094355, 0.006718145217746496, 0.04108904302120209, -0.006990586407482624, -0.006284716539084911, 0.0030587685760110617, -0.024792123585939407, 0.0014047734439373016, -0.006009179633110762, 0.01228460855782032, -0.014377450570464134, 0.0013002861524000764, 0.0035324441269040108, -0.023665208369493484, 0.024210089817643166, 0.023504221811890602, 0.006359018851071596, 0.014748960733413696, -0.022166782990098, 0.03318825736641884, -0.038562774658203125, 0.012222690507769585, 0.04304566606879234, 0.011157694272696972, -0.022142017260193825, -0.03739870712161064, -0.018352610990405083, 0.012129812501370907, -0.03975160792469978, 0.034178949892520905, 0.0013266014866530895, -0.006408553570508957, 0.01555390004068613, -0.014228845946490765, 0.0171390101313591, -0.044011592864990234, 0.0175229050219059, 0.043417174369096756, 0.007312561850994825, -0.01650744304060936, -0.028086181730031967, 0.009405403397977352, 0.0030123298056423664, 0.001579692936502397, -0.01228460855782032, -0.034129418432712555, 0.0034643339458853006, 0.02448253147304058, 0.01633407175540924, 0.03744824230670929, -0.01513285469263792, 0.04950994625687599, 0.010148423723876476, -0.047800999134778976, 0.016618896275758743, 0.02887873724102974, 0.017176160588860512, 0.0017708659870550036, 0.011355833150446415, 0.022575445473194122, 0.008055582642555237, 0.0052073365077376366, 0.027045952156186104, 0.002366830362007022, -0.009776913560926914, 0.03930579498410225, 0.006941051688045263, -0.01777057722210884, -0.020544521510601044, 0.0023219396825879812, 0.011448710225522518, -0.02271166630089283, 0.021423762664198875, -0.004578865133225918, -0.01675511710345745, -0.02816048450767994, -0.008266105316579342, 0.01591302640736103, 0.02917594462633133, 0.03043908067047596, -0.009597350843250751, 0.013436290435492992, -0.009931709617376328, -0.006928667891770601, 0.00880479533225298, -0.008414709009230137, 0.005823424551635981, -0.00527544692158699, 0.009851216338574886, 0.022872652858495712, 0.025980956852436066, -0.008476627990603447, 0.010798566974699497, 0.018947027623653412, 0.03222233057022095, 0.0017213312676176429, -0.015330993570387363, -0.032098494470119476, 0.009362060576677322, 0.04225311055779457, -0.020123476162552834, -0.013163849711418152, -0.005306405946612358, 0.002790971426293254, 0.00549835292622447, 0.003504580818116665, 0.0018451680662110448, 0.021287541836500168, -0.04728088155388832, 0.03665568679571152, 0.0007759148138575256, -0.003872995264828205, -0.008489011786878109, -0.028383390977978706, -0.01806778647005558, -0.013882103376090527]
metadata : {"source": "pydantic_ai_docs", "crawled_at": "2025-03-15T11:17:05.678794", "url_path": "/api/agent/", "chunk_size": 4382}
updated_dt: 2025-03-15T11:17:05.678794
---
Useful if you want to
      [override the model][pydantic_ai.Agent.override] for testing.
    end_strategy: Strategy for handling tool calls that are requested alongside a final result.
      See [`EndStrategy`][pydantic_ai.agent.EndStrategy] for more information.
    instrument: Set to True to automatically instrument with OpenTelemetry,
      which will use Logfire if it's configured.
      Set to an instance of [`InstrumentationSettings`][pydantic_ai.agent.InstrumentationSettings] to customize.
      If this isn't set, then the last value set by
      [`Agent.instrument_all()`][pydantic_ai.Agent.instrument_all]
      will be used, which defaults to False.
  """
  if model is None or defer_model_check:
    self.model = model
  else:
    self.model = models.infer_model(model)
  self.end_strategy = end_strategy
  self.name = name
  self.model_settings = model_settings
  self.result_type = result_type
  self.instrument = instrument
  self._deps_type = deps_type
  self._result_tool_name = result_tool_name
  self._result_tool_description = result_tool_description
  self._result_schema: _result.ResultSchema[ResultDataT] | None = _result.ResultSchema[result_type].build(
    result_type, result_tool_name, result_tool_description
  )
  self._result_validators: list[_result.ResultValidator[AgentDepsT, ResultDataT]] = []
  self._system_prompts = (system_prompt,) if isinstance(system_prompt, str) else tuple(system_prompt)
  self._system_prompt_functions: list[_system_prompt.SystemPromptRunner[AgentDepsT]] = []
  self._system_prompt_dynamic_functions: dict[str, _system_prompt.SystemPromptRunner[AgentDepsT]] = {}
  self._function_tools: dict[str, Tool[AgentDepsT]] = {}
  self._default_retries = retries
  self._max_result_retries = result_retries if result_retries is not None else retries
  for tool in tools:
    if isinstance(tool, Tool):
      self._register_tool(tool)
    else:
      self._register_tool(Tool(tool))

```
  
---|---  
####  end_strategy `instance-attribute`
```
end_strategy: EndStrategy[](https://ai.pydantic.dev/api/agent/#pydantic_ai.agent.EndStrategy "pydantic_ai.agent.EndStrategy") = end_strategy

```

Strategy for handling tool calls when a final result is found.
####  name `instance-attribute`
```
name: str[](https://docs.python.org/3/library/stdtypes.html#str) | None = name

```

The name of the agent, used for logging.
If `None`, we try to infer the agent name from the call frame when the agent is first run.
####  model_settings `instance-attribute`
```
model_settings: ModelSettings[](https://ai.pydantic.dev/api/settings/#pydantic_ai.settings.ModelSettings "pydantic_ai.settings.ModelSettings") | None = model_settings

```

Optional model request settings to use for this agents's runs, by default.
Note, if `model_settings` is provided by `run`, `run_sync`, or `run_stream`, those settings will be merged with this value, with the runtime argument taking priority.
####  result_type `class-attribute` `instance-attribute`
```
result_type: type[](https://docs.python.org/3/library/functions.html#type)[ResultDataT[](https://ai.pydantic.dev/api/result/#pydantic_ai.result.ResultDataT "pydantic_ai.result.ResultDataT")] = result_type

```

The type of the result data, used to validate the result data, defaults to `str`.
####  instrument `instance-attribute`
```
instrument: InstrumentationSettings[](https://ai.pydantic.dev/api/agent/#pydantic_ai.agent.InstrumentationSettings "pydantic_ai.models.instrumented.InstrumentationSettings") | bool[](https://docs.python.org/3/library/functions.html#bool) | None = (
  instrument
)

```

Options to automatically instrument with OpenTelemetry.
####  instrument_all `staticmethod`
```
instrument_all(
  instrument: InstrumentationSettings[](https://ai.pydantic.dev/api/agent/#pydantic_ai.agent.InstrumentationSettings "pydantic_ai.models.instrumented.InstrumentationSettings") | bool[](https://docs.python.org/3/library/functions.html#bool) = True,
) -> None

```

Set the instrumentation options for all agents where `instrument` is not set.
Source code in `pydantic_ai_slim/pydantic_ai/agent.py`
```
224
225
226
227
```
| ```
@staticmethod
definstrument_all(instrument: InstrumentationSettings | bool = True) -> None:
"""Set the instrumentation options for all agents where `instrument` is not set."""
  Agent._instrument_default = instrument

```
  
---|---  
####  run `async`