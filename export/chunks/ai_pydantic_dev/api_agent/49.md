---
url: https://ai.pydantic.dev/api/agent/
session_id: pydantic_ai_docs
chunk_number: 49
title: Return New Messages for Current Run
summary: This section outlines the functionality to retrieve new messages associated with the current run while excluding messages from older runs. It details the parameters for modifying the last message with return content from a tool call and describes the return type, which is a list of new `ModelMessage` instances.
embedding: [0.024244802072644234, 0.03895924985408783, 0.012135491706430912, -0.040163636207580566, 0.00994272530078888, 0.016822122037410736, -0.016337750479578972, -0.00633611436933279, -0.024820812046527863, -0.018537063151597977, -0.013771885074675083, -0.04312223568558693, 0.0057044667191803455, -0.0439862497150898, 0.005760103929787874, 0.018327604979276657, -0.014504989609122276, 0.022320402786135674, -0.005756831262260675, 0.07383406162261963, 0.02328914776444435, -0.01305187214165926, 0.005468826275318861, -0.00935362372547388, -0.010112910531461239, 0.005167729686945677, -0.025488460436463356, 0.03008345328271389, 0.014727539382874966, -0.04011126980185509, -0.003956798929721117, -0.01764686405658722, -0.02516118250787258, -0.05555882304906845, -0.0018949432997033, -0.024087708443403244, -0.010518735274672508, 0.015866469591856003, 4.7864501539152116e-05, 0.012744230218231678, 0.010060545988380909, -0.036812301725149155, 0.031209291890263557, 0.022281130775809288, -0.03977090120315552, 0.012796594761312008, 0.01480608619749546, 0.05477335304021835, 0.0314972959458828, 8.11037389212288e-05, -0.008293241262435913, 0.024912450462579727, 0.007887415587902069, -0.004058255348354578, -0.035948287695646286, 0.0005580100696533918, -0.012482407502830029, 0.002236949512735009, 0.0012182947248220444, -0.036498114466667175, -0.00877106748521328, -0.028198327869176865, 0.009281622245907784, 0.027308130636811256, -0.018602518364787102, 0.012122401036322117, -0.028067417442798615, 0.027098672464489937, -0.0047455402091145515, -0.012691865675151348, 0.017214857041835785, 0.036079198122024536, -0.07577155530452728, -0.00015555962454527617, -0.02594665065407753, -0.03550318628549576, 0.03317296504974365, 0.05697266757488251, -0.008221239782869816, -0.05911961570382118, -0.00017488953017164022, 0.006074291653931141, 0.0027818684466183186, 0.04644738510251045, 0.001958762761205435, -0.010126001201570034, -0.04011126980185509, -0.03974471986293793, -0.017031580209732056, -0.040975287556648254, -0.03885452076792717, -0.01495008822530508, -0.0303190927952528, 0.009818359278142452, 0.07048273086547852, -0.0019669446628540754, -0.022974960505962372, -0.03000490553677082, -0.008168875239789486, 0.03157584369182587, 0.05461626127362251, -0.06304695457220078, -0.03335623815655708, 0.05280968174338341, 0.02576337568461895, -0.0010800195159390569, 0.03440353274345398, -0.016390115022659302, -0.02178366668522358, -0.021639663726091385, -0.10315822809934616, -0.0034887902438640594, -0.0013982979580760002, 0.013372605666518211, -0.058648332953453064, -0.002716412767767906, -0.0242055281996727, 0.028983796015381813, 0.02220258302986622, 0.013444607146084309, -0.058177050203084946, -0.007979053072631359, -0.0008067418821156025, 0.005321550648659468, 0.028093598783016205, 0.02396988868713379, -0.03537227585911751, -0.031549662351608276, -0.04820159822702408, 0.003711339784786105, 0.054668623954057693, 0.015369005501270294, 0.020828012377023697, -0.012502044439315796, -0.02099819853901863, -0.013798067346215248, -0.02451971545815468, 0.008594336919486523, -0.07278677076101303, 0.03882833942770958, 0.0053248233161866665, -0.0036982486490160227, -0.024886267259716988, 0.021849121898412704, -0.007514317519962788, 0.03288495913147926, -0.037021759897470474, -0.026640482246875763, -0.010067091323435307, -0.002855506259948015, 0.005678284447640181, 0.041263289749622345, -0.03170675411820412, 0.0032024215906858444, -0.03068564645946026, -0.004817541688680649, 0.031732939183712006, 0.045059721916913986, 0.019767630845308304, -0.022582227364182472, -0.006192111875861883, 0.04309605062007904, -0.01806578040122986, 0.00752740865573287, -0.01500245276838541, -0.04327932745218277, 0.0003661429800558835, -0.040294546633958817, -0.06268040835857391, -0.0780755952000618, 0.0008820159710012376, -0.004169529769569635, -0.026719028130173683, 0.014125346206128597, 0.01299950759857893, -0.030895104631781578, -0.08362624049186707, -0.023433150723576546, -0.03838323801755905, -0.03016199916601181, -0.0036655208095908165, 0.02188839577138424, -0.08242185413837433, -0.053516604006290436, -0.04778268188238144, -0.01735886000096798, 0.013601700775325298, 0.0260251984000206, 0.02633938565850258, 0.03024054691195488, 0.006964489351958036, 0.00550482701510191, 0.03008345328271389, 0.03387988358736038, -0.004719357937574387, -0.019610537216067314, 0.054563894867897034, -0.0242055281996727, 0.014976270496845245, 0.028276875615119934, 0.020356731489300728, 0.04854196682572365, 0.06749794632196426, -0.012901323847472668, 0.005851742345839739, -0.05911961570382118, -0.004555718507617712, 0.018550153821706772, -0.025148091837763786, -0.02510881796479225, 0.032780230045318604, -0.04304368793964386, 0.009157256223261356, -0.028015051037073135, -0.02360333502292633, -0.0014383896486833692, -0.07189657539129257, 0.027308130636811256, -0.010885288007557392, 0.02097201533615589, 0.028695791959762573, 0.032780230045318604, 0.05597773939371109, -0.017502861097455025, 0.017659954726696014, 0.03783341124653816, -0.006761576980352402, -0.02086728624999523, -0.020828012377023697, 0.027360495179891586, 0.001339387847110629, -0.004660448059439659, -0.03340860456228256, -0.03730976581573486, 0.027255766093730927, -0.06320405006408691, 0.019165437668561935, 0.010119455866515636, 0.05665848031640053, -0.040268365293741226, -0.0020193092059344053, 0.010217639617621899, 0.01161839161068201, 0.049720171838998795, -0.009360169060528278, 0.01654720865190029, 0.010950743220746517, -0.04443134739995003, 0.0294027142226696, 0.027543770149350166, 0.04655211418867111, -0.0030535098630934954, 0.018091963604092598, -0.013994434848427773, -0.004653902258723974, -0.008077236823737621, -0.03390606865286827, -0.007167402189224958, -0.010479462333023548, 0.020330550149083138, 0.03754540532827377, -0.004712812602519989, -0.049065615981817245, 0.014321713708341122, -0.011323841288685799, 0.008993617258965969, 0.024820812046527863, 0.002785141346976161, 0.013320241123437881, -0.05692030116915703, 0.01894288882613182, 0.0014138437109068036, 0.03906397894024849, 0.00030232363496907055, -0.017581408843398094, 0.03511045128107071, -0.004231712780892849, 0.032911140471696854, 0.02599901519715786, -0.0385141521692276, -0.0005379642825573683, 0.03170675411820412, 0.028800521045923233, -0.0038847974501550198, -4.610026371665299e-05, 0.00040459822048433125, -0.006748485844582319, -0.004935361910611391, -0.0030518732964992523, 0.006607756018638611, 0.0004815087013412267, 0.016377022489905357, 0.02542300522327423, -0.02633938565850258, -0.004984453786164522, -0.012927506119012833, 0.05260022357106209, -0.004804450552910566, -0.014832268469035625, -0.011611846275627613, 0.009949270635843277, -0.024846995249390602, 0.0020831285510212183, -0.01954508014023304, 0.018667973577976227, 0.02136475034058094, -0.0028931431006640196, -0.02102437987923622, 0.036890849471092224, -0.019505808129906654, -0.0076452293433249, 0.03348715230822563, -0.04356733337044716, -0.03005727007985115, -0.028303056955337524, 0.00163966603577137, 0.05723448842763901, -0.018720338121056557, 0.036079198122024536, 0.01693994179368019, -0.03065946325659752, -0.027020124718546867, 0.06006217747926712, 0.013732612133026123, -0.009196530096232891, 0.01496317982673645, -0.036917030811309814, -0.01701848953962326, -0.008077236823737621, -0.0004896906903013587, 0.01077401265501976, -0.03526754677295685, -0.017057763412594795, 0.04464080557227135, 0.01263295579701662, -0.017162492498755455, -0.004915725439786911, -0.003956798929721117, -0.0018769430462270975, 0.0673932209610939, -0.03325150907039642, -0.0047815409488976, -0.05948616564273834, -0.053438056260347366, 0.0031762393191456795, 0.01315660122781992, 0.027255766093730927, 0.044588442891836166, -0.02313205413520336, 0.020003270357847214, 0.0343511663377285, 0.025567008182406425, 0.028538698330521584, 0.04003272205591202, -0.01311732828617096, -0.02961217239499092, 0.00032993778586387634, -0.022163309156894684, 0.0019129436695948243, 0.03477008268237114, -0.06042872741818428, 0.012914415448904037, 0.021718211472034454, -0.020121091976761818, -0.002402225276455283, 0.008790704421699047, -0.05079364404082298, 0.004153165966272354, 0.0010374733246862888, 0.02644411474466324, 0.04238912835717201, 0.003956798929721117, -0.0010980198858305812, -0.0130125992000103, -0.025462279096245766, 0.0003446653136052191, -0.01707085408270359, 0.026797575876116753, -0.010957288555800915, 0.031680572777986526, 0.05262640491127968, 0.013784976676106453, 0.03306823596358299, -0.024140072986483574, 0.041053831577301025, 0.01751595363020897, 0.005799377802759409, 0.02230731211602688, 0.006483389995992184, 0.024637537077069283, 0.03050236962735653, -0.023616427555680275, -0.027151037007570267, -0.016573389992117882, 0.01094419788569212, 0.04233676567673683, 0.012862050905823708, 0.026561934500932693, 0.03395843133330345, -0.001594665227457881, -0.012796594761312008, -0.006620847154408693, 0.0060088359750807285, 0.009366714395582676, -0.0353984571993351, 0.009608901105821133, -0.004480444826185703, 0.006090655457228422, 0.01962362788617611, 0.005462280474603176, 0.03707412630319595, 0.009268531575798988, -0.011389296501874924, -0.027700863778591156, -0.03319914638996124, -0.03840942308306694, 0.032335128635168076, 0.030947469174861908, 0.003567337291315198, 0.03503190726041794, -0.03042382188141346, -0.06430371105670929, -0.03008345328271389, -0.019531989470124245, -0.03890688344836235, 0.049746353179216385, 0.041210927069187164, -0.05053182318806648, 4.9142934585688636e-05, -0.0476255901157856, -0.009700538590550423, 0.0353984571993351, 0.04882997274398804, -0.028748156502842903, 0.009759449400007725, -0.030947469174861908, -0.007075764238834381, 0.011147110722959042, -0.015630828216671944, 0.008397970348596573, 0.058124687522649765, -0.016036653891205788, 0.0028407785575836897, 0.05346423760056496, -0.04804450646042824, -0.02410079911351204, -0.012410406023263931, -0.012888233177363873, 0.05493044853210449, -0.036105379462242126, 0.03613156080245972, 0.009157256223261356, -0.08420225232839584, -0.014491898007690907, -0.05534936487674713, -0.04246767610311508, 0.05671084299683571, -0.0008991980575956404, 0.05139583721756935, -0.02149566076695919, 0.02531827613711357, -0.0037702498957514763, -0.020801831036806107, 0.018550153821706772, -0.03092128597199917, -0.03550318628549576, -0.008816886693239212, -0.03385370224714279, 0.0028391422238200903, 0.02349860593676567, 0.04461462423205376, -0.013523153960704803, 0.016219928860664368, -0.001176566700451076, -0.016167564317584038, -0.027360495179891586, 0.017947960644960403, -0.0049484530463814735, 0.03003108873963356, 0.012043854221701622, 0.00327933207154274, -0.03971853479743004, -0.02342006005346775, 0.032282765954732895, -0.03128783777356148, 0.04409097880125046, 0.013431515544652939, -0.041525114327669144, -0.0377286821603775, -0.0042448039166629314, 0.0032384220976382494, 0.01512027345597744, 0.03602683171629906, -0.01474063005298376, 0.014413351193070412, 0.012567499652504921, -0.01056455448269844, 0.011494025588035583, -0.01949271559715271, -0.04851578548550606, -0.014007525518536568, -0.009098346345126629, 0.011768939904868603, 0.027988869696855545, 0.06163311377167702, -0.040661100298166275, 0.021665846928954124, -0.0011798394843935966, 0.012475862167775631, 0.07948943972587585, -0.05911961570382118, -0.000732285960111767, 0.03361806273460388, -0.003498608712106943, 0.020212728530168533, 0.006676484365016222, -0.003619701834395528, -0.013981343246996403, -0.007907051593065262, -0.0064604803919792175, 0.027727046981453896, -0.009183438494801521, 0.010643101297318935, -0.017607590183615685, 0.006696120835840702, -0.016586482524871826, 0.021849121898412704, -0.053935520350933075, -0.0032024215906858444, -0.0016323021845892072, 0.018105054274201393, 0.01510718185454607, 0.02550155110657215, 0.014190802350640297, -0.03037145733833313, -0.012410406023263931, 0.009608901105821133, 0.009870723821222782, -0.01572246663272381, -0.012194402515888214, 0.01495008822530508, 0.03495335951447487, -0.024545898661017418, -0.00023134509683586657, 0.009549991227686405, 0.0418916679918766, 0.01173621229827404, 0.008057599887251854, 0.004369169939309359, -0.0022385858464986086, 0.02586810477077961, 0.010374733246862888, 0.0593290738761425, -0.057705771178007126, 0.01717558316886425, -0.005747012794017792, -0.031104562804102898, -0.03353951498866081, 0.04301750659942627, 0.020003270357847214, 0.012390769086778164, -0.016638847067952156, 0.045583371073007584, 0.03414170816540718, -0.028905250132083893, 0.037257399410009384, 0.062418583780527115, -0.0023891341406852007, -0.036367204040288925, 0.020081818103790283, 0.050374727696180344, 0.005216821562498808, -0.01569628342986107, -0.022058580070734024, -0.010806741192936897, -0.02948126010596752, 0.020422186702489853, -0.0031811483204364777, -0.05087219178676605, 0.012246767058968544, -0.008188511244952679, -0.03505808860063553, 0.037335947155952454, 0.009412533603608608, -0.036759939044713974, 0.01512027345597744, -0.0338275209069252, 0.0041957120411098, 0.011291113682091236, -0.022791685536503792, 0.024637537077069283, 0.01322205737233162, 0.012731139548122883, -0.023511698469519615, -0.016403205692768097, 0.014190802350640297, 0.0167828481644392, -0.03534609451889992, -0.03445589542388916, 0.018052689731121063, 0.013405333273112774, -0.01951889880001545, -0.041158560663461685, 0.03086892142891884, 0.0026280474849045277, 0.0007564227562397718, 0.013588609173893929, -0.018249057233333588, -0.06131892651319504, 0.02391752414405346, -0.004850269295275211, -0.006653574761003256, -0.032178036868572235, -0.01115365605801344, -0.0020078544039279222, 0.012488952837884426, -0.03780722990632057, 0.045661915093660355, 0.07221075892448425, -0.03961380571126938, -0.016795940697193146, 0.001566028338856995, 0.020134182646870613, 0.002826051088050008, 0.01967599242925644, 0.003806250635534525, -0.02607756294310093, -0.01699230633676052, 0.0062837498262524605, 0.03534609451889992, -0.021456388756632805, -0.006408115848898888, 0.041551295667886734, -0.004536082036793232, -0.03581737354397774, 0.005174275487661362, 2.429021151328925e-05, 0.02950744330883026, -0.011559481732547283, -0.022686956450343132, 0.04252004250884056, 0.0314972959458828, 0.012665683403611183, -0.003593519562855363, 0.011729666963219643, 0.003747340524569154, -0.00483390549197793, 0.01717558316886425, -0.0012739321682602167, 0.019034525379538536, -0.014871541410684586, -0.03537227585911751, 0.008581246249377728, -0.00013254785153549165, 0.0029995087534189224, -0.01289477851241827, -0.0006263295072130859, 0.028695791959762573, 0.011912942864000797, -0.008064146153628826, -0.05995744839310646, 0.009909997694194317, -0.0230273250490427, 0.005593191832304001, -0.00866633839905262, 0.026535753160715103, 0.006332841701805592, 0.011304204352200031, 0.027753228321671486, 0.01686139591038227, -0.021901486441493034, 0.01936180517077446, 0.013143510557711124, 0.01696612499654293, 0.025933559983968735, 0.02131238579750061, 0.02347242459654808, -0.007514317519962788, -0.011873668991029263, 0.06639829277992249, -0.018681064248085022, -0.0009613810107111931, -0.07315332442522049, 0.011795122176408768, 0.03854033350944519, -0.040399275720119476, -0.02110292762517929, 0.0020373095758259296, 0.029140889644622803, 0.032047126442193985, 0.0017738502938300371, -0.027098672464489937, -0.023642608895897865, 0.0009041072335094213, 0.028433969244360924, 0.019950905814766884, -0.0013361150631681085, -0.004277531988918781, -0.0008615610422566533, -0.05545409396290779, -0.03037145733833313, -0.0258942861109972, -0.0011921124532818794, 0.0020405822433531284, -0.03809523582458496, 0.015251184813678265, -0.02605137974023819, -0.020461460575461388, 0.032466042786836624, -0.016363931819796562, -0.01991163194179535, -0.0001491163275204599, -0.024702992290258408, 0.022804776206612587, -0.026378659531474113, -0.012678775005042553, -0.01156602706760168, 0.018393060192465782, 0.022228766232728958, -0.011199475266039371, 0.003146784147247672, -0.0008476516813971102, -0.03563410043716431, 0.014596627093851566, 0.008882342837750912, -0.009556536562740803, -0.01063001062721014, 0.049510713666677475, -0.014321713708341122, 0.008954343385994434, -0.012397315353155136, 0.006584846414625645, -0.003963344264775515, -0.022438224405050278, -0.03503190726041794, -0.022320402786135674, -0.050479456782341, 0.037126488983631134, 0.003966617397964001, 0.0031386022455990314, 0.006859760265797377, -0.024244802072644234, 0.016586482524871826, -0.03503190726041794, 0.010486007668077946, 0.0007167402072809637, -0.027334311977028847, 0.015539189800620079, -0.031156927347183228, 0.011847486719489098, -0.0037669772282242775, 0.009975452907383442, 0.001611029147170484, 0.0013287513284012675, 0.049013249576091766, 0.0032842413056641817, 0.006741940043866634, -0.0034200618974864483, -0.028433969244360924, 0.024140072986483574, -0.0001310137304244563, 0.028041234239935875, -0.017633773386478424, 0.048882339149713516, -0.01667811907827854, 0.010492553003132343, 0.0008942888816818595, 0.01875961199402809, -0.02175748348236084, 0.01311732828617096, -0.03060709871351719, -2.138817035302054e-05, 0.011847486719489098, 0.014360986649990082, 0.011821304447948933, -0.04448371380567551, 0.020160363987088203, -0.03458680585026741, -0.007429225370287895, 0.006139747332781553, -0.0007061036885716021, -0.004824087023735046, -0.0036164289340376854, 0.009085254743695259, 0.006846669130027294, -0.006673211697489023, -0.01717558316886425, -0.03432498499751091, -0.0003825069288723171, -0.02102437987923622, -0.0603763647377491, -0.010983471758663654, 0.04775650054216385, 0.006859760265797377, -0.008116510696709156, 0.02652266062796116, 0.02175748348236084, -0.08095564693212509, -0.0016838486772030592, 0.029376531019806862, -0.028748156502842903, 0.04652593284845352, -0.010800194926559925, -0.027543770149350166, 0.037571586668491364, -0.031680572777986526, -0.020343640819191933, 0.009549991227686405, -0.0061561111360788345, 0.009150710888206959, -0.027805592864751816, 0.021220747381448746, -0.00022909505059942603, 0.004306986927986145, -0.007285222411155701, 0.026326294988393784, 0.008934707380831242, -0.0167828481644392, 0.0027278675697743893, -0.06351824104785919, -0.0038520696107298136, -0.01510718185454607, -0.011664210818707943, -0.02136475034058094, 0.028800521045923233, 0.04262477159500122, -0.0023351330310106277, -0.016900669783353806, 0.0024251346476376057, -0.017529044300317764, -0.0175683181732893, -0.05123874545097351, 0.02974308282136917, 0.011330386623740196, 0.05163148045539856, -0.008181965909898281, -0.009654720313847065, 0.0517885722219944, -0.004686630330979824, 0.026889214292168617, 0.015369005501270294, 0.0016404842026531696, -0.009962362237274647, 0.004169529769569635, 0.010466370731592178, 0.02326296642422676, 0.021377841010689735, 0.01738504134118557, 0.0009998362511396408, -0.010453280061483383, -0.0021649482659995556, 0.044588442891836166, 0.04223203659057617, -0.02945507876574993, -0.015774831175804138, -0.02089346945285797, 0.007003762759268284, 0.013850431889295578, -0.013968252576887608, -0.012312222272157669, -0.01315660122781992, 0.006146293133497238, -0.001280477736145258, -0.019505808129906654, 0.0027327765710651875, -0.02131238579750061, -0.008764522150158882, -0.007965962402522564, 0.03796432167291641, -0.02446735091507435, 0.002124038292095065, 0.00020250366651453078, -0.0020258547738194466, 0.012992962263524532, -0.014046799391508102, 0.0012673866003751755, 0.011867123655974865, 0.05278350040316582, -0.011166747659444809, 0.02099819853901863, 0.03919488936662674, -0.04440516605973244, 0.00989036075770855, 0.005337914917618036, -0.013863523490726948, 0.008024872280657291, 0.015984289348125458, 0.049903448671102524, 0.01951889880001545, 0.01569628342986107, -0.011454752646386623, -0.06556046009063721, -0.0005322368815541267, -0.016259202733635902, -0.005884469952434301, 0.014819176867604256, -0.023825885728001595, 0.019662901759147644, 0.03401079773902893, -0.019584354013204575, 0.00014390032447408885, -0.020592372864484787, 0.05270495265722275, -0.03139256685972214, -0.03804286941885948, -0.006702666636556387, 0.05265258997678757, -4.712301233666949e-05, 0.0013712975196540356, 0.002204221673309803, 0.032361313700675964, -0.03325150907039642, 0.007979053072631359, 0.0465782955288887, -0.040504004806280136, -0.05487808212637901, -0.004742267541587353, -0.03867124393582344, 0.0304500050842762, 0.012613318860530853, 0.028460150584578514, -0.003361151786521077, 0.05430207401514053, -0.024925541132688522, 0.006447389256209135, -0.027805592864751816, 0.001762395491823554, -0.008378333412110806, 0.02945507876574993, -0.022556044161319733, 0.011854032054543495, -0.06330878287553787, -0.0034004251938313246, 0.011022744700312614, -0.05498281121253967, 0.01722794771194458, -0.022686956450343132, -0.025593189522624016, -0.014478807337582111, 0.02657502517104149, -0.01754213497042656, -0.03948289528489113, 0.007167402189224958, 0.008286694996058941, -0.02966453693807125, 0.016586482524871826, -0.026143018156290054, 0.0009564718347974122, -0.006977580487728119, 0.007357223890721798, 0.03783341124653816, -0.0036720663774758577, 0.0593290738761425, -0.004951725713908672, -0.02558009885251522, -0.002757322508841753, 0.00543937087059021, -0.015185728669166565, 0.06718376278877258, -0.004856815095990896, -0.002657502656802535, 0.0032547861337661743, -0.02378661185503006, -0.021142199635505676, -0.012181310914456844, -0.007383406162261963, 0.01151366252452135, -0.01061691902577877, 0.013019144535064697, -0.001237931428477168, 0.02178366668522358, 0.022726228460669518, 0.03563410043716431, 0.013143510557711124, 0.016743576154112816, 0.015735557302832603, 0.04773031920194626, 0.032282765954732895, 0.032701682299375534, 0.0013377515133470297, 0.005593191832304001, 0.0073506785556674, -0.000732285960111767, -0.010885288007557392, 0.02953362464904785, -0.02662738971412182, 0.0035640643909573555, 0.04678775370121002, 0.03005727007985115, -0.02612992748618126, 0.06074291467666626, -0.0037931594997644424, 0.009693993255496025, 0.037205036729574203, -0.010531826876103878, -0.013732612133026123, 0.009209620766341686, 0.03353951498866081, 0.045531004667282104, 0.014072981663048267, -0.036314837634563446, 0.06294222921133041, 0.04168220981955528, 0.008594336919486523, -0.005121910944581032, -0.03050236962735653, -0.0018491243245080113, -0.010374733246862888, -0.01928325742483139, 0.0020684010814875364, -0.0026804120279848576, -0.014308622106909752, 0.014439533464610577, -0.009621991775929928, -0.020670918747782707, 0.015473734587430954, -0.008869251236319542, -0.010446734726428986, -0.004002617672085762, -0.014871541410684586, 0.0008226967183873057, -0.0010857469169422984, 0.036367204040288925, -0.00640157051384449, 0.041237108409404755, 0.03817377984523773, -0.006093928124755621, 0.008993617258965969, 0.008175420574843884, -0.03010963462293148, -0.01875961199402809, 0.06451316922903061, -0.036943212151527405, 0.03403697907924652, -0.005871378816664219, -0.023171328008174896, 0.011042381636798382, -0.0024938632268458605, 0.044719353318214417, -0.022412041202187538, -0.012128946371376514, 0.016102109104394913, 0.02230731211602688, 0.04236294701695442, 0.04882997274398804, 0.009301259182393551, -0.0252397283911705, 0.007193584460765123, -0.0026378659531474113, -0.0034887902438640594, -0.003626247402280569, 0.01464899256825447, -0.028276875615119934, 0.006768122315406799, 0.023118963465094566, 0.007331041619181633, 0.031732939183712006, 0.02657502517104149, 0.026863031089305878, -0.0021322204265743494, 0.023564063012599945, -0.012377678416669369, -0.009111437015235424, -0.013902796432375908, -0.005485190078616142, 0.027386676520109177, 0.00583537807688117, -0.009464898146688938, 0.03037145733833313, 0.024166254326701164, 0.003573882859200239, -0.004500081297010183, -0.021534934639930725, -0.020513825118541718, -0.037571586668491364, 0.005033545661717653, -0.01917852833867073, -0.024807721376419067, -0.023118963465094566, -0.008214693516492844, -0.02201930806040764, 0.0003160284541081637, -0.011873668991029263, 0.010780558921396732, -0.04738994687795639, 0.01644247956573963, 0.007985599339008331, -0.0034626079723238945, 0.03050236962735653, 0.014072981663048267, -0.010976925492286682, 0.00966781098395586, 0.013372605666518211, 0.002497136127203703, 0.006254294887185097, 0.0147013571113348, -0.014020617119967937, 0.023511698469519615, 0.00607756432145834, -0.010780558921396732, 0.001422025728970766, -0.029036160558462143, 0.011651120148599148, 0.005688102915883064, -0.020291276276111603, -0.007677956949919462, 0.007160856854170561, -0.028276875615119934, -0.018406150862574577, 0.0021060381550341845, -0.002719685435295105, 0.006215021479874849, 0.015997380018234253, -0.024650627747178078, -0.020461460575461388, -0.01667811907827854, 0.004398624878376722, -0.009150710888206959, 0.032151855528354645, 0.01659957319498062, -0.023982979357242584, -0.013470789417624474, -0.0069383070804178715, -0.0027016852982342243, 0.02188839577138424, 0.015683192759752274, 0.0013033872237429023, 0.01712321862578392, -0.0005089183105155826, -0.014976270496845245, 0.001384388655424118, -0.04369824379682541, 0.018825067207217216, -0.03422025591135025, -0.008397970348596573, -0.02328914776444435, -0.024218618869781494, -0.01173621229827404, -0.00626411335542798, -0.008024872280657291, 0.006270658690482378, 0.021299293264746666, -0.007023399695754051, 0.003501881379634142, 0.03497954085469246, 0.006666665896773338, 0.020644737407565117, 0.08126983046531677, 0.01051218993961811, -0.01296023465692997, 0.025671737268567085, -0.013745702803134918, -0.0009769267635419965, -0.0351366363465786, -0.0007633774657733738, -0.01748977042734623, 0.0019849450327455997, -0.03092128597199917, 0.019479624927043915, 0.019034525379538536, 0.010793649591505527, 0.01957126334309578, 0.004683357197791338, 0.009909997694194317, 0.009137619286775589, 0.02935034967958927, -0.006398297380656004, 0.006395024713128805, 0.0507412813603878, -0.0191261637955904, -0.016337750479578972, 0.012043854221701622, 0.01735886000096798, 0.022739320993423462, -0.02969071827828884, 0.058857791125774384, 0.0340893417596817, 0.007219766732305288, -0.031183108687400818, 0.031130744144320488, 0.003045327728614211, -0.03477008268237114, -0.019767630845308304, 0.019296348094940186, 0.0025315003003925085, 0.012227130122482777, 0.008057599887251854, 0.028172146528959274, 0.016233021393418312, -0.010387823916971684, 0.010453280061483383, 0.0029258711729198694, 0.0036066106986254454, 0.032518405467271805, -0.015735557302832603, 0.010675829835236073, 0.0023662245366722345, 0.0021649482659995556, -0.006120110861957073, -0.02531827613711357, -0.0010579281952232122, -0.00294387130998075, -0.02328914776444435, 0.019034525379538536, 0.03474390134215355, -0.023564063012599945, 0.020932741463184357, -0.02995254099369049, 0.0018851249478757381, 0.009209620766341686, 0.02539682202041149, 0.0019767628982663155, -0.02945507876574993, 0.002310587326064706, -0.0359221026301384, -0.003073146566748619, 0.05254786089062691, -0.015827195718884468, 0.019270166754722595, -0.010237275622785091, 0.00223531317897141, -0.012587136588990688, 0.02349860593676567, -0.0012133856071159244, -0.02971690148115158, 0.021482570096850395, 0.014491898007690907, 0.03950907662510872, -0.02953362464904785, -0.011677302420139313, 0.02945507876574993, -0.0515267513692379, -0.015499916858971119, 0.02334151230752468, -0.018052689731121063, -0.013693338260054588, 0.02289641462266445, 0.03924725577235222, -0.020330550149083138, -0.013614791445434093, 0.03448207676410675, 0.02118147350847721, 0.017581408843398094, -0.006309932097792625, -0.009491080418229103, -0.006781213451176882, 0.009065618738532066, 0.02201930806040764, 0.00989036075770855, -0.0018131237011402845, 0.04817541688680649, -0.0066895755007863045, 0.006048109382390976, -0.015787921845912933, -0.014007525518536568, -0.01769922859966755, 0.031680572777986526, -0.011533299461007118, 0.01870724745094776, 0.0013074781745672226, -0.004716085270047188, -0.011134019121527672, -0.01505481731146574, -0.03586973994970322, 0.0075666820630431175, -0.03783341124653816, -0.0476255901157856, 0.024650627747178078, 0.0011135656386613846, 0.007743412628769875, 0.0031418749131262302, -0.02318441867828369, -0.0050302729941904545, 0.011350023560225964, -0.0484110563993454, 0.006303386762738228, 0.0179610513150692, 0.02597283385694027, 0.010073636658489704, 0.031890030950307846, -0.013902796432375908, -0.011206020601093769, 0.0013213874772191048, -0.007992144674062729, -0.017450496554374695, -0.021351659670472145, -0.0005502371932379901, 0.015264276415109634, 0.03162820637226105, -0.031785301864147186, -0.00947144441306591, -0.0049484530463814735, -0.005135002080351114, -0.008411061018705368, -0.004064800683408976, 0.02165275439620018, -0.012934052385389805, -0.019113073125481606, -0.03442971408367157, 0.032937321811914444, -0.007481589913368225, 0.014727539382874966, -0.06184257194399834, 0.0005547372857108712, -0.018471606075763702, -0.019427260383963585, 0.01061691902577877, 0.01991163194179535, -0.004503353964537382, 0.0006111928960308433, 0.024794630706310272, -0.003136965911835432, 0.032806411385536194, 0.007605955470353365, 0.011926033534109592, 0.012024217285215855, -0.003361151786521077, -0.004441171418875456, -0.018301421776413918, 0.032858774065971375, 0.027439041063189507, 0.016062835231423378, 0.010453280061483383, -0.009792177006602287, 0.007998690009117126, -0.007540499791502953, -0.032544586807489395, -0.003097692271694541, 0.009595809504389763, 0.02997872419655323, 0.012502044439315796, -0.0152904586866498, -0.006774668116122484, -0.006660120561718941, -0.023276057094335556, -0.01902143470942974, -0.02578955702483654, 0.0382523275911808, 0.00850924476981163, -0.00750777218490839, -0.029114708304405212, 0.006395024713128805, 0.03744067624211311, 0.020265093073248863, -0.012927506119012833, 0.006113565061241388, 0.005197185091674328, -0.016795940697193146, 0.0030371458269655704, -0.03335623815655708, -0.02089346945285797, -0.0077695949003100395, 0.032020941376686096, 0.01142202503979206, 0.0031598752830177546, 0.018366876989603043, -0.0037735227961093187, 0.004968089982867241, 0.027569953352212906, 0.0014915724750608206, -0.022529860958456993, 0.027465224266052246, 0.00888888817280531, 0.012416951358318329, -0.0009859269484877586, 0.025331366807222366, -0.04723285511136055, -0.02362951822578907, 0.017083944752812386, 0.025069544091820717, -0.012351496145129204, -0.0009278349461965263, -0.010643101297318935, -0.014112255536019802, 0.00888888817280531, -0.023799702525138855, -0.006287022959440947, 0.04780886322259903, -0.018026508390903473, 0.010433643124997616, 0.005161184351891279, -0.0007588773733004928, -0.024912450462579727, -0.03333005681633949, -0.007416134234517813, 0.04183930158615112, -0.012875141575932503, -0.01712321862578392, 0.031863849610090256, -0.0016625755233690143, 0.02950744330883026, -0.004493535961955786, -0.010911470279097557, 0.0027082308661192656, -0.01225985772907734, -0.011310749687254429, 0.019662901759147644, 0.01654720865190029, 0.03869742527604103, -0.011454752646386623, -0.03751922398805618, 0.007782686036080122, 0.008116510696709156, 0.0264179315418005, -0.014099163934588432, 0.003583701094612479, 0.011003107763826847, -0.013837341219186783, -0.0025544099044054747, 0.008090328425168991, 0.015251184813678265, 0.009327441453933716, 0.03531990945339203, 0.00018644655938260257, -0.010309277102351189, -0.02984781190752983, 0.0175683181732893, 0.013654065318405628, 0.007887415587902069, -0.0022549498826265335, 0.0037506131920963526, 0.022582227364182472, 0.032178036868572235, 0.003094419604167342, -0.022791685536503792, -0.007121583446860313, -0.03762395307421684, -0.013968252576887608, -0.01004745438694954, -0.016560299322009087, -0.010466370731592178, 0.0014171164948493242, 0.01649484410881996, 0.010990017093718052, 0.0398232638835907, 0.03503190726041794, 0.01523809414356947, 0.03762395307421684, -0.023694973438978195, 0.015539189800620079, -0.049563076347112656, 0.0147013571113348, 0.04872524365782738, -0.010060545988380909, 0.002171493833884597, -0.027753228321671486, -0.006565209478139877, -0.011533299461007118, -0.04610701650381088, 0.027700863778591156, -0.00328915030695498, 0.003920798189938068, 0.001911307335831225, -0.02428407594561577, 0.014662083238363266, -0.041158560663461685, 0.023354604840278625, 0.026300111785531044, 0.002091310452669859, 0.0001350024394923821, -0.02183603122830391, 0.008587791584432125, -0.0008885615388862789, 0.0016953033627942204, -0.010204548016190529, -0.015918834134936333, -0.014400260522961617, 0.012083127163350582, -0.00973326712846756, 0.03971853479743004, -0.018419241532683372, 0.016638847067952156, -0.0013246602611616254, -0.06781213730573654, 0.005059727933257818, 0.017869414761662483, 0.009870723821222782, 0.009261985309422016, 0.02558009885251522, 0.014504989609122276, 0.005246276501566172, -0.01299950759857893, -0.0020847648847848177, 0.0027655046433210373, 0.009883815422654152, 0.01754213497042656, -0.0006467844359576702, -0.032387495040893555, -0.01087874174118042, 0.01675666682422161, -0.021273111924529076, 0.004997544921934605, 0.005462280474603176, 0.0001592415210325271, -0.014819176867604256, 0.0018245783867314458, -0.024951724335551262, -0.01675666682422161, 0.013300604186952114, 0.04427425563335419, 0.0004266895412001759, 0.00968090258538723, -0.0011258384911343455, -0.007272131275385618, -0.0005903288256376982, -0.005773195065557957, 0.008568154647946358, 0.0026100471150130033, 0.006584846414625645, 0.011192929930984974, 0.02220258302986622, -0.02209785394370556, 0.004545900505036116, -0.001674848492257297, 0.014216984622180462, 0.017974143847823143, -0.010067091323435307, -0.004303714260458946, 0.018602518364787102, 0.0442480742931366, -0.019427260383963585, 0.020396005362272263, -0.007933234795928001, 0.005233185365796089, -0.00973326712846756, 0.004401897545903921, -0.0309736505150795, 0.01590574160218239, -0.036995578557252884, 0.01775159314274788, -0.008895433507859707, 0.00999508984386921, -0.02099819853901863, -0.02615610882639885, -0.004788086749613285, -0.0025364095345139503]
metadata : {"source": "pydantic_ai_docs", "crawled_at": "2025-03-14T10:14:24.428141", "url_path": "/api/agent/", "chunk_size": 4752}
updated_dt: 2025-03-14T10:14:24.429683
---
```

Return new messages associated with this run.
Messages from older runs are excluded.
Parameters:
Name | Type | Description | Default  
---|---|---|---  
`result_tool_return_content` |  `str[](https://docs.python.org/3/library/stdtypes.html#str) | None` |  The return content of the tool call to set in the last message. This provides a convenient way to modify the content of the result tool call if you want to continue the conversation and want to set the response to the result tool call. If `None`, the last message will not be modified. |  `None`  
Returns:
Type | Description  
---|---  
`list[](https://docs.python.org/3/library/stdtypes.html#list)[ModelMessage[](https://ai.pydantic.dev/api/messages/#pydantic_ai.messages.ModelMessage "pydantic_ai.messages.ModelMessage")]` |  List of new messages.  
Source code in `pydantic_ai_slim/pydantic_ai/agent.py`
```
1516
1517
1518
1519
1520
1521
1522
1523
1524
1525
1526
1527
1528
1529
1530
```
| ```
defnew_messages(self, *, result_tool_return_content: str | None = None) -> list[_messages.ModelMessage]:
"""Return new messages associated with this run.
  Messages from older runs are excluded.
  Args:
    result_tool_return_content: The return content of the tool call to set in the last message.
      This provides a convenient way to modify the content of the result tool call if you want to continue
      the conversation and want to set the response to the result tool call. If `None`, the last message will
      not be modified.
  Returns:
    List of new messages.
  """
  return self.all_messages(result_tool_return_content=result_tool_return_content)[self._new_message_index :]

```
  
---|---  
####  new_messages_json
```
new_messages_json(
  *, result_tool_return_content: str[](https://docs.python.org/3/library/stdtypes.html#str) | None = None
) -> bytes[](https://docs.python.org/3/library/stdtypes.html#bytes)

```

Return new messages from [`new_messages`](https://ai.pydantic.dev/api/agent/#pydantic_ai.agent.AgentRunResult.new_messages) as JSON bytes.
Parameters:
Name | Type | Description | Default  
---|---|---|---  
`result_tool_return_content` |  `str[](https://docs.python.org/3/library/stdtypes.html#str) | None` |  The return content of the tool call to set in the last message. This provides a convenient way to modify the content of the result tool call if you want to continue the conversation and want to set the response to the result tool call. If `None`, the last message will not be modified. |  `None`  
Returns:
Type | Description  
---|---  
`bytes[](https://docs.python.org/3/library/stdtypes.html#bytes)` |  JSON bytes representing the new messages.  
Source code in `pydantic_ai_slim/pydantic_ai/agent.py`
```
1532
1533
1534
1535
1536
1537
1538
1539
1540
1541
1542
1543
1544
1545
1546
```
| ```
defnew_messages_json(self, *, result_tool_return_content: str | None = None) -> bytes:
"""Return new messages from [`new_messages`][pydantic_ai.agent.AgentRunResult.new_messages] as JSON bytes.
  Args:
    result_tool_return_content: The return content of the tool call to set in the last message.
      This provides a convenient way to modify the content of the result tool call if you want to continue
      the conversation and want to set the response to the result tool call. If `None`, the last message will
      not be modified.
  Returns:
    JSON bytes representing the new messages.
  """
  return _messages.ModelMessagesTypeAdapter.dump_json(
    self.new_messages(result_tool_return_content=result_tool_return_content)
  )

```
  
---|---  
####  usage
```
usage() -> Usage[](https://ai.pydantic.dev/api/usage/#pydantic_ai.usage.Usage "pydantic_ai.usage.Usage")

```

Return the usage of the whole run.
Source code in `pydantic_ai_slim/pydantic_ai/agent.py`
```
1548
1549
1550
```
| ```
defusage(self) -> _usage.Usage:
"""Return the usage of the whole run."""
  return self._state.usage

```
  
---|---  
###  EndStrategy `module-attribute`
```
EndStrategy = EndStrategy

```

###  RunResultDataT `module-attribute`
```
RunResultDataT = TypeVar('RunResultDataT')

```

Type variable for the result data of a run where `result_type` was customized on the run call.
###  capture_run_messages `module-attribute`
```
capture_run_messages = capture_run_messages

```

###  InstrumentationSettings `dataclass`
Options for instrumenting models and agents with OpenTelemetry.
Used in:
  * `Agent(instrument=...)`
  * [`Agent.instrument_all()`](https://ai.pydantic.dev/api/agent/#pydantic_ai.agent.Agent.instrument_all)
  * `InstrumentedModel`

Source code in `pydantic_ai_slim/pydantic_ai/models/instrumented.py`
```
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
```
|