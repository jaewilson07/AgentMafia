---
url: https://ai.pydantic.dev/api/agent/
session_id: pydantic_ai_docs
chunk_number: 45
title: Async Iteration over Agent Nodes
summary: This section describes the `__aiter__()` method, which provides asynchronous iteration over nodes in the agent run. The method yields an AsyncIterator containing AgentNode instances or an End node representing the final result.
embedding: [0.00929366797208786, 0.027263106778264046, 0.0029428896959871054, -0.05321476235985756, -0.002236722270026803, 0.03432478383183479, 0.01830991357564926, 0.030239099636673927, 0.013253250159323215, 0.01351806242018938, 0.011002341285347939, -0.030163438990712166, -0.04017588496208191, -0.06769119203090668, -0.01656971499323845, -0.01837296411395073, -0.01303887739777565, -0.016796696931123734, 0.024816742166876793, 0.03931839391589165, 0.03752775490283966, -0.005457035265862942, 0.02176508866250515, 0.026102975010871887, -0.02978513389825821, 0.0005564221064560115, -0.014085518196225166, 0.06809471547603607, -0.016191409900784492, -0.019268283620476723, 0.031071368604898453, -0.009167566895484924, -0.024577150121331215, -0.009419769048690796, -0.007099505048245192, 0.005841644015163183, -0.0028152121230959892, 0.02562379091978073, -0.009829598478972912, 0.03498050943017006, 0.04516949504613876, -0.04754020273685455, 0.00164719857275486, 0.002200468210503459, 0.0014139111153781414, -0.0062987613491714, -0.004249614663422108, 0.0067842514254152775, 0.024652810767292976, 0.021046312525868416, -0.01854950562119484, 0.0067527261562645435, -0.01890258863568306, 0.02590121328830719, -0.03974713757634163, -0.00854966975748539, 0.025712061673402786, -0.004419851582497358, 0.022874781861901283, -0.05614031106233597, 0.0191169623285532, -0.003188787493854761, 0.0234296265989542, 0.043731942772865295, -0.038713108748197556, 0.039595816284418106, -0.022622577846050262, 0.028297139331698418, -0.030768724158406258, -0.005271035712212324, -0.003805107669904828, 0.027792733162641525, -0.06854867935180664, -0.03003733605146408, -0.042243946343660355, -0.015384362079203129, 0.06476563960313797, 0.008076789788901806, -0.0019214689964428544, -0.012219218537211418, 0.02437538653612137, -0.00019929921836592257, -0.003672701306641102, 0.002468433463945985, 0.009936784394085407, -0.06461431831121445, -0.053870487958192825, -0.0443120077252388, -0.03697291016578674, -0.054324451833963394, 0.0004713037342298776, 0.0039312089793384075, -0.014905177056789398, 0.05230683088302612, 0.04892731457948685, 0.07122202962636948, -0.001069496851414442, -0.0009000482386909425, 0.015787886455655098, 0.035005729645490646, 0.037502534687519073, -0.04438766837120056, -0.060377318412065506, 0.017641576007008553, 0.014766465872526169, 0.012761455029249191, -0.0021311123855412006, 0.044614650309085846, -0.013707214966416359, -0.027994494885206223, -0.09518128633499146, -0.036418065428733826, 0.010624037124216557, 0.002641822909936309, -0.04486685246229172, -0.04711145535111427, -0.0038177177775651217, 0.014123348519206047, 0.06239493936300278, -0.040301986038684845, -0.025485079735517502, 0.026657821610569954, -0.008650551550090313, 0.013845926150679588, 0.03003733605146408, -0.006446930579841137, -0.007294961716979742, -0.014829516410827637, -0.017780287191271782, 0.0008228111546486616, 0.01209942251443863, -0.009659362025558949, 0.015006057918071747, -0.026733482256531715, -0.03876354917883873, 0.013858536258339882, -0.03788083791732788, 0.0099493945017457, -0.04143689572811127, 0.049204740673303604, -0.004331580828875303, -0.053971368819475174, -0.014438602142035961, 0.012937996536493301, 0.008347908034920692, 0.07046542316675186, -0.04327797517180443, 0.030012115836143494, -0.048246368765830994, 0.03013821877539158, 0.03699813038110733, 0.014110738411545753, -0.017679406329989433, -0.0011349120177328587, -0.00973502267152071, 0.01805770955979824, -0.01738937385380268, 0.022673018276691437, -0.01805770955979824, -0.020932821556925774, -0.036241523921489716, 0.01809554174542427, -0.010996036231517792, -0.021260684356093407, -0.026708262041211128, -0.010699697770178318, -0.03359339386224747, 0.0010821070754900575, -0.04696013405919075, -0.015661785379052162, -0.010434885509312153, -0.061890531331300735, -0.024085354059934616, 0.01890258863568306, 0.06592577695846558, -0.016632765531539917, -0.061890531331300735, -0.012320100329816341, -0.019911399111151695, -0.007156250532716513, -0.0026954158674925566, -0.014123348519206047, -0.03742687404155731, 0.012673183344304562, -0.030642623081803322, 0.0021657904144376516, -1.4050939171283972e-05, 0.008297467604279518, -0.05066751316189766, 0.0036033454816788435, 0.03586321696639061, 0.055535025894641876, 0.03092004545032978, 0.001759113511070609, -0.020680617541074753, 0.014299890957772732, 0.06532049179077148, -0.021424615755677223, 0.032281938940286636, 0.01498083770275116, 0.016014868393540382, 0.004476597066968679, 0.028044935315847397, 0.009829598478972912, 0.012811895459890366, -0.049028195440769196, -0.039343614131212234, -0.004101445898413658, 0.02437538653612137, -0.034400444477796555, 0.021512886509299278, -0.035283152014017105, 0.023152204230427742, -0.004631071351468563, -0.009003634564578533, -0.045144274830818176, -0.04269791021943092, 0.035812776535749435, 0.03788083791732788, 0.01713716983795166, 0.0038019551429897547, 0.022458646446466446, 0.004687816835939884, 0.024022303521633148, 0.02498067356646061, 0.01590137742459774, 0.010699697770178318, -0.04017588496208191, 0.021815530955791473, 0.04746454209089279, 0.008467704057693481, 0.00032254355028271675, -0.026758702471852303, -0.030819164589047432, 0.01633012294769287, -0.05856145918369293, 0.013366741128265858, -0.012805590406060219, 0.024211455136537552, -0.02986079454421997, -0.025598570704460144, -0.010113326832652092, 0.026834363117814064, -0.023227864876389503, 0.002143722726032138, 0.017111949622631073, 0.001105751027353108, -0.01901608146727085, 0.039167072623968124, 0.03341685235500336, 0.034576985985040665, -0.011834610253572464, -0.010252038016915321, -0.040024563670158386, -0.0058920844458043575, -0.018045099452137947, -0.007011233828961849, 0.005293103400617838, -0.01819642260670662, -0.01150044146925211, 0.028070155531167984, 0.03487962856888771, -0.04875077307224274, -0.00865685660392046, 0.014602534472942352, 0.000687252264469862, 0.04476597160100937, -0.002709602238610387, -0.005062968470156193, -0.04325275495648384, -0.002421145560219884, 0.00224302732385695, 0.017162391915917397, -0.04221872612833977, -0.036165863275527954, 0.03732599318027496, 0.022811731323599815, 0.035106610506772995, -0.006383880041539669, -0.03689724951982498, -0.007559774909168482, 0.024034913629293442, 0.046480949968099594, 0.030642623081803322, 0.023580947890877724, -0.01656971499323845, -0.045497361570596695, -0.00733279250562191, 0.05346696451306343, 0.006683370564132929, 0.010712307877838612, 0.0077867573127150536, 0.03714945167303085, -0.021966852247714996, 0.01633012294769287, -0.03399691730737686, 0.00731387734413147, 0.005721847992390394, 0.01780550740659237, -0.03276112675666809, 0.025611180812120438, -0.024261895567178726, 0.005044053308665752, 0.000810201046988368, 0.022773901000618935, 0.01590137742459774, -0.001631435938179493, -0.0071310303173959255, 0.025926433503627777, 0.003005940467119217, -0.015750056132674217, 0.06678326427936554, -0.030239099636673927, 0.0022887391969561577, 0.02219383418560028, -0.023126984015107155, 0.05427401140332222, -0.05301300063729286, 0.04279879108071327, -0.035182271152734756, -0.022219054400920868, -0.02346745692193508, 0.011607627384364605, 0.04872555285692215, -0.015157380141317844, -0.022975662723183632, 0.029129406437277794, 0.0014738092431798577, 0.007767842151224613, 0.019760077819228172, -0.011223018169403076, -0.027464870363473892, 0.01872604712843895, 0.006544658914208412, -0.012755149975419044, -0.011796778999269009, -0.01943221502006054, -0.008259637281298637, 0.039343614131212234, 0.07465198636054993, -0.03508139029145241, 0.010195292532444, -0.01894041895866394, -0.01805770955979824, -0.024186234921216965, 0.05056663230061531, 0.012540777213871479, 0.03435000404715538, -0.041966523975133896, 0.008770347572863102, 0.02264779806137085, 0.002071214374154806, 0.04711145535111427, 0.06521961092948914, -0.01762896589934826, -0.01153827179223299, -0.021121973171830177, 0.013013657182455063, -0.04133601486682892, -0.0019009775714948773, -0.08302511274814606, -0.019268283620476723, 0.009886343963444233, -0.0027411277405917645, -0.05084405466914177, -0.007856112904846668, -0.002801025751978159, 0.020050112158060074, 0.021285904571413994, 0.06405947357416153, 0.08201630413532257, 0.022534307092428207, -0.006115914322435856, -0.01604008860886097, -0.020768888294696808, 0.01841079443693161, -0.03260980546474457, -0.01480429619550705, 0.03311420977115631, 0.06143656745553017, -0.01717500202357769, 0.03611541911959648, 0.0062861512415111065, -0.005491713061928749, 0.030012115836143494, 0.018839538097381592, -0.03092004545032978, 0.009407158941030502, -0.017578525468707085, 0.037578195333480835, 0.02890242449939251, -0.06521961092948914, -0.003307007486000657, 0.0003936725843232125, -0.02812059596180916, 0.010731223039329052, 0.012937996536493301, 0.0152456508949399, 0.035459693521261215, 0.012257048860192299, 0.008347908034920692, 0.003119431668892503, -0.02250908687710762, 0.00344571890309453, 0.0028735341038554907, -0.021916411817073822, 0.052205950021743774, 0.013379351235926151, 0.012805590406060219, 0.015813106670975685, 0.035005729645490646, -0.004142428748309612, 0.016304902732372284, -0.03445088490843773, -0.013669384643435478, -0.0031367705669254065, -0.003861853154376149, -0.01929350383579731, 0.00011349119449732825, 0.042773570865392685, -0.03513183072209358, -0.06870000809431076, 0.013127148151397705, 0.004432461690157652, -0.02819625660777092, 0.03886443004012108, 0.023732271045446396, -0.006519438698887825, 0.008864923380315304, -0.010428580455482006, 0.0409829318523407, 0.06905309110879898, 0.012673183344304562, -0.025875993072986603, -0.013240640051662922, -0.0104411905631423, 0.026657821610569954, -0.005312018562108278, -0.009167566895484924, -0.02370705083012581, 0.020516686141490936, -0.06532049179077148, 0.019810518249869347, 0.04484163224697113, -0.018826927989721298, -0.0015281904488801956, -0.036872029304504395, -0.020377974957227707, 0.003697921521961689, -0.016241852194070816, -0.02466542087495327, 0.0032754819840192795, -0.016935408115386963, -0.00374520942568779, -0.038637448102235794, -0.021386785432696342, 0.10683304816484451, -0.0019498418550938368, 0.07550947368144989, 0.006175812799483538, 0.03296288847923279, -0.017792897298932076, -0.026935243979096413, 0.008789262734353542, -0.00553900096565485, 0.0382339246571064, 0.014085518196225166, 0.0044135465286672115, -0.010296173393726349, 0.03540925309062004, 0.04953260347247124, -0.017755066975951195, -0.010277258232235909, -0.004508122336119413, -0.03437522426247597, 0.014816906303167343, 0.010365528985857964, 0.027691852301359177, -0.03147489205002785, -0.02933117002248764, -0.03820870444178581, -0.02862500213086605, 0.012484031729400158, 0.002041265368461609, -0.013530672527849674, 0.016872357577085495, 0.004858053755015135, -0.022206444293260574, -0.023089153692126274, 0.009646751917898655, 0.03788083791732788, 0.03954537585377693, 0.024224065244197845, -0.01361894328147173, 0.050793614238500595, -0.019091742113232613, -0.029986895620822906, -0.008631636388599873, -0.039343614131212234, -0.009299973025918007, -0.017011068761348724, -0.018990859389305115, -0.011922881007194519, 0.029028525575995445, -0.025131994858384132, -0.06728766858577728, 0.03303854912519455, 0.045951325446367264, 0.022660408169031143, 0.08161278069019318, -0.047868065536022186, 0.004375716205686331, 0.0029775677248835564, -0.012509251944720745, -0.02456454001367092, 0.005728153046220541, -0.01003766618669033, 0.023164814338088036, -0.006194727960973978, -0.006156897637993097, -0.010800578631460667, -0.02668304182589054, -0.019558316096663475, -0.00507873110473156, 0.026834363117814064, -0.011948101222515106, 0.025951653718948364, -0.03336641192436218, -0.019243063405156136, -0.0007439978653565049, 0.03566145524382591, -0.00599927082657814, 0.0026292128022760153, 0.048069827258586884, -0.02409796416759491, 0.023013493046164513, 0.02148766629397869, 0.015623955056071281, -0.05654383823275566, -0.029759913682937622, -0.022622577846050262, 0.05487930029630661, -0.040831610560417175, 0.008366823196411133, -0.027010904625058174, -0.01586354710161686, 0.004813918378204107, -0.009646751917898655, 0.020327534526586533, -0.008921668864786625, 0.02027709409594536, 0.002209925791248679, 0.02723788656294346, -0.030087776482105255, 0.027641411870718002, -0.0007034089649096131, -0.016418393701314926, 0.0002762407239060849, 0.034400444477796555, -0.005507475696504116, 0.0025157216005027294, 0.0108321039006114, 0.02706134505569935, -0.02258474752306938, 0.004842291120439768, 0.03301332890987396, 0.03324031084775925, -0.02968425303697586, -0.02515721507370472, 0.0010072343284264207, 0.014211620204150677, 0.013833316043019295, 0.018927808851003647, -0.03498050943017006, 0.02615341544151306, -0.006434320472180843, 0.00554845854640007, 0.004426156636327505, -0.037477314472198486, 0.015132159925997257, -0.016380563378334045, -0.04105859249830246, 0.02007533237338066, 0.018259473145008087, 0.009804378263652325, -0.0011916576186195016, -0.020050112158060074, -0.005185917019844055, -0.00522059528157115, -0.022219054400920868, -0.030112996697425842, -0.00031111561111174524, 0.0018694521859288216, -0.01880170777440071, -0.034576985985040665, -0.013152368366718292, -0.012799285352230072, 0.004022632259875536, -0.01886475831270218, 0.006626625079661608, 0.04085683077573776, -0.008474009111523628, 0.0007853748393245041, 0.033442072570323944, -0.0026591618079692125, -0.013808095827698708, 0.014451212249696255, -0.004810765851289034, -0.031147029250860214, -0.0038996837101876736, -0.0021121972240507603, -0.002175247995182872, -0.009148651733994484, -0.027439650148153305, -0.018637776374816895, 0.023580947890877724, -0.02996167540550232, 0.053416524082422256, 0.05508106201887131, -0.037502534687519073, 0.024034913629293442, 0.027893614023923874, 0.019104352220892906, 0.014602534472942352, 0.0034047358203679323, -0.018473844975233078, -0.04027676582336426, 0.0011317594908177853, -0.008171366527676582, 0.010851019062101841, -0.0372503325343132, 0.013972027227282524, 0.012698403559625149, 0.011916575953364372, -0.044614650309085846, -0.023404406383633614, -0.011595017276704311, -0.037931278347969055, -0.022799121215939522, -0.008278552442789078, 0.01798204891383648, 0.022345155477523804, -0.03861222788691521, -6.915869744261727e-05, -0.0191169623285532, 0.008165061473846436, 0.0007770994561724365, -0.008127231150865555, 0.014337721280753613, -0.02837279997766018, -0.060125112533569336, -0.012465116567909718, 0.003385820658877492, 0.011374340392649174, 0.00825333222746849, -0.00902885477989912, 0.0028940255288034678, -0.01046010572463274, -0.007956993766129017, 0.01136173028498888, -0.02511938475072384, -0.012168778106570244, -0.004363106098026037, 0.015333921648561954, -0.04844813048839569, -0.0026701956521719694, 0.030768724158406258, 0.01872604712843895, 0.033517733216285706, 0.012502946890890598, -0.01841079443693161, 0.0009229041170328856, 0.012988436967134476, 0.018612556159496307, 0.0050125280395150185, -0.018360354006290436, 0.013669384643435478, -0.02190380170941353, -0.019180012866854668, 0.03851134702563286, 0.004533343017101288, 0.003723141737282276, -0.05417313054203987, 0.07747665792703629, 0.05866234004497528, -0.020693227648735046, -0.013606333173811436, -0.0031147028785198927, 0.016695816069841385, 0.028675442561507225, -0.010718612931668758, -0.0044135465286672115, -0.011374340392649174, 0.025447247549891472, 0.030415641143918037, 0.02066800743341446, 0.017074119299650192, 0.021954242140054703, -0.01784333772957325, -0.0645134374499321, -0.0034551764838397503, -0.026481280103325844, 0.0009441837319172919, 0.022572137415409088, -0.02915462665259838, -0.025737281888723373, -0.00014531207852996886, -5.4134907259140164e-05, 0.022219054400920868, -0.03788083791732788, -0.01890258863568306, 0.008820788003504276, -0.04469031095504761, 0.021538106724619865, -0.04484163224697113, -0.013795485720038414, -0.002912940690293908, 0.011651762761175632, -0.008335297927260399, -0.04965870454907417, -0.009760242886841297, 0.013934196904301643, 0.0037578195333480835, 0.009363023564219475, -0.008076789788901806, -0.029810354113578796, -0.0054633403196930885, 0.03762863576412201, 0.007906553335487843, 0.010611427016556263, -0.008278552442789078, -0.027944054454565048, -0.006046558730304241, -0.027162225916981697, -0.029381610453128815, -0.012112032622098923, -0.06870000809431076, 0.013530672527849674, -0.03283678740262985, -0.007446283474564552, -0.004047852475196123, -0.026657821610569954, -0.009104516357183456, -0.003113126615062356, -0.01957092620432377, -0.010586206801235676, 0.01238315086811781, 0.05346696451306343, -0.030819164589047432, -0.0010986578417941928, -0.040377646684646606, 0.008707297034561634, 0.0067842514254152775, -0.012679488398134708, 0.05876322090625763, 0.01211833767592907, 0.019760077819228172, -0.025447247549891472, -0.02176508866250515, -0.012963216751813889, -0.031121809035539627, -0.00925583764910698, 0.0012184540973976254, 0.02356833778321743, 0.0015628683613613248, 0.026380397379398346, -0.002157909097149968, 0.007566079962998629, -0.03911663219332695, 0.02042841538786888, -0.011494136415421963, 0.017515474930405617, 0.017364153638482094, 0.022874781861901283, 0.02854934148490429, -0.023202644661068916, 0.0067842514254152775, -0.02260996773838997, 0.02950771152973175, 0.004728799685835838, -0.008486619219183922, 0.004672054201364517, -0.018776487559080124, 0.022836951538920403, 0.03851134702563286, -0.019558316096663475, 0.01925567351281643, -0.003256566822528839, -0.026556940749287605, -0.015699615702033043, -0.08383216708898544, -0.036342404782772064, 0.020365364849567413, 0.012963216751813889, 0.021638987585902214, 0.005126019008457661, -0.0027474327944219112, -0.08211718499660492, -0.007944383658468723, -0.00641225278377533, -0.014854736626148224, 0.023126984015107155, -0.02260996773838997, 0.008202891796827316, 0.022004682570695877, 0.006456388160586357, 0.0024179930333048105, 0.022572137415409088, 0.0037578195333480835, -0.045144274830818176, -0.04776718467473984, 0.030995706096291542, -0.010605121962726116, -0.0017874863697215915, -0.017011068761348724, 0.026556940749287605, -0.03868788853287697, -0.029129406437277794, 0.004876968916505575, -0.054324451833963394, 0.008726212196052074, -0.019558316096663475, 0.0016755714314058423, -0.0027253651060163975, -0.0008377857157029212, 0.027086565271019936, 0.028700662776827812, -0.03288722783327103, -0.0341230183839798, -0.011613932438194752, 0.005639881826937199, -0.009054075926542282, 0.01742720417678356, 0.025926433503627777, 0.05162588506937027, 0.018385574221611023, 0.0013004199136048555, -0.030642623081803322, -0.017074119299650192, 0.02590121328830719, 0.007055369205772877, 0.025926433503627777, 0.009640446864068508, -0.03177753463387489, -0.00508818868547678, 0.009552176110446453, 0.01129237376153469, 0.02205512300133705, 0.012149862945079803, -0.016304902732372284, -0.007755231577903032, 0.04342929646372795, 0.03197929635643959, -0.02582555264234543, 0.0029460422229021788, 0.01546002272516489, 0.025207655504345894, 0.03614064306020737, 0.0345013253390789, -0.010428580455482006, -0.03268546611070633, -0.01037183403968811, 2.2153933969093487e-05, 0.007112115155905485, 0.006569879129528999, -0.006834692321717739, -0.02250908687710762, -0.0170615091919899, 0.008789262734353542, 0.01194179616868496, 0.004766630474478006, 0.029835574328899384, -0.004864358808845282, -0.00018196027667727321, 0.004744562320411205, 0.009419769048690796, -0.053063441067934036, 0.018436014652252197, -0.024728471413254738, 0.0168597474694252, 0.0170615091919899, -0.02162637747824192, -0.03513183072209358, -0.017326323315501213, -0.021185023710131645, -0.002487348625436425, 0.016758866608142853, 0.017263272777199745, 0.0017323170322924852, -0.004006869625300169, 0.013972027227282524, -0.054324451833963394, -0.02819625660777092, 0.012408371083438396, 0.03697291016578674, 0.021929021924734116, 0.0034268037416040897, 0.041184693574905396, 0.02703612484037876, -0.010762748308479786, 0.028322359547019005, -0.05336608365178108, 0.02293783240020275, -0.029406830668449402, -0.014854736626148224, -0.012868640944361687, 0.003174600889906287, 0.03003733605146408, 0.025951653718948364, -0.050717953592538834, -0.018738657236099243, -0.01303887739777565, 0.031676653772592545, 0.038183484226465225, -0.04133601486682892, -0.04166387766599655, 0.0011530390474945307, -0.013455011881887913, 0.018209032714366913, 0.010819493792951107, 0.004508122336119413, -0.005759678315371275, 0.012937996536493301, -0.02201729267835617, -0.027944054454565048, -0.03997412323951721, 0.020478855818510056, 0.02117241360247135, 0.021651597693562508, -0.03427433967590332, 0.00015575485303997993, -0.010296173393726349, -0.019520485773682594, 0.03200451657176018, -0.03384559601545334, -0.009337803348898888, 0.002280857879668474, -0.002892449265345931, -0.03674592822790146, 0.008436178788542747, -0.02812059596180916, -0.049381282180547714, -0.0015794191276654601, -0.008045264519751072, -0.021071532741189003, -0.01554829441010952, 0.023341355845332146, 0.006125371903181076, 0.008927973918616772, 0.011090612038969994, 0.05755264684557915, -0.009463904425501823, 0.03571189567446709, -0.021462446078658104, -0.01682191714644432, -0.018814317882061005, 0.0027474327944219112, 0.012030066922307014, 0.059418946504592896, -0.00854966975748539, -0.013555892743170261, -0.012414676137268543, -0.010088106617331505, -0.0027884156443178654, 0.0014217925490811467, -0.01406029798090458, -0.016771476715803146, -0.00523005286231637, 0.029356390237808228, 0.021651597693562508, 0.003704226575791836, 0.06284890323877335, 0.04300055280327797, 0.05225639045238495, 0.0049116467125713825, -0.026405617594718933, 0.047439321875572205, -0.005283645819872618, 0.022269494831562042, 0.0014288857346400619, 0.02562379091978073, 0.027010904625058174, -0.01656971499323845, 0.002022349974140525, 0.03306376934051514, 0.010081801563501358, 0.02325308509171009, 0.026708262041211128, 0.021714648231863976, -0.01868821680545807, 0.03593887761235237, -0.020932821556925774, 0.008839703164994717, 0.01081318873912096, 0.00627984618768096, -0.0018631471320986748, -0.029457271099090576, -0.007446283474564552, 0.03364383429288864, -0.010560986585915089, -0.026229076087474823, 0.02240820601582527, 0.03311420977115631, 0.0028483138885349035, -0.007906553335487843, -0.010996036231517792, 0.008732517249882221, 0.00791285838931799, -0.0059614405035972595, -0.023379186168313026, -0.003943819086998701, 0.008631636388599873, 0.001779605052433908, -0.025258095934987068, 0.010296173393726349, -0.011784168891608715, 0.017792897298932076, -0.03455176576972008, -0.011122137308120728, 0.01093929074704647, 0.003220312763005495, 0.0021815530490130186, 0.009419769048690796, 0.04812026768922806, -0.0023171119391918182, 0.004861206281930208, -0.008436178788542747, 0.0009110820828936994, 0.031323570758104324, -0.018990859389305115, -0.016166189685463905, 0.030793944373726845, -0.01978529803454876, 0.00142021628562361, 0.0014982414431869984, 0.017086729407310486, -0.006979708559811115, -0.020377974957227707, 0.028322359547019005, -0.025081554427742958, -0.026531720533967018, 0.03243326395750046, 0.026102975010871887, 0.019734857603907585, 0.06138612702488899, -0.01167698297649622, 1.3275120181788225e-05, -0.04113425314426422, -0.01013854704797268, 0.03515705093741417, -0.01039074920117855, -0.008328992873430252, 0.0011711660772562027, 0.019533095881342888, 0.023719660937786102, -0.008902753703296185, 0.0207814984023571, 0.004010022152215242, 0.02723788656294346, -0.021462446078658104, -0.006576184183359146, -0.012351625598967075, 0.0033164650667458773, -0.033442072570323944, 0.028322359547019005, 0.04398414492607117, 0.050894495099782944, -0.0034173461608588696, -0.01696062833070755, 0.018398184329271317, 0.030062556266784668, -0.011349119246006012, -0.018007269129157066, 0.005791203584522009, -0.006405947729945183, -0.028473680838942528, -0.03324031084775925, 0.011279763653874397, 0.006494218483567238, -0.011973321437835693, -0.0018915199907496572, -0.010151157155632973, -0.013871146366000175, -0.016128359362483025, -0.031928855925798416, -0.014716025441884995, 0.008997329510748386, 0.03144967183470726, -0.003537142416462302, -0.027414429932832718, 0.024299725890159607, 0.05276079475879669, 0.022635187953710556, 0.03046608157455921, 0.006859912537038326, -0.018574725836515427, -0.06133568659424782, -0.004400936421006918, 0.0023171119391918182, -0.015989648178219795, 0.016733646392822266, 0.009552176110446453, -0.019230453297495842, 0.006771641317754984, -0.07182731479406357, 0.01890258863568306, -0.0029870253056287766, -0.028473680838942528, -0.005671407096087933, 0.0030831776093691587, 0.0020475704222917557, 0.0347030870616436, 0.02721266634762287, -0.022660408169031143, 0.006216795649379492, -0.04569912329316139, 0.01851167529821396, -0.011645457707345486, 0.001140428939834237, -0.00856858491897583, 0.020794108510017395, -0.02307654358446598, -0.017692016437649727, -0.03886443004012108, 0.0017291645053774118, 0.020857160910964012, -0.014199010096490383, 0.016557104885578156, 0.019848348572850227, -0.006122219376266003, 0.014741245657205582, -0.027414429932832718, 0.0007570020388811827, -0.01621663197875023, -0.005551611073315144, -0.03424911946058273, -0.027994494885206223, -0.017414594069123268, -0.008303772658109665, 0.008499229326844215, 0.0013989366125315428, 0.03218105807900429, -0.005103951320052147, 0.008600111119449139, 0.031575772911310196, 0.022597357630729675, 0.032912448048591614, 0.08201630413532257, -0.012452506460249424, -0.021071532741189003, 0.02049146592617035, -0.011595017276704311, -0.005475950427353382, 0.010970816016197205, -0.005743915680795908, 0.016166189685463905, -0.03394647687673569, -0.029129406437277794, 0.029558151960372925, 0.008524449542164803, 0.00613798201084137, 0.031954076141119, -0.00041337593575008214, 0.010844714008271694, -0.010125936940312386, 0.0006474514957517385, 0.002528331708163023, 0.030970485880970955, 0.08670727163553238, -0.039167072623968124, -0.019873568788170815, 0.03248370438814163, -0.011267153546214104, 0.013896366581320763, -0.008499229326844215, 0.015270871110260487, 0.032105397433042526, 0.006078083999454975, -0.042420487850904465, -0.007742621470242739, 0.008562279865145683, -0.03735121339559555, 0.015056498348712921, 0.02668304182589054, -0.036468505859375, -0.0037641245871782303, 0.035384032875299454, 0.01664537563920021, 0.01957092620432377, -0.020592346787452698, -0.02282434143126011, 0.02854934148490429, 0.016771476715803146, 0.004382021259516478, -0.005003070458769798, 0.017023678869009018, -0.007956993766129017, -0.007704791147261858, 0.010542071424424648, 0.029810354113578796, -0.005570526234805584, -0.009798073209822178, -0.055635906755924225, 0.012339015491306782, 0.051146700978279114, 0.023379186168313026, 0.018536895513534546, -1.3299749298312236e-05, -0.003631718223914504, -0.019142182543873787, 0.01643100380897522, -0.009394548833370209, -0.06133568659424782, 0.020264483988285065, 0.0009891072986647487, -0.02225688472390175, 0.058107491582632065, -0.016771476715803146, -0.023202644661068916, 0.015346531756222248, -0.012666878290474415, 0.011405865661799908, 0.011771558783948421, 0.01105908676981926, -0.03205495700240135, -0.004246462136507034, 0.024324946105480194, 0.020541906356811523, -0.032635025680065155, -0.02035275474190712, -0.004110903479158878, -0.010119631886482239, -0.016519274562597275, 0.03513183072209358, 0.02243342623114586, -0.025598570704460144, 0.038360025733709335, 0.010277258232235909, 0.01593920774757862, 0.0191169623285532, 0.006601404398679733, 0.005554763600230217, -0.008902753703296185, -0.01936916448175907, -0.005579983815550804, -0.06789295375347137, 0.014312501065433025, 0.005390831734985113, 0.016771476715803146, -0.027717072516679764, 0.003165143309161067, 0.023013493046164513, 0.022004682570695877, -0.0001765418564900756, 0.008524449542164803, 0.004038394894450903, 0.03288722783327103, -0.020983261987566948, -0.0022241121623665094, 0.020188823342323303, -0.017111949622631073, -0.007156250532716513, -0.005576831288635731, -0.019306113943457603, 0.0014210044173523784, -0.03134879097342491, 0.001836350653320551, -0.010687087662518024, -0.004259072244167328, 0.0012822928838431835, -0.021966852247714996, 0.00973502267152071, 0.0029066356364637613, 0.03601453825831413, -0.019180012866854668, -0.008190281689167023, -0.0054475776851177216, -0.009791768155992031, -0.009438684210181236, 0.009438684210181236, 0.005554763600230217, 0.005434967111796141, 0.019381774589419365, -0.003026431892067194, -0.006708590779453516, 0.018612556159496307, -0.011771558783948421, -0.03982279822230339, 0.0329376682639122, 0.0029066356364637613, -0.01127345860004425, 0.0065635740756988525, 0.004032089840620756, 0.03838524594902992, -0.0035056169144809246, 0.047010574489831924, 0.0034803966991603374, 0.002271400298923254, -0.03445088490843773, 0.012704708613455296, 0.0013713520020246506, 0.019949231296777725, -0.052559033036231995, 0.006765336263924837, -0.028221476823091507, -0.021399395540356636, -0.021500276401638985, 0.015094329603016376, -0.01897824928164482, -0.0024432132486253977, -0.0055988989770412445, -0.004750867839902639, 0.02117241360247135, -0.00586686423048377, 0.02854934148490429, 0.011910270899534225, 0.009262142702937126, 0.02331613563001156, 0.0019451130647212267, 0.0015833597863093019, 0.00925583764910698, 0.034223899245262146, -0.0008196586277335882, -0.0010371834505349398, -0.0168597474694252, -0.012515556998550892, 0.016910187900066376, -0.019848348572850227, 0.002656009281054139, 0.003934361506253481, 0.007175165694206953, -0.008524449542164803, 0.01422423031181097, -0.011191492900252342, -0.021865971386432648, -0.016380563378334045, -0.018789097666740417, 0.004221241921186447, -0.018675606697797775, 0.005636729300022125, 0.019558316096663475, 0.011683288030326366, 0.03578755632042885, -0.0033322277013212442, -0.024816742166876793, 0.015169990248978138, 0.05081883445382118, 0.01440077181905508, -0.00041810472612269223, -0.05003700777888298, 0.014211620204150677, 0.011141052469611168, 0.019797908142209053, 0.0014801144134253263, 0.01696062833070755, -0.012112032622098923, -0.0059772031381726265, -0.0012909623328596354, 0.008486619219183922, -0.0036600911989808083, -0.009678277187049389, 0.032206278294324875, 0.0003367299505043775, 0.015926597639918327, 0.00899102445691824, -0.0029208220075815916, -0.004385173786431551, -0.00224302732385695, 0.01090146042406559, -0.016494054347276688, -0.029179846867918968, -0.0029602288268506527, -0.00835421308875084, 0.008682076819241047, 0.027717072516679764, -0.025522910058498383, -0.008158756420016289, 0.01682191714644432, -0.007692181039601564, -0.004470292013138533, -0.021575937047600746, 0.025598570704460144, -0.04052896797657013, -0.0012034795945510268, -0.03788083791732788, 0.022635187953710556, -0.007811977528035641, -0.0012468269560486078, 0.05780484899878502, -0.012490336783230305, 0.020050112158060074, 0.011191492900252342, 0.0009189634583890438, 0.02427450567483902, 0.0010363953188061714, -0.023870982229709625, -0.00039327851845882833, 0.03639284521341324, 0.039343614131212234, -0.022975662723183632, -0.01607791893184185, 0.012748844921588898, 0.023089153692126274, 5.773076554760337e-05, -0.04827158898115158, -0.02003750205039978, 0.028574561700224876, 0.010081801563501358, 0.0007570020388811827, -0.010989731177687645, 0.003467786591500044, 0.01805770955979824, -0.0003859882999677211, -0.016935408115386963, -0.0021673666778951883, -0.03084438480436802, -0.0017007916467264295, 0.024614980444312096, 0.025535520166158676, -0.008404653519392014, -0.006714895833283663, 0.008846008218824863, 0.017931608483195305, -0.016973238438367844, -0.0337194949388504, 0.019482655450701714, -0.029633812606334686, -0.020516686141490936, 0.01858733594417572, 0.004189716652035713, -0.018221642822027206, -0.02617863565683365, -0.009564786218106747, -0.015031278133392334, 0.016834527254104614, 0.020302314311265945, -0.017591135576367378, 0.02184075117111206, -0.004545953124761581, 0.01947004534304142, -0.042849231511354446, 0.0024905013851821423, -0.02353050746023655, 0.014148569665849209, -0.02523287571966648, -0.024602370336651802, -0.026203855872154236, -0.0331394299864769, 0.005835338961333036, 0.02455192804336548, -0.0004606639267876744, 0.014047687873244286, 0.016418393701314926, -0.006292456295341253, 0.013581112958490849, -0.04375716298818588, 0.0011396408081054688, 0.01844862475991249, 0.012856030836701393, 0.019381774589419365, -0.02474108152091503, 0.019520485773682594, 0.02632995694875717, -0.018536895513534546, -0.0034646340645849705, -0.0443120077252388, -0.0028577714692801237, 0.014526872895658016, 0.010718612931668758, -0.004091988317668438, -0.004804460797458887, 0.017679406329989433, -0.021298514679074287, -0.028498901054263115, 0.015056498348712921, 0.030793944373726845, 0.0019498418550938368, 0.009728717617690563, 0.03205495700240135, 0.030642623081803322, 0.019104352220892906, 0.03213061764836311, 0.016380563378334045, 0.02452670782804489, 0.006122219376266003, 0.02943205088376999, 0.009495429694652557, -0.02986079454421997, -0.007206690963357687, 0.008240722119808197, -0.01307670772075653, -0.014438602142035961, 0.00902885477989912, -0.012673183344304562, -0.01576266624033451, -0.022849561646580696, 0.013228029944002628, -0.006226253230124712, 0.033618614077568054, 0.0168597474694252, 0.012004846706986427, 0.020983261987566948, -0.008927973918616772, 0.01484212651848793, 0.02190380170941353, -0.01344240177422762, 0.04252136871218681, -0.02837279997766018, 0.0002403806574875489, 0.03182797506451607, -0.014173789881169796, -0.02756575122475624, 0.0019971297588199377, 0.011405865661799908, 0.02109675295650959, 0.003688463941216469, -0.011790473945438862, -0.01625446230173111, -0.014779075980186462, 0.042243946343660355, -0.008776652626693249, -0.015510463155806065, -0.012685793451964855, -0.03967147693037987, -0.00041810472612269223, 0.00014944978465791792, -0.02766663208603859, -0.005498018115758896, -0.036418065428733826, 0.010996036231517792, -0.016973238438367844, 0.01129237376153469, 0.005617814138531685, -0.007723706308752298, -0.019482655450701714, -0.009192787110805511]
metadata : {"source": "pydantic_ai_docs", "crawled_at": "2025-03-15T11:17:10.951384", "url_path": "/api/agent/", "chunk_size": 4644}
updated_dt: 2025-03-15T11:17:10.951384
---
```
__aiter__() -> (
  AsyncIterator[](https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator "collections.abc.AsyncIterator")[
    AgentNode[AgentDepsT[](https://ai.pydantic.dev/api/tools/#pydantic_ai.tools.AgentDepsT "pydantic_ai.tools.AgentDepsT"), ResultDataT[](https://ai.pydantic.dev/api/result/#pydantic_ai.result.ResultDataT "pydantic_ai.result.ResultDataT")]
    | End[](https://ai.pydantic.dev/api/pydantic_graph/nodes/#pydantic_graph.nodes.End "pydantic_graph.End")[FinalResult[ResultDataT[](https://ai.pydantic.dev/api/result/#pydantic_ai.result.ResultDataT "pydantic_ai.result.ResultDataT")]]
  ]
)

```

Provide async-iteration over the nodes in the agent run.
Source code in `pydantic_ai_slim/pydantic_ai/agent.py`
```
1356
1357
1358
1359
1360
```
| ```
def__aiter__(
  self,
) -> AsyncIterator[_agent_graph.AgentNode[AgentDepsT, ResultDataT] | End[FinalResult[ResultDataT]]]:
"""Provide async-iteration over the nodes in the agent run."""
  return self

```
  
---|---  
####  __anext__ `async`
```
__anext__() -> (
  AgentNode[AgentDepsT[](https://ai.pydantic.dev/api/tools/#pydantic_ai.tools.AgentDepsT "pydantic_ai.tools.AgentDepsT"), ResultDataT[](https://ai.pydantic.dev/api/result/#pydantic_ai.result.ResultDataT "pydantic_ai.result.ResultDataT")]
  | End[](https://ai.pydantic.dev/api/pydantic_graph/nodes/#pydantic_graph.nodes.End "pydantic_graph.End")[FinalResult[ResultDataT[](https://ai.pydantic.dev/api/result/#pydantic_ai.result.ResultDataT "pydantic_ai.result.ResultDataT")]]
)

```

Advance to the next node automatically based on the last returned node.
Source code in `pydantic_ai_slim/pydantic_ai/agent.py`
```
1362
1363
1364
1365
1366
1367
1368
1369
1370
```
| ```
async def__anext__(
  self,
) -> _agent_graph.AgentNode[AgentDepsT, ResultDataT] | End[FinalResult[ResultDataT]]:
"""Advance to the next node automatically based on the last returned node."""
  next_node = await self._graph_run.__anext__()
  if _agent_graph.is_agent_node(next_node):
    return next_node
  assert isinstance(next_node, End), f'Unexpected node type: {type(next_node)}'
  return next_node

```
  
---|---  
####  next `async`
```
next(
  node: AgentNode[AgentDepsT[](https://ai.pydantic.dev/api/tools/#pydantic_ai.tools.AgentDepsT "pydantic_ai.tools.AgentDepsT"), ResultDataT[](https://ai.pydantic.dev/api/result/#pydantic_ai.result.ResultDataT "pydantic_ai.result.ResultDataT")],
) -> (
  AgentNode[AgentDepsT[](https://ai.pydantic.dev/api/tools/#pydantic_ai.tools.AgentDepsT "pydantic_ai.tools.AgentDepsT"), ResultDataT[](https://ai.pydantic.dev/api/result/#pydantic_ai.result.ResultDataT "pydantic_ai.result.ResultDataT")]
  | End[](https://ai.pydantic.dev/api/pydantic_graph/nodes/#pydantic_graph.nodes.End "pydantic_graph.End")[FinalResult[ResultDataT[](https://ai.pydantic.dev/api/result/#pydantic_ai.result.ResultDataT "pydantic_ai.result.ResultDataT")]]
)

```

Manually drive the agent run by passing in the node you want to run next.
This lets you inspect or mutate the node before continuing execution, or skip certain nodes under dynamic conditions. The agent run should be stopped when you return an [`End`](https://ai.pydantic.dev/api/pydantic_graph/nodes/#pydantic_graph.nodes.End) node.
Example: 
```
frompydantic_aiimport Agent
frompydantic_graphimport End
agent = Agent('openai:gpt-4o')
async defmain():
  async with agent.iter('What is the capital of France?') as agent_run:
    next_node = agent_run.next_node # start with the first node
    nodes = [next_node]
    while not isinstance(next_node, End):
      next_node = await agent_run.next(next_node)
      nodes.append(next_node)
    # Once `next_node` is an End, we've finished:
    print(nodes)
'''
    [
      UserPromptNode(
        user_prompt='What is the capital of France?',
        system_prompts=(),
        system_prompt_functions=[],
        system_prompt_dynamic_functions={},
      ),
      ModelRequestNode(
        request=ModelRequest(
          parts=[
            UserPromptPart(
              content='What is the capital of France?',
              timestamp=datetime.datetime(...),
              part_kind='user-prompt',
            )
          ],
          kind='request',
        )
      ),
      CallToolsNode(
        model_response=ModelResponse(
          parts=[TextPart(content='Paris', part_kind='text')],
          model_name='gpt-4o',
          timestamp=datetime.datetime(...),
          kind='response',
        )
      ),
      End(data=FinalResult(data='Paris', tool_name=None, tool_call_id=None)),
    ]
    '''
    print('Final result:', agent_run.result.data)
    #> Final result: Paris