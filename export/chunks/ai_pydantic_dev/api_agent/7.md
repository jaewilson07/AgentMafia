---
url: https://ai.pydantic.dev/api/agent/
session_id: pydantic_ai_docs
chunk_number: 7
title: Agent API: Request Parameters and Structure
summary: This documentation chunk details the arguments required for the agent's run function, including user input, result type, message history, model settings, and optional dependencies. It also specifies the return type of the function.
embedding: [0.014016634784638882, 0.05038838088512421, -0.018496068194508553, -0.06422626227140427, -0.026203639805316925, 0.019190065562725067, 0.038001589477062225, 0.031229861080646515, 0.011871553026139736, 0.01285997312515974, -0.021082784980535507, 0.004949985537678003, -0.012250096537172794, -0.05955755338072777, 0.00980007741600275, -0.014952478930354118, -0.016130169853568077, 0.013543454930186272, 0.015467719174921513, 0.03711831942200661, 0.03867455571889877, -0.010299544781446457, 0.005730731878429651, 0.04466816410422325, -0.04601409658789635, 0.030346591025590897, -0.04815917834639549, 0.04525700956583023, -0.01719219610095024, 0.01508917473256588, 0.005296983756124973, -0.00594103429466486, -0.04744415357708931, 0.00896412692964077, 0.026182610541582108, -0.00812291819602251, 0.0016600721282884479, 0.008291159756481647, -0.010241711512207985, 0.048874206840991974, 0.05926312878727913, -0.014016634784638882, 0.005173431243747473, 0.040420062839984894, 0.015551839955151081, -0.02696072869002819, 0.0337955467402935, 0.05459442362189293, 0.025488613173365593, 0.014016634784638882, -0.03364833444356918, 0.021598024293780327, -0.02624570019543171, 0.012229066342115402, -0.047696515917778015, -0.018054435029625893, 0.005862170830368996, 0.006729667074978352, 0.00994203146547079, -0.011356312781572342, 0.017917737364768982, -0.003383234841749072, 0.015246901661157608, 0.04727591201663017, -0.04946305230259895, 0.03602474927902222, 0.005499399732798338, 0.050977226346731186, -0.031061619520187378, 0.011282707564532757, 0.0328071266412735, 0.01467908639460802, -0.07204949855804443, -0.02208171971142292, -0.032680943608284, 0.0003368119359947741, 0.067338727414608, 0.02258644439280033, 0.0008326648385263979, -0.008023024536669254, 0.022418202832341194, -0.034363362938165665, 0.03890588879585266, 0.03009422868490219, -0.0038537858054041862, -0.06464686244726181, -0.050262201577425, -0.011240647174417973, -0.0020714756101369858, -0.06338504701852798, 0.011640220880508423, 0.02565685473382473, -0.0006762526463717222, 0.03737068176269531, 0.06725461035966873, 0.05278582498431206, -0.012639155611395836, -0.024731526151299477, 0.02070424146950245, 0.03104058839380741, 0.04786475747823715, -0.029778776690363884, -0.006556167732924223, 0.023448683321475983, 0.0067191519774496555, -0.005076166708022356, -0.025236250832676888, 0.031671494245529175, -0.054257940500974655, -0.031608402729034424, -0.06616103649139404, -0.0004876379680354148, -0.0013301607687026262, 0.024878736585378647, -0.04702354595065117, -0.04504670947790146, 0.0003258039359934628, -0.005436309147626162, 0.05261758342385292, -0.015467719174921513, 0.0009174428996630013, 0.007334285415709019, -0.026498064398765564, -0.009521427564322948, 0.03602474927902222, -0.006072472780942917, -0.024584313854575157, -0.018822036683559418, 0.005352188367396593, -0.018832553178071976, -0.009905228391289711, -0.010657058097422123, -0.02660321444272995, -0.0077654048800468445, -0.014668570831418037, -0.033038459718227386, -0.03884279727935791, -0.026329820975661278, -0.02090402878820896, 0.020641149953007698, -0.021808326244354248, -0.023658985272049904, -0.015635959804058075, -0.0009286151616834104, 0.04243896156549454, 0.07676026225090027, -0.039747096598148346, 0.050766926258802414, -0.016645411029458046, 0.03287021815776825, 0.04731797054409981, 0.0047449409030377865, -0.015331022441387177, 0.005244408268481493, -0.0013327895430848002, 0.017087044194340706, -0.026350852102041245, -0.01257606502622366, 0.015352052636444569, -0.05408969894051552, -0.011198586784303188, 0.01807546429336071, -0.026413943618535995, -0.00819652434438467, -0.016151200979948044, -0.014069209806621075, -0.03678183630108833, -0.004048315342515707, -0.015646476298570633, -0.04571967571973801, -0.011461463756859303, -0.031377073377370834, -0.03364833444356918, 0.01429002732038498, 0.02382722683250904, -0.045214951038360596, -0.08025127649307251, 0.0004659505793824792, -0.0008924694848246872, -0.02843284234404564, -0.03442645072937012, -0.022313052788376808, -0.02696072869002819, -0.015404628589749336, -0.05526738986372948, 0.0032754549756646156, 0.002081990707665682, -0.00024480477441102266, -0.014920933172106743, -0.021177420392632484, 0.00962132029235363, 0.06927350908517838, 0.0023882430978119373, 0.03289124742150307, 0.0056623839773237705, -0.0017507649026811123, 0.028390781953930855, 0.011366828344762325, 0.030809257179498672, 0.018107010051608086, 0.004195526707917452, 0.021703176200389862, 0.03287021815776825, 0.004321707878261805, 0.030788226053118706, -0.02222893200814724, 0.02382722683250904, -0.0013774787075817585, 0.010699118487536907, 0.009127111174166203, 0.018496068194508553, -0.021976567804813385, 0.015478233806788921, -0.016929319128394127, -0.018117524683475494, -0.02063063532114029, -0.033501122146844864, 0.020010244101285934, 0.005141885951161385, 0.02668733522295952, 0.02426886186003685, 0.038296010345220566, 0.003806467866525054, 0.0015904095489531755, 0.017181681469082832, 0.04126127064228058, -0.017108075320720673, -0.03432130068540573, 0.044289618730545044, 0.062123239040374756, -0.026939697563648224, -0.013680150732398033, -0.05518326908349991, -0.04163981229066849, 0.033480092883110046, -0.06927350908517838, -0.013312122784554958, 0.003548847744241357, 0.024226801469922066, -0.03476293757557869, -0.020283637568354607, 0.005291726440191269, 0.03335391357541084, -0.023848257958889008, 0.0030782967805862427, 0.01866430975496769, -0.0013275319943204522, -0.015331022441387177, 0.04458404332399368, 0.03127191960811615, 0.027086909860372543, -0.0057622771710157394, -0.032260339707136154, -0.04424756020307541, 0.005147143732756376, 0.023490743711590767, -0.013480364345014095, -0.015383598394691944, -0.01662437990307808, -0.010988283902406693, 0.06775933504104614, 0.005504657048732042, -0.03213416039943695, 0.01381684746593237, 0.0036802866961807013, -0.00013743570889346302, 0.02506800927221775, -0.02870623581111431, -0.010714891366660595, -0.033669363707304, -0.0008576381951570511, -0.022502323612570763, -0.0047265393659472466, -0.056234780699014664, -0.021103814244270325, 0.029505383223295212, 0.02902168780565262, 0.04744415357708931, -0.004219185560941696, -0.05509914830327034, 0.002335667610168457, 0.054762665182352066, 0.03383760526776314, 0.049084506928920746, 0.0063143204897642136, -0.015583384782075882, -0.010551907122135162, 0.01931624673306942, 0.041071999818086624, 0.0297998059540987, 0.03716037794947624, -0.007460466586053371, 0.04328016936779022, 0.01231318712234497, 0.024458132684230804, -0.04862184450030327, 0.021976567804813385, 0.007371088489890099, 0.00027027103351429105, -0.029568474739789963, -0.002492079744115472, -0.01497350912541151, 0.015288962051272392, -0.012292156927287579, 0.02689763717353344, 0.046182338148355484, -0.029757745563983917, -0.03602474927902222, 0.016266867518424988, 0.0063038053922355175, -0.026371881365776062, 0.06107172742486, -0.019284700974822044, 0.013890452682971954, 0.003214993281289935, 0.015583384782075882, 0.04963129386305809, -0.03657153248786926, 0.04403725638985634, -0.0005701158079318702, -0.021766265854239464, -0.0314611941576004, 0.016929319128394127, 0.03905309736728668, -0.015236386097967625, -0.0018177987076342106, 0.020788362249732018, -0.007665511220693588, -0.025383463129401207, 0.010693861171603203, 0.00677698478102684, -0.036403290927410126, 0.014090240001678467, 0.01228164229542017, 0.032176218926906586, -0.013101819902658463, -0.006524622440338135, 0.0026143179275095463, 0.05631890147924423, 0.03556208312511444, -0.024647405371069908, -0.006934711243957281, -0.032533735036849976, -0.017139621078968048, 0.01646665297448635, 0.061534393578767776, -0.01333315297961235, -0.014353117905557156, -0.04437373951077461, 0.017612800002098083, 0.0361298993229866, -0.0007314569666050375, 0.015646476298570633, 0.025698915123939514, 0.007928389124572277, 0.009673896245658398, -0.019810456782579422, 0.021555963903665543, -0.03213416039943695, 0.01023645419627428, -0.05631890147924423, -0.022355113178491592, 0.014048179611563683, -0.0022489179391413927, -0.05539356917142868, -0.004723910707980394, -0.028390781953930855, 0.04525700956583023, 0.0017599656712263823, 0.0514819510281086, 0.08088218420743942, 0.02784399688243866, -0.009042990393936634, -0.025341402739286423, -0.019368821755051613, -0.011503524146974087, -0.02485770732164383, -0.009689669124782085, 0.018895642831921577, 0.05888458713889122, 0.033059488981962204, 0.028622115030884743, 0.028117390349507332, 0.019873548299074173, 0.029463322833180428, -0.00105216761585325, -0.017002923414111137, -0.007507784757763147, -0.03657153248786926, 0.044499922543764114, 0.03381657600402832, -0.06224941834807396, 0.011650735512375832, 0.003593537025153637, -0.03518354147672653, -0.0199050921946764, 0.011293222196400166, -0.004847463220357895, 0.02834872156381607, 0.011766402050852776, -0.014668570831418037, 0.01565699093043804, -0.04567761346697807, 0.049883656203746796, 0.016487684100866318, -0.02252335473895073, 0.007954676635563374, -0.003199220634996891, 0.03423717990517616, 0.023154260590672493, 0.04542525112628937, 0.007812722586095333, 0.004077231977134943, 0.001283499994315207, -0.029463322833180428, -0.004482063464820385, -0.03198694810271263, -0.054047636687755585, 0.02027312107384205, 0.07457312196493149, -0.050556622445583344, -0.07436282187700272, 0.004900038708001375, 0.03688698634505272, 0.0009575317380949855, 0.05501502752304077, 0.04555143415927887, -0.038527343422174454, -0.055940356105566025, 0.01374324131757021, 0.0313350111246109, 0.0594734326004982, 0.010115530341863632, 0.02237614244222641, -0.030367622151970863, -0.01748661883175373, 0.04832741990685463, -0.013680150732398033, -0.016277382150292397, -0.015551839955151081, 0.053669095039367676, -0.05270170420408249, 0.04134539142251015, 0.04182908684015274, -0.03802261874079704, 0.00639318348839879, -0.05766483396291733, -0.02609848976135254, 0.0017192196100950241, -0.03499426692724228, -0.008911550976336002, -0.020588574931025505, -0.009337413124740124, 0.009574002586305141, -0.05446824058890343, -0.003172932891175151, 0.06653957813978195, 0.023785166442394257, 0.044289618730545044, 0.0028259344398975372, 0.006755954585969448, 0.0033543184399604797, -0.027738844975829124, 0.026855576783418655, 0.013143880292773247, 0.03856940194964409, -0.016740046441555023, -0.02412164956331253, 0.002815419342368841, 0.05362703278660774, 0.046981487423181534, -0.027318241074681282, -0.02032569795846939, -0.017917737364768982, -0.017507649958133698, -0.02216584049165249, -0.0018362001283094287, 0.020462393760681152, -0.00014770435518585145, -0.036634624004364014, 0.007455209270119667, -0.011966189369559288, 0.030704105272889137, 0.04031491279602051, -0.025173161178827286, -0.004361139610409737, -0.021850386634469032, -0.03024144098162651, -0.02616157941520214, 0.010841072537004948, 0.024731526151299477, 0.010914678685367107, -0.0017205339390784502, -0.006997802294790745, 0.04378489404916763, -0.019053369760513306, -0.03657153248786926, -0.02120896615087986, -0.03402687981724739, -0.028159450739622116, -0.024731526151299477, 0.004624017048627138, -0.007076665293425322, 0.057538650929927826, -0.035393841564655304, -0.0470656082034111, -0.007833752781152725, 0.007407891098409891, 0.023701045662164688, 0.036171961575746536, -0.03423717990517616, 0.02778090536594391, 0.005186575464904308, 0.03930545970797539, 0.010777981951832771, 0.014857842586934566, 0.00468185031786561, 0.004750198684632778, -0.011082920245826244, -0.008533007465302944, -0.0019505518721416593, -0.009626578539609909, 0.0028259344398975372, -0.0028469646349549294, 0.019116459414362907, 0.022355113178491592, 0.041955266147851944, -0.03955782204866409, 0.004918440245091915, 0.042018357664346695, -0.0036618851590901613, 0.02258644439280033, -0.013007184490561485, 0.023743106052279472, -0.010667573660612106, -0.0018007116159424186, 0.015131235122680664, 0.02112484537065029, -0.06014639884233475, -0.033501122146844864, -0.014079725369811058, 0.035961657762527466, -0.03467881307005882, 0.0117348562926054, -0.02426886186003685, -0.0045661842450499535, 0.021598024293780327, -0.03179767727851868, 0.03448954224586487, -0.00791261624544859, 0.025257281959056854, 0.00018713600002229214, 0.024689465761184692, -0.031881798058748245, 0.02252335473895073, -0.010525619611144066, -0.03621402010321617, -0.006619258318096399, 0.019778911024332047, -0.02550964429974556, -0.020599089562892914, -0.007560360245406628, 0.03692904859781265, -0.012881003320217133, -0.0016653296770527959, 0.04269132390618324, 0.00969492644071579, -0.02544655278325081, -0.03755995258688927, -0.005254923366010189, 0.02601436898112297, -0.004589843098074198, -0.0025998596101999283, -0.014069209806621075, 0.017002923414111137, -0.031965918838977814, 0.01858018897473812, 0.008285902440547943, -0.035835474729537964, 0.03867455571889877, -0.025089040398597717, -0.019778911024332047, 0.007018832489848137, -0.010173363611102104, 0.042964715510606766, 0.011724341660737991, -0.04088272526860237, 0.02450019307434559, -0.00013858579040970653, -0.004229700658470392, -0.0054152789525687695, -0.01845400780439377, 0.0015943527687340975, -0.013007184490561485, -0.053542912006378174, 0.009847395122051239, 0.02515213005244732, 0.007844268344342709, -0.03549899160861969, 0.0055467174388468266, 0.043616652488708496, 0.008038797415792942, -0.017602285370230675, 0.05577211454510689, 0.010830557905137539, 0.007507784757763147, 0.010341605171561241, 0.010777981951832771, -0.048579782247543335, -0.003201849292963743, -0.010741178877651691, -0.011124980635941029, -0.027276180684566498, -0.015152265317738056, -0.017434043809771538, 0.04119817912578583, -0.03179767727851868, 0.009216489270329475, 0.06410007923841476, -0.005320643074810505, 0.007087180390954018, 0.04073551669716835, -0.0008320076740346849, 0.021030209958553314, 0.005091939587146044, -0.003930020146071911, -0.03957885503768921, -0.0009752759360708296, -0.014174360781908035, 0.016088109463453293, -0.06035669893026352, 0.02201862819492817, 0.02952641434967518, 0.013669636100530624, -0.05253346264362335, -0.006487819366157055, -0.037496861070394516, -0.0188010074198246, -0.012986154295504093, 0.015204841271042824, 0.05699186772108078, 0.015930382534861565, -0.04483640566468239, 0.01807546429336071, -0.020294152200222015, 0.004321707878261805, 0.009821107611060143, 0.0017731095431372523, 0.007902100682258606, -0.030935438349843025, -0.0428805947303772, -0.030157320201396942, 0.004487320780754089, 0.0037144606467336416, -0.010194393806159496, 0.0033148867078125477, -0.012334217317402363, -0.006130306050181389, -0.023722076788544655, 0.00024891222710721195, -0.013143880292773247, 0.013596029952168465, -0.011103950440883636, 0.005946291610598564, -0.0704091414809227, 0.0052470373921096325, 0.015467719174921513, -0.008354250341653824, 0.02323838137090206, 0.022186869755387306, -0.028769325464963913, 0.013301607221364975, 0.01009450014680624, 0.017959797754883766, 0.022313052788376808, 0.008732794784009457, -0.007902100682258606, -0.010031409561634064, -0.022607475519180298, 0.03886382654309273, 0.017886193469166756, -0.018464524298906326, -0.03840116038918495, 0.07381603121757507, 0.0690632089972496, -0.00214902451261878, -0.020746301859617233, -0.00676121236756444, 0.032386522740125656, 0.022144809365272522, -0.0048027741722762585, 0.0039641945622861385, -0.011398373171687126, 0.04479434713721275, -0.0008694677380844951, -0.004326965659856796, -0.003872187342494726, 0.01800185814499855, -0.017612800002098083, -0.02157699503004551, -0.008059827610850334, -0.007518299855291843, 0.0033201442565768957, 0.03758098557591438, -0.0077759199775755405, -0.020020758733153343, 0.0036855442449450493, 0.0011316881282255054, 0.017949283123016357, -0.015930382534861565, -0.008075600489974022, 0.013038729317486286, -0.04525700956583023, 0.00831218995153904, -0.023007048293948174, -0.009211231954395771, 0.0058516557328403, 0.01238679327070713, -0.012439368292689323, -0.004095633048564196, -0.021166905760765076, 0.01690828800201416, -0.007849525660276413, 0.022901898249983788, -0.00560980848968029, -0.03318566828966141, 0.03541487082839012, 0.027801936492323875, 0.006687606684863567, -0.014721146784722805, 0.015436173416674137, -0.021892447024583817, 0.013217486441135406, -0.03869558498263359, -0.01625635102391243, 0.001033766195178032, -0.031965918838977814, 0.009700183756649494, -0.032260339707136154, -0.011240647174417973, -0.02858005464076996, -0.00628803251311183, -0.01597244292497635, -0.013932514004409313, -0.0008635529666207731, -0.028075329959392548, 0.011829492636024952, 0.025551704689860344, -0.012607610784471035, 0.011366828344762325, -0.0422707200050354, 0.003640854964032769, -0.011966189369559288, 0.0172658022493124, 0.025320371612906456, 0.006692864000797272, 0.0191059447824955, -0.010988283902406693, -0.025488613173365593, -0.0064142136834561825, -0.010446756146848202, 0.0017744238721206784, -0.011787432245910168, -0.004337480757385492, 0.008007252588868141, 0.02580406703054905, 0.007344800513237715, 0.03352215513586998, -0.029105808585882187, 0.016340471804142, -0.045509371906518936, 0.01996818371117115, -0.007260679733008146, 0.02004178985953331, 0.01719219610095024, -0.025467583909630775, 0.03867455571889877, -0.01814907044172287, 0.02769678458571434, -0.009863168001174927, 0.008895778097212315, 0.01023645419627428, -0.017760012298822403, 0.014342602342367172, 0.0226705651730299, -0.01654025912284851, -0.005223378073424101, -0.005278582684695721, -0.012302672490477562, -0.007376345805823803, -0.06355328857898712, -0.05551975220441818, 0.024584313854575157, 0.004000997170805931, 0.001700818189419806, 0.008285902440547943, 0.013417273759841919, -0.04672912508249283, -0.011282707564532757, -0.004978902172297239, -0.008764339610934258, 0.020662181079387665, 0.0028495932929217815, 0.0024815646465867758, 0.015183811075985432, 0.01610914058983326, 0.009316382929682732, -0.0025104812812060118, -0.001936093671247363, -0.034216150641441345, -0.04954717308282852, 0.01162970531731844, 0.013438303954899311, -0.01908491551876068, 0.013669636100530624, 0.04349047318100929, -0.0014523988356813788, -0.027318241074681282, -0.014710631221532822, -0.048874206840991974, 0.007602420635521412, 0.019558094441890717, -0.0061776237562298775, 0.01264967117458582, 0.03943164274096489, 0.023133229464292526, 0.011797946877777576, -0.0428805947303772, -0.0546785444021225, -0.02246026322245598, -0.010646543465554714, -0.03810673952102661, 0.045214951038360596, 0.026939697563648224, 0.0549309067428112, 0.010047182440757751, -0.0008983842562884092, -0.0002983660961035639, -0.007549845147877932, -0.0006953112897463143, 0.0019860402680933475, 0.020746301859617233, -0.001894033164717257, -0.028369752690196037, 0.0117033114656806, 0.02178729698061943, -0.0023869287688285112, -0.0009608176769688725, -0.006435243878513575, 0.0022200015373528004, 0.0022462892811745405, 0.0469394251704216, 0.034594692289829254, -0.03442645072937012, 0.009558229707181454, 0.0117033114656806, 0.04277544468641281, 0.022691596299409866, -0.010446756146848202, 0.007181816268712282, -0.024815646931529045, -0.03272300586104393, 0.01402714941650629, -0.009342670440673828, 0.0018033403903245926, 0.0007971763843670487, -0.007060892879962921, -0.006503592245280743, 0.0026406056713312864, 0.008285902440547943, -0.0109672537073493, 0.0344054214656353, 0.0026524350978434086, -0.010988283902406693, 0.024458132684230804, 0.016424592584371567, -0.01574111171066761, -0.004376912489533424, -0.024668434634804726, 0.03751789405941963, 0.029904957860708237, -0.006156593561172485, -0.006950484123080969, -0.011671765707433224, -0.005015704780817032, -0.019558094441890717, 0.013585515320301056, -0.005615065805613995, -0.018748430535197258, 0.025025948882102966, -0.009805334731936455, -0.03753892332315445, 0.002794389147311449, 0.013322637416422367, 0.032176218926906586, -0.010625513270497322, 0.005436309147626162, 0.026035398244857788, 0.029400233179330826, 0.01486835815012455, 0.03074616566300392, -0.030115259811282158, 0.04571967571973801, -0.02243923395872116, -0.021082784980535507, 0.017602285370230675, 0.02778090536594391, -0.006503592245280743, 0.01793876849114895, -0.05219697952270508, -0.012229066342115402, -0.024815646931529045, 0.01210288517177105, 0.0313350111246109, -0.06342711299657822, -0.06237560138106346, -0.002142452634871006, 0.00012092370161553845, 0.0024079589638859034, 0.021619055420160294, -0.02026260644197464, 0.011766402050852776, 0.0013275319943204522, -0.004111405927687883, -0.024247830733656883, 0.00023642554879188538, 0.021187935024499893, -0.014615995809435844, 0.03274403512477875, -0.01705550029873848, 0.018022889271378517, -0.03448954224586487, 0.0043690260499715805, 0.029568474739789963, -0.029063748195767403, -0.005296983756124973, -0.0024276748299598694, -0.014268997125327587, -0.011135496199131012, 0.05547768995165825, 0.014605480246245861, -0.05522532761096954, 0.00027618580497801304, 0.0034699845127761364, -0.014731661416590214, -0.021682145074009895, 0.01534153800457716, -0.015467719174921513, -0.0009831623174250126, 0.033501122146844864, 0.03488911688327789, -0.026834547519683838, 0.012491944245994091, -0.018327826634049416, -0.01209237053990364, -0.023658985272049904, 0.004729168489575386, -0.031881798058748245, 0.0717550739645958, -0.009579259902238846, 0.032617855817079544, -0.013480364345014095, -0.0016535002505406737, 0.0016114397440105677, -0.0028548508416861296, -0.024584313854575157, -0.004634532146155834, -0.0038905886467546225, -0.0014405692927539349, 0.004571441560983658, 0.00462927483022213, 0.030010107904672623, 0.04870596528053284, 0.04315399006009102, -0.014279511757194996, -0.008932581171393394, 0.037728194147348404, -0.010015636682510376, 0.04921068996191025, -0.012292156927287579, 0.016350988298654556, -0.004426858853548765, -0.005186575464904308, -0.021324632689356804, 0.02447916381061077, -0.03936855122447014, 0.02571994625031948, 0.022922927513718605, 0.02609848976135254, -0.009842137806117535, 0.022754685953259468, 0.003548847744241357, 0.00910608097910881, -0.002718154573813081, -0.008711764588952065, -0.015120720490813255, -0.011650735512375832, -0.0060777305625379086, 0.034216150641441345, -0.001508917543105781, -0.03333288058638573, 0.022355113178491592, 0.04111405834555626, -0.002522310707718134, -0.044415801763534546, -0.06372153013944626, 0.012607610784471035, 0.01786516234278679, 0.016592834144830704, -0.03339597210288048, -0.0013117593480274081, 0.01843297854065895, 0.0028390781953930855, -0.0020649037323892117, 0.0050998255610466, -0.01908491551876068, 0.015078660100698471, -0.004666077438741922, -0.013501394540071487, 0.020872483029961586, 0.0172658022493124, 0.002598545281216502, 0.013774787075817585, 0.010346862487494946, -0.01915851980447769, 0.023007048293948174, 0.005336415488272905, -0.007618193048983812, 0.020062819123268127, -0.005441566463559866, -0.0012158090248703957, 0.04191320762038231, -0.028306661173701286, 0.01489990297704935, -0.012029279954731464, 0.008222811855375767, 0.013711696490645409, -0.029274052008986473, 0.033480092883110046, -0.04971541464328766, -0.014311057515442371, 0.030641015619039536, 0.040987879037857056, -0.005504657048732042, 0.043700773268938065, -0.004721282050013542, -0.014710631221532822, -0.01858018897473812, -0.005678156390786171, 0.015068144537508488, -0.018085980787873268, -0.02070424146950245, -0.004461033269762993, 0.03053586371243, 0.0004018741601612419, -0.014142815954983234, 0.009663380682468414, 0.012660185806453228, 0.014384662732481956, -0.020662181079387665, -0.013690666295588017, -0.01111446600407362, -0.009085050784051418, -0.018275251612067223, 0.0125024588778615, 0.023217350244522095, 0.025046980008482933, -0.004881637170910835, -0.018475038930773735, 0.029610535129904747, 0.016592834144830704, -0.028769325464963913, -0.011324767954647541, -0.028537994250655174, -0.006161851342767477, -0.016519229859113693, -0.0024657920002937317, -0.015772657468914986, 0.013322637416422367, -0.04105096682906151, -0.00169424619525671, 0.012817912735044956, 0.0006453645182773471, -0.023154260590672493, -0.0549309067428112, -0.019116459414362907, 0.010762209072709084, 0.012407823465764523, 0.0035409615375101566, -0.03017834946513176, 0.010725406929850578, 0.04264926537871361, -0.004305935464799404, 0.0453411303460598, 0.0008819543872959912, -0.014700116589665413, -0.008674961514770985, -0.016561290249228477, -0.012418338097631931, -0.04052521288394928, -0.024647405371069908, -0.005278582684695721, -0.00958977546542883, -0.002298864768818021, -0.045088768005371094, -0.01728683151304722, 0.005291726440191269, -0.05312230810523033, 0.002917941426858306, -0.010373150929808617, 0.0011139438720420003, 0.016960863023996353, 0.025783035904169083, -0.04571967571973801, -0.005436309147626162, -0.03333288058638573, 0.0009706756100058556, -0.007986221462488174, 0.011093434877693653, -0.0078652985394001, -0.017181681469082832, -0.013364697806537151, -0.01392199844121933, -0.02609848976135254, 0.0024329323787242174, 0.007355315610766411, -0.029778776690363884, 0.014542389661073685, 0.013291092589497566, -0.028264600783586502, 0.036256082355976105, -0.04161878302693367, 0.0041035194881260395, -0.03331185132265091, -0.026350852102041245, -0.0203993022441864, -0.016487684100866318, 0.006550909951329231, 0.01575162634253502, -0.004203413147479296, -0.0005586149054579437, 0.03242858126759529, 0.004621388390660286, -0.00381698296405375, 0.015846261754631996, 0.03322773054242134, 0.03461572527885437, 0.04525700956583023, 0.01823319122195244, -0.028012238442897797, 0.027970178052783012, 0.006072472780942917, -0.0017993972869589925, 0.008049312978982925, -0.00033533325768075883, 0.002152967732399702, -0.029210960492491722, -0.012470914050936699, -0.0019650100730359554, -0.0035146737936884165, -0.0014142815489321947, 0.006372153293341398, -0.016950348392128944, 0.007034604903310537, 0.005704444367438555, 0.010225939564406872, -0.003930020146071911, 0.054257940500974655, 0.06123996898531914, -0.012986154295504093, -0.012239581905305386, 0.027002789080142975, 0.009027217514812946, 0.008375280536711216, -0.024037528783082962, 0.015488749369978905, 0.04466816410422325, 0.03543590381741524, -0.04168187454342842, -0.015131235122680664, 0.016487684100866318, -0.04189217835664749, 0.024815646931529045, 0.028958598151803017, -0.002765472512692213, 0.013932514004409313, 0.03343803435564041, 0.021251026540994644, 0.005767534952610731, -0.02026260644197464, -0.0361298993229866, -0.026329820975661278, 0.007570875342935324, 0.01901130937039852, -0.017980828881263733, 0.006766469683498144, -0.02325941063463688, 0.0030572665855288506, 0.02353280410170555, 0.02834872156381607, -0.010788497515022755, 0.006750697270035744, -0.05808543786406517, 0.010110273025929928, 0.06826405972242355, 0.016571804881095886, 0.026224670931696892, -0.005709701683372259, 0.0015246901893988252, 0.009842137806117535, 0.02769678458571434, -0.00672440929338336, -0.038590434938669205, 0.010110273025929928, 0.015720080584287643, -0.0015417771646752954, 0.05337467044591904, -0.02645600400865078, -0.018716886639595032, 0.009174428880214691, -0.007024089805781841, 0.01133528258651495, 0.026266731321811676, 0.008443629369139671, -0.025467583909630775, 0.035814445465803146, 0.028895506635308266, 0.02054651454091072, -0.02477358654141426, -0.023701045662164688, 0.0064142136834561825, -0.011535069905221462, -0.009269064292311668, 0.03989430516958237, 0.032323431223630905, 0.020882997661828995, 0.04592997580766678, 0.03131398186087608, 0.024584313854575157, 0.0022305166348814964, 0.01451084390282631, -0.007733859587460756, 0.027591634541749954, -0.0026734652929008007, -0.03112470917403698, -0.04811711981892586, -0.006734924390912056, -0.007760147098451853, 0.02433195151388645, 0.0023382962681353092, 0.009127111174166203, -0.006787499878555536, 0.031377073377370834, -0.006903165951371193, 0.0251311007887125, -0.02178729698061943, 0.017434043809771538, -0.004242844879627228, -0.006408956367522478, -0.005888458341360092, -0.009931515902280807, -0.015099690295755863, -0.022607475519180298, -0.0008799828356131911, 0.009626578539609909, -0.038148798048496246, -0.017654860392212868, 0.0032123643904924393, -0.009968318976461887, 0.015793686732649803, 0.006224941927939653, 0.008680218830704689, 0.016193261370062828, 0.046981487423181534, -0.034952208399772644, -0.008070343174040318, -0.0008885263232514262, -0.00127495639026165, -0.014405692927539349, -0.0005550003843382001, -0.028033269569277763, 0.007355315610766411, 0.015047114342451096, -0.004418972879648209, -0.0032412810251116753, 0.014279511757194996, -0.04258617386221886, -0.028075329959392548, 0.03547796234488487, -0.01865379512310028, -0.021524418145418167, 0.003593537025153637, -0.00022886782244313508, 0.01420590654015541, 0.019705306738615036, 0.03112470917403698, 0.04315399006009102, -0.014405692927539349, -0.028559023514389992, -0.008706506341695786, 0.022544384002685547, 0.004274390172213316, -0.024458132684230804, 0.002765472512692213, 0.0051786890253424644, -0.012323702685534954, -0.005270696245133877, 0.0020202144514769316, -0.019505519419908524, 0.01617223024368286, -0.017171164974570274, 0.020146939903497696, -0.005888458341360092, -0.011356312781572342, 0.039179280400276184, 0.014931448735296726, 0.013648605905473232, 0.005191832780838013, 0.022712625563144684, 0.012555034831166267, -0.012355247512459755, 0.0319448858499527, -0.0196001548320055, 0.01655077375471592, -0.005972579587250948, 0.0011921499390155077, -0.009248034097254276, -0.028180480003356934, 0.0075393300503492355, 0.018895642831921577, 0.007187074050307274, -0.01476320717483759, -0.0022292020730674267, -0.03301742672920227, -0.014836812391877174, -0.006088245660066605, -0.020199516788125038, 0.002314637415111065, -0.029610535129904747, 0.00041436083847656846, -0.0007827181252650917, -0.001487887348048389, 0.04571967571973801, -0.020020758733153343, -0.021808326244354248, 0.01325954683125019, 0.044415801763534546, 0.02733927220106125, -0.013385728001594543, -0.032407552003860474, 0.0024145308416336775, 0.0033490608911961317, 0.013974574394524097, 0.004153466317802668, 0.025383463129401207, 0.019642215222120285, -0.04651882126927376, 0.023848257958889008, 0.024289891123771667, -0.01545720361173153, -0.0266663059592247, 0.01582523249089718, 0.011871553026139736, 0.01191361341625452, -0.008806400001049042, 0.024247830733656883, -0.006203911732882261, -0.0024618487805128098, -0.00011960931442445144, -0.005404763855040073, -0.05270170420408249, -0.0056045507080852985, -0.0015338908415287733, 0.011324767954647541, -0.001465542707592249, -0.03503632918000221, -0.01800185814499855, 0.0297367163002491, 0.026035398244857788, 0.006014639977365732, -0.027171030640602112, 0.019863031804561615, -0.020641149953007698, -0.03522560000419617, -0.03053586371243, 0.0226705651730299, 0.00426387507468462, -0.0026261473540216684, 0.05038838088512421, -0.026119519025087357, 0.009500397369265556, -0.002530197147279978, -0.030220409855246544, 0.029505383223295212, -0.002710268134251237, -0.02121948078274727, -0.007896843366324902, 0.004497835878282785, 0.031082648783922195, -0.027128970250487328, -0.03722346946597099, 0.008764339610934258, 0.007402633782476187, 0.016077594831585884, -0.04134539142251015, -0.0226705651730299, 0.022796746343374252, -0.012775852344930172, 0.004148208536207676, -0.0219345074146986, 0.009053505025804043, 0.0006180909695103765, -0.009963061660528183, -0.00922174658626318, -0.01209237053990364, -0.027002789080142975, 0.010289030149579048, 0.02397443912923336, 0.012691731564700603, -0.015572870150208473, 0.02639291249215603, -0.013795817270874977, 0.03150325268507004, -0.01828576624393463, -0.061618514358997345, 0.018748430535197258, -0.0007676026434637606, -0.01609862595796585, 0.019715821370482445, -0.030998528003692627, -0.02157699503004551, -0.009253292344510555, 0.01114601083099842, 0.016929319128394127, 0.01410075556486845, 0.01667695678770542, -0.014920933172106743, 0.0034673556219786406, -0.024647405371069908, 0.025236250832676888, -0.05568799376487732, 0.007097695488482714, -0.034363362938165665, 0.013585515320301056, -0.03606680780649185, -0.0313350111246109, -0.02719205990433693, -0.02616157941520214, -0.00025252680643461645, 0.022922927513718605, -0.00333591690286994, 0.002117479220032692, 0.01210288517177105, -0.01575162634253502, 0.012733791954815388, -0.012712761759757996, 0.0009233576129190624, 0.0047265393659472466, -0.029337141662836075, 0.013648605905473232, -0.025762006640434265, 0.03987327590584755, 0.013837877660989761, -0.01660335063934326, -0.0047738575376570225, -0.03976812586188316, 0.00543105136603117, 0.016887258738279343, 0.01439517829567194, 0.0004919097409583628, 0.0038932175375521183, 0.02456328459084034, 0.01264967117458582, -0.03434232994914055, 0.0034515829756855965, 0.02178729698061943, -0.015509779565036297, 0.014174360781908035, 0.00903247483074665, 0.020146939903497696, 0.019715821370482445, 0.018180616199970245, 0.011450949124991894, 0.01209237053990364, 0.001673216000199318, 0.02076733112335205, 0.008238584734499454, -0.013774787075817585, -0.011493009515106678, 0.007644481025636196, 0.004871122073382139, -0.013301607221364975, 0.010904163122177124, -0.002544655231758952, -0.018475038930773735, -0.043111927807331085, -0.00034864144981838763, -0.028832416981458664, 0.04605615884065628, 0.040840666741132736, 0.022502323612570763, 0.002112221671268344, 0.010956739075481892, 0.0071344985626637936, 0.02010487951338291, -0.03097749873995781, 0.05059868469834328, -0.0012098941951990128, -0.0091849435120821, 0.024983888491988182, -0.022922927513718605, -0.024647405371069908, 0.02571994625031948, 0.01661386527121067, 0.01439517829567194, 0.008317447267472744, -0.0034726131707429886, -0.014048179611563683, -0.011650735512375832, 0.0034358103293925524, -0.019936637952923775, -0.027444422245025635, -0.018527613952755928, -0.006934711243957281, -0.004658191464841366, -0.0060777305625379086, -0.03083028644323349, 0.01162970531731844, -0.032849185168743134, 0.002312008524313569, -0.015846261754631996, -0.023574864491820335, 0.0016009246464818716, 0.006855848245322704, -0.018527613952755928, -0.011997734196484089]
metadata : {"source": "pydantic_ai_docs", "crawled_at": "2025-03-14T10:07:04.660213", "url_path": "/api/agent/", "chunk_size": 3769}
updated_dt: 2025-03-14T10:07:07.304914
---
```
    Args:
      user_prompt: User input to start/continue the conversation.
      result_type: Custom result type to use for this run, `result_type` may only be used if the agent has no
        result validators since result validators would expect an argument that matches the agent's result type.
      message_history: History of the conversation so far.
      model: Optional model to use for this run, required if `model` was not set when creating the agent.
      deps: Optional dependencies to use for this run.
      model_settings: Optional settings to use for this model's request.
      usage_limits: Optional limits on model request count or token usage.
      usage: Optional usage to start with, useful for resuming a conversation or agents used in tools.
      infer_name: Whether to try to infer the agent name from the call frame if it's not set.
    Returns:
      The result of the run.
    """
    if infer_name and self.name is None:
      self._infer_name(inspect.currentframe())
    async with self.iter(
      user_prompt=user_prompt,
      result_type=result_type,
      message_history=message_history,
      model=model,
      deps=deps,
      model_settings=model_settings,
      usage_limits=usage_limits,
      usage=usage,
    ) as agent_run:
      async for _ in agent_run:
        pass
    assert (final_result := agent_run.result) is not None, 'The graph run did not finish properly'
    return final_result
  @asynccontextmanager
  async defiter(
    self,
    user_prompt: str | Sequence[_messages.UserContent],
    *,
    result_type: type[RunResultDataT] | None = None,
    message_history: list[_messages.ModelMessage] | None = None,
    model: models.Model | models.KnownModelName | None = None,
    deps: AgentDepsT = None,
    model_settings: ModelSettings | None = None,
    usage_limits: _usage.UsageLimits | None = None,
    usage: _usage.Usage | None = None,
    infer_name: bool = True,
  ) -> AsyncIterator[AgentRun[AgentDepsT, Any]]:
"""A contextmanager which can be used to iterate over the agent graph's nodes as they are executed.
    This method builds an internal agent graph (using system prompts, tools and result schemas) and then returns an
    `AgentRun` object. The `AgentRun` can be used to async-iterate over the nodes of the graph as they are
    executed. This is the API to use if you want to consume the outputs coming from each LLM model response, or the
    stream of events coming from the execution of tools.
    The `AgentRun` also provides methods to access the full message history, new messages, and usage statistics,
    and the final result of the run once it has completed.
    For more details, see the documentation of `AgentRun`.
    Example:
```python
    from pydantic_ai import Agent
    agent = Agent('openai:gpt-4o')
    async def main():
      nodes = []
      async with agent.iter('What is the capital of France?') as agent_run:
        async for node in agent_run:
          nodes.append(node)
      print(nodes)
      '''
      [
        ModelRequestNode(
          request=ModelRequest(
            parts=[
              UserPromptPart(
                content='What is the capital of France?',
                timestamp=datetime.datetime(...),
                part_kind='user-prompt',
              )
            ],
            kind='request',
          )
        ),
        CallToolsNode(
          model_response=ModelResponse(
            parts=[TextPart(content='Paris', part_kind='text')],
            model_name='gpt-4o',
            timestamp=datetime.datetime(...),
            kind='response',
          )
        ),
        End(data=FinalResult(data='Paris', tool_name=None, tool_call_id=None)),
      ]
      '''
      print(agent_run.result.data)
      #> Paris