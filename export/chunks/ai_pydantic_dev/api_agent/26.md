---
url: https://ai.pydantic.dev/api/agent/
session_id: pydantic_ai_docs
chunk_number: 26
title: Agent API Arguments and Return Values
summary: This section outlines the arguments for the Agent API, including user prompt, result type, message history, model settings, usage limits, and inferring the agent name. It also clarifies that the function returns the result of the run.
embedding: [0.0171279888600111, 0.05451905354857445, -0.005356279201805592, -0.04851517826318741, -0.008055601269006729, 0.032488707453012466, 0.027259526774287224, 0.010670192539691925, -0.00919343251734972, 0.0014260715106502175, -0.014077632687985897, -0.006028083618730307, 0.004306206479668617, -0.038492582738399506, 0.011093853041529655, -0.02380971983075142, -0.01859264262020588, 0.010464414022862911, -0.03183506056666374, 0.01881052553653717, 0.021146710962057114, -0.015929633751511574, 0.02938993275165558, 0.02223612368106842, -0.03244028985500336, 0.039073601365089417, -0.033529702574014664, 0.045077476650476456, -0.027090061455965042, 0.006687783636152744, -0.02302292175590992, -0.023301327601075172, -0.020202552899718285, -0.04098612815141678, -0.0005541630671359599, -0.022405587136745453, 0.013920273631811142, 0.026387996971607208, -0.024729669094085693, 0.02350710518658161, 0.02038412168622017, -0.04367334395647049, 0.038637835532426834, 0.033699166029691696, 0.009284216910600662, -0.02376130223274231, 0.021776149049401283, 0.011069643311202526, 0.056455787271261215, 0.007861928083002567, -0.036071665585041046, 0.018205296248197556, 0.017938995733857155, 0.022732412442564964, -0.029632024466991425, -0.003625323297455907, 0.021037770435214043, -0.001802070182748139, -0.03730633109807968, -0.02813105657696724, 0.0035648003686219454, -0.026363786309957504, 0.004893278703093529, 0.026678506284952164, -0.020771468058228493, 0.016825374215841293, -0.007474581710994244, 0.04577954113483429, -0.009701825678348541, 0.01377501804381609, 0.007674307096749544, 0.012274050153791904, -0.02544383890926838, -0.017503229901194572, -0.0358295738697052, -0.0043939645402133465, 0.0405745692551136, 0.0437459722161293, 0.011535669676959515, -0.02803421951830387, 0.010912284255027771, -0.02175194025039673, 0.01976678892970085, 0.026121696457266808, 0.006524371448904276, -0.03924306482076645, -0.059021957218647, -0.02992253564298153, -0.012455618940293789, -0.08250485360622406, -0.0013632789487019181, 0.010555198416113853, 0.01665590889751911, 0.0595545619726181, 0.0685119554400444, 0.03224661573767662, 0.001215754309669137, -0.007631941232830286, 0.024257589131593704, 0.029898326843976974, 0.02987411618232727, -0.0331907719373703, -0.02339816465973854, -0.016135413199663162, -0.014343934133648872, -0.0017536517698317766, -0.012794546782970428, 0.019694160670042038, -0.04490801319479942, -0.017575858160853386, -0.04556166008114815, -5.494346987688914e-05, -0.018943676725029945, -0.004790389910340309, -0.07466108351945877, -0.06468690186738968, 0.0059615084901452065, -0.022877667099237442, 0.027695290744304657, 0.011214898899197578, -0.018834734335541725, 0.017479021102190018, -0.04289865121245384, 0.020263075828552246, 0.04103454574942589, 0.02633957751095295, -0.01169908232986927, -0.020831990987062454, -0.00738984951749444, -0.0005333583103492856, 0.022587155923247337, -0.01939154602587223, -0.009417367167770863, 0.027598455548286438, -0.024511786177754402, -0.01469496637582779, -0.04890252649784088, -0.007795352954417467, -0.06599420309066772, 0.030116207897663116, -0.030116207897663116, -0.013327148742973804, -0.04018722474575043, -0.017515335232019424, 0.009544465690851212, 0.050403494387865067, -0.06226598843932152, 0.03217398747801781, -0.05877986550331116, 7.210739568108693e-05, 0.036071665585041046, -0.007934555411338806, -0.06551001965999603, 0.009120805189013481, -0.001809635548852384, 0.014416561461985111, -0.0031562705989927053, 0.005513638723641634, 0.025903813540935516, -0.052388645708560944, -0.012830860912799835, 0.044593293219804764, -0.028324730694293976, -0.017200615257024765, -0.03461911529302597, -0.05340543016791344, -0.024003393948078156, -0.008521628566086292, -0.03871046379208565, -0.04103454574942589, 0.0032712642569094896, -0.0033681008499115705, -0.02349499985575676, 0.013605553656816483, 0.011463042348623276, -0.022115077823400497, -0.06347644329071045, -0.008691092021763325, -0.007256698794662952, -0.02465704083442688, -0.03481278941035271, -0.02065042220056057, -0.042922861874103546, -0.0090905437245965, -0.08453842252492905, -0.016462236642837524, 0.008691092021763325, -0.005601396784186363, 0.00811007246375084, 0.014501293189823627, -0.007874032482504845, 0.04241446778178215, 0.025250164791941643, 0.010875970125198364, -0.03263396397233009, -0.012370886281132698, 0.05606843903660774, -0.01161434967070818, -0.01406552828848362, 0.04350388050079346, -0.021461430937051773, 0.0063912211917340755, 0.04868464171886444, -0.008721353486180305, 0.013048742897808552, -0.02960781566798687, 0.004714736249297857, 0.0024375608190894127, -0.020057298243045807, 0.011099904775619507, 0.028881540521979332, -0.011009120382368565, 0.010615721344947815, -0.014440770260989666, -0.026847969740629196, 0.022296646609902382, -0.041712403297424316, 0.013472403399646282, -0.007153810001909733, 0.03766946867108345, 0.012842965312302113, -0.003855310380458832, 0.019790997728705406, -0.021994031965732574, 0.04137347266077995, 0.06730149686336517, 0.009798661805689335, -0.027211107313632965, -0.020747259259223938, 0.0595545619726181, -0.018411073833703995, -0.024039706215262413, -0.0035708528012037277, -0.04231763258576393, 0.04042931646108627, -0.055342163890600204, 0.011916964314877987, -0.009647354483604431, 0.0642995610833168, -0.040332477539777756, -0.027162689715623856, 0.01574806496500969, 0.04081666097044945, -0.019718369469046593, -0.0053320699371397495, 0.04945933818817139, 0.011172532103955746, -0.026000650599598885, 0.03386862948536873, 0.02607327699661255, 0.009695773012936115, -0.02650904282927513, -0.015009686350822449, -0.020989350974559784, -0.0076924641616642475, -0.01364186778664589, -0.0163411907851696, -0.03098773956298828, -0.04384280741214752, -0.01669222302734852, 0.03488541394472122, -0.0035557220689952374, -0.03604745492339134, 0.02313186228275299, -0.027477409690618515, 0.005226154811680317, 0.02112250216305256, -0.05098451301455498, -3.3855012588901445e-05, -0.03781472519040108, 0.006766463164240122, 0.002243887633085251, 0.031423505395650864, -0.03299710154533386, -0.046651072800159454, 0.0004743484314531088, 0.0416155643761158, 0.05258231982588768, 0.0035890096332877874, -0.020928828045725822, 0.01574806496500969, 0.043867018073797226, 0.0046814484521746635, 0.03166559711098671, -0.0002263935748487711, -1.73057742358651e-05, 0.012304311618208885, -0.02275662124156952, 0.02476598136126995, 0.041058752685785294, 0.012013801373541355, 0.0034498069435358047, 0.014428665861487389, -0.026000650599598885, 0.0033983623143285513, -0.02160668559372425, 0.038637835532426834, -0.00528062554076314, -0.018713688477873802, -0.011705134063959122, 0.02813105657696724, -0.0007913372828625143, 0.028808914124965668, 0.013109265826642513, 0.004626977723091841, 0.029632024466991425, -0.008739510551095009, -0.02129196561872959, 0.013835540972650051, -0.024402843788266182, -0.017188511788845062, 0.05931247025728226, -0.03382021188735962, -0.031689804047346115, 0.019851520657539368, 0.012340624816715717, 0.06860879063606262, -0.013629763387143612, 0.016292771324515343, 0.01464654877781868, -0.010924388654530048, -0.047595228999853134, 0.04234183952212334, 0.034909624606370926, -0.03505488112568855, -0.00028351208311505616, 0.0012286154087632895, -0.00447869673371315, -0.031907688826322556, 0.059457723051309586, 0.0050052460283041, -0.05035507678985596, -0.013036638498306274, 0.013920273631811142, 0.04197870194911957, -0.004811572842299938, -0.0274047814309597, -0.013629763387143612, 0.052921246737241745, 0.05379277840256691, -0.024693354964256287, -0.02192140370607376, -0.032537125051021576, -0.015869110822677612, 0.020686736330389977, 0.04747418314218521, 0.03118141181766987, 0.03103615716099739, -0.029123632237315178, -0.015687542036175728, 0.034909624606370926, 0.012903488241136074, 0.0088242432102561, 0.005798096302896738, -0.011626454070210457, -0.014973372220993042, -0.03229503333568573, 0.0072809080593287945, -0.03902518376708031, 0.02281714417040348, -0.03752421587705612, 0.007541156839579344, 0.045343779027462006, -0.03776630759239197, -0.043285999447107315, 0.031907688826322556, -0.037693679332733154, 0.02776791900396347, -0.007934555411338806, 0.024414949119091034, 0.08231118321418762, 0.04209974780678749, -0.02038412168622017, 0.0006638608756475151, -0.042487096041440964, -0.015554392710328102, -0.019682055339217186, 0.006911718286573887, 0.031689804047346115, 0.0289783775806427, 0.045489031821489334, 0.022405587136745453, 0.0018656192114576697, -0.026266951113939285, 0.013000325299799442, 0.029462561011314392, -0.011432780884206295, 0.02234506420791149, -0.01832634210586548, 0.017527440562844276, 0.04226921126246452, -0.07151389122009277, 0.0003340108960401267, -0.012219578959047794, -0.01937944069504738, 0.033118147403001785, 0.014440770260989666, 0.03718528524041176, 0.036797940731048584, 0.03282763436436653, -0.014767594635486603, -0.01072466280311346, -0.01540913712233305, 0.048708852380514145, -0.0028581952210515738, 0.016425922513008118, 0.05326017737388611, -0.014126051217317581, 0.015978053212165833, 0.01775742694735527, 0.07514526695013046, -0.023434476926922798, 0.009114752523601055, -0.04868464171886444, -0.013605553656816483, -0.054761145263910294, 0.012395096011459827, -0.015602810308337212, 0.019101036712527275, 0.09974178671836853, -0.0007368666701950133, -0.07088445127010345, 0.018096355721354485, 0.023168176412582397, -0.012013801373541355, 0.034909624606370926, 0.03207715228199959, -0.0452953577041626, 0.01997256651520729, 0.005565083120018244, 0.0001588726881891489, 0.010809394530951977, 0.038274697959423065, 0.01665590889751911, -0.014840221963822842, -0.00958683155477047, 0.009096596390008926, -0.022732412442564964, -0.017212720587849617, -0.010621774010360241, 0.05597160384058952, -0.012122742831707, 0.036701101809740067, 0.03418334946036339, -0.04698999971151352, 0.007662202697247267, -0.03171401470899582, -0.042220793664455414, 0.010664139874279499, -0.037911560386419296, -0.01822950504720211, -0.0331907719373703, -0.052243392914533615, -0.01393237803131342, -0.07892189919948578, -0.019899938255548477, 0.09620724618434906, 0.026799552142620087, 0.06333119422197342, 0.021207233890891075, 0.020844096317887306, 0.004769206512719393, -0.0020502142142504454, 0.027162689715623856, -0.00824322272092104, 0.017733218148350716, 0.014380247332155704, -0.012467723339796066, -0.03549064323306084, 0.03725791350007057, 0.036071665585041046, -0.027574244886636734, -0.027792127802968025, 0.006415430456399918, -0.015372823923826218, -0.0011582574807107449, 0.03171401470899582, 0.04483538493514061, 0.06042608991265297, 0.000857155944686383, 0.003262185724452138, -0.026363786309957504, 0.026363786309957504, 0.03023725375533104, -0.010597564280033112, 0.05790833756327629, 0.007789300754666328, -0.06313751637935638, -0.03752421587705612, 0.05069400370121002, 0.04715946689248085, 0.00524431187659502, 0.012491932138800621, -0.012927697040140629, 0.042704977095127106, 0.008921079337596893, 0.0014881074894219637, 0.021352488547563553, -0.03127824887633324, -0.01760006695985794, -0.02286556176841259, 0.019730474799871445, 3.2412863220088184e-05, 0.043600715696811676, 0.00021031717187725008, -0.02112250216305256, -0.015518078580498695, 0.02376130223274231, 0.005525743123143911, 0.035853780806064606, -0.013532926328480244, 0.028227893635630608, 0.02434232085943222, 0.02207876369357109, -0.006258070934563875, 0.013423984870314598, -0.013508717529475689, 0.010549146682024002, -0.008146385662257671, -0.00778324855491519, -0.010512832552194595, -0.020311495289206505, 0.006948031950742006, -0.025806976482272148, 0.013181893154978752, 0.009889446198940277, 0.04614267870783806, -0.014234992675483227, -0.002284740563482046, 0.004285023082047701, 0.012600873596966267, 0.017733218148350716, -0.018144773319363594, 0.021534057334065437, 0.004499879665672779, 0.0008980089332908392, -0.0004164733982179314, 0.03808102756738663, -0.05127502605319023, -0.0287120770663023, 0.0023255934938788414, 0.02665429748594761, -0.049507755786180496, -0.02597643993794918, -0.005265494808554649, 0.019052617251873016, 0.027332153171300888, -0.024632832035422325, 0.014937058091163635, -0.015106522478163242, 0.02587960474193096, 0.0016825373750180006, 0.014295515604317188, -0.0250322837382555, 0.02692059800028801, -0.003464937675744295, -0.029995162039995193, 0.007650097832083702, 0.007347483187913895, -0.01377501804381609, -0.007976922206580639, -0.004012669902294874, -0.005377462133765221, -0.01540913712233305, -0.01048862375319004, 0.030624601989984512, 0.03762105107307434, -0.02192140370607376, -0.029051005840301514, 0.03534539043903351, 0.021509848535060883, 0.014138155616819859, 0.020420435816049576, 0.01177776139229536, -0.005967560689896345, -0.018786316737532616, 0.013460299000144005, 0.011571983806788921, -0.03592640906572342, 0.02443915791809559, -0.013883959501981735, -0.05326017737388611, 0.01849580742418766, 0.006300436798483133, -0.011559879407286644, 0.008073758333921432, -0.05301808565855026, 0.014973372220993042, 0.0034679637756198645, 0.005389566533267498, -0.029535189270973206, -0.02544383890926838, 0.020202552899718285, -0.018398970365524292, -0.04147031158208847, 0.015082313679158688, 0.00893318373709917, 0.006796724628657103, -0.023833928629755974, 0.01151146087795496, 0.04142189025878906, 0.010004440322518349, -0.01681326888501644, 0.02670271508395672, 0.044278573244810104, -0.009792610071599483, 0.038541000336408615, 0.010954650118947029, -0.0574241541326046, -0.003032198641449213, 0.004430278204381466, -0.018108459189534187, -0.02192140370607376, -0.01183223258703947, -0.02607327699661255, 0.024330217391252518, -0.039122018963098526, 0.029414143413305283, 0.069577157497406, -0.012794546782970428, 0.004938670899719, 0.04594900831580162, -0.016256459057331085, 0.009556570090353489, 0.012122742831707, -0.00932658277451992, -0.03597482666373253, -0.0005961508140899241, -0.016873791813850403, 0.03861362859606743, -0.03566011041402817, 0.01692221127450466, 0.008321902714669704, 0.004191212821751833, -0.060135580599308014, -0.015009686350822449, -0.012249840423464775, -0.012419304810464382, -0.020577795803546906, -0.014247097074985504, 0.05083926022052765, 0.002219678368419409, -0.03587799146771431, -0.01356924045830965, -0.00028540342464111745, 0.010863865725696087, -0.010216270573437214, 0.03452227637171745, 0.011239107698202133, -0.011239107698202133, -0.035587482154369354, -0.04912040755152702, 0.011227003298699856, 0.0016401713946834207, 0.007813509553670883, -0.011590140871703625, -0.00021958474826533347, -0.0052110240794718266, -0.0274047814309597, -0.02481440082192421, -0.020045192912220955, 0.01659538596868515, -0.014452874660491943, 0.017370080575346947, -0.031229831278324127, 0.03263396397233009, 0.009889446198940277, 0.015530182980000973, 0.045537449419498444, 0.007964816875755787, -0.049071989953517914, 0.008939236402511597, 0.019948357716202736, -0.001407914562150836, 0.012625082395970821, 0.02244190126657486, -0.006736201699823141, -0.03309393674135208, -0.01563912443816662, 0.043697554618120193, -0.00755931343883276, -0.023846033960580826, -0.05558425560593605, 0.05863461270928383, 0.05839252099394798, -0.01802372746169567, -0.007601679768413305, -0.034594904631376266, 0.03178664296865463, 0.02313186228275299, -0.019561009481549263, -0.006548580713570118, -0.02602485939860344, 0.02534700185060501, 0.01701904647052288, 0.010355472564697266, -0.0002371742157265544, 0.017769532278180122, -0.008134281262755394, 0.00643963972106576, -0.0012619030894711614, -0.0025465022772550583, 0.004584611859172583, 0.004094376228749752, -0.032803427428007126, -0.031157203018665314, -0.02328922227025032, 0.002498083747923374, 0.007825614884495735, -0.0342559777200222, 0.015687542036175728, 0.012116690166294575, -0.033118147403001785, 0.002482953015714884, -0.014791803434491158, 0.005589292384684086, 0.0022680966649204493, 0.022635575383901596, 0.011880651116371155, -0.019476277753710747, -0.0005681589827872813, 0.007795352954417467, -0.02517753839492798, 0.003094234736636281, 0.011027277447283268, -0.0200209841132164, -0.013133475556969643, 0.053502269089221954, -0.02371288277208805, 0.01797530986368656, 0.003057920839637518, -0.020154135301709175, -0.0030760779045522213, -0.019669951871037483, -0.010022596456110477, -0.02655746042728424, -0.028808914124965668, 0.0015418216353282332, -0.014319724403321743, -0.007698516361415386, -0.0005477325175888836, -0.014719176106154919, -0.020723050460219383, -0.019355231896042824, 0.0028370122890919447, -0.01027074083685875, 0.013254521414637566, 0.037911560386419296, -0.005776913370937109, 0.012274050153791904, -0.03626533970236778, 0.0070206597447395325, 0.002723531797528267, 0.02633957751095295, 0.03868625685572624, 0.019040513783693314, 0.009199485182762146, -0.01448918879032135, -0.055390581488609314, -0.005298782140016556, -0.009598935954272747, 0.017200615257024765, -0.007220385130494833, 0.020456749945878983, 0.010476518422365189, 0.014138155616819859, 0.01135410089045763, 0.0037736045196652412, -0.02391866035759449, -0.005114187486469746, -0.03861362859606743, -0.0048993309028446674, -0.017055360600352287, 0.015154941007494926, 0.02044464461505413, -0.030576182529330254, 0.02117091976106167, -0.02281714417040348, 0.012612977996468544, -0.011166480369865894, -0.0048993309028446674, 0.011396467685699463, -0.009544465690851212, 0.023676568642258644, -0.013799227774143219, -0.0056921811774373055, -0.008703197352588177, -0.009883394464850426, -0.016837477684020996, -0.002414864720776677, -0.06153971329331398, -0.031108785420656204, 0.0046814484521746635, -0.0026055120397359133, 0.004993141628801823, 0.011505408212542534, 0.000926000764593482, -0.08303745836019516, 0.01912524551153183, 0.015772275626659393, -0.01491284929215908, 0.04314074292778969, -0.014840221963822842, -0.0041488464921712875, -0.009362896904349327, -0.045077476650476456, 0.009508151561021805, -0.011844336986541748, 0.006645417306572199, -0.026412205770611763, -0.04352809116244316, 0.028300520032644272, -0.001953377388417721, 0.0018550277454778552, 0.0038432059809565544, 0.03977566957473755, -0.02934151515364647, -0.026145905256271362, -0.006176364608108997, -0.07732409238815308, 0.005997822154313326, 0.00975024327635765, -0.010119433514773846, -0.026436414569616318, 0.039799876511096954, 0.01477969903498888, -0.014852326363325119, -0.02017834410071373, -0.004533167462795973, 0.018423179164528847, -0.016583282500505447, -0.028106847777962685, 0.0431891605257988, -0.007734830025583506, 0.044811174273490906, 0.010028649121522903, 0.008521628566086292, 0.006403325591236353, -0.03631375730037689, 0.04137347266077995, -0.0044151474721729755, 0.028833122923970222, -0.0013716008979827166, -0.01301242969930172, 0.02081988751888275, 0.00528062554076314, 0.0226476788520813, 0.0020668578799813986, -0.002756819361820817, -0.00945368129760027, -0.001864106161519885, 0.025903813540935516, 0.032851845026016235, -0.030576182529330254, 0.014053423888981342, 0.0097441915422678, 0.011717238463461399, 0.006566737778484821, -0.0025238061789423227, -0.0007678846595808864, -0.023410268127918243, -0.0031623230315744877, -0.012504036538302898, -0.03236766159534454, -0.010773081332445145, 0.002693270333111286, -0.035224344581365585, -0.012376938946545124, 0.03224661573767662, -0.01301242969930172, -0.013193998485803604, 0.024584412574768066, 0.026944806799292564, -0.0025964335072785616, 0.005610475316643715, 0.005183788947761059, -0.0018338446971029043, 0.016631700098514557, -0.013896063901484013, 0.05219497159123421, 0.005135370418429375, -0.03331181779503822, 0.008745563216507435, -0.006451744120568037, -0.005728495307266712, 0.013072952628135681, 0.017418498173356056, 0.002334672026336193, -0.017261138185858727, 0.020614109933376312, -0.006482005584985018, -0.030213044956326485, -0.007613784167915583, -0.019476277753710747, 0.003958199638873339, -0.004354624543339014, -0.0010916823521256447, 0.021267756819725037, 0.001455576391890645, -0.014682861976325512, 0.012552455067634583, -0.02086830511689186, 0.027598455548286438, -0.034909624606370926, 0.015130732208490372, -0.022102972492575645, 0.048975154757499695, -0.0292446780949831, -0.010409943759441376, -0.021848777309060097, 0.010095224715769291, -0.027477409690618515, -0.007510895375162363, 0.06754358857870102, -0.06783409416675568, -0.04050194472074509, -0.00964130274951458, -0.012806651182472706, 0.0052140504121780396, 0.010131537914276123, 0.017236929386854172, 0.0038129445165395737, 0.03641059249639511, -0.0024738747160881758, -0.012903488241136074, -0.024197066202759743, 0.013448194600641727, 0.00010723905870690942, 0.041494518518447876, -0.018350550904870033, 0.030915111303329468, -0.06386379152536392, 0.014864430762827396, 0.013956586830317974, -0.05074242129921913, -0.010361525230109692, -0.022006137296557426, 0.012770337983965874, -0.011081747710704803, 0.013121371157467365, -0.010343368165194988, -0.05679471418261528, -0.02418496273458004, 0.016147516667842865, -0.02650904282927513, -0.005138396751135588, 0.01390816830098629, -0.005819279700517654, -0.02187298610806465, 0.019052617251873016, 0.018035832792520523, -0.026944806799292564, 0.01774532161653042, -0.026266951113939285, -0.015978053212165833, -0.018992094323039055, 0.012110637500882149, -0.009435524232685566, 0.07519368827342987, 0.004387912340462208, 0.026460623368620872, -0.00869714468717575, -0.013133475556969643, -0.006494109984487295, -0.01838686503469944, -0.022829247638583183, 0.007674307096749544, -0.023833928629755974, 0.01507020927965641, -0.020989350974559784, -0.014961267821490765, 0.027961593121290207, 0.0374031700193882, 0.010966754518449306, -0.012322467751801014, -0.01727324351668358, 0.06875404715538025, 0.001289138337597251, 0.06488057971000671, 0.0039824084378778934, 0.009701825678348541, -0.00539864506572485, 0.02465704083442688, -0.01738218404352665, 0.04352809116244316, -0.030576182529330254, 0.006887509021908045, 0.032004524022340775, 0.013387671671807766, -0.007704568561166525, 0.017103780061006546, -0.008812137879431248, 0.008382425643503666, 0.028276311233639717, -0.02207876369357109, -0.026000650599598885, -0.02682376094162464, -0.0034044147469103336, 0.020638318732380867, 0.008061653934419155, -0.039073601365089417, 0.03260975331068039, 0.051662370562553406, 0.00048380513908341527, -0.00906028226017952, -0.024172857403755188, -0.021352488547563553, -0.004993141628801823, -0.013714495114982128, 0.0015978052979335189, -0.001218023942783475, -0.0071840714663267136, -0.017236929386854172, -0.026266951113939285, -0.0029898325446993113, -0.004542245529592037, -0.003849258180707693, 0.004288049414753914, -0.015384928323328495, 0.004499879665672779, 0.022054554894566536, -0.004775259178131819, 0.0031260091345757246, -0.01435603853315115, 0.01180197112262249, 0.02670271508395672, 0.01370239071547985, 0.005546926520764828, -0.013193998485803604, -0.004112532828003168, -0.03645901009440422, 0.039848294109106064, -0.02265978418290615, 0.024911237880587578, -0.009229746647179127, -0.0035587481688708067, 0.016413817182183266, 0.006948031950742006, 0.017164302989840508, -0.035272762179374695, -0.004300153814256191, 0.03856521099805832, 0.02060200460255146, 0.019149454310536385, 0.04495643079280853, -0.0009025481413118541, -0.005519690923392773, 0.003940042573958635, 0.003937016241252422, 0.010258636437356472, -0.017999518662691116, -0.015312300994992256, -0.02429390326142311, 0.03241607919335365, 0.03418334946036339, 0.007970869541168213, 0.005631658248603344, -0.009738138876855373, 0.03207715228199959, -0.01797530986368656, -0.00014147233741823584, -0.012134847231209278, -0.009344739839434624, 0.002564659109339118, 0.01970626600086689, 0.027888964861631393, 0.013520821928977966, -0.0013973230961710215, -0.00482065137475729, 0.01665590889751911, 0.024693354964256287, -0.022248229011893272, -0.02682376094162464, -0.021739834919571877, -0.007867980748414993, -0.0034225715789943933, 0.01601436734199524, -0.02849419414997101, 0.00916317105293274, -0.016159621998667717, -0.004790389910340309, 0.007486686110496521, -0.0018837761599570513, -0.006560685578733683, -0.04357650876045227, -0.0042971279472112656, 0.01140857208520174, 0.016764851287007332, 0.022538738325238228, -0.03505488112568855, -0.0018459493294358253, 0.024257589131593704, -0.0184473879635334, 0.03510329872369766, 0.026484832167625427, -0.012576664797961712, -0.009235798381268978, -0.0015085339546203613, 0.0008934697252698243, -0.02033570408821106, -0.03357812017202377, -0.012685605324804783, -0.0022181652020663023, 0.01753954403102398, -0.023216595873236656, 0.0025465022772550583, 0.006851195357739925, -0.053453847765922546, 0.00749273831024766, 0.000985767226666212, 0.003153244499117136, 0.012637187726795673, 0.009477890096604824, -0.027332153171300888, -0.020347807556390762, -0.03234345093369484, 0.007650097832083702, -0.020202552899718285, 0.015990156680345535, -0.0020698842126876116, -0.04815204069018364, -0.03704003244638443, -0.003119956934824586, -0.008860556408762932, 0.018193192780017853, -0.006990398280322552, -0.024644935503602028, -0.00019783432071562856, 0.010367577895522118, -0.01812056452035904, 0.00929632131010294, -0.0421481654047966, 0.036797940731048584, -0.014101842418313026, -0.013581344857811928, -0.010627825744450092, -0.027428990229964256, 0.007178019266575575, -0.0025434759445488453, -0.033118147403001785, 0.014210782945156097, 0.01753954403102398, 0.0006158208125270903, -0.0071598622016608715, 0.029632024466991425, 0.018883153796195984, 0.022260332480072975, 0.05311492085456848, 0.00022658270609099418, -0.024584412574768066, 0.003189558396115899, -0.02907521463930607, -0.013290834613144398, -0.0024708486162126064, -0.010131537914276123, 0.005232207011431456, -0.009030020795762539, -0.018979990854859352, 0.027792127802968025, -0.007789300754666328, 0.005341148469597101, 0.03609587252140045, 0.003537565004080534, -0.0009600449120625854, 0.02919626049697399, 0.020323598757386208, 0.006385168991982937, 0.03471595048904419, 0.05204971879720688, -0.00617939094081521, 0.0013352871173992753, 0.00771667342633009, 0.014210782945156097, 0.020408330485224724, -0.048805687576532364, 0.04277760535478592, 0.05568109452724457, -0.0029625974129885435, -0.029268886893987656, -0.0059615084901452065, 0.007874032482504845, -0.0479341596364975, 0.017357975244522095, 0.008255327120423317, 0.02308344468474388, 0.003970304038375616, 0.006209652405232191, 0.011003068648278713, 0.016849583014845848, 0.000835972954519093, -0.01744270697236061, -0.007916399277746677, 0.020323598757386208, 0.033214982599020004, -0.019367337226867676, 0.01744270697236061, -0.013109265826642513, 0.001315617118962109, -0.01885894499719143, -0.0033227086532860994, -0.032900262624025345, 0.006615155842155218, -0.037693679332733154, 0.00036767678102478385, 0.04466592147946358, 0.010997015982866287, 0.039654623717069626, -0.019827311858534813, -0.02534700185060501, 0.014840221963822842, 0.04558587074279785, -0.012637187726795673, -0.04631214588880539, 0.025250164791941643, 0.008158490993082523, -0.025153329595923424, 0.054083287715911865, -0.01854422502219677, -0.021679311990737915, 0.00020464314729906619, -0.01717640645802021, 0.011910912580788136, 0.023095550015568733, -0.0021833647042512894, -0.018096355721354485, 0.02443915791809559, 0.03260975331068039, 0.02096514217555523, -0.022090869024395943, -0.0020759364124387503, 0.007063025608658791, -0.024632832035422325, 0.008188752457499504, 0.04067140817642212, 0.022538738325238228, -0.019088931381702423, 0.007964816875755787, 0.044133320450782776, 0.017321661114692688, 0.011051486246287823, -0.00047926593106240034, -0.015033895149827003, 0.015360718593001366, 0.015251778066158295, -0.015167045406997204, -0.046699490398168564, 0.0013799227308481932, 0.0043939645402133465, 0.011929068714380264, -0.0006600781925953925, 0.015179149806499481, -0.013762913644313812, 0.011596192605793476, -0.03328761085867882, 0.0026584696024656296, -0.0025343976449221373, 0.017987413331866264, -0.015978053212165833, 0.01917366310954094, -0.021316174417734146, 0.0022045476362109184, -0.007922451011836529, -0.032900262624025345, -0.019839415326714516, 0.007704568561166525, -0.03403809294104576, -0.016038576140999794, -0.008806086145341396, -0.014380247332155704, 0.0023588810581713915, -0.006560685578733683, -0.008091915398836136, -0.0189678855240345, 0.022575052455067635, -0.05805359035730362, 0.012782442383468151, -0.009659458883106709, 0.027961593121290207, -0.02755003608763218, 0.03302130848169327, -0.021328279748558998, 0.001956403721123934, 0.0026509042363613844, -0.014840221963822842, -0.008866609074175358, 0.010186009109020233, -0.003573878901079297, -0.013508717529475689, 0.05248548462986946, -0.00752299977466464, -0.01580858789384365, 0.0184473879635334, -0.013666076585650444, 0.021994031965732574, 0.013811332173645496, 0.015723856166005135, 0.004929592367261648, -0.014924953691661358, -0.01901630312204361, 0.004841834306716919, -0.009169223718345165, 0.015324405394494534, -0.01876210793852806, 0.009810766205191612, -0.015239672735333443, -0.001056881621479988, 0.02071094512939453, 0.008097968064248562, -0.003979382570832968, 0.0016462235944345593, 0.00337112694978714, 0.013520821928977966, -0.006784620229154825, 0.0006230078870430589, 0.011463042348623276, 0.002735636429861188, 0.017587963491678238, 0.011808022856712341, -0.005758756771683693, 0.026194322854280472, 0.0059796650893986225, 0.04498064145445824, 0.002056266414001584, -0.001697668107226491, 0.01154172234237194, -0.005686128977686167, 0.0023967078886926174, 0.004157925024628639, -0.015881216153502464, 0.004421199671924114, 0.03708845004439354, 0.000649486668407917, -0.033166565001010895, -0.038226280361413956, -0.009653407149016857, -0.018822630867362022, -0.004436330404132605, -0.002770436927676201, -0.02517753839492798, -0.018689479678869247, -0.006188469473272562, -0.019730474799871445, 0.05461588874459267, -0.02696901559829712, 0.014828117564320564, 0.0032712642569094896, 0.022986607626080513, -0.0002169368672184646, 0.01125121209770441, -0.01590542495250702, -0.002227243734523654, -0.003970304038375616, 0.015336509793996811, 0.004584611859172583, 0.006324646063148975, 0.024414949119091034, -0.030309882014989853, 0.004814598709344864, 0.03512750566005707, -0.005368383601307869, -0.043431252241134644, 0.04863622412085533, -0.008685040287673473, 0.016849583014845848, 0.0064880577847361565, 0.026170114055275917, -0.019984669983386993, -0.015687542036175728, 0.015663333237171173, -0.0011083261342719197, -0.024063916876912117, -0.023434476926922798, -0.01498547662049532, 0.0271384809166193, 0.0038643889129161835, -0.023107653483748436, -0.026000650599598885, 0.060716599225997925, 0.01030100230127573, 0.021836671978235245, -0.013266625814139843, 0.02033570408821106, -0.026412205770611763, -0.06202389672398567, -0.024063916876912117, 0.028010010719299316, -0.010313106700778008, -0.03382021188735962, 0.03992092236876488, -0.03713686764240265, 0.019149454310536385, 0.0038220228161662817, -0.006494109984487295, 0.05432537943124771, -0.0008034418569877744, -0.014259201474487782, -0.009187380783259869, 0.017660589888691902, 0.020892513915896416, -0.018060041591525078, -0.022962398827075958, -0.008073758333921432, -0.03217398747801781, 0.01976678892970085, -0.05020982027053833, -0.0005870723980478942, 0.028518402948975563, -0.013097161427140236, -0.013218207284808159, -0.010155747644603252, 0.006463848520070314, 0.018979990854859352, -0.0012777902884408832, -0.0015554392011836171, -0.03260975331068039, 0.00042063434375450015, -0.004451461136341095, 0.006693835835903883, 0.025589093565940857, -0.018628956750035286, 0.0014230452943593264, -0.006028083618730307, 0.028857331722974777, -0.009695773012936115, -0.05500323697924614, 0.01574806496500969, -0.03229503333568573, -0.0025434759445488453, 0.016256459057331085, -0.010246532037854195, -0.01802372746169567, -0.004336467944085598, 0.015978053212165833, 0.0187015850096941, 0.009496047161519527, 0.011959330178797245, -0.023156072944402695, -9.816062083700672e-05, -0.020856201648712158, 0.03868625685572624, -0.03561168909072876, 0.009701825678348541, -0.01727324351668358, 0.01096070185303688, -0.006578842177987099, -0.04115559160709381, -0.0030851562041789293, -0.004950775299221277, -0.017345871776342392, 0.0289783775806427, -0.008340059779584408, 0.0016795112751424313, -0.004775259178131819, -0.012249840423464775, 0.005728495307266712, -0.02982569858431816, 0.03156875818967819, 0.011735395528376102, -0.01865316554903984, 0.004732892848551273, -0.05505165457725525, 0.022381378337740898, 0.013121371157467365, 0.009768400341272354, -0.001668919692747295, -0.03060039132833481, 0.0038522842805832624, 0.007063025608658791, 0.003189558396115899, 0.01285506971180439, -0.004726840648800135, 0.015869110822677612, 0.01986362412571907, -0.050500329583883286, 0.0252985842525959, 0.048708852380514145, -0.01980310119688511, -0.010258636437356472, -0.0006131728878244758, 0.02508070133626461, 0.020105715841054916, -0.019355231896042824, 0.009477890096604824, -0.0015584654174745083, -0.003658610861748457, 0.011227003298699856, 0.004863017238676548, -0.020577795803546906, -0.0171279888600111, 0.009108700789511204, 0.011311735026538372, -0.04352809116244316, 0.015227568335831165, -0.019839415326714516, -0.02297450415790081, -0.04439961910247803, -0.025903813540935516, -0.018955780193209648, 0.03207715228199959, -0.006681730970740318, 0.04309232532978058, 0.013653972186148167, 0.031157203018665314, -0.012304311618208885, 0.04079245403409004, -0.006003874354064465, 0.04188186675310135, -0.035272762179374695, -0.011099904775619507, 0.017636381089687347, -4.0663842810317874e-05, -0.028373148292303085, 0.02834893949329853, 0.015518078580498695, 0.029220469295978546, 0.023894451558589935, -0.02982569858431816, -0.010379682295024395, -0.0055741616524755955, 0.022901875898241997, -0.0210740827023983, -0.014319724403321743, -0.0187015850096941, -0.00250262301415205, -0.01875000260770321, -0.0071417056024074554, -0.04178502783179283, 0.03725791350007057, -0.020517272874712944, 0.01301242969930172, -0.028857331722974777, 0.0022045476362109184, -0.02423338033258915, -0.007989026606082916, -0.019633637741208076, -0.005649815313518047]
metadata : {"source": "pydantic_ai_docs", "crawled_at": "2025-03-15T11:17:06.921982", "url_path": "/api/agent/", "chunk_size": 3755}
updated_dt: 2025-03-15T11:17:06.921982
---
```
  Args:
    user_prompt: User input to start/continue the conversation.
    result_type: Custom result type to use for this run, `result_type` may only be used if the agent has no
      result validators since result validators would expect an argument that matches the agent's result type.
    message_history: History of the conversation so far.
    model: Optional model to use for this run, required if `model` was not set when creating the agent.
    deps: Optional dependencies to use for this run.
    model_settings: Optional settings to use for this model's request.
    usage_limits: Optional limits on model request count or token usage.
    usage: Optional usage to start with, useful for resuming a conversation or agents used in tools.
    infer_name: Whether to try to infer the agent name from the call frame if it's not set.
  Returns:
    The result of the run.
  """
  if infer_name and self.name is None:
    self._infer_name(inspect.currentframe())
  model_used = self._get_model(model)
  del model
  deps = self._get_deps(deps)
  new_message_index = len(message_history) if message_history else 0
  result_schema: _result.ResultSchema[RunResultDataT] | None = self._prepare_result_schema(result_type)
  # Build the graph
  graph = self._build_graph(result_type)
  # Build the initial state
  state = _agent_graph.GraphAgentState(
    message_history=message_history[:] if message_history else [],
    usage=usage or _usage.Usage(),
    retries=0,
    run_step=0,
  )
  # We consider it a user error if a user tries to restrict the result type while having a result validator that
  # may change the result type from the restricted type to something else. Therefore, we consider the following
  # typecast reasonable, even though it is possible to violate it with otherwise-type-checked code.
  result_validators = cast(list[_result.ResultValidator[AgentDepsT, RunResultDataT]], self._result_validators)
  # TODO: Instead of this, copy the function tools to ensure they don't share current_retry state between agent
  # runs. Requires some changes to `Tool` to make them copyable though.
  for v in self._function_tools.values():
    v.current_retry = 0
  model_settings = merge_model_settings(self.model_settings, model_settings)
  usage_limits = usage_limits or _usage.UsageLimits()
  if isinstance(model_used, InstrumentedModel):
    tracer = model_used.options.tracer
  else:
    tracer = NoOpTracer()
  agent_name = self.name or 'agent'
  run_span = tracer.start_span(
    'agent run',
    attributes={
      'model_name': model_used.model_name if model_used else 'no-model',
      'agent_name': agent_name,
      'logfire.msg': f'{agent_name} run',
    },
  )
  graph_deps = _agent_graph.GraphAgentDeps[AgentDepsT, RunResultDataT](
    user_deps=deps,
    prompt=user_prompt,
    new_message_index=new_message_index,
    model=model_used,
    model_settings=model_settings,
    usage_limits=usage_limits,
    max_result_retries=self._max_result_retries,
    end_strategy=self.end_strategy,
    result_schema=result_schema,
    result_tools=self._result_schema.tool_defs() if self._result_schema else [],
    result_validators=result_validators,
    function_tools=self._function_tools,
    run_span=run_span,
    tracer=tracer,
  )
  start_node = _agent_graph.UserPromptNode[AgentDepsT](
    user_prompt=user_prompt,
    system_prompts=self._system_prompts,
    system_prompt_functions=self._system_prompt_functions,
    system_prompt_dynamic_functions=self._system_prompt_dynamic_functions,
  )
  async with graph.iter(
    start_node,
    state=state,
    deps=graph_deps,
    infer_name=False,
    span=use_span(run_span, end_on_exit=True),
  ) as graph_run:
    yield AgentRun(graph_run)

```
  
---|---  
####  run_sync