---
url: https://ai.pydantic.dev/api/agent/
session_id: pydantic_ai_docs
chunk_number: 13
title: Dynamic System Prompt Function Decorator
summary: This section describes a decorator function that manages system prompt functions, allowing for both static and dynamic registration. It includes assertions to maintain consistency and overload definitions for result validation handlers.
embedding: [0.024541037157177925, 0.05528785660862923, -0.03269968554377556, -0.037017691880464554, -0.023022141307592392, 0.013171007856726646, -0.0049255662597715855, -0.0003661627124529332, 0.007675854954868555, 0.03139777481555939, -0.00791453942656517, 0.03350253030657768, 0.029010934755206108, -0.023477809503674507, 0.02681938372552395, 0.008619741536676884, -0.03397990018129349, 0.0266891922801733, 0.00032988545717671514, 0.07169194519519806, 0.02699297107756138, -0.010540061630308628, 0.025126898661255836, 0.03619314730167389, 0.02558256685733795, -0.00455126678571105, -0.03623654693365097, 0.06973907351493835, 0.017575809732079506, -0.005234770476818085, 0.01655597798526287, -0.01407149713486433, -0.025669362396001816, -0.013084214180707932, 0.02536558173596859, 0.0010544129181653261, 0.044568780809640884, 0.04764997214078903, -0.009238149039447308, 0.05272742733359337, -0.015720585361123085, -0.004334281664341688, 0.013572431169450283, 0.04153098911046982, -0.00340395700186491, -0.002506180200725794, -0.002731302520260215, 0.04263761267066002, 0.02575615607202053, -0.02612503059208393, -0.013670073822140694, -0.00015773814811836928, 0.009943351149559021, 0.01122898980975151, -0.03955642133951187, -0.015688037499785423, -0.03792903199791908, -0.007350377272814512, -0.012617695145308971, 0.009780612774193287, -0.002182058524340391, -0.010686526075005531, -0.018606489524245262, 0.02851186878979206, -0.03879697248339653, 0.03278648108243942, -0.019192351028323174, 0.009254422970116138, -0.013789416290819645, 0.018628187477588654, 0.040728140622377396, 0.03387140482664108, -0.015590393915772438, -0.009601599536836147, -0.016284747049212456, -0.009227300062775612, 0.0629691332578659, 0.07959020882844925, 0.03404499590396881, 0.0012564805801957846, -0.00671569537371397, -0.03569408133625984, -0.00034293849603272974, 0.04617447406053543, -0.02664579451084137, -0.056329384446144104, -0.058933209627866745, -0.021025875583291054, 0.003425655420869589, -0.0015799242537468672, 0.031506266444921494, 0.01396300457417965, 0.014971986413002014, 0.05676335468888283, 0.092522531747818, 0.012997419573366642, -0.02224099449813366, -0.04081493616104126, 0.015677187591791153, 0.033545926213264465, 0.02922791987657547, 0.004288171883672476, -0.020624453201889992, -0.008673987351357937, 0.029661891981959343, 0.004117296077311039, -0.019376788288354874, -0.018530545756220818, -0.06032191589474678, -0.0460008829832077, -0.032092127948999405, -0.01259599719196558, -0.05255383998155594, 0.012172875925898552, -0.05034058913588524, -0.029379811137914658, -0.015416805632412434, 0.02295704558491707, -0.003987105097621679, -0.03775544464588165, -0.04211684688925743, -0.05151231214404106, 0.021611737087368965, 0.00639021722599864, 0.020917383953928947, 0.0028859046287834644, -0.05702373757958412, -0.03716958314180374, -0.02190466597676277, -0.0445253849029541, 0.01536255981773138, 0.013279500417411327, 0.003235793439671397, -0.002363783773034811, -0.02094993181526661, -0.050644371658563614, -0.05311800166964531, -0.004323432222008705, -0.004689594730734825, 0.03233081102371216, -0.02940150909125805, -0.012682790867984295, -0.00606473907828331, -0.014006401412189007, -0.006813338492065668, 0.017879588529467583, -0.013463938608765602, 0.005733836442232132, -0.05767469480633736, 0.048648104071617126, -0.012454956769943237, 0.008972342126071453, -0.015503600239753723, -0.010968606919050217, -0.010458691976964474, 0.021058423444628716, 0.0017209646757692099, 0.018085725605487823, 0.0669182687997818, -0.0013981990050524473, -0.03495633229613304, -0.01694655232131481, -0.017586659640073776, -0.028425075113773346, 0.012954022735357285, -0.03747336193919182, 0.0382545106112957, -0.025842949748039246, -0.025148596614599228, 0.03682240471243858, 0.021655132994055748, -0.009851132519543171, -0.018660735338926315, 0.028012802824378014, 0.016328144818544388, -0.030095862224698067, -0.06652769446372986, -0.01743476837873459, 0.006059314589947462, -0.02445424348115921, -0.018845174461603165, 0.006276299711316824, -0.033198751509189606, -0.04669523611664772, -0.01728287898004055, -0.027079766616225243, 0.021232012659311295, -0.03693090006709099, 0.00533241406083107, 0.05225006118416786, -0.0050394837744534016, 0.046217869967222214, 0.019962647929787636, 0.027361847460269928, -0.01600266620516777, -0.018606489524245262, 0.03478274494409561, 0.007523965556174517, 0.030855311080813408, -0.051772695034742355, -0.04040266200900078, 0.012020985595881939, 0.024193860590457916, -0.01639324054121971, 0.035563889890909195, -0.006856735795736313, 0.018107423558831215, -0.0035205865278840065, 0.006238327361643314, -0.035607289522886276, 0.00040481321047991514, -0.054116133600473404, 0.0039437077939510345, 0.005088305566459894, -0.007165939547121525, 0.010116939432919025, 0.011028277687728405, 0.0015772118931636214, 0.006265450734645128, 0.019073007628321648, 0.011012003757059574, 0.020830588415265083, 0.00845157727599144, -0.05259723961353302, -0.024497641250491142, 0.044004619121551514, -0.03627994284033775, -0.02131880633533001, 0.012791283428668976, 0.08692431449890137, -0.024541037157177925, 0.006628901232033968, -0.02922791987657547, -0.022674964740872383, 0.0573275163769722, -0.06210119277238846, -0.016480034217238426, 0.015340860933065414, 0.013355445116758347, -0.021448997780680656, -0.034630853682756424, -0.005820630583912134, 0.02077634260058403, 0.019626321271061897, -0.019897552207112312, 0.03491293638944626, 0.017879588529467583, 0.003862338373437524, 0.061320047825574875, 0.03808091953396797, 0.057110533118247986, -0.028772251680493355, -0.012661092914640903, -0.0033822583500295877, -0.044568780809640884, 0.01167380902916193, 0.0316147580742836, -0.03986020013689995, -0.06435783952474594, 0.01343139074742794, 0.06105966493487358, -0.03250439837574959, -0.008619741536676884, 0.02074379473924637, 0.0334591343998909, -0.005603645462542772, 0.018064025789499283, 0.015232368372380733, 0.026906177401542664, 0.015698887407779694, 0.0529010184109211, 0.007800621911883354, 0.01579653099179268, -0.01951782777905464, -0.015340860933065414, 0.0026580700650811195, 0.039230942726135254, 0.05498407781124115, -0.02389008179306984, -0.035238415002822876, -0.026580700650811195, 0.028164692223072052, 0.017890438437461853, 0.01452716626226902, -0.021058423444628716, -0.01536255981773138, -0.029141126200556755, -0.01565548963844776, -0.002790973521769047, 0.03137607499957085, -0.00367790088057518, -0.019040459766983986, 0.010979456827044487, -0.006905557122081518, -0.01066482812166214, -0.03387140482664108, -0.006536682136356831, -0.025257090106606483, 0.005663316231220961, -0.008928945288062096, -0.0008333591977134347, 0.05094815045595169, 0.01148937176913023, 0.020342372357845306, -0.009156779386103153, -0.00011679912131512538, -0.026624096557497978, -0.005506001878529787, 0.01670786924660206, 0.0008435303461737931, 0.015026232227683067, 0.07095419615507126, -0.046434856951236725, -0.010735347867012024, -0.04244232550263405, -0.005625343881547451, 0.0075293900445103645, -0.01615455560386181, 0.02664579451084137, -0.0060321916826069355, -0.03884036839008331, -0.015199820511043072, 0.033567626029253006, 0.022718360647559166, 0.013832813128829002, 0.0050910175777971745, -0.016848908737301826, 0.019376788288354874, -0.02883734740316868, 0.019344240427017212, -0.0025238103698939085, -0.027275051921606064, -0.03562898561358452, 0.05441991612315178, 0.008961493149399757, 0.004855046048760414, -0.006406491156667471, -0.02094993181526661, 0.03656202554702759, 0.04079323634505272, -0.020808890461921692, -0.04869150370359421, -0.003615517634898424, -0.03903565555810928, 0.05941057577729225, 0.04443858936429024, 0.008603467606008053, 0.0128563791513443, 0.0017521562986075878, 0.02484481781721115, 0.02224099449813366, -0.017575809732079506, 0.0031137391924858093, 0.0094714080914855, -0.02079804055392742, 0.013756868429481983, -0.03384970873594284, 0.029900575056672096, -0.041075319051742554, -0.011912493035197258, -0.029314715415239334, 0.022588171064853668, -0.014852643944323063, 0.012878078036010265, -0.03729977458715439, 0.03313365578651428, 0.0034337923862040043, -0.00639021722599864, 0.00292116473428905, 0.02443254552781582, 0.024671228602528572, 0.04730279743671417, -0.022392883896827698, 0.003073054365813732, -0.0025400843005627394, 0.007844018749892712, -0.02393347956240177, -0.01672956719994545, 0.03547709807753563, -0.03460915759205818, 0.07668260484933853, 0.004214939661324024, -0.007491417694836855, 0.011337482370436192, 0.03417518362402916, 0.04320177435874939, 0.007236459758132696, -0.008782479912042618, 0.03237420693039894, 0.015926720574498177, 0.017608357593417168, -0.07985059171915054, -0.01840035431087017, 0.02740524336695671, -0.041075319051742554, 0.02907603047788143, 0.013604979030787945, 0.013518184423446655, 0.04391782730817795, -0.010963182896375656, -0.011966739781200886, 0.009943351149559021, -0.03052983246743679, -0.0012693640310317278, 0.006585503928363323, 0.030551530420780182, 0.0043207197450101376, -0.01259599719196558, 0.03157136216759682, 0.024128766730427742, 0.053942546248435974, -0.010822142474353313, 0.004402089398354292, 0.004922854248434305, -0.031527966260910034, -0.023239126428961754, 6.734173075528815e-05, -0.031896840780973434, 0.03591106832027435, 0.026081632822752, -0.042963091284036636, -0.025517471134662628, 0.01490689069032669, -0.01821591705083847, 0.02074379473924637, 0.021590037271380424, 0.019452732056379318, -0.031875140964984894, -0.023304222151637077, 0.010496663860976696, 0.0231306329369545, -0.01896451599895954, 0.05003681033849716, 0.004271897953003645, -0.09451879560947418, -0.01671871729195118, 0.0026946861762553453, 0.007008625194430351, 0.02684108167886734, 0.03990359604358673, 0.010838416405022144, -0.015861624851822853, 0.012986570596694946, 0.05980115011334419, -0.04148758947849274, 0.022089103236794472, -0.021785324439406395, -0.02775241993367672, 0.05767469480633736, 0.006330546457320452, 0.018096573650836945, -0.001899977563880384, -0.02425895631313324, -0.0031110267154872417, 0.00048787790001370013, -0.04886509105563164, 0.052119869738817215, 0.009954201057553291, 0.04877829551696777, 0.013604979030787945, 0.05298781022429466, 0.0003234437317587435, -0.020917383953928947, 0.03766864910721779, -0.0013792128302156925, -0.004977100528776646, -0.017760246992111206, 0.022089103236794472, -0.028056200593709946, -0.01615455560386181, 0.021286258473992348, 0.006970652844756842, 0.028077898547053337, 0.007274432107806206, 0.022284390404820442, -0.024736324325203896, 0.044221606105566025, -0.01785789057612419, 0.03875357657670975, -0.04153098911046982, 0.0330902598798275, -0.04443858936429024, -0.005397509317845106, 0.006835036911070347, -0.04665184020996094, 0.04213854670524597, -0.023998575285077095, -0.04140079766511917, -0.020657001063227654, 0.009167629294097424, 0.06683147698640823, 0.018508845940232277, -0.009493106976151466, -0.008511248975992203, 0.02833828143775463, 0.01746731624007225, 0.04834432527422905, 0.045132942497730255, -2.3605627575307153e-05, -0.00855464581400156, 0.0061135608702898026, -0.010979456827044487, 0.0018891283543780446, 0.030291149392724037, 0.020852288231253624, 0.017901288345456123, 0.04064134880900383, -0.0013439527247101068, 0.007963360287249088, 0.002576700411736965, -0.06418425589799881, 0.013279500417411327, -0.005739261396229267, 0.039643216878175735, 0.0382545106112957, -0.005918274167925119, -2.712316381803248e-05, -0.017532411962747574, -0.021763626486063004, -0.0073069799691438675, -0.00037158734630793333, -0.04925566539168358, 0.0029726987704634666, 0.01983245648443699, 0.008489550091326237, -0.004030501935631037, 0.008240017108619213, 0.01509132795035839, -0.014559714123606682, -0.015568695962429047, -0.03402329608798027, -0.015601243823766708, 0.030421338975429535, -0.0012591928243637085, -0.019702265039086342, -0.0266891922801733, 0.024975009262561798, 0.02959679625928402, -0.009438861161470413, -0.020364070311188698, 0.01616540551185608, 0.0054788789711892605, -0.013518184423446655, -0.03645353019237518, 0.0002515673404559493, 0.0474763847887516, 0.042030055075883865, 0.013854512013494968, 0.010323075577616692, -0.018324408680200577, 0.046782031655311584, -0.024302354082465172, 0.03994699567556381, -0.014190838672220707, 0.00872280914336443, -0.0040277899242937565, 0.000511949707288295, 0.030247751623392105, -0.018150821328163147, -0.04647825285792351, 0.021210312843322754, -0.007675854954868555, 0.008381057530641556, -0.010371897369623184, -0.031202487647533417, 0.021101821213960648, 0.03035624325275421, 0.03792903199791908, -0.014234235510230064, 0.0108546894043684, 0.02300044149160385, 0.011445974931120872, 0.01744561828672886, -0.0393611341714859, -0.005836904514580965, -0.006422765087336302, 0.05220666527748108, -0.033198751509189606, 0.004906580317765474, 0.02040746808052063, -0.013670073822140694, 0.00018291182641405612, 0.033394038677215576, -0.028902443125844002, 0.022186746820807457, 0.03933943435549736, -0.0016260335687547922, 0.020125387236475945, 0.01619795337319374, -0.06644090265035629, -0.00837020855396986, 0.051382120698690414, 0.014038949273526669, -0.016610225662589073, -0.06565975397825241, 0.019257444888353348, -0.011028277687728405, 0.009118807502090931, -0.0237381923943758, 0.016772963106632233, 0.015514449216425419, -0.008690261282026768, 0.030551530420780182, 0.009303244762122631, 0.010957757942378521, 0.008636015467345715, 0.00993792712688446, 0.017912136390805244, -0.038862068206071854, 0.011879945173859596, 0.009406313300132751, -0.003135437611490488, -0.0375167578458786, -0.007561937905848026, -0.028034500777721405, 0.021188614889979362, -0.015264916233718395, 0.0027380832470953465, 0.03413178771734238, 0.006726544350385666, -0.03233081102371216, 0.03033454529941082, -0.023391015827655792, 0.00043363156146369874, 0.017369674518704414, -0.005343263037502766, 0.023022141307592392, 0.0014822809025645256, 0.0019677854143083096, 0.08384311944246292, -0.041444193571805954, 0.016979100182652473, 0.0007913183071650565, 0.016805510967969894, -0.0011073030764237046, -0.00440751388669014, 0.016783813014626503, -0.010936059057712555, -0.018074875697493553, -0.03884036839008331, 0.04730279743671417, 0.03918754681944847, 0.00588030181825161, 0.023108934983611107, -0.012715338729321957, 0.030833611264824867, 0.005815206095576286, 0.009824009612202644, 0.02499670721590519, -0.015275765210390091, -0.019723964855074883, -0.01748901605606079, -0.024692928418517113, -0.008131524547934532, -0.003959981724619865, 0.04025077447295189, -0.027166560292243958, -0.0003120859037153423, -0.03415348753333092, 0.010968606919050217, -0.02001689374446869, -0.009802310727536678, -0.034305375069379807, -0.003862338373437524, -0.018801776692271233, 0.04608767852187157, 0.038319606333971024, 0.011847397312521935, 0.004480746574699879, -0.012617695145308971, -0.02185042016208172, -0.021253710612654686, -0.02332592010498047, -0.00717136450111866, 0.042008355259895325, -0.004155268426984549, 0.004046775866299868, -0.0057012890465557575, -0.024302354082465172, 0.03877527266740799, -0.016328144818544388, -0.02760053053498268, -0.011793151497840881, 0.008994041010737419, 0.01636069267988205, 0.004952689632773399, 0.007079145405441523, 0.009135081432759762, 0.05164250358939171, 0.03892716392874718, -0.017879588529467583, -0.014288482256233692, 0.01232476532459259, 0.025452375411987305, 0.019973497837781906, 0.028359979391098022, 0.021253710612654686, -0.0023420851211994886, -0.03324214741587639, 0.006129834800958633, 0.013105912134051323, -0.006623476278036833, -0.01835695654153824, -0.017760246992111206, -0.012737037613987923, -0.0005936582456342876, 0.015047931112349033, 0.010409870184957981, 0.0511651337146759, -0.044742368161678314, -0.016631923615932465, -0.007892840541899204, -0.027730721980333328, 0.006650599651038647, -0.06587673723697662, -0.008684837259352207, 0.04357064887881279, 0.0004448198596946895, 0.005345975514501333, -0.013138459995388985, -0.050817959010601044, 0.014364426955580711, -0.021763626486063004, -0.01600266620516777, 0.04387442767620087, -0.014635658822953701, -0.002066785003989935, 0.02979208156466484, 0.011804000474512577, -0.014765850268304348, 0.017564959824085236, -0.027904309332370758, -0.002218674635514617, -0.03473934903740883, -0.03213552385568619, -0.006921831052750349, -0.03946962580084801, -0.006970652844756842, -0.010583458468317986, 0.007822319865226746, 0.024541037157177925, 0.01157616637647152, 0.007784347981214523, 0.0068947081454098225, -0.015319162048399448, 0.028815647587180138, 0.004578389693051577, 0.013463938608765602, -0.022870251908898354, 0.049559444189071655, -0.00819119531661272, 0.004331569187343121, -0.0231306329369545, 0.029900575056672096, -0.0031625607516616583, 0.023673096671700478, -0.0019474431173875928, 0.0008733658469282091, -0.025973141193389893, -0.005291729234158993, 0.0006217985064722598, -0.011142195202410221, 0.00884215161204338, 0.005728411953896284, -0.018085725605487823, 0.01112049724906683, -0.015894172713160515, 0.03695259615778923, -0.047346193343400955, 0.02833828143775463, 0.03324214741587639, -0.028034500777721405, -0.04096682369709015, 0.019886702299118042, -0.0054680295288562775, 0.02094993181526661, 0.010881813243031502, -0.018877722322940826, 0.002278345637023449, 0.003978968132287264, 0.028967538848519325, 0.00016892644634936005, -0.03478274494409561, 0.025842949748039246, 0.0068947081454098225, 0.014038949273526669, 0.010632280260324478, -0.007762649096548557, 0.019789060577750206, -0.014310181140899658, -0.06713525205850601, -0.02905433252453804, 0.007491417694836855, 0.015894172713160515, 0.007144241128116846, 0.0156229417771101, -0.011093373410403728, -0.04196495935320854, -0.026168428361415863, 0.008728234097361565, 0.026190126314759254, -0.041617780923843384, 0.010523787699639797, -0.012411559000611305, 0.018118273466825485, -0.026754288002848625, 0.02519199438393116, -0.017239483073353767, 0.021025875583291054, -0.021438147872686386, -0.011521919630467892, 0.03033454529941082, 0.0009235437028110027, -0.011131346225738525, 0.016111159697175026, 0.04942925274372101, -0.01028510369360447, -0.033220451325178146, -0.0241070669144392, -0.05259723961353302, -0.010767895728349686, 0.0029347261879593134, 0.004814361222088337, 0.017912136390805244, 0.014961136505007744, 0.025408979505300522, 0.015948420390486717, -0.00853837188333273, -0.051729295402765274, -0.01672956719994545, -0.023673096671700478, -0.03966491296887398, 0.002728590276092291, 0.03671391308307648, 0.02391177974641323, 0.007941662333905697, 0.015579544939100742, 0.029358111321926117, 0.007024899125099182, -0.003875900059938431, 0.0028126719407737255, 0.01509132795035839, -0.023022141307592392, -0.00144702079705894, 0.022099953144788742, -0.0180206298828125, 0.02777411974966526, 0.012617695145308971, -0.009791461750864983, 0.007697553839534521, -0.016024364158511162, 0.0282948836684227, 0.036475230008363724, -0.014874342828989029, 0.006867584772408009, 0.003512449562549591, 0.06010492891073227, 0.023976875469088554, -0.015004533343017101, 0.0026011113077402115, -0.007404623553156853, -0.001341240364126861, -0.009775187820196152, -0.00642818957567215, -0.0023258111905306578, 0.0012646174291148782, -0.05602560564875603, -0.013637525960803032, 0.022718360647559166, -0.0014348153490573168, 0.0052673183381557465, -0.01966971717774868, -0.006965228356420994, 0.017000798135995865, -0.028425075113773346, 0.003756558056920767, 0.001792841125279665, 0.07642222195863724, 0.00289404159411788, -0.020277276635169983, 0.06032191589474678, -0.046608444303274155, 0.009444285184144974, -0.01911640539765358, -0.016263049095869064, -0.01689230650663376, 0.006281724665313959, 0.00031395061523653567, 0.012292217463254929, 0.05129532516002655, -0.03617145121097565, -0.015199820511043072, 0.004716718103736639, -0.03901395946741104, 0.005210359580814838, 0.001883703633211553, 0.025278788059949875, 0.022208446636795998, 0.016458336263895035, 0.009276121854782104, -0.012086081318557262, -0.03599786385893822, 0.02190466597676277, -0.00791996344923973, -0.023868383839726448, -0.007469719275832176, 0.030443038791418076, 0.009905379265546799, -0.010154912248253822, -0.03821111097931862, 0.03769034892320633, -0.023108934983611107, -0.03413178771734238, 0.08258460462093353, -0.01966971717774868, -0.030833611264824867, 0.05355197191238403, 0.015102176927030087, -0.002499399473890662, 0.05238025262951851, -0.00993792712688446, -0.035238415002822876, -0.0022647841833531857, 0.0009649065323174, -0.005988794378936291, 0.0044400617480278015, -0.0046434854157269, -0.00730155548080802, 0.023998575285077095, 0.01835695654153824, 0.03608465567231178, -0.004141706973314285, 0.018866872414946556, 0.03128927946090698, -0.027991104871034622, -0.04252912104129791, -0.016957402229309082, -0.012758735567331314, -0.04137909784913063, 0.07017304748296738, -0.0244759414345026, -0.0397300086915493, -0.039447929710149765, -0.01637154072523117, -0.02445424348115921, 0.006449887994676828, -0.0041200085543096066, -0.03764694929122925, 0.017771096900105476, 0.01066482812166214, 0.015568695962429047, -0.05980115011334419, 0.03599786385893822, 0.008435303345322609, -0.03966491296887398, -0.019550375640392303, -0.03801582381129265, -0.021590037271380424, 0.058933209627866745, -0.026797685772180557, -0.022566471248865128, -0.043483853340148926, -0.01837865449488163, -0.0067753661423921585, -0.015492750331759453, -0.012389861047267914, -0.013832813128829002, -0.012075232341885567, -0.02942320704460144, 0.014060648158192635, -0.01949612982571125, 0.010187460109591484, 0.001008303603157401, -0.00781147088855505, -0.02001689374446869, -0.005603645462542772, 0.08006757497787476, 0.013453088700771332, 0.027882611379027367, -0.023846685886383057, -0.032981764525175095, 0.01694655232131481, 0.0023014002945274115, 0.0062437523156404495, 0.030095862224698067, -0.03682240471243858, 0.012498353607952595, 0.04556691274046898, 0.04174797236919403, -0.052857618778944016, -0.005354112479835749, -0.04027247428894043, 0.0244759414345026, 0.01361582800745964, -0.01963716931641102, 0.025235390290617943, 0.016273897141218185, 0.020136237144470215, 0.008679412305355072, 0.007616184186190367, -0.017326276749372482, 0.0012001999421045184, 0.034088391810655594, 0.01767345331609249, -0.03805922344326973, -0.044568780809640884, -0.029010934755206108, 0.002667563036084175, -0.0004712649679277092, 0.007751800119876862, 0.003303601173684001, 0.03256949409842491, -0.011793151497840881, -0.038905464112758636, -0.013138459995388985, 0.007133391685783863, 0.003856913885101676, -0.007334103342145681, -0.024758024141192436, 0.0035938192158937454, -0.00593454809859395, 0.0024193860590457916, -0.011424276046454906, -0.013268651440739632, -0.0018823475111275911, 0.04174797236919403, -0.0036399285309016705, -0.029835479333996773, -0.0057012890465557575, -0.007670430466532707, 0.0008882835973054171, 0.02812129631638527, -0.028425075113773346, 0.024215560406446457, -0.0045132944360375404, -0.01911640539765358, 0.020081989467144012, -0.014201688580214977, -0.004676033277064562, -0.0016355267725884914, -0.005603645462542772, -0.015286615118384361, 0.03489123657345772, 0.02885904535651207, 0.024888213723897934, 0.020873986184597015, 0.0005499221151694655, -0.005261893849819899, 0.0037755442317575216, 0.023260824382305145, -0.011587015353143215, 0.001251055859029293, -0.05958416312932968, 0.012075232341885567, 0.0010306801414117217, -0.021405600011348724, 0.01452716626226902, 0.03141947090625763, 0.0030350820161402225, -0.002263427944853902, 0.013474787585437298, -0.0504273846745491, -0.01112049724906683, 0.0118690961971879, 0.0233693178743124, 0.021644284948706627, 0.006194930523633957, -0.007117117755115032, -0.022024007514119148, 0.03756015747785568, 0.02263156697154045, -0.004955402109771967, -0.04851791262626648, -0.034305375069379807, 0.007399199064821005, -0.010496663860976696, -0.018812626600265503, -0.02703636884689331, -0.005435481667518616, 0.017738549038767815, -0.006097286939620972, 0.017944684252142906, -0.07863547652959824, 0.010719073936343193, -0.020136237144470215, 0.0012524120975285769, 0.009053711779415607, -0.0033686968963593245, -0.018270162865519524, -0.001234782044775784, 0.010735347867012024, 0.017326276749372482, -0.020342372357845306, 0.02315233275294304, -0.004000666551291943, -0.005351400002837181, 0.03656202554702759, 0.025842949748039246, 0.019626321271061897, -0.010719073936343193, -0.0005631446838378906, 0.0266891922801733, 0.018248464912176132, -0.003192396368831396, -0.013843662105500698, -0.01854139380156994, 0.0059020002372562885, -0.0182050671428442, -0.014429522678256035, 0.00021647675021085888, 0.01141342706978321, 0.011435125954449177, 0.018530545756220818, -0.06366349011659622, 0.011315783485770226, -0.04098852351307869, 0.00491471728309989, -0.001731814001686871, 0.018628187477588654, 0.026016537100076675, -0.00881502777338028, -0.0013758224667981267, -0.019387636333703995, -0.015915872529149055, 0.024562736973166466, -0.003569408319890499, -0.007290706038475037, 0.0004383781342767179, -0.0005465317517518997, -0.00629799859598279, -0.0013222541892901063, -0.039057355374097824, 0.003924721851944923, -0.03441387042403221, -0.026385413482785225, 0.015264916233718395, -0.01690315455198288, -0.005587371531873941, -0.012281368486583233, -0.016501732170581818, -0.012075232341885567, 0.004136282484978437, 0.015763983130455017, -0.001249699736945331, 0.0028235213831067085, 0.008473276160657406, -0.0007797909202054143, 0.05767469480633736, -0.01654512993991375, 0.0536387674510479, 0.0353035107254982, -0.00491742929443717, -0.004423787817358971, -0.014245085418224335, 0.009813160635530949, 0.002171209314838052, -0.05307460576295853, -0.009569051675498486, 0.041248906403779984, -0.006146108731627464, 0.0013208980672061443, 0.0011642617173492908, -0.014245085418224335, -0.018074875697493553, 0.029336413368582726, 0.005641617812216282, 0.03766864910721779, 0.006287149153649807, 0.02408536896109581, -0.007214761339128017, -0.01893196813762188, 0.008315961807966232, 0.013767717406153679, -0.0025522897485643625, -0.005362249445170164, 0.014125742949545383, 0.010957757942378521, 0.0016653621569275856, 0.022718360647559166, -0.006835036911070347, -0.007415472995489836, -0.05424632504582405, -0.012932323850691319, 0.03417518362402916, 0.028034500777721405, 0.007784347981214523, 0.01654512993991375, 0.0064336140640079975, 0.007296130992472172, -0.0011710425605997443, -0.005576522555202246, -0.0323525071144104, 0.004377678502351046, 0.009498531930148602, -0.046261265873909, 0.03215722367167473, -0.0004953367752023041, 0.03089870698750019, -0.014266783371567726, 0.019561225548386574, 0.012183724902570248, 0.006932680495083332, -0.04101022332906723, 0.016143707558512688, 0.004545842297375202, 0.018465450033545494, 0.028620362281799316, -0.00026021283701993525, 0.010583458468317986, -0.008272564969956875, 0.030790215358138084, 0.019908402115106583, 0.00984570849686861, -0.0038596261292696, -0.02022303082048893, -0.035238415002822876, 0.05198967829346657, -0.016447486355900764, -0.0012449531350284815, 0.004556691274046898, -0.007247309200465679, 0.01563379168510437, -0.013941305689513683, 0.03404499590396881, -0.0017358824843540788, 0.029184523969888687, -0.009357491508126259, 0.008440728299319744, -0.006867584772408009, -0.023781590163707733, 0.012444106861948967, -0.010827566497027874, -0.02097162976861, 0.02354290522634983, 0.015232368372380733, -0.013735169544816017, 0.04307158291339874, 0.013919607736170292, 0.01951782777905464, 0.019452732056379318, 0.02666749432682991, 0.012368162162601948, 0.015232368372380733, -0.017716849222779274, -0.034457266330718994, -0.002606536028906703, 0.030942104756832123, 0.009639572352170944, -0.000632986833807081, 0.01563379168510437, 0.02703636884689331, -0.0015433080261573195, 0.024193860590457916, -0.017586659640073776, 0.007605334743857384, -0.024931611493229866, 0.002470920095220208, 0.02059190534055233, -0.02188296802341938, 0.014429522678256035, -0.0206027552485466, -0.05993134155869484, 0.0053025782108306885, -0.013995552435517311, 0.017347974702715874, -0.019431034103035927, -0.03625824302434921, 0.020483411848545074, 0.0010422075865790248, -0.002100688870996237, 0.03358932584524155, -0.007789772469550371, -0.007665005978196859, 0.02300044149160385, -0.032070428133010864, 0.013778566382825375, -0.016783813014626503, 0.006287149153649807, -0.014809247106313705, 0.01636069267988205, -0.030074162408709526, -0.041639480739831924, 0.0008943863213062286, 0.008261715061962605, -0.03654032573103905, -0.012617695145308971, 0.0015812803758308291, -0.008109825663268566, 0.03163645789027214, 0.005853178445249796, -0.04066304489970207, -0.024671228602528572, 0.001191384973935783, -0.0026268784422427416, 0.015416805632412434, -0.01066482812166214, 0.034674253314733505, 0.0075402394868433475, 0.011315783485770226, 0.024953309446573257, -0.024714626371860504, 0.02282685413956642, -0.033025164157152176, -0.002396331401541829, -0.015579544939100742, -0.01985415443778038, -0.0008225099300034344, 0.0043207197450101376, -0.00268654921092093, 0.03656202554702759, 0.023282522335648537, 0.021199464797973633, 0.04398292303085327, 0.01914895325899124, 0.011326632462441921, 0.018476298078894615, 0.006829612422734499, -0.0005204256740398705, -0.026797685772180557, 0.03881867229938507, -0.008809603750705719, 0.004193240776658058, -0.015492750331759453, 0.013680923730134964, 0.0006401066202670336, 0.0022024009376764297, 0.011060825549066067, -0.02649390511214733, -4.428704050951637e-05, -0.005394797306507826, 0.006156958173960447, 0.0021088258363306522, -0.037798840552568436, -0.048257533460855484, -0.012563449330627918, -0.02994397282600403, -0.010795018635690212, 0.0019854155834764242, -0.026168428361415863, 0.016295596957206726, -0.031527966260910034, -0.006357669364660978, 0.03159306198358536, -0.017619207501411438, -0.04185646399855614, 0.003737571882084012, 0.009292395785450935, 0.027492038905620575, -0.03072511963546276, -0.012997419573366642, -0.02150324359536171, 0.007583636324852705, -0.02221929468214512, -0.03847149387001991, 0.0207871925085783, 0.03699599578976631, -0.013821964152157307, 0.003965406212955713, 0.018519695848226547, 0.030204353854060173, -0.016805510967969894, 0.021611737087368965, 0.004860471002757549, 0.030030766502022743, -0.004160693380981684, 0.005977944936603308, -0.03341573849320412, 0.006797064561396837, -0.0076487320475280285, 0.01535170990973711, -0.02484481781721115, -0.00593454809859395, -0.0006055246340110898, 0.02742694318294525, 0.00442107580602169, -0.015275765210390091, 0.06036531180143356, -0.009997597895562649, 0.013572431169450283, -0.008690261282026768, -0.01156531646847725, -0.016404088586568832, -0.018845174461603165, -0.04374423623085022, -0.00011408680438762531, -0.005983369890600443, 0.007366651203483343, -0.02059190534055233, 0.023824986070394516, -0.030985500663518906, 0.018454600125551224, -0.03549879416823387, -0.008608891628682613, 0.028967538848519325, 0.003957269713282585, 0.028945839032530785, -0.02369479462504387, -0.04168287664651871, -0.019962647929787636, -0.002746220212429762, -0.02022303082048893, -0.0016260335687547922, -0.05368216335773468, 0.023217428475618362, -0.005082880612462759, 0.003132725367322564, 0.018291860818862915, 0.008663138374686241, -0.00809897668659687, -0.023651398718357086, 0.0316147580742836, 0.009428011253476143, -0.0046434854157269, 0.00506118219345808, 0.019908402115106583, -0.00853837188333273, -0.005744685884565115, 0.023976875469088554, 0.045349929481744766, -0.0211560670286417, 0.024324052035808563, 0.010182035155594349, 0.01965886913239956, 0.00826714001595974, -0.038710176944732666, 0.004646197892725468, -0.016653621569275856, 0.01003014575690031, -0.006292573641985655, -0.010816717520356178, -0.00808270275592804, -0.01657767780125141, 0.006829612422734499, -0.001160193351097405, 0.006650599651038647, 0.020863136276602745, -0.018476298078894615, -0.021253710612654686, -0.047910355031490326, -0.011424276046454906, -0.02093908190727234, 0.03693090006709099, -0.004266473464667797, -0.003197820857167244, -0.011359180323779583, -0.04229043424129486, -0.040185678750276566, 0.00045770336873829365, -0.010778744705021381, 0.023846685886383057, -0.0038379274774342775, 0.01710929162800312, 0.02153579145669937, -0.019919250160455704, -0.020081989467144012, -0.03591106832027435, 0.034674253314733505, -0.007344952784478664, 0.005793507676571608, 0.002729946281760931, -0.02868545800447464, -0.007795196957886219, 0.013203555718064308, -0.006721119862049818, -0.01817251928150654, -0.020700398832559586, 0.0035341482143849134, 0.017315426841378212, -0.02221929468214512, 0.02501840516924858, -0.01581822894513607, 0.022891949862241745, -0.024671228602528572, -0.01874753087759018, -0.01636069267988205, 0.007985059171915054, -0.010046419687569141, -0.0038487769197672606, 0.02059190534055233, -0.001011693966574967, 0.006748242769390345, 0.011001154780387878, 0.03406669199466705, -0.005080168601125479, -0.01768430322408676, 0.024041971191763878, -0.003235793439671397, -0.011662960052490234, 0.009183903224766254, 0.0001446851238142699, 0.07442595809698105, -0.001145275542512536, 0.00487674493342638, -0.014820096082985401, -0.04148758947849274, 0.0020871274173259735, 0.0037267226725816727, -0.0241070669144392, 0.017760246992111206, 0.022848552092909813, 0.002005757996812463, -0.00533241406083107, -0.0116846589371562, -0.002092552138492465, -0.023412713780999184, -0.03975170850753784, 0.025300486013293266, 0.015416805632412434, 0.028598662465810776, 0.017521563917398453, 0.0027624941430985928, -0.01407149713486433, 0.009552777744829655, 0.00515068881213665, 0.039057355374097824, 0.006422765087336302, -0.0217093788087368, -0.011337482370436192, -0.024736324325203896, 0.006514983717352152, -0.014451221562922001, -0.012270518578588963, -0.03330724313855171, -0.00048787790001370013, -0.0006004390306770802, 0.023759890347719193, -0.0014402399538084865, 0.031506266444921494, -0.017130989581346512, 0.04111871495842934, -0.023564603179693222, -0.023846685886383057, 0.020646151155233383, -0.015883324667811394, -0.01781449280679226, -0.02226269245147705]
metadata : {"source": "pydantic_ai_docs", "crawled_at": "2025-03-15T11:17:04.139242", "url_path": "/api/agent/", "chunk_size": 4320}
updated_dt: 2025-03-15T11:17:04.139242
---
```
    """
    if func is None:
      defdecorator(
        func_: _system_prompt.SystemPromptFunc[AgentDepsT],
      ) -> _system_prompt.SystemPromptFunc[AgentDepsT]:
        runner = _system_prompt.SystemPromptRunner[AgentDepsT](func_, dynamic=dynamic)
        self._system_prompt_functions.append(runner)
        if dynamic:
          self._system_prompt_dynamic_functions[func_.__qualname__] = runner
        return func_
      return decorator
    else:
      assert not dynamic, "dynamic can't be True in this case"
      self._system_prompt_functions.append(_system_prompt.SystemPromptRunner[AgentDepsT](func, dynamic=dynamic))
      return func
  @overload
  defresult_validator(
    self, func: Callable[[RunContext[AgentDepsT], ResultDataT], ResultDataT], /
  ) -> Callable[[RunContext[AgentDepsT], ResultDataT], ResultDataT]: ...
  @overload
  defresult_validator(
    self, func: Callable[[RunContext[AgentDepsT], ResultDataT], Awaitable[ResultDataT]], /
  ) -> Callable[[RunContext[AgentDepsT], ResultDataT], Awaitable[ResultDataT]]: ...
  @overload
  defresult_validator(
    self, func: Callable[[ResultDataT], ResultDataT], /
  ) -> Callable[[ResultDataT], ResultDataT]: ...
  @overload
  defresult_validator(
    self, func: Callable[[ResultDataT], Awaitable[ResultDataT]], /
  ) -> Callable[[ResultDataT], Awaitable[ResultDataT]]: ...
  defresult_validator(
    self, func: _result.ResultValidatorFunc[AgentDepsT, ResultDataT], /
  ) -> _result.ResultValidatorFunc[AgentDepsT, ResultDataT]:
"""Decorator to register a result validator function.
    Optionally takes [`RunContext`][pydantic_ai.tools.RunContext] as its first argument.
    Can decorate a sync or async functions.
    Overloads for every possible signature of `result_validator` are included so the decorator doesn't obscure
    the type of the function, see `tests/typed_agent.py` for tests.
    Example:
```python
    from pydantic_ai import Agent, ModelRetry, RunContext
    agent = Agent('test', deps_type=str)
    @agent.result_validator
    def result_validator_simple(data: str) -> str:
      if 'wrong' in data:
        raise ModelRetry('wrong response')
      return data
    @agent.result_validator
    async def result_validator_deps(ctx: RunContext[str], data: str) -> str:
      if ctx.deps in data:
        raise ModelRetry('wrong response')
      return data
    result = agent.run_sync('foobar', deps='spam')
    print(result.data)
    #> success (no tool calls)
```
    """
    self._result_validators.append(_result.ResultValidator[AgentDepsT, Any](func))
    return func
  @overload
  deftool(self, func: ToolFuncContext[AgentDepsT, ToolParams], /) -> ToolFuncContext[AgentDepsT, ToolParams]: ...
  @overload
  deftool(
    self,
    /,
    *,
    name: str | None = None,
    retries: int | None = None,
    prepare: ToolPrepareFunc[AgentDepsT] | None = None,
    docstring_format: DocstringFormat = 'auto',
    require_parameter_descriptions: bool = False,
  ) -> Callable[[ToolFuncContext[AgentDepsT, ToolParams]], ToolFuncContext[AgentDepsT, ToolParams]]: ...
  deftool(
    self,
    func: ToolFuncContext[AgentDepsT, ToolParams] | None = None,
    /,
    *,
    name: str | None = None,
    retries: int | None = None,
    prepare: ToolPrepareFunc[AgentDepsT] | None = None,
    docstring_format: DocstringFormat = 'auto',
    require_parameter_descriptions: bool = False,
  ) -> Any:
"""Decorator to register a tool function which takes [`RunContext`][pydantic_ai.tools.RunContext] as its first argument.
    Can decorate a sync or async functions.
    The docstring is inspected to extract both the tool description and description of each parameter,
    [learn more](../tools.md#function-tools-and-schema).
    We can't add overloads for every possible signature of tool, since the return type is a recursive union
    so the signature of functions decorated with `@agent.tool` is obscured.
    Example:
```python
    from pydantic_ai import Agent, RunContext
    agent = Agent('test', deps_type=int)
    @agent.tool
    def foobar(ctx: RunContext[int], x: int) -> int:
      return ctx.deps + x
    @agent.tool(retries=2)
    async def spam(ctx: RunContext[str], y: float) -> float:
      return ctx.deps + y
    result = agent.run_sync('foobar', deps=1)
    print(result.data)
    #> {"foobar":1,"spam":1.0}