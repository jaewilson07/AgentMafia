---
url: https://ai.pydantic.dev/api/agent/
session_id: pydantic_ai_docs
chunk_number: 16
title: Agent Model and Dependency Management
summary: This section explains how to configure the model for an agent instance, including overriding models and handling dependencies. It outlines the requirements for setting a model and the default behaviors when no model is specified, as well as the management of instrument settings.
embedding: [-0.025741619989275932, 0.05733687803149223, 0.02626940608024597, -0.04162321612238884, 0.010201886296272278, 0.02941213920712471, -0.013830422423779964, 0.014082320965826511, -0.04519777372479439, -0.00606955261901021, -0.006006577983498573, -0.014082320965826511, 0.002992793219164014, -0.010201886296272278, -0.003244691528379917, -0.03459405153989792, 0.019228246062994003, -0.017560917884111404, 0.00360454642213881, 0.05378631129860878, 0.04167119786143303, 0.025621667504310608, 0.007095139008015394, -0.010315840132534504, -0.00037915961001999676, 0.0399199016392231, -0.0060155740939080715, 0.031235404312610626, 0.010987569577991962, 0.018412575125694275, 0.05340246483683586, -0.0024095282424241304, -0.04860439896583557, 0.02052372321486473, 0.0026179442647844553, -0.02180720679461956, 0.0026104473508894444, 0.014094316400587559, -0.03406626358628273, 0.05047564581036568, -0.008546553552150726, 0.012606916017830372, -0.010135912336409092, 0.028716420754790306, -0.06021571904420853, 0.00030212817364372313, -0.009140314534306526, 0.02931617759168148, -0.0026254411786794662, 0.012331027537584305, -0.040687594562768936, 0.012810833752155304, 0.018844401463866234, 0.01924024149775505, 0.0035385731607675552, 0.0006930954987183213, 0.011179491877555847, -0.005256880074739456, 0.004189310595393181, -0.04565358906984329, 0.0048250542022287846, -0.0040603624656796455, -0.0292202178388834, 0.024877967312932014, -0.04075956344604492, 0.005655719432979822, -0.014826021157205105, 0.011179491877555847, -0.033730398863554, 0.0016433373093605042, 0.014010350219905376, 0.03008386865258217, -0.04757281765341759, -0.024554098024964333, -0.03711303323507309, -0.013986360281705856, 0.03737692907452583, 0.06381426751613617, 0.014406190253794193, 0.038744375109672546, 0.00864851288497448, 0.01924024149775505, 0.017692865803837776, 0.024829987436532974, -0.028956323862075806, -0.07480183243751526, -0.021555308252573013, -0.031859152019023895, -0.039128221571445465, -0.05402621254324913, -0.00885842740535736, -0.01981600932776928, 0.0073410398326814175, 0.0579606257379055, 0.05911216139793396, 0.04570157080888748, -0.005496783647686243, -0.046973057091236115, -0.002949310699477792, 0.031187424436211586, 0.023054704070091248, 0.0005315356538631022, -0.038696397095918655, -0.012217073701322079, 0.038504473865032196, 0.015425779856741428, 0.0008898911764845252, 0.02009189873933792, 0.0030527689959853888, 0.005931607913225889, -0.0551297701895237, -0.014166287146508694, 0.024590084329247475, 0.02000793255865574, -0.09423399716615677, -0.06832444667816162, -0.029244206845760345, 0.016865199431777, -0.012942780740559101, -0.01667327620089054, 0.0026539298705756664, 0.0318351611495018, -0.0077968561090528965, -0.008738475851714611, 0.033754389733076096, 0.02119545266032219, -0.004531173035502434, 0.008672502823174, -0.04505383223295212, -0.04579753056168556, 0.014814026653766632, -0.02405030094087124, -0.01066969707608223, -0.014826021157205105, -0.05340246483683586, -0.005601740907877684, -0.02471003495156765, -0.015593712218105793, -0.06741281598806381, 0.04044768959283829, -0.01995995081961155, 0.025885561481118202, -0.005253881216049194, 0.009728076867759228, -0.024338185787200928, 0.06626127660274506, -0.01206713356077671, 0.008324642665684223, -0.03778476268053055, 0.030467713251709938, 0.0574808195233345, -0.0006537364097312093, -0.019348198547959328, 0.011677291244268417, -0.020919565111398697, -0.01772885024547577, 0.01064570713788271, -0.003241692902520299, 0.04956401512026787, -0.023882368579506874, -0.020691655576229095, 0.05349842831492424, 0.004012382123619318, 0.007550955284386873, -0.024877967312932014, -0.0033646433148533106, -0.02694113552570343, 0.007041160482913256, -0.014670084230601788, -0.02883637137711048, 0.03624938428401947, 0.026029502972960472, 0.0025144859682768583, 0.01667327620089054, 0.04162321612238884, -0.01643337309360504, -0.06832444667816162, -0.014694074168801308, -0.009824038483202457, -0.028404545038938522, -0.023414557799696922, -0.028284594416618347, -0.0470450296998024, -0.001420677057467401, -0.04975593462586403, -0.009230277501046658, 0.012253059074282646, 0.02384638413786888, 0.0019132285378873348, 0.00232256343588233, 0.033274583518505096, 0.04265480116009712, 0.015797629952430725, 0.014862006530165672, -0.041935089975595474, -0.015449769794940948, 0.03768880292773247, 0.011563337408006191, 0.027828777208924294, -0.009590133093297482, -0.007454993668943644, -0.00805475190281868, 0.030827568843960762, 0.016037533059716225, -0.011029552668333054, 0.003709504147991538, -0.010021958500146866, 0.003715501632541418, -0.034809961915016174, 0.007652914151549339, -0.000878645689226687, -0.06021571904420853, -0.029052285477519035, 0.0003152478893753141, 0.009830036200582981, 0.016841208562254906, -0.020403772592544556, -0.012654896825551987, 0.01315869390964508, 0.052250929176807404, -0.004762079566717148, 0.04311061650514603, 0.04922815039753914, -0.016565319150686264, -0.010351825505495071, 0.008360628969967365, 0.007407013326883316, -0.007670906838029623, -0.0004835550207644701, 0.05445804074406624, -0.0002419649244984612, -0.006138524506241083, 0.015209866687655449, -0.042222972959280014, 0.005781668704003096, -0.041743166744709015, 0.01202515047043562, -0.002613446209579706, 0.03620140254497528, -0.07009973376989365, -0.037185005843639374, -0.0006035066326148808, -0.01315869390964508, -0.006885223556309938, -0.01705712080001831, 0.030707616358995438, 0.026581281796097755, -0.021459346637129784, 0.02703709714114666, 0.03245891258120537, 0.028260603547096252, 0.020979540422558784, -0.011455380357801914, -0.041743166744709015, -0.02423022873699665, -0.0002912575437221676, -0.022251026704907417, 0.00566471554338932, -0.05709697678685188, 0.0042402902618050575, 0.021639274433255196, 0.027948729693889618, -0.03512183576822281, -9.286880231229588e-05, -0.041839130222797394, 0.01004594936966896, 0.04778872802853584, -0.060743506997823715, -0.001857750816270709, -0.012295042164623737, -9.849153138929978e-05, 0.0008186698541976511, 0.029676033183932304, -0.03838452324271202, -0.03701707348227501, -0.015941571444272995, 0.01004594936966896, 0.04531772434711456, 0.00831264816224575, -0.07700894773006439, 0.0037724787835031748, 0.02746892347931862, 0.04965997487306595, 0.0655895546078682, -0.03526577726006508, 0.013806432485580444, 0.023462539538741112, -0.025789599865674973, -0.008924401365220547, 0.03845649212598801, 0.02289876528084278, -0.0041053444147109985, 0.012726867571473122, -0.05249083414673805, 0.006363433785736561, -0.05345044657588005, 0.009967979975044727, -0.004282273352146149, 0.013674485497176647, -0.06352638453245163, -0.0014109309995546937, 0.039512068033218384, 0.005964594893157482, 0.018928367644548416, 0.001368198310956359, -0.0065913419239223, -0.005235888529568911, 0.015497750602662563, -0.0011005562264472246, -0.03723298758268356, 0.0006878476124256849, 0.05311458185315132, -0.06832444667816162, -0.009254268370568752, -0.0036795162595808506, -0.048772331327199936, 0.04241489619016647, -0.01006993930786848, 0.05325852334499359, 0.033754389733076096, -0.02466205507516861, -0.004408222157508135, -0.008018766529858112, 0.01676923781633377, -0.01668527163565159, 0.025213832035660744, 0.0007946795667521656, 0.015029938891530037, -0.0035445706453174353, 0.025837581604719162, -0.020595693960785866, 0.0015308826696127653, 0.007964788004755974, 0.013794437050819397, 0.029867956414818764, -0.015149890445172787, -0.08089537918567657, 0.02275482378900051, 0.04670916497707367, 0.05824851244688034, 0.0037244982086122036, -0.010093929246068, -0.025813590735197067, -0.013722466304898262, 0.0114073995500803, 0.0007152116158977151, 0.007940798066556454, 0.00743700098246336, -0.022646866738796234, 0.030491704121232033, 0.0005810157163068652, 0.010249867103993893, -0.00412033824250102, -0.009212285280227661, -0.027972720563411713, -0.007712889928370714, 0.002991293789818883, 0.028428535908460617, 0.00309475208632648, -0.0019986939150840044, -0.04956401512026787, -0.014058331027626991, 0.005634727887809277, -0.03269881382584572, -0.05325852334499359, -0.029196226969361305, -0.034953903406858444, 0.03116343356668949, -0.015437774360179901, 0.017980748787522316, 0.061127349734306335, 0.05215496942400932, -0.044598016887903214, -0.011701281182467937, -0.0038414509035646915, -0.01691317930817604, -0.0418151393532753, -0.01667327620089054, 0.060407642275094986, 0.05239487066864967, 0.02931617759168148, 0.016517339274287224, 0.03459405153989792, -0.027300991117954254, 0.03274679556488991, 0.00981204304844141, -0.038936298340559006, -0.015749648213386536, -0.027253009378910065, 0.012474969029426575, 0.013902394101023674, -0.04327854886651039, -0.018304618075489998, -0.025069890543818474, 0.011821232736110687, 0.010963578708469868, 0.05992783233523369, 0.012474969029426575, 0.04025576636195183, 0.0038834339939057827, 0.00545180169865489, 0.0017977750394493341, -0.03723298758268356, 0.03876836597919464, 0.009614123031497002, 0.042366914451122284, 0.04774075001478195, -0.0035835548769682646, 0.015125900506973267, -0.002568464260548353, 0.06630925834178925, -0.03982394188642502, 0.016889190301299095, -0.03243492171168327, -0.004063361324369907, -0.05829649046063423, 0.039656009525060654, 0.02456609345972538, 0.012037145905196667, 0.021507326513528824, -0.02384638413786888, -0.05896821990609169, -0.00855255126953125, 0.008756469003856182, -0.019588101655244827, 0.03886432945728302, 0.025957532227039337, -0.006693300791084766, 0.006351438816636801, -0.04788469150662422, -0.006249479949474335, 0.008900410495698452, 0.051099393516778946, -0.014226263388991356, -0.016217460855841637, -0.016553325578570366, 0.05263477563858032, 0.0036345343105494976, -0.0077188871800899506, 0.015161885879933834, 0.04361441358923912, -0.057144954800605774, 0.011299443431198597, 0.03125939518213272, -0.0230427086353302, 0.013458573259413242, -0.032386939972639084, -0.039656009525060654, 0.020223844796419144, 0.017165077850222588, -0.02109949104487896, -0.008264667354524136, -0.03552967309951782, -0.015497750602662563, -0.00040558644104748964, -0.025957532227039337, 0.08578940480947495, 0.03552967309951782, 0.09538553655147552, -0.008090737275779247, 0.04299066215753555, 0.015137895941734314, 0.006255477666854858, 0.011035549454391003, -0.01349455863237381, 0.03759283944964409, -0.01843656599521637, -0.025309793651103973, -7.78279936639592e-05, 0.028956323862075806, 0.06362234801054001, -0.013554533943533897, -0.005445803981274366, -0.0313553549349308, -0.003823458217084408, -0.00294031435623765, 0.02390635944902897, -0.005259878933429718, 0.018028730526566505, -0.006669310387223959, -0.009128319099545479, -0.021363385021686554, 0.01066969707608223, 0.020871583372354507, -0.004057364072650671, 0.03540972247719765, 0.01834060437977314, 0.002973301103338599, -0.03593750670552254, 0.02756488509476185, -0.018124692142009735, 0.010909601114690304, 0.02151932194828987, -0.01206713356077671, 0.03620140254497528, 0.024829987436532974, 0.0223349928855896, 0.031115451827645302, -0.03999187424778938, -0.027972720563411713, 0.01387840323150158, -0.0006368681788444519, 0.02414626255631447, 0.038600433617830276, -0.016229456290602684, -0.005715695209801197, 0.03315462917089462, 0.07149117439985275, -0.02243095450103283, 0.060935426503419876, -0.06429407000541687, 0.05277871713042259, 0.004342249128967524, 0.01676923781633377, -0.002775380853563547, 0.026869164779782295, -0.01427424419671297, 0.006351438816636801, -0.020319806411862373, -0.001596856047399342, 0.02361847646534443, -0.0045761545188724995, 0.005271873902529478, -0.022454945370554924, 0.020655671134591103, -0.004315259866416454, 0.002003192203119397, 0.01882041059434414, -0.01610950380563736, 0.03744889795780182, 0.03178718313574791, -0.00824067648500204, -0.0005547762848436832, -0.008708488196134567, -0.014226263388991356, 0.02157929725944996, 0.028140652924776077, 0.015653688460588455, -0.02371443808078766, 0.021207448095083237, -0.013818427920341492, 0.008198694325983524, -0.04438210278749466, -0.01373446173965931, -0.010093929246068, -0.001320217619650066, 0.0024964932817965746, -0.014921982772648335, -0.011791245080530643, -0.00608154758810997, 0.03459405153989792, -0.008606529794633389, -0.0031067472882568836, -0.029340168461203575, 0.016361402347683907, 0.009512164629995823, -0.03368241712450981, -0.004771076142787933, 0.012822829186916351, 0.000985102728009224, -0.02010389231145382, -0.004909020382910967, 0.015653688460588455, 0.008180701173841953, -0.007970785722136497, 0.03521779924631119, 0.019828004762530327, -0.027876758947968483, 0.022167060524225235, 0.00329567096196115, 0.009182297624647617, 0.015653688460588455, -0.0007766868220642209, 0.004591148812323809, 0.01644536852836609, 0.0015878597041592002, 0.01634940691292286, 0.003817460499703884, -0.044166188687086105, -0.02485397830605507, -0.0031307374592870474, -0.015569721348583698, 0.02674921415746212, -0.0159175805747509, -0.031715210527181625, -0.014909987337887287, -0.023114679381251335, 0.0006829745834693313, 0.007047158200293779, -0.01819666288793087, 0.00938621535897255, -0.021219443529844284, 0.019887980073690414, -0.004555162973701954, -0.03548169136047363, 0.006339443847537041, 0.012630906887352467, 0.024925949051976204, -0.029580071568489075, 0.011539346538484097, 0.023390566930174828, -0.0053438451141119, 0.00719709787517786, 0.04951603338122368, 0.012858814559876919, -0.02504589967429638, 0.051819104701280594, -0.016277436167001724, -0.03313063830137253, 0.005997581407427788, -0.027732817456126213, 0.015689672902226448, -0.003673518542200327, -0.026125464588403702, -0.02171124517917633, 0.039464086294174194, -0.0370650552213192, 0.010729673318564892, 0.0427507609128952, -0.021459346637129784, 0.01682921312749386, 0.006603337358683348, 0.01771685481071472, -0.003045272082090378, 0.007023167796432972, -0.01643337309360504, 0.001908730249851942, 0.016313422471284866, -0.013362611643970013, 0.00472609419375658, -0.034714002162218094, 0.007299056742340326, 0.033994290977716446, 0.0016793227987363935, -0.04320657625794411, -0.024782007560133934, -0.01264290139079094, -0.023066697642207146, -0.018460555002093315, -0.028764400631189346, 0.010825634934008121, -0.01606152392923832, -0.004030374810099602, -0.051291316747665405, -0.02375042252242565, -0.014022345654666424, -0.0007744377362541854, 0.02105151116847992, 0.012678887695074081, -0.017177073284983635, -0.015221862122416496, -0.020607689395546913, -0.025981523096561432, 0.007173107471317053, 0.015785634517669678, 0.006945199333131313, -0.0040603624656796455, 0.004462200682610273, -0.02361847646534443, 0.015293832868337631, -0.012079128995537758, 0.03334655240178108, -0.0030692622531205416, 0.0033826360013335943, -0.028428535908460617, 0.010441789403557777, 0.05863235518336296, 0.016049528494477272, 0.03581755608320236, 0.014106311835348606, -0.019708052277565002, -0.010939588770270348, 0.02247893624007702, 0.02490195818245411, 0.000563772686291486, -0.009080338291823864, -0.013794437050819397, -0.03286674618721008, -0.03581755608320236, 0.04553363844752312, -0.010039951652288437, -0.03003588877618313, -0.056713130325078964, 0.028500506654381752, 0.047452863305807114, -0.01625344529747963, 0.023834388703107834, -0.02013987861573696, -0.008672502823174, 0.005391825921833515, 0.009752067737281322, -0.015101910568773746, -0.01553373597562313, -0.008420604281127453, 0.019696056842803955, 0.0175849087536335, -0.0375448614358902, 0.00538282934576273, 0.007802853360772133, -0.008894413709640503, -0.022023119032382965, -0.006006577983498573, -0.025069890543818474, 0.041743166744709015, -0.03492991626262665, -0.03797668591141701, 0.017021136358380318, 0.02153131738305092, 0.04234292358160019, -0.04685310646891594, -0.01891637220978737, 0.032290980219841, -0.019804013893008232, 0.0001227629982167855, -0.01834060437977314, -0.015125900506973267, 0.03236294910311699, 0.02528580278158188, 0.04462200775742531, -0.019684063270688057, -0.031811174005270004, 0.010681692510843277, -0.009728076867759228, 0.012834824621677399, 0.010849624872207642, -0.022227037698030472, -0.022682853043079376, 0.025213832035660744, -0.01339859701693058, -0.0007122128154151142, -0.024458136409521103, 0.013782442547380924, -0.0115213543176651, -0.01373446173965931, 0.022119080647826195, 0.010705683380365372, -0.0579606257379055, 0.013194679282605648, 0.00390742439776659, -0.00565272057428956, -0.0051339296624064445, 0.00618950417265296, -0.014694074168801308, -0.025789599865674973, -0.004189310595393181, -0.03483395278453827, 0.0021276420447975397, 0.032051075249910355, -0.04913218691945076, 0.010957580991089344, -0.0028743408620357513, 0.007119129411876202, -0.018520532175898552, -0.0006657315534539521, 0.019780023023486137, 0.017872793599963188, 0.017992744222283363, -0.024074291810393333, -0.02466205507516861, 0.021795211359858513, -0.0008171704830601811, 0.002674921415746212, 0.01021388079971075, 0.014790035784244537, 0.015809625387191772, 0.03322660177946091, -0.032386939972639084, -0.013134703040122986, -0.038936298340559006, 0.016937170177698135, -0.007215090561658144, -0.00251148734241724, -0.015017944388091564, 0.0441901795566082, 0.029532091692090034, -0.018040725961327553, 0.021447351202368736, -0.009698089212179184, 0.00020110640616621822, -0.013086723163723946, 0.014826021157205105, 0.01601354219019413, -0.0018847399624064565, 0.010477774776518345, 0.02252691611647606, -0.00503496965393424, -0.002740894677117467, -0.015437774360179901, -0.027876758947968483, -0.009596130810678005, -0.04788469150662422, 0.011353421956300735, -0.006057557184249163, -0.0012182587524875998, 0.016745246946811676, -0.019636081531643867, 0.0027588873635977507, -0.09087535738945007, 0.04850843921303749, 0.023918354883790016, 0.0030047884210944176, 0.05887226015329361, 0.01938418298959732, 0.017752841114997864, -0.002635936951264739, 0.006405416876077652, 0.02052372321486473, -0.011929189786314964, 0.0025894558057188988, -0.010633711703121662, -0.03365842625498772, 0.023462539538741112, -0.0035505681298673153, -0.023678451776504517, -0.009338234551250935, 0.024254219606518745, 0.005964594893157482, -0.0022985730320215225, 0.014598113484680653, -0.08353431522846222, 0.012265054509043694, -0.007335042115300894, -0.020895574241876602, -0.01872444897890091, 0.003967400174587965, 0.024530109018087387, -0.008582538925111294, -0.03272280469536781, -0.02267085760831833, -0.0014034340856596828, 0.02912425622344017, -0.023246625438332558, 0.06760473549365997, 0.023738427087664604, -0.0009138814639300108, 0.015281837433576584, -0.00893039908260107, 0.010489770211279392, -0.02385837957262993, -0.00503496965393424, 0.029004303738474846, 0.028404545038938522, 0.024362176656723022, -0.022550906985998154, -0.04946805164217949, 0.008168705739080906, -0.004372236784547567, 0.018124692142009735, -0.0007133373292163014, -0.02267085760831833, 0.03648928552865982, 0.03145131841301918, -0.001757291378453374, -0.03291472792625427, 0.005730689037591219, -0.011887206695973873, 0.004033373668789864, -0.004792067687958479, 0.007982781156897545, 0.015473760664463043, 0.03269881382584572, -0.009650108404457569, -0.02024783566594124, -0.012906795367598534, 0.003658524714410305, -0.006333446130156517, 0.0030152841936796904, -0.030875548720359802, 0.0037814751267433167, 0.005241886246949434, -0.015005948953330517, -0.006042563356459141, 0.01768087036907673, -0.0022385972552001476, 0.00954815000295639, -0.015581716783344746, 0.02979598566889763, 0.0111674964427948, -0.0029852960724383593, 0.017884787172079086, 0.007359032519161701, -0.041647206991910934, 0.013266650028526783, -0.008894413709640503, 0.025477726012468338, -0.015149890445172787, 0.012193082831799984, 0.027348970994353294, -0.01228304672986269, 0.00041870615677908063, 0.0187724307179451, -0.04409421980381012, 0.008354631252586842, -0.026149455457925797, -0.0028098670300096273, 0.015389794483780861, 0.005598742514848709, 0.0014154291711747646, 0.022742828354239464, -0.014202272519469261, 0.0018682465888559818, -0.007874824106693268, 0.02979598566889763, -0.025837581604719162, -0.016313422471284866, -0.022682853043079376, 0.029148245230317116, 0.01639738865196705, -0.0016193470219150186, -0.020595693960785866, -0.01132943108677864, -0.032195016741752625, -0.009404207579791546, 0.04543767869472504, -0.027924738824367523, -0.04308662563562393, 0.012690882198512554, -0.037185005843639374, 0.006525368429720402, 0.005949600599706173, 0.02665325254201889, 0.012157097458839417, 0.038984280079603195, -0.013218669220805168, -0.029867956414818764, -0.024338185787200928, 0.0007178355590440333, -0.012726867571473122, 0.01114350650459528, -0.03406626358628273, -0.0185325276106596, -0.027684835717082024, 0.02123143896460533, 0.03963201865553856, -0.030155839398503304, -0.003964401315897703, -0.010345827788114548, 0.011197485029697418, -0.0003152478893753141, 0.009620120748877525, 0.009860023856163025, -0.04985189810395241, 0.0035805562511086464, -0.004597146064043045, -0.018844401463866234, 3.315069625386968e-05, 0.019684063270688057, -0.005982587579637766, -0.017644884064793587, -0.008636517450213432, 0.02926819771528244, -0.009632116183638573, -0.012534945271909237, -0.010891607962548733, 0.0067232889123260975, 0.021915161982178688, -0.008900410495698452, -0.017261039465665817, 0.05378631129860878, -0.0073410398326814175, -0.00795879028737545, 0.0056497217155992985, 0.005454800557345152, -0.003043772652745247, -0.028452526777982712, -0.016565319150686264, 0.03807264566421509, -0.011011559516191483, 0.004474195651710033, 0.013134703040122986, 5.505592343979515e-05, 0.06592541188001633, 0.07187501341104507, 0.03173920139670372, -0.013746457174420357, 0.017656879499554634, 0.019216250628232956, 0.006921208929270506, 0.05354640632867813, -0.0011140507413074374, -0.0023885369300842285, 0.041551243513822556, 0.0027483918238431215, 0.042366914451122284, 0.05277871713042259, -0.017189068719744682, 0.031187424436211586, 0.016337411478161812, 0.05354640632867813, 0.00018526904750615358, 0.02509388141334057, -0.02727700024843216, -0.0008051753393374383, 0.025189843028783798, 0.00539482431486249, 0.006657315418124199, -0.02689315564930439, 0.026125464588403702, 0.04594147577881813, 0.04123936966061592, -0.0013209673343226314, 0.0019267230527475476, 0.027924738824367523, 0.006645320449024439, -0.031619250774383545, -0.017045127227902412, 0.020823603495955467, -0.022730832919478416, -0.012942780740559101, -0.01351854857057333, 0.00942819844931364, 0.005829649046063423, -0.0073530348017811775, -0.007448996417224407, 0.0030602659098803997, -0.005700701382011175, 0.023798402398824692, -0.008510568179190159, -0.009416203014552593, 0.01315869390964508, 0.04495787248015404, -0.002982297446578741, 0.02384638413786888, 0.027253009378910065, 0.02052372321486473, 0.03337054327130318, -0.0017677871510386467, 0.0013756952248513699, -0.019084304571151733, -0.016505343839526176, -0.02679719403386116, 0.007880821824073792, -0.03569760546088219, 0.026821184903383255, 0.022730832919478416, -0.025837581604719162, 0.02138737589120865, 0.014981958083808422, 0.05292265862226486, -0.032386939972639084, 0.009680096060037613, 0.036945100873708725, 0.010249867103993893, 0.023726431652903557, 0.08434998244047165, 0.02593354322016239, -0.0002162877790397033, 0.0012444981839507818, 0.007215090561658144, 0.009728076867759228, -0.017117097973823547, 0.006237484514713287, 0.028572477400302887, 0.028116662055253983, 0.0399199016392231, 0.00719709787517786, 0.009596130810678005, 0.00022509672271553427, 0.04490989074110985, -0.02252691611647606, 0.015389794483780861, -0.019348198547959328, -0.010423796251416206, 0.006075549870729446, 0.04066360369324684, 0.025981523096561432, 0.023102683946490288, -0.02878839150071144, 0.011149504221975803, 0.003796469187363982, 0.04008783400058746, -0.023438548669219017, -0.021831195801496506, -0.012654896825551987, -0.02360648103058338, -0.02052372321486473, -0.013794437050819397, -0.023066697642207146, -0.005673712119460106, 0.0024020313285291195, 0.017213059589266777, 0.0009378718095831573, -0.0432305671274662, -0.00680725509300828, -0.033946312963962555, -0.014442176558077335, -0.0033646433148533106, 0.014694074168801308, 0.011083530262112617, -0.00807274505496025, -0.011341426521539688, 0.024973928928375244, -0.00294031435623765, 0.03337054327130318, -0.027253009378910065, -0.015425779856741428, -0.012319032102823257, 0.020799612626433372, -0.0022236034274101257, -0.02347453311085701, -0.004318258725106716, -0.010615719482302666, 0.0013314631069079041, -0.0016418378800153732, -0.033706407994031906, -0.007898814976215363, -0.012235065922141075, -0.041839130222797394, 0.016457363963127136, 0.024014316499233246, -0.016841208562254906, 0.02674921415746212, 0.048052623867988586, -0.04735690355300903, -0.012798839248716831, -0.04375835508108139, 0.015449769794940948, 0.0073410398326814175, 0.0009783555287867785, 0.015761643648147583, -0.020679660141468048, -0.02859646826982498, -0.0161574836820364, -0.004465199541300535, -0.013566529378294945, 0.0035325754433870316, -0.024734025821089745, 0.015929576009511948, 0.007580942939966917, 0.022490929812192917, 0.02864445000886917, 0.0006844740128144622, -0.0034785971511155367, -0.04044768959283829, -0.03164324164390564, -0.03560164198279381, -0.018448561429977417, 0.01132943108677864, -0.0029088270384818316, -0.03284275531768799, 0.013482563197612762, 0.016133494675159454, -0.003829455701634288, 0.039943892508745193, 0.005721692927181721, 0.014286238700151443, 0.03476198390126228, 0.0689002126455307, 0.041551243513822556, -0.04490989074110985, 0.009943990036845207, -0.013326626271009445, 0.012810833752155304, -0.007982781156897545, -0.007448996417224407, -0.006261474918574095, -0.01373446173965931, -0.027492914348840714, 0.037424907088279724, 0.000646989094093442, 0.023594485595822334, -0.00023128173779696226, 0.004774075001478195, 0.02746892347931862, -0.012702877633273602, -0.011779249645769596, 0.050955452024936676, 0.03349049389362335, 0.06722089648246765, -0.009578137658536434, -0.022406963631510735, 0.034618038684129715, -0.0036315356846898794, 0.025789599865674973, -0.020655671134591103, 0.02028382010757923, 0.05944802612066269, -0.01261891145259142, -0.019887980073690414, -0.010705683380365372, 0.010651704855263233, -0.03303467854857445, 0.02000793255865574, 0.018520532175898552, -0.013122708536684513, -0.00942819844931364, 0.0027663845103234053, 0.01582162082195282, -0.0025639659725129604, 0.007155114784836769, -0.031187424436211586, -0.007736880332231522, 0.03999187424778938, 0.026917146518826485, -0.018268633633852005, 0.011299443431198597, 0.016745246946811676, -0.005007980391383171, -0.016901183873414993, 0.0056407256051898, -0.029436130076646805, -0.011161498725414276, -0.06693300604820251, 0.0036945100873708725, 0.03226698935031891, 0.02394234575331211, 0.023774413391947746, -0.034378137439489365, -0.017404980957508087, -0.006969189736992121, 0.02004391700029373, 0.009134316816926003, -0.030563674867153168, 0.05493784695863724, -0.0031247399747371674, -0.014694074168801308, 0.08862026035785675, -0.0037125030066818, -0.041647206991910934, 0.008702490478754044, -0.029915936291217804, 0.0190123338252306, 0.012355017475783825, -0.006387424189597368, -0.051099393516778946, 0.026101473718881607, 0.006084546446800232, 0.0146101089194417, -0.024362176656723022, -0.031115451827645302, 0.007389020174741745, -0.025501716881990433, -0.01487400196492672, 0.019875984638929367, -0.0016913180006667972, -0.025573687627911568, -0.012966771610081196, 0.02423022873699665, 0.01772885024547577, -0.023918354883790016, -0.00824067648500204, 0.03807264566421509, 0.02442215196788311, 0.005907617975026369, -0.01004594936966896, 0.0021426358725875616, 0.04855642095208168, 0.025765610858798027, 0.0010150906164199114, -0.042270954698324203, 0.018496541306376457, -0.0064713903702795506, 0.023954341188073158, -0.0077068922109901905, 0.001164280460216105, 0.0019522127695381641, 0.010849624872207642, -0.006393421906977892, 0.011035549454391003, -0.009937992319464684, -0.006603337358683348, -0.008300652727484703, -0.018448561429977417, -0.015185876749455929, 0.0030527689959853888, -0.020967544987797737, 0.01477804034948349, -0.015893591567873955, -0.008918403647840023, -0.019120289012789726, -0.0018367592711001635, -0.00413533253595233, -0.0023450544103980064, 0.027396952733397484, -0.0020526722073554993, 0.011773252859711647, -0.011659298092126846, 0.004351245239377022, 0.0019267230527475476, 0.014802031219005585, 0.010771656408905983, -0.00020504232088569552, 0.010477774776518345, 0.014334219507873058, -0.011113518849015236, -0.015329818241298199, -0.0015803626738488674, 0.004252285230904818, 0.030875548720359802, -0.02689315564930439, -0.025645658373832703, 0.005709697492420673, 0.0018202660139650106, 0.01463409885764122, 0.02347453311085701, 0.025741619989275932, 0.027253009378910065, -0.007119129411876202, -0.012678887695074081, -0.02490195818245411, -0.039943892508745193, 0.026341378688812256, -0.052106987684965134, 0.03416222333908081, -0.014106311835348606, -0.03766481205821037, -0.043782345950603485, 0.00401538098230958, 0.013602514751255512, -0.022119080647826195, 0.008258669637143612, 0.020871583372354507, 0.003205707296729088, -0.009026359766721725, 0.002842853544279933, 0.0019177267095074058, -0.002424522303044796, 0.013386601582169533, 0.004558161832392216, 0.025429746136069298, 0.005490785930305719, -0.007922804914414883, 0.008132720366120338, 0.03387434035539627, -0.06755676120519638, 0.012181088328361511, -0.025597678497433662, -0.026101473718881607, -0.007892817258834839, 0.0044142198748886585, 0.0003383010916877538, -0.013350616209208965, 0.01453813724219799, -0.019372187554836273, -0.008396614342927933, -0.006885223556309938, -0.004078355617821217, 0.00011001813254551962, -0.02775680646300316, -0.013230664655566216, 0.01766887493431568, 0.0030362755060195923, 0.031811174005270004, -0.019504135474562645, 0.02646132931113243, 0.025717629119753838, 0.02499791979789734, -0.016661280766129494, 0.013386601582169533, -0.014838016591966152, -0.0002792623999994248, 0.00821668654680252, 0.006903216242790222, 0.00515492120757699, 0.03833654150366783, 0.02655729092657566, -0.025165852159261703, 0.005949600599706173, 0.0073410398326814175, -0.0012857315596193075, -0.0033166625071316957, 0.03411424160003662, 0.005607738625258207, 0.03473799303174019, 0.026293396949768066, 0.016889190301299095, -0.024026311933994293, 0.01429823413491249, -0.020679660141468048, 0.007862829603254795, -0.022922756150364876, 0.007562950253486633, -0.020499734207987785, 0.03337054327130318, -0.008408608846366405, -0.015269841998815536, -0.0025834583211690187, 0.05498582869768143, 0.009584135375916958, 0.022215042263269424, -0.037424907088279724, -0.013890398666262627, -0.03212304785847664, -0.0043692379258573055, 0.0019507133401930332, 0.010207884013652802, 0.0055777509696781635, -0.0003508585214149207, 0.07216290384531021, -0.03164324164390564, 0.015461765229701996, -0.013842417858541012, -0.010957580991089344, 0.038744375109672546, -0.003048270707949996, -0.016133494675159454, 0.026965126395225525, 0.02238297462463379, -0.017213059589266777, -0.020415768027305603, -0.01867646910250187, 0.030707616358995438, -0.043638404458761215, 0.013242660090327263, -0.05397823452949524, 0.0018832405330613256, -0.0019941958598792553, 0.00016109128773678094, -0.013482563197612762, 0.0027618862222880125, 0.015713663771748543, 0.05968793109059334, 0.0007294558454304934, -0.025885561481118202, 0.00329567096196115, -0.008084739558398724, -0.028908342123031616, 0.016637291759252548, 0.0016703264554962516, -0.007113131694495678, 0.024314194917678833, 0.0089124059304595, 0.028428535908460617, -0.0049600000493228436, -0.02888435311615467, 0.013050736859440804, -0.03274679556488991, 0.004750084597617388, 0.007377025205641985, 0.0019792017992585897, -0.005862636025995016, -0.019708052277565002, 0.03140333667397499, 0.021039515733718872, -0.0013239660765975714, 0.024973928928375244, 0.007227085530757904, 0.019899975508451462, -0.02399032562971115, 0.0028683433774858713, -0.044118210673332214, -0.010447787120938301, -0.006327448412775993, 0.0299399271607399, -0.04073557257652283, -0.019899975508451462, -0.03449808806180954, 0.003457605605944991, -0.012223071418702602, 0.03920019418001175, 0.0030017895624041557, -0.0046211364679038525, 0.006126529537141323, 0.046061426401138306, 0.0023975332733243704, -0.033418525010347366, 0.0294601209461689, 0.021735236048698425, 0.018652478232979774, 0.0017647882923483849, -0.017560917884111404, 0.003970399033278227, 0.032674822956323624, 0.007676904089748859, 0.02883637137711048, -0.04191109910607338, 0.01639738865196705, 0.01957610622048378, 0.0021381378173828125, 0.00791081041097641, 0.011473373509943485, 0.038744375109672546, -0.0117612574249506, -0.05023574084043503, 0.009152309037744999, 0.04327854886651039, -0.025477726012468338, 0.007071148604154587, 0.0037574847228825092, 0.029436130076646805, 0.015017944388091564, -0.01337460707873106, -0.015569721348583698, -0.0037904714699834585, 0.0033106650225818157, 0.015437774360179901, 0.02864445000886917, -0.025669649243354797, -0.006615332327783108, -0.019756034016609192, -0.0012932284735143185, -0.026101473718881607, 0.02883637137711048, 0.011095525696873665, -0.020679660141468048, -0.03140333667397499, 0.01867646910250187, 0.003244691528379917, 0.013446577824652195, 0.018016735091805458, -0.014226263388991356, -0.02347453311085701, 0.016181474551558495, -0.038984280079603195, 0.03193112462759018, -0.021627278998494148, 0.008948391303420067, -0.020991535857319832, 0.012510955333709717, 0.025693638250231743, 0.03771279379725456, 0.030947521328926086, 0.028860362246632576, 0.012558935210108757, -0.014826021157205105, 0.009284256026148796, 0.009710084646940231, -0.009824038483202457, 0.006120531819760799, 0.017345005646348, -0.020703651010990143, -0.0131826838478446, -0.0038084641564637423, -0.014466166496276855, -0.006171511486172676, 0.005466795526444912, -0.03197910264134407, 0.02607748471200466, -0.0007320797885768116, 0.022167060524225235, 0.003961402457207441, -0.018652478232979774, -0.01439419575035572, 0.01981600932776928, -0.01792077347636223, -0.00048542924923822284]
metadata : {"source": "pydantic_ai_docs", "crawled_at": "2025-03-15T11:17:04.794211", "url_path": "/api/agent/", "chunk_size": 4994}
updated_dt: 2025-03-15T11:17:04.795223
---
'
          '(Even when `override(model=...)` is customizing the model that will actually be called)'
        )
      model_ = some_model.value
    elif model is not None:
      model_ = models.infer_model(model)
    elif self.model is not None:
      # noinspection PyTypeChecker
      model_ = self.model = models.infer_model(self.model)
    else:
      raise exceptions.UserError('`model` must be set either when creating the agent or when calling it.')
    instrument = self.instrument
    if instrument is None:
      instrument = self._instrument_default
    if instrument and not isinstance(model_, InstrumentedModel):
      if instrument is True:
        instrument = InstrumentationSettings()
      model_ = InstrumentedModel(model_, instrument)
    return model_
  def_get_deps(self: Agent[T, ResultDataT], deps: T) -> T:
"""Get deps for a run.
    If we've overridden deps via `_override_deps`, use that, otherwise use the deps passed to the call.
    We could do runtime type checking of deps against `self._deps_type`, but that's a slippery slope.
    """
    if some_deps := self._override_deps:
      return some_deps.value
    else:
      return deps
  def_infer_name(self, function_frame: FrameType | None) -> None:
"""Infer the agent name from the call frame.
    Usage should be `self._infer_name(inspect.currentframe())`.
    """
    assert self.name is None, 'Name already set'
    if function_frame is not None: # pragma: no branch
      if parent_frame := function_frame.f_back: # pragma: no branch
        for name, item in parent_frame.f_locals.items():
          if item is self:
            self.name = name
            return
        if parent_frame.f_locals != parent_frame.f_globals:
          # if we couldn't find the agent in locals and globals are a different dict, try globals
          for name, item in parent_frame.f_globals.items():
            if item is self:
              self.name = name
              return
  @property
  @deprecated(
    'The `last_run_messages` attribute has been removed, use `capture_run_messages` instead.', category=None
  )
  deflast_run_messages(self) -> list[_messages.ModelMessage]:
    raise AttributeError('The `last_run_messages` attribute has been removed, use `capture_run_messages` instead.')
  def_build_graph(
    self, result_type: type[RunResultDataT] | None
  ) -> Graph[_agent_graph.GraphAgentState, _agent_graph.GraphAgentDeps[AgentDepsT, Any], FinalResult[Any]]:
    return _agent_graph.build_agent_graph(self.name, self._deps_type, result_type or self.result_type)
  def_prepare_result_schema(
    self, result_type: type[RunResultDataT] | None
  ) -> _result.ResultSchema[RunResultDataT] | None:
    if result_type is not None:
      if self._result_validators:
        raise exceptions.UserError('Cannot set a custom run `result_type` when the agent has result validators')
      return _result.ResultSchema[result_type].build(
        result_type, self._result_tool_name, self._result_tool_description
      )
    else:
      return self._result_schema # pyright: ignore[reportReturnType]
  @staticmethod
  defis_model_request_node(
    node: _agent_graph.AgentNode[T, S] | End[result.FinalResult[S]],
  ) -> TypeGuard[_agent_graph.ModelRequestNode[T, S]]:
"""Check if the node is a `ModelRequestNode`, narrowing the type if it is.
    This method preserves the generic parameters while narrowing the type, unlike a direct call to `isinstance`.
    """
    return isinstance(node, _agent_graph.ModelRequestNode)
  @staticmethod
  defis_call_tools_node(
    node: _agent_graph.AgentNode[T, S] | End[result.FinalResult[S]],
  ) -> TypeGuard[_agent_graph.CallToolsNode[T, S]]:
"""Check if the node is a `CallToolsNode`, narrowing the type if it is.
    This method preserves the generic parameters while narrowing the type, unlike a direct call to `isinstance`.
    """
    return isinstance(node, _agent_graph.CallToolsNode)
  @staticmethod
  defis_user_prompt_node(
    node: _agent_graph.AgentNode[T, S] | End[result.FinalResult[S]],
  ) -> TypeGuard[_agent_graph.UserPromptNode[T, S]]:
"""Check if the node is a `UserPromptNode`, narrowing the type if it is.
    This method preserves the generic parameters while narrowing the type, unlike a direct call to `isinstance`.
    """
    return isinstance(node, _agent_graph.UserPromptNode)
  @staticmethod
  defis_end_node(
    node: _agent_graph.AgentNode[T, S] | End[result.FinalResult[S]],
  ) -> TypeGuard[End[result.FinalResult[S]]]:
"""Check if the node is a `End`, narrowing the type if it is.
    This method preserves the generic parameters while narrowing the type, unlike a direct call to `isinstance`.
    """
    return isinstance(node, End)

```
  
---|---  
####  model `instance-attribute`
```
model: Model[](https://ai.pydantic.dev/api/models/base/#pydantic_ai.models.Model "pydantic_ai.models.Model") | KnownModelName[](https://ai.pydantic.dev/api/models/base/#pydantic_ai.models.KnownModelName "pydantic_ai.models.KnownModelName") | None