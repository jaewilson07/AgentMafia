---
url: https://ai.pydantic.dev/api/agent/
session_id: pydantic_ai_docs
chunk_number: 22
title: Run Function Documentation
summary: This section outlines the parameters for the 'run' function, which includes user input ('user_prompt'), optional result type ('result_type'), message history, and model specifications. It specifies data types and potential values for these parameters, guiding users on how to effectively implement the function.
embedding: [-0.01792895793914795, 0.04722030088305473, -0.026118729263544083, -0.02272477000951767, -0.014503378421068192, 0.020247813314199448, 0.022577207535505295, 0.025507396087050438, 0.03140993416309357, -0.012437490746378899, -0.029702413827180862, -0.024179324507713318, 0.010477004572749138, -0.037839483469724655, -0.0254441536962986, -0.028943516314029694, -0.025106865912675858, -0.0033491631038486958, -0.006239825859665871, -0.004034279379993677, 0.02259828709065914, -0.010972396470606327, 0.005017157178372145, 0.015894690528512, -0.038240011781454086, 0.013923665508627892, -0.05826647952198982, 0.04401606693863869, -0.015620645135641098, 0.022682609036564827, -0.017855176702141762, -0.014071228913962841, -0.024706337600946426, -0.02683546580374241, 0.02561279758810997, -0.039462681859731674, -0.011267523281276226, -0.0015718141803517938, -0.016284679993987083, 0.015936851501464844, 0.009818239137530327, -0.06180800125002861, 0.047431107610464096, 0.02058510109782219, -0.013343951664865017, 0.03659573569893837, 0.008210851810872555, 0.023546909913420677, 0.03545738756656647, -0.02902783825993538, -0.05603194981813431, 0.022977735847234726, 0.01804490201175213, 0.02162858471274376, -0.020279433578252792, -0.02757328376173973, 0.016695749014616013, -0.0009809016482904553, -0.037080585956573486, -0.037902723997831345, 0.0025612798053771257, -0.012911801226437092, 0.002732558874413371, 0.029913218691945076, -0.014608780853450298, 0.029238643124699593, 0.016284679993987083, 0.04239286854863167, -0.028817033395171165, -0.004321500658988953, 0.050972629338502884, 0.030398068949580193, -0.04426903277635574, -0.017971118912100792, -0.023567989468574524, -0.00974445790052414, 0.03081967867910862, 0.042413949966430664, 0.0033517982810735703, -0.03678545728325844, 0.0037470574025064707, -0.007241148967295885, -0.0014795870520174503, 0.020838066935539246, 0.0057760546915233135, -0.03324393555521965, -0.06227177381515503, -0.011783994734287262, -0.0033491631038486958, -0.06779485940933228, 0.00924906600266695, 0.030145103111863136, 0.010856453329324722, 0.07597409188747406, 0.059868596494197845, 0.056917328387498856, -0.010455924086272717, 0.01479850523173809, 0.01745464839041233, 0.03290664777159691, 0.039863210171461105, -0.030777517706155777, -0.01514633372426033, 0.006819539237767458, -0.008621920831501484, 0.00890123751014471, 0.007546816021203995, 0.02104887180030346, -0.02242964319884777, -0.036342769861221313, -0.03659573569893837, 0.03145209327340126, -0.015915771946310997, 0.02959701046347618, -0.0578027106821537, -0.0358579158782959, 0.009138393215835094, -0.06349444389343262, 0.009971072897315025, -0.031894784420728683, -0.024158243089914322, 0.02660358138382435, -0.010081745684146881, -0.009554733522236347, 0.024790659546852112, 0.020437536761164665, -0.04608195647597313, -0.04485928639769554, -0.01924648880958557, 0.011098879389464855, 0.015525782480835915, 0.0029117430094629526, -0.013143686577677727, 0.01546254102140665, -0.01585252955555916, -0.0009130488033406436, -0.04197125881910324, -0.0005691733094863594, -0.05383957549929619, 0.031072644516825676, -0.0179184190928936, -0.01306990534067154, -0.034719571471214294, 0.03313853219151497, -0.01613711751997471, 0.041549649089574814, -0.06336796283721924, 0.05168936774134636, -0.05291203409433365, 0.013828802853822708, 0.02601332776248455, 0.01901460438966751, -0.03374986723065376, -0.013523135334253311, -0.00812125951051712, 0.004013198893517256, 0.01758113130927086, -0.0035388877149671316, -0.01318584755063057, -0.042477190494537354, -0.011425626464188099, 0.02896459586918354, -0.03630060702562332, -0.03906215354800224, -0.012300467118620872, -0.05156288295984268, -0.0005744434311054647, 0.0028669468592852354, -0.024137163534760475, -0.03438228368759155, -0.018951361998915672, 0.017538970336318016, -0.03185262531042099, 0.004250354133546352, 0.03948376327753067, -0.0187932588160038, -0.0630306750535965, -0.009849860332906246, -0.022703690454363823, -0.0422031469643116, -0.02115427330136299, -0.005119924433529377, -0.015694426372647285, -0.012395329773426056, -0.046925175935029984, 0.0034940915647894144, -0.00286167673766613, 0.009960532188415527, 0.006086992099881172, 0.016200358048081398, 0.04983428493142128, 0.012500732205808163, 0.04043238237500191, -0.014545539394021034, -0.013270169496536255, -0.016400622203946114, 0.06948130577802658, -0.013249089010059834, 0.04388958588242531, 0.028121376410126686, 0.010076475329697132, -0.004374202340841293, 0.02850082516670227, -0.0038656352553516626, 0.02498038299381733, -0.05476711690425873, -0.013249089010059834, -0.0061133429408073425, -0.028817033395171165, 0.018340028822422028, 0.0254441536962986, -0.02890135534107685, 0.03225315362215042, -0.014809045940637589, -0.032927729189395905, 0.003957862500101328, -0.035120099782943726, -0.0013768196804448962, -0.025950085371732712, 0.015620645135641098, 0.027552202343940735, 0.016548186540603638, -0.011288603767752647, -0.038767024874687195, 0.013112066313624382, 0.02382095530629158, -0.009022451005876064, -0.04167613387107849, 0.008737863972783089, 0.03552062809467316, -0.006392659153789282, -0.024095002561807632, -0.02445337176322937, -0.01613711751997471, 0.04022157937288284, -0.025233348831534386, 0.05034021660685539, 0.02462201565504074, 0.031367771327495575, -0.03490929678082466, 0.0007121253875084221, 0.008384766057133675, 0.05573682114481926, 0.0049723610281944275, 0.03387635201215744, 0.023230701684951782, 0.017971118912100792, -0.03324393555521965, 0.046503566205501556, 0.03741787374019623, 0.03693302348256111, -0.0017365055391564965, -0.006751027423888445, -0.032400716096162796, -0.015641724690794945, -0.0021278122439980507, -0.012026420794427395, -0.00021574566198978573, -0.03218991309404373, -0.01653764583170414, 0.029765654355287552, -0.003781313309445977, 0.010761591605842113, 0.0427934005856514, -0.00888015702366829, -0.01390258502215147, 0.0013451989507302642, -0.04785271733999252, 0.006034290883690119, -0.04140208661556244, 0.010856453329324722, -0.028290020301938057, 0.014809045940637589, -0.03891458734869957, -0.05586330592632294, 0.013417732901871204, 0.030798599123954773, 0.02445337176322937, -0.021185895428061485, -0.006503331940621138, -0.03880918771028519, 0.06176584213972092, 0.01000269316136837, 0.042582593858242035, -0.017359785735607147, 0.009343927726149559, 0.02797381393611431, -0.036975182592868805, 0.01335449144244194, 0.018055440858006477, 0.00956527329981327, -0.0012509954394772649, 0.03400283306837082, -0.0031436283607035875, 0.013480974361300468, -0.05358660966157913, 0.04557602480053902, 0.020047547295689583, -0.016442783176898956, 0.010714160278439522, 0.006582383532077074, 0.0034993616864085197, 0.033033132553100586, -0.033265016973018646, 0.024874981492757797, 0.04087507352232933, -0.0213967002928257, -0.014598241075873375, 0.021407239139080048, -0.016400622203946114, -0.03151533752679825, 0.08191879093647003, -0.009006639942526817, -0.011246442794799805, 0.020711584016680717, -0.0016666763694956899, 0.030714277178049088, -0.008137069642543793, 0.0187932588160038, 0.013523135334253311, -0.025528475642204285, 0.010687809437513351, 0.03602655977010727, 0.011847236193716526, -0.029280804097652435, -0.00826355256140232, 0.021776149049401283, -0.0014058053493499756, -0.02850082516670227, 0.049918606877326965, -0.018224084749817848, -0.043552298098802567, -0.021417779847979546, 0.011889397166669369, 0.05164720490574837, 0.010598217137157917, -0.02289341390132904, 0.01781301572918892, 0.035583872348070145, 0.0624404177069664, -0.03547846898436546, -0.012585054151713848, -0.03842973709106445, -0.012859100475907326, 0.013617997989058495, 0.053923897445201874, 0.027214914560317993, 0.02637169510126114, 0.0005573155358433723, 0.02982889674603939, 0.03608980402350426, 0.029575930908322334, 0.020911848172545433, 0.012005340307950974, -0.013913124799728394, -0.016316300258040428, -0.024432290345430374, 0.007393982727080584, -0.045407380908727646, 0.012374249286949635, -0.04979212209582329, -0.02445337176322937, -0.001415028003975749, 0.003164708847180009, -0.025191187858581543, -0.007393982727080584, -0.036848701536655426, 0.0005079081165604293, -0.0028089755214750767, 0.020342674106359482, 0.03398175165057182, 0.028817033395171165, -0.0017286003567278385, -0.020205652341246605, -0.002748369239270687, -0.03221099078655243, -0.05059318244457245, -0.0023438872303813696, 0.027657605707645416, 0.050087250769138336, 0.04941267520189285, 0.015473080798983574, -0.010397952981293201, 0.006429550237953663, 0.018361108377575874, 0.023441506549715996, -0.008195041678845882, -0.017159519717097282, -0.003465106012299657, 0.017486268654465675, 0.06290418654680252, -0.055062245577573776, -0.03368662670254707, 0.009844589978456497, -0.02763652428984642, 0.039167553186416626, -0.004571831785142422, 0.006856429856270552, 0.029006756842136383, 0.014556080102920532, 0.0159052312374115, -0.004906484391540289, -0.005138369742780924, 0.04953915625810623, 0.0187827181071043, -0.0182135459035635, 0.04053778573870659, -0.022513965144753456, 0.020627262070775032, 0.02850082516670227, 0.06265122443437576, 0.012026420794427395, 0.0034519305918365717, -0.033560141921043396, -0.0018405904993414879, -0.034951455891132355, 0.018192464485764503, -0.017654912546277046, 0.04017941653728485, 0.08246688544750214, -0.023905277252197266, -0.08895967900753021, -0.003275381401181221, 0.020848607644438744, -0.02156534418463707, 0.04781055450439453, 0.06400037556886673, -0.025739280506968498, 0.0006175925373099744, -0.0006837984547019005, 0.03602655977010727, 0.02567603997886181, 0.021196434274315834, 0.010455924086272717, -0.029765654355287552, -0.04785271733999252, 0.010050124488770962, 0.006281986832618713, -0.003299097064882517, -0.0007200305699370801, 0.03617412596940994, -0.04317284747958183, 0.03267476335167885, 0.05729677900671959, -0.024284727871418, 0.010297819972038269, -0.034951455891132355, -0.017823556438088417, 0.020100248977541924, -0.045702505856752396, -0.018540292978286743, -0.01338611263781786, -0.059531308710575104, -0.02022673189640045, -0.07154718786478043, -0.02953376993536949, 0.06690948456525803, 0.02694086916744709, 0.03400283306837082, 0.03878810629248619, 0.019910525530576706, -0.004260894376784563, -0.01607387512922287, 0.019109467044472694, -0.027025191113352776, 0.026624660938978195, -0.017486268654465675, 0.012268846854567528, -0.019330810755491257, 0.032168831676244736, 0.01303828414529562, -0.024938222020864487, 0.021175354719161987, 0.00559160066768527, -0.013860424049198627, -0.020089708268642426, -0.0022964561358094215, 0.03507794067263603, 0.007531005889177322, -0.0013741846196353436, 0.037902723997831345, 0.020479697734117508, 0.044142551720142365, 0.02521226927638054, -0.03912539407610893, 0.012669376097619534, -0.006023750640451908, -0.01862461492419243, -0.04464848339557648, 0.021175354719161987, 0.05468279495835304, -0.00959689449518919, 0.012542893178761005, -0.007420333102345467, 0.07327578961849213, 0.02266152948141098, 0.013776101171970367, 0.015483621507883072, -0.028985677286982536, -0.005602140910923481, -0.0387459434568882, 0.025929005816578865, -4.26138867624104e-05, 0.05881457403302193, 0.0037707730662077665, -0.003799758618697524, 0.02301989682018757, 0.029322965070605278, 0.012806398794054985, 0.04776839539408684, -0.03735463321208954, -0.008448007516562939, 0.02219775877892971, 0.013407193124294281, -0.012553432956337929, 0.01861407421529293, -0.007098855916410685, 0.00959689449518919, 0.0017365055391564965, -0.011098879389464855, 0.018519211560487747, -0.00042358614155091345, -0.006176584400236607, -0.021059412509202957, -0.004094885662198067, 0.0012015880784019828, 0.03826109319925308, -0.041549649089574814, -0.0008886745199561119, -0.005256947595626116, 0.008226661942899227, 0.023336105048656464, -0.0019934240262955427, 0.04806352034211159, -0.00747303431853652, 0.02162858471274376, 0.0030171454418450594, 0.04300420358777046, -0.040790751576423645, -0.014155550859868526, -0.013765561394393444, 0.0011034320341423154, -0.03434012085199356, 0.015799829736351967, -0.008843266405165195, 0.03345474228262901, 0.04751542955636978, -0.019415132701396942, 0.024495532736182213, -0.020732663571834564, 0.03530982509255409, 0.021523183211684227, 0.04011617600917816, -0.028648389503359795, 0.045407380908727646, 0.0010355791309848428, -0.036216285079717636, -0.013301790691912174, 0.01920432783663273, -0.027025191113352776, -0.015473080798983574, -0.00588145712390542, 0.024284727871418, -0.014524458907544613, -0.006308337207883596, 0.014102849178016186, 0.031304530799388885, -0.029301883652806282, -0.02677222527563572, 0.016896015033125877, 0.022745851427316666, 0.03204234689474106, 0.004700949881225824, -0.028985677286982536, 0.034719571471214294, -0.0387459434568882, 0.042118825018405914, 0.006276716478168964, -0.046798691153526306, 0.04844297096133232, -0.005104114301502705, -0.04363662004470825, 0.0143136540427804, 0.03075643815100193, 0.005238502286374569, -0.006255635991692543, -0.047388944774866104, 0.0012865688186138868, -0.008521788753569126, -9.354468056699261e-05, -0.009307037107646465, -0.018592994660139084, 0.02508578635752201, 0.0009044848848134279, -0.0375865176320076, 0.01827678643167019, -0.0010711525101214647, -0.010835372842848301, -0.04184477776288986, 0.014429597184062004, 0.044142551720142365, 0.00685115996748209, -0.013112066313624382, 0.031093725934624672, 0.03752327710390091, -0.008036937564611435, 0.035921160131692886, 0.015757668763399124, -0.03927295655012131, -0.02190263196825981, -0.000494732812512666, -0.03942051902413368, -0.020500779151916504, -0.006065911613404751, -0.009902561083436012, 0.016263600438833237, -0.024411210790276527, 0.027763009071350098, 0.05632707476615906, -0.016063334420323372, 0.01262721512466669, 0.039399441331624985, 0.0057444339618086815, 0.031030483543872833, 0.00319369463250041, -0.020722122862935066, -0.03383418917655945, 0.011752374470233917, 0.01015025656670332, 0.0451122522354126, -0.058013513684272766, -0.002444019541144371, 0.02388419769704342, 0.01607387512922287, -0.03364446386694908, -0.023315023630857468, -0.011309684254229069, -0.02664574235677719, -0.01262721512466669, -0.010408492758870125, 0.01416609063744545, 0.018940821290016174, -0.026118729263544083, -0.008332064375281334, -0.014376895502209663, 0.008674622513353825, -0.01809760183095932, 0.0054493071511387825, 0.028585147112607956, -0.021133193746209145, -0.04814784228801727, -0.02088022790849209, 0.007541546132415533, -0.02468525618314743, 0.002964444225654006, 0.003101467387750745, 0.00041864538798108697, 0.024832820519804955, -0.020448077470064163, -0.001533605856820941, 0.0044137281365692616, -0.010461194440722466, 0.0007035614107735455, -0.008869617246091366, -0.020079169422388077, 0.022113436833024025, 0.0030803869012743235, 0.03444552421569824, 0.0416128933429718, 0.008358415216207504, -0.04494360834360123, -0.005623221397399902, 0.02641385607421398, 0.014566619880497456, 0.0012865688186138868, -0.004585007205605507, 0.001266805804334581, -0.015019850805401802, -0.003209504997357726, 0.00396313238888979, -0.021291296929121017, -0.017254382371902466, -0.028247859328985214, 0.0710834190249443, 0.05312284082174301, -0.01705411821603775, 0.008753674104809761, -0.001470364280976355, 0.02717275358736515, 0.046461403369903564, -0.017644371837377548, -0.025465235114097595, -0.016674669459462166, 0.030503472313284874, -0.0052727581933140755, 0.014545539394021034, 0.016748450696468353, 0.018013279885053635, 0.010845913551747799, -0.03046131134033203, -0.02508578635752201, 0.005855106748640537, 0.0007318883435800672, 0.015810368582606316, -0.0008675940334796906, -0.019815662875771523, -0.03307529166340828, -0.008105449378490448, 0.004930200055241585, -0.004985536448657513, -0.01323854923248291, 0.0051225596107542515, -0.04011617600917816, 0.015504701994359493, 0.008943398483097553, -0.010313631035387516, -0.021249135956168175, 0.026055488735437393, 0.00683534936979413, -0.0016495485324412584, -0.02723599597811699, 0.0007990823942236602, 0.0076838391833007336, 0.02070104330778122, -0.0016627238364890218, -0.03739679232239723, 0.015936851501464844, 0.03463524952530861, -0.01838218979537487, 0.025465235114097595, 0.0022635178174823523, -0.05071966350078583, 0.0063399579375982285, -0.024474451318383217, -0.04789487645030022, -0.022977735847234726, -0.003781313309445977, 0.025064704939723015, 0.00747303431853652, -0.028817033395171165, -0.007504655048251152, -0.022387482225894928, -0.020595639944076538, -0.0286273080855608, 0.0028010704554617405, -0.01885649934411049, -0.021755067631602287, 0.04195018112659454, -0.006324147805571556, 5.5995056754909456e-05, -0.03819785267114639, 0.0032068698201328516, 0.0034150397405028343, 0.0034044994972646236, 0.029786735773086548, 0.024305807426571846, 0.018287327140569687, -0.01641116291284561, -0.07188447564840317, 0.04426903277635574, -0.014903907664120197, -0.0009413757361471653, -0.002440067008137703, 0.015915771946310997, -0.011488867923617363, -0.01948891580104828, 0.04979212209582329, 0.016337381675839424, -0.01913054659962654, -0.007241148967295885, -0.021818310022354126, -0.004237178713083267, -0.01758113130927086, 0.019330810755491257, 0.01815030351281166, -0.04764191061258316, 0.026561420410871506, -0.014724723994731903, 0.008332064375281334, -0.020722122862935066, -0.005354444961994886, 0.01920432783663273, -0.021206974983215332, -0.022450724616646767, 0.02955484949052334, -0.01636900193989277, -0.0023992236237972975, -0.011109419167041779, -0.04224530607461929, -0.0013979001669213176, -0.06509655714035034, -0.028015974909067154, 0.019214868545532227, 0.003907796461135149, 0.00991310179233551, 0.009665405377745628, 0.006946022156625986, -0.031536415219306946, 0.017317624762654305, 0.00873259361833334, -0.0219658724963665, 0.017549509182572365, -0.022851252928376198, -0.009180554188787937, 0.012985583394765854, -0.02664574235677719, 0.015030390582978725, 0.02394743822515011, 0.0025678675156086683, -0.009227985516190529, -0.015420380048453808, -0.003971037920564413, -0.015873610973358154, 0.021776149049401283, -0.029280804097652435, 0.05017157271504402, -0.026329534128308296, -0.03632168844342232, -0.014735263772308826, -0.06117558851838112, 0.021818310022354126, -0.0008939446415752172, -0.01769707351922989, -0.027025191113352776, 0.02816353738307953, 0.013691779226064682, -0.020142409950494766, -0.040664270520210266, -0.008047478273510933, -0.004458524286746979, -0.020838066935539246, -0.02630845457315445, 0.036342769861221313, -0.0009921006858348846, 0.043552298098802567, -0.0002070170157821849, -0.0213967002928257, 0.020163491368293762, -0.014324194751679897, 0.027214914560317993, 0.015030390582978725, 0.030840760096907616, -0.01292234193533659, -0.008142339996993542, 0.016284679993987083, 0.017654912546277046, 0.03638492897152901, 0.007188447751104832, 0.02335718460381031, -0.005607410799711943, -0.010756321251392365, 0.04041130468249321, 0.012816939502954483, -0.03267476335167885, 0.014503378421068192, 0.008890697732567787, 0.007873564027249813, -0.004002658650279045, -0.007815592922270298, -0.014650941826403141, -0.031473174691200256, -0.006629814859479666, 0.011467787437140942, -0.03347581997513771, 0.010708889923989773, 0.01710681989789009, -0.02272477000951767, -0.04873809963464737, 0.010566596873104572, -0.018361108377575874, -0.007272769697010517, 0.033033132553100586, -0.004187112674117088, 0.016031714156270027, 0.011583730578422546, 0.012985583394765854, 0.0046139927580952644, 0.0647171139717102, -0.015810368582606316, 0.049159709364175797, 0.027594363316893578, -0.034487683326005936, 0.013839343562722206, -0.010629838332533836, -0.012163444422185421, -0.02012133039534092, 0.0005662088515236974, 0.009797158651053905, -0.011984259821474552, -0.000501649861689657, -0.021881550550460815, -0.037038423120975494, -0.006714136805385351, -0.0039367820136249065, 0.041317764669656754, 0.0022490250412374735, -0.008131800219416618, 0.03389742970466614, -0.00022052171698305756, -0.021607505157589912, 0.030376989394426346, -0.0375865176320076, 0.02769976668059826, -0.0312202088534832, -0.00832152459770441, 0.010408492758870125, 0.04041130468249321, 0.005754974205046892, 0.011899937875568867, -0.03779732063412666, 0.014029067941009998, -0.016210898756980896, 0.018982982262969017, 0.06855376064777374, -0.051141273230314255, -0.04011617600917816, -0.0015480986330658197, -0.027278156951069832, 0.035647112876176834, 0.02046915702521801, 0.010608757846057415, 0.004503319971263409, 0.01635846123099327, -0.019278110936284065, -0.02826894074678421, -0.04169721528887749, 0.02052185870707035, -0.000944010796956718, 0.04637708142399788, -0.03046131134033203, 0.0013135782210156322, -0.027889491990208626, 0.009818239137530327, 0.007446683943271637, -0.04005293548107147, -0.020964549854397774, -0.03670113533735275, -0.008247742429375648, 0.006476981099694967, 0.032400716096162796, -0.013280710205435753, -0.06197664514183998, -0.0017259652959182858, 0.02873271144926548, 0.00022134516621008515, 0.0036627354566007853, 0.011415086686611176, -0.022450724616646767, -0.0034914566203951836, 0.018234625458717346, 0.02982889674603939, -0.024537693709135056, 0.015567943453788757, -0.011141040362417698, 0.0004104108375031501, -0.01844543032348156, 0.0111304996535182, -0.007088315673172474, 0.027046270668506622, 0.01448229793459177, 0.017844635993242264, 0.00927541684359312, -0.02527550980448723, -0.0045006852596998215, 0.008173961192369461, -0.02468525618314743, -0.018455971032381058, -0.02521226927638054, 0.01675899140536785, -0.000490780221298337, -0.011699672788381577, 0.03868270292878151, 0.0508883073925972, 0.025296591222286224, -0.004895944148302078, 0.007936805486679077, 0.05776054784655571, 0.01147832814604044, 0.05198449268937111, 0.0219658724963665, -0.007636408321559429, 0.0057128132320940495, 0.029618091881275177, -0.00036561477463692427, -0.0020118695683777332, -0.024790659546852112, -0.022071275860071182, 0.022408563643693924, 0.014345275238156319, 0.016727371141314507, 0.005512548610568047, -0.030440229922533035, 0.029301883652806282, 0.026329534128308296, -0.031030483543872833, -0.007288580294698477, -0.01856137253344059, -0.0036653706338256598, 0.012658835388720036, -0.015199034474790096, -0.011056718416512012, 0.016463864594697952, 0.035351984202861786, 0.014724723994731903, -0.012848559767007828, -0.028184618800878525, 0.0025204364210367203, -0.03965240716934204, 0.010013233870267868, -0.009059341624379158, 5.7847832977131475e-06, 0.02683546580374241, 0.02209235541522503, -0.0176232922822237, -0.006661435589194298, -0.02746788039803505, -0.011098879389464855, -0.022113436833024025, -0.007320201024413109, -0.0011152897495776415, 0.014724723994731903, 0.001458506565541029, -0.007525735534727573, 0.001722012646496296, -0.006766838021576405, 0.035288743674755096, 0.01718060113489628, -0.001292497618123889, -0.006561303045600653, -0.01838218979537487, -0.014914448373019695, 0.029048917815089226, -0.0036284797824919224, 0.012595593929290771, -0.02850082516670227, 0.026160890236496925, 0.008985559456050396, 0.018529752269387245, 0.015567943453788757, -0.03254827857017517, -0.005960509181022644, 0.024769578129053116, 0.029006756842136383, 0.005214786622673273, 0.04053778573870659, 0.006498061586171389, -0.027214914560317993, -0.016917094588279724, 0.01147832814604044, 0.01781301572918892, -0.007509925402700901, 0.013027744367718697, -0.012173984199762344, 0.030798599123954773, 0.025423074141144753, -0.02335718460381031, 0.025865763425827026, -0.0017299179453402758, 0.0254441536962986, -0.021196434274315834, 0.005612681154161692, -0.026392776519060135, -0.0024058111011981964, 0.008110719732940197, 0.02335718460381031, 0.036448169499635696, 0.014524458907544613, -0.015072551555931568, -0.020205652341246605, 0.03545738756656647, 0.012121283449232578, -0.023778794333338737, -0.004582372028380632, -0.019351892173290253, -0.009175283834338188, -0.009270146489143372, 0.0036811809986829758, -0.015820909291505814, 0.011467787437140942, -0.026961948722600937, 0.0069671026431024075, 0.019320271909236908, 0.013776101171970367, 0.003599493997171521, -0.034719571471214294, 0.00043840837315656245, 0.004029009025543928, 0.04675653204321861, 0.00685115996748209, -0.015420380048453808, 0.0060448311269283295, 0.031030483543872833, -0.0046456134878098965, 0.033623386174440384, 0.01861407421529293, -0.009965802542865276, -0.011246442794799805, 0.01211074274033308, 0.014545539394021034, -0.01585252955555916, -0.024305807426571846, 0.04011617600917816, 0.012838019989430904, 0.008885427378118038, -0.014935528859496117, 0.005844566505402327, 0.009881480596959591, -0.06775270402431488, -0.028711630031466484, 0.008895968087017536, 0.011267523281276226, 0.007873564027249813, 0.015525782480835915, -0.024095002561807632, -0.009902561083436012, -0.03208450973033905, 0.0076574888080358505, -0.009965802542865276, 0.024790659546852112, -0.004426903557032347, -0.028037054464221, -0.006529682315886021, 0.0035573330242186785, -0.014861746691167355, 0.025191187858581543, 0.01144670695066452, -0.042582593858242035, 0.03345474228262901, 0.002447972074151039, -0.018982982262969017, 0.024790659546852112, -0.03630060702562332, -0.001337952446192503, -0.033918511122465134, -0.011415086686611176, -0.010097555816173553, -0.015536322258412838, -0.01659034751355648, -0.01647440530359745, -0.0071568270213902, -0.013280710205435753, 0.013154227286577225, -0.013691779226064682, -0.01758113130927086, 0.012321547605097294, 0.030904000625014305, 0.04456416144967079, 0.05843512341380119, 0.011583730578422546, -0.0014255682472139597, 0.014229332096874714, -0.0106930797919631, -0.007077775429934263, -0.006513872183859348, 0.005512548610568047, 0.00020059406233485788, -0.015536322258412838, -0.013449354097247124, 0.020764285698533058, -0.01421879231929779, 0.023209622129797935, 0.010529706254601479, 0.01999484747648239, 0.010419033467769623, 0.01718060113489628, 0.027594363316893578, -0.012321547605097294, 0.01477742474526167, 0.07070396840572357, 0.01225830614566803, -0.002050077775493264, 0.0026034407783299685, 0.030039701610803604, 0.010192417539656162, -0.03712274506688118, 0.038935668766498566, 0.03029266744852066, 0.02329394407570362, -0.015884151682257652, -0.0030303208623081446, 0.01862461492419243, -0.06859592348337173, 0.007557356264442205, 0.013312330469489098, -0.0031699789687991142, 0.005225326865911484, 0.018867040053009987, 0.013438813388347626, 0.011731293983757496, 0.011805075220763683, -0.02613981068134308, 0.0030039700213819742, 0.006524412427097559, 0.026814386248588562, -0.01751788891851902, 0.028121376410126686, -0.020911848172545433, 0.012553432956337929, -0.0018577183363959193, 0.0064400904811918736, -0.03069319576025009, 0.003117277752608061, -0.040095094591379166, -0.01205804105848074, 0.03855622187256813, -0.01914108730852604, 0.024095002561807632, -0.01020822860300541, 0.00843746680766344, 0.015167414210736752, 0.04028481990098953, 0.012953962199389935, -0.02236640267074108, -0.01164697203785181, 0.01601063460111618, -0.02734139747917652, 0.07614273577928543, -0.03476173058152199, -0.025001464411616325, -0.0007977648638188839, -0.0248539000749588, 0.015325517393648624, 0.02388419769704342, 0.001454553916119039, -0.021407239139080048, 0.032695844769477844, 0.03670113533735275, 0.020595639944076538, -0.030145103111863136, -0.008042207919061184, -0.00830044411122799, -0.012342628091573715, -0.016221439465880394, 0.014967149123549461, 0.02468525618314743, -0.014134470373392105, 0.025971166789531708, 0.034255798906087875, 0.0127220768481493, 0.02382095530629158, 0.012648295611143112, -0.004337311256676912, 0.040727511048316956, 0.017022497951984406, 0.0009901244193315506, -0.031135886907577515, 0.001880116411484778, -0.007430873345583677, 0.005623221397399902, -0.009380819275975227, 0.004545480944216251, -0.013544215820729733, 0.03244287893176079, -0.022745851427316666, 0.004845878109335899, 0.007826132699847221, -0.0034308501053601503, -0.013417732901871204, -0.004869593773037195, -0.012205605395138264, 0.0060711819678545, 0.007747080642729998, -0.049286190420389175, -0.004176572430878878, 0.04612411558628082, -0.03191586583852768, -0.029575930908322334, -0.00971283670514822, -0.001967073418200016, 0.0044637941755354404, 0.027510041370987892, -5.669499660143629e-05, 0.00038900095387361944, 0.02953376993536949, -0.04195018112659454, 0.006276716478168964, 0.002018457045778632, 0.01831894740462303, 0.0020369025878608227, 0.03313853219151497, -0.01595793291926384, -0.0007608740124851465, 0.0067035965621471405, -0.017823556438088417, -0.04030590131878853, 0.013059364631772041, -0.023083139210939407, -0.011952638626098633, 0.05274339020252228, -0.007446683943271637, -0.01653764583170414, -0.025697119534015656, -0.03111480548977852, -0.0002677881275303662, 0.021080492064356804, 0.017201680690050125, -0.004740475676953793, -0.02763652428984642, -0.004938105121254921, 0.010877533815801144, 0.013291249983012676, 0.009649595245718956, -0.027994893491268158, 0.0023900007363408804, 0.003907796461135149, -0.0352676622569561, -0.0017035672208294272, 0.0036601005122065544, 0.0017602210864424706, 0.022577207535505295, -0.010218768380582333, -0.005114654544740915, 0.019731340929865837, 0.03132561221718788, 0.010466464795172215, 0.0046139927580952644, 0.02422148548066616, 0.018930282443761826, -0.023315023630857468, 0.011868316680192947, -0.001955215586349368, 0.02955484949052334, 0.0027272887527942657, -0.004737840499728918, -0.006208205129951239, 0.002101461635902524, -0.027847331017255783, -0.009212175384163857, -0.03041915036737919, 0.002192371292039752, -0.011046177707612514, 0.006413739640265703, -0.004998711869120598, -0.003889350686222315, -0.01159427035599947, -0.011193741112947464, -0.012785318307578564, -2.9397404432529584e-05, -0.0468408539891243, 0.003480916377156973, 0.005733893718570471, -0.007246419321745634, 0.03733355179429054, -0.02041645720601082, -0.03838757798075676, 0.0370173454284668, 0.02209235541522503, -0.0082424720749259, 0.007425603456795216, -0.016147656366229057, -0.007773431483656168, 0.00748884491622448, 0.013744480907917023, 0.004347851499915123, 0.022745851427316666, 0.002242437331005931, -0.018466511741280556, -0.0156101044267416, 0.03450876474380493, -0.012911801226437092, -0.02301989682018757, 0.047431107610464096, 0.007715459913015366, 0.01983674243092537, 0.008195041678845882, -0.0020803811494261026, -0.009654865600168705, 0.013396652415394783, 0.013565296307206154, -0.006592923775315285, -0.01479850523173809, -0.0026508718729019165, -0.017127899453043938, -0.0034598358906805515, 0.026856547221541405, -0.03006078116595745, -0.022914495319128036, 0.04561818391084671, 0.008390035480260849, 0.046925175935029984, -0.02081698551774025, -0.01231100782752037, -0.021091032773256302, -0.035056859254837036, -0.018371649086475372, 0.03733355179429054, -0.008748404681682587, -0.015378219075500965, 0.05818215757608414, -0.05126775801181793, 0.007710190024226904, -0.026498178020119667, -0.0030882922001183033, 0.040959395468235016, -0.011899937875568867, -0.025170108303427696, -0.028985677286982536, 0.03779732063412666, 0.012764237821102142, -0.04781055450439453, -0.02527550980448723, 0.004648248665034771, -0.025170108303427696, -0.008648271672427654, -0.038872428238391876, -0.01526227593421936, 0.026287373155355453, -0.007114666048437357, -0.025233348831534386, 0.0007878834148868918, 0.027678687125444412, -0.01601063460111618, 0.014102849178016186, -0.003473011078312993, -0.03794488683342934, -0.019562697038054466, 0.002774719847366214, 0.026434937492012978, 0.008347874507308006, -0.009433520026504993, 0.001636373228393495, -0.015009310096502304, 0.01683277264237404, 0.015167414210736752, -0.05324932187795639, -0.016200358048081398, -0.012521812692284584, -0.04578682780265808, 0.03554170951247215, -0.0032384905498474836, -0.007947345264256, -0.022282080724835396, 0.023799875751137733, 0.00525958277285099, 0.0006627179682254791, 0.02630845457315445, -0.020195111632347107, 0.020205652341246605, -0.01477742474526167, 0.03250611945986748, -0.05632707476615906, -0.002006599446758628, -0.009011910296976566, 0.018803799524903297, -0.016200358048081398, -0.052532587200403214, -0.02030051313340664, -0.035014696419239044, 0.012511271983385086, 0.043678779155015945, 0.002967079170048237, -0.010361061431467533, 0.01031890045851469, -0.026287373155355453, 0.0024071286898106337, -0.048991065472364426, 0.025359831750392914, 0.012353168800473213, -0.0329698882997036, 0.024896061047911644, -0.0381346121430397, 0.0179184190928936, 0.03748111426830292, 0.005230597220361233, -0.0036943561863154173, -0.029322965070605278, 0.006208205129951239, 0.014408516697585583, 0.020711584016680717, 0.016558727249503136, -0.0012035643449053168, 0.0047088549472391605, 0.020426996052265167, -0.04308852553367615, 0.023083139210939407, 0.026034407317638397, -0.025971166789531708, -0.004893309436738491, 0.016516566276550293, 0.0309250820428133, -0.0011027732398360968, 0.006898590829223394, 0.023610150441527367, -0.006197664886713028, 0.004511225502938032, 0.0352676622569561, 0.010661458596587181, -0.021670745685696602, -0.006492791697382927, 0.02329394407570362, 0.013786641880869865, 0.012448030523955822, 0.02116481401026249, -0.010940775275230408, -0.03507794067263603, -0.031241290271282196, -0.03377094864845276, -0.016147656366229057, 0.03754435479640961, 0.03632168844342232, 0.03838757798075676, 0.014303114265203476, 0.0045006852596998215, -0.009844589978456497, 0.05687516927719116, -0.004166032187640667, 0.04890674352645874, -0.029744574800133705, -0.01497768983244896, -0.03214775025844574, 0.003704896429553628, -0.01665358804166317, 0.03741787374019623, 0.013733940199017525, 0.033033132553100586, 0.027214914560317993, -0.013027744367718697, -0.017423026263713837, -0.002719383453950286, 0.012437490746378899, -0.03746003285050392, -0.02209235541522503, -0.020679961889982224, -0.0016179278027266264, -0.021649666130542755, -0.010429573245346546, -0.05978427454829216, 0.013523135334253311, -0.028817033395171165, 0.017823556438088417, -0.007520465645939112, 0.001446648733690381, -0.007799782324582338, -0.024010680615901947, -0.021818310022354126, -0.042983122169971466]
metadata : {"source": "pydantic_ai_docs", "crawled_at": "2025-03-15T11:17:06.060957", "url_path": "/api/agent/", "chunk_size": 4880}
updated_dt: 2025-03-15T11:17:06.060957
---
```
run(
  user_prompt: str[](https://docs.python.org/3/library/stdtypes.html#str) | Sequence[](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "collections.abc.Sequence")[UserContent],
  *,
  result_type: type[](https://docs.python.org/3/library/functions.html#type)[RunResultDataT[](https://ai.pydantic.dev/api/agent/#pydantic_ai.agent.RunResultDataT "pydantic_ai.agent.RunResultDataT")] | None = None,
  message_history: list[](https://docs.python.org/3/library/stdtypes.html#list)[ModelMessage[](https://ai.pydantic.dev/api/messages/#pydantic_ai.messages.ModelMessage "pydantic_ai.messages.ModelMessage")] | None = None,
  model: Model[](https://ai.pydantic.dev/api/models/base/#pydantic_ai.models.Model "pydantic_ai.models.Model") | KnownModelName[](https://ai.pydantic.dev/api/models/base/#pydantic_ai.models.KnownModelName "pydantic_ai.models.KnownModelName") | None = None,
  deps: AgentDepsT[](https://ai.pydantic.dev/api/tools/#pydantic_ai.tools.AgentDepsT "pydantic_ai.tools.AgentDepsT") = None,
  model_settings: ModelSettings[](https://ai.pydantic.dev/api/settings/#pydantic_ai.settings.ModelSettings "pydantic_ai.settings.ModelSettings") | None = None,
  usage_limits: UsageLimits[](https://ai.pydantic.dev/api/usage/#pydantic_ai.usage.UsageLimits "pydantic_ai.usage.UsageLimits") | None = None,
  usage: Usage[](https://ai.pydantic.dev/api/usage/#pydantic_ai.usage.Usage "pydantic_ai.usage.Usage") | None = None,
  infer_name: bool[](https://docs.python.org/3/library/functions.html#bool) = True
) -> AgentRunResult[](https://ai.pydantic.dev/api/agent/#pydantic_ai.agent.AgentRunResult "pydantic_ai.agent.AgentRunResult")[Any[](https://docs.python.org/3/library/typing.html#typing.Any "typing.Any")]

```

Run the agent with a user prompt in async mode.
This method builds an internal agent graph (using system prompts, tools and result schemas) and then runs the graph to completion. The result of the run is returned.
Example: 
```
frompydantic_aiimport Agent
agent = Agent('openai:gpt-4o')
async defmain():
  agent_run = await agent.run('What is the capital of France?')
  print(agent_run.data)
  #> Paris

```

Parameters:
Name | Type | Description | Default  
---|---|---|---  
`user_prompt` |  `str[](https://docs.python.org/3/library/stdtypes.html#str) | Sequence[](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence "collections.abc.Sequence")[UserContent]` |  User input to start/continue the conversation. |  _required_  
`result_type` |  `type[](https://docs.python.org/3/library/functions.html#type)[RunResultDataT[](https://ai.pydantic.dev/api/agent/#pydantic_ai.agent.RunResultDataT "pydantic_ai.agent.RunResultDataT")] | None` |  Custom result type to use for this run, `result_type` may only be used if the agent has no result validators since result validators would expect an argument that matches the agent's result type. |  `None`  
`message_history` |  `list[](https://docs.python.org/3/library/stdtypes.html#list)[ModelMessage[](https://ai.pydantic.dev/api/messages/#pydantic_ai.messages.ModelMessage "pydantic_ai.messages.ModelMessage")] | None` |  History of the conversation so far. |  `None`  
`model` |  `Model[](https://ai.pydantic.dev/api/models/base/#pydantic_ai.models.Model "pydantic_ai.models.Model") | KnownModelName[](https://ai.pydantic.dev/api/models/base/#pydantic_ai.models.KnownModelName "pydantic_ai.models.KnownModelName") | None` |  Optional model to use for this run, required if `model` was not set when creating the agent. |  `None`  
`deps` |  `AgentDepsT[](https://ai.pydantic.dev/api/tools/#pydantic_ai.tools.AgentDepsT "pydantic_ai.tools.AgentDepsT")` |  Optional dependencies to use for this run. |  `None`  
`model_settings` |  `ModelSettings[](https://ai.pydantic.dev/api/settings/#pydantic_ai.settings.ModelSettings "pydantic_ai.settings.ModelSettings") | None` |  Optional settings to use for this model's request. |  `None`  
`usage_limits` |  `UsageLimits[](https://ai.pydantic.dev/api/usage/#pydantic_ai.usage.UsageLimits "pydantic_ai.usage.UsageLimits") | None` |  Optional limits on model request count or token usage. |  `None`  
`usage` |  `Usage[](https://ai.pydantic.dev/api/usage/#pydantic_ai.usage.Usage "pydantic_ai.usage.Usage") | None` |  Optional usage to start with, useful for resuming a conversation or agents used in tools. |  `None`  
`infer_name` |  `bool[](https://docs.python.org/3/library/functions.html#bool)` |  Whether to try to infer the agent name from the call frame if it's not set. |  `True`  
Returns:
Type | Description  
---|---  
`AgentRunResult[](https://ai.pydantic.dev/api/agent/#pydantic_ai.agent.AgentRunResult "pydantic_ai.agent.AgentRunResult")[Any[](https://docs.python.org/3/library/typing.html#typing.Any "typing.Any")]` |  The result of the run.  
Source code in `pydantic_ai_slim/pydantic_ai/agent.py`