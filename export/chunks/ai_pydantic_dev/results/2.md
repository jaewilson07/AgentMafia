---
url: https://ai.pydantic.dev/results/
session_id: pydantic_ai_docs
chunk_number: 2
title: Result Validators in PydanticAI
summary: This section describes how to implement validation functions in PydanticAI using the `agent.result_validator` decorator, particularly for asynchronous IO operations that cannot be handled by standard validators. It includes a simplified example related to SQL generation with class definitions for success and error responses.
embedding: [0.03811453655362129, 0.033109862357378006, 0.008264295756816864, -0.011872927658259869, 0.01789829134941101, -0.0044712801463902, -0.00042309239506721497, 0.00461615202948451, 0.011161737143993378, 0.01958407461643219, -0.005995729938149452, -0.026208681985735893, -0.015764718875288963, -0.011253928765654564, -0.006068165879696608, 0.01671297289431095, -0.023627324029803276, 0.009074262343347073, 0.0006939044687896967, 0.05344463884830475, 0.03990568220615387, -0.02037428691983223, 0.025523832067847252, 0.011484406888484955, -0.003776552388444543, 0.00759261567145586, -0.03463760390877724, 0.09556291252374649, -0.014553061686456203, -0.037271641194820404, -0.009390346705913544, -0.012854106724262238, -0.013776020146906376, -0.03174016252160072, -0.0061669424176216125, -0.007816508412361145, 0.02794714644551277, 0.04888775199651718, 0.007269945926964283, -0.0047972421161830425, 0.043329931795597076, -0.03187186270952225, 0.026959381997585297, 0.024167301133275032, -0.002675195224583149, 0.06421785801649094, 0.005692815408110619, 0.016449568793177605, 0.036428749561309814, 0.030502164736390114, -0.041354402899742126, 0.02641940489411354, -0.012564362958073616, -0.039089128375053406, -0.006795818917453289, -0.016778824850916862, -0.048914093524217606, -0.0006428699707612395, -0.031107991933822632, -0.05362902209162712, -0.007072392851114273, -0.004339578095823526, -0.021138157695531845, 0.00596609665080905, -0.02979097329080105, 0.01298580877482891, -0.04675418138504028, 0.004194706212729216, -0.0040465411730110645, 0.020045030862092972, 0.024233153089880943, -0.0005572637310251594, -0.02929050661623478, 0.010391280986368656, -0.03469028323888779, -0.04177584871649742, 0.04464694857597351, 0.07333162426948547, 0.007092148065567017, -0.026551106944680214, 0.0011252282420173287, 0.004207876045256853, -0.01619933545589447, 0.02324538864195347, -0.0071119037456810474, 0.0042440942488610744, -0.07354234904050827, -0.002110523171722889, -0.016791993752121925, -0.02918514423072338, -0.015672527253627777, 0.03582292050123215, -0.007836263626813889, 0.020624520257115364, 0.057316675782203674, 0.005485384725034237, 0.01128685474395752, -0.026274532079696655, 0.013736509718000889, 0.009686675854027271, 0.030686546117067337, -0.017516354098916054, -0.052865151315927505, -0.0009194440208375454, 0.05386608466506004, -0.0046589551493525505, 0.006993371993303299, 0.022481517866253853, -0.05473531782627106, -0.056368421763181686, -0.06516610831022263, 0.005472214426845312, -0.004734683781862259, 0.020282095298171043, -0.04203925281763077, -0.006239378359168768, -0.019610416144132614, -0.03764040768146515, 0.012524852529168129, 0.027552040293812752, -0.02844761498272419, 0.005126497242599726, -0.02630087360739708, 0.009100602008402348, -0.0001667881297180429, -0.007467498537153006, 0.0015532594406977296, -0.05041549354791641, -0.042987506836652756, -0.029264165088534355, 0.034295178949832916, 0.0088898791000247, 0.031345054507255554, -0.007974551059305668, -0.013176776468753815, 0.008507943712174892, -0.04475231096148491, -0.013512616977095604, -0.007842849008738995, 0.02296881377696991, -0.06179453805088997, -0.04633273556828499, -0.005327342543751001, 0.003063715761527419, -0.009278399869799614, -0.005149545148015022, -0.01733197271823883, 0.02105913683772087, -0.04522643983364105, -0.010364941321313381, 0.03131871670484543, 0.050547197461128235, -0.09487806260585785, 0.009976420551538467, -0.06780014932155609, -0.004043248947709799, 0.004945407155901194, 0.04820290207862854, 0.00982496328651905, -0.055104080587625504, -0.02144107222557068, 0.03371569141745567, -0.033900074660778046, -0.019966010004281998, -0.022204943001270294, -0.06479734182357788, -0.004240801557898521, -0.0147901251912117, -0.04854532703757286, -0.028816379606723785, -0.00931132584810257, 0.002662024926394224, -0.03382105380296707, 0.015369613654911518, 0.03200356662273407, -0.03561219945549965, -0.07696659862995148, -0.07269945740699768, -0.014750614762306213, -0.07296286523342133, -0.025879425927996635, 0.0067760637030005455, -0.032319650053977966, -0.04786047711968422, -0.0012042494490742683, -0.014236977323889732, 0.007533349562436342, -0.017516354098916054, -0.002036440884694457, 0.0317138209939003, 0.008198444731533527, 0.06421785801649094, 0.019373351708054543, 0.017450504004955292, -0.01664712280035019, -0.025036534294486046, 0.04904579371213913, 0.03974763676524162, 0.005999022163450718, 0.019281160086393356, 0.03832525759935379, 0.043198227882385254, 0.0018026699544861913, -0.03358398750424385, 0.006934105884283781, -0.03329424560070038, -0.013696999289095402, 0.008824028074741364, -0.08697594702243805, -0.03216160833835602, 0.028368592262268066, -0.03042314201593399, 0.011965119279921055, -0.019281160086393356, 0.0031855402048677206, -0.006614728830754757, -0.05062621831893921, -0.005152837373316288, 0.0037469195667654276, -0.0031295667868107557, -0.018701672554016113, 0.056368421763181686, 0.009252059273421764, -0.027499360963702202, -0.021427901461720467, 0.01958407461643219, 0.01501401886343956, 0.004227631725370884, -0.006565340794622898, 0.0434616319835186, 0.03239867091178894, -0.024404365569353104, 0.00646327156573534, -0.042750440537929535, 0.04040614888072014, -0.0714351162314415, 0.003063715761527419, 0.03629704937338829, 0.01688418537378311, -0.016528591513633728, -0.03837793692946434, 0.005538065452128649, 0.040327128022909164, 0.04064321145415306, 0.013591637834906578, 0.003262914950028062, -0.016396889463067055, -0.05117936432361603, 0.04435720667243004, 0.06816891580820084, 0.03516441211104393, -0.03724530339241028, -0.0178324393928051, -0.010766631923615932, -0.0336366705596447, -0.048281922936439514, -0.03274109587073326, -0.031634800136089325, -0.026709148660302162, -0.005778421647846699, 0.025247257202863693, 0.024180471897125244, -0.0792318731546402, 0.0133216492831707, 0.020216243341565132, -0.022323474287986755, 0.021915199235081673, -0.023061005398631096, 0.04375137761235237, -0.05175885185599327, 0.028684677556157112, 0.04011640325188637, -0.0017022473039105535, -0.012722405605018139, -0.03387373313307762, 0.01727929152548313, 0.01626518741250038, 0.039247170090675354, 0.014658423140645027, -0.0032695000991225243, 0.004866385832428932, 0.017121249809861183, 0.008817443624138832, 0.01602812297642231, -0.013091170229017735, 0.01117490790784359, 0.03289913758635521, -0.03376837074756622, 0.011240758933126926, 0.008725252002477646, 0.02894808165729046, 0.013394084759056568, -0.0001899388589663431, -0.038009174168109894, 0.04577958583831787, -0.01987381838262081, 0.05473531782627106, 0.03234599158167839, 0.0030867636669427156, 0.0216781347990036, -0.007981136441230774, 0.004165072925388813, -0.021823007613420486, 0.006423761136829853, -0.0006815574015490711, 0.043883077800273895, -0.026630127802491188, -0.0133216492831707, 0.02365366369485855, -0.022586878389120102, 0.003178955055773258, 0.05826492980122566, -0.058054205030202866, -0.007671636529266834, -0.030976291745901108, -0.05436655133962631, 0.04064321145415306, -0.021006455644965172, 0.047280989587306976, -0.01716076023876667, -0.0295802503824234, -0.012709234841167927, 0.04375137761235237, 0.0023673418909311295, -0.0413280613720417, 0.0009564851643517613, -0.002166496589779854, -0.029869994148612022, 0.0038852065335959196, 0.014526721090078354, -0.022270794957876205, -0.03584926202893257, -0.020703541114926338, 0.028289571404457092, -0.008402582257986069, -0.03466394543647766, -0.0376930870115757, 0.03087092936038971, 0.0026735488791018724, 0.06564023345708847, -0.033610329031944275, -0.010687610134482384, -0.03413713723421097, -0.0138813816010952, 0.0005712570855394006, -0.022942474111914635, 0.03350496664643288, 0.04064321145415306, -0.02030843496322632, -0.020637691020965576, 0.010364941321313381, -0.001924494281411171, 0.02308734692633152, 0.019109947606921196, 0.026537936180830002, -0.020058201625943184, -0.007263360545039177, 0.00945619773119688, -0.009265230037271976, -0.01320970244705677, -0.05268076807260513, -0.0039082542061805725, -0.016633952036499977, -2.7420750484452583e-05, -0.015843739733099937, 0.023680005222558975, -0.029949015006422997, -0.031292375177145004, -0.020124053582549095, 0.006907765753567219, 0.014632082544267178, 0.029106123372912407, 0.008481603115797043, 0.034400541335344315, -0.017476843670010567, -0.01275533065199852, -0.05484067648649216, 0.03695555776357651, 0.0017730370163917542, 0.053418297320604324, 0.01997918076813221, 0.042197294533252716, -0.016831504181027412, -0.027868125587701797, 0.020558670163154602, 0.06974933296442032, -0.010213484056293964, 0.014065764844417572, -0.006311814300715923, 0.0375877283513546, 0.033162541687488556, -0.035190753638744354, -0.013058245182037354, 0.012570948339998722, 0.011840002611279488, 0.041117340326309204, -0.0011433372274041176, 0.00865940097719431, 0.03579658269882202, -0.02116449736058712, 0.017463674768805504, 0.013104340992867947, -0.02285028249025345, 0.0187411829829216, 0.016805164515972137, 0.03013339824974537, 0.015962272882461548, -0.014697933569550514, 0.0208747535943985, 0.01134612038731575, 0.018161693587899208, -0.039247170090675354, 0.01290020253509283, -0.06774746626615524, -0.019109947606921196, -0.04267141968011856, 0.0014997555408626795, 0.025418469682335854, 0.04469963163137436, 0.08613305538892746, -0.03418981656432152, -0.06079360470175743, -0.010108121670782566, -0.01590959168970585, -0.008185273967683315, 0.05310221388936043, 0.05715863034129143, -0.050652556121349335, -0.005877198185771704, -0.015106209553778172, -0.030449483543634415, 0.00017388768901582807, 0.04678051918745041, -0.006186697632074356, -0.01255777757614851, 0.019096778705716133, 0.01264338381588459, -0.006041825283318758, -0.007210679817944765, -0.022652730345726013, 0.024259492754936218, -0.00897548533976078, -0.03403177484869957, 0.03031778149306774, -0.06585095822811127, 0.013552127406001091, -0.02200739085674286, 0.006390835624188185, 0.03371569141745567, -0.015764718875288963, 0.017990481108427048, 0.022534197196364403, -0.032425012439489365, -0.03174016252160072, -0.01498767826706171, -0.05773812159895897, 0.058897096663713455, 0.038246236741542816, 0.03753504529595375, -0.01290020253509283, -0.01069419551640749, 0.00016205509018618613, -0.029869994148612022, 0.015053529292345047, -0.030344121158123016, -0.010364941321313381, 0.03985299915075302, 0.022955644875764847, -0.0078494343906641, 0.00028418804868124425, 0.006473149172961712, 0.013394084759056568, 0.0008470079628750682, 0.015079869888722897, 0.001967297401279211, -0.017542695626616478, 0.0531812347471714, 0.005735618527978659, 0.002844761358574033, 0.015817400068044662, 0.03303084149956703, -0.011760980822145939, -0.007928455248475075, 0.03271475434303284, -0.035138070583343506, 0.04491035267710686, 0.0009194440208375454, -0.05631573870778084, -0.0051725925877690315, 0.019044097512960434, 0.0038259406574070454, 0.013473106548190117, 0.0396159365773201, -0.015093039721250534, 0.011984874494373798, -0.0023673418909311295, -0.04601664841175079, 0.022152261808514595, 0.03695555776357651, -0.011998044326901436, -0.0031608459539711475, -0.018820203840732574, -0.025273598730564117, 0.03990568220615387, 0.05355000123381615, -0.024061940610408783, 0.009903984144330025, -0.005590746179223061, 0.013170192018151283, 0.045858606696128845, -0.025642363354563713, -0.005110034253448248, 0.04061686992645264, 0.015079869888722897, 0.003931302111595869, 0.009219134226441383, -0.0028743944130837917, 0.0043823812156915665, -0.028236890211701393, 0.008685741573572159, 0.0006564517389051616, -0.006568633019924164, 0.01608080416917801, -0.0002901557891163975, -0.009983005002140999, -0.00507710874080658, 0.003681068541482091, -0.033663008362054825, 0.005666474811732769, -0.03476930782198906, 0.018319737166166306, 0.006680579856038094, 0.026906700804829597, 0.018754353746771812, -0.021480582654476166, -0.028184210881590843, 0.0035460740327835083, 0.003878621384501457, -0.007704562041908503, -0.006176820024847984, -0.020624520257115364, 0.009364006109535694, -0.04498937353491783, 0.019175799563527107, 0.0035197336692363024, 0.014855976216495037, 0.04880873113870621, -0.011853172443807125, -0.013723339885473251, 0.011826831847429276, 0.031107991933822632, -0.0006366964662447572, 0.019952841103076935, -0.021651795133948326, 0.006901180371642113, 0.02399608865380287, -0.018372416496276855, 0.031134333461523056, -0.02495751343667507, -0.013288723304867744, -0.00897548533976078, 0.005472214426845312, 0.02602429874241352, 0.006828744430094957, -0.027183275669813156, 0.03843061998486519, 0.05700058862566948, 0.02262638881802559, -0.030633866786956787, 0.034295178949832916, -0.0006025362526997924, 0.026893531903624535, 0.00911377277225256, 0.013262382708489895, 0.0138813816010952, -0.00016215798677876592, 0.0019854065030813217, 0.001573014771565795, -0.045305460691452026, 0.03487466648221016, -0.01743733324110508, -0.043487973511219025, 0.036428749561309814, 0.021967880427837372, -0.014302828349173069, 0.0010602003894746304, 0.00046754180220887065, 0.0037139940541237593, 0.018886055797338486, 0.004731391556560993, 0.030054377391934395, 0.0044712801463902, -0.01710807904601097, 0.016054464504122734, -0.035980962216854095, 0.007809923496097326, 0.017371483147144318, -0.01889922469854355, -0.0531812347471714, -0.0029929261654615402, 0.055104080587625504, -0.016186164692044258, -0.013565297238528728, 0.031345054507255554, 0.029211485758423805, 0.0238643866032362, -0.006601558532565832, 0.01834607683122158, -0.011477822437882423, -0.00371070159599185, -0.013058245182037354, -0.02460191771388054, -0.015553995966911316, -0.03656045347452164, -0.014526721090078354, -0.0020084541756659746, -0.06063556298613548, 0.053128551691770554, 0.0590551383793354, -0.019030926749110222, -0.02742033824324608, 0.02224445343017578, 0.01659444160759449, 0.019096778705716133, 0.026498425751924515, 0.0034143722150474787, -0.01936018094420433, -0.0019969302229583263, -0.03935253247618675, 0.030897269025444984, -0.006841914728283882, 0.018214374780654907, 0.03421615809202194, 0.030633866786956787, 0.011049791239202023, -0.009666920639574528, 0.011734641157090664, -0.02370634488761425, -0.02466776967048645, -0.02285028249025345, 0.048229243606328964, 0.023903897032141685, 0.020453307777643204, 0.0004926474648527801, -0.00042021143599413335, -0.02030843496322632, -0.018978245556354523, 0.034295178949832916, 0.016410058364272118, -0.027446679770946503, -0.018596310168504715, -0.022758090868592262, 0.03397909551858902, -0.00561708677560091, -0.0073884776793420315, -0.032135266810655594, -0.021717645227909088, -0.004063004162162542, -0.03368934988975525, 0.005597331561148167, -0.03787747025489807, 0.02997535653412342, 0.002640623366460204, -0.006311814300715923, -0.03350496664643288, 0.041117340326309204, 0.013670658692717552, 0.007355552166700363, 0.014526721090078354, -0.010252994485199451, -0.02325855940580368, -0.03811453655362129, 0.030791908502578735, -0.018306566402316093, 0.03142407909035683, -0.015172060579061508, -0.0031493220012634993, -0.039879340678453445, -0.008791103027760983, 0.04917749762535095, -0.0039148395881056786, 0.02597161754965782, -0.062163304537534714, 0.008692326955497265, 0.007098733447492123, -0.038694024085998535, 0.004253971856087446, 0.0030011574272066355, 0.0070131272077560425, 0.05283880978822708, 0.0013935709139332175, -0.03471662476658821, -0.0025402007158845663, 0.009377176873385906, 0.025589682161808014, 0.01230095885694027, -0.005179177969694138, 0.008777933195233345, -0.018016822636127472, -0.0592658631503582, -0.01476378459483385, -0.013440180569887161, -0.008205029182136059, -0.010397866368293762, -0.00739506259560585, -0.007691391743719578, -0.01936018094420433, 0.011905853636562824, 0.03071288764476776, -0.018872885033488274, -0.030897269025444984, 0.003045606892555952, 0.0004498443740885705, 0.03719262033700943, -0.03600730374455452, -0.03537513315677643, -0.009100602008402348, -0.004224339034408331, 0.018609480932354927, -0.0057454961352050304, -0.0032464521937072277, -0.0061241392977535725, -0.027183275669813156, -0.016331037506461143, 0.007948210462927818, -0.030633866786956787, -0.02184934727847576, 0.05273344740271568, -0.006999956909567118, 0.014697933569550514, -0.0021549726370722055, -0.007204094901680946, 0.007684806827455759, -0.01901775598526001, 0.013802360743284225, -0.01160293910652399, -0.058844417333602905, 0.028421273455023766, -0.028605656698346138, -0.004461402539163828, -0.016897356137633324, -0.017081739380955696, -0.009831547737121582, -0.007974551059305668, 0.009620824828743935, 0.025036534294486046, -0.017819268628954887, 0.04593762755393982, -0.009390346705913544, 0.0063612028025090694, -0.007474083919078112, 0.010700780898332596, 0.006459978874772787, -0.009522048756480217, 0.03719262033700943, -0.008949145674705505, 0.022784432396292686, 0.014526721090078354, -0.03974763676524162, -0.011188077740371227, -0.017015887424349785, 0.017529524862766266, -0.0178851205855608, 0.04809753969311714, -0.007401647511869669, 0.0023772194981575012, 0.028974421322345734, 0.030844589695334435, 0.01303848996758461, -0.019939670339226723, -0.0454898439347744, -0.009601069614291191, -0.005597331561148167, 0.05441923066973686, 0.03821989521384239, -0.015224741771817207, 0.004300067666918039, 0.01168854534626007, 0.03787747025489807, -0.004270434845238924, 0.038351599127054214, 0.011023450642824173, -0.0033238271716982126, 0.014065764844417572, 0.0022800895385444164, -0.003723871661350131, -0.0015351504553109407, -0.021480582654476166, -0.0005428588483482599, -0.03848329931497574, -0.03798283264040947, -0.012485342100262642, 0.009443027898669243, 0.005561113357543945, 0.006920935586094856, -0.020927434787154198, 0.006888010073453188, -0.09245474636554718, 0.00804698746651411, 0.02992267534136772, -0.03600730374455452, 0.022428836673498154, -0.021427901461720467, 0.0020545499864965677, 0.0014520136173814535, -0.032978158444166183, -0.03969495743513107, 0.018385587260127068, 0.003937887493520975, -0.024180471897125244, -0.027104254812002182, 0.03977397829294205, -0.016686633229255676, 0.02291613444685936, -0.0397212989628315, 0.06174185872077942, -0.0457005649805069, -0.025879425927996635, -0.02726229652762413, -0.07217264920473099, 0.012024384923279285, 0.015198401175439358, -0.011313194409012794, -0.005636841990053654, 0.0022619804367423058, 0.027973487973213196, -0.023798536509275436, -0.024259492754936218, -0.026340384036302567, 0.030581185594201088, -0.01884654350578785, -0.03387373313307762, 0.013617978431284428, -0.0003490100789349526, 0.042197294533252716, 0.010957599617540836, -0.012860692106187344, 0.005982559639960527, -0.014579402282834053, 0.00906109157949686, 0.006417175754904747, 0.03142407909035683, -0.024259492754936218, -0.024114621803164482, 0.01806950382888317, 0.006608143914490938, 0.013157021254301071, -0.014144785702228546, -0.0016783763421699405, -0.032372329384088516, 0.012748745270073414, 0.014553061686456203, 0.04994136840105057, -0.0595819465816021, -0.020084543153643608, -0.021638624370098114, 0.01518523134291172, -0.013947232626378536, -0.005735618527978659, -0.0008042048430070281, -0.03413713723421097, 0.019570905715227127, 0.0021236934699118137, -0.006993371993303299, 0.0015186876989901066, -0.0074214031919837, -0.02495751343667507, -0.0028431152459234, 0.02342977188527584, 0.0007050168351270258, -0.015461805276572704, -0.013696999289095402, 0.009271815419197083, 0.0006354617653414607, -0.003369922749698162, -0.030159739777445793, 0.01986064948141575, 0.027130594477057457, -0.012096821330487728, 0.014632082544267178, 0.022389326244592667, -0.039536915719509125, 0.004039956256747246, 0.009930324740707874, -0.03985299915075302, 0.023298069834709167, 0.03324156254529953, 0.04633273556828499, -0.01766122691333294, -0.008356486447155476, -0.02133570984005928, -0.04746536910533905, -0.020005520433187485, -0.024720449000597, -0.01750318519771099, 0.023166367784142494, -0.01323604304343462, 0.03648143261671066, 0.00883061345666647, -0.017964141443371773, -0.02030843496322632, -0.009495708160102367, 0.019215309992432594, -0.018767522647976875, 0.0005626141210086644, 0.0004967631539329886, 0.0060286554507911205, 0.014408189803361893, -0.010088366456329823, 0.003305718069896102, -0.006364495027810335, -0.02516823634505272, -0.007454328704625368, 0.07222533226013184, -0.045463502407073975, -0.03916814923286438, 0.03245135396718979, -0.002592881442978978, 0.01805633306503296, 0.0014380202628672123, 0.019175799563527107, -0.013137266039848328, 0.032767437398433685, -0.014895486645400524, -0.016791993752121925, 0.0017779759364202619, -0.02393023855984211, -0.0010305674513801932, 0.02190202847123146, -0.015474975109100342, 0.028658337891101837, -0.009238889440894127, -0.015514485538005829, 0.0027887881733477116, -0.03350496664643288, 0.013552127406001091, -0.03669215366244316, 0.017937801778316498, -0.025668703019618988, 0.011115641333162785, -0.03179284185171127, -0.03081824816763401, -0.0187938641756773, -0.005570990964770317, 0.0021220471244305372, -0.0012264740653336048, 0.010641515254974365, 0.04649077728390694, -0.003654728177934885, -0.008797688409686089, 0.008540869690477848, -0.013249212875962257, 0.030844589695334435, 0.003641558112576604, -0.04080125316977501, -0.017990481108427048, -0.015949102118611336, 0.012577532790601254, 0.05141642689704895, 0.0036876536905765533, -0.02556334249675274, 0.004033371340483427, -0.012735575437545776, -0.024970684200525284, -0.009298155084252357, -0.04483133181929588, 0.03808819502592087, -0.05689522996544838, -0.008277465589344501, 0.024167301133275032, 0.011892682872712612, 0.03461126238107681, 0.04148610308766365, 0.02979097329080105, 0.007559690158814192, -0.009423271752893925, 0.04599031060934067, -0.005426119081676006, 0.031239693984389305, 0.018253885209560394, -0.0070526376366615295, 0.01338091492652893, 0.008014061488211155, -0.02618234045803547, 0.05181153491139412, -0.050310131162405014, -0.014289657585322857, 0.04048516973853111, 0.016331037506461143, -0.028526635840535164, 0.0056500122882425785, -0.01681833527982235, 0.0050343056209385395, 0.05826492980122566, 0.002238932531327009, -0.024312173947691917, 0.002485873643308878, 0.014329168945550919, 0.003529611276462674, 0.019347012042999268, -0.01043737679719925, -0.002087475499138236, 0.04051151126623154, -0.013631148263812065, 0.00564342737197876, -0.035980962216854095, -0.014934997074306011, 0.003954350017011166, -0.0033238271716982126, 0.02308734692633152, 0.009574729017913342, 0.00045642946497537196, -0.005518310237675905, -0.017226610332727432, -0.011451481841504574, -0.021638624370098114, -0.002135217422619462, -0.001093949074856937, -0.008652815595269203, -0.04525277763605118, 0.030159739777445793, 0.002622514497488737, 0.014553061686456203, 0.005044183228164911, 0.02889540046453476, 0.02133570984005928, -0.015725208446383476, 0.005073816515505314, 0.0045272535644471645, -0.030396802350878716, 0.01253143697977066, 0.022362984716892242, -0.043935760855674744, -0.00020938547095283866, -0.0015581983607262373, 0.027235956862568855, 0.014039424248039722, -0.009686675854027271, 0.024694109335541725, -0.01726612076163292, -0.06263743340969086, 0.011214418336749077, 0.0128409368917346, 0.02607697993516922, 0.026735488325357437, 0.0016413351986557245, 0.007355552166700363, -0.022876622155308723, 0.047386348247528076, -0.0012289434671401978, 0.0071909246034920216, 0.01647591032087803, -0.01896507665514946, 0.008053571917116642, 0.005324049852788448, -0.015672527253627777, 0.025747723877429962, -0.011326365172863007, 0.03152943775057793, 0.018807033076882362, 0.020137222483754158, -0.013255798257887363, -0.017134418711066246, -0.013683829456567764, 0.023574642837047577, 0.03071288764476776, 0.03260939568281174, -0.037614066153764725, 0.003654728177934885, 0.016673462465405464, 0.011576598510146141, -0.029659271240234375, -0.019096778705716133, -0.022086411714553833, -0.005607209168374538, 0.016950037330389023, -0.0005996552645228803, -0.024654598906636238, -0.005475507117807865, -0.007888944819569588, -0.012024384923279285, 0.02839493378996849, -0.04014274477958679, -0.0032118805684149265, -0.048281922936439514, -0.005910123698413372, 0.021151328459382057, 0.03229330852627754, 0.007125073578208685, -0.02873735874891281, -0.027341317385435104, -0.007184339687228203, -0.010299090296030045, 0.031582120805978775, 0.026208681985735893, 0.012083650566637516, -0.015251082368195057, -0.026840850710868835, -0.006068165879696608, 0.022889792919158936, 0.020361116155982018, 0.007632126100361347, 0.004095929674804211, -0.00511991186067462, -0.04533179849386215, 0.014934997074306011, -0.009864473715424538, -0.018411928787827492, -0.03582292050123215, 0.02140156179666519, 0.0064994897693395615, -0.016950037330389023, 0.005524895619601011, -0.02551066130399704, -0.006749723106622696, -0.016212506219744682, -0.020071372389793396, -0.027130594477057457, 0.03887840732932091, -0.01201779954135418, 0.01303848996758461, 0.006091213785111904, -0.009745941497385502, 0.010226653888821602, 0.011695129796862602, 0.01301214937120676, 0.013631148263812065, 0.02348245121538639, -0.018728012219071388, 0.02184934727847576, 0.005975974258035421, -0.04957260191440582, -0.028921740129590034, -0.02839493378996849, -0.0028842720203101635, -0.011958533897995949, -0.04412014037370682, 0.0037436268758028746, -0.03995836153626442, -0.019728947430849075, 0.003970813006162643, 0.0034374201204627752, 0.012597288005053997, 0.013828701339662075, 0.024233153089880943, -8.488599974043609e-07, 0.015540826134383678, 0.0715404823422432, -0.008784517645835876, 0.021322540938854218, 0.00931132584810257, 0.001240467419847846, -0.008330145850777626, -0.004135440103709698, -0.014658423140645027, 0.00323163578286767, -0.015593507327139378, -0.004500912968069315, 0.034295178949832916, -0.0016487434040755033, 0.016396889463067055, -0.007967965677380562, -0.004668832756578922, 0.02076939307153225, 0.03740334510803223, 0.03600730374455452, 0.0010898333275690675, 0.024351684376597404, 0.04159146547317505, 0.003050545696169138, -0.013367744162678719, -0.01043737679719925, 0.006624606437981129, -0.0011622693855315447, -0.006348032504320145, 0.04904579371213913, 0.05794884264469147, 0.01058224868029356, -0.025997959077358246, -0.025537000969052315, 0.022494686767458916, -0.04127538204193115, 0.007342381868511438, -0.028631996363401413, -0.010193727910518646, 0.003529611276462674, 0.02229713462293148, -0.007770413067191839, 0.009877643547952175, -0.018214374780654907, -0.0019969302229583263, 0.0005580868455581367, 0.01839875802397728, 0.023693174123764038, -0.021177668124437332, 0.015501315705478191, -0.02461508847773075, -0.02590576745569706, 0.00666082464158535, 0.003050545696169138, -0.019939670339226723, 0.017858779057860374, -0.05057353526353836, 0.010792972519993782, 0.023627324029803276, -0.007553104776889086, 0.027288638055324554, -0.012544607743620872, 0.026458915323019028, -0.010516397655010223, 0.0216781347990036, 0.006861669942736626, -0.041407082229852676, 0.016449568793177605, -0.008843783289194107, -0.028184210881590843, 0.049124814569950104, -0.0027673866134136915, 0.004240801557898521, 0.00290731992572546, -0.01726612076163292, -0.005422826390713453, 0.02523408643901348, 0.012880447320640087, -0.0055512357503175735, 0.026788169518113136, 0.044330865144729614, -0.005090279038995504, -0.04556886479258537, -0.031107991933822632, 0.022784432396292686, -0.0001106090348912403, 0.02495751343667507, 0.02918514423072338, -0.009350836277008057, -0.036218028515577316, 0.011267098598182201, 0.018991416320204735, 0.024364855140447617, 0.04098563641309738, 0.031081652268767357, 0.012281203642487526, 0.02618234045803547, 0.006729967892169952, 0.0010182204423472285, -0.014579402282834053, 0.006453393958508968, 0.012649969197809696, 9.136820153798908e-05, -0.0023838046472519636, 0.0124129056930542, -0.002614283002912998, 0.008007476106286049, -0.025141896679997444, -0.011444896459579468, 0.016633952036499977, 0.03574389964342117, -0.00565988989546895, 0.00018242772785015404, -0.007092148065567017, -0.0003862570156343281, -0.025892596691846848, -0.003287609200924635, -0.038694024085998535, 0.04351431503891945, -0.019623585045337677, -0.026445744559168816, 0.005515017546713352, 0.02697255276143551, 0.003977397922426462, -0.0011556843528524041, 0.012294374406337738, -0.0051725925877690315, 0.004645785316824913, -0.015119380317628384, -0.016449568793177605, -0.03187186270952225, 0.028631996363401413, -0.004991502501070499, 0.02765740267932415, -0.021467411890625954, -0.033557649701833725, -0.00653241528198123, -0.013776020146906376, -0.026959381997585297, 0.00548867741599679, 0.004092636983841658, -0.0020561960991472006, 0.01201779954135418, -0.007184339687228203, -0.030291441828012466, 0.021243520081043243, -0.0038819140754640102, -0.01066785492002964, -0.0030060962308198214, 0.00560062425211072, 0.022665899246931076, -0.010252994485199451, -0.012333884835243225, 0.013855041936039925, 0.0017911461181938648, 0.022218113765120506, -0.0148428063839674, 0.007612370885908604, -0.03732432425022125, -0.039589595049619675, 0.0023624030873179436, 0.027341317385435104, -0.005090279038995504, -0.003391324309632182, 0.018306566402316093, 0.005113326944410801, 0.015343273058533669, 0.02138839103281498, 0.006459978874772787, 0.030159739777445793, 0.02461508847773075, -0.018082672730088234, -0.014342338778078556, 0.006107676308602095, 0.04238167777657509, 0.04678051918745041, -0.003282670397311449, 0.012123160995543003, 0.0075662750750780106, 0.00954180397093296, 0.012287789024412632, -0.01258411817252636, -0.027789104729890823, 0.022613219916820526, -0.01444770023226738, -0.014487210661172867, 0.002717998344451189, -0.006203160155564547, -0.0075662750750780106, -0.010187143459916115, -0.03426883742213249, 0.003937887493520975, -0.0019063852960243821, -0.0024973975960165262, 0.009403516538441181, 0.008712082169950008, 0.027499360963702202, -0.002113815862685442, 0.004649077542126179, 0.012992394156754017, 0.013552127406001091, -0.038746703416109085, -0.02522091753780842, -0.032925479114055634, -0.0062624262645840645, -0.02934318780899048, 0.008665986359119415, -0.03166114166378975, 0.017068568617105484, -0.00914011336863041, -0.005001380108296871, -0.026169171556830406, 0.00646327156573534, 0.02240249700844288, -0.0009359067189507186, 0.05175885185599327, -0.0035394891165196896, 0.02047964744269848, 0.005528187844902277, 0.026314042508602142, -0.017871949821710587, 0.00954180397093296, 0.01427648775279522, 0.005086986348032951, -0.039089128375053406, -0.009838133119046688, -0.004135440103709698, 0.01929433085024357, 0.0003090879472438246, -0.01982113905251026, 0.01340725552290678, -0.012564362958073616, 0.0031377982813864946, 0.031345054507255554, -0.011905853636562824, 0.005195640493184328, -0.008112838491797447, -0.02934318780899048, -0.025721384212374687, 0.04564788565039635, -0.02511555515229702, -0.013328233733773232, 0.02884271927177906, -0.00956814456731081, 0.02697255276143551, -0.0007704562158323824, 0.002727875951677561, 0.0196499265730381, -0.012024384923279285, -0.008771347813308239, 0.028184210881590843, 0.04562154412269592, 0.036771174520254135, -0.01585691049695015, -0.04520009830594063, -0.0063974205404520035, -0.04322456941008568, -0.009594484232366085, -0.00925864465534687, -0.002156618982553482, 0.0014083873247727752, -0.02815786935389042, -0.0061636497266590595, -0.00507710874080658, 0.01568569801747799, 0.02460191771388054, 0.005594038870185614, -0.013894552364945412, -0.04525277763605118, -0.033057183027267456, -0.003025851445272565, 0.028026167303323746, -0.0027262296061962843, 0.021994220092892647, -0.020624520257115364, -0.008606720715761185, 0.007586030289530754, 0.018385587260127068, -0.04696490243077278, 0.012294374406337738, -0.01970260590314865, -0.02212592214345932, -0.002981402212753892, -0.03279377892613411, 0.012426075525581837, 0.010681025683879852, 0.00982496328651905, -0.020387455821037292, 0.010114707052707672, 0.008949145674705505, -0.007869189605116844, 0.012109991163015366, -0.005705985706299543, 0.0004014850710518658, -0.012366809882223606, 0.03450590372085571, 0.002778910333290696, 0.030554844066500664, -0.013137266039848328, -0.027473019436001778, -0.026314042508602142, -0.032029904425144196, -0.022679070010781288, 0.03613900765776634, -0.01675248332321644, 0.002084182808175683, 0.024733619764447212, 0.0006613905425183475, -0.0018800448160618544, -0.04809753969311714, 0.01114856731146574, 0.0169236958026886, -0.026445744559168816, 0.0028282986022531986, -0.0123602245002985, 0.009515463374555111, 0.04875604808330536, 0.02257370948791504, -0.023851217702031136, -0.01244583074003458, -0.011273683980107307, 0.009844718500971794, 0.00019333430100232363, 0.011853172443807125, -0.004840045236051083, 0.0147901251912117, 0.014013083651661873, -0.038351599127054214, 0.025866257026791573, -0.00045396003406494856, -0.009732771664857864, 0.0032168193720281124, 0.015527656301856041, 0.015369613654911518, 0.015830570831894875, 0.013947232626378536, -0.014289657585322857, 0.010206898674368858, 0.0046655405312776566, 0.011030035093426704, -0.003374861553311348, -0.011313194409012794, -0.025299938395619392, 0.004560179077088833, 0.008797688409686089, -0.0028019582387059927, 0.03611266613006592, -0.007474083919078112, -0.0355595164000988, -0.00750700943171978, -0.0353487953543663, -0.003310656873509288, 0.02624819241464138, 0.01829339563846588, -0.024088280275464058, -0.012577532790601254, -0.008883294649422169, -0.007559690158814192, 0.02200739085674286, -0.015066699124872684, 0.02026892453432083, -0.014724274165928364, 0.024457046762108803, 0.008224784396588802, 0.010825897566974163, -0.052470043301582336, 0.001264338381588459, 0.019794797524809837, 0.003313949564471841, 0.010114707052707672, 0.005893660709261894, -0.014039424248039722, 0.00900182593613863, 0.015369613654911518, -0.01709490828216076, -0.0020216244738548994, -0.04485767334699631, -0.0023393554147332907, 0.012946298345923424, 0.02066403068602085, -0.039194490760564804, 0.035980962216854095, -0.01867533102631569, 0.01750318519771099, -0.012518267147243023, -0.002178020542487502, 0.010681025683879852, -0.011082716286182404, 0.0016577978385612369, -0.0002747219696175307]
metadata : {"source": "pydantic_ai_docs", "crawled_at": "2025-03-14T10:14:12.683922", "url_path": "/results/", "chunk_size": 4576}
updated_dt: 2025-03-14T10:14:12.685465
---
```

_(This example is complete, it can be run "as is")_
### Result validators functions
Some validation is inconvenient or impossible to do in Pydantic validators, in particular when the validation requires IO and is asynchronous. PydanticAI provides a way to add validation functions via the [`agent.result_validator`](https://ai.pydantic.dev/api/agent/#pydantic_ai.agent.Agent.result_validator) decorator.
Here's a simplified variant of the [SQL Generation example](https://ai.pydantic.dev/examples/sql-gen/):
sql_gen.py```
fromtypingimport Union
fromfake_databaseimport DatabaseConn, QueryError
frompydanticimport BaseModel
frompydantic_aiimport Agent, RunContext, ModelRetry

classSuccess(BaseModel):
  sql_query: str

classInvalidRequest(BaseModel):
  error_message: str

Response = Union[Success, InvalidRequest]
agent: Agent[DatabaseConn, Response] = Agent(
  'google-gla:gemini-1.5-flash',
  result_type=Response, # type: ignore
  deps_type=DatabaseConn,
  system_prompt='Generate PostgreSQL flavored SQL queries based on user input.',
)

@agent.result_validator
async defvalidate_result(ctx: RunContext[DatabaseConn], result: Response) -> Response:
  if isinstance(result, InvalidRequest):
    return result
  try:
    await ctx.deps.execute(f'EXPLAIN {result.sql_query}')
  except QueryError as e:
    raise ModelRetry(f'Invalid query: {e}') frome
  else:
    return result

result = agent.run_sync(
  'get me users who were last active yesterday.', deps=DatabaseConn()
)
print(result.data)
#> sql_query='SELECT * FROM users WHERE last_active::date = today() - interval 1 day'

```

_(This example is complete, it can be run "as is")_
## Streamed Results
There two main challenges with streamed results:
  1. Validating structured responses before they're complete, this is achieved by "partial validation" which was recently added to Pydantic in [pydantic/pydantic#10748](https://github.com/pydantic/pydantic/pull/10748).
  2. When receiving a response, we don't know if it's the final response without starting to stream it and peeking at the content. PydanticAI streams just enough of the response to sniff out if it's a tool call or a result, then streams the whole thing and calls tools, or returns the stream as a [`StreamedRunResult`](https://ai.pydantic.dev/api/result/#pydantic_ai.result.StreamedRunResult).


### Streaming Text
Example of streamed text result:
streamed_hello_world.py```
frompydantic_aiimport Agent
agent = Agent('google-gla:gemini-1.5-flash') [](https://ai.pydantic.dev/results/#__code_4_annotation_1)

async defmain():
  async with agent.run_stream('Where does "hello world" come from?') as result: [](https://ai.pydantic.dev/results/#__code_4_annotation_2)
    async for message in result.stream_text(): [](https://ai.pydantic.dev/results/#__code_4_annotation_3)
      print(message)
      #> The first known
      #> The first known use of "hello,
      #> The first known use of "hello, world" was in
      #> The first known use of "hello, world" was in a 1974 textbook
      #> The first known use of "hello, world" was in a 1974 textbook about the C
      #> The first known use of "hello, world" was in a 1974 textbook about the C programming language.

```

_(This example is complete, it can be run "as is" — you'll need to add`asyncio.run(main())` to run `main`)_
We can also stream text as deltas rather than the entire text in each item:
streamed_delta_hello_world.py```
frompydantic_aiimport Agent
agent = Agent('google-gla:gemini-1.5-flash')

async defmain():
  async with agent.run_stream('Where does "hello world" come from?') as result:
    async for message in result.stream_text(delta=True): [](https://ai.pydantic.dev/results/#__code_5_annotation_1)
      print(message)
      #> The first known
      #> use of "hello,
      #> world" was in
      #> a 1974 textbook
      #> about the C
      #> programming language.

```

_(This example is complete, it can be run "as is" — you'll need to add`asyncio.run(main())` to run `main`)_
Result message not included in `messages`
The final result message will **NOT** be added to result messages if you use `.stream_text(delta=True)`, see [Messages and chat history](https://ai.pydantic.dev/message-history/) for more information.
### Streaming Structured Responses
Not all types are supported with partial validation in Pydantic, see [pydantic/pydantic#10748](https://github.com/pydantic/pydantic/pull/10748), generally for model-like structures it's currently best to use `TypeDict`.
Here's an example of streaming a use profile as it's built:
streamed_user_profile.py