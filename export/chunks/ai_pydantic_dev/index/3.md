---
url: https://ai.pydantic.dev/
session_id: pydantic_ai_docs
chunk_number: 3
title: Dynamic System Prompts and Tool Registration
summary: The document explains how to register dynamic system prompts using the @agent.system_prompt decorator, incorporating dependency injection via the RunContext argument. It also details the registration of functions as tools that the LLM can invoke when responding to users, with dependencies similarly managed through RunContext.
embedding: [-0.009960339404642582, 0.021815992891788483, 0.018741078674793243, -0.017800047993659973, -0.00036841825931333005, -0.01528179831802845, 0.01383711863309145, 0.0425981804728508, 0.0017081021796911955, 0.006222727242857218, 0.02449329011142254, -0.037614695727825165, -0.002234946470707655, -0.049119118601083755, 0.028336934745311737, 0.021140042692422867, -0.036262791603803635, 0.030722644180059433, -0.021219566464424133, 0.017959095537662506, 0.052008479833602905, 0.03769421949982643, 0.028124870732426643, 0.028814075514674187, -0.024970432743430138, -0.022823292762041092, -0.024639083072543144, 0.027356142178177834, -0.0032836648169904947, -0.056673869490623474, 0.04503690451383591, -0.020954487845301628, -0.01977488584816456, 0.02955629676580429, -0.0035454302560538054, 0.005480506457388401, 0.030139470472931862, -0.015586638823151588, 0.014619100838899612, 0.014062435366213322, 0.008217445574700832, -0.02950328215956688, 0.008091533556580544, 0.019602583721280098, -0.052247051149606705, 0.03605072945356369, 0.02194853313267231, 0.01634211465716362, 0.0026425053365528584, -0.0061564575880765915, -0.062452588230371475, 0.025593368336558342, -0.022849801927804947, 0.010967639274895191, -0.010152521543204784, 0.002967227017506957, 0.004171679262071848, 0.015414337627589703, -0.014658862724900246, -0.018012112006545067, -0.007408955134451389, -0.005507014226168394, -0.01893988810479641, 0.0013610144378617406, -0.06467925012111664, 0.014844418503344059, -0.04143183305859566, 0.03374454379081726, -0.045514047145843506, -0.004025885835289955, 0.03618327155709267, 0.03769421949982643, -0.04880102351307869, -0.03194200620055199, -0.018078381195664406, -0.025805430486798286, 0.051716893911361694, 0.03856898099184036, 0.0016658551758155227, -0.04039802402257919, -0.02945026569068432, -0.027170587331056595, -0.049331184476614, 0.03204803913831711, 0.03167692944407463, -0.053545936942100525, -0.08079604804515839, 0.008953039534389973, 0.006438103970140219, -0.019615838304162025, 0.0073493123054504395, 0.008224072866141796, 0.013088271021842957, 0.015785448253154755, 0.076024629175663, 0.0361037477850914, 0.008462644182145596, -0.03628930076956749, -0.011630336754024029, 0.030643120408058167, 0.0543941892683506, -0.009284388273954391, -0.037959299981594086, -0.03803882375359535, 0.06510337442159653, 0.008422882296144962, 0.003750866511836648, -0.025354797020554543, -0.04071611911058426, 0.026150032877922058, -0.1232086718082428, 0.00721014617010951, 0.010205538012087345, 0.009165102615952492, -0.03369152918457985, 0.024519797414541245, -0.01740242913365364, -0.015361322090029716, 0.015560131520032883, -0.07284367829561234, -0.05964275076985359, 0.0005993267986923456, 0.01153755933046341, -0.0020692721009254456, 0.032233595848083496, -0.005808541551232338, -0.01206109020859003, -0.036554381251335144, -0.04013294354081154, -0.00888014305382967, 0.03451327234506607, 0.027462173253297806, 0.011802637949585915, -0.0004663731961045414, -0.02577892318367958, -0.01758798584342003, -0.003893346292898059, 0.0018025365425273776, -0.04943721368908882, 0.021802740171551704, 0.014804656617343426, -0.02671995386481285, 0.005762152373790741, -0.01810488849878311, -0.045752618461847305, 0.0028877032455056906, -0.020901471376419067, -0.0059874695725739, -0.05577259883284569, -0.0010354644618928432, 0.030006932094693184, 0.014778148382902145, -0.048403408378362656, -0.031835976988077164, -0.01929774321615696, 0.011703233234584332, 0.020662900060415268, 0.048111818730831146, 0.013916642405092716, -0.02348599024116993, -0.008151176385581493, 0.005096141714602709, -0.025275273248553276, -0.021564168855547905, -0.020503852516412735, -0.04135230928659439, -0.034672319889068604, -0.016660209745168686, -0.073638916015625, -0.033426448702812195, -0.0043042185716331005, -0.019244728609919548, -0.025805430486798286, -0.014526323415338993, 0.036024224013090134, -0.03233962506055832, -0.013306960463523865, -0.036368824541568756, -0.02685249224305153, -0.05078911781311035, -0.03878104314208031, -0.04591166600584984, -0.01574568636715412, -0.018144650384783745, -0.030484072864055634, -0.017614493146538734, 0.0062392945401370525, 0.005208800546824932, 0.016183067113161087, 0.05651482194662094, 0.02907915599644184, 0.028999632224440575, 0.0004419362230692059, 0.009198238141834736, -0.0059410808607935905, -0.04609721899032593, 0.051133718341588974, 0.008131295442581177, 0.003714418038725853, -0.010901370085775852, 0.015825210139155388, 0.03008645586669445, 0.053651969879865646, 0.011663471348583698, -0.0062956237234175205, -0.015242036432027817, -0.009801291860640049, 0.0006353610078804195, -0.027117570862174034, -0.002562981564551592, 0.018979649990797043, -0.04819134250283241, 0.031888991594314575, -0.02389686368405819, -0.04018596187233925, 0.0027601339388638735, -0.007276415824890137, 0.026362096890807152, -0.007283042650669813, 0.009781411848962307, -0.005904632620513439, 0.021975040435791016, 0.012617755681276321, -0.022849801927804947, -0.01811814308166504, 0.027753761038184166, 0.06181639805436134, -0.04161738604307175, 0.032710734754800797, 0.008833753876388073, 0.02000020258128643, -0.009900696575641632, 0.019682107493281364, 0.004453325644135475, 0.05863545089960098, -0.033665020018815994, 0.029132170602679253, 0.02512948028743267, 0.0016708254115656018, -0.018900126218795776, 0.02926471084356308, 0.016434891149401665, 0.027303125709295273, -0.0061100684106349945, 0.007958994247019291, 0.015652909874916077, -0.011809265241026878, -0.02772725373506546, 0.06907956302165985, 0.022107580676674843, 0.03928469121456146, -0.009894070215523243, -0.004486460238695145, -0.03194200620055199, -0.019562823697924614, -0.041908975690603256, -0.009774784557521343, -0.01917845755815506, -0.004754852969199419, -0.025884954258799553, -0.00021351277246139944, 0.011670098640024662, -0.043976590037345886, -0.010179029777646065, 0.015825210139155388, -0.02697177790105343, 0.01542759221047163, -0.010815219022333622, -0.036262791603803635, -0.015348068438470364, 0.030881691724061966, 0.029158679768443108, 0.036554381251335144, -0.009105459786951542, -0.024506544694304466, -0.005576597526669502, -0.004556043539196253, 0.055613551288843155, 0.02502344734966755, 0.045514047145843506, -0.04328738525509834, 0.009907323867082596, 0.015851717442274094, 0.037084538489580154, -0.023459482938051224, 0.006911932490766048, -0.03066962957382202, -0.034301210194826126, -0.015082989819347858, 0.04821785166859627, -0.027104318141937256, 0.00832347758114338, 0.0062127867713570595, -0.017428938299417496, 0.025871699675917625, -0.03793279081583023, 0.04198849946260452, 0.004781360737979412, -0.005434117279946804, 0.0013924925588071346, -0.007899351418018341, 0.032366134226322174, -0.03485787659883499, -0.02247869037091732, 0.025792177766561508, 0.03268422931432724, 0.012968985363841057, 0.018555523827672005, 0.03854247182607651, -0.03162391111254692, 0.007826454937458038, 0.039205167442560196, 0.03984135761857033, 0.006149830296635628, -0.00897292047739029, 0.0034029504749923944, 0.044745318591594696, -0.022226866334676743, 0.042995795607566833, -0.02412218041718006, -0.05503037944436073, -0.001240900601260364, 0.05184943228960037, -0.014499816112220287, -0.0162360817193985, -0.022876309230923653, 0.03936421498656273, -0.005000050645321608, -0.017428938299417496, -0.0036150135565549135, -0.007064352743327618, -0.052591655403375626, 0.00958260241895914, 0.009052444249391556, 0.011086924932897091, -0.007892724126577377, 0.01043748203665018, 0.008515659719705582, 0.0026441619265824556, 0.0601729117333889, -0.046176742762327194, 0.0046024322509765625, -0.05556053668260574, -0.03252518177032471, -0.009503078646957874, 0.040742628276348114, 0.038675010204315186, 0.015043227933347225, 0.014049181714653969, -0.0004754852852784097, -0.016249336302280426, 0.03652787208557129, 0.018303697928786278, 0.02608376368880272, -0.012637636624276638, 0.006613718345761299, -0.03379755839705467, -0.025937970727682114, -0.020676154643297195, -0.0010031579295173287, -0.06542146950960159, 0.00964224524796009, -0.00973502267152071, 0.00482443580403924, 0.001649287762120366, 0.014870925806462765, 0.0022183789405971766, -0.04591166600584984, 0.010072997771203518, 0.0037674338091164827, 0.07040495425462723, 0.01554687786847353, -0.03947024792432785, 0.000588972179684788, -0.043154843151569366, -0.042810242623090744, -0.01530830655246973, -0.007408955134451389, 0.008403001353144646, 0.007508359849452972, 0.0310407392680645, -0.011318868957459927, 0.04061008617281914, 0.030775660648941994, 0.054606251418590546, 0.04238611459732056, -0.0178133025765419, 0.007693915162235498, 0.0020030024461448193, 0.024082418531179428, 0.0745932012796402, -0.1030096635222435, -0.014937195926904678, -0.04418865218758583, -0.027594713494181633, 0.006199532654136419, 0.037084538489580154, 0.020397821441292763, 0.06324782222509384, -0.00035992744960822165, 0.013055135495960712, -0.009450063109397888, -0.0053844149224460125, -0.021285835653543472, 0.006378461141139269, 0.038383424282073975, 0.048138327896595, 0.009483197703957558, 0.011305615305900574, -0.03202152997255325, 0.0669059157371521, -0.040795642882585526, 0.014592593535780907, -0.020371314138174057, -0.013373230583965778, -0.05434117466211319, -0.02673320658504963, -0.00790597777813673, 0.03461930528283119, 0.042571671307086945, -0.044400714337825775, -0.07825129479169846, 0.00949645135551691, -0.029105663299560547, -0.03027201071381569, 0.05349292233586311, -0.003512295428663492, -0.04384405165910721, 0.01569267176091671, -0.01916520483791828, 0.026401858776807785, 0.014314260333776474, 0.00823070015758276, -0.03440723940730095, -0.04874800890684128, -0.02229313552379608, 0.0051458440721035, 0.02613678015768528, -0.012657517567276955, -0.015705924481153488, 0.014340768568217754, -0.0445067472755909, -0.008840381167829037, 0.06483829766511917, -0.003916540648788214, 0.019973695278167725, -0.044400714337825775, -0.036368824541568756, 0.041458338499069214, 0.009397046640515327, 0.0016641984693706036, -0.023379959166049957, -0.017137350514531136, 0.025394558906555176, -0.05002038925886154, -0.049331184476614, 0.06133925914764404, 0.011829146184027195, 0.03557358682155609, 0.012975611723959446, 0.04668039456009865, 0.04090167582035065, -0.03051058202981949, 0.033665020018815994, -0.011862280778586864, 0.020132742822170258, 0.008780738338828087, 0.013114778324961662, 0.022849801927804947, 0.006686615291982889, 0.010702560655772686, -0.002200154820457101, -0.02360527589917183, -0.0028230901807546616, -0.02502344734966755, -0.04519595205783844, -0.031888991594314575, -0.008807246573269367, 0.02690550871193409, 0.018794093281030655, 0.04288976639509201, -0.026229556649923325, -0.013519023545086384, 0.048933565616607666, -0.006689928937703371, 0.0033996368292719126, -0.006905305199325085, -0.02979486808180809, -0.03244565799832344, -0.0015391143970191479, 0.02902613952755928, 0.011491170153021812, 0.06998082995414734, -0.015228782780468464, -0.0016981617081910372, -0.005907945800572634, 0.01062303688377142, -0.015348068438470364, -0.0056726885959506035, 0.00814454909414053, 0.02177623100578785, 0.018144650384783745, -0.017481952905654907, 0.02577892318367958, -0.0006026403279975057, -0.04678642749786377, 0.0012566396035254002, -0.005470565985888243, 0.004599119070917368, 0.03345295786857605, -0.039390724152326584, 0.008237326517701149, -0.00044317878200672567, 0.03369152918457985, -0.00046140296035446227, 0.0051160226576030254, -0.0023989640176296234, 0.008190938271582127, -8.791092841420323e-05, -0.02083520218729973, 0.030775660648941994, -0.02536804974079132, 0.0067793927155435085, 0.030881691724061966, 0.04198849946260452, -0.040742628276348114, -0.011080297641456127, -0.031199786812067032, 0.0009426868637092412, -0.007919232361018658, 0.018688062205910683, -0.004078901372849941, -0.003624954028055072, 0.021034009754657745, -0.024639083072543144, 0.021272581070661545, 0.008588556200265884, -0.0020295102149248123, -0.03332041949033737, -0.00976153090596199, 0.010238672606647015, 0.017018064856529236, 0.0013369916705414653, -0.02123281918466091, 0.009204864501953125, 0.0009948742808774114, 0.034433748573064804, 0.021325597539544106, 0.0013643279671669006, 0.005281697027385235, 0.05314831808209419, -0.0027932689990848303, 0.007070979569107294, -0.006116695702075958, 0.02254495956003666, -0.005576597526669502, -0.01664695516228676, -0.03570612892508507, 0.009244626387953758, -0.033532481640577316, 0.014764894731342793, -0.036845967173576355, 0.02300884760916233, -0.005709136836230755, 0.008217445574700832, 0.04559357091784477, 0.051186736673116684, -0.009635617956519127, -0.041458338499069214, 0.002390680368989706, -0.0008006211137399077, 0.04365849494934082, -0.013048509135842323, -0.017773540690541267, 0.05497736483812332, -0.00012446282198652625, -0.01846274547278881, -0.024466782808303833, -0.00982780009508133, 0.018316952511668205, -0.0059145730920135975, -0.044930871576070786, 0.01964234560728073, 0.027356142178177834, -0.011968311853706837, 0.0027965824119746685, -0.010914623737335205, 0.006043798755854368, 0.020371314138174057, -0.020689407363533974, -0.025739161297678947, -0.009357284754514694, -0.011133314110338688, 0.010881489142775536, -0.027223603799939156, 0.0074487170204520226, 0.005835049320012331, 0.014950449578464031, -0.02490416169166565, 9.003363084048033e-05, 0.02748868241906166, -0.03228661045432091, -0.019682107493281364, 0.024161942303180695, 0.015666162595152855, 0.0007815685821697116, 0.030245501548051834, 0.036368824541568756, -0.013876880519092083, 0.02548733539879322, -0.00903256330639124, -0.014314260333776474, -0.014923942275345325, -0.03835691511631012, -0.055666569620370865, 0.025858446955680847, -0.014645609073340893, 0.04967578500509262, 0.021577421575784683, -0.007614391390234232, -0.0023459482472389936, 0.008456016890704632, 0.026163287460803986, -0.015785448253154755, 0.014937195926904678, 0.013439499773085117, -0.006517627276480198, 0.00028972295694984496, -0.0007306237239390612, 0.03416867181658745, -0.04365849494934082, 0.028310425579547882, 0.05129276588559151, -0.007057725917547941, -0.00019528859411366284, -0.008714469149708748, 0.04609721899032593, -0.01206771656870842, -0.004764793440699577, -0.03297581523656845, 0.043393414467573166, 0.03846294805407524, -0.007866215892136097, -0.024745116010308266, 0.012074343860149384, -0.0033399942331016064, -0.030165979638695717, 0.003225678810849786, 0.038091838359832764, -0.020145995542407036, -0.017097588628530502, -0.031411848962306976, 0.051478322595357895, -0.0025795490946620703, 0.01292259618639946, -0.007753557991236448, 0.006646853405982256, -0.010835099965333939, 0.00299373478628695, 0.04023897647857666, -0.06674686819314957, 0.02868153713643551, 0.015944495797157288, 0.0004655448137782514, -0.011133314110338688, 0.023578768596053123, 0.016620447859168053, 0.0020957801025360823, 0.039788343012332916, 0.0178133025765419, -0.058741483837366104, -0.006583896931260824, 0.013611801899969578, 0.0030351534951478243, -0.027939315885305405, 0.006120008882135153, -0.0013071703724563122, -0.0361037477850914, -0.008721095509827137, 0.04023897647857666, 0.016010764986276627, -0.020464090630412102, -0.043207861483097076, 0.025990985333919525, 0.04922515153884888, -0.016209574416279793, 0.050895147025585175, 0.020808693021535873, 0.025566859170794487, 0.034725334495306015, 0.015613147057592869, -0.008813873864710331, 0.003919854294508696, -0.0007724564638920128, 0.0020096295047551394, 0.014446799643337727, -0.021405121311545372, 0.018621793016791344, -0.018476000055670738, -0.06780718266963959, -0.008615064434707165, -0.016209574416279793, -0.0006262488896027207, -0.0087277228012681, -0.04548753798007965, -0.01114656776189804, 0.0010313226375728846, -0.008873515762388706, 0.042677704244852066, -0.019801393151283264, -0.03451327234506607, 0.010026609525084496, -0.04034500941634178, 0.020636392757296562, -0.03162391111254692, -0.0031875737477093935, -0.018250681459903717, 0.002241573529317975, 0.012412319891154766, -0.02713082544505596, -0.01681925542652607, 0.036792952567338943, -0.015255291014909744, -0.04095469042658806, 0.011471289210021496, -0.027753761038184166, -0.007170384284108877, 0.03859548643231392, 0.028655029833316803, 0.019629092887043953, -0.018900126218795776, 0.006438103970140219, 0.0053015779703855515, -0.03570612892508507, 0.00724328076466918, -0.029185187071561813, -0.07708494365215302, 0.0034824740141630173, -0.041564371436834335, -0.021378614008426666, 0.005652807652950287, -0.03138534352183342, -0.02136535942554474, -0.003721045097336173, -0.007713796105235815, -0.013061762787401676, 0.009483197703957558, 0.030404549092054367, -0.032472163438797, 0.03305533900856972, -0.02955629676580429, 0.010782084427773952, 0.010788710787892342, -0.0135389044880867, 0.0418824665248394, 0.019032664597034454, -0.020318297669291496, -0.007707168813794851, -0.011053790338337421, -0.007687287870794535, -0.02343297377228737, 0.010165776126086712, -0.007183638401329517, 0.05996084585785866, -0.017150605097413063, -0.007886096835136414, -0.013406365178525448, -0.0038602114655077457, 0.01728314347565174, 0.019257981330156326, 0.0036481483839452267, -0.02921169437468052, -0.010039863176643848, -0.007064352743327618, 0.03061661310493946, -0.050948165357112885, -0.0036481483839452267, -0.007806573528796434, 0.009728395380079746, -0.040689609944820404, 0.024996940046548843, -0.00826383475214243, -0.027541697025299072, -0.011504423804581165, 0.036368824541568756, -0.02762122079730034, -0.005195546429604292, -0.03644834831357002, -0.03469882905483246, -0.04214754328131676, -0.08387096226215363, -0.029635820537805557, -0.002269738120958209, -0.007978875190019608, 0.020755678415298462, -0.0020030024461448193, 0.02253170683979988, -0.0924065038561821, -0.0061266361735761166, 0.0025878327433019876, 0.007143876515328884, 0.010364584624767303, 0.0027071181684732437, 0.03162391111254692, 0.04951673746109009, -0.016726478934288025, -0.02459932118654251, -0.0041915602050721645, 0.028098363429307938, -0.029370741918683052, -0.01369132474064827, 0.01958933100104332, -0.03146486356854439, 0.030192486941814423, 0.010808591730892658, 0.04352595657110214, 0.008992801420390606, -0.02565963752567768, -0.015056481584906578, -0.0745932012796402, 0.04792626574635506, -0.004039139952510595, -0.008714469149708748, -0.008648199029266834, 0.03109375573694706, 0.03292280063033104, -0.0032853216398507357, -0.003416204359382391, -0.030881691724061966, -0.014460054226219654, -0.027356142178177834, -0.018794093281030655, 0.032657720148563385, 0.0015929584624245763, 0.019257981330156326, 0.0009476570412516594, 0.010994147509336472, -0.021100280806422234, 0.011789384298026562, 0.0416438952088356, 0.005898005329072475, 0.05073609948158264, 0.023976385593414307, -0.02762122079730034, 0.04591166600584984, 0.018489252775907516, 0.031650420278310776, 0.04169690981507301, 0.03321438655257225, 0.04124627634882927, 0.012935849837958813, 0.0027684178203344345, 0.01729639805853367, -0.06229354068636894, 0.016607193276286125, 0.0010031579295173287, 0.03403612971305847, 0.00429096445441246, 0.004549416713416576, 0.002118974458426237, -0.006905305199325085, -0.0029473460745066404, 0.0025828625075519085, -0.030404549092054367, 0.005974215921014547, -0.015533623285591602, -0.004320785868912935, -0.006878797430545092, 0.03499041497707367, -0.00991395115852356, 0.015414337627589703, -0.027568206191062927, 0.01970861665904522, -0.0027104318141937256, -0.01120621059089899, -0.003084855619817972, 0.014738386496901512, 0.04665388539433479, -0.03787977620959282, 0.021034009754657745, 0.032551687210798264, -0.020556868985295296, -0.004609059542417526, -0.004655448254197836, -0.005546776112169027, -0.00030649747350253165, -0.004188246559351683, 0.014566085301339626, -0.015056481584906578, 0.02998042292892933, 0.002953972900286317, -0.00020698933803942055, -0.00569256953895092, -0.020384566858410835, 0.015679417178034782, 0.018727824091911316, -0.009662126190960407, 0.05349292233586311, 0.024029402062296867, -0.012624382972717285, 0.022995594888925552, -0.015454099513590336, 0.010801965370774269, -0.028708044439554214, -0.04312833771109581, -0.026150032877922058, 0.01563965529203415, 0.0022200357634574175, 0.007104114629328251, 0.007879470475018024, 0.03628930076956749, -0.013485888950526714, 0.011842399835586548, 0.04713102802634239, 0.013028628192842007, -0.047396108508110046, 0.01153755933046341, 0.0017263262998312712, 0.014035928063094616, -0.01291596982628107, 0.01622282899916172, -0.008283715695142746, 0.015043227933347225, -0.002322753891348839, -0.04037151485681534, 0.0033714722376316786, -0.011617083102464676, 0.026680191978812218, 0.00937716569751501, -0.0356266051530838, 0.022491944953799248, -0.010907996445894241, 0.010543513111770153, 0.03787977620959282, -0.04047754779458046, 0.008389746770262718, -0.006530881393700838, -0.015414337627589703, -0.01723012886941433, -0.013426246121525764, -0.006063679698854685, -0.01941702887415886, -0.01574568636715412, 0.008827127516269684, -0.0009841053979471326, -0.0023459482472389936, 0.02448003552854061, -0.019920678809285164, 0.00870121456682682, -0.011815891601145267, 0.031120263040065765, -0.013373230583965778, 0.04455976188182831, -0.0010031579295173287, -0.05752212181687355, -0.006679988466203213, -0.02702479436993599, -0.023737816140055656, 0.05577259883284569, 0.002171990228816867, -0.007329431362450123, -0.025805430486798286, -0.014645609073340893, -0.02265099249780178, -0.006305564194917679, -0.018688062205910683, -0.037614695727825165, -0.02548733539879322, 0.013704579323530197, 0.029821375384926796, -0.01218037586659193, 0.050418008118867874, 0.05529545992612839, 0.04683944210410118, -0.048641979694366455, 0.011862280778586864, 0.01905917376279831, -0.011259226128458977, 0.029953915625810623, 0.012631009332835674, -0.0012384154833853245, 0.02212083339691162, -0.0020990935154259205, 0.01622282899916172, 0.017216874286532402, -0.02796582318842411, -0.01179601065814495, 0.03456628695130348, -0.01212073303759098, -0.00036966081825084984, 0.04471880942583084, -0.014035928063094616, 0.02849598228931427, 0.07178336381912231, 0.026216303929686546, -0.009980220347642899, 0.0024370690807700157, 0.01277017593383789, 0.032180577516555786, 0.007011336740106344, 0.009284388273954391, 0.0004220553091727197, 0.057310059666633606, -0.00494372146204114, -0.006199532654136419, -0.0036183269694447517, 0.008555421605706215, -0.02762122079730034, 0.0025199062656611204, -0.007846335880458355, 0.012458708137273788, -0.014354022219777107, 0.0051590981893241405, -0.03522898629307747, -0.00529826432466507, -0.021908771246671677, -0.020742423832416534, -0.01552036963403225, -0.013214183039963245, 0.006825781427323818, -0.01058990228921175, 0.03393010050058365, -0.003346621058881283, 0.010165776126086712, -0.028283918276429176, 0.04376452788710594, 0.02011948823928833, 0.004257829859852791, 0.02678622305393219, -0.017601238563656807, 0.007528240792453289, 0.010457362979650497, -0.03957628086209297, 0.01928449049592018, -0.023260673508048058, 0.011212837882339954, 0.026163287460803986, -0.014963704161345959, 0.014460054226219654, -0.015321560204029083, -6.787469465052709e-05, 0.021723216399550438, 0.027303125709295273, 0.009933832101523876, 0.05556053668260574, 0.0005782033549621701, 0.004741598851978779, 0.008734350092709064, 0.014115451835095882, 0.03398311510682106, -0.02583193965256214, 0.02307511866092682, -0.021723216399550438, 0.011312241666018963, 0.01274366769939661, -0.022147342562675476, -0.0006626972462981939, 0.01451306976377964, 0.03207454830408096, 0.002089153043925762, 0.005851616617292166, -0.03321438655257225, -0.005835049320012331, -0.022041309624910355, 0.006391714792698622, 0.013969657942652702, 0.023114880546927452, -0.0312793105840683, -0.007693915162235498, 0.0071239955723285675, 0.006951693911105394, 0.03308184817433357, -0.006315504666417837, -0.011809265241026878, -0.0002022262051468715, -0.027700744569301605, -0.031067246571183205, -0.04596468061208725, 0.00040362405707128346, 0.0015084645710885525, -0.022160595282912254, 0.024758368730545044, -0.024970432743430138, -0.016912033781409264, -0.04615023732185364, -0.01835671439766884, -0.001756147714331746, 0.0502854660153389, 0.019072426483035088, 0.0025215630885213614, 0.020848454907536507, 0.011544185690581799, 0.004857570864260197, 0.025354797020554543, 0.005255189258605242, -0.012021328322589397, -0.0033731290604919195, 0.019337505102157593, -0.01049712486565113, -0.0011257570004090667, 0.017959095537662506, 0.013943149708211422, 0.012346049770712852, 0.005321458913385868, -0.05381101742386818, 0.03984135761857033, -0.0008370694704353809, -0.009257880970835686, -0.005603105295449495, 0.00448314705863595, 0.003837017109617591, 0.019721869379281998, 0.0069649480283260345, -0.032949306070804596, 0.014367276802659035, -0.013505769893527031, 0.025049956515431404, 0.004781360737979412, 0.02820439450442791, -0.004910586401820183, -0.008164430037140846, 0.023048609495162964, -0.005980842746794224, 0.017256636172533035, -0.020344804972410202, -0.00858192890882492, -0.019138695672154427, 0.02902613952755928, 0.004440071526914835, -0.01935075968503952, -0.03249867260456085, -0.037376124411821365, 0.035069938749074936, -0.02960931323468685, 4.247992910677567e-05, -0.013823864981532097, -0.033134862780570984, 0.02224011905491352, -0.019682107493281364, -0.0002507894823793322, -0.003737612394616008, 0.01574568636715412, -0.011902042664587498, 0.008562048897147179, 0.00027936830883845687, 0.015255291014909744, -0.008833753876388073, 0.07878144830465317, 0.014102197252213955, -0.0030682883225381374, 0.022279880940914154, 0.03061661310493946, 0.007998756133019924, 0.03249867260456085, -0.010059744119644165, -0.032949306070804596, -0.01026517990976572, -0.025049956515431404, 0.04153786227107048, 0.01882060244679451, 0.004996737465262413, 0.028045346960425377, -0.01764100044965744, -0.005851616617292166, 0.032472163438797, 0.0053280857391655445, 0.007070979569107294, 0.02512948028743267, 0.03422168642282486, -0.013446127064526081, -0.02507646381855011, -0.008535540662705898, -0.004744912497699261, 0.003972869832068682, -0.04381754249334335, 0.011981566436588764, 0.03488438203930855, 0.01203458197414875, -0.017269890755414963, 0.0029142112471163273, 0.004751539323478937, -0.05481831729412079, 0.002417188137769699, 0.012147240340709686, 0.00808490626513958, -0.007521613966673613, 0.018436238169670105, -0.010947758331894875, 0.004198187030851841, -0.01050375122576952, -0.021285835653543472, -0.014407037757337093, 0.02412218041718006, 0.014327514916658401, -0.0382508859038353, 0.010907996445894241, 0.0027087749913334846, -0.0037939418107271194, -0.011550812982022762, 0.012498470023274422, -0.02330043539404869, -0.0024602634366601706, -0.025858446955680847, 0.02471860684454441, 0.04898658022284508, -0.01268402487039566, 0.03446025773882866, -0.025222256779670715, 0.014221482910215855, -0.009953713044524193, 0.011186329647898674, 0.0007794976118020713, -0.03204803913831711, -0.011318868957459927, -0.007945739664137363, -0.042677704244852066, 0.030643120408058167, -0.03917866200208664, -0.006713123060762882, 0.01427449844777584, 0.00445663882419467, -0.00022283194994088262, 0.029344234615564346, 0.016965050250291824, -0.038675010204315186, 0.00023028728901408613, 0.022399166598916054, 0.006371833849698305, -0.01829044334590435, 0.004317472688853741, 0.018568776547908783, -0.02884058468043804, -0.039682310074567795, 0.015122750774025917, 0.0021289149299263954, -0.017614493146538734, 0.00721014617010951, 0.006348639726638794, 0.008124668151140213, -0.014088943600654602, 0.04723706096410751, 0.01858203113079071, 0.019151950255036354, -0.02188226394355297, 0.00019042190979234874, -0.020384566858410835, -0.005503700580447912, -0.012650890275835991, -0.00567931542173028, -0.03355898708105087, -0.010583274997770786, -0.00609350111335516, 0.014738386496901512, 0.002929121721535921, -0.03952326253056526, -0.007793319411575794, 0.007793319411575794, 0.004214754328131676, 0.021564168855547905, 0.0037111046258360147, 0.015613147057592869, 0.014870925806462765, -0.011411646381020546, -0.006169711239635944, 0.0016434892313554883, -0.02725011110305786, -0.02931772544980049, 0.01911218836903572, 0.004373801872134209, -0.01200807373970747, -0.018860364332795143, 0.014950449578464031, 0.014950449578464031, -0.001468702801503241, -0.014102197252213955, -0.00820419192314148, -0.021869009360671043, 0.01740242913365364, -0.0020775559823960066, 0.008177683688700199, -0.0017760286573320627, -0.010311569087207317, -0.007355939596891403, 0.008184310980141163, -0.03570612892508507, 0.006805900949984789, 0.0045759244821965694, -0.016660209745168686, 0.008747603744268417, -0.010517004877328873, -0.011776129715144634, -0.009092206135392189, 0.014009419828653336, 0.0026474755723029375, 0.012591247446835041, 0.015851717442274094, 0.013333468697965145, 0.03021899424493313, -0.011636964045464993, 0.012014701031148434, -0.010788710787892342, -0.009562721475958824, -0.05410260334610939, 0.048138327896595, 0.0025016821455210447, -0.009980220347642899, -0.01026517990976572, 0.014738386496901512, -0.020318297669291496, -0.02124607376754284, -0.006202846299856901, -0.00163023523055017, 0.010019982233643532, 0.02878756821155548, 0.0051889196038246155, 0.026892254129052162, -0.0037707474548369646, 0.0040888418443500996, -0.037720728665590286, -0.0033018889371305704, -0.00991395115852356, 0.029662329703569412, -0.013227436691522598, 0.0013717833207920194, 0.010185657069087029, 0.0002072999777738005, -0.03133232519030571, -0.018316952511668205, -0.02201480232179165, -0.005364534445106983, 0.00034936569863930345, 0.007753557991236448, -0.002448666375130415, -0.029874391853809357, -0.004237948916852474, 0.013505769893527031, 0.0010495467577129602, -0.0014455083291977644, -0.010119386948645115, 0.0004767278442159295, -0.014897434040904045, 0.022332897409796715, 0.04482484236359596, 0.002871135715395212, -0.020742423832416534, 0.013996166177093983, 0.01615655981004238, -0.007660780102014542, 0.009383792988955975, -0.01823742873966694, -0.0034990415442734957, -0.014937195926904678, 0.012995492666959763, -0.02213408797979355, -0.009788038209080696, 0.01586497202515602, 0.00885363481938839, -0.008449389599263668, 0.00023939937818795443, 0.015599893406033516, 1.7085163563024253e-05, 0.032551687210798264, -0.005705823190510273, 0.025937970727682114, 0.010662798769772053, 0.01371783297508955, -0.03074915148317814, 0.008522287011146545, -0.008840381167829037, 0.008793992921710014, -0.014115451835095882, -0.001872119726613164, -0.02714408002793789, 0.034539781510829926, 0.0035388031974434853, -0.008250581100583076, -0.01304188184440136, 0.053890541195869446, -0.018449490889906883, -0.010715814307332039, 0.022372659295797348, -0.012445454485714436, -0.009920577518641949, -0.007919232361018658, -0.010782084427773952, -0.0019284490263089538, -0.02902613952755928, -0.01728314347565174, 0.01734941452741623, -0.017150605097413063, -0.005563343409448862, -0.003353248117491603, -0.01680600270628929, 0.014645609073340893, 0.00356862461194396, -0.008648199029266834, -0.0026772969868034124, 0.00820419192314148, -0.0087277228012681, -0.0007447060197591782, -0.0062127867713570595, 0.0009509705705568194, -0.03186248242855072, 0.008707841858267784, -0.006169711239635944, 0.0008656482677906752, 0.012160494923591614, -0.029052646830677986, 0.004125290550291538, 0.01516251266002655, 0.004983483348041773, 0.017336159944534302, 0.025633130222558975, -0.04217405244708061, -0.022465435788035393, -0.025275273248553276, -0.005125963129103184, 0.001658399822190404, 0.012465335428714752, 0.00967537984251976, 0.0055997916497290134, -0.002181930700317025, 0.03904612362384796, 0.010656171478331089, -0.009363912045955658, 0.021815992891788483, -0.03846294805407524, 0.0009402017458342016, 0.0123327961191535, -0.04090167582035065, -0.04302230477333069, 0.008237326517701149, 0.006229354068636894, -0.00046347390161827207, 0.014764894731342793, 0.027700744569301605, -0.0022846488282084465, 0.014698624610900879, -0.0025265333242714405, 0.000739735784009099, -0.03281676769256592, 0.017786793410778046, -0.0037806876935064793, 0.038621995598077774, -0.006792646832764149, -0.027011539787054062, -0.012644263915717602, -0.008369865827262402, -0.020159250125288963, 0.037084538489580154, 0.009078952483832836, -0.0031826035119593143, 0.039973899722099304, 0.033134862780570984, 0.058264341205358505, -0.04890705645084381, 0.0268392376601696, 0.019218219444155693, -0.008283715695142746, 0.0014786432730033994, -0.02341972105205059, 0.01935075968503952, 0.026587413623929024, 0.023565514013171196, -0.02425471879541874, -0.013512397184967995, 0.03143835812807083, 0.008734350092709064, -0.010861608199775219, 0.01395640429109335, 0.00028123214724473655, 0.03931120038032532, 0.0038171361666172743, -0.015533623285591602, -0.010026609525084496, 0.004996737465262413, 0.01291596982628107, -0.0022813351824879646, 0.022213611751794815, 0.019721869379281998, 0.011100178584456444, -0.01439378410577774, 0.035600095987319946, 0.009920577518641949, 0.002596116391941905, 0.015917988494038582, -0.0036481483839452267, -0.012962358072400093, 0.010059744119644165, -0.020795440301299095, 0.01675298623740673, -0.0007252392824739218, 0.04153786227107048, 0.012352677062153816, -0.001407403266057372, -0.041802942752838135, -0.009536213241517544, -0.004155111964792013, 0.015719179064035416, 0.005960961803793907, 0.009668752551078796, -0.03061661310493946, -0.03538803383708, 0.0030682883225381374, 0.021908771246671677, -0.0207026619464159, -0.0017710584215819836, -0.003906600177288055, -0.01049712486565113, 0.016978302970528603, 0.015785448253154755, -0.03557358682155609, 0.04143183305859566, 0.002695521106943488, -0.02053035981953144, 0.004138544201850891, -0.01651441492140293, 0.006643539760261774, -0.0008258864399977028, 0.04554055631160736, -0.04903959482908249, -0.012147240340709686, -0.016209574416279793, -0.033426448702812195, 0.024731861427426338, 0.020676154643297195, -0.026918761432170868, 0.012080971151590347, -0.02389686368405819, 0.023340197280049324, -0.028230903670191765, 0.0033035457599908113, 0.0034857874270528555, -0.015295052900910378, -0.013253944925963879, -0.0009890756336972117]
metadata : {"source": "pydantic_ai_docs", "crawled_at": "2025-03-16T00:34:50.440685", "url_path": "/", "chunk_size": 4981}
updated_dt: 2025-03-16T00:34:50.442222
---
@support_agent.system_prompt 
Dynamic system prompts[](https://ai.pydantic.dev/agents/#system-prompts) can be registered with the @agent.system_prompt[](https://ai.pydantic.dev/api/agent/#pydantic_ai.agent.Agent.system_prompt) decorator, and can make use of dependency injection. Dependencies are carried via the RunContext[](https://ai.pydantic.dev/api/tools/#pydantic_ai.tools.RunContext) argument, which is parameterized with the deps_type from above. If the type annotation here is wrong, static type checkers will catch it.
[](https://ai.pydantic.dev/#__code_1_annotation_5)
async defadd_customer_name(ctx: RunContext[SupportDependencies]) -> str:
  customer_name = await ctx.deps.db.customer_name(id=ctx.deps.customer_id)
  return f"The customer's name is {customer_name!r}"

@support_agent.tool 
tool[](https://ai.pydantic.dev/tools/) let you register functions which the LLM may call while responding to a user. Again, dependencies are carried via RunContext[](https://ai.pydantic.dev/api/tools/#pydantic_ai.tools.RunContext), any other arguments become the tool schema passed to the LLM. Pydantic is used to validate these arguments, and errors are passed back to the LLM so it can retry.
[](https://ai.pydantic.dev/#__code_1_annotation_6)
async defcustomer_balance(
  ctx: RunContext[SupportDependencies], include_pending: bool
) -> float:
"""Returns the customer's current account balance.""" 
The docstring of a tool is also passed to the LLM as the description of the tool. Parameter descriptions are extracted[](https://ai.pydantic.dev/tools/#function-tools-and-schema) from the docstring and added to the parameter schema sent to the LLM.
[](https://ai.pydantic.dev/#__code_1_annotation_7)
  return await ctx.deps.db.customer_balance(
    id=ctx.deps.customer_id,
    include_pending=include_pending,
  )

... 
In a real use case, you'd add more tools and a longer system prompt to the agent to extend the context it's equipped with and support it can provide.
[](https://ai.pydantic.dev/#__code_1_annotation_11)

async defmain():
  deps = SupportDependencies(customer_id=123, db=DatabaseConn())
  result = await support_agent.run('What is my balance?', deps=deps) 
Run the agent[](https://ai.pydantic.dev/agents/#running-agents) asynchronously, conducting a conversation with the LLM until a final response is reached. Even in this fairly simple case, the agent will exchange multiple messages with the LLM as tools are called to retrieve a result.
[](https://ai.pydantic.dev/#__code_1_annotation_8)
  print(result.data) 
The result will be validated with Pydantic to guarantee it is a SupportResult, since the agent is generic, it'll also be typed as a SupportResult to aid with static type checking.
[](https://ai.pydantic.dev/#__code_1_annotation_10)
"""
  support_advice='Hello John, your current account balance, including pending transactions, is $123.45.' block_card=False risk=1
  """
  result = await support_agent.run('I just lost my card!', deps=deps)
  print(result.data)
"""
  support_advice="I'm sorry to hear that, John. We are temporarily blocking your card to prevent unauthorized transactions." block_card=True risk=8
  """

```

Complete `bank_support.py` example
The code included here is incomplete for the sake of brevity (the definition of `DatabaseConn` is missing); you can find the complete `bank_support.py` example [here](https://ai.pydantic.dev/examples/bank-support/).
## Instrumentation with Pydantic Logfire
To understand the flow of the above runs, we can watch the agent in action using Pydantic Logfire.
To do this, we need to set up logfire, and add the following to our code:
bank_support_with_logfire.py```
...
frompydantic_aiimport Agent, RunContext
frombank_databaseimport DatabaseConn
importlogfire
logfire.configure() 
Configure logfire, this will fail if project is not set up.
[](https://ai.pydantic.dev/#__code_2_annotation_1)
logfire.instrument_asyncpg() 
In our demo, DatabaseConn uses asyncpg[](https://ai.pydantic.dev/) to connect to a PostgreSQL database, so logfire.instrument_asyncpg()[](https://magicstack.github.io/asyncpg/current/) is used to log the database queries.
[](https://ai.pydantic.dev/#__code_2_annotation_2)

...
support_agent = Agent(
  'openai:gpt-4o',
  deps_type=SupportDependencies,
  result_type=SupportResult,
  system_prompt=(
    'You are a support agent in our bank, give the '
    'customer support and judge the risk level of their query.'
  ),
  instrument=True,
)

```

That's enough to get the following view of your agent in action:
See [Monitoring and Performance](https://ai.pydantic.dev/logfire/) to learn more.
## Next Steps
To try PydanticAI yourself, follow the instructions [in the examples](https://ai.pydantic.dev/examples/).
Read the [docs](https://ai.pydantic.dev/agents/) to learn more about building applications with PydanticAI.
Read the [API Reference](https://ai.pydantic.dev/api/agent/) to understand PydanticAI's interface.
Â© Pydantic Services Inc. 2024 to present