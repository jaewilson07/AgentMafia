---
url: https://ai.pydantic.dev/multi-agent-applications/
session_id: pydantic_ai_docs
chunk_number: 2
title: Agent Delegation and Dependencies in Multi-Agent Applications
summary: This section discusses the principles of agent delegation and dependencies in multi-agent systems. It emphasizes that delegate agents should typically have the same or a subset of dependencies as their calling agents. It also covers the initialization of dependencies, warning against initializing dependencies within tool calls due to potential performance issues.
embedding: [-0.018361598253250122, 0.015555987134575844, 0.019744643941521645, -0.024736786261200905, 0.006371895782649517, 0.04367794468998909, 0.004178778268396854, 0.013698752969503403, -0.007534313946962357, 0.01138708833605051, 0.02847759984433651, -0.05632294714450836, 0.004027301445603371, -0.04072744399309158, -0.0041985358111560345, -0.0648583248257637, -0.038488227874040604, 0.003651903010904789, 0.016952207311987877, 0.03948928788304329, 0.041386038064956665, 0.0271077249199152, 0.06311963498592377, 0.04515319690108299, -0.02525048889219761, -0.025369036942720413, 0.01371192466467619, 0.04707629233598709, 0.026817942038178444, -0.03271894529461861, 0.05158107355237007, -0.01537158153951168, -0.03364097699522972, 0.01155173685401678, 0.015806253999471664, 0.03851456940174103, 0.0209959726780653, 0.02398598939180374, -0.02446017600595951, 0.04449460282921791, 0.01138050202280283, -0.034483976662158966, 0.009819635190069675, 0.023274708539247513, -0.01746590994298458, 0.03988444432616234, -0.01388315949589014, -0.008489275351166725, 0.02510559931397438, -0.0011690041283145547, -0.031744226813316345, 0.01616189442574978, -0.005110688507556915, 0.01609603501856327, -0.028214162215590477, 0.012421080842614174, 0.008752712979912758, 0.00132706668227911, -0.02918888069689274, -0.05223966762423515, 0.006622161716222763, -0.007870197296142578, 0.013975362293422222, 0.05447888746857643, -0.03098025545477867, -0.001002709148451686, -0.02115403488278389, 0.010083072818815708, -0.02646230161190033, -0.01238156482577324, -0.007672618608921766, 0.04204463213682175, -0.05202891677618027, -0.019112395122647285, -0.05118591710925102, -0.023748895153403282, -0.015305722132325172, 0.03477375581860542, 0.0053346105851233006, -0.020613988861441612, -0.004791270475834608, -0.0204295814037323, 0.0077516501769423485, 0.010392611846327782, -0.03403613343834877, -0.060379888862371445, -0.04773488640785217, -0.03714469447731972, -0.03082219325006008, -0.01956023834645748, -0.02614617720246315, 0.0048307860270142555, -0.022958582267165184, 0.031322725117206573, 0.08034845441579819, 0.030295317992568016, 0.0209959726780653, 0.005627684760838747, -0.0059339310973882675, 0.015279377810657024, 0.05163376033306122, -0.003365414682775736, -0.08582795411348343, 0.010577017441391945, 0.04881497845053673, 0.011479291133582592, -0.01476567517966032, 0.03843553736805916, -0.038725320249795914, 0.0028615903574973345, -0.07982157915830612, -0.025395380333065987, 0.01819036342203617, 0.012144471518695354, -0.023142989724874496, -0.019323144108057022, 0.02219461463391781, 0.002245805226266384, 0.03177056834101677, -0.014067565090954304, -0.048788633197546005, -0.0024088071659207344, 0.003497133497148752, 0.002448322717100382, 0.008831744082272053, 0.015582331456243992, -0.006088700611144304, -0.04230806976556778, -0.03577481955289841, -0.005150204058736563, 0.03435225784778595, -0.01899384707212448, -0.01666242443025112, -0.037618882954120636, -0.03140175715088844, -0.006312622223049402, -0.015055456198751926, -0.02565881796181202, -0.033588286489248276, 0.018137674778699875, 0.046365007758140564, -0.043309133499860764, -0.009470580145716667, 0.02831953763961792, -0.016636081039905548, 0.09815683215856552, -0.026659879833459854, 0.010860213078558445, -0.02002125419676304, 0.037776947021484375, 0.001974135171622038, -0.008825157769024372, -0.031164662912487984, -0.010563845746219158, -0.03806672617793083, 0.009352033026516438, -0.04884132370352745, 0.028978131711483, 0.055638011544942856, 0.0009730724850669503, -0.041781194508075714, 0.027055036276578903, -0.017900582402944565, 0.00770554831251502, -0.049921415746212006, -0.032139383256435394, 0.0044652665965259075, 0.021575534716248512, -0.030348006635904312, -0.011136822402477264, -0.037197381258010864, -0.05479501187801361, -0.023683035746216774, 0.02903081849217415, 0.03458935022354126, -0.04568007215857506, -0.03432591259479523, -0.043335478752851486, -0.010353095829486847, -0.04038497805595398, 0.009273001924157143, -0.01492373738437891, -0.030137255787849426, -0.015503300353884697, -0.06164438650012016, -0.036486100405454636, 0.044441916048526764, 0.060221824795007706, -0.013685581274330616, 0.05268751084804535, 0.052397727966308594, 0.04834078997373581, 0.0014933616621419787, 0.044441916048526764, 0.022879552096128464, -0.0097340177744627, 0.04873594641685486, 0.010537502355873585, 0.020073940977454185, -0.03364097699522972, 0.04362525790929794, 0.008225837722420692, 0.00844975933432579, 0.007554071955382824, 0.0064081186428666115, -0.05516382306814194, -0.0008767531253397465, -0.027819005772471428, 0.014712987467646599, -0.007053540553897619, 0.01476567517966032, -0.04488975927233696, 0.012368393130600452, -0.02108817547559738, -0.05864119902253151, -0.06359382718801498, -0.031032944098114967, 0.05021119862794876, -0.02035055123269558, 0.07587001472711563, -0.00035152447526343167, 0.009747189469635487, 0.016372643411159515, -0.03540600836277008, -0.0056639076210558414, -0.014660299755632877, 0.011492462828755379, -0.052740197628736496, -0.013646065257489681, 0.033008724451065063, 0.013896331191062927, -0.015384753234684467, 0.01431783102452755, -0.0342995710670948, 0.036328040063381195, -0.05590144917368889, 0.02211558260023594, -0.04755047708749771, -0.01121585350483656, -0.01250669825822115, 0.004224879667162895, -0.0011517161037772894, -0.00635543093085289, -0.009786705486476421, -0.020627159625291824, 0.010847041383385658, -0.03935756906867027, -0.03321947529911995, 0.07355176657438278, 0.008140220306813717, 0.05300363525748253, -0.010524330660700798, 0.005324731580913067, 0.010511158034205437, -0.017795206978917122, -0.01882261410355568, 0.018322082236409187, -0.050158511847257614, -0.03458935022354126, 0.02494753710925579, -0.008759298361837864, 0.02525048889219761, -0.03743447735905647, 0.035748474299907684, 0.0008676974684931338, 0.02349863015115261, 0.02526366151869297, -0.00010907961404882371, -0.013310182839632034, 0.010162103921175003, 0.017518596723675728, 0.028662005439400673, 0.026277896016836166, -0.011367330327630043, -0.03732910007238388, -0.008199493400752544, 0.00752114225178957, 0.015424268320202827, -0.014897393994033337, -0.024354802444577217, -0.02075887843966484, 0.025131942704319954, 0.035827506333589554, 0.009556197561323643, 0.006740708369761705, 0.009826220571994781, -0.030268974602222443, 0.0056968373246490955, -0.009134696796536446, 0.01979733258485794, -0.00796898640692234, 0.0580616369843483, 0.04486341401934624, -0.031243693083524704, 0.015450612641870975, 0.017321018502116203, 0.0030838658567517996, 0.018611863255500793, -0.007580415811389685, -0.019586581736803055, 0.034721069037914276, -0.0111763384193182, -0.03356194496154785, -0.008456345647573471, 0.013949018903076649, 0.016833659261465073, -0.013329939916729927, 0.013073088601231575, 0.02953135035932064, -0.0012093429686501622, -0.02028469182550907, 0.06670238822698593, -0.02968941256403923, -0.0026771840639412403, -0.029979193583130836, 0.00823900941759348, 0.05758744850754738, -0.054584261029958725, 0.04080647602677345, -0.03445763140916824, -0.029109850525856018, -0.041965603828430176, 0.0316915363073349, -0.012368393130600452, 0.0028451255057007074, -0.01443637814372778, 0.026080317795276642, 0.008983220905065536, -0.07223457843065262, 0.01803230121731758, 0.008759298361837864, -0.004791270475834608, 0.01995539478957653, 0.05590144917368889, 0.041886571794748306, -0.013106018304824829, -0.037276413291692734, 0.03466838225722313, 0.05268751084804535, 0.0625927597284317, -0.03643341362476349, 0.014568096958100796, -0.04633866623044014, -0.060379888862371445, -0.021285753697156906, 0.053451478481292725, 0.022076066583395004, 0.030611444264650345, -0.022866379469633102, 0.01905970647931099, 0.017650315538048744, 0.008667095564305782, -0.01786106638610363, 0.0488940104842186, -0.016622910276055336, -0.03419419378042221, -0.022339504212141037, 0.01315211970359087, 0.0025701625272631645, -0.009049080312252045, -0.08324626833200455, 0.03458935022354126, -0.011795416474342346, 0.007000852841883898, -0.02398598939180374, 0.02615934982895851, 0.008594649843871593, -0.03150713071227074, 0.004906524438410997, 0.0328243188560009, 0.0526348240673542, 0.06043257564306259, -0.05453157424926758, -0.024170394986867905, -0.0209959726780653, -0.016148721799254417, -0.02534269355237484, 0.02124623954296112, -0.012407909147441387, 0.011867862194776535, 0.0257510207593441, -0.019257284700870514, -0.03113831952214241, -0.014291487634181976, 0.045100510120391846, 0.05558532476425171, -0.028345881029963493, -0.000987890874966979, -0.01722881570458412, 0.01720247231423855, 0.04907841607928276, -0.06348845362663269, 0.0023544731084257364, 0.01254621334373951, -0.035932883620262146, -0.012078612111508846, 0.021680910140275955, 0.008805399760603905, 0.029162537306547165, 0.0029966020956635475, 0.017070753499865532, 0.006737415213137865, -0.01776886358857155, -0.02968941256403923, -0.057007886469364166, 0.013046745210886002, 0.0469709150493145, 0.026514990255236626, 0.018783098086714745, 0.0018572347471490502, 0.06375189125537872, -0.0001405686343787238, 0.0028187818825244904, -0.007777993567287922, -0.019994910806417465, -0.02671256847679615, -0.049262821674346924, 0.0016275501111522317, 0.029083505272865295, 0.06701851636171341, 0.030268974602222443, -0.05447888746857643, 0.016372643411159515, -0.012941369786858559, -0.013817300088703632, 0.02750288136303425, 0.03458935022354126, -0.021865317597985268, 0.03635438159108162, -0.031322725117206573, 0.005120567511767149, 0.01704441010951996, 0.00605247775092721, 0.004774805624037981, -0.030189944431185722, -0.02058764547109604, 0.045495666563510895, 0.02381475456058979, -0.0139226745814085, -0.01745273731648922, -0.002448322717100382, -0.03216572478413582, -0.01585894078016281, 0.0416494756937027, -0.051844511181116104, 0.0027496295515447855, -0.05737669765949249, -0.06311963498592377, 0.02436797320842743, -0.013040158897638321, -0.005133739206939936, -0.018546003848314285, 0.0010348156793043017, 0.04012154042720795, -0.012328877113759518, -0.021377958357334137, 0.0587465725839138, 0.017518596723675728, 0.03385172411799431, 0.009819635190069675, 0.0362226627767086, -0.017492253333330154, -0.0370129756629467, 0.05684982240200043, 0.004030594602227211, 0.03295603767037392, 0.04747144877910614, -0.008212666027247906, -0.02581688016653061, 0.0236566923558712, 0.04417847841978073, -0.003274857997894287, -0.025527099147439003, -0.05358319729566574, -0.012651588767766953, -0.029952850192785263, 0.07597538828849792, 0.002054812852293253, 0.009911837987601757, 0.020469097420573235, 0.03145444393157959, 0.007573829498142004, 0.0025075962767004967, 0.009905251674354076, 0.00020313504501245916, 0.029057161882519722, -0.013856815174221992, -0.007982158102095127, -0.0223526768386364, -0.0035959226079285145, 0.019757816568017006, 0.016912691295146942, 0.059326138347387314, -0.01492373738437891, 0.010083072818815708, 0.016109205782413483, 0.01531889382749796, -0.022550255060195923, -0.01592480018734932, -0.006233591120690107, 0.04101722687482834, -0.019836848601698875, -0.012533041648566723, 0.017808377742767334, 0.012697690166532993, -0.03461569547653198, 0.030189944431185722, 0.008983220905065536, -0.01110389269888401, 0.015279377810657024, -0.034062474966049194, -0.010089658200740814, 0.006770344916731119, 0.00900956429541111, -0.030769506469368935, -0.003516891272738576, -0.008232423104345798, -0.0020531665068119764, -0.015661362558603287, 0.01858551986515522, 0.002094328636303544, -0.017413223162293434, -0.013909502886235714, 0.00400425074622035, 0.026528161019086838, -0.023037614300847054, 0.013580205850303173, -0.020956456661224365, -0.002767740748822689, 0.02310347370803356, 0.022023379802703857, -0.018954331055283546, 0.009312517940998077, 0.00621383311226964, -0.026409614831209183, 0.02203655056655407, 0.02726578712463379, 0.0049229892902076244, -0.03219207003712654, 0.002066338201984763, -0.012440838851034641, 0.008206079714000225, -0.024894848465919495, -0.012058854103088379, -0.025158286094665527, -0.008607822470366955, 0.015740394592285156, -0.012032510712742805, 0.005956981796771288, -0.02017931640148163, 0.03490547463297844, 0.000701402488630265, 0.019257284700870514, -0.018967503681778908, 0.001418446539901197, 0.013540689833462238, 0.006744001526385546, -0.020943285897374153, 0.019823675975203514, -0.03522159904241562, -0.0076265172101557255, -0.022655630484223366, -0.006543130148202181, -0.007949228398501873, -0.0035531139001250267, 0.031823255121707916, 0.004985555540770292, -0.0053214384242892265, -0.007718720473349094, -0.010116001591086388, 0.029109850525856018, 0.02115403488278389, -0.0051765479147434235, -0.007824094966053963, 0.014291487634181976, -0.0016168479342013597, 0.04117529094219208, -0.013026987202465534, -0.013283838517963886, -0.005532188806682825, -0.011130237020552158, -0.027292130514979362, 0.020469097420573235, -0.0032007661648094654, 0.006543130148202181, -0.03153347596526146, -0.03153347596526146, -0.01625409722328186, -0.01905970647931099, -0.011070962995290756, 0.006315915379673243, -0.0045903995633125305, -8.397072087973356e-05, 0.005232528317719698, -0.03888338431715965, 0.009035907685756683, -0.002621203660964966, 0.0038692390080541372, -0.027055036276578903, 0.005657321307808161, 0.012249846011400223, -0.03137541189789772, -0.03277163207530975, -0.01541109662503004, -0.0160170029848814, -0.017597628757357597, 0.0024911314249038696, -0.00309703778475523, -0.002621203660964966, 0.009398134425282478, 0.01178224477916956, -0.011163166724145412, -0.006836204323917627, -0.020100286230444908, -0.014936909079551697, -0.005877950228750706, -0.01674145646393299, 0.014225628226995468, 0.04341450706124306, -0.017821550369262695, 0.02430211380124092, 0.019586581736803055, 0.018387941643595695, 0.006487149745225906, -0.0013138947542756796, 0.01713661290705204, -0.011953478679060936, -0.013185049407184124, -0.00816656369715929, 0.006750587373971939, -0.04947357252240181, 0.014146596193313599, 0.01388315949589014, 0.005459743086248636, -0.015898456797003746, -0.012236674316227436, -0.015898456797003746, -0.004547590855509043, -0.003125027986243367, -0.06127557530999184, 0.004478438291698694, 0.0060623567551374435, 0.012401322834193707, 0.008041431196033955, 0.02044275403022766, 0.02669939585030079, -0.012361806817352772, -0.011301470920443535, 0.03830381855368614, -0.019599754363298416, -0.002206289442256093, -0.05021119862794876, 0.025724677368998528, 0.002938975114375353, 0.02477630227804184, 0.014304659329354763, -0.008805399760603905, -0.015898456797003746, -0.03171788156032562, 0.03643341362476349, -0.03163884952664375, 0.013073088601231575, -0.018229879438877106, 0.016701940447092056, 0.005733059719204903, 0.019323144108057022, 0.02750288136303425, 0.01568770594894886, 0.020798394456505775, -0.009589127264916897, -0.038251131772994995, 0.013790955767035484, 0.05052732303738594, -0.02067984826862812, -0.008067775517702103, 0.00561451306566596, -0.007297220174223185, -0.013441900722682476, -0.03432591259479523, 0.034141506999731064, -0.007870197296142578, -0.0015444026794284582, -0.028925443068146706, 0.029320599511265755, 0.048156384378671646, -0.05969494953751564, 0.028846412897109985, 0.009437650442123413, 0.01033992413431406, 0.02189166098833084, 0.016030175611376762, -0.006121630314737558, 0.002772680250927806, 0.016754629090428352, 0.0342995710670948, 0.0085748927667737, -0.006138095166534185, 0.03490547463297844, -0.02839856781065464, -0.05690251290798187, -0.018243050202727318, -0.017360534518957138, 0.00889101717621088, 0.010932658798992634, -0.028345881029963493, -0.07054857909679413, -0.01801912859082222, 0.030137255787849426, 0.01537158153951168, -0.01649119146168232, -0.0018654671730473638, 0.023063957691192627, -0.02953135035932064, -0.013013815507292747, -0.024354802444577217, -0.013422143645584583, -0.04683919623494148, 0.013988533988595009, 0.03690760210156441, -0.0055717043578624725, -0.025197802111506462, 0.010353095829486847, -0.033430226147174835, -0.02011345699429512, -0.012816237285733223, -0.04631232097744942, -0.04241344705224037, 0.012006166391074657, 0.026119833812117577, 0.005403762683272362, -0.021536020562052727, 0.015911627560853958, -0.016109205782413483, -0.05245041847229004, -0.022405363619327545, -0.007119399961084127, -0.05479501187801361, 0.000679998192936182, -0.06059063598513603, -0.011070962995290756, 0.027055036276578903, -0.02340642735362053, -0.0043565984815359116, 0.009042493999004364, -0.012190572917461395, 0.019033363088965416, 0.04141238331794739, 0.04062207043170929, -0.01770300418138504, 0.04438922926783562, -0.06348845362663269, 0.010847041383385658, 0.0011772365542128682, 0.007810923270881176, 0.005670493468642235, 0.030532412230968475, -0.01882261410355568, -0.04407310113310814, -0.029162537306547165, -0.010893142782151699, 0.006319208536297083, -0.014396862126886845, -0.018848957493901253, 0.04578544571995735, -0.010372853837907314, -0.03767156973481178, 0.011090721003711224, -0.02976844273507595, 0.002938975114375353, 0.004508075304329395, -0.00694157974794507, -0.009068837389349937, -0.0029982486739754677, 0.015832597389817238, 0.016056519001722336, -0.010484814643859863, -0.008989806286990643, -0.01110389269888401, 0.009062252007424831, -0.02131209895014763, 0.01978415995836258, 0.0048274933360517025, -0.01987636275589466, 0.0183352530002594, 0.023999162018299103, -0.002173359738662839, -0.012730619870126247, -0.004491610452532768, -0.0013196575455367565, -0.03319313004612923, -0.04676016420125961, -0.011874447576701641, 0.021180380135774612, 0.008074360899627209, 0.02252391166985035, 0.009885494597256184, 0.02583005279302597, -0.1191791519522667, -0.024236254394054413, 0.014238799922168255, -0.027792662382125854, 0.00679668877273798, 0.01050457265228033, 0.0362226627767086, 0.026673052459955215, -0.02316933311522007, -0.014963253401219845, 0.008015087805688381, -0.004870301578193903, -0.01480519026517868, -0.033351194113492966, 0.016464846208691597, -0.0077516501769423485, 0.00034185138065367937, 0.01464712806046009, 0.023538146167993546, 0.007672618608921766, -0.024183567613363266, -0.0024038676638156176, -0.05495307222008705, -0.006875720340758562, -0.006967923138290644, -0.00048530136700719595, -0.012888682074844837, 0.01674145646393299, 0.021786285564303398, -0.0036650749389082193, -0.00621712626889348, -0.01626726984977722, 0.009747189469635487, -0.00637848163023591, -0.03298238292336464, 0.05447888746857643, -0.000120090480777435, 0.013231150805950165, 0.02139112912118435, -0.01971830055117607, 0.009299345314502716, 0.0050086067058146, 0.02792438119649887, 0.004781391471624374, 0.012776721268892288, 0.012631830759346485, -0.0251846294850111, -0.006809860933572054, -0.0162409245967865, 0.02052178606390953, 0.026277896016836166, -0.015872113406658173, 0.032297443598508835, 0.0034115163143724203, 0.040753789246082306, 0.04301935061812401, -0.025803707540035248, 0.012980885803699493, 0.004926282446831465, 0.03377269580960274, 0.022721489891409874, 0.03827747702598572, 0.009839392267167568, -0.018690895289182663, -0.013059916906058788, -0.0015600442420691252, -0.00577257527038455, 0.011354158632457256, -0.014028050005435944, 0.002025176305323839, -0.007619931362569332, 0.02011345699429512, 0.03063778765499592, 0.0008602882735431194, 0.012677932158112526, 0.027845349162817, 0.015437440946698189, 0.002561930101364851, -7.100465154508129e-05, 0.003803379600867629, 0.04230806976556778, -0.05118591710925102, -0.0049394541420042515, 0.03883069381117821, -0.06164438650012016, -0.010089658200740814, 0.009319103322923183, -0.007448696997016668, 0.0030031881760805845, 0.025724677368998528, 0.01929680071771145, 0.00900956429541111, 0.008509033359587193, 0.007415767293423414, -0.039462946355342865, -0.012072025798261166, -0.06016913801431656, 0.03208669275045395, 0.01954706571996212, 0.018374769017100334, 0.02486850507557392, 0.027660943567752838, -0.01021479070186615, -0.008811986073851585, -0.030163599178195, 0.03796135261654854, -0.006072235759347677, -0.030848536640405655, -0.03090122528374195, -0.011261955834925175, 0.014107081107795238, 0.012394736520946026, -0.06227663904428482, 0.038751665502786636, -0.015384753234684467, -0.013231150805950165, 0.06617551296949387, -0.011110479012131691, -0.050395604223012924, 0.01938900351524353, -0.004554176703095436, 0.03058510087430477, 0.02044275403022766, 0.02381475456058979, -0.007481626700609922, 0.0006631216965615749, -0.05010582134127617, -0.013909502886235714, -0.019244113937020302, 0.015437440946698189, 0.006450926885008812, -0.006487149745225906, -0.020139800384640694, 0.0033407174050807953, -0.015226691029965878, 0.00414255540817976, 0.027318473905324936, -0.03419419378042221, -0.018927987664937973, -0.015635019168257713, 0.003556407056748867, -0.05590144917368889, -0.005410348530858755, -0.0024186859373003244, -0.04438922926783562, -0.022181442007422447, 0.032455507665872574, 0.003997664898633957, -0.038251131772994995, 0.025606129318475723, -0.01647801883518696, 0.006444341037422419, 0.0006133155548013747, 0.03000553697347641, 0.001904982840642333, 0.03598557040095329, 0.003737520193681121, -0.04994776099920273, 0.014238799922168255, -0.017110269516706467, -0.019573410972952843, 0.05858851224184036, -0.027160411700606346, -0.005966860800981522, 0.004932868294417858, 0.0014060979010537267, -0.01271086186170578, -0.003602508455514908, 0.00824559573084116, -0.04528491571545601, -0.022260474041104317, -0.03577481955289841, -0.010629705153405666, 0.007396009285002947, 0.051291290670633316, 0.05621757358312607, 0.03377269580960274, 0.004817614331841469, -0.00723794661462307, 0.045416634529829025, 0.03822479024529457, 0.022563425824046135, -0.037618882954120636, -0.026343755424022675, 0.010287236422300339, -0.012612072750926018, 0.012500111944973469, 0.014884221367537975, -0.0017831429140642285, 0.00605247775092721, 0.034879133105278015, 0.00960888434201479, -0.031111974269151688, 0.004409286193549633, -0.04359891638159752, 0.03756619617342949, 0.013975362293422222, -0.017241988331079483, -0.013790955767035484, -0.004840665031224489, -0.0036617820151150227, 0.03177056834101677, -0.0021815921645611525, 0.004656258970499039, 0.05468963459134102, 0.0511595718562603, -0.009661572054028511, -0.003674953943118453, -0.01122243981808424, -0.005443278234452009, -0.0050645871087908745, -0.02477630227804184, -0.01608286239206791, 0.029241569340229034, -0.017347363755106926, 0.004656258970499039, -0.017887409776449203, -0.018058644607663155, 0.0023001390509307384, -0.028293192386627197, 0.0021140864118933678, -0.033035069704055786, 0.0036123874597251415, 0.017004894092679024, 0.026422787457704544, -0.0008709903922863305, -0.006184196565300226, -0.0013361223973333836, 0.017255159094929695, -0.005347782280296087, -0.017571285367012024, 0.004498196300119162, -0.01408073678612709, 0.007086470257490873, 0.03321947529911995, -0.030532412230968475, 0.010069900192320347, 0.0069152358919382095, -0.015648189932107925, 0.014884221367537975, -0.005522309802472591, 0.010583603754639626, -0.004676016513258219, -0.004330254625529051, 0.02606714516878128, 0.004247930366545916, 0.031981319189071655, 0.042597852647304535, 0.017518596723675728, -0.003711176570504904, 0.0027792660985141993, -0.005551946349442005, 0.031902287155389786, -0.003744106274098158, 0.0350898839533329, -0.032455507665872574, 0.028372224420309067, 0.053767602890729904, -0.005387297831475735, -0.006269813980907202, -0.008397071622312069, 0.0097340177744627, -0.00472870422527194, -0.00015538699517492205, -0.02768728695809841, -0.02887275628745556, -0.01238156482577324, 0.04062207043170929, 0.027819005772471428, -0.002357766032218933, -0.0025388794019818306, 0.005324731580913067, 0.010076486505568027, 0.027318473905324936, -0.0009681329829618335, -0.004116211552172899, -0.013685581274330616, -0.0047023603692650795, -0.020719364285469055, -0.03063778765499592, -0.007791165728121996, -0.028582975268363953, -0.031243693083524704, -0.005759403575211763, 0.0015065334737300873, -0.0150817995890975, -0.012835994362831116, -0.026119833812117577, 0.012579143047332764, -0.009575954638421535, 0.04915744811296463, 0.017821550369262695, -0.0019823675975203514, -0.007310392335057259, -0.009799877181649208, -0.021114520728588104, 0.012691103853285313, 0.020087113603949547, 0.0022523910738527775, -0.015714049339294434, -0.0019807210192084312, 0.01762397214770317, -0.02036372199654579, 0.020060770213603973, 0.03682857006788254, 0.004820907022804022, 0.013619721867144108, -0.012625244446098804, 0.03150713071227074, 0.007014025002717972, -0.037539850920438766, 0.010036970488727093, 0.02742384932935238, -0.012052267789840698, 0.03400978818535805, 0.03877800703048706, -0.0564810112118721, -0.012849166989326477, -0.024802645668387413, 0.003129967488348484, -0.018440628424286842, 0.03917316347360611, 0.005216063465923071, 0.017505425959825516, 0.00633567338809371, -0.029821131378412247, -0.018651379272341728, 0.008996392600238323, -0.01697855070233345, -0.012230088002979755, 0.019599754363298416, 0.003128320910036564, 0.023366911336779594, 0.0029817838221788406, -0.043572571128606796, 0.008877845481038094, -0.028503943234682083, 0.010912900790572166, -0.0015040638390928507, -0.015266206115484238, 0.0042281728237867355, -0.01801912859082222, -0.0032501607201993465, -0.019086049869656563, 0.013204807415604591, -0.020982801914215088, 0.0014102141140028834, -0.022379020228981972, 0.03074316307902336, 0.025961771607398987, 0.07165501266717911, -0.0010677453828975558, -0.027371162548661232, 0.034167852252721786, 0.03466838225722313, 0.004791270475834608, 0.007185259368270636, -0.004554176703095436, -0.009384962730109692, -0.025052910670638084, -0.028372224420309067, 0.04033229127526283, 0.012559385038912296, -0.007145743817090988, 0.015951143577694893, -0.0024055142421275377, 0.004471852444112301, -0.004152434412389994, 0.009595712646842003, 0.017281504347920418, 0.015911627560853958, 0.06580670177936554, -0.034167852252721786, -0.046444039791822433, 0.011459533125162125, -0.012368393130600452, 0.00679668877273798, -0.03619632124900818, 0.01584576815366745, 0.031032944098114967, 0.02398598939180374, -0.0339571014046669, 0.00442245788872242, -0.014133424498140812, -0.056112200021743774, 0.006740708369761705, 0.03540600836277008, -0.009885494597256184, 0.003263332648202777, 0.013488003052771091, -0.00619407556951046, 0.0035465280525386333, 0.01688634790480137, -0.00400425074622035, -0.005133739206939936, 0.021654566749930382, 0.004557469859719276, -0.04873594641685486, 0.03545869514346123, 0.014067565090954304, 0.006599110551178455, 0.014515409246087074, 0.02316933311522007, -0.02726578712463379, -0.01404122170060873, -0.03129637986421585, -0.028108786791563034, 0.047102633863687515, 0.019165081903338432, 0.01930997334420681, -0.0373554453253746, -0.004366477485746145, 0.009233485907316208, 0.023696208372712135, 0.009740603156387806, -0.015635019168257713, 0.011288299225270748, -0.025632474571466446, -0.001235686824657023, 0.04296666383743286, -0.03098025545477867, 0.0019066293025389314, 0.026765255257487297, -0.010642876848578453, -0.004185364115983248, 0.016675597056746483, 0.005976739339530468, -0.03690760210156441, 0.01062311977148056, 0.027134068310260773, -0.008713196963071823, 0.009925009682774544, -0.01940217614173889, 0.019678784534335136, -0.02357766032218933, -0.031559817492961884, 0.011808588169515133, 0.014370518736541271, -0.02831953763961792, -0.0043368409387767315, -0.0005630977684631944, -0.0020136507228016853, -0.0026574262883514166, 0.015727221965789795, 0.019086049869656563, -0.014568096958100796, 0.004033887758851051, -0.007145743817090988, -0.04325644671916962, 0.04054303839802742, 0.005426813382655382, -0.008423415943980217, -0.011400260031223297, 0.0003791030903812498, -0.007837267592549324, 0.01029382273554802, -0.022141925990581512, -0.007949228398501873, -0.005021778400987387, 0.028582975268363953, -0.01388315949589014, 0.005489380098879337, 0.014541752636432648, -0.0016053225845098495, -0.0015715697081759572, 0.001300722942687571, -0.018954331055283546, -0.009905251674354076, -0.020152973011136055, -0.013046745210886002, -0.0018407698953524232, 0.0006046714843250811, -0.001418446539901197, -0.017676658928394318, 0.013790955767035484, 0.027239443734288216, 0.008956876583397388, -0.013073088601231575, -0.007211603224277496, -0.015292550437152386, -0.018243050202727318, 0.01149904914200306, 0.0042314655147492886, -0.0038758250884711742, -0.028688348829746246, 0.012058854103088379, 0.0017255159327760339, -0.014568096958100796, -0.008271939121186733, -0.0002107500476995483, -0.008311455138027668, -0.0031365533359348774, -0.02284003607928753, -0.02734481729567051, -0.010570432059466839, 0.00841024424880743, 0.010069900192320347, -0.014778846874833107, 0.0028451255057007074, 0.01963927038013935, 0.04230806976556778, -0.016451675444841385, 0.030506068840622902, -0.025369036942720413, -0.021022316068410873, -0.047603167593479156, 0.024631410837173462, -0.021443817764520645, -0.004817614331841469, -0.014396862126886845, 0.03661781921982765, -0.007903126999735832, -0.0056836651638150215, 0.0021667738910764456, 0.030427036806941032, -0.004511367995291948, -0.01531889382749796, 0.027239443734288216, 0.004857129883021116, -0.0259749423712492, 0.012302533723413944, -0.0251846294850111, 0.019757816568017006, 0.0032830904237926006, 0.03071681782603264, 0.0011336046736687422, 0.015793081372976303, -0.038409195840358734, 0.0038066727574914694, 0.003334131557494402, -0.008087532594799995, -0.01061653345823288, 0.01834842562675476, 0.002556990832090378, -0.02726578712463379, -0.012118127197027206, -0.032218411564826965, -0.01431783102452755, -0.015305722132325172, -0.017992785200476646, 0.010873384773731232, 0.031586162745952606, 0.005357661284506321, 0.002147016115486622, 0.026567677035927773, 0.0024367973674088717, -0.028582975268363953, -0.013764612376689911, 0.02341959811747074, 0.0580616369843483, -0.02895178645849228, 0.002736457623541355, -0.048946697264909744, 0.014633956365287304, -0.006296157371252775, 0.0320340059697628, 0.0026508404407650232, -0.009417892433702946, 0.006230297964066267, -0.003582750679925084, 0.006177610717713833, 0.014607612043619156, 0.009839392267167568, -0.01226960401982069, 0.028424911201000214, -0.011321228928864002, 0.038172099739313126, -0.000987890874966979, 0.018519660457968712, -0.03453666344285011, -0.010695564560592175, -0.013988533988595009, 0.028925443068146706, -0.06143363565206528, 0.015898456797003746, -0.003618973307311535, 0.024275770410895348, 0.02173359878361225, -0.02035055123269558, -0.012519869953393936, 0.03461569547653198, -0.010873384773731232, 0.013204807415604591, -0.014607612043619156, -0.00011813527817139402, -0.008818572387099266, -0.03556406870484352, 0.0011533625656738877, 0.015424268320202827, 0.009872321970760822, -0.020785223692655563, 0.03047972545027733, -0.008061189204454422, 0.02284003607928753, -0.008765884675085545, 0.002942268270999193, 0.012203744612634182, 0.0057791611179709435, -0.015542815439403057, -0.024078192189335823, 0.038567256182432175, -0.007257704623043537, -0.01649119146168232, 0.0002871057658921927, 0.014093909412622452, -0.004567348398268223, 0.030348006635904312, -0.0244470052421093, 0.014831534586846828, 0.018717238679528236, -0.017716174945235252, -0.0013558801729232073, -0.021101348102092743, 0.0041985358111560345, -0.007428938988596201, 0.021509675309062004, -0.038488227874040604, 0.008627579547464848, -0.025632474571466446, -0.026528161019086838, 0.012743791565299034, 0.03332484886050224, -0.013817300088703632, -0.027134068310260773, -0.00960888434201479, 0.017097096890211105, -0.014528580941259861, 0.0005643326439894736, -0.015345237217843533, -0.02299809828400612, -0.00028134306194260716, 0.00205975235439837, 0.00118711544200778, -0.01738687790930271, 0.010122587904334068, -0.01121585350483656, -0.01049798633903265, 0.009352033026516438, 0.034747414290905, 0.009878908284008503, 0.010484814643859863, -0.002942268270999193, 0.02517145872116089, -0.002752922475337982, 0.016846831887960434, 0.022971754893660545, 0.03419419378042221, -0.02044275403022766, -0.005940516944974661, -0.03227110207080841, -0.015437440946698189, -0.012052267789840698, 0.03740813210606575, -0.008739541284739971, 0.000614962016697973, 0.027134068310260773, 0.007646275218576193, 0.0007363902986980975, -0.02316933311522007, 0.008456345647573471, 0.03295603767037392, -0.001219221972860396, -0.011795416474342346, 0.006371895782649517, -0.00489005958661437, 0.06127557530999184, 0.0047978563234210014, -0.01468664314597845, -0.029873818159103394, 0.033825382590293884, 0.01006331481039524, -0.003467496717348695, 0.0011311350390315056, -0.030690474435687065, 0.047919292002916336, -0.005973446648567915, -0.008627579547464848, 0.00018821378762368113, 0.032218411564826965, 4.6307381126098335e-05, 0.014028050005435944, 0.026277896016836166, 0.04064841568470001, -0.015029112808406353, 0.020890597254037857, 0.023709379136562347, 0.013171877712011337, -0.011347572319209576, 0.020258348435163498, 0.004359891638159752, -0.030110912397503853, -0.025000223889946938, -0.005515723954886198, 0.024828989058732986, -0.0014760735211893916, 0.02816147357225418, 0.008034845814108849, 0.0036980046425014734, -0.050237540155649185, -0.015727221965789795, -0.016306784003973007, 0.013580205850303173, 0.01873040944337845, -0.0034246882423758507, -0.005002020392566919, -0.01825622282922268, 0.008956876583397388, -0.004876887891441584, -0.01857234723865986, 0.0048307860270142555, -0.004672723822295666, -0.028503943234682083, 0.045100510120391846, -0.018809441477060318, -0.016780972480773926, 0.003793500829488039, -0.009793290868401527, -0.025632474571466446, 0.006161145865917206, 0.021351613104343414, -0.0037803289014846087, -0.009082010015845299, 0.023182503879070282, -0.02052178606390953, -0.012618659064173698, -0.015450612641870975, -0.03572213277220726, -0.006417997181415558, 0.0160170029848814, -0.020152973011136055, 0.008153392001986504, -0.019810503348708153, 0.01033992413431406, -0.014423206448554993, -6.637391197727993e-05, 0.0009450822253711522, -0.025210974738001823, -0.025882739573717117, 0.005660614464432001]
metadata : {"source": "pydantic_ai_docs", "crawled_at": "2025-03-15T11:25:01.182932", "url_path": "/multi-agent-applications/", "chunk_size": 4268}
updated_dt: 2025-03-15T11:25:01.182932
---
```

### Agent delegation and dependencies
Generally the delegate agent needs to either have the same [dependencies](https://ai.pydantic.dev/dependencies/) as the calling agent, or dependencies which are a subset of the calling agent's dependencies.
Initializing dependencies
We say "generally" above since there's nothing to stop you initializing dependencies within a tool call and therefore using interdependencies in a delegate agent that are not available on the parent, this should often be avoided since it can be significantly slower than reusing connections etc. from the parent agent.
agent_delegation_deps.py```
fromdataclassesimport dataclass
importhttpx
frompydantic_aiimport Agent, RunContext

@dataclass
classClientAndKey: 
Define a dataclass to hold the client and API key dependencies.
[](https://ai.pydantic.dev/multi-agent-applications/#__code_1_annotation_1)
  http_client: httpx.AsyncClient
  api_key: str

joke_selection_agent = Agent(
  'openai:gpt-4o',
  deps_type=ClientAndKey, 
Set the deps_type of the calling agent — joke_selection_agent here.
[](https://ai.pydantic.dev/multi-agent-applications/#__code_1_annotation_2)
  system_prompt=(
    'Use the `joke_factory` tool to generate some jokes on the given subject, '
    'then choose the best. You must return just a single joke.'
  ),
)
joke_generation_agent = Agent(
  'gemini-1.5-flash',
  deps_type=ClientAndKey, 
Also set the deps_type of the delegate agent — joke_generation_agent here.
[](https://ai.pydantic.dev/multi-agent-applications/#__code_1_annotation_4)
  result_type=list[str],
  system_prompt=(
    'Use the "get_jokes" tool to get some jokes on the given subject, '
    'then extract each joke into a list.'
  ),
)

@joke_selection_agent.tool
async defjoke_factory(ctx: RunContext[ClientAndKey], count: int) -> list[str]:
  r = await joke_generation_agent.run(
    f'Please generate {count} jokes.',
    deps=ctx.deps, 
Pass the dependencies to the delegate agent's run method within the tool call.
[](https://ai.pydantic.dev/multi-agent-applications/#__code_1_annotation_3)
    usage=ctx.usage,
  )
  return r.data

@joke_generation_agent.tool 
Define a tool on the delegate agent that uses the dependencies to make an HTTP request.
[](https://ai.pydantic.dev/multi-agent-applications/#__code_1_annotation_5)
async defget_jokes(ctx: RunContext[ClientAndKey], count: int) -> str:
  response = await ctx.deps.http_client.get(
    'https://example.com',
    params={'count': count},
    headers={'Authorization': f'Bearer {ctx.deps.api_key}'},
  )
  response.raise_for_status()
  return response.text

async defmain():
  async with httpx.AsyncClient() as client:
    deps = ClientAndKey(client, 'foobar')
    result = await joke_selection_agent.run('Tell me a joke.', deps=deps)
    print(result.data)
    #> Did you hear about the toothpaste scandal? They called it Colgate.
    print(result.usage()) 
Usage now includes 4 requests — 2 from the calling agent and 2 from the delegate agent.
[](https://ai.pydantic.dev/multi-agent-applications/#__code_1_annotation_6)
"""
    Usage(
      requests=4,
      request_tokens=309,
      response_tokens=32,
      total_tokens=341,
      details=None,
    )
    """

```

_(This example is complete, it can be run "as is" — you'll need to add`asyncio.run(main())` to run `main`)_
This example shows how even a fairly simple agent delegation can lead to a complex control flow:
```
graph TD
 START --> joke_selection_agent
 joke_selection_agent --> joke_factory["joke_factory (tool)"]
 joke_factory --> joke_generation_agent
 joke_generation_agent --> get_jokes["get_jokes (tool)"]
 get_jokes --> http_request["HTTP request"]
 http_request --> get_jokes
 get_jokes --> joke_generation_agent
 joke_generation_agent --> joke_factory
 joke_factory --> joke_selection_agent
 joke_selection_agent --> END
```

## Programmatic agent hand-off
"Programmatic agent hand-off" refers to the scenario where multiple agents are called in succession, with application code and/or a human in the loop responsible for deciding which agent to call next.
Here agents don't need to use the same deps.
Here we show two agents used in succession, the first to find a flight and the second to extract the user's seat preference.
programmatic_handoff.py